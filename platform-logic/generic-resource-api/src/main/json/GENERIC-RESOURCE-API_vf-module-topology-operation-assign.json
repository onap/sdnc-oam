[
    {
        "id": "3c926793.88f8e8",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 112,
        "y": 77.02430057525635,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "8e22c419.c359c8"
            ]
        ]
    },
    {
        "id": "8e22c419.c359c8",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='1-4-2-20181108R1'>",
        "outputs": 1,
        "x": 225.85713577270508,
        "y": 116.83383846282959,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "5f18dcaf.1733e4"
            ]
        ]
    },
    {
        "id": "5f18dcaf.1733e4",
        "type": "method",
        "name": "method vf-module-topology-operation-assign",
        "xml": "<method rpc='vf-module-topology-operation-assign' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 225.42862701416016,
        "y": 157.02430057525635,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "bfee1c79.25f4d"
            ]
        ]
    },
    {
        "id": "fd852c3d.9d104",
        "type": "comment",
        "name": "vf-module-topology-operation-assign",
        "info": "",
        "comments": "",
        "x": 517.3210983276367,
        "y": 20,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "5621ecb6.141394",
        "type": "switchNode",
        "name": "switch request-action",
        "xml": "<switch test='`$vf-module-topology-operation-input.request-information.request-action`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 517.1905097961426,
        "y": 332.548122882843,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "27ea8761.a38d7",
                "39338a50.ba0c9e"
            ]
        ]
    },
    {
        "id": "27ea8761.a38d7",
        "type": "outcome",
        "name": "CreateVfModuleInstance",
        "xml": "<outcome value='CreateVfModuleInstance'>\n",
        "comments": "",
        "outputs": 1,
        "x": 779.2381248474121,
        "y": 309.6910090446472,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "e24ff94b.792af8"
            ]
        ]
    },
    {
        "id": "39338a50.ba0c9e",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 722.9047698974609,
        "y": 355.07199811935425,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "d1fcb1c9.df0ba"
            ]
        ]
    },
    {
        "id": "e24ff94b.792af8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 969.0952892303467,
        "y": 309.69104051589966,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "d1fcb1c9.df0ba",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"If svc-action is 'assign' then request-action must be 'CreateVfModuleInstance'\" />\n",
        "comments": "",
        "x": 987.9047775268555,
        "y": 355.40531063079834,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "b13c4350.370938",
        "type": "get-resource",
        "name": "get-resource VF_MODULE_MODEL",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VF_MODULE_MODEL WHERE customization_uuid = $vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid'\n  pfx='db.vf-module-model'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 564.5237770080566,
        "y": 423.6910729408264,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "571b8345.3afedc",
                "dee1e46d.9ae7c8"
            ]
        ]
    },
    {
        "id": "e0e2e8ab.4a9f9",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No model found for VF module customization UUID ' + $vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid`\" />\n",
        "comments": "",
        "x": 1005.9521980285645,
        "y": 448.1195454597473,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "571b8345.3afedc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 830.3094673156738,
        "y": 404.0719037055969,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "a50bc128.476618"
            ]
        ]
    },
    {
        "id": "dee1e46d.9ae7c8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 838.8808975219727,
        "y": 448.3576169013977,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "e0e2e8ab.4a9f9"
            ]
        ]
    },
    {
        "id": "a50bc128.476618",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VF_MODULE_MODEL table\" />\n",
        "comments": "",
        "x": 1005.309398651123,
        "y": 403.21480417251587,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "fe2663d3.ad286",
        "type": "switchNode",
        "name": "switch service-data.vnfs.vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 559.6190414428711,
        "y": 632.2624082565308,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "c2c56698.b84c38",
                "69d3fcd2.10cc54"
            ]
        ]
    },
    {
        "id": "c2c56698.b84c38",
        "type": "other",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 800.3333129882812,
        "y": 609.4051485061646,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "71fe3c04.e95c14"
            ]
        ]
    },
    {
        "id": "69d3fcd2.10cc54",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 800.0951538085938,
        "y": 650.3576669692993,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "f260a284.46dcc"
            ]
        ]
    },
    {
        "id": "72f655d6.4f3d74",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 138.19043731689453,
        "y": 3113.92930662632,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "32d3cb49.a3ac2c",
                "bd2a2adb.54955",
                "47c04218.47c91c",
                "5d68b4f6.9bd994",
                "4cbe79da.e231f8",
                "2b324bfd.26e0fc",
                "ed77dce7.269d88",
                "62ca20ce.f4db7",
                "cd265369.c8e4",
                "4772b1e6.c27368",
                "533af805.057888",
                "acb49220.447a5",
                "7f55025b.b643ec",
                "87463151.06bbf8",
                "5dbea689.bf65d8",
                "b96e4724.95afc",
                "9aa91724.bae38",
                "1a40ee60.b28b3a",
                "beb8db1.da0a8a8",
                "d321cb9d.153fd8",
                "ed92ecd.0ad519",
                "1d19c87b.60a2d",
                "e7b2dbd5.bd9e",
                "facd6ff7.1eed9",
                "f10f9580.1e0308",
                "e7fac88.832d038",
                "def45b38.4bd55",
                "7f309670.a38298",
                "b80a89b3.da4648",
                "1781a3e7.247ed4",
                "69eb61e5.2ebc48"
            ]
        ]
    },
    {
        "id": "71fe3c04.e95c14",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"There are no VNFs defined in MD-SAL\" />\n",
        "comments": "",
        "x": 966.999927520752,
        "y": 608.6909036636353,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "f260a284.46dcc",
        "type": "for",
        "name": "for each vnf",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 962.3332977294922,
        "y": 650.0242853164673,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "7deaebc4.ac7614"
            ]
        ]
    },
    {
        "id": "7deaebc4.ac7614",
        "type": "switchNode",
        "name": "switch service data vnf == input vnf",
        "xml": "<switch test='`$service-data.vnfs.vnf[$idx].vnf-id == $vf-module-topology-operation-input.vnf-information.vnf-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1213.6665954589844,
        "y": 649.6910133361816,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "51d14b17.854d7c"
            ]
        ]
    },
    {
        "id": "51d14b17.854d7c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1443.6666069030762,
        "y": 649.0243263244629,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "77c2e270.ed179c"
            ]
        ]
    },
    {
        "id": "b064f8ff.c2b5c",
        "type": "set",
        "name": "set vnf-index to -1",
        "xml": "<set>\n<parameter name='vnf-index' value='-1' />\n",
        "comments": "",
        "x": 508.66666412353516,
        "y": 563.6909074783325,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "d54d91d7.8b3e78",
        "type": "set",
        "name": "set vnf-index to idx",
        "xml": "<set>\n<parameter name='vnf-index' value='`$idx`' />\n",
        "comments": "",
        "x": 1765.3332443237305,
        "y": 620.024284362793,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "a5f7f097.af8f7",
        "type": "switchNode",
        "name": "switch vnf-index",
        "xml": "<switch test='`$vnf-index`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 498.6666717529297,
        "y": 700.3576040267944,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "be112994.00d4d8"
            ]
        ]
    },
    {
        "id": "be112994.00d4d8",
        "type": "outcome",
        "name": "-1",
        "xml": "<outcome value='-1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 677.000057220459,
        "y": 699.6909799575806,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "470db32f.b4b60c"
            ]
        ]
    },
    {
        "id": "470db32f.b4b60c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find VNF ID ' + $vf-module-topology-operation-input.vnf-information.vnf-id + ' in MD-SAL'`\" />\n",
        "comments": "",
        "x": 836.9999656677246,
        "y": 699.0242834091187,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "32d3cb49.a3ac2c",
        "type": "switchNode",
        "name": "switch vf-module_length",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 515.3333930969238,
        "y": 1330.3578004837036,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "7ab560e4.1a6d38",
                "5f6aa735.a00798"
            ]
        ]
    },
    {
        "id": "7ab560e4.1a6d38",
        "type": "other",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 772.7143478393555,
        "y": 1297.5005741119385,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "a613543c.e2cc28"
            ]
        ]
    },
    {
        "id": "a613543c.e2cc28",
        "type": "set",
        "name": "set vf-module-index=0",
        "xml": "<set>\n<parameter name='vf-module-index' value='0' />\n",
        "comments": "",
        "x": 960.3333854675293,
        "y": 1298.1673488616943,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "5f6aa735.a00798",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 773.1428909301758,
        "y": 1361.7864322662354,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "b60fe042.ca106"
            ]
        ]
    },
    {
        "id": "da90dded.536778",
        "type": "set",
        "name": "set vf-module-index = vf-module_length",
        "xml": "<set>\n<parameter name='vf-module-index' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' />\n",
        "comments": "",
        "x": 1158.3334312438965,
        "y": 1341.97682762146,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "d9bea081.a8647",
        "type": "for",
        "name": "for each existing VF module",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1117.428524017334,
        "y": 1386.072057723999,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "1df57378.738945"
            ]
        ]
    },
    {
        "id": "b60fe042.ca106",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 909.8571701049805,
        "y": 1361.7863578796387,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "da90dded.536778",
                "d9bea081.a8647"
            ]
        ]
    },
    {
        "id": "1df57378.738945",
        "type": "switchNode",
        "name": "switch vf-module-information.vf-module-id == service-data.vnfs.vnf[].vf-modules.vf-module[].vf-module-id",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-information.vf-module-id == $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1621.0476264953613,
        "y": 1385.6434688568115,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "885ce266.411c5"
            ]
        ]
    },
    {
        "id": "885ce266.411c5",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2063.666675567627,
        "y": 1385.2149200439453,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "1d1cc66f.ea78a2"
            ]
        ]
    },
    {
        "id": "1d1cc66f.ea78a2",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VF module id ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id\n       + ' already exists, and status is ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-data.vf-module-level-oper-status.order-status`\" />\n",
        "comments": "",
        "x": 2215.5715560913086,
        "y": 1385.2149066925049,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "a40536a4.046de8",
        "type": "comment",
        "name": "make sure this VF module doesn't exist already",
        "info": "",
        "comments": "",
        "x": 1647.4999732971191,
        "y": 1340.2709608078003,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "bd2a2adb.54955",
        "type": "set",
        "name": "set new vf-module_length",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length' value='`$vf-module-index + 1`' />\n",
        "comments": "",
        "x": 525.9999732971191,
        "y": 1441.3576555252075,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "47c04218.47c91c",
        "type": "set",
        "name": "set vf-module-topology data",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-topology-identifier.vf-module-id' value='`$vf-module-topology-operation-input.vf-module-information.vf-module-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-topology-identifier.vf-module-name' value='`$vf-module-topology-operation-input.vf-module-request-input.vf-module-name`' />\n<parameter name='tmp.vf-module-topology.vf-module-topology-identifier.vf-module-type' value='`$vf-module-topology-operation-input.vf-module-information.vf-module-type`' />\n<parameter name='tmp.vf-module-topology.tenant' value='`$vf-module-topology-operation-input.vf-module-request-input.tenant`' />\n<parameter name='tmp.vf-module-topology.aic-cloud-region' value='`$vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region`' />\n",
        "comments": "",
        "x": 532.4999923706055,
        "y": 1553.857762336731,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "b167e5bd.dfc368",
        "type": "set",
        "name": "set aic-clli",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.aic-clli'\n   value='`$aai-uid-split[$aai-uid-split_length - 1]`' />\n",
        "comments": "",
        "x": 1293.4522514343262,
        "y": 1713.0956888198853,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "5d68b4f6.9bd994",
        "type": "switchNode",
        "name": "switch aic-clli",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.aic-clli`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 492.4999122619629,
        "y": 1827.0480289459229,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "8b438660.c4b018"
            ]
        ]
    },
    {
        "id": "8b438660.c4b018",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 637.7856025695801,
        "y": 1827.0480976104736,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "a98150bd.2afc08"
            ]
        ]
    },
    {
        "id": "a98150bd.2afc08",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find aic-clli in AAI for aic-cloud-region ' + $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region`\" />\n",
        "comments": "",
        "x": 784.9284629821777,
        "y": 1826.6195316314697,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "4cbe79da.e231f8",
        "type": "get-resource",
        "name": "get-resource cloud region",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"cloud-region\" \n\t\tkey=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner AND \n\t\t     cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\"\n        pfx='aai.cloud-region' local-only='false' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 531.3571281433105,
        "y": 1627.1913003921509,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "a77893f2.866208",
                "54a4425.3eaf1bc"
            ]
        ]
    },
    {
        "id": "54a4425.3eaf1bc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 745.6033210754395,
        "y": 1645.3421564102173,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "ba04d0eb.3dae9"
            ]
        ]
    },
    {
        "id": "ba04d0eb.3dae9",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error retrieving cloud region from AAI\" />\n",
        "comments": "",
        "x": 920.6032943725586,
        "y": 1645.3421926498413,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "a77893f2.866208",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 754.5319175720215,
        "y": 1603.6278896331787,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "234062c6.8fefc6"
            ]
        ]
    },
    {
        "id": "234062c6.8fefc6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Cloud region not found in AAI\" />\n",
        "comments": "",
        "x": 920.8811950683594,
        "y": 1602.933466911316,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "77c2e270.ed179c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1592.0000686645508,
        "y": 647.9440250396729,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "d54d91d7.8b3e78",
                "bfe3038c.a182"
            ]
        ]
    },
    {
        "id": "bfe3038c.a182",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 1727.0000343322754,
        "y": 669.6106109619141,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "904b2f3e.415788",
        "type": "set",
        "name": "set from DB",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-invariant-uuid'\n  value='`$db.vf-module-model.invariant-uuid`' />\n",
        "comments": "",
        "x": 906.833251953125,
        "y": 1868.44402217865,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "2b324bfd.26e0fc",
        "type": "switchNode",
        "name": "switch input model-invariant-uuid",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-invariant-uuid`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 550.6903266906738,
        "y": 1891.2684659957886,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "385357de.ea8398",
                "299c303.4cf2ad"
            ]
        ]
    },
    {
        "id": "385357de.ea8398",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 756.3569984436035,
        "y": 1868.4114294052124,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "904b2f3e.415788"
            ]
        ]
    },
    {
        "id": "299c303.4cf2ad",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 757.7855949401855,
        "y": 1912.6970205307007,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "f7953ce0.dfc7c"
            ]
        ]
    },
    {
        "id": "f7953ce0.dfc7c",
        "type": "set",
        "name": "set from input",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-invariant-uuid'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-invariant-uuid`' />\n",
        "comments": "",
        "x": 912.0713310241699,
        "y": 1912.1255927085876,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "733eafb4.30c8d",
        "type": "set",
        "name": "set from DB",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-uuid'\n  value='`$db.vf-module-model.uuid`' />\n",
        "comments": "",
        "x": 907.7855224609375,
        "y": 1956.9826984405518,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "ed77dce7.269d88",
        "type": "switchNode",
        "name": "switch input model-uuid",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-uuid`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 523.3093452453613,
        "y": 1979.8072032928467,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "9008b525.6a4788",
                "f3c2a46.0aaa8d8"
            ]
        ]
    },
    {
        "id": "9008b525.6a4788",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 757.3093185424805,
        "y": 1956.950135231018,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "733eafb4.30c8d"
            ]
        ]
    },
    {
        "id": "f3c2a46.0aaa8d8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 758.7379150390625,
        "y": 2001.2357263565063,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "c4a21df.1175a6"
            ]
        ]
    },
    {
        "id": "c4a21df.1175a6",
        "type": "set",
        "name": "set from input",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-uuid'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-uuid`' />\n",
        "comments": "",
        "x": 913.0236511230469,
        "y": 2000.6642985343933,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "1f38b7fe.ab1b8",
        "type": "set",
        "name": "set from DB",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-version'\n  value='`$db.vf-module-model.version`' />\n",
        "comments": "",
        "x": 904.9284553527832,
        "y": 2045.8399057388306,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "62ca20ce.f4db7",
        "type": "switchNode",
        "name": "switch input model-version",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-version`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 531.4522171020508,
        "y": 2068.6643505096436,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "41183df5.95a124",
                "87e93be5.4c098"
            ]
        ]
    },
    {
        "id": "41183df5.95a124",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 754.4522018432617,
        "y": 2045.807312965393,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "1f38b7fe.ab1b8"
            ]
        ]
    },
    {
        "id": "87e93be5.4c098",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 755.8807983398438,
        "y": 2090.0929040908813,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "5cce1634.662ce8"
            ]
        ]
    },
    {
        "id": "5cce1634.662ce8",
        "type": "set",
        "name": "set from input",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-version'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-version`' />\n",
        "comments": "",
        "x": 910.1665344238281,
        "y": 2089.5214762687683,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "c2177442.81abc",
        "type": "set",
        "name": "set from DB",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-name'\n  value='`$db.vf-module-model.name`' />\n",
        "comments": "",
        "x": 904.9284553527832,
        "y": 2132.9827280044556,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "cd265369.c8e4",
        "type": "switchNode",
        "name": "switch input model-name",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 526.4522171020508,
        "y": 2155.8071727752686,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "68b6f8a8.a68c3",
                "4f8262ee.1ebcac"
            ]
        ]
    },
    {
        "id": "68b6f8a8.a68c3",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 754.4522018432617,
        "y": 2132.950135231018,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "c2177442.81abc"
            ]
        ]
    },
    {
        "id": "4f8262ee.1ebcac",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 755.8807983398438,
        "y": 2177.2357263565063,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "2f3b60e4.144198"
            ]
        ]
    },
    {
        "id": "2f3b60e4.144198",
        "type": "set",
        "name": "set from input",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-name'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-name`' />\n",
        "comments": "",
        "x": 910.1665344238281,
        "y": 2176.6642985343933,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "4772b1e6.c27368",
        "type": "set",
        "name": "set model-customization-uuid",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-customization-uuid'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid`' />\n",
        "comments": "",
        "x": 540.9045524597168,
        "y": 2228.316162109375,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "533af805.057888",
        "type": "set",
        "name": "set vf-module-id",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id'\n   value='`$vf-module-topology-operation-input.vf-module-information.vf-module-id`' />\n",
        "comments": "",
        "x": 494.09519958496094,
        "y": 1497.0393381118774,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "acb49220.447a5",
        "type": "for",
        "name": "for each cloud-region relationship",
        "xml": "<for index='idx' start='0' end='`$aai.cloud-region.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 553.6109428405762,
        "y": 1715.6979837417603,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "59afb518.40828c"
            ]
        ]
    },
    {
        "id": "59afb518.40828c",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$aai.cloud-region.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 801.2894859313965,
        "y": 1715.4479131698608,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "5978af5d.b1d4a"
            ]
        ]
    },
    {
        "id": "5978af5d.b1d4a",
        "type": "outcome",
        "name": "complex",
        "xml": "<outcome value='complex'>\n",
        "comments": "",
        "outputs": 1,
        "x": 970.7538070678711,
        "y": 1714.8407354354858,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "7b948c9e.d27a6c"
            ]
        ]
    },
    {
        "id": "2a23b2e8.9b4796",
        "type": "execute",
        "name": "split related-link",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split'>\n   <parameter name='ctx_memory_result_key' value='aai-uid-split' />\n   <parameter name='original_string' value='`$aai.cloud-region.relationship-list.relationship[$idx].related-link`' />\n   <parameter name='regex' value='/' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1310.848964691162,
        "y": 1669.269310951233,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "7b948c9e.d27a6c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1130.51566696167,
        "y": 1715.9360990524292,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "2a23b2e8.9b4796",
                "d28b8bb2.cca418",
                "b167e5bd.dfc368"
            ]
        ]
    },
    {
        "id": "d28b8bb2.cca418",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 1280.5156288146973,
        "y": 1759.269395828247,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "c4f07890.7e2328",
        "type": "execute",
        "name": "execute PropertiesNode",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 531.0476226806641,
        "y": 186.5481081008911,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "beb8db1.da0a8a8",
        "type": "set",
        "name": "set order-status to PendingCreate",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.order-status'\n  value='PendingCreate' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-rpc-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.request-action`' />\n",
        "comments": "",
        "x": 436.2622375488281,
        "y": 7324.904296875,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "ed92ecd.0ad519",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 375.8335418701172,
        "y": 7438.522626876831,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "1a40ee60.b28b3a",
        "type": "set",
        "name": "copy input data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.sdnc-request-header.'\n   value='$vf-module-topology-operation-input.sdnc-request-header.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.request-information.'\n   value='$vf-module-topology-operation-input.request-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.service-information.'\n   value='$vf-module-topology-operation-input.service-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vnf-information.'\n   value='$vf-module-topology-operation-input.vnf-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-information.'\n   value='$vf-module-topology-operation-input.vf-module-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-request-input.'\n   value='$vf-module-topology-operation-input.vf-module-request-input.' />\n\n",
        "comments": "",
        "x": 392.11924743652344,
        "y": 7181.252753674984,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "9aa91724.bae38",
        "type": "set",
        "name": "copy vf-module-topology data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.' value='tmp.vf-module-topology.' />\n",
        "comments": "",
        "x": 437.00025177001953,
        "y": 7133.038265645504,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "d321cb9d.153fd8",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vfmodule.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 370.71449279785156,
        "y": 7390.752443313599,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "87463151.06bbf8",
        "type": "save",
        "name": "update vf-module",
        "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vf-module\"\n   key=\"vf-module.vf-module-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id\n      AND generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"vf-module-name\" value=\"`$tmp.vf-module-topology.vf-module-topology-identifier.vf-module-name`\" />\n<parameter name=\"model-invariant-id\" value=\"`$tmp.vf-module-topology.onap-model-information.model-invariant-uuid`\" />\n<parameter name=\"model-version-id\" value=\"`$tmp.vf-module-topology.onap-model-information.model-uuid`\" />\n<parameter name=\"model-customization-id\" value=\"`$tmp.vf-module-topology.onap-model-information.model-customization-uuid`\" />\n<parameter name=\"selflink\" value=\"`$vf-module-object-path`\" />\n<parameter name=\"automated-assignment\" value=\"`$automated-assignment`\" />",
        "comments": "",
        "outputs": 1,
        "x": 456.1429786682129,
        "y": 4335.039919495583,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "87a0c83.d4f18b8",
                "2196c18e.80b246"
            ]
        ]
    },
    {
        "id": "e5deac0d.5b71f8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No vf-module found in AAI for vf module ID ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id`\" />\n",
        "comments": "",
        "x": 961.1906547546387,
        "y": 4369.801350176334,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "87a0c83.d4f18b8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 631.2146186828613,
        "y": 4303.420541405678,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "c70cad3e.594bf8"
            ]
        ]
    },
    {
        "id": "2196c18e.80b246",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 639.7859916687012,
        "y": 4372.039631426334,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "1eb8d0e0.ac8f6f"
            ]
        ]
    },
    {
        "id": "d82a525d.d6db7",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vf-module in AAI\" />\n",
        "comments": "",
        "x": 966.2145729064941,
        "y": 4321.564098000526,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "7f55025b.b643ec",
        "type": "set",
        "name": "set vf-module-object-path",
        "xml": "<set>\n<parameter name='vf-module-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vf-modules/vf-module/'\n + $vf-module-topology-operation-input.vf-module-information.vf-module-id\n + '/vf-module-data/vf-module-topology/'`\"/>\n<parameter name='vnf-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vnf-topology/'`\"/>\n<parameter name='service-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n",
        "comments": "",
        "x": 479.80978775024414,
        "y": 4210.564148545265,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "79853c6f.4b0794",
        "type": "save",
        "name": "save vf-module relationships",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vf-module:relationship-list\"\n   key=\"vf-module.vf-module-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id\n      AND generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1249.8335342407227,
        "y": 5893.192313909531,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "ac4bfc2f.5cef8",
                "85becea2.445cd8"
            ]
        ]
    },
    {
        "id": "ac4bfc2f.5cef8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1469.666877746582,
        "y": 5864.064058065414,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "f57dfbe7.74b008"
            ]
        ]
    },
    {
        "id": "85becea2.445cd8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1478.238410949707,
        "y": 5916.683202505112,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "85b716e7.f0d18"
            ]
        ]
    },
    {
        "id": "d4f9dca3.c75278",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vf-module relationships in AAI\" />\n",
        "comments": "",
        "x": 1804.6670112609863,
        "y": 5883.873954534531,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "5dbea689.bf65d8",
        "type": "for",
        "name": "for each vm-type",
        "xml": "<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 429.50025939941406,
        "y": 5658.5258667469025,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "f3590468.ca37a8"
            ]
        ]
    },
    {
        "id": "7375d6bd.7dd03",
        "type": "for",
        "name": "for each vm-network",
        "xml": "<for silentFailure='true' index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 826.5002708435059,
        "y": 6077.192698955536,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "9c50ae11.ecd5d8"
            ]
        ]
    },
    {
        "id": "da118248.b8eea8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No l3-network found in AAI for network ID '\n      + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-id`\" />\n",
        "comments": "",
        "x": 1806.5003852844238,
        "y": 5933.858495473862,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "b96e4724.95afc",
        "type": "for",
        "name": "for each vm-type",
        "xml": "<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 403.92879486083984,
        "y": 7025.571922242641,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "3aa89432.ca7a1c"
            ]
        ]
    },
    {
        "id": "3aa89432.ca7a1c",
        "type": "for",
        "name": "for each vm",
        "xml": "<for index='vm-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-count`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 598.928825378418,
        "y": 7024.904930055141,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "8a1e25bc.ee0138"
            ]
        ]
    },
    {
        "id": "f7264697.889458",
        "type": "save",
        "name": "save VIPR_CONFIGURATION",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource\" resource=\"SQL\"\nkey=\"INSERT INTO VIPR_CONFIGURATION (vnf_id, vnf_name, ecomp_service_instance_id, vm_name, cloud_region_id, cloud_owner) VALUES ( $service-data.vnfs.vnf[$vnf-index].vnf-id , $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.vnf-name , $service-data.service-information.service-instance-id , $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vm-name[$vm-index] , $tmp.vf-module-topology.aic-cloud-region , $prop.cloud-region.cloud-owner )\" >",
        "comments": "",
        "outputs": 1,
        "x": 990.5955276489258,
        "y": 7047.57258027792,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "ebadf32a.3c0bf"
            ]
        ]
    },
    {
        "id": "903c2202.9792d",
        "type": "comment",
        "name": "Not a failure",
        "info": "",
        "comments": "",
        "x": 1510.5954284667969,
        "y": 7047.572585046291,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "ebadf32a.3c0bf",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1200.5955123901367,
        "y": 7047.572730004787,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "5ca4a5a3.8a7004"
            ]
        ]
    },
    {
        "id": "5ca4a5a3.8a7004",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API.vf-module-topology-operation-assign:REQID\"/>\n<parameter name=\"field3\" value=\"`$vf-module-topology-operation-input.sdnc-request-header.svc-request-id`\"/>\n<parameter name=\"field4\" value=\"Failed to insert VIPR_CONFIGURATION record\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1343.928955078125,
        "y": 7047.572567880154,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "d3f1c108.98d52",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1373.9290771484375,
        "y": 6998.904281556606,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "cf4b2a0c.51aca"
            ]
        ]
    },
    {
        "id": "2661f5f7.f49d62",
        "type": "comment",
        "name": "Not a failure",
        "info": "",
        "comments": "",
        "x": 1697.2621307373047,
        "y": 6997.2381038069725,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "cf4b2a0c.51aca",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API.vf-module-topology-operation-assign:REQID\"/>\n<parameter name=\"field3\" value=\"`$vf-module-topology-operation-input.sdnc-request-header.svc-request-id`\"/>\n<parameter name=\"field4\" value=\"Failed to insert VIPR_CONFIGURATION record\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1519.929012298584,
        "y": 6998.904914796352,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "8a1e25bc.ee0138",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 767.2622184753418,
        "y": 7023.904774606228,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "b143aaa7.b261e",
                "f7264697.889458"
            ]
        ]
    },
    {
        "id": "b143aaa7.b261e",
        "type": "delete",
        "name": "delete any pre-existing records in VIPR_CONFIGURATION",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='DELETE from VIPR_CONFIGURATION WHERE vnf_id = $service-data.vnfs.vnf[$vnf-index].vnf-id\n     AND ecomp_service_instance_id = $service-data.service-information.service-instance-id\n     AND vm_name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vm-name[$vm-index]' >",
        "comments": "",
        "outputs": 1,
        "x": 1080.5955429077148,
        "y": 6999.238914430141,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "d3f1c108.98d52"
            ]
        ]
    },
    {
        "id": "c70cad3e.594bf8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 789.500186920166,
        "y": 4303.191212296486,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "d82a525d.d6db7",
                "8a1998a9.fb5c4"
            ]
        ]
    },
    {
        "id": "1eb8d0e0.ac8f6f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 790.5001029968262,
        "y": 4369.857502520084,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "e5deac0d.5b71f8",
                "8a1998a9.fb5c4"
            ]
        ]
    },
    {
        "id": "f57dfbe7.74b008",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1638.1668815612793,
        "y": 5863.858327627182,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "d4f9dca3.c75278",
                "751caeb9.f5faf"
            ]
        ]
    },
    {
        "id": "85b716e7.f0d18",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1633.1668815612793,
        "y": 5916.85817027092,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "da118248.b8eea8",
                "751caeb9.f5faf"
            ]
        ]
    },
    {
        "id": "9c7304a7.47b438",
        "type": "execute",
        "name": "execute RestApiCallNode - get preload-list",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value=\"`$prop.controller.url + $prop.restapi.preloadinformation + $vf-module-topology-operation-input.vf-module-request-input.vf-module-name + '/vf-module'`\" />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-preload\" />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 975.3333778381348,
        "y": 2373.1915349960327,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "688ed38d.1404a4",
                "97bc7502.9be918"
            ]
        ]
    },
    {
        "id": "688ed38d.1404a4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1238.6666933695474,
        "y": 2336.524751345316,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "5a744c0f.0a917c"
            ]
        ]
    },
    {
        "id": "97bc7502.9be918",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1241.9999809265137,
        "y": 2411.5247468948364,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "432a7e86.1cf1f"
            ]
        ]
    },
    {
        "id": "5a744c0f.0a917c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1400.333381652832,
        "y": 2334.8580360412598,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "e468489c.39809"
            ]
        ]
    },
    {
        "id": "432a7e86.1cf1f",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1396.9999885559082,
        "y": 2411.5245885849,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "3588e36f.27b7f4"
            ]
        ]
    },
    {
        "id": "e468489c.39809",
        "type": "switchNode",
        "name": "switch mdsal-preload.response-code",
        "xml": "<switch test='`$mdsal-preload.response-code`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1628.6666831970215,
        "y": 2334.8580770492554,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "62edebed.7913a4",
                "37d8f344.138aec"
            ]
        ]
    },
    {
        "id": "62edebed.7913a4",
        "type": "outcome",
        "name": "404 (not found)",
        "xml": "<outcome value='404'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1880.3334197998047,
        "y": 2298.191451072693,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "eae1dfc6.c9a018"
            ]
        ]
    },
    {
        "id": "eae1dfc6.c9a018",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-operation-assign-no-preload",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-operation-assign-no-preload' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2276.9998893737793,
        "y": 2296.5245790481567,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "8901225d.847b7"
            ]
        ]
    },
    {
        "id": "8901225d.847b7",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2647.0000381469727,
        "y": 2294.858115196228,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "aa023fe5.47b5f8"
            ]
        ]
    },
    {
        "id": "d0aa2f4d.891c28",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n",
        "comments": "",
        "x": 2955.3334159851074,
        "y": 2326.5248517990112,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "37d8f344.138aec",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1855.3334999084473,
        "y": 2354.8579416275024,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "e944765.ab28a88"
            ]
        ]
    },
    {
        "id": "bcf4c56.2e632b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error retrieving preload-information\" />\n",
        "comments": "",
        "x": 2168.666404724121,
        "y": 2371.52436542511,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "3588e36f.27b7f4",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-operation-assign-preload",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-operation-assign-preload' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1760.3332786560059,
        "y": 2413.191336631775,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "20ee04ba.8175bc"
            ]
        ]
    },
    {
        "id": "20ee04ba.8175bc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2116.000141143799,
        "y": 2411.5249547958374,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "589f1683.8c95c"
            ]
        ]
    },
    {
        "id": "b1df2727.b9c3d",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n",
        "comments": "",
        "x": 2424.333393096924,
        "y": 2433.191849708557,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "f3590468.ca37a8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 620.0003280639648,
        "y": 5659.35910153389,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "7375d6bd.7dd03",
                "d5512709.6a25b8"
            ]
        ]
    },
    {
        "id": "d5512709.6a25b8",
        "type": "for",
        "name": "for each vnfc",
        "xml": "<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 871.0003776550293,
        "y": 4864.025192737579,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "753035d1.1e8274"
            ]
        ]
    },
    {
        "id": "ce29a815.f5683",
        "type": "save",
        "name": "save vnfc to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vnfc\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\" >\n<parameter name=\"vnfc-name\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name`\" />\n<parameter name=\"nfc-naming-code\" value=\"`$tmp.nfc-naming-code`\" />\n<parameter name=\"nfc-function\" value=\"`$tmp.nfc-function`\" />\n<parameter name=\"model-invariant-id\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].invariant-uuid`\" />\n<parameter name=\"model-version-id\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].uuid`\" />\n<parameter name=\"model-customization-id\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].model-customization-uuid`\" />\n<parameter name=\"orchestration-status\" value=\"`PendingCreate`\" />\n<parameter name=\"in-maint\" value=\"true\" />\n<parameter name=\"prov-status\" value=\"`PREPROV`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1597.00044631958,
        "y": 4672.3591232299805,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "b05fd296.8c44d8",
                "9ce78c9c.21d2e"
            ]
        ]
    },
    {
        "id": "753035d1.1e8274",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1039.3336791992188,
        "y": 4864.692019939423,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "2b20b1ce.c729ce",
                "d7c01db4.00c9a",
                "2fb493e6.57a1c4",
                "8ca3ab85.032598",
                "805bb33d.dc18f",
                "57662986.d12c8"
            ]
        ]
    },
    {
        "id": "b05fd296.8c44d8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1788.0004844665527,
        "y": 4624.692457199097,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "f1e503ea.34a2d8"
            ]
        ]
    },
    {
        "id": "d42c0b98.75f36",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error saving vnfc to AAI\" />\n",
        "comments": "",
        "x": 2127.0006370544434,
        "y": 4658.835712790489,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "f1e503ea.34a2d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1953.1671714782715,
        "y": 4638.820290505886,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "d42c0b98.75f36",
                "6cb8c914.ed3b6"
            ]
        ]
    },
    {
        "id": "2fb493e6.57a1c4",
        "type": "save",
        "name": "save vnfc relationships",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vnfc:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"generic-vnf\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/generic-vnfs/generic-vnf/' +\n        $vf-module-topology-operation-input.vnf-information.vnf-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"vf-module\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/generic-vnfs/generic-vnf/' +\n        $vf-module-topology-operation-input.vnf-information.vnf-id +\n        '/vf-modules/vf-module/' +\n        $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1263.9049644470215,
        "y": 4772.978354930878,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "90db0abc.901b8",
                "5dbb78a0.db6928"
            ]
        ]
    },
    {
        "id": "29cef8c8.08702",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vnfc relationships in AAI\" />\n",
        "comments": "",
        "x": 1773.904899597168,
        "y": 4764.64519071579,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "ee073caa.2c8978",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vnfc relationships\" />\n",
        "comments": "",
        "x": 1769.0718078613281,
        "y": 4816.296397686005,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "60b5b7f4.1931b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1595.7381553649902,
        "y": 4746.29597902298,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "29cef8c8.08702",
                "6cb8c914.ed3b6"
            ]
        ]
    },
    {
        "id": "1c2653f1.974004",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1595.7382316589355,
        "y": 4799.295737743378,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "ee073caa.2c8978",
                "6cb8c914.ed3b6"
            ]
        ]
    },
    {
        "id": "90db0abc.901b8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1438.9050407409668,
        "y": 4746.311648845673,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "60b5b7f4.1931b"
            ]
        ]
    },
    {
        "id": "5dbb78a0.db6928",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1447.4765739440918,
        "y": 4798.93079328537,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "1c2653f1.974004"
            ]
        ]
    },
    {
        "id": "2b20b1ce.c729ce",
        "type": "for",
        "name": "for each vnfc-network-role",
        "xml": "<for silentFailure='true' index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1261.3810844421387,
        "y": 5189.834763050079,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "8ef35028.d3c7d8"
            ]
        ]
    },
    {
        "id": "1d19c87b.60a2d",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vfmoduleb.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 481.9999885559082,
        "y": 2497.73858499527,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "c587555a.9764c8",
        "type": "for",
        "name": "for each vnfc-subnetwork-role",
        "xml": "<for silentFailure='true' index='subnet-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1717.3336219787598,
        "y": 5153.025196552277,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "646ce656.488b28"
            ]
        ]
    },
    {
        "id": "646ce656.488b28",
        "type": "for",
        "name": "for each vnfc-address-family",
        "xml": "<for silentFailure='true' index='address-family-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1984.6669654846191,
        "y": 5152.025684833527,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "830c0220.91b9c"
            ]
        ]
    },
    {
        "id": "cdc035b3.67e6e8",
        "type": "for",
        "name": "for each vnfc-ip-address",
        "xml": "<for silentFailure='true' index='address-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2416.666576385498,
        "y": 5218.691384315491,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "4ac2f856.4d21a"
            ]
        ]
    },
    {
        "id": "830c0220.91b9c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2195.666736602783,
        "y": 5152.025141239166,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "dcce10c4.7be118",
                "cdc035b3.67e6e8"
            ]
        ]
    },
    {
        "id": "dcce10c4.7be118",
        "type": "set",
        "name": "set tmp.address-family",
        "xml": "<set>\n<parameter name='tmp.address-family'\n  value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-address-family`' />\n",
        "comments": "",
        "x": 2415.667064666748,
        "y": 5072.025038719177,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "4ac2f856.4d21a",
        "type": "switchNode",
        "name": "switch address family",
        "xml": "<switch test='`$tmp.address-family`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2655.6666679382324,
        "y": 5217.025206565857,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "d2b5d9a8.4fd5e8",
                "24a90faa.98e37"
            ]
        ]
    },
    {
        "id": "d2b5d9a8.4fd5e8",
        "type": "outcome",
        "name": "ipv4",
        "xml": "<outcome value='ipv4'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2852.809673309326,
        "y": 5120.596467018127,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "422e7141.76707"
            ]
        ]
    },
    {
        "id": "24a90faa.98e37",
        "type": "outcome",
        "name": "ipv6",
        "xml": "<outcome value='ipv6'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2850.4287452697754,
        "y": 5300.358498573303,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "644b913f.522e68"
            ]
        ]
    },
    {
        "id": "63f4b67.4ec08c8",
        "type": "comment",
        "name": "Fixed IPs",
        "info": "",
        "comments": "",
        "x": 1734.3336372375488,
        "y": 5114.692573547363,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "1637640f.3b1ca4",
        "type": "save",
        "name": "save l3-interface-ipv4-address-list object to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-interface-ipv4-address-list\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\n\t  AND l3-interface-ipv4-address-list.l3-interface-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address\" >\n<parameter name=\"l3-interface-ipv4-address\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address`\" />\n<parameter name=\"l3-interface-ipv4-prefix-length\" value=\"32\" />\n<parameter name=\"is-floating\" value=\"false\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3296.1428031921387,
        "y": 5068.929546991985,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "516f7849.a1f358"
            ]
        ]
    },
    {
        "id": "422e7141.76707",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3002.809673309326,
        "y": 5120.59638563792,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "1637640f.3b1ca4",
                "d964b923.e557d"
            ]
        ]
    },
    {
        "id": "29157e1f.b307d2",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error creating l3-interface-ipv4-address-list object in AAI\" />\n",
        "comments": "",
        "x": 3879.4763221740723,
        "y": 5087.263206164043,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "8892b8a2.cfbe48",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3709.642677307129,
        "y": 5068.914039293926,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "29157e1f.b307d2",
                "ab19f58c.bd384"
            ]
        ]
    },
    {
        "id": "516f7849.a1f358",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3552.8095626831055,
        "y": 5068.929709116619,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "8892b8a2.cfbe48"
            ]
        ]
    },
    {
        "id": "d964b923.e557d",
        "type": "save",
        "name": "save l3-interface-ipv4-address-list relationships",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"l3-interface-ipv4-address-list:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\n\t  AND l3-interface-ipv4-address-list.l3-interface-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"subnet\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id +\n        '/subnets/subnet/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].subnet-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3291.1430473327637,
        "y": 5167.262965838116,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "8ae58a30.bea5e",
                "c00d26fd.0b7fa8"
            ]
        ]
    },
    {
        "id": "a4c2dc75.a86138",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating l3-interface-ipv4-address-list relationships in AAI\" />\n",
        "comments": "",
        "x": 3877.809429168701,
        "y": 5158.929637591045,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "623384cf.019e64",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating l3-interface-ipv4-address-list relationships\" />\n",
        "comments": "",
        "x": 3877.976291656494,
        "y": 5208.914095560711,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "c225d55b.e00f4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3711.309299468994,
        "y": 5138.914010683697,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "a4c2dc75.a86138",
                "ab19f58c.bd384"
            ]
        ]
    },
    {
        "id": "fa08395c.d3bfd",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3711.3093757629395,
        "y": 5191.913769404095,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "623384cf.019e64",
                "ab19f58c.bd384"
            ]
        ]
    },
    {
        "id": "8ae58a30.bea5e",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3554.4761848449707,
        "y": 5138.92968050639,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "c225d55b.e00f4"
            ]
        ]
    },
    {
        "id": "c00d26fd.0b7fa8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3563.0477180480957,
        "y": 5191.548824946087,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "fa08395c.d3bfd"
            ]
        ]
    },
    {
        "id": "9f97d2b1.490b88",
        "type": "save",
        "name": "save l3-interface-ipv6-address-list object to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-interface-ipv6-address-list\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\n\t  AND l3-interface-ipv6-address-list.l3-interface-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address\" >\n<parameter name=\"l3-interface-ipv6-address\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address`\" />\n<parameter name=\"l3-interface-ipv6-prefix-length\" value=\"128\" />\n<parameter name=\"is-floating\" value=\"false\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3294.9525413513184,
        "y": 5247.977602958679,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "575beeb7.db0eb8"
            ]
        ]
    },
    {
        "id": "644b913f.522e68",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3001.619411468506,
        "y": 5299.644441604614,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "9f97d2b1.490b88",
                "1c9488a1.dbf7bf"
            ]
        ]
    },
    {
        "id": "1b3c364b.f4083a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error creating l3-interface-ipv6-address-list object in AAI\" />\n",
        "comments": "",
        "x": 3878.286060333252,
        "y": 5266.311262130737,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "55bcda47.670024",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3708.4524154663086,
        "y": 5247.96209526062,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "1b3c364b.f4083a",
                "ab19f58c.bd384"
            ]
        ]
    },
    {
        "id": "575beeb7.db0eb8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3551.619300842285,
        "y": 5247.977765083313,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "55bcda47.670024"
            ]
        ]
    },
    {
        "id": "1c9488a1.dbf7bf",
        "type": "save",
        "name": "save l3-interface-ipv6-address-list relationships",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"l3-interface-ipv6-address-list:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\n\t  AND l3-interface-ipv6-address-list.l3-interface-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"subnet\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id +\n        '/subnets/subnet/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].subnet-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3289.9527854919434,
        "y": 5346.31102180481,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "3f5a76d4.d0b6ca",
                "a74ee1d6.e4ad68"
            ]
        ]
    },
    {
        "id": "b0e3be9c.c1618",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating l3-interface-ipv6-address-list relationships in AAI\" />\n",
        "comments": "",
        "x": 3876.619167327881,
        "y": 5337.977693557739,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "66075d54.cd658c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating l3-interface-ipv6-address-list relationships\" />\n",
        "comments": "",
        "x": 3880.1193885803223,
        "y": 5384.628710031509,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "24ecf111.9044a6",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3710.119037628174,
        "y": 5317.962066650391,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "b0e3be9c.c1618",
                "ab19f58c.bd384"
            ]
        ]
    },
    {
        "id": "1cf894fa.a3757b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3710.119113922119,
        "y": 5370.961825370789,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "66075d54.cd658c",
                "ab19f58c.bd384"
            ]
        ]
    },
    {
        "id": "3f5a76d4.d0b6ca",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3553.2859230041504,
        "y": 5317.9777364730835,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "24ecf111.9044a6"
            ]
        ]
    },
    {
        "id": "a74ee1d6.e4ad68",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3561.8574562072754,
        "y": 5370.596880912781,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "1cf894fa.a3757b"
            ]
        ]
    },
    {
        "id": "9c50ae11.ecd5d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1016.3335914611816,
        "y": 6076.692138195038,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "f765dfab.5a8ab8",
                "79853c6f.4b0794",
                "7d3563ad.bafe6c",
                "eb32fc41.713248"
            ]
        ]
    },
    {
        "id": "be8fcb49.a0ce6",
        "type": "for",
        "name": "for each vnfc",
        "xml": "<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1664.3337669372559,
        "y": 6199.025886058807,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "bc8c9230.4f5cf8"
            ]
        ]
    },
    {
        "id": "18f68602.60a112",
        "type": "save",
        "name": "save vip-ipv4-address-list object to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vip-ipv4-address-list\" \n\tkey=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv4-address-list.vip-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4[$ipv4-index]\" >\n<parameter name=\"vip-ipv4-address\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4[$ipv4-index]`\" />\n<parameter name=\"vip-ipv4-prefix-length\" value=\"32\" />\n<parameter name=\"is-floating\" value=\"false\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1747.3336219787598,
        "y": 6030.358897686005,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "15b4c37c.7ee625",
                "f6385911.c3478"
            ]
        ]
    },
    {
        "id": "7d3563ad.bafe6c",
        "type": "for",
        "name": "for each floating ipv4 address",
        "xml": "<for silentFailure='true' index='ipv4-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1255.3336143493652,
        "y": 6088.358970165253,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "643639b2.a807b8"
            ]
        ]
    },
    {
        "id": "643639b2.a807b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1481.3336143493652,
        "y": 6086.358970165253,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "18f68602.60a112",
                "79481073.dabf6",
                "be8fcb49.a0ce6"
            ]
        ]
    },
    {
        "id": "4f4eea49.69364c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error saving vip-ipv4-address-list in AAI\" />\n",
        "comments": "",
        "x": 2309.3336219787598,
        "y": 6020.358897686005,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "87cb782b.0a68b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error saving vip-ipv4-address-list\" />\n",
        "comments": "",
        "x": 2309.5004844665527,
        "y": 6070.34335565567,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "1002735d.48782d",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2142.8334922790527,
        "y": 6000.343270778656,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "4f4eea49.69364c",
                "7d8d801d.5aba58"
            ]
        ]
    },
    {
        "id": "9394e2e6.c9ed4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2142.833568572998,
        "y": 6053.343029499054,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "87cb782b.0a68b8",
                "7d8d801d.5aba58"
            ]
        ]
    },
    {
        "id": "15b4c37c.7ee625",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1986.0003776550293,
        "y": 6000.358940601349,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "1002735d.48782d"
            ]
        ]
    },
    {
        "id": "f6385911.c3478",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1994.5719108581543,
        "y": 6052.978085041046,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "9394e2e6.c9ed4"
            ]
        ]
    },
    {
        "id": "1f81499d.5e5af6",
        "type": "save",
        "name": "save vip-ipv4-address-list relationships",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vip-ipv4-address-list:relationship-list\"\n   key=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv4-address-list.vip-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4[$ipv4-index]\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"subnet\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].network-id\n        + '/subnets/subnet/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.ipv4-subnet-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"vnfc\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/vnfcs/vnfc/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2083.000217437744,
        "y": 6143.0255608558655,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "9402f7a2.c004f8",
                "43ffb8db.dfd838"
            ]
        ]
    },
    {
        "id": "a145395d.8e9c88",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vip-ipv4-address-list relationships in AAI\" />\n",
        "comments": "",
        "x": 2652.6666259765625,
        "y": 6135.025530397892,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "f29625da.c7a2a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vip-ipv4-address-list relationships\" />\n",
        "comments": "",
        "x": 2652.833595275879,
        "y": 6185.009704113007,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "3507458.c6c0fba",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2486.1664962768555,
        "y": 6115.009903490543,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "a145395d.8e9c88",
                "7d8d801d.5aba58"
            ]
        ]
    },
    {
        "id": "2bfcdbd8.b2861c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2486.166572570801,
        "y": 6168.009662210941,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "f29625da.c7a2a",
                "7d8d801d.5aba58"
            ]
        ]
    },
    {
        "id": "9402f7a2.c004f8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2329.333381652832,
        "y": 6115.025573313236,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "3507458.c6c0fba"
            ]
        ]
    },
    {
        "id": "43ffb8db.dfd838",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2337.904914855957,
        "y": 6167.6447177529335,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "2bfcdbd8.b2861c"
            ]
        ]
    },
    {
        "id": "5f93b476.1dc79c",
        "type": "save",
        "name": "save vip-ipv6-address-list object to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vip-ipv6-address-list\" \n\tkey=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv6-address-list.vip-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6[$ipv6-index]\" >\n<parameter name=\"vip-ipv6-address\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6[$ipv6-index]`\" />\n<parameter name=\"vip-ipv6-prefix-length\" value=\"128\" />\n<parameter name=\"is-floating\" value=\"false\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1750.66695022583,
        "y": 6353.691581249237,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "67236f18.227f98",
                "c2a53df.84d114"
            ]
        ]
    },
    {
        "id": "eb32fc41.713248",
        "type": "for",
        "name": "for each floating ipv6 address",
        "xml": "<for silentFailure='true' index='ipv6-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1258.6669425964355,
        "y": 6410.691653728485,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "78198d85.1f46bc"
            ]
        ]
    },
    {
        "id": "78198d85.1f46bc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1484.6669425964355,
        "y": 6409.691653728485,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "5f93b476.1dc79c",
                "cde033d4.f6fd",
                "b51d7c07.17b7c"
            ]
        ]
    },
    {
        "id": "6d658b88.2e8a3c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error saving vip-ipv6-address-list in AAI\" />\n",
        "comments": "",
        "x": 2312.66695022583,
        "y": 6343.691581249237,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "3a7db074.96feb8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error saving vip-ipv6-address-list\" />\n",
        "comments": "",
        "x": 2312.833812713623,
        "y": 6393.676039218903,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "7b77c41a.48512c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2146.166820526123,
        "y": 6323.675954341888,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "6d658b88.2e8a3c",
                "7d8d801d.5aba58"
            ]
        ]
    },
    {
        "id": "fb34c0be.1fb228",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2146.1668968200684,
        "y": 6376.675713062286,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "3a7db074.96feb8",
                "7d8d801d.5aba58"
            ]
        ]
    },
    {
        "id": "67236f18.227f98",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1989.3337059020996,
        "y": 6323.691624164581,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "7b77c41a.48512c"
            ]
        ]
    },
    {
        "id": "c2a53df.84d114",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1997.9052391052246,
        "y": 6376.310768604279,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "fb34c0be.1fb228"
            ]
        ]
    },
    {
        "id": "31f35206.0f932e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vip-ipv6-address-list relationships in AAI\" />\n",
        "comments": "",
        "x": 2646.0002059936523,
        "y": 6456.6916318535805,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "132ba90c.08b887",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vip-ipv6-address-list relationships\" />\n",
        "comments": "",
        "x": 2646.1670684814453,
        "y": 6506.676089823246,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "de40c9e6.508858",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2479.5000762939453,
        "y": 6436.676004946232,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "31f35206.0f932e",
                "7d8d801d.5aba58"
            ]
        ]
    },
    {
        "id": "44d321f1.eca488",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2479.5001525878906,
        "y": 6489.67576366663,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "132ba90c.08b887",
                "7d8d801d.5aba58"
            ]
        ]
    },
    {
        "id": "535c2132.4b5b3",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2322.666961669922,
        "y": 6436.691674768925,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "de40c9e6.508858"
            ]
        ]
    },
    {
        "id": "8380291.86ec7d8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2331.238494873047,
        "y": 6489.310819208622,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "44d321f1.eca488"
            ]
        ]
    },
    {
        "id": "47c03850.21f5a",
        "type": "save",
        "name": "save vip-ipv6-address-list relationships",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vip-ipv6-address-list:relationship-list\"\n   key=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv6-address-list.vip-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6[$ipv6-index]\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"subnet\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].network-id\n        + '/subnets/subnet/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.ipv6-subnet-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"vnfc\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/vnfcs/vnfc/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2078.3338050842285,
        "y": 6465.358093738556,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "535c2132.4b5b3",
                "8380291.86ec7d8"
            ]
        ]
    },
    {
        "id": "8a1998a9.fb5c4",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1134.3334770202637,
        "y": 4273.691486895084,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "6cb8c914.ed3b6",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2299.0004234313965,
        "y": 4611.692221999168,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "751caeb9.f5faf",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2007.6670036315918,
        "y": 5828.6920592188835,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "7d8d801d.5aba58",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2956.667133331299,
        "y": 5947.691905498505,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "ab19f58c.bd384",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4276.0001220703125,
        "y": 4995.357985436916,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "d7c01db4.00c9a",
        "type": "set",
        "name": "set created_flag",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].created_flag' value='true' />\n",
        "comments": "",
        "x": 1241.0002479553223,
        "y": 4712.691877782345,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "f765dfab.5a8ab8",
        "type": "set",
        "name": "set created-flag",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].created-flag' value='true' />\n",
        "comments": "",
        "x": 1211.6670036315918,
        "y": 5960.6920592188835,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "79481073.dabf6",
        "type": "set",
        "name": "set created-ipv4-flag",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.created-ipv4-flag' value='true' />\n",
        "comments": "",
        "x": 1684.6669692993164,
        "y": 6088.6921390891075,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "cde033d4.f6fd",
        "type": "set",
        "name": "set created-ipv6-flag",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.created-ipv6-flag' value='true' />\n",
        "comments": "",
        "x": 1690.0003051757812,
        "y": 6414.691742360592,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "9ce78c9c.21d2e",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1791.0004234313965,
        "y": 4672.692116677761,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "f1e503ea.34a2d8"
            ]
        ]
    },
    {
        "id": "e7b2dbd5.bd9e",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-vlan-tagging-assign",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-vlan-tagging-assign' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 574.6667823791504,
        "y": 6752.691919803619,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "acea42fa.fe209"
            ]
        ]
    },
    {
        "id": "acea42fa.fe209",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 919.0001983642578,
        "y": 6752.025414943695,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "bb8b3ecf.0d4b8"
            ]
        ]
    },
    {
        "id": "bb8b3ecf.0d4b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1074.000072479248,
        "y": 6752.025210857391,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "8d4ed162.86b8b8",
                "277ec139.1f8766",
                "4bc02c78.2ff744"
            ]
        ]
    },
    {
        "id": "8d4ed162.86b8b8",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1422.3333625793457,
        "y": 6697.025630712509,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "277ec139.1f8766",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n",
        "comments": "",
        "x": 1250.6668014526367,
        "y": 6795.358858704567,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "4bc02c78.2ff744",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vlantaggingfailure.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1245.6666984558105,
        "y": 6748.691714763641,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "bfee1c79.25f4d",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 212.8928680419922,
        "y": 508.5714416503906,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "c4f07890.7e2328",
                "5621ecb6.141394",
                "b13c4350.370938",
                "b064f8ff.c2b5c",
                "fe2663d3.ad286",
                "a5f7f097.af8f7",
                "498f5a29.9e1ca4",
                "f0c546c1.be6dc",
                "40af7b28.67ea64"
            ]
        ]
    },
    {
        "id": "b80a89b3.da4648",
        "type": "switchNode",
        "name": "switch from-preload",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-information.from-preload`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 503.90471267700195,
        "y": 2564.1672048568726,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "3b57b841.e4ee",
                "5c063e0d.485f8"
            ]
        ]
    },
    {
        "id": "3b57b841.e4ee",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 675.8094444274902,
        "y": 2541.548225402832,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "2b41d2.bfd34e2e"
            ]
        ]
    },
    {
        "id": "5c063e0d.485f8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 677.4760971069336,
        "y": 2586.5480642318726,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "9acd2d4c.7f4f58"
            ]
        ]
    },
    {
        "id": "2b41d2.bfd34e2e",
        "type": "set",
        "name": "set automated-assignment to true",
        "xml": "<set>\n<parameter name='automated-assignment' value='true' />\n",
        "comments": "",
        "x": 890.8094291687012,
        "y": 2539.88139629364,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "9acd2d4c.7f4f58",
        "type": "set",
        "name": "set automated-assignment to false",
        "xml": "<set>\n<parameter name='automated-assignment' value='false' />\n",
        "comments": "",
        "x": 889.142749786377,
        "y": 2584.8813161849976,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "b51d7c07.17b7c",
        "type": "for",
        "name": "for each vnfc",
        "xml": "<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1665.4288368225098,
        "y": 6513.572165966034,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "5f97f00c.f2f7a"
            ]
        ]
    },
    {
        "id": "bc7a6a83.8ca178",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Test return\" />\n",
        "comments": "",
        "x": 130.00014877319336,
        "y": 6993.359684050083,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "facd6ff7.1eed9",
        "type": "for",
        "name": "for each vm-type",
        "xml": "<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 482.66680908203125,
        "y": 3924.358087539673,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "f42a02f0.2fdc5"
            ]
        ]
    },
    {
        "id": "f42a02f0.2fdc5",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 673.166877746582,
        "y": 3925.19132232666,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "f2b8f79a.47d0c8"
            ]
        ]
    },
    {
        "id": "f2b8f79a.47d0c8",
        "type": "for",
        "name": "for each vm-network",
        "xml": "<for silentFailure='true' index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 874.6668090820312,
        "y": 3924.358087539673,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "74a58a99.78bf9c"
            ]
        ]
    },
    {
        "id": "74a58a99.78bf9c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1064.500129699707,
        "y": 3923.857526779175,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "d3a7ff95.69fdf"
            ]
        ]
    },
    {
        "id": "d3a7ff95.69fdf",
        "type": "get-resource",
        "name": "get-resource VFC_RELATED_NETWORK_ROLE",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VFC_RELATED_NETWORK_ROLE where vfc_customization_uuid = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].model-customization-uuid\n    and network_role = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-role'\n  pfx='db.vnf-related-network-role[]'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1354.0001029968262,
        "y": 3922.358169555664,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "ac281675.6e9ef8",
                "441cde65.25a5c"
            ]
        ]
    },
    {
        "id": "ac281675.6e9ef8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1625.00004196167,
        "y": 3827.024871826172,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "21c357a6.90267"
            ]
        ]
    },
    {
        "id": "21c357a6.90267",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1772.190559387207,
        "y": 3825.57288646698,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "3f8cbef4.25bb0a",
                "77e726f5.a576b8"
            ]
        ]
    },
    {
        "id": "441cde65.25a5c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1613.333293914795,
        "y": 4046.691343307495,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "e7e940b7.17edf"
            ]
        ]
    },
    {
        "id": "54eeb4ef.84d784",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2031.66654586792,
        "y": 4048.69109916687,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "d075ed57.96e16",
                "7659ed81.4f2dfc",
                "c5babea5.d9aba",
                "e02da5bb.106d78",
                "33b270a2.44aa78",
                "f0d8d701.a9fbc8",
                "1ad9651a.f1635b",
                "d7d72478.3bd0f"
            ]
        ]
    },
    {
        "id": "3f8cbef4.25bb0a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VFC_RELATED_NETWORK_ROLE table\" />\n",
        "comments": "",
        "x": 1924.3334159851074,
        "y": 3822.358123779297,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "7659ed81.4f2dfc",
        "type": "for",
        "name": "for each vnf network",
        "xml": "<for silentFailure='true' index='vnf-network-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2226.6666831970215,
        "y": 3916.0247554779053,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "b92d9cbc.21841"
            ]
        ]
    },
    {
        "id": "d075ed57.96e16",
        "type": "set",
        "name": "set found-related-network to false",
        "xml": "<set>\n<parameter name='found-related-network' value='false' />\n",
        "comments": "",
        "x": 2266.666759490967,
        "y": 3857.6915321350098,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "18560cbf.0eb0f3",
        "type": "for",
        "name": "for each related network",
        "xml": "<for silentFailure='true' index='related-network-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].related-networks.related-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2625.666645050049,
        "y": 3892.6910190582275,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "2c6cef8.3fa721"
            ]
        ]
    },
    {
        "id": "b92d9cbc.21841",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2414.6666831970215,
        "y": 3916.0247554779053,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "18560cbf.0eb0f3",
                "ff4fdb5d.de766"
            ]
        ]
    },
    {
        "id": "2c6cef8.3fa721",
        "type": "switchNode",
        "name": "switch network-role matches",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].related-networks.related-network[$related-network-index].network-role\n  == $db.vnf-related-network-role[$db-related-network-index].related-network-role`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2877.666561126709,
        "y": 3892.691095352173,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "16df1c3d.121c74"
            ]
        ]
    },
    {
        "id": "e7e940b7.17edf",
        "type": "for",
        "name": "for each db related-network",
        "xml": "<for index='db-related-network-index' start='0' end='`$db.vnf-related-network-role_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1817.6666679382324,
        "y": 4047.35809135437,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "54eeb4ef.84d784"
            ]
        ]
    },
    {
        "id": "678d4c53.0bb2dc",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 298.6669120788574,
        "y": 6953.359684050083,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "16df1c3d.121c74",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3077.666561126709,
        "y": 3890.691095352173,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "b6af3325.d14fe"
            ]
        ]
    },
    {
        "id": "b6af3325.d14fe",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3231.666561126709,
        "y": 3888.691095352173,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "7ea20a1d.7dcac4",
                "34e3568a.1d1aca",
                "3d29969a.2c72ea"
            ]
        ]
    },
    {
        "id": "7ea20a1d.7dcac4",
        "type": "set",
        "name": "set found-related-network to true",
        "xml": "<set>\n<parameter name='found-related-network' value='true' />\n",
        "comments": "",
        "x": 3463.666721343994,
        "y": 3848.3576793670654,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "34e3568a.1d1aca",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 3386.999897003174,
        "y": 3935.024429321289,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "c5babea5.d9aba",
        "type": "switchNode",
        "name": "switch found-related-network",
        "xml": "<switch test='`$found-related-network`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2249.6666145324707,
        "y": 3991.6912326812744,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "d92d1f7b.311be"
            ]
        ]
    },
    {
        "id": "d92d1f7b.311be",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2443.6666145324707,
        "y": 3989.6912326812744,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "4c319279.354754"
            ]
        ]
    },
    {
        "id": "5fe8d8f9.449b28",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find related network '\n      + $db.vnf-related-network-role[$db-related-network-index].related-network-role + ' in vnf-networks'`\" />\n",
        "comments": "",
        "x": 2721.6666145324707,
        "y": 3987.6912326812744,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "4c319279.354754",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2573.6666145324707,
        "y": 3989.6912326812744,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "5fe8d8f9.449b28",
                "77e726f5.a576b8"
            ]
        ]
    },
    {
        "id": "77e726f5.a576b8",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2666.3334159851074,
        "y": 3752.358123779297,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "e02da5bb.106d78",
        "type": "set",
        "name": "set is-trunked and segmentation-id in vm-network",
        "xml": "<set>\n<parameter name='$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].is-trunked'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].is-trunked`' />\n<parameter name='$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].segmentation-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].segmentation-id`' />\n",
        "comments": "",
        "x": 2311.6666145324707,
        "y": 4039.6912326812744,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "f0d8d701.a9fbc8",
        "type": "switchNode",
        "name": "switch rn-index",
        "xml": "<switch test='`$rn-index`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2199.6666145324707,
        "y": 4147.691232681274,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "c4302cc3.3c659"
            ]
        ]
    },
    {
        "id": "33b270a2.44aa78",
        "type": "set",
        "name": "set rn-index to related network length",
        "xml": "<set>\n<parameter name='rn-index' value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network_length`' />\n",
        "comments": "",
        "x": 2271.6666145324707,
        "y": 4091.6912326812744,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "c4302cc3.3c659",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 2363.6666145324707,
        "y": 4147.691232681274,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "be01e09d.5f1a68"
            ]
        ]
    },
    {
        "id": "be01e09d.5f1a68",
        "type": "set",
        "name": "set rn-index to 0",
        "xml": "<set>\n<parameter name='rn-index' value='0' />\n",
        "comments": "",
        "x": 2523.6666145324707,
        "y": 4147.691232681274,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "1ad9651a.f1635b",
        "type": "set",
        "name": "set related-network data",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].network-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].network-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].network-role'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].network-role`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].vlan-tags.vlan-interface'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].vlan-tags.vlan-interface`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].vlan-tags.lower-tag-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].vlan-tags.lower-tag-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].vlan-tags.upper-tag-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].vlan-tags.upper-tag-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].vlan-tags.is-private'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].vlan-tags.is-private`' />\n",
        "comments": "",
        "x": 2223.6666145324707,
        "y": 4199.691232681274,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "d7d72478.3bd0f",
        "type": "set",
        "name": "set new related network length",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network_length'\n  value='`$rn-index + 1`' />\n",
        "comments": "",
        "x": 2241.6666145324707,
        "y": 4251.691232681274,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "ff4fdb5d.de766",
        "type": "switchNode",
        "name": "switch found-related-network",
        "xml": "<switch test='`$found-related-network`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2638.6666679382324,
        "y": 3940.357879638672,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "eba867d8.f5c258"
            ]
        ]
    },
    {
        "id": "eba867d8.f5c258",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2835.3335304260254,
        "y": 3940.3582515716553,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "5c631904.ed64f8"
            ]
        ]
    },
    {
        "id": "5c631904.ed64f8",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2965.3334159851074,
        "y": 3938.691375732422,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "3d29969a.2c72ea",
        "type": "set",
        "name": "save indexes",
        "xml": "<set>\n<parameter name='saved-vnf-network-index' value='`$vnf-network-index`' />\n<parameter name='saved-related-network-index' value='`$related-network-index`' />\n",
        "comments": "",
        "x": 3405.3336296081543,
        "y": 3890.3582496643066,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "6004d50b.b6d2f4",
        "type": "execute",
        "name": "generate cp-instance-id",
        "xml": "<execute plugin=\"org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils\" method=\"generateUUID\" >\n<parameter name=\"ctx-destination\" value=\"cp-instance-id\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1694.2381210327148,
        "y": 4919.882302761078,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "d7ac8cb2.6c2d6",
        "type": "save",
        "name": "save cp to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"cp\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\" >\n<parameter name=\"cp-instance-id\" value=\"`$cp-instance-id`\" />\n<parameter name=\"port-id\" value=\"0\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1675.90474319458,
        "y": 4986.5488085746765,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "f5dd2f0d.45402",
                "29186d18.403c52"
            ]
        ]
    },
    {
        "id": "f5dd2f0d.45402",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1864.9047241210938,
        "y": 4962.215422093868,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "b5157fa2.e880a8"
            ]
        ]
    },
    {
        "id": "b5157fa2.e880a8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2032.0714721679688,
        "y": 4978.009855687618,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "436800e9.7b6c18",
                "6cb8c914.ed3b6"
            ]
        ]
    },
    {
        "id": "29186d18.403c52",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1869.9047241210938,
        "y": 5011.881681859493,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "b5157fa2.e880a8"
            ]
        ]
    },
    {
        "id": "436800e9.7b6c18",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error creating cp object in AAI\" />\n",
        "comments": "",
        "x": 2197.5714836120605,
        "y": 4989.8820605278015,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "8ef35028.d3c7d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1470.714443206787,
        "y": 5189.167096614838,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "bf8a8114.e4c588",
                "c587555a.9764c8",
                "6004d50b.b6d2f4",
                "d7ac8cb2.6c2d6",
                "d458e80b.85d49",
                "c756041f.7b47"
            ]
        ]
    },
    {
        "id": "bf8a8114.e4c588",
        "type": "set",
        "name": "set connection point data",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].connection-point.connection-point-id'\n  value='`$cp-instance-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].connection-point.port-id'\n  value='0' />\n",
        "comments": "",
        "x": 1706.2382850646973,
        "y": 5064.406378269196,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "1c962043.9ade4",
        "type": "comment",
        "name": "Floating IPs",
        "info": "",
        "comments": "",
        "x": 1267.0001029968262,
        "y": 6046.691496551037,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "d458e80b.85d49",
        "type": "for",
        "name": "for each vnf-network",
        "xml": "<for index='vnf-network-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1690.3332862854004,
        "y": 5460.691872119904,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "581b2add.f9572c"
            ]
        ]
    },
    {
        "id": "54717650.92e9c8",
        "type": "save",
        "name": "save cp relationship to l3-network",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"cp:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n     AND cp.cp-instance-id = $cp-instance-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2328.6667671203613,
        "y": 5460.358379840851,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "be199432.2a2058",
                "5e67f7b6.3d5b98"
            ]
        ]
    },
    {
        "id": "7aece173.4d8018",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2700.4998054504395,
        "y": 5433.6763281822205,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "e9b2c07c.a44a5",
                "c9a07f93.c346a8"
            ]
        ]
    },
    {
        "id": "fde9d8b6.adb198",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2700.4998817443848,
        "y": 5486.676086902618,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "e9b2c07c.a44a5",
                "7f2c6758.f68da8"
            ]
        ]
    },
    {
        "id": "be199432.2a2058",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2543.666690826416,
        "y": 5433.691998004913,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "7aece173.4d8018"
            ]
        ]
    },
    {
        "id": "5e67f7b6.3d5b98",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2552.238224029541,
        "y": 5486.311142444611,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "fde9d8b6.adb198"
            ]
        ]
    },
    {
        "id": "c9a07f93.c346a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating cp relationship to l3-network in AAI\" />\n",
        "comments": "",
        "x": 2872.6666145324707,
        "y": 5456.3587040901175,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "7f2c6758.f68da8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating cp relationship to l3-network\" />\n",
        "comments": "",
        "x": 2867.833522796631,
        "y": 5508.009911060332,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "e9b2c07c.a44a5",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3074.3333778381348,
        "y": 5406.35870218277,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "c756041f.7b47",
        "type": "for",
        "name": "for each vm-network",
        "xml": "<for silentFailure='true' index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1690.333438873291,
        "y": 5621.35822725296,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "f305688b.5fd87"
            ]
        ]
    },
    {
        "id": "8f7eb5ab.e0a03",
        "type": "save",
        "name": "save cp relationship to l3-network and vlan-tag",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"cp:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n     AND cp.cp-instance-id = $cp-instance-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$related-network-index].network-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"vlan-tag\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/vlan-tags/vlan-tag/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$related-network-index].vlan-tags.vlan-interface`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2610.00044631958,
        "y": 5619.358222484589,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "9128c14c.d846d",
                "7ee1490a.c8b148"
            ]
        ]
    },
    {
        "id": "d67f366c.178058",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3016.8334922790527,
        "y": 5592.67552137375,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "4bf8ece5.760084",
                "e9b2c07c.a44a5"
            ]
        ]
    },
    {
        "id": "203e49a1.25bf26",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3016.833568572998,
        "y": 5645.675280094148,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "5212701d.e9f5d8",
                "e9b2c07c.a44a5"
            ]
        ]
    },
    {
        "id": "9128c14c.d846d",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2860.0003776550293,
        "y": 5592.691191196443,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "d67f366c.178058"
            ]
        ]
    },
    {
        "id": "7ee1490a.c8b148",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2868.5719108581543,
        "y": 5645.31033563614,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "203e49a1.25bf26"
            ]
        ]
    },
    {
        "id": "4bf8ece5.760084",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating cp relationship to l3-network and vlan-tag in AAI\" />\n",
        "comments": "",
        "x": 3189.000301361084,
        "y": 5615.357897281647,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "5212701d.e9f5d8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating cp relationship to l3-network and vlan-tag\" />\n",
        "comments": "",
        "x": 3184.167209625244,
        "y": 5667.009104251862,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "76067898.ad5ad8",
        "type": "for",
        "name": "for each related-network",
        "xml": "<for silentFailure='true' index='related-network-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2306.0002784729004,
        "y": 5619.358223438263,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "8f7eb5ab.e0a03"
            ]
        ]
    },
    {
        "id": "f10f9580.1e0308",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-generate-heat-parameters",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-generate-heat-parameters' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 564.3335723876953,
        "y": 6862.358483910561,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "e7fac88.832d038",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vfmoduleheat.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 385.6669006347656,
        "y": 6910.358586907387,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "def45b38.4bd55",
        "type": "switchNode",
        "name": "switch input vf-module-name",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-request-input.vf-module-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 537.0000038146973,
        "y": 2346.191044807434,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "8db4c205.376b",
                "1b446cec.4500eb"
            ]
        ]
    },
    {
        "id": "8db4c205.376b",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 736.9999961853027,
        "y": 2323.690947532654,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "eae1dfc6.c9a018"
            ]
        ]
    },
    {
        "id": "1b446cec.4500eb",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 737.4285888671875,
        "y": 2373.81005859375,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "9c7304a7.47b438"
            ]
        ]
    },
    {
        "id": "8bfe9202.c720d",
        "type": "for",
        "name": "for each vnfc-subnet-role",
        "xml": "<for index='subnet-role-index' start='0'\n  end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1294.5001029968262,
        "y": 3141.190721511841,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "8622c4a.ef650b8"
            ]
        ]
    },
    {
        "id": "8622c4a.ef650b8",
        "type": "for",
        "name": "for each vnfc-address-family",
        "xml": "<for index='address-family-index' start='0'\n  end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1542.8333625793457,
        "y": 3141.190721511841,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "4a1dd17d.5b9948"
            ]
        ]
    },
    {
        "id": "7f309670.a38298",
        "type": "for",
        "name": "for each vm-type",
        "xml": "<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 500.33327865600586,
        "y": 2859.52405834198,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "5a24cbf3.c8832c"
            ]
        ]
    },
    {
        "id": "5a24cbf3.c8832c",
        "type": "for",
        "name": "for each vnfc",
        "xml": "<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 682.000057220459,
        "y": 2858.191206932068,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "34b1dbe0.125be4"
            ]
        ]
    },
    {
        "id": "34b1dbe0.125be4",
        "type": "for",
        "name": "for each vnfc-network",
        "xml": "<for silentFailure='true' index='vnfc-network-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 883.1666297912598,
        "y": 2858.023896217346,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "c2b28bb1.c543b8"
            ]
        ]
    },
    {
        "id": "c2b28bb1.c543b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1095.3333015441895,
        "y": 2857.024256706238,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "a041d6a5.1eaa48",
                "c20a57e8.44ed5",
                "765a4edc.cbc36",
                "8bfe9202.c720d"
            ]
        ]
    },
    {
        "id": "a041d6a5.1eaa48",
        "type": "set",
        "name": "set vnf-network-index to -1",
        "xml": "<set>\n<parameter name='vnf-network-index' value='-1' />\n",
        "comments": "",
        "x": 1307.0000190734863,
        "y": 2810.35747051239,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "c20a57e8.44ed5",
        "type": "for",
        "name": "for each vnf-network",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1288.6668090820312,
        "y": 2857.0242223739624,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "4e0e361c.f4c848"
            ]
        ]
    },
    {
        "id": "4e0e361c.f4c848",
        "type": "switchNode",
        "name": "switch network-roles match?",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-network-role\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$idx].network-role`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1530.3332786560059,
        "y": 2855.357717514038,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "807f0004.8adbb8"
            ]
        ]
    },
    {
        "id": "807f0004.8adbb8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1726.99995803833,
        "y": 2855.357636451721,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "253c224a.85d896"
            ]
        ]
    },
    {
        "id": "253c224a.85d896",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1880.333179473877,
        "y": 2855.357508659363,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "a6f5eb0a.e707c8",
                "9ce5336a.719328",
                "ca1a48c3.b1baa8"
            ]
        ]
    },
    {
        "id": "a6f5eb0a.e707c8",
        "type": "set",
        "name": "set vnf-network-index",
        "xml": "<set>\n<parameter name='vnf-network-index' value='`$idx`' />\n",
        "comments": "",
        "x": 2087.000011444092,
        "y": 2803.6908864974976,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "9ce5336a.719328",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2041.999927520752,
        "y": 2893.6908073425293,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "765a4edc.cbc36",
        "type": "switchNode",
        "name": "switch vnf-network-index",
        "xml": "<switch test='`$vnf-network-index`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1300.3333473205566,
        "y": 2917.024224281311,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "244dfb68.71e964"
            ]
        ]
    },
    {
        "id": "244dfb68.71e964",
        "type": "outcome",
        "name": "-1",
        "xml": "<outcome value='-1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1491.9999885559082,
        "y": 2917.024468421936,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "10ed32c9.c47a65"
            ]
        ]
    },
    {
        "id": "10ed32c9.c47a65",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1640.333179473877,
        "y": 2915.357508659363,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "404dfa80.b1344c",
                "c6cafcd7.27543"
            ]
        ]
    },
    {
        "id": "404dfa80.b1344c",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3168.6668128967285,
        "y": 2767.024085998535,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "c6cafcd7.27543",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VNFC network role '\n      + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-network-role\n      + ' is not found in VNF network list'\n      `\" />\n\n\n\n",
        "comments": "",
        "x": 1808.6665534973145,
        "y": 2933.690760612488,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "c35abd31.4d97c8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2331.999897003174,
        "y": 3325.3573598861694,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "96ccd849.43cf7",
                "ff243880.f35278",
                "6cdf3e0.84820c4"
            ]
        ]
    },
    {
        "id": "96ccd849.43cf7",
        "type": "for",
        "name": "for each subnet-data",
        "xml": "<for index='subnet-data-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2528.666648864746,
        "y": 3280.3572788238525,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "2cef54b4.065124"
            ]
        ]
    },
    {
        "id": "2cef54b4.065124",
        "type": "switchNode",
        "name": "address-families match?",
        "xml": "<switch test='`$tmp.address-family\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].ip-version`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2755.3332748413086,
        "y": 3280.3572788238525,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "37df0574.9a5ed2"
            ]
        ]
    },
    {
        "id": "37df0574.9a5ed2",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2935.333240509033,
        "y": 3280.3576850891113,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "788f6a84.68199c"
            ]
        ]
    },
    {
        "id": "c57c0c21.024ab8",
        "type": "set",
        "name": "set tmp.address-family",
        "xml": "<set>\n<parameter name='tmp.address-family'\n  value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-address-family`' />\n",
        "comments": "",
        "x": 2360.3332328796387,
        "y": 3143.690773010254,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "4a1dd17d.5b9948",
        "type": "switchNode",
        "name": "switch vnfc-subnet-ip_length",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1805.3335762023926,
        "y": 3140.357808113098,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "5f09d3a6.026514",
                "56c1febc.7db6b",
                "14889e9b.6b5371"
            ]
        ]
    },
    {
        "id": "5f09d3a6.026514",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 2007.000087738037,
        "y": 3040.3573513031006,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "22b591c4.2e4326"
            ]
        ]
    },
    {
        "id": "56c1febc.7db6b",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2003.4287185668945,
        "y": 3226.309642791748,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "ded80477.617b2"
            ]
        ]
    },
    {
        "id": "22b591c4.2e4326",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2138.6666374206543,
        "y": 3063.0240983963013,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "ebf41120.205ed",
        "type": "set",
        "name": "set subnet-id to -1",
        "xml": "<set>\n<parameter name='subnet-id' value='-1' />\n",
        "comments": "",
        "x": 3028.6671562194824,
        "y": 3442.0247650146484,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "ded80477.617b2",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2157.0001335144043,
        "y": 3225.3572750091553,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "c57c0c21.024ab8",
                "c35abd31.4d97c8"
            ]
        ]
    },
    {
        "id": "62a4f148.c202c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4288.666753768921,
        "y": 3613.691241979599,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "afef3972.79782",
                "4862bc5a.5fb3f4"
            ]
        ]
    },
    {
        "id": "4862bc5a.5fb3f4",
        "type": "execute",
        "name": "execute isInSameSubnet",
        "xml": "<execute plugin=\"com.att.sdnctl.sli.plugin.ipAddressTools.IpAddressTool\" method=\"isInSameSubnet\">\n\t<parameter name=\"firstIPAddr\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].network-start-address`\" />\n\t<parameter name=\"secondIPAddr\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[0].vnfc-ip-address`\" />\n\t<parameter name=\"subnet\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].cidr-mask`\" />\n\t<parameter name=\"ipType\" value=\"`$ip-type`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 4503.6667556762695,
        "y": 3663.690915822983,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "4c2388df.70ec08"
            ]
        ]
    },
    {
        "id": "afef3972.79782",
        "type": "switchNode",
        "name": "switch tmp.address-family",
        "xml": "<switch test='`$tmp.address-family`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4505.333911895752,
        "y": 3570.357902288437,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "191fd488.fd1f6b",
                "be67cd12.641768"
            ]
        ]
    },
    {
        "id": "191fd488.fd1f6b",
        "type": "outcome",
        "name": "ipv4",
        "xml": "<outcome value='ipv4'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4708.667174021402,
        "y": 3543.6911326249437,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "eaddc3bb.251ec8"
            ]
        ]
    },
    {
        "id": "be67cd12.641768",
        "type": "outcome",
        "name": "ipv6",
        "xml": "<outcome value='ipv6'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4708.666847229004,
        "y": 3590.3576600551605,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "95abff5b.e35a8"
            ]
        ]
    },
    {
        "id": "eaddc3bb.251ec8",
        "type": "set",
        "name": "set ip-type parameter to IPv4",
        "xml": "<set>\n<parameter name='ip-type' value='IPv4' />\n",
        "comments": "",
        "x": 4905.333660125732,
        "y": 3542.0246064662933,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "95abff5b.e35a8",
        "type": "set",
        "name": "set ip-type parameter to IPv6",
        "xml": "<set>\n<parameter name='ip-type' value='IPv6' />\n",
        "comments": "",
        "x": 4910.33353805542,
        "y": 3590.357679128647,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "8df6c942.a715e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4843.666786193848,
        "y": 3663.357679128647,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "a8addf18.4e3a2",
                "7cc78bb8.388714"
            ]
        ]
    },
    {
        "id": "a8addf18.4e3a2",
        "type": "set",
        "name": "set subnet-id",
        "xml": "<set>\n<parameter name='subnet-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].sdnc-subnet-id`' />\n",
        "comments": "",
        "x": 5022.000106811523,
        "y": 3640.024165868759,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "7cc78bb8.388714",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 5007.000110626221,
        "y": 3686.691159963608,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "5250a99a.907d1",
        "type": "switchNode",
        "name": "switch subnet-id",
        "xml": "<switch test='`$subnet-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3020.3330307006836,
        "y": 3603.691499710083,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "d823fb40.54f4"
            ]
        ]
    },
    {
        "id": "d823fb40.54f4",
        "type": "outcome",
        "name": "-1",
        "xml": "<outcome value='-1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3176.99959564209,
        "y": 3603.6914348602295,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "4bb7b0dc.89ed5"
            ]
        ]
    },
    {
        "id": "4bb7b0dc.89ed5",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3325.3327865600586,
        "y": 3602.0244750976562,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "12c0eff5.7b1ef",
                "404dfa80.b1344c"
            ]
        ]
    },
    {
        "id": "12c0eff5.7b1ef",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Not able to find VNF network subnet that contains address '\n      + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[0].vnfc-ip-address\n      `\" />\n\n\n\n",
        "comments": "",
        "x": 3493.666118621826,
        "y": 3618.6909503936768,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "324552d3.28633e",
        "type": "set",
        "name": "set subnet-id in vnfc-ip-assignments (temp variable)",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].subnet-id' value='`$subnet-id`' />\n",
        "comments": "",
        "x": 3131.9996757507324,
        "y": 3680.3582706451416,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "1781a3e7.247ed4",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vfmodulec.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 485.3332710266113,
        "y": 3275.357508659363,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "4c2388df.70ec08",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4690.333358764648,
        "y": 3663.691404104233,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "8df6c942.a715e"
            ]
        ]
    },
    {
        "id": "ca1a48c3.b1baa8",
        "type": "set",
        "name": "set network-id",
        "xml": "<set>\n<parameter name='$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].network-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$idx].network-id`' />\n",
        "comments": "",
        "x": 2063.666515350342,
        "y": 2848.690969467163,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "8ca3ab85.032598",
        "type": "switchNode",
        "name": "switch nfc-naming-code",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-naming-code`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1261.9999809265137,
        "y": 4463.690697193146,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "23c8931f.52f9cc",
                "57df7e5d.984c2"
            ]
        ]
    },
    {
        "id": "23c8931f.52f9cc",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 1446.999927520752,
        "y": 4438.690515995026,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "a1c6b38e.a41d3"
            ]
        ]
    },
    {
        "id": "57df7e5d.984c2",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1445.095199584961,
        "y": 4485.476343631744,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "59f2b757.a63258"
            ]
        ]
    },
    {
        "id": "a1c6b38e.a41d3",
        "type": "set",
        "name": "set tmp.nfc-naming-code to DEFAULT",
        "xml": "<set>\n<parameter name='tmp.nfc-naming-code' value='DEFAULT' />\n",
        "comments": "",
        "x": 1678.6666984558105,
        "y": 4437.023866176605,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "59f2b757.a63258",
        "type": "set",
        "name": "set tmp.nfc-naming-code",
        "xml": "<set>\n<parameter name='tmp.nfc-naming-code' value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-naming-code`' />\n",
        "comments": "",
        "x": 1635.333209991455,
        "y": 4485.357364177704,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "805bb33d.dc18f",
        "type": "switchNode",
        "name": "switch nfc-function",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-function`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1250.3333129882812,
        "y": 4562.023870944977,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "7a1bcd20.0ffb04",
                "58313c0d.8e25dc"
            ]
        ]
    },
    {
        "id": "7a1bcd20.0ffb04",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 1446.9999198913574,
        "y": 4537.023668766022,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "8f8878a3.b40b28"
            ]
        ]
    },
    {
        "id": "58313c0d.8e25dc",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1445.0951919555664,
        "y": 4583.8094964027405,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "33d0dbb1.211884"
            ]
        ]
    },
    {
        "id": "8f8878a3.b40b28",
        "type": "set",
        "name": "set tmp.nfc-function to DEFAULT",
        "xml": "<set>\n<parameter name='tmp.nfc-function' value='DEFAULT' />\n",
        "comments": "",
        "x": 1658.6667022705078,
        "y": 4535.3568778038025,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "33d0dbb1.211884",
        "type": "set",
        "name": "set tmp.nfc-function",
        "xml": "<set>\n<parameter name='tmp.nfc-function' value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-function`' />\n",
        "comments": "",
        "x": 1616.9998321533203,
        "y": 4583.690538883209,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "f47ab8ac.f1f838",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2890.3333015441895,
        "y": 2218.691004753113,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "aa023fe5.47b5f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2796.9998054504395,
        "y": 2293.691004753113,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "d0aa2f4d.891c28",
                "f47ab8ac.f1f838"
            ]
        ]
    },
    {
        "id": "e944765.ab28a88",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2001.9998588562012,
        "y": 2353.6908683776855,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "bcf4c56.2e632b8",
                "f47ab8ac.f1f838"
            ]
        ]
    },
    {
        "id": "589f1683.8c95c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2263.666723251343,
        "y": 2408.691035270691,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "b1df2727.b9c3d",
                "f47ab8ac.f1f838"
            ]
        ]
    },
    {
        "id": "581b2add.f9572c",
        "type": "switchNode",
        "name": "switch network-roles match?",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-network-role\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-role`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1923.6666297912598,
        "y": 5460.6908984184265,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "bcbba18a.60b55"
            ]
        ]
    },
    {
        "id": "bcbba18a.60b55",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2122.000099182129,
        "y": 5460.358053684235,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "54717650.92e9c8"
            ]
        ]
    },
    {
        "id": "f305688b.5fd87",
        "type": "switchNode",
        "name": "switch network-roles match?",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-role\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-role`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1926.9999732971191,
        "y": 5620.357346057892,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "fcdfc8c4.1ea6e8"
            ]
        ]
    },
    {
        "id": "fcdfc8c4.1ea6e8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2125.3334426879883,
        "y": 5620.0245013237,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "76067898.ad5ad8"
            ]
        ]
    },
    {
        "id": "bc8c9230.4f5cf8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1830.3332557678223,
        "y": 6198.6907658576965,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "1f81499d.5e5af6",
                "8e120f2d.e1456"
            ]
        ]
    },
    {
        "id": "5f97f00c.f2f7a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1832.0000038146973,
        "y": 6513.690777301788,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "47c03850.21f5a",
                "7256be96.3662d"
            ]
        ]
    },
    {
        "id": "8e120f2d.e1456",
        "type": "for",
        "name": "for each vnfc-network-role",
        "xml": "<for silentFailure='true' index='vnfc-network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2047.000202178955,
        "y": 6257.023936748505,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "2ff95408.117534"
            ]
        ]
    },
    {
        "id": "35f11c05.060024",
        "type": "save",
        "name": "save vip-ipv4-address-list relationship to cp",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vip-ipv4-address-list:relationship-list\"\n   key=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv4-address-list.vip-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4[$ipv4-index]\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"cp\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/vnfcs/vnfc/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n        + '/cps/cp/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-role-index].connection-point.connection-point-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2722.0001258850098,
        "y": 6257.023775577545,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "6fc56971.00a6d8",
                "5cf11136.58121"
            ]
        ]
    },
    {
        "id": "6f85c684.0cc928",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vip-ipv4-address-list relationship to cp in AAI\" />\n",
        "comments": "",
        "x": 3280.3333473205566,
        "y": 6250.357183933258,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "383b2271.606576",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vip-ipv4-address-list relationship to cp\" />\n",
        "comments": "",
        "x": 3280.500316619873,
        "y": 6300.341357648373,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "1646f205.fdcaa6",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3113.8332176208496,
        "y": 6230.341557025909,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "6f85c684.0cc928",
                "7d8d801d.5aba58"
            ]
        ]
    },
    {
        "id": "8458375f.c06d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3113.833293914795,
        "y": 6283.341315746307,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "383b2271.606576",
                "7d8d801d.5aba58"
            ]
        ]
    },
    {
        "id": "6fc56971.00a6d8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2957.000102996826,
        "y": 6230.357226848602,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "1646f205.fdcaa6"
            ]
        ]
    },
    {
        "id": "5cf11136.58121",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2965.571636199951,
        "y": 6282.9763712883,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "8458375f.c06d8"
            ]
        ]
    },
    {
        "id": "7256be96.3662d",
        "type": "for",
        "name": "for each vnfc-network-role",
        "xml": "<for silentFailure='true' index='vnfc-network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2048.6665992736816,
        "y": 6580.357346057892,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "6947a958.cfef3"
            ]
        ]
    },
    {
        "id": "8da01247.1c11d8",
        "type": "save",
        "name": "save vip-ipv6-address-list relationship to cp",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vip-ipv6-address-list:relationship-list\"\n   key=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv6-address-list.vip-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6[$ipv6-index]\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"cp\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/vnfcs/vnfc/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n        + '/cps/cp/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-role-index].connection-point.connection-point-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2718.6665534973145,
        "y": 6578.690128803253,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "d83f3f7b.caadf",
                "cc62185e.d573c8"
            ]
        ]
    },
    {
        "id": "540af8f6.c0c8e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vip-ipv4-address-list relationship to cp in AAI\" />\n",
        "comments": "",
        "x": 3276.9997749328613,
        "y": 6572.023537158966,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "64f21f33.6807a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vip-ipv4-address-list relationship to cp\" />\n",
        "comments": "",
        "x": 3277.1667442321777,
        "y": 6622.007710874081,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "998fc046.d68f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3110.4996452331543,
        "y": 6552.007910251617,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "540af8f6.c0c8e"
            ]
        ]
    },
    {
        "id": "8dc96b01.474dd",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3110.4997215270996,
        "y": 6605.007668972015,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "64f21f33.6807a"
            ]
        ]
    },
    {
        "id": "d83f3f7b.caadf",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2953.666530609131,
        "y": 6552.02358007431,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "998fc046.d68f"
            ]
        ]
    },
    {
        "id": "cc62185e.d573c8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2962.238063812256,
        "y": 6604.642724514008,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "8dc96b01.474dd"
            ]
        ]
    },
    {
        "id": "2ff95408.117534",
        "type": "switchNode",
        "name": "switch network-roles match?",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-role\n  == $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-role-index].vnfc-network-role`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2300.3332710266113,
        "y": 6257.023613452911,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "9475b87c.2a043"
            ]
        ]
    },
    {
        "id": "9475b87c.2a043",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2487.000114440918,
        "y": 6257.024100780487,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "35f11c05.060024"
            ]
        ]
    },
    {
        "id": "6947a958.cfef3",
        "type": "switchNode",
        "name": "switch network-roles match?",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-role\n  == $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-role-index].vnfc-network-role`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2296.9998512268066,
        "y": 6578.690353870392,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "e7b53b25.79cf28"
            ]
        ]
    },
    {
        "id": "e7b53b25.79cf28",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2483.6666946411133,
        "y": 6578.6908411979675,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "8da01247.1c11d8"
            ]
        ]
    },
    {
        "id": "2376b6f4.a8ed0a",
        "type": "comment",
        "name": "SELF-SERVE FORK",
        "info": "",
        "comments": "",
        "x": 666.7142944335938,
        "y": 867.0476245880127,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "efcbebcc.14464",
        "type": "call",
        "name": "call self-serve-vf-module-assign",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='self-serve-vf-module-assign' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1199.749439239502,
        "y": 911.964430809021,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "971d6518.2083a"
            ]
        ]
    },
    {
        "id": "4f6ca91d.20b5c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Failed to create self-serve assignment for vf-module with vf-module-id=' + $vf-module-topology-operation-input.vf-module-information.vf-module-id + ' with error: ' + $error-message`\" />\n",
        "comments": "",
        "x": 1583.820816040039,
        "y": 911.9643812179565,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "971d6518.2083a",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1420.047019958496,
        "y": 911.4524621963501,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "4f6ca91d.20b5c"
            ]
        ]
    },
    {
        "id": "d92c2968.bb747",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1146.6186828613281,
        "y": 1061.809350013733,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "c5876c75.baaed",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/ss-vnfend.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1138.6662254333496,
        "y": 1016.3008937835693,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "be93c800.e962c8",
        "type": "set",
        "name": "set order-status to PendingCreate",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.order-status'\n  value='PendingCreate' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-rpc-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.request-action`' />\n",
        "comments": "",
        "x": 1209.3567428588867,
        "y": 965.2617883682251,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "3eddc68c.a493ea",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 920.4521713256836,
        "y": 911.6425924301147,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "efcbebcc.14464",
                "be93c800.e962c8",
                "c5876c75.baaed",
                "d92c2968.bb747"
            ]
        ]
    },
    {
        "id": "8086d3c6.2981",
        "type": "comment",
        "name": "First, count the subnets for this address family",
        "info": "",
        "comments": "",
        "x": 2662.0004081726074,
        "y": 3189.9997692108154,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "fd0458e9.351b28",
        "type": "for",
        "name": "for each subnet-data",
        "xml": "<for index='subnet-data-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3035.333095550537,
        "y": 3485.0002727508545,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "9c5ef8eb.9a7678"
            ]
        ]
    },
    {
        "id": "9c5ef8eb.9a7678",
        "type": "switchNode",
        "name": "address-families match?",
        "xml": "<switch test='`$tmp.address-family\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].ip-version`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3261.9997215270996,
        "y": 3485.0002727508545,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "33f6db20.0ff7f4"
            ]
        ]
    },
    {
        "id": "33f6db20.0ff7f4",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3441.999687194824,
        "y": 3485.0006790161133,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "54c3098c.899198"
            ]
        ]
    },
    {
        "id": "ff243880.f35278",
        "type": "set",
        "name": "set af-count to 0",
        "xml": "<set>\n<parameter name='af-count' value='0' />\n",
        "comments": "",
        "x": 2516.9999809265137,
        "y": 3231.6665210723877,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "38b83402.0da80c",
        "type": "set",
        "name": "increment af-count",
        "xml": "<set>\n<parameter name='af-count' value='`$af-count + 1`' />\n",
        "comments": "",
        "x": 3265.3333473205566,
        "y": 3298.3332710266113,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "788f6a84.68199c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3081.9997215270996,
        "y": 3279.9999561309814,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "38b83402.0da80c",
                "3fbd6c40.04a2bc"
            ]
        ]
    },
    {
        "id": "3fbd6c40.04a2bc",
        "type": "set",
        "name": "set subnet-id",
        "xml": "<set>\n<parameter name='subnet-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].sdnc-subnet-id`' />\n",
        "comments": "",
        "x": 3246.999767303467,
        "y": 3253.3332691192627,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "6cdf3e0.84820c4",
        "type": "switchNode",
        "name": "switch af-count",
        "xml": "<switch test='`$af-count`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2507.0003929138184,
        "y": 3468.3334379196167,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "a4b2346f.f87cb",
                "33300284.96a34e"
            ]
        ]
    },
    {
        "id": "a4b2346f.f87cb",
        "type": "outcome",
        "name": "1",
        "xml": "<outcome value='1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2666.999912261963,
        "y": 3366.666606903076,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "ad8dd57b.16b9d"
            ]
        ]
    },
    {
        "id": "ad8dd57b.16b9d",
        "type": "set",
        "name": "set subnet-id in vnfc-ip-assignments (temp variable)",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].subnet-id'\n  value='`$subnet-id`' />\n",
        "comments": "",
        "x": 2940.3332176208496,
        "y": 3364.9999561309814,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "33300284.96a34e",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2666.999828338623,
        "y": 3568.333526611328,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "459f9c7c.facbf4"
            ]
        ]
    },
    {
        "id": "459f9c7c.facbf4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2823.6664695739746,
        "y": 3568.3332080841064,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "ebf41120.205ed",
                "fd0458e9.351b28",
                "5250a99a.907d1",
                "324552d3.28633e"
            ]
        ]
    },
    {
        "id": "54c3098c.899198",
        "type": "switchNode",
        "name": "switch network-start-address",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].network-start-address`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3636.9998664855957,
        "y": 3483.333522796631,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "50f46a5d.151964",
                "b4045616.46c1e"
            ]
        ]
    },
    {
        "id": "50f46a5d.151964",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 3833.6667137145996,
        "y": 3418.333133459091,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "fa79e796.718bc"
            ]
        ]
    },
    {
        "id": "b4045616.46c1e",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3826.7621116638184,
        "y": 3552.61904501915,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "91359939.322c88"
            ]
        ]
    },
    {
        "id": "91359939.322c88",
        "type": "switchNode",
        "name": "switch cidr-mask",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].cidr-mask`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3981.9999046325684,
        "y": 3551.666251897812,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "fa078de2.dc1ae",
                "21622a4.a2fe356"
            ]
        ]
    },
    {
        "id": "fa078de2.dc1ae",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 4136.999980926514,
        "y": 3481.6665513515472,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "4d5413f9.62c7c4"
            ]
        ]
    },
    {
        "id": "21622a4.a2fe356",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4140.095777511597,
        "y": 3614.2856385707855,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "62a4f148.c202c"
            ]
        ]
    },
    {
        "id": "14889e9b.6b5371",
        "type": "outcome",
        "name": "0",
        "xml": "<outcome value='0'>",
        "comments": "",
        "outputs": 1,
        "x": 2008.666591644287,
        "y": 3088.3332080841064,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "22b591c4.2e4326"
            ]
        ]
    },
    {
        "id": "82e555ca.39e4b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'SDNC subnet id '\n      + $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].sdnc-subnet-id\n      + ' does not have network-start-address populated'`\" />\n\n\n\n",
        "comments": "",
        "x": 4142.000217437744,
        "y": 3433.332970380783,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "fa79e796.718bc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3978.6666412353516,
        "y": 3418.332900762558,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "82e555ca.39e4b",
                "404dfa80.b1344c"
            ]
        ]
    },
    {
        "id": "926e57f0.46dc88",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'SDNC subnet id '\n      + $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].sdnc-subnet-id\n      + ' does not have cidr-mask populated'`\" />\n\n\n\n",
        "comments": "",
        "x": 4447.000072479248,
        "y": 3494.9998376369476,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "4d5413f9.62c7c4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4283.6664962768555,
        "y": 3479.9997680187225,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "926e57f0.46dc88",
                "404dfa80.b1344c"
            ]
        ]
    },
    {
        "id": "a6a5fc58.d573a",
        "type": "comment",
        "name": "Ignore address families with no addresses",
        "info": "",
        "comments": "",
        "x": 2282.9999656677246,
        "y": 3018.6667041778564,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "57662986.d12c8",
        "type": "switchNode",
        "name": "switch invariant-uuid",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].invariant-uuid`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1253.666805267334,
        "y": 4648.333082199097,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "bca552ea.8dcc08",
                "1bc6e4fe.e7fc03"
            ]
        ]
    },
    {
        "id": "bca552ea.8dcc08",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 1435.3332176208496,
        "y": 4624.999711990356,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "e71566e3.c745c8"
            ]
        ]
    },
    {
        "id": "1bc6e4fe.e7fc03",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1433.4284896850586,
        "y": 4671.785539627075,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "ce29a815.f5683"
            ]
        ]
    },
    {
        "id": "e71566e3.c745c8",
        "type": "save",
        "name": "save vnfc to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vnfc\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\" >\n<parameter name=\"vnfc-name\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name`\" />\n<parameter name=\"nfc-naming-code\" value=\"`$tmp.nfc-naming-code`\" />\n<parameter name=\"nfc-function\" value=\"`$tmp.nfc-function`\" />\n<parameter name=\"orchestration-status\" value=\"`PendingCreate`\" />\n<parameter name=\"in-maint\" value=\"true\" />\n<parameter name=\"prov-status\" value=\"`PREPROV`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1596.999843597412,
        "y": 4626.666704177856,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "b05fd296.8c44d8",
                "9ce78c9c.21d2e"
            ]
        ]
    },
    {
        "id": "498f5a29.9e1ca4",
        "type": "switchNode",
        "name": "switch input cloud-owner",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-request-input.cloud-owner`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 532.7141952514648,
        "y": 256.9047336578369,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "93f5de2c.13776",
                "5d086485.c917c4"
            ]
        ]
    },
    {
        "id": "93f5de2c.13776",
        "type": "other",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 716.0475692749023,
        "y": 226.90472221374512,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "201ec95d.e95dfe"
            ]
        ]
    },
    {
        "id": "5d086485.c917c4",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 715.8094749450684,
        "y": 267.85721588134766,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "404d471f.ff2ab"
            ]
        ]
    },
    {
        "id": "201ec95d.e95dfe",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 851.0475234985352,
        "y": 225.23806190490723,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "404d471f.ff2ab",
        "type": "set",
        "name": "set prop.cloud-region.cloud-owner",
        "xml": "<set>\n<parameter name='prop.cloud-region.cloud-owner' value='`$vf-module-topology-operation-input.vf-module-request-input.cloud-owner`' />\n",
        "comments": "",
        "x": 932.7141799926758,
        "y": 266.9047431945801,
        "z": "112fab3d.a10d2d",
        "wires": []
    },
    {
        "id": "f0c546c1.be6dc",
        "type": "call",
        "name": "call self-serve-vf-module-forking-logic",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='self-serve-vf-module-forking-logic' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 564.3015670776367,
        "y": 808.2980642318726,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    },
    {
        "id": "40af7b28.67ea64",
        "type": "switchNode",
        "name": "switch ss.self-serve-flag",
        "xml": "<switch test=\"`$ss.self-serve-flag`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 522.4443054199219,
        "y": 1035.2981328964233,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "6edbe4f3.864dc4",
                "bb5f378d.ec1c2"
            ]
        ]
    },
    {
        "id": "6edbe4f3.864dc4",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 743.158504486084,
        "y": 1152.869031906128,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "72f655d6.4f3d74"
            ]
        ]
    },
    {
        "id": "bb5f378d.ec1c2",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 743.7299575805664,
        "y": 911.7266693115234,
        "z": "112fab3d.a10d2d",
        "wires": [
            [
                "3eddc68c.a493ea"
            ]
        ]
    },
    {
        "id": "69eb61e5.2ebc48",
        "type": "call",
        "name": "call check for VNF-API-preload and copy",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='gw-vfmodule-update' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 473,
        "y": 7237,
        "z": "112fab3d.a10d2d",
        "wires": [
            []
        ]
    }
]
