[{"id":"d697412.e1051c","type":"dgstart","name":"DGSTART","outputs":1,"x":101.66666412353516,"y":87.02430057525635,"z":"d8d4f820.a9f2c8","wires":[["74830689.2bb8b8"]]},{"id":"74830689.2bb8b8","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":215.52379989624023,"y":126.83383846282959,"z":"d8d4f820.a9f2c8","wires":[["fbd6fca2.0a4fd"]]},{"id":"fbd6fca2.0a4fd","type":"method","name":"method vf-module-topology-operation-assign","xml":"<method rpc='vf-module-topology-operation-assign' mode='sync'>\n","comments":"","outputs":1,"x":215.0952911376953,"y":167.02430057525635,"z":"d8d4f820.a9f2c8","wires":[["860c887f.eaff48"]]},{"id":"3b29ae5f.fca272","type":"comment","name":"vf-module-topology-operation-assign","info":"","comments":"","x":506.9877624511719,"y":30,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"a0a0c247.e2df1","type":"switchNode","name":"switch request-action","xml":"<switch test='`$vf-module-topology-operation-input.request-information.request-action`'>\n","comments":"","outputs":1,"x":506.85717391967773,"y":342.548122882843,"z":"d8d4f820.a9f2c8","wires":[["1a4430a2.bfb6cf","f49ee525.5ebb08"]]},{"id":"1a4430a2.bfb6cf","type":"outcome","name":"CreateVfModuleInstance","xml":"<outcome value='CreateVfModuleInstance'>\n","comments":"","outputs":1,"x":768.9047889709473,"y":319.6910090446472,"z":"d8d4f820.a9f2c8","wires":[["2d67df99.0846a"]]},{"id":"f49ee525.5ebb08","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":712.5714340209961,"y":365.07199811935425,"z":"d8d4f820.a9f2c8","wires":[["bb7b3905.2e8568"]]},{"id":"2d67df99.0846a","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":958.7619533538818,"y":319.69104051589966,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"bb7b3905.2e8568","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"If svc-action is 'assign' then request-action must be 'CreateVfModuleInstance'\" />\n","comments":"","x":977.5714416503906,"y":365.40531063079834,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"1dc8c520.10fcfb","type":"get-resource","name":"get-resource VF_MODULE_MODEL","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VF_MODULE_MODEL WHERE customization_uuid = $vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid'\n  pfx='db.vf-module-model'>\n\n","comments":"","outputs":1,"x":554.1904411315918,"y":433.6910729408264,"z":"d8d4f820.a9f2c8","wires":[["50042b11.b73524","8e5bb245.dc98c"]]},{"id":"e3a918fc.2150c8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No model found for VF module customization UUID ' + $vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid`\" />\n","comments":"","x":995.6188621520996,"y":458.1195454597473,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"50042b11.b73524","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":819.976131439209,"y":414.0719037055969,"z":"d8d4f820.a9f2c8","wires":[["e4a9ac95.1ca42"]]},{"id":"8e5bb245.dc98c","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":828.5475616455078,"y":458.3576169013977,"z":"d8d4f820.a9f2c8","wires":[["e3a918fc.2150c8"]]},{"id":"e4a9ac95.1ca42","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VF_MODULE_MODEL table\" />\n","comments":"","x":994.9760627746582,"y":413.21480417251587,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"95a14b79.388078","type":"switchNode","name":"switch service-data.vnfs.vnf_length","xml":"<switch test='`$service-data.vnfs.vnf_length`'>\n","comments":"","outputs":1,"x":549.2857055664062,"y":642.2624082565308,"z":"d8d4f820.a9f2c8","wires":[["83163162.dbba5","b02d0c8b.3043"]]},{"id":"83163162.dbba5","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":789.9999771118164,"y":619.4051485061646,"z":"d8d4f820.a9f2c8","wires":[["b214339a.32a9d"]]},{"id":"b02d0c8b.3043","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":789.7618179321289,"y":660.3576669692993,"z":"d8d4f820.a9f2c8","wires":[["5eb9d382.b3cd5c"]]},{"id":"1775cfdf.a41f2","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":151.19046783447266,"y":3042.2626180648804,"z":"d8d4f820.a9f2c8","wires":[["b89e0deb.b46e6","53786678.5a8d28","754ec35d.ac04ec","94581ccd.aad7b","8c68c9db.5cc588","ddc11e24.6362","99bb54bb.4e1de8","d673bc0b.7722a","fa766a0e.be8068","1e8f4bba.a2f834","670e5324.66f2cc","e81eb42a.092d18","e006bec6.98363","3aa9dd9a.4f17c2","bf36d671.a2e478","47b4ab3e.ccdc34","c28b6c8e.f5ff4","f240bd12.78194","7f62cae0.731ea4","11827b45.0aafe5","8dd419f6.418c98","11dec1b.573e93e","194f4ea1.cd8cd1","bd330e1c.c356a","9691502a.3601c","9f27a4a4.73d8e8","d34b40c0.acb5e","6f8af175.c5f4d","9303fc78.a6fc8","f29eef5f.5b38a","a4ec6528.997b68"]]},{"id":"b214339a.32a9d","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"There are no VNFs defined in MD-SAL\" />\n","comments":"","x":956.6665916442871,"y":618.6909036636353,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"5eb9d382.b3cd5c","type":"for","name":"for each vnf","xml":"<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n","comments":"","outputs":1,"x":951.9999618530273,"y":660.0242853164673,"z":"d8d4f820.a9f2c8","wires":[["16dc34f.6e6c7cb"]]},{"id":"16dc34f.6e6c7cb","type":"switchNode","name":"switch service data vnf == input vnf","xml":"<switch test='`$service-data.vnfs.vnf[$idx].vnf-id == $vf-module-topology-operation-input.vnf-information.vnf-id`'>\n","comments":"","outputs":1,"x":1203.3332595825195,"y":659.6910133361816,"z":"d8d4f820.a9f2c8","wires":[["7246ce61.8d12"]]},{"id":"7246ce61.8d12","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1433.3332710266113,"y":659.0243263244629,"z":"d8d4f820.a9f2c8","wires":[["6a49172a.ca77c8"]]},{"id":"d7ec98f9.c11048","type":"set","name":"set vnf-index to -1","xml":"<set>\n<parameter name='vnf-index' value='-1' />\n","comments":"","x":498.3333282470703,"y":573.6909074783325,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"8701ea4a.806da8","type":"set","name":"set vnf-index to idx","xml":"<set>\n<parameter name='vnf-index' value='`$idx`' />\n","comments":"","x":1754.9999084472656,"y":630.024284362793,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"732b9e7f.347cb","type":"switchNode","name":"switch vnf-index","xml":"<switch test='`$vnf-index`'>\n","comments":"","outputs":1,"x":488.33333587646484,"y":710.3576040267944,"z":"d8d4f820.a9f2c8","wires":[["49974f32.a534c"]]},{"id":"49974f32.a534c","type":"outcome","name":"-1","xml":"<outcome value='-1'>\n","comments":"","outputs":1,"x":666.6667213439941,"y":709.6909799575806,"z":"d8d4f820.a9f2c8","wires":[["297b2c5b.88b074"]]},{"id":"297b2c5b.88b074","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find VNF ID ' + $vf-module-topology-operation-input.vnf-information.vnf-id + ' in MD-SAL'`\" />\n","comments":"","x":826.6666297912598,"y":709.0242834091187,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"b89e0deb.b46e6","type":"switchNode","name":"switch vf-module_length","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`'>\n","comments":"","outputs":1,"x":518.3334274291992,"y":1683.6910963058472,"z":"d8d4f820.a9f2c8","wires":[["99e7a20c.ec90c","7e5dd06a.b8e49"]]},{"id":"99e7a20c.ec90c","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":775.7143821716309,"y":1650.833869934082,"z":"d8d4f820.a9f2c8","wires":[["53c8cce1.838234"]]},{"id":"53c8cce1.838234","type":"set","name":"set vf-module-index=0","xml":"<set>\n<parameter name='vf-module-index' value='0' />\n","comments":"","x":963.3334197998047,"y":1651.500644683838,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"7e5dd06a.b8e49","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":776.1429252624512,"y":1715.119728088379,"z":"d8d4f820.a9f2c8","wires":[["2058b808.9e9618"]]},{"id":"7178136b.1004cc","type":"set","name":"set vf-module-index = vf-module_length","xml":"<set>\n<parameter name='vf-module-index' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' />\n","comments":"","x":1161.3334655761719,"y":1695.3101234436035,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"cc973bab.9de8f8","type":"for","name":"for each existing VF module","xml":"<for index='idx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' >\n","comments":"","outputs":1,"x":1120.4285583496094,"y":1739.4053535461426,"z":"d8d4f820.a9f2c8","wires":[["ca6f6e2c.61cf2"]]},{"id":"2058b808.9e9618","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":912.8572044372559,"y":1715.1196537017822,"z":"d8d4f820.a9f2c8","wires":[["7178136b.1004cc","cc973bab.9de8f8"]]},{"id":"ca6f6e2c.61cf2","type":"switchNode","name":"switch vf-module-information.vf-module-id == service-data.vnfs.vnf[].vf-modules.vf-module[].vf-module-id","xml":"<switch test='`$vf-module-topology-operation-input.vf-module-information.vf-module-id == $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id`'>\n","comments":"","outputs":1,"x":1624.0476608276367,"y":1738.976764678955,"z":"d8d4f820.a9f2c8","wires":[["48704ac7.f90304"]]},{"id":"48704ac7.f90304","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2066.6667098999023,"y":1738.5482158660889,"z":"d8d4f820.a9f2c8","wires":[["45970d91.c715f4"]]},{"id":"45970d91.c715f4","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VF module id ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id\n       + ' already exists, and status is ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-data.vf-module-level-oper-status.order-status`\" />\n","comments":"","x":2218.571590423584,"y":1738.5482025146484,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"4eaa7c5d.587b54","type":"comment","name":"make sure this VF module doesn't exist already","info":"","comments":"","x":1650.5000076293945,"y":1693.6042566299438,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"53786678.5a8d28","type":"set","name":"set new vf-module_length","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length' value='`$vf-module-index + 1`' />\n","comments":"","x":529.0000076293945,"y":1794.690951347351,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"754ec35d.ac04ec","type":"set","name":"set vf-module-topology data","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-topology-identifier.vf-module-id' value='`$vf-module-topology-operation-input.vf-module-information.vf-module-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-topology-identifier.vf-module-name' value='`$vf-module-topology-operation-input.vf-module-request-input.vf-module-name`' />\n<parameter name='tmp.vf-module-topology.vf-module-topology-identifier.vf-module-type' value='`$vf-module-topology-operation-input.vf-module-information.vf-module-type`' />\n<parameter name='tmp.vf-module-topology.tenant' value='`$vf-module-topology-operation-input.vf-module-request-input.tenant`' />\n<parameter name='tmp.vf-module-topology.aic-cloud-region' value='`$vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region`' />\n","comments":"","x":535.5000267028809,"y":1907.1910581588745,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"d3028953.69e588","type":"set","name":"set aic-clli","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.aic-clli'\n   value='`$aai-uid-split[$aai-uid-split_length - 1]`' />\n","comments":"","x":1296.4522857666016,"y":2066.428984642029,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"94581ccd.aad7b","type":"switchNode","name":"switch aic-clli","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.aic-clli`'>\n","comments":"","outputs":1,"x":495.4999465942383,"y":2180.3813247680664,"z":"d8d4f820.a9f2c8","wires":[["b1708664.0cd408"]]},{"id":"b1708664.0cd408","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":640.7856369018555,"y":2180.381393432617,"z":"d8d4f820.a9f2c8","wires":[["c0313e8.026e4c"]]},{"id":"c0313e8.026e4c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find aic-clli in AAI for aic-cloud-region ' + $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region`\" />\n","comments":"","x":787.9284973144531,"y":2179.9528274536133,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"8c68c9db.5cc588","type":"get-resource","name":"get-resource cloud region","xml":"<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"cloud-region\" \n\t\tkey=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner AND \n\t\t     cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\"\n        pfx='aai.cloud-region' local-only='false' >\n\n","comments":"","outputs":1,"x":534.3571624755859,"y":1980.5245962142944,"z":"d8d4f820.a9f2c8","wires":[["39cb751.b87068a","6f2bd269.f42b3c"]]},{"id":"6f2bd269.f42b3c","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":748.6033554077148,"y":1998.6754522323608,"z":"d8d4f820.a9f2c8","wires":[["9ddf5480.595478"]]},{"id":"9ddf5480.595478","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error retrieving cloud region from AAI\" />\n","comments":"","x":923.603328704834,"y":1998.6754884719849,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"39cb751.b87068a","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":757.5319519042969,"y":1956.9611854553223,"z":"d8d4f820.a9f2c8","wires":[["19351aac.eb7d55"]]},{"id":"19351aac.eb7d55","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Cloud region not found in AAI\" />\n","comments":"","x":923.8812294006348,"y":1956.2667627334595,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"ddc11e24.6362","type":"set","name":"set vf-module-parameters","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-parameters.'\n  value='vf-module-topology-operation-input.vf-module-request-input.vf-module-input-parameters.' />\n","comments":"","x":531.3096084594727,"y":2630.9536867141724,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"6a49172a.ca77c8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1581.666732788086,"y":657.9440250396729,"z":"d8d4f820.a9f2c8","wires":[["8701ea4a.806da8","63acc087.0c755"]]},{"id":"63acc087.0c755","type":"break","name":"break","xml":"<break>\n","comments":"","x":1716.6666984558105,"y":679.6106109619141,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"2124c285.813fae","type":"set","name":"set from DB","xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-invariant-uuid'\n  value='`$db.vf-module-model.invariant-uuid`' />\n","comments":"","x":909.8332862854004,"y":2221.7773180007935,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"99bb54bb.4e1de8","type":"switchNode","name":"switch input model-invariant-uuid","xml":"<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-invariant-uuid`'>\n","comments":"","outputs":1,"x":553.6903610229492,"y":2244.601761817932,"z":"d8d4f820.a9f2c8","wires":[["d32935b8.b3b048","631ec28f.61d50c"]]},{"id":"d32935b8.b3b048","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":759.3570327758789,"y":2221.744725227356,"z":"d8d4f820.a9f2c8","wires":[["2124c285.813fae"]]},{"id":"631ec28f.61d50c","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":760.7856292724609,"y":2266.0303163528442,"z":"d8d4f820.a9f2c8","wires":[["f816c94e.c473c8"]]},{"id":"f816c94e.c473c8","type":"set","name":"set from input","xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-invariant-uuid'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-invariant-uuid`' />\n","comments":"","x":915.0713653564453,"y":2265.458888530731,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"cd34bd6c.87b5d","type":"set","name":"set from DB","xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-uuid'\n  value='`$db.vf-module-model.uuid`' />\n","comments":"","x":910.7855567932129,"y":2310.3159942626953,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"d673bc0b.7722a","type":"switchNode","name":"switch input model-uuid","xml":"<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-uuid`'>\n","comments":"","outputs":1,"x":526.3093795776367,"y":2333.1404991149902,"z":"d8d4f820.a9f2c8","wires":[["60d2fe59.459d2","928bf9e9.c5b368"]]},{"id":"60d2fe59.459d2","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":760.3093528747559,"y":2310.2834310531616,"z":"d8d4f820.a9f2c8","wires":[["cd34bd6c.87b5d"]]},{"id":"928bf9e9.c5b368","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":761.7379493713379,"y":2354.56902217865,"z":"d8d4f820.a9f2c8","wires":[["73c2b57a.897a2c"]]},{"id":"73c2b57a.897a2c","type":"set","name":"set from input","xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-uuid'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-uuid`' />\n","comments":"","x":916.0236854553223,"y":2353.997594356537,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"7ae5bcc6.094e44","type":"set","name":"set from DB","xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-version'\n  value='`$db.vf-module-model.version`' />\n","comments":"","x":907.9284896850586,"y":2399.173201560974,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"fa766a0e.be8068","type":"switchNode","name":"switch input model-version","xml":"<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-version`'>\n","comments":"","outputs":1,"x":534.4522514343262,"y":2421.997646331787,"z":"d8d4f820.a9f2c8","wires":[["bdcf8d77.56847","9872a71.4286758"]]},{"id":"bdcf8d77.56847","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":757.4522361755371,"y":2399.1406087875366,"z":"d8d4f820.a9f2c8","wires":[["7ae5bcc6.094e44"]]},{"id":"9872a71.4286758","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":758.8808326721191,"y":2443.426199913025,"z":"d8d4f820.a9f2c8","wires":[["e0f4baac.88f488"]]},{"id":"e0f4baac.88f488","type":"set","name":"set from input","xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-version'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-version`' />\n","comments":"","x":913.1665687561035,"y":2442.854772090912,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"1f9d4369.6b287d","type":"set","name":"set from DB","xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-name'\n  value='`$db.vf-module-model.name`' />\n","comments":"","x":907.9284896850586,"y":2486.316023826599,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"1e8f4bba.a2f834","type":"switchNode","name":"switch input model-name","xml":"<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-name`'>\n","comments":"","outputs":1,"x":529.4522514343262,"y":2509.140468597412,"z":"d8d4f820.a9f2c8","wires":[["a5ef3524.a9ccf8","95091415.f6e848"]]},{"id":"a5ef3524.a9ccf8","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":757.4522361755371,"y":2486.2834310531616,"z":"d8d4f820.a9f2c8","wires":[["1f9d4369.6b287d"]]},{"id":"95091415.f6e848","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":758.8808326721191,"y":2530.56902217865,"z":"d8d4f820.a9f2c8","wires":[["6c3e26f8.2ef8c8"]]},{"id":"6c3e26f8.2ef8c8","type":"set","name":"set from input","xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-name'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-name`' />\n","comments":"","x":913.1665687561035,"y":2529.997594356537,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"670e5324.66f2cc","type":"set","name":"set model-customization-uuid","xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-customization-uuid'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid`' />\n","comments":"","x":543.9045867919922,"y":2581.6494579315186,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"e81eb42a.092d18","type":"set","name":"set vf-module-id","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id'\n   value='`$vf-module-topology-operation-input.vf-module-information.vf-module-id`' />\n","comments":"","x":497.0952339172363,"y":1850.372633934021,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"e006bec6.98363","type":"for","name":"for each cloud-region relationship","xml":"<for index='idx' start='0' end='`$aai.cloud-region.relationship-list.relationship_length`' >\n","comments":"","outputs":1,"x":556.6109771728516,"y":2069.031279563904,"z":"d8d4f820.a9f2c8","wires":[["6b95d4a7.ed04ec"]]},{"id":"6b95d4a7.ed04ec","type":"switchNode","name":"switch related-to","xml":"<switch test='`$aai.cloud-region.relationship-list.relationship[$idx].related-to`'>\n","comments":"","outputs":1,"x":804.2895202636719,"y":2068.7812089920044,"z":"d8d4f820.a9f2c8","wires":[["284f1f3f.58e26"]]},{"id":"284f1f3f.58e26","type":"outcome","name":"complex","xml":"<outcome value='complex'>\n","comments":"","outputs":1,"x":973.7538414001465,"y":2068.1740312576294,"z":"d8d4f820.a9f2c8","wires":[["3b972741.476b28"]]},{"id":"875f8b.c7dfd078","type":"execute","name":"split related-link","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split'>\n   <parameter name='ctx_memory_result_key' value='aai-uid-split' />\n   <parameter name='original_string' value='`$aai.cloud-region.relationship-list.relationship[$idx].related-link`' />\n   <parameter name='regex' value='/' />\n","comments":"","outputs":1,"x":1313.8489990234375,"y":2022.6026067733765,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"3b972741.476b28","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1133.5157012939453,"y":2069.2693948745728,"z":"d8d4f820.a9f2c8","wires":[["875f8b.c7dfd078","6eddea8b.b40c94","d3028953.69e588"]]},{"id":"6eddea8b.b40c94","type":"break","name":"break","xml":"<break>\n","comments":"","x":1283.5156631469727,"y":2112.6026916503906,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"e1c482e1.757c4","type":"execute","name":"execute PropertiesNode","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n","comments":"","outputs":1,"x":512.3809432983398,"y":269.88143253326416,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"11827b45.0aafe5","type":"set","name":"set order-status to PendingCreate","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.order-status'\n  value='PendingCreate' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-rpc-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.request-action`' />\n","comments":"","x":454.2622718811035,"y":7582.237744748592,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"11dec1b.573e93e","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n","comments":"","x":390.8335762023926,"y":7674.856074750423,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"7f62cae0.731ea4","type":"set","name":"copy input data","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.sdnc-request-header.'\n   value='$vf-module-topology-operation-input.sdnc-request-header.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.request-information.'\n   value='$vf-module-topology-operation-input.request-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.service-information.'\n   value='$vf-module-topology-operation-input.service-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vnf-information.'\n   value='$vf-module-topology-operation-input.vnf-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-information.'\n   value='$vf-module-topology-operation-input.vf-module-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-request-input.'\n   value='$vf-module-topology-operation-input.vf-module-request-input.' />\n\n","comments":"","x":395.1192817687988,"y":7534.5860494971275,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"f240bd12.78194","type":"set","name":"copy vf-module-topology data","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.' value='tmp.vf-module-topology.' />\n","comments":"","x":440.0002861022949,"y":7486.371561467648,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"8dd419f6.418c98","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vfmodule.log' />\n","comments":"","outputs":1,"x":385.71452713012695,"y":7627.085891187191,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"bf36d671.a2e478","type":"save","name":"update vf-module","xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vf-module\"\n   key=\"vf-module.vf-module-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id\n      AND generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"vf-module-name\" value=\"`$tmp.vf-module-topology.vf-module-topology-identifier.vf-module-name`\" />\n<parameter name=\"model-invariant-id\" value=\"`$tmp.vf-module-topology.onap-model-information.model-invariant-uuid`\" />\n<parameter name=\"model-version-id\" value=\"`$tmp.vf-module-topology.onap-model-information.model-uuid`\" />\n<parameter name=\"model-customization-id\" value=\"`$tmp.vf-module-topology.onap-model-information.model-customization-uuid`\" />\n<parameter name=\"selflink\" value=\"`$vf-module-object-path`\" />\n<parameter name=\"automated-assignment\" value=\"`$automated-assignment`\" />","comments":"","outputs":1,"x":459.1430130004883,"y":4688.373215317726,"z":"d8d4f820.a9f2c8","wires":[["992d1d10.a6ab4","a46522e3.ac13d"]]},{"id":"df4d839c.1c183","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No vf-module found in AAI for vf module ID ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id`\" />\n","comments":"","x":964.1906890869141,"y":4723.134645998478,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"992d1d10.a6ab4","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":634.2146530151367,"y":4656.753837227821,"z":"d8d4f820.a9f2c8","wires":[["cd366b40.668258"]]},{"id":"a46522e3.ac13d","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":642.7860260009766,"y":4725.372927248478,"z":"d8d4f820.a9f2c8","wires":[["faec9c56.dee65"]]},{"id":"d034bc82.1d73f","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vf-module in AAI\" />\n","comments":"","x":969.2146072387695,"y":4674.89739382267,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"3aa9dd9a.4f17c2","type":"set","name":"set vf-module-object-path","xml":"<set>\n<parameter name='vf-module-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vf-modules/vf-module/'\n + $vf-module-topology-operation-input.vf-module-information.vf-module-id\n + '/vf-module-data/vf-module-topology/'`\"/>\n<parameter name='vnf-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vnf-topology/'`\"/>\n<parameter name='service-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n","comments":"","x":482.80982208251953,"y":4563.897444367409,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"18914e9d.88d881","type":"save","name":"save vf-module relationships","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vf-module:relationship-list\"\n   key=\"vf-module.vf-module-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id\n      AND generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-id`\" />\n","comments":"","outputs":1,"x":1252.833568572998,"y":6246.525609731674,"z":"d8d4f820.a9f2c8","wires":[["e1592008.747ff","22b46edf.e5b2d2"]]},{"id":"e1592008.747ff","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1472.6669120788574,"y":6217.397353887558,"z":"d8d4f820.a9f2c8","wires":[["2bdf1b5.9c54de4"]]},{"id":"22b46edf.e5b2d2","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1481.2384452819824,"y":6270.016498327255,"z":"d8d4f820.a9f2c8","wires":[["f4337a2b.cb3258"]]},{"id":"c5f5b25d.c68de","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vf-module relationships in AAI\" />\n","comments":"","x":1807.6670455932617,"y":6237.207250356674,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"47b4ab3e.ccdc34","type":"for","name":"for each vm-type","xml":"<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n","comments":"","outputs":1,"x":432.50029373168945,"y":6011.859162569046,"z":"d8d4f820.a9f2c8","wires":[["901a1412.b37a68"]]},{"id":"3287a6e9.15137a","type":"for","name":"for each vm-network","xml":"<for silentFailure='true' index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network_length`' >\n","comments":"","outputs":1,"x":829.5003051757812,"y":6430.525994777679,"z":"d8d4f820.a9f2c8","wires":[["fe7bc606.c38338"]]},{"id":"47be3ec9.50b15","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No l3-network found in AAI for network ID '\n      + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-id`\" />\n","comments":"","x":1809.5004196166992,"y":6287.191791296005,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"c28b6c8e.f5ff4","type":"for","name":"for each vm-type","xml":"<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n","comments":"","outputs":1,"x":406.92882919311523,"y":7378.905218064785,"z":"d8d4f820.a9f2c8","wires":[["e53e5c32.c733"]]},{"id":"e53e5c32.c733","type":"for","name":"for each vm","xml":"<for index='vm-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-count`' >\n","comments":"","outputs":1,"x":601.9288597106934,"y":7378.238225877285,"z":"d8d4f820.a9f2c8","wires":[["6271da95.fffb44"]]},{"id":"8f23eeb2.7ddfb","type":"save","name":"save VIPR_CONFIGURATION","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource\" resource=\"SQL\"\nkey=\"INSERT INTO VIPR_CONFIGURATION (vnf_id, vnf_name, ecomp_service_instance_id, vm_name, cloud_region_id, cloud_owner) VALUES ( $service-data.vnfs.vnf[$vnf-index].vnf-id , $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.vnf-name , $service-data.service-information.service-instance-id , $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vm-name[$vm-index] , $tmp.vf-module-topology.aic-cloud-region , $prop.cloud-region.cloud-owner )\" >","comments":"","outputs":1,"x":993.5955619812012,"y":7400.905876100063,"z":"d8d4f820.a9f2c8","wires":[["64a4a635.c1de68"]]},{"id":"17ea2325.6ec4ad","type":"comment","name":"Not a failure","info":"","comments":"","x":1513.5954627990723,"y":7400.905880868435,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"64a4a635.c1de68","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1203.595546722412,"y":7400.906025826931,"z":"d8d4f820.a9f2c8","wires":[["e740bcf1.a5747"]]},{"id":"e740bcf1.a5747","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API.vf-module-topology-operation-assign:REQID\"/>\n<parameter name=\"field3\" value=\"`$vf-module-topology-operation-input.sdnc-request-header.svc-request-id`\"/>\n<parameter name=\"field4\" value=\"Failed to insert VIPR_CONFIGURATION record\"/>\n","comments":"","outputs":1,"x":1346.9289894104004,"y":7400.905863702297,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"327fad2b.3d0ca2","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1376.929111480713,"y":7352.23757737875,"z":"d8d4f820.a9f2c8","wires":[["b9ab0c40.a06e6"]]},{"id":"a4bcc8c.49ea038","type":"comment","name":"Not a failure","info":"","comments":"","x":1700.26216506958,"y":7350.571399629116,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"b9ab0c40.a06e6","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API.vf-module-topology-operation-assign:REQID\"/>\n<parameter name=\"field3\" value=\"`$vf-module-topology-operation-input.sdnc-request-header.svc-request-id`\"/>\n<parameter name=\"field4\" value=\"Failed to insert VIPR_CONFIGURATION record\"/>\n","comments":"","outputs":1,"x":1522.9290466308594,"y":7352.238210618496,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"6271da95.fffb44","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":770.2622528076172,"y":7377.238070428371,"z":"d8d4f820.a9f2c8","wires":[["4bb03b2a.868f64","8f23eeb2.7ddfb"]]},{"id":"4bb03b2a.868f64","type":"delete","name":"delete any pre-existing records in VIPR_CONFIGURATION","xml":"<delete plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='DELETE from VIPR_CONFIGURATION WHERE vnf_id = $service-data.vnfs.vnf[$vnf-index].vnf-id\n     AND ecomp_service_instance_id = $service-data.service-information.service-instance-id\n     AND vm_name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vm-name[$vm-index]' >","comments":"","outputs":1,"x":1083.5955772399902,"y":7352.572210252285,"z":"d8d4f820.a9f2c8","wires":[["327fad2b.3d0ca2"]]},{"id":"cd366b40.668258","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":792.5002212524414,"y":4656.5245081186295,"z":"d8d4f820.a9f2c8","wires":[["d034bc82.1d73f","dd4614ae.702368"]]},{"id":"faec9c56.dee65","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":793.5001373291016,"y":4723.190798342228,"z":"d8d4f820.a9f2c8","wires":[["df4d839c.1c183","dd4614ae.702368"]]},{"id":"2bdf1b5.9c54de4","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1641.1669158935547,"y":6217.191623449326,"z":"d8d4f820.a9f2c8","wires":[["c5f5b25d.c68de","d24c503d.94fad"]]},{"id":"f4337a2b.cb3258","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1636.1669158935547,"y":6270.191466093063,"z":"d8d4f820.a9f2c8","wires":[["47be3ec9.50b15","d24c503d.94fad"]]},{"id":"a309d0d6.bf143","type":"execute","name":"execute RestApiCallNode - get preload-list","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value=\"`$prop.controller.url + $prop.restapi.preloadinformation + $vf-module-topology-operation-input.vf-module-request-input.vf-module-name + '/vf-module'`\" />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-preload\" />\n\n","comments":"","outputs":1,"x":978.3334121704102,"y":2726.5248308181763,"z":"d8d4f820.a9f2c8","wires":[["b1ceddfa.6ca5b","98588ef1.9cb99"]]},{"id":"b1ceddfa.6ca5b","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1241.6667277018228,"y":2689.8580471674595,"z":"d8d4f820.a9f2c8","wires":[["a356f284.dc8c2"]]},{"id":"98588ef1.9cb99","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1245.000015258789,"y":2764.85804271698,"z":"d8d4f820.a9f2c8","wires":[["252fa3fb.3c7afc"]]},{"id":"a356f284.dc8c2","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1403.3334159851074,"y":2688.1913318634033,"z":"d8d4f820.a9f2c8","wires":[["fddad708.fda4c8"]]},{"id":"252fa3fb.3c7afc","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1400.0000228881836,"y":2764.8578844070435,"z":"d8d4f820.a9f2c8","wires":[["60d1dc49.37e5b4"]]},{"id":"fddad708.fda4c8","type":"switchNode","name":"switch mdsal-preload.response-code","xml":"<switch test='`$mdsal-preload.response-code`'>\n","comments":"","outputs":1,"x":1631.6667175292969,"y":2688.191372871399,"z":"d8d4f820.a9f2c8","wires":[["23eac36b.9fee9c","199e36c9.954ce9"]]},{"id":"23eac36b.9fee9c","type":"outcome","name":"404 (not found)","xml":"<outcome value='404'>\n","comments":"","outputs":1,"x":1883.33345413208,"y":2651.5247468948364,"z":"d8d4f820.a9f2c8","wires":[["ac08e510.b09af8"]]},{"id":"ac08e510.b09af8","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-operation-assign-no-preload","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-operation-assign-no-preload' mode='sync' >\n","comments":"","outputs":1,"x":2279.9999237060547,"y":2649.8578748703003,"z":"d8d4f820.a9f2c8","wires":[["5aebe14a.20e1a"]]},{"id":"5aebe14a.20e1a","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2650.000072479248,"y":2648.1914110183716,"z":"d8d4f820.a9f2c8","wires":[["af8fa6f8.47b568"]]},{"id":"92d86032.bda92","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":2958.333450317383,"y":2679.858147621155,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"199e36c9.954ce9","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1858.3335342407227,"y":2708.191237449646,"z":"d8d4f820.a9f2c8","wires":[["616c54.9bd543ac"]]},{"id":"5ed414bf.bfc72c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error retrieving preload-information\" />\n","comments":"","x":2171.6664390563965,"y":2724.8576612472534,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"60d1dc49.37e5b4","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-operation-assign-preload","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-operation-assign-preload' mode='sync' >\n","comments":"","outputs":1,"x":1763.3333129882812,"y":2766.5246324539185,"z":"d8d4f820.a9f2c8","wires":[["b64da520.619978"]]},{"id":"b64da520.619978","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2119.000175476074,"y":2764.858250617981,"z":"d8d4f820.a9f2c8","wires":[["4fbb0a7.af041f4"]]},{"id":"30dea8b5.f55b68","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":2427.333427429199,"y":2786.5251455307007,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"901a1412.b37a68","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":623.0003623962402,"y":6012.692397356033,"z":"d8d4f820.a9f2c8","wires":[["3287a6e9.15137a","30b1e4a0.7d1d3c"]]},{"id":"30b1e4a0.7d1d3c","type":"for","name":"for each vnfc","xml":"<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n","comments":"","outputs":1,"x":874.0004119873047,"y":5217.358488559723,"z":"d8d4f820.a9f2c8","wires":[["a0ec17cb.ddfe38"]]},{"id":"e60e02b2.796fd","type":"save","name":"save vnfc to A&AI","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vnfc\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\" >\n<parameter name=\"vnfc-name\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name`\" />\n<parameter name=\"nfc-naming-code\" value=\"`$tmp.nfc-naming-code`\" />\n<parameter name=\"nfc-function\" value=\"`$tmp.nfc-function`\" />\n<parameter name=\"model-invariant-id\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].invariant-uuid`\" />\n<parameter name=\"model-version-id\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].uuid`\" />\n<parameter name=\"model-customization-id\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].model-customization-uuid`\" />\n<parameter name=\"orchestration-status\" value=\"`PendingCreate`\" />\n<parameter name=\"in-maint\" value=\"true\" />\n<parameter name=\"prov-status\" value=\"`PREPROV`\" />\n","comments":"","outputs":1,"x":1250.000316619873,"y":5017.358997821808,"z":"d8d4f820.a9f2c8","wires":[["27c2a6b.a00715a","496b828.086087c"]]},{"id":"a0ec17cb.ddfe38","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1042.3337135314941,"y":5218.025315761566,"z":"d8d4f820.a9f2c8","wires":[["e60e02b2.796fd","a71fab62.7f1228","e1e37700.5352c8","aefb8469.9aaa88","697f82c4.6623dc","670d28d3.fa52d8"]]},{"id":"27c2a6b.a00715a","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1441.0003128051758,"y":4993.025450229645,"z":"d8d4f820.a9f2c8","wires":[["70da8d01.b0b054"]]},{"id":"f25de2dc.81b99","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error saving vnfc to AAI\" />\n","comments":"","x":1780.0004653930664,"y":5027.168705821037,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"70da8d01.b0b054","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1606.1669998168945,"y":5007.153283536434,"z":"d8d4f820.a9f2c8","wires":[["f25de2dc.81b99","cc4e9fe7.acb19"]]},{"id":"aefb8469.9aaa88","type":"save","name":"save vnfc relationships","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vnfc:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"generic-vnf\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/generic-vnfs/generic-vnf/' +\n        $vf-module-topology-operation-input.vnf-information.vnf-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"vf-module\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/generic-vnfs/generic-vnf/' +\n        $vf-module-topology-operation-input.vnf-information.vnf-id +\n        '/vf-modules/vf-module/' +\n        $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id`\" />\n","comments":"","outputs":1,"x":1266.9049987792969,"y":5126.311650753021,"z":"d8d4f820.a9f2c8","wires":[["85ea514f.8a858","b813c501.1fa968"]]},{"id":"e7559b37.1ee5e8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vnfc relationships in AAI\" />\n","comments":"","x":1776.9049339294434,"y":5117.978486537933,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"76890288.fe12cc","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vnfc relationships\" />\n","comments":"","x":1772.0718421936035,"y":5169.629693508148,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"80bd3a6a.5f03d8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1598.7381896972656,"y":5099.629274845123,"z":"d8d4f820.a9f2c8","wires":[["e7559b37.1ee5e8","cc4e9fe7.acb19"]]},{"id":"51aa1d6c.7c6b74","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1598.738265991211,"y":5152.629033565521,"z":"d8d4f820.a9f2c8","wires":[["76890288.fe12cc","cc4e9fe7.acb19"]]},{"id":"85ea514f.8a858","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1441.9050750732422,"y":5099.644944667816,"z":"d8d4f820.a9f2c8","wires":[["80bd3a6a.5f03d8"]]},{"id":"b813c501.1fa968","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1450.4766082763672,"y":5152.264089107513,"z":"d8d4f820.a9f2c8","wires":[["51aa1d6c.7c6b74"]]},{"id":"a71fab62.7f1228","type":"for","name":"for each vnfc-network-role","xml":"<for silentFailure='true' index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data_length`' >\n","comments":"","outputs":1,"x":1264.381118774414,"y":5543.168058872223,"z":"d8d4f820.a9f2c8","wires":[["b322cbb.d612438"]]},{"id":"194f4ea1.cd8cd1","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vfmoduleb.log' />\n","comments":"","outputs":1,"x":485.0000228881836,"y":2851.0718808174133,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"111a216a.3e270f","type":"for","name":"for each vnfc-subnetwork-role","xml":"<for silentFailure='true' index='subnet-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet_length`' >\n","comments":"","outputs":1,"x":1720.3336563110352,"y":5506.35849237442,"z":"d8d4f820.a9f2c8","wires":[["35562888.b34fa8"]]},{"id":"35562888.b34fa8","type":"for","name":"for each vnfc-address-family","xml":"<for silentFailure='true' index='address-family-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments_length`' >\n","comments":"","outputs":1,"x":1987.6669998168945,"y":5505.35898065567,"z":"d8d4f820.a9f2c8","wires":[["21c512d3.dbfdae"]]},{"id":"2ac7aead.c3d8c2","type":"for","name":"for each vnfc-ip-address","xml":"<for silentFailure='true' index='address-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip_length`' >\n","comments":"","outputs":1,"x":2419.6666107177734,"y":5572.024680137634,"z":"d8d4f820.a9f2c8","wires":[["27c6424e.845c5e"]]},{"id":"21c512d3.dbfdae","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2198.6667709350586,"y":5505.35843706131,"z":"d8d4f820.a9f2c8","wires":[["2ede288d.5a3018","2ac7aead.c3d8c2"]]},{"id":"2ede288d.5a3018","type":"set","name":"set tmp.address-family","xml":"<set>\n<parameter name='tmp.address-family'\n  value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-address-family`' />\n","comments":"","x":2418.6670989990234,"y":5425.358334541321,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"27c6424e.845c5e","type":"switchNode","name":"switch address family","xml":"<switch test='`$tmp.address-family`'>\n","comments":"","outputs":1,"x":2658.666702270508,"y":5570.3585023880005,"z":"d8d4f820.a9f2c8","wires":[["31736476.3cd16c","116c9e38.1c20a2"]]},{"id":"31736476.3cd16c","type":"outcome","name":"ipv4","xml":"<outcome value='ipv4'>\n","comments":"","outputs":1,"x":2855.8097076416016,"y":5473.929762840271,"z":"d8d4f820.a9f2c8","wires":[["db541b87.070258"]]},{"id":"116c9e38.1c20a2","type":"outcome","name":"ipv6","xml":"<outcome value='ipv6'>\n","comments":"","outputs":1,"x":2853.428779602051,"y":5653.691794395447,"z":"d8d4f820.a9f2c8","wires":[["3541126b.0824ee"]]},{"id":"296969ad.af43b6","type":"comment","name":"Fixed IPs","info":"","comments":"","x":1737.3336715698242,"y":5468.025869369507,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"3f16694b.e0c026","type":"save","name":"save l3-interface-ipv4-address-list object to A&AI","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-interface-ipv4-address-list\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\n\t  AND l3-interface-ipv4-address-list.l3-interface-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address\" >\n<parameter name=\"l3-interface-ipv4-address\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address`\" />\n<parameter name=\"l3-interface-ipv4-prefix-length\" value=\"32\" />\n<parameter name=\"is-floating\" value=\"false\" />\n","comments":"","outputs":1,"x":3299.142837524414,"y":5422.262842814129,"z":"d8d4f820.a9f2c8","wires":[["d3a31ea0.5e7ab"]]},{"id":"db541b87.070258","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3005.8097076416016,"y":5473.929681460064,"z":"d8d4f820.a9f2c8","wires":[["3f16694b.e0c026","e54c81f0.e74"]]},{"id":"183d1d3.618a9e3","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error creating l3-interface-ipv4-address-list object in AAI\" />\n","comments":"","x":3882.4763565063477,"y":5440.596501986187,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"f747951e.38ee28","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3712.6427116394043,"y":5422.24733511607,"z":"d8d4f820.a9f2c8","wires":[["183d1d3.618a9e3","4c1a7c6e.e70f14"]]},{"id":"d3a31ea0.5e7ab","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":3555.809597015381,"y":5422.263004938763,"z":"d8d4f820.a9f2c8","wires":[["f747951e.38ee28"]]},{"id":"e54c81f0.e74","type":"save","name":"save l3-interface-ipv4-address-list relationships","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"l3-interface-ipv4-address-list:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\n\t  AND l3-interface-ipv4-address-list.l3-interface-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"subnet\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id +\n        '/subnets/subnet/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].subnet-id`\" />\n","comments":"","outputs":1,"x":3294.143081665039,"y":5520.596261660259,"z":"d8d4f820.a9f2c8","wires":[["421706f7.2ef6d8","5f2068fe.10b6e8"]]},{"id":"a26afed8.e68c7","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating l3-interface-ipv4-address-list relationships in AAI\" />\n","comments":"","x":3880.8094635009766,"y":5512.262933413189,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"65d28d25.dd0424","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating l3-interface-ipv4-address-list relationships\" />\n","comments":"","x":3880.9763259887695,"y":5562.247391382854,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"a119a7b2.41bfd8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3714.3093338012695,"y":5492.24730650584,"z":"d8d4f820.a9f2c8","wires":[["a26afed8.e68c7","4c1a7c6e.e70f14"]]},{"id":"68d5b42e.ef934c","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3714.309410095215,"y":5545.247065226238,"z":"d8d4f820.a9f2c8","wires":[["65d28d25.dd0424","4c1a7c6e.e70f14"]]},{"id":"421706f7.2ef6d8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":3557.476219177246,"y":5492.262976328533,"z":"d8d4f820.a9f2c8","wires":[["a119a7b2.41bfd8"]]},{"id":"5f2068fe.10b6e8","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":3566.047752380371,"y":5544.88212076823,"z":"d8d4f820.a9f2c8","wires":[["68d5b42e.ef934c"]]},{"id":"46a23047.5b1b9","type":"save","name":"save l3-interface-ipv6-address-list object to A&AI","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-interface-ipv6-address-list\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\n\t  AND l3-interface-ipv6-address-list.l3-interface-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address\" >\n<parameter name=\"l3-interface-ipv6-address\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address`\" />\n<parameter name=\"l3-interface-ipv6-prefix-length\" value=\"128\" />\n<parameter name=\"is-floating\" value=\"false\" />\n","comments":"","outputs":1,"x":3297.9525756835938,"y":5601.310898780823,"z":"d8d4f820.a9f2c8","wires":[["191cf9e6.3393b6"]]},{"id":"3541126b.0824ee","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3004.6194458007812,"y":5652.977737426758,"z":"d8d4f820.a9f2c8","wires":[["46a23047.5b1b9","5b3b7aaf.e55054"]]},{"id":"f7617430.207ec8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error creating l3-interface-ipv6-address-list object in AAI\" />\n","comments":"","x":3881.2860946655273,"y":5619.644557952881,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"13f2bd5a.db12c3","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3711.452449798584,"y":5601.295391082764,"z":"d8d4f820.a9f2c8","wires":[["f7617430.207ec8","4c1a7c6e.e70f14"]]},{"id":"191cf9e6.3393b6","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":3554.6193351745605,"y":5601.3110609054565,"z":"d8d4f820.a9f2c8","wires":[["13f2bd5a.db12c3"]]},{"id":"5b3b7aaf.e55054","type":"save","name":"save l3-interface-ipv6-address-list relationships","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"l3-interface-ipv6-address-list:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\n\t  AND l3-interface-ipv6-address-list.l3-interface-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"subnet\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id +\n        '/subnets/subnet/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].subnet-id`\" />\n","comments":"","outputs":1,"x":3292.9528198242188,"y":5699.644317626953,"z":"d8d4f820.a9f2c8","wires":[["e2dd76a4.6b3eb8","e1b3f0b9.06247"]]},{"id":"5286a95f.c1b8f8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating l3-interface-ipv6-address-list relationships in AAI\" />\n","comments":"","x":3879.6192016601562,"y":5691.310989379883,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"c65b3094.b4e8d","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating l3-interface-ipv6-address-list relationships\" />\n","comments":"","x":3883.1194229125977,"y":5737.962005853653,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"e5a93916.86df88","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3713.119071960449,"y":5671.295362472534,"z":"d8d4f820.a9f2c8","wires":[["5286a95f.c1b8f8","4c1a7c6e.e70f14"]]},{"id":"61288878.8c3138","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3713.1191482543945,"y":5724.295121192932,"z":"d8d4f820.a9f2c8","wires":[["c65b3094.b4e8d","4c1a7c6e.e70f14"]]},{"id":"e2dd76a4.6b3eb8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":3556.285957336426,"y":5671.311032295227,"z":"d8d4f820.a9f2c8","wires":[["e5a93916.86df88"]]},{"id":"e1b3f0b9.06247","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":3564.857490539551,"y":5723.930176734924,"z":"d8d4f820.a9f2c8","wires":[["61288878.8c3138"]]},{"id":"fe7bc606.c38338","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1019.333625793457,"y":6430.025434017181,"z":"d8d4f820.a9f2c8","wires":[["5ddb1d4d.723b24","18914e9d.88d881","7e9b3596.bcd9ec","fa1c5e95.b556f"]]},{"id":"a84b239.f1f1fe","type":"for","name":"for each vnfc","xml":"<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n","comments":"","outputs":1,"x":1667.3338012695312,"y":6552.359181880951,"z":"d8d4f820.a9f2c8","wires":[["d1002173.07ce9"]]},{"id":"b46ec896.4c4018","type":"save","name":"save vip-ipv4-address-list object to A&AI","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vip-ipv4-address-list\" \n\tkey=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv4-address-list.vip-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4[$ipv4-index]\" >\n<parameter name=\"vip-ipv4-address\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4[$ipv4-index]`\" />\n<parameter name=\"vip-ipv4-prefix-length\" value=\"32\" />\n<parameter name=\"is-floating\" value=\"false\" />\n","comments":"","outputs":1,"x":1750.3336563110352,"y":6383.692193508148,"z":"d8d4f820.a9f2c8","wires":[["208183d4.79506c","b616b3d9.ec065"]]},{"id":"7e9b3596.bcd9ec","type":"for","name":"for each floating ipv4 address","xml":"<for silentFailure='true' index='ipv4-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4_length`' >\n","comments":"","outputs":1,"x":1258.3336486816406,"y":6441.692265987396,"z":"d8d4f820.a9f2c8","wires":[["d4cec7ee.9a1cb8"]]},{"id":"d4cec7ee.9a1cb8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1484.3336486816406,"y":6439.692265987396,"z":"d8d4f820.a9f2c8","wires":[["b46ec896.4c4018","40849ebf.e6f5c","a84b239.f1f1fe"]]},{"id":"92c56170.8fa1f","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error saving vip-ipv4-address-list in AAI\" />\n","comments":"","x":2312.333656311035,"y":6373.692193508148,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"bdfbc002.39b83","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error saving vip-ipv4-address-list\" />\n","comments":"","x":2312.500518798828,"y":6423.676651477814,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"7237a892.e2f4a8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2145.833526611328,"y":6353.6765666008,"z":"d8d4f820.a9f2c8","wires":[["92c56170.8fa1f","e9d5c469.8db3b8"]]},{"id":"84fddba6.7619c8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2145.8336029052734,"y":6406.6763253211975,"z":"d8d4f820.a9f2c8","wires":[["bdfbc002.39b83","e9d5c469.8db3b8"]]},{"id":"208183d4.79506c","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1989.0004119873047,"y":6353.692236423492,"z":"d8d4f820.a9f2c8","wires":[["7237a892.e2f4a8"]]},{"id":"b616b3d9.ec065","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1997.5719451904297,"y":6406.31138086319,"z":"d8d4f820.a9f2c8","wires":[["84fddba6.7619c8"]]},{"id":"4095636f.001c2c","type":"save","name":"save vip-ipv4-address-list relationships","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vip-ipv4-address-list:relationship-list\"\n   key=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv4-address-list.vip-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4[$ipv4-index]\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"subnet\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].network-id\n        + '/subnets/subnet/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.ipv4-subnet-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"vnfc\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/vnfcs/vnfc/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name`\" />\n","comments":"","outputs":1,"x":2086.0002517700195,"y":6496.358856678009,"z":"d8d4f820.a9f2c8","wires":[["e200655.899f198","df0531f4.d7d6a"]]},{"id":"990a61f1.2fe44","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vip-ipv4-address-list relationships in AAI\" />\n","comments":"","x":2655.666660308838,"y":6488.358826220036,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"6ded47db.686b78","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vip-ipv4-address-list relationships\" />\n","comments":"","x":2655.8336296081543,"y":6538.34299993515,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"55f518fb.047e78","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2489.166530609131,"y":6468.343199312687,"z":"d8d4f820.a9f2c8","wires":[["990a61f1.2fe44","e9d5c469.8db3b8"]]},{"id":"306058a5.9c7e68","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2489.166606903076,"y":6521.342958033085,"z":"d8d4f820.a9f2c8","wires":[["6ded47db.686b78","e9d5c469.8db3b8"]]},{"id":"e200655.899f198","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2332.3334159851074,"y":6468.35886913538,"z":"d8d4f820.a9f2c8","wires":[["55f518fb.047e78"]]},{"id":"df0531f4.d7d6a","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2340.9049491882324,"y":6520.978013575077,"z":"d8d4f820.a9f2c8","wires":[["306058a5.9c7e68"]]},{"id":"5d3e5ae1.ed9164","type":"save","name":"save vip-ipv6-address-list object to A&AI","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vip-ipv6-address-list\" \n\tkey=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv6-address-list.vip-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6[$ipv6-index]\" >\n<parameter name=\"vip-ipv6-address\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6[$ipv6-index]`\" />\n<parameter name=\"vip-ipv6-prefix-length\" value=\"128\" />\n<parameter name=\"is-floating\" value=\"false\" />\n","comments":"","outputs":1,"x":1753.6669845581055,"y":6707.024877071381,"z":"d8d4f820.a9f2c8","wires":[["988d6b9f.8034f8","182bd326.b3316d"]]},{"id":"fa1c5e95.b556f","type":"for","name":"for each floating ipv6 address","xml":"<for silentFailure='true' index='ipv6-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6_length`' >\n","comments":"","outputs":1,"x":1261.666976928711,"y":6764.024949550629,"z":"d8d4f820.a9f2c8","wires":[["cf9bee6f.0cc48"]]},{"id":"cf9bee6f.0cc48","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1487.666976928711,"y":6763.024949550629,"z":"d8d4f820.a9f2c8","wires":[["5d3e5ae1.ed9164","52753a40.3ac994","92b2a00c.30465"]]},{"id":"a0bbf16a.8422a","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error saving vip-ipv6-address-list in AAI\" />\n","comments":"","x":2315.6669845581055,"y":6697.024877071381,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"5ac4a2f0.1969dc","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error saving vip-ipv6-address-list\" />\n","comments":"","x":2315.8338470458984,"y":6747.009335041046,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"525ea638.a26228","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2149.1668548583984,"y":6677.009250164032,"z":"d8d4f820.a9f2c8","wires":[["a0bbf16a.8422a","e9d5c469.8db3b8"]]},{"id":"10ac7d1d.4a7f53","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2149.1669311523438,"y":6730.00900888443,"z":"d8d4f820.a9f2c8","wires":[["5ac4a2f0.1969dc","e9d5c469.8db3b8"]]},{"id":"988d6b9f.8034f8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1992.333740234375,"y":6677.024919986725,"z":"d8d4f820.a9f2c8","wires":[["525ea638.a26228"]]},{"id":"182bd326.b3316d","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2000.9052734375,"y":6729.644064426422,"z":"d8d4f820.a9f2c8","wires":[["10ac7d1d.4a7f53"]]},{"id":"a558b44a.9baf78","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vip-ipv6-address-list relationships in AAI\" />\n","comments":"","x":2649.0002403259277,"y":6810.024927675724,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"d65ec88e.491d08","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vip-ipv6-address-list relationships\" />\n","comments":"","x":2649.1671028137207,"y":6860.00938564539,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"42b87eaf.21b13","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2482.5001106262207,"y":6790.009300768375,"z":"d8d4f820.a9f2c8","wires":[["a558b44a.9baf78","e9d5c469.8db3b8"]]},{"id":"7de50dd9.b7a3a4","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2482.500186920166,"y":6843.009059488773,"z":"d8d4f820.a9f2c8","wires":[["d65ec88e.491d08","e9d5c469.8db3b8"]]},{"id":"37de59f6.f9ae46","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2325.6669960021973,"y":6790.024970591068,"z":"d8d4f820.a9f2c8","wires":[["42b87eaf.21b13"]]},{"id":"8feaea6f.5e8168","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2334.2385292053223,"y":6842.6441150307655,"z":"d8d4f820.a9f2c8","wires":[["7de50dd9.b7a3a4"]]},{"id":"194d678b.fc6828","type":"save","name":"save vip-ipv6-address-list relationships","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vip-ipv6-address-list:relationship-list\"\n   key=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv6-address-list.vip-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6[$ipv6-index]\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"subnet\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].network-id\n        + '/subnets/subnet/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.ipv6-subnet-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"vnfc\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/vnfcs/vnfc/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name`\" />\n","comments":"","outputs":1,"x":2081.333839416504,"y":6818.6913895606995,"z":"d8d4f820.a9f2c8","wires":[["37de59f6.f9ae46","8feaea6f.5e8168"]]},{"id":"dd4614ae.702368","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n","comments":"","outputs":1,"x":1137.333511352539,"y":4627.024782717228,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"cc4e9fe7.acb19","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n","comments":"","outputs":1,"x":1952.0002517700195,"y":4980.0252150297165,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"d24c503d.94fad","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n","comments":"","outputs":1,"x":2010.6670379638672,"y":6182.025355041027,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"e9d5c469.8db3b8","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n","comments":"","outputs":1,"x":2959.667167663574,"y":6301.025201320648,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"4c1a7c6e.e70f14","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n","comments":"","outputs":1,"x":4279.000156402588,"y":5348.69128125906,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"e1e37700.5352c8","type":"set","name":"set created_flag","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].created_flag' value='true' />\n","comments":"","x":1244.0002822875977,"y":5066.025173604488,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"5ddb1d4d.723b24","type":"set","name":"set created-flag","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].created-flag' value='true' />\n","comments":"","x":1214.6670379638672,"y":6314.025355041027,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"40849ebf.e6f5c","type":"set","name":"set created-ipv4-flag","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.created-ipv4-flag' value='true' />\n","comments":"","x":1687.6670036315918,"y":6442.025434911251,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"52753a40.3ac994","type":"set","name":"set created-ipv6-flag","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.created-ipv6-flag' value='true' />\n","comments":"","x":1693.0003395080566,"y":6768.025038182735,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"496b828.086087c","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1444.0002517700195,"y":5041.025109708309,"z":"d8d4f820.a9f2c8","wires":[["70da8d01.b0b054"]]},{"id":"bd330e1c.c356a","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-vlan-tagging-assign","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-vlan-tagging-assign' mode='sync' >\n","comments":"","outputs":1,"x":577.6668167114258,"y":7106.025215625763,"z":"d8d4f820.a9f2c8","wires":[["adc70610.d32748"]]},{"id":"adc70610.d32748","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":922.0002326965332,"y":7105.358710765839,"z":"d8d4f820.a9f2c8","wires":[["48d918da.a6eeb8"]]},{"id":"48d918da.a6eeb8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1077.0001068115234,"y":7105.358506679535,"z":"d8d4f820.a9f2c8","wires":[["8fadb577.5a6828","f982f4df.2d8098","4303e7b0.8e59f8"]]},{"id":"8fadb577.5a6828","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n","comments":"","outputs":1,"x":1425.333396911621,"y":7050.358926534653,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"f982f4df.2d8098","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":1253.666835784912,"y":7148.6921545267105,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"4303e7b0.8e59f8","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vlantaggingfailure.log' />\n","comments":"","outputs":1,"x":1248.666732788086,"y":7102.025010585785,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"860c887f.eaff48","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":202.55953216552734,"y":518.5714416503906,"z":"d8d4f820.a9f2c8","wires":[["e1c482e1.757c4","a0a0c247.e2df1","1dc8c520.10fcfb","d7ec98f9.c11048","95a14b79.388078","732b9e7f.347cb","80a19b00.38d098"]]},{"id":"f29eef5f.5b38a","type":"switchNode","name":"switch from-preload","xml":"<switch test='`$from-preload`'>\n","comments":"","outputs":1,"x":506.90474700927734,"y":2917.500500679016,"z":"d8d4f820.a9f2c8","wires":[["cfa4393d.27bb98","54a80d0e.e5ab24"]]},{"id":"cfa4393d.27bb98","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":678.8094787597656,"y":2894.8815212249756,"z":"d8d4f820.a9f2c8","wires":[["14535724.d338b9"]]},{"id":"54a80d0e.e5ab24","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":680.476131439209,"y":2939.881360054016,"z":"d8d4f820.a9f2c8","wires":[["9c56ce90.6ec89"]]},{"id":"14535724.d338b9","type":"set","name":"set automated-assignment to true","xml":"<set>\n<parameter name='automated-assignment' value='true' />\n","comments":"","x":893.8094635009766,"y":2893.2146921157837,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"9c56ce90.6ec89","type":"set","name":"set automated-assignment to false","xml":"<set>\n<parameter name='automated-assignment' value='false' />\n","comments":"","x":892.1427841186523,"y":2938.214612007141,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"92b2a00c.30465","type":"for","name":"for each vnfc","xml":"<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n","comments":"","outputs":1,"x":1668.4288711547852,"y":6866.9054617881775,"z":"d8d4f820.a9f2c8","wires":[["811c48e4.7c4c98"]]},{"id":"c08af869.955e08","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Test return\" />\n","comments":"","x":141.33345794677734,"y":7321.692536711693,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"9691502a.3601c","type":"for","name":"for each vm-type","xml":"<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n","comments":"","outputs":1,"x":485.66684341430664,"y":4277.691383361816,"z":"d8d4f820.a9f2c8","wires":[["368022b8.1e4dfe"]]},{"id":"368022b8.1e4dfe","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":676.1669120788574,"y":4278.524618148804,"z":"d8d4f820.a9f2c8","wires":[["6f9ca115.6a637"]]},{"id":"6f9ca115.6a637","type":"for","name":"for each vm-network","xml":"<for silentFailure='true' index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network_length`' >\n","comments":"","outputs":1,"x":877.6668434143066,"y":4277.691383361816,"z":"d8d4f820.a9f2c8","wires":[["bdd4d8e5.08a198"]]},{"id":"bdd4d8e5.08a198","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1067.5001640319824,"y":4277.190822601318,"z":"d8d4f820.a9f2c8","wires":[["d3ed42e6.8ebad"]]},{"id":"d3ed42e6.8ebad","type":"get-resource","name":"get-resource VFC_RELATED_NETWORK_ROLE","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VFC_RELATED_NETWORK_ROLE where vfc_customization_uuid = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].model-customization-uuid\n    and network_role = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-role'\n  pfx='db.vnf-related-network-role[]'>\n\n","comments":"","outputs":1,"x":1357.0001373291016,"y":4275.691465377808,"z":"d8d4f820.a9f2c8","wires":[["b8ffa6bd.7527c8","7e002500.68059c"]]},{"id":"b8ffa6bd.7527c8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1628.0000762939453,"y":4180.358167648315,"z":"d8d4f820.a9f2c8","wires":[["b873b0ad.eddc7"]]},{"id":"b873b0ad.eddc7","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1775.1905937194824,"y":4178.9061822891235,"z":"d8d4f820.a9f2c8","wires":[["9c47c7a5.43caf8","a3718191.034c9"]]},{"id":"7e002500.68059c","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1616.3333282470703,"y":4400.024639129639,"z":"d8d4f820.a9f2c8","wires":[["15daeec8.1c2d81"]]},{"id":"c9b40208.98c5d","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2034.6665802001953,"y":4402.024394989014,"z":"d8d4f820.a9f2c8","wires":[["46cb0c.05d564f4","262afae2.895cb6","1c2f4ba5.9fec74","2fa84a28.7086b6","11f8b093.8cc66f","8c001003.badde","7bd8f9ca.1b7e48","16c4f557.6fba4b"]]},{"id":"9c47c7a5.43caf8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VFC_RELATED_NETWORK_ROLE table\" />\n","comments":"","x":1927.3334503173828,"y":4175.69141960144,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"262afae2.895cb6","type":"for","name":"for each vnf network","xml":"<for silentFailure='true' index='vnf-network-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length`' >\n","comments":"","outputs":1,"x":2229.666717529297,"y":4269.358051300049,"z":"d8d4f820.a9f2c8","wires":[["983bbb86.402fa8"]]},{"id":"46cb0c.05d564f4","type":"set","name":"set found-related-network to false","xml":"<set>\n<parameter name='found-related-network' value='false' />\n","comments":"","x":2269.666793823242,"y":4211.024827957153,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"e01ef5f4.8efa28","type":"for","name":"for each related network","xml":"<for silentFailure='true' index='related-network-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].related-networks.related-network_length`' >\n","comments":"","outputs":1,"x":2628.666679382324,"y":4246.024314880371,"z":"d8d4f820.a9f2c8","wires":[["4c63bd2c.6c9c24"]]},{"id":"983bbb86.402fa8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2417.666717529297,"y":4269.358051300049,"z":"d8d4f820.a9f2c8","wires":[["e01ef5f4.8efa28","a693b9e7.f21078"]]},{"id":"4c63bd2c.6c9c24","type":"switchNode","name":"switch network-role matches","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].related-networks.related-network[$related-network-index].network-role\n  == $db.vnf-related-network-role[$db-related-network-index].related-network-role`'>\n","comments":"","outputs":1,"x":2880.6665954589844,"y":4246.024391174316,"z":"d8d4f820.a9f2c8","wires":[["2df806f.57624fa"]]},{"id":"15daeec8.1c2d81","type":"for","name":"for each db related-network","xml":"<for index='db-related-network-index' start='0' end='`$db.vnf-related-network-role_length`' >\n","comments":"","outputs":1,"x":1820.6667022705078,"y":4400.691387176514,"z":"d8d4f820.a9f2c8","wires":[["c9b40208.98c5d"]]},{"id":"edc7aa54.3cbeb8","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n","comments":"","outputs":1,"x":310.0002212524414,"y":7281.692536711693,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"2df806f.57624fa","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":3080.6665954589844,"y":4244.024391174316,"z":"d8d4f820.a9f2c8","wires":[["4474c5a2.e2d63c"]]},{"id":"4474c5a2.e2d63c","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3234.6665954589844,"y":4242.024391174316,"z":"d8d4f820.a9f2c8","wires":[["c065c0ff.39df","5388fe9.54752","c5e8ece7.2adc2"]]},{"id":"c065c0ff.39df","type":"set","name":"set found-related-network to true","xml":"<set>\n<parameter name='found-related-network' value='true' />\n","comments":"","x":3466.6667556762695,"y":4201.690975189209,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"5388fe9.54752","type":"break","name":"break","xml":"<break>\n","comments":"","x":3389.999931335449,"y":4288.357725143433,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"1c2f4ba5.9fec74","type":"switchNode","name":"switch found-related-network","xml":"<switch test='`$found-related-network`'>\n","comments":"","outputs":1,"x":2252.666648864746,"y":4345.024528503418,"z":"d8d4f820.a9f2c8","wires":[["922c6102.4c462"]]},{"id":"922c6102.4c462","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":2446.666648864746,"y":4343.024528503418,"z":"d8d4f820.a9f2c8","wires":[["6435ac34.5e8394"]]},{"id":"fcd9beac.a26f7","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find related network '\n      + $db.vnf-related-network-role[$db-related-network-index].related-network-role + ' in vnf-networks'`\" />\n","comments":"","x":2724.666648864746,"y":4341.024528503418,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"6435ac34.5e8394","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2576.666648864746,"y":4343.024528503418,"z":"d8d4f820.a9f2c8","wires":[["fcd9beac.a26f7","a3718191.034c9"]]},{"id":"a3718191.034c9","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n","comments":"","outputs":1,"x":2669.333450317383,"y":4105.69141960144,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"2fa84a28.7086b6","type":"set","name":"set is-trunked and segmentation-id in vm-network","xml":"<set>\n<parameter name='$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].is-trunked'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].is-trunked`' />\n<parameter name='$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].segmentation-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].segmentation-id`' />\n","comments":"","x":2314.666648864746,"y":4393.024528503418,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"8c001003.badde","type":"switchNode","name":"switch rn-index","xml":"<switch test='`$rn-index`'>\n","comments":"","outputs":1,"x":2202.666648864746,"y":4501.024528503418,"z":"d8d4f820.a9f2c8","wires":[["532306e4.012e18"]]},{"id":"11f8b093.8cc66f","type":"set","name":"set rn-index to related network length","xml":"<set>\n<parameter name='rn-index' value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network_length`' />\n","comments":"","x":2274.666648864746,"y":4445.024528503418,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"532306e4.012e18","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":2366.666648864746,"y":4501.024528503418,"z":"d8d4f820.a9f2c8","wires":[["bc3136f9.00a898"]]},{"id":"bc3136f9.00a898","type":"set","name":"set rn-index to 0","xml":"<set>\n<parameter name='rn-index' value='0' />\n","comments":"","x":2526.666648864746,"y":4501.024528503418,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"7bd8f9ca.1b7e48","type":"set","name":"set related-network data","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].network-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].network-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].network-role'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].network-role`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].vlan-tags.vlan-interface'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].vlan-tags.vlan-interface`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].vlan-tags.lower-tag-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].vlan-tags.lower-tag-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].vlan-tags.upper-tag-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].vlan-tags.upper-tag-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].vlan-tags.is-private'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].vlan-tags.is-private`' />\n","comments":"","x":2226.666648864746,"y":4553.024528503418,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"16c4f557.6fba4b","type":"set","name":"set new related network length","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network_length'\n  value='`$rn-index + 1`' />\n","comments":"","x":2244.666648864746,"y":4605.024528503418,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"a693b9e7.f21078","type":"switchNode","name":"switch found-related-network","xml":"<switch test='`$found-related-network`'>\n","comments":"","outputs":1,"x":2641.666702270508,"y":4293.691175460815,"z":"d8d4f820.a9f2c8","wires":[["c7e76177.8ad2f"]]},{"id":"c7e76177.8ad2f","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2838.333564758301,"y":4293.691547393799,"z":"d8d4f820.a9f2c8","wires":[["fcba093c.17f4b8"]]},{"id":"fcba093c.17f4b8","type":"break","name":"break","xml":"<break>\n","comments":"","x":2968.333450317383,"y":4292.024671554565,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"c5e8ece7.2adc2","type":"set","name":"save indexes","xml":"<set>\n<parameter name='saved-vnf-network-index' value='`$vnf-network-index`' />\n<parameter name='saved-related-network-index' value='`$related-network-index`' />\n","comments":"","x":3408.3336639404297,"y":4243.69154548645,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"e6e55ed7.b5ae4","type":"execute","name":"generate cp-instance-id","xml":"<execute plugin=\"org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils\" method=\"generateUUID\" >\n<parameter name=\"ctx-destination\" value=\"cp-instance-id\" />\n","comments":"","outputs":1,"x":1697.2381553649902,"y":5273.215598583221,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"32089266.b79fae","type":"save","name":"save cp to A&AI","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"cp\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\" >\n<parameter name=\"cp-instance-id\" value=\"`$cp-instance-id`\" />\n<parameter name=\"port-id\" value=\"0\" />\n","comments":"","outputs":1,"x":1678.9047775268555,"y":5339.88210439682,"z":"d8d4f820.a9f2c8","wires":[["8d5f6283.2d9e3","4e1799ad.0a69a8"]]},{"id":"8d5f6283.2d9e3","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1867.9047584533691,"y":5315.548717916012,"z":"d8d4f820.a9f2c8","wires":[["83d7b171.24c35"]]},{"id":"83d7b171.24c35","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2035.0715065002441,"y":5331.343151509762,"z":"d8d4f820.a9f2c8","wires":[["bfa3a410.97da58","cc4e9fe7.acb19"]]},{"id":"4e1799ad.0a69a8","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1872.9047584533691,"y":5365.214977681637,"z":"d8d4f820.a9f2c8","wires":[["83d7b171.24c35"]]},{"id":"bfa3a410.97da58","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error creating cp object in AAI\" />\n","comments":"","x":2200.571517944336,"y":5343.215356349945,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"b322cbb.d612438","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1473.7144775390625,"y":5542.500392436981,"z":"d8d4f820.a9f2c8","wires":[["7267c3a9.be41ec","111a216a.3e270f","e6e55ed7.b5ae4","32089266.b79fae","18f29b15.840555","fe4629aa.b32578"]]},{"id":"7267c3a9.be41ec","type":"set","name":"set connection point data","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].connection-point.connection-point-id'\n  value='`$cp-instance-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].connection-point.port-id'\n  value='0' />\n","comments":"","x":1709.2383193969727,"y":5417.739674091339,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"26f373a1.24158c","type":"comment","name":"Floating IPs","info":"","comments":"","x":1270.0001373291016,"y":6400.02479237318,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"18f29b15.840555","type":"for","name":"for each vnf-network","xml":"<for index='vnf-network-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length`' >\n","comments":"","outputs":1,"x":1693.3333206176758,"y":5814.025167942047,"z":"d8d4f820.a9f2c8","wires":[["3da1819b.3af66e"]]},{"id":"5cee5b98.556834","type":"save","name":"save cp relationship to l3-network","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"cp:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n     AND cp.cp-instance-id = $cp-instance-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-id`\" />\n","comments":"","outputs":1,"x":2331.6668014526367,"y":5813.691675662994,"z":"d8d4f820.a9f2c8","wires":[["da45193d.fc1f68","b38b3f6b.3e336"]]},{"id":"b0de669e.139cc8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2703.499839782715,"y":5787.009624004364,"z":"d8d4f820.a9f2c8","wires":[["c0093cc.df096c","f1d875ae.90d2a8"]]},{"id":"eb99894b.5827e8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2703.49991607666,"y":5840.009382724762,"z":"d8d4f820.a9f2c8","wires":[["c0093cc.df096c","19f8f83c.c99788"]]},{"id":"da45193d.fc1f68","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2546.6667251586914,"y":5787.025293827057,"z":"d8d4f820.a9f2c8","wires":[["b0de669e.139cc8"]]},{"id":"b38b3f6b.3e336","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2555.2382583618164,"y":5839.644438266754,"z":"d8d4f820.a9f2c8","wires":[["eb99894b.5827e8"]]},{"id":"f1d875ae.90d2a8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating cp relationship to l3-network in AAI\" />\n","comments":"","x":2875.666648864746,"y":5809.691999912261,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"19f8f83c.c99788","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating cp relationship to l3-network\" />\n","comments":"","x":2870.8335571289062,"y":5861.343206882476,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"c0093cc.df096c","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n","comments":"","outputs":1,"x":3077.33341217041,"y":5759.691998004913,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"fe4629aa.b32578","type":"for","name":"for each vm-network","xml":"<for silentFailure='true' index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network_length`' >\n","comments":"","outputs":1,"x":1693.3334732055664,"y":5974.691523075104,"z":"d8d4f820.a9f2c8","wires":[["b89a6d2f.66e45"]]},{"id":"1905de4.1a18e22","type":"save","name":"save cp relationship to l3-network and vlan-tag","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"cp:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n     AND cp.cp-instance-id = $cp-instance-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$related-network-index].network-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"vlan-tag\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/vlan-tags/vlan-tag/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$related-network-index].vlan-tags.vlan-interface`\" />\n","comments":"","outputs":1,"x":2613.0004806518555,"y":5972.691518306732,"z":"d8d4f820.a9f2c8","wires":[["fb32e241.c8b6","e12d3175.6b5ad"]]},{"id":"96953cd3.edfa","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3019.833526611328,"y":5946.008817195893,"z":"d8d4f820.a9f2c8","wires":[["aae15a88.6077c8","c0093cc.df096c"]]},{"id":"6ffebc31.515dc4","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3019.8336029052734,"y":5999.008575916291,"z":"d8d4f820.a9f2c8","wires":[["e515a829.8f9268","c0093cc.df096c"]]},{"id":"fb32e241.c8b6","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2863.0004119873047,"y":5946.024487018586,"z":"d8d4f820.a9f2c8","wires":[["96953cd3.edfa"]]},{"id":"e12d3175.6b5ad","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2871.5719451904297,"y":5998.643631458283,"z":"d8d4f820.a9f2c8","wires":[["6ffebc31.515dc4"]]},{"id":"aae15a88.6077c8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating cp relationship to l3-network and vlan-tag in AAI\" />\n","comments":"","x":3192.0003356933594,"y":5968.69119310379,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"e515a829.8f9268","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating cp relationship to l3-network and vlan-tag\" />\n","comments":"","x":3187.1672439575195,"y":6020.342400074005,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"2f07f188.8c7d4e","type":"for","name":"for each related-network","xml":"<for silentFailure='true' index='related-network-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network_length`' >\n","comments":"","outputs":1,"x":2309.000312805176,"y":5972.6915192604065,"z":"d8d4f820.a9f2c8","wires":[["1905de4.1a18e22"]]},{"id":"9f27a4a4.73d8e8","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-generate-heat-parameters","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-generate-heat-parameters' mode='sync' >\n","comments":"","outputs":1,"x":575.6668815612793,"y":7190.69133657217,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"d34b40c0.acb5e","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vfmoduleheat.log' />\n","comments":"","outputs":1,"x":397.0002098083496,"y":7238.691439568996,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"6f8af175.c5f4d","type":"switchNode","name":"switch input vf-module-name","xml":"<switch test='`$vf-module-topology-operation-input.vf-module-request-input.vf-module-name`'>\n","comments":"","outputs":1,"x":540.0000381469727,"y":2699.5243406295776,"z":"d8d4f820.a9f2c8","wires":[["f56ba749.bae958","8c829c08.69ae3"]]},{"id":"f56ba749.bae958","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":740.0000305175781,"y":2677.0242433547974,"z":"d8d4f820.a9f2c8","wires":[["ac08e510.b09af8"]]},{"id":"8c829c08.69ae3","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":741.4286422729492,"y":2727.1434659957886,"z":"d8d4f820.a9f2c8","wires":[["a309d0d6.bf143"]]},{"id":"120d110b.fa0a4f","type":"for","name":"for each vnfc-subnet-role","xml":"<for index='subnet-role-index' start='0'\n  end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet_length`' >\n","comments":"","outputs":1,"x":1297.5001373291016,"y":3494.5240173339844,"z":"d8d4f820.a9f2c8","wires":[["e457493c.ba4918"]]},{"id":"e457493c.ba4918","type":"for","name":"for each vnfc-address-family","xml":"<for index='address-family-index' start='0'\n  end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments_length`' >\n","comments":"","outputs":1,"x":1545.833396911621,"y":3494.5240173339844,"z":"d8d4f820.a9f2c8","wires":[["e51c0a0f.a8dec8"]]},{"id":"9303fc78.a6fc8","type":"for","name":"for each vm-type","xml":"<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n","comments":"","outputs":1,"x":503.33331298828125,"y":3212.8573541641235,"z":"d8d4f820.a9f2c8","wires":[["a28abbd9.f89e88"]]},{"id":"a28abbd9.f89e88","type":"for","name":"for each vnfc","xml":"<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n","comments":"","outputs":1,"x":685.0000915527344,"y":3211.5245027542114,"z":"d8d4f820.a9f2c8","wires":[["79c72ab2.cf0944"]]},{"id":"79c72ab2.cf0944","type":"for","name":"for each vnfc-network","xml":"<for silentFailure='true' index='vnfc-network-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data_length`' >\n","comments":"","outputs":1,"x":886.1666641235352,"y":3211.3571920394897,"z":"d8d4f820.a9f2c8","wires":[["102dab74.439d65"]]},{"id":"102dab74.439d65","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1098.3333358764648,"y":3210.3575525283813,"z":"d8d4f820.a9f2c8","wires":[["25f01b18.783cf4","fd79e5d2.d96098","357417ef.8538d8","120d110b.fa0a4f"]]},{"id":"25f01b18.783cf4","type":"set","name":"set vnf-network-index to -1","xml":"<set>\n<parameter name='vnf-network-index' value='-1' />\n","comments":"","x":1310.0000534057617,"y":3163.6907663345337,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"fd79e5d2.d96098","type":"for","name":"for each vnf-network","xml":"<for index='idx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length`' >\n","comments":"","outputs":1,"x":1291.6668434143066,"y":3210.357518196106,"z":"d8d4f820.a9f2c8","wires":[["2f303352.1dbeac"]]},{"id":"2f303352.1dbeac","type":"switchNode","name":"switch network-roles match?","xml":"<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-network-role\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$idx].network-role`'>\n","comments":"","outputs":1,"x":1533.3333129882812,"y":3208.6910133361816,"z":"d8d4f820.a9f2c8","wires":[["a7d1950d.e6a2c8"]]},{"id":"a7d1950d.e6a2c8","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1729.9999923706055,"y":3208.6909322738647,"z":"d8d4f820.a9f2c8","wires":[["c7ac8729.b50ed8"]]},{"id":"c7ac8729.b50ed8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1883.3332138061523,"y":3208.6908044815063,"z":"d8d4f820.a9f2c8","wires":[["3393e227.07efde","a113a692.b930a8","32275117.4ec7be"]]},{"id":"3393e227.07efde","type":"set","name":"set vnf-network-index","xml":"<set>\n<parameter name='vnf-network-index' value='`$idx`' />\n","comments":"","x":2090.000045776367,"y":3157.024182319641,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"a113a692.b930a8","type":"break","name":"break","xml":"<break>\n","comments":"","x":2044.9999618530273,"y":3247.024103164673,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"357417ef.8538d8","type":"switchNode","name":"switch vnf-network-index","xml":"<switch test='`$vnf-network-index`'>\n","comments":"","outputs":1,"x":1303.333381652832,"y":3270.3575201034546,"z":"d8d4f820.a9f2c8","wires":[["604d8586.092f6c"]]},{"id":"604d8586.092f6c","type":"outcome","name":"-1","xml":"<outcome value='-1'>\n","comments":"","outputs":1,"x":1495.0000228881836,"y":3270.3577642440796,"z":"d8d4f820.a9f2c8","wires":[["bd4d08d5.868f78"]]},{"id":"bd4d08d5.868f78","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1643.3332138061523,"y":3268.6908044815063,"z":"d8d4f820.a9f2c8","wires":[["98d80282.126d4","a9f7de8.688ca2"]]},{"id":"98d80282.126d4","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n","comments":"","outputs":1,"x":2661.666679382324,"y":3090.3574323654175,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"a9f7de8.688ca2","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VNFC network role '\n      + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-network-role\n      + ' is not found in VNF network list'\n      `\" />\n\n\n\n","comments":"","x":1811.6665878295898,"y":3287.0240564346313,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"80d777f7.c5d5e8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2334.999931335449,"y":3678.690655708313,"z":"d8d4f820.a9f2c8","wires":[["becbc572.fd1618","9c50301d.6f785","b268b257.f4937"]]},{"id":"becbc572.fd1618","type":"for","name":"for each subnet-data","xml":"<for index='subnet-data-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data_length`' >\n","comments":"","outputs":1,"x":2531.6666831970215,"y":3633.690574645996,"z":"d8d4f820.a9f2c8","wires":[["7dca4077.77c37"]]},{"id":"7dca4077.77c37","type":"switchNode","name":"address-families match?","xml":"<switch test='`$tmp.address-family\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].ip-version`'>\n","comments":"","outputs":1,"x":2758.333309173584,"y":3633.690574645996,"z":"d8d4f820.a9f2c8","wires":[["a9dae646.6ff1c8"]]},{"id":"a9dae646.6ff1c8","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2938.3332748413086,"y":3633.690980911255,"z":"d8d4f820.a9f2c8","wires":[["67a74b25.307554"]]},{"id":"83d1beed.92423","type":"set","name":"set tmp.address-family","xml":"<set>\n<parameter name='tmp.address-family'\n  value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-address-family`' />\n","comments":"","x":2363.333267211914,"y":3497.0240688323975,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"e51c0a0f.a8dec8","type":"switchNode","name":"switch vnfc-subnet-ip_length","xml":"<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip_length`'>\n","comments":"","outputs":1,"x":1808.333610534668,"y":3493.6911039352417,"z":"d8d4f820.a9f2c8","wires":[["8d18701d.ef01f","85fa3042.9cda2"]]},{"id":"8d18701d.ef01f","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":2010.0000648498535,"y":3430.357300758362,"z":"d8d4f820.a9f2c8","wires":[["d19662af.6bac4"]]},{"id":"85fa3042.9cda2","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":2006.4288368225098,"y":3559.6430683135986,"z":"d8d4f820.a9f2c8","wires":[["1961795f.dc2bd7"]]},{"id":"d19662af.6bac4","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2141.6666717529297,"y":3429.6907777786255,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"b6f1045b.d072f8","type":"set","name":"set subnet-id to -1","xml":"<set>\n<parameter name='subnet-id' value='-1' />\n","comments":"","x":3031.667190551758,"y":3795.358060836792,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"1961795f.dc2bd7","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2160.0002517700195,"y":3558.690700531006,"z":"d8d4f820.a9f2c8","wires":[["83d1beed.92423","80d777f7.c5d5e8"]]},{"id":"9bdb2ded.f7444","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":4294.9996910095215,"y":3900.3579082489014,"z":"d8d4f820.a9f2c8","wires":[["60938fd6.1bcf4","e3ae893d.c0ba88"]]},{"id":"e3ae893d.c0ba88","type":"execute","name":"execute isInSameSubnet","xml":"<execute plugin=\"com.att.sdnctl.sli.plugin.ipAddressTools.IpAddressTool\" method=\"isInSameSubnet\">\n\t<parameter name=\"firstIPAddr\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].network-start-address`\" />\n\t<parameter name=\"secondIPAddr\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[0].vnfc-ip-address`\" />\n\t<parameter name=\"subnet\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].cidr-mask`\" />\n\t<parameter name=\"ipType\" value=\"`$ip-type`\" />\n","comments":"","outputs":1,"x":4503.333068847656,"y":3950.3577308654785,"z":"d8d4f820.a9f2c8","wires":[["233b597c.ea9566"]]},{"id":"60938fd6.1bcf4","type":"switchNode","name":"switch tmp.address-family","xml":"<switch test='`$tmp.address-family`'>\n","comments":"","outputs":1,"x":4505.000225067139,"y":3857.0247173309326,"z":"d8d4f820.a9f2c8","wires":[["f28d04ae.9f28d8","cad7129f.7e9d9"]]},{"id":"f28d04ae.9f28d8","type":"outcome","name":"ipv4","xml":"<outcome value='ipv4'>\n","comments":"","outputs":1,"x":4708.333487192789,"y":3830.3579476674395,"z":"d8d4f820.a9f2c8","wires":[["215c7a9d.8d6196"]]},{"id":"cad7129f.7e9d9","type":"outcome","name":"ipv6","xml":"<outcome value='ipv6'>\n","comments":"","outputs":1,"x":4708.333160400391,"y":3877.0244750976562,"z":"d8d4f820.a9f2c8","wires":[["1e185b8b.261eb4"]]},{"id":"215c7a9d.8d6196","type":"set","name":"set ip-type parameter to IPv4","xml":"<set>\n<parameter name='ip-type' value='IPv4' />\n","comments":"","x":4904.999973297119,"y":3828.691421508789,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"1e185b8b.261eb4","type":"set","name":"set ip-type parameter to IPv6","xml":"<set>\n<parameter name='ip-type' value='IPv6' />\n","comments":"","x":4909.999851226807,"y":3877.0244941711426,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"acdf1369.a6424","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":4843.333099365234,"y":3950.0244941711426,"z":"d8d4f820.a9f2c8","wires":[["cc87bcba.11e08","8627223.9c8ede"]]},{"id":"cc87bcba.11e08","type":"set","name":"set subnet-id","xml":"<set>\n<parameter name='subnet-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].sdnc-subnet-id`' />\n","comments":"","x":5021.66641998291,"y":3926.690980911255,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"8627223.9c8ede","type":"break","name":"break","xml":"<break>\n","comments":"","x":5006.666423797607,"y":3973.3579750061035,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"ee077a58.fea5e8","type":"switchNode","name":"switch subnet-id","xml":"<switch test='`$subnet-id`'>\n","comments":"","outputs":1,"x":3023.333065032959,"y":3957.0247955322266,"z":"d8d4f820.a9f2c8","wires":[["f44c2217.3d1b6"]]},{"id":"f44c2217.3d1b6","type":"outcome","name":"-1","xml":"<outcome value='-1'>\n","comments":"","outputs":1,"x":3179.9996299743652,"y":3957.024730682373,"z":"d8d4f820.a9f2c8","wires":[["feef8801.085708"]]},{"id":"feef8801.085708","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3328.332820892334,"y":3955.3577709198,"z":"d8d4f820.a9f2c8","wires":[["7ccf81b.d4ee28","98d80282.126d4"]]},{"id":"7ccf81b.d4ee28","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Not able to find VNF network subnet that contains address '\n      + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[0].vnfc-ip-address\n      `\" />\n\n\n\n","comments":"","x":3496.6661529541016,"y":3972.0242462158203,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"4528dd6c.a9d804","type":"set","name":"set subnet-id in vnfc-ip-assignments (temp variable)","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].subnet-id' value='`$subnet-id`' />\n","comments":"","x":3134.999710083008,"y":4033.691566467285,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"a4ec6528.997b68","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vfmodulec.log' />\n","comments":"","outputs":1,"x":488.3333053588867,"y":3628.6908044815063,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"233b597c.ea9566","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":4689.999671936035,"y":3950.3582191467285,"z":"d8d4f820.a9f2c8","wires":[["acdf1369.a6424"]]},{"id":"32275117.4ec7be","type":"set","name":"set network-id","xml":"<set>\n<parameter name='$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].network-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$idx].network-id`' />\n","comments":"","x":2066.666549682617,"y":3202.0242652893066,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"697f82c4.6623dc","type":"switchNode","name":"switch nfc-naming-code","xml":"<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-naming-code`'>\n","comments":"","outputs":1,"x":1265.000015258789,"y":4817.023993015289,"z":"d8d4f820.a9f2c8","wires":[["50205425.9c35fc","9c93cb86.d34418"]]},{"id":"50205425.9c35fc","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":1449.9999618530273,"y":4792.023811817169,"z":"d8d4f820.a9f2c8","wires":[["ac2674b6.932cd8"]]},{"id":"9c93cb86.d34418","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1448.0952339172363,"y":4838.809639453888,"z":"d8d4f820.a9f2c8","wires":[["8143de63.51dcb"]]},{"id":"ac2674b6.932cd8","type":"set","name":"set tmp.nfc-naming-code to DEFAULT","xml":"<set>\n<parameter name='tmp.nfc-naming-code' value='DEFAULT' />\n","comments":"","x":1681.666732788086,"y":4790.357161998749,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"8143de63.51dcb","type":"set","name":"set tmp.nfc-naming-code","xml":"<set>\n<parameter name='tmp.nfc-naming-code' value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-naming-code`' />\n","comments":"","x":1638.3332443237305,"y":4838.690659999847,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"670d28d3.fa52d8","type":"switchNode","name":"switch nfc-function","xml":"<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-function`'>\n","comments":"","outputs":1,"x":1253.3333473205566,"y":4915.35716676712,"z":"d8d4f820.a9f2c8","wires":[["e92a0ff5.8a6ea","e967e0c7.141ea"]]},{"id":"e92a0ff5.8a6ea","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":1449.9999542236328,"y":4890.356964588165,"z":"d8d4f820.a9f2c8","wires":[["76a914e8.973cac"]]},{"id":"e967e0c7.141ea","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1448.0952262878418,"y":4937.142792224884,"z":"d8d4f820.a9f2c8","wires":[["3373fcba.aac3f4"]]},{"id":"76a914e8.973cac","type":"set","name":"set tmp.nfc-function to DEFAULT","xml":"<set>\n<parameter name='tmp.nfc-function' value='DEFAULT' />\n","comments":"","x":1661.6667366027832,"y":4888.690173625946,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"3373fcba.aac3f4","type":"set","name":"set tmp.nfc-function","xml":"<set>\n<parameter name='tmp.nfc-function' value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-function`' />\n","comments":"","x":1619.9998664855957,"y":4937.023834705353,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"6be404e7.1c59fc","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n","comments":"","outputs":1,"x":2893.333335876465,"y":2572.0243005752563,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"af8fa6f8.47b568","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2799.999839782715,"y":2647.0243005752563,"z":"d8d4f820.a9f2c8","wires":[["92d86032.bda92","6be404e7.1c59fc"]]},{"id":"616c54.9bd543ac","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2004.9998931884766,"y":2707.024164199829,"z":"d8d4f820.a9f2c8","wires":[["5ed414bf.bfc72c","6be404e7.1c59fc"]]},{"id":"4fbb0a7.af041f4","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2266.666757583618,"y":2762.0243310928345,"z":"d8d4f820.a9f2c8","wires":[["30dea8b5.f55b68","6be404e7.1c59fc"]]},{"id":"3da1819b.3af66e","type":"switchNode","name":"switch network-roles match?","xml":"<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-network-role\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-role`'>\n","comments":"","outputs":1,"x":1926.6666641235352,"y":5814.02419424057,"z":"d8d4f820.a9f2c8","wires":[["5bc60ac9.3bed64"]]},{"id":"5bc60ac9.3bed64","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2125.0001335144043,"y":5813.691349506378,"z":"d8d4f820.a9f2c8","wires":[["5cee5b98.556834"]]},{"id":"b89a6d2f.66e45","type":"switchNode","name":"switch network-roles match?","xml":"<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-role\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-role`'>\n","comments":"","outputs":1,"x":1930.0000076293945,"y":5973.690641880035,"z":"d8d4f820.a9f2c8","wires":[["c0561744.9d4c18"]]},{"id":"c0561744.9d4c18","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2128.3334770202637,"y":5973.3577971458435,"z":"d8d4f820.a9f2c8","wires":[["2f07f188.8c7d4e"]]},{"id":"d1002173.07ce9","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1833.3332901000977,"y":6552.02406167984,"z":"d8d4f820.a9f2c8","wires":[["4095636f.001c2c","2a7c471e.bfa718"]]},{"id":"811c48e4.7c4c98","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1835.0000381469727,"y":6867.024073123932,"z":"d8d4f820.a9f2c8","wires":[["194d678b.fc6828","6da03288.1d267c"]]},{"id":"2a7c471e.bfa718","type":"for","name":"for each vnfc-network-role","xml":"<for silentFailure='true' index='vnfc-network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data_length`' >\n","comments":"","outputs":1,"x":2050.0002365112305,"y":6610.357232570648,"z":"d8d4f820.a9f2c8","wires":[["90020433.313fe8"]]},{"id":"236d80f2.7fce8","type":"save","name":"save vip-ipv4-address-list relationship to cp","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vip-ipv4-address-list:relationship-list\"\n   key=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv4-address-list.vip-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4[$ipv4-index]\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"cp\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/vnfcs/vnfc/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n        + '/cps/cp/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-role-index].connection-point.connection-point-id`\" />\n","comments":"","outputs":1,"x":2725.000160217285,"y":6610.357071399689,"z":"d8d4f820.a9f2c8","wires":[["2b368c9a.bff5e4","df56f320.6250b"]]},{"id":"929f1b52.c94ab8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vip-ipv4-address-list relationship to cp in AAI\" />\n","comments":"","x":3283.333381652832,"y":6603.690479755402,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"b4cc6a73.7bdd38","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vip-ipv4-address-list relationship to cp\" />\n","comments":"","x":3283.5003509521484,"y":6653.674653470516,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"d88b156d.70a7e8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3116.833251953125,"y":6583.674852848053,"z":"d8d4f820.a9f2c8","wires":[["929f1b52.c94ab8","e9d5c469.8db3b8"]]},{"id":"d86a958b.b40418","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3116.8333282470703,"y":6636.674611568451,"z":"d8d4f820.a9f2c8","wires":[["b4cc6a73.7bdd38","e9d5c469.8db3b8"]]},{"id":"2b368c9a.bff5e4","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2960.0001373291016,"y":6583.690522670746,"z":"d8d4f820.a9f2c8","wires":[["d88b156d.70a7e8"]]},{"id":"df56f320.6250b","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2968.5716705322266,"y":6636.309667110443,"z":"d8d4f820.a9f2c8","wires":[["d86a958b.b40418"]]},{"id":"6da03288.1d267c","type":"for","name":"for each vnfc-network-role","xml":"<for silentFailure='true' index='vnfc-network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data_length`' >\n","comments":"","outputs":1,"x":2051.666633605957,"y":6933.690641880035,"z":"d8d4f820.a9f2c8","wires":[["62b7e066.b4ffd"]]},{"id":"c59bd197.91ca9","type":"save","name":"save vip-ipv6-address-list relationship to cp","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vip-ipv6-address-list:relationship-list\"\n   key=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv6-address-list.vip-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6[$ipv6-index]\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"cp\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/vnfcs/vnfc/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n        + '/cps/cp/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-role-index].connection-point.connection-point-id`\" />\n","comments":"","outputs":1,"x":2721.66658782959,"y":6932.023424625397,"z":"d8d4f820.a9f2c8","wires":[["401fd4be.c3123c","d3e470fe.e4267"]]},{"id":"3dfc3a55.f9e596","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vip-ipv4-address-list relationship to cp in AAI\" />\n","comments":"","x":3279.9998092651367,"y":6925.35683298111,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"78886e01.aaaca","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vip-ipv4-address-list relationship to cp\" />\n","comments":"","x":3280.166778564453,"y":6975.341006696224,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"8e1717a2.182698","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3113.4996795654297,"y":6905.341206073761,"z":"d8d4f820.a9f2c8","wires":[["3dfc3a55.f9e596"]]},{"id":"ed27346f.add1b8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3113.499755859375,"y":6958.340964794159,"z":"d8d4f820.a9f2c8","wires":[["78886e01.aaaca"]]},{"id":"401fd4be.c3123c","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2956.6665649414062,"y":6905.356875896454,"z":"d8d4f820.a9f2c8","wires":[["8e1717a2.182698"]]},{"id":"d3e470fe.e4267","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2965.2380981445312,"y":6957.976020336151,"z":"d8d4f820.a9f2c8","wires":[["ed27346f.add1b8"]]},{"id":"90020433.313fe8","type":"switchNode","name":"switch network-roles match?","xml":"<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-role\n  == $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-role-index].vnfc-network-role`'>\n","comments":"","outputs":1,"x":2303.3333053588867,"y":6610.356909275055,"z":"d8d4f820.a9f2c8","wires":[["bbcc7c00.67b05"]]},{"id":"bbcc7c00.67b05","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2490.0001487731934,"y":6610.357396602631,"z":"d8d4f820.a9f2c8","wires":[["236d80f2.7fce8"]]},{"id":"62b7e066.b4ffd","type":"switchNode","name":"switch network-roles match?","xml":"<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-role\n  == $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-role-index].vnfc-network-role`'>\n","comments":"","outputs":1,"x":2299.999885559082,"y":6932.023649692535,"z":"d8d4f820.a9f2c8","wires":[["61433e8e.05e5f"]]},{"id":"61433e8e.05e5f","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2486.6667289733887,"y":6932.024137020111,"z":"d8d4f820.a9f2c8","wires":[["c59bd197.91ca9"]]},{"id":"1850ab54.f65915","type":"switchNode","name":"switch: param[].name","xml":"<switch test=\"`$vf-module-topology-operation-input.vf-module-request-input.vf-module-input-parameters.param[$p].name`\">\n","comments":"","outputs":1,"x":1092.6785888671875,"y":928.000036239624,"z":"d8d4f820.a9f2c8","wires":[["867b00d4.84d36","a23fb886.63cae8"]]},{"id":"3b005b00.a35596","type":"for","name":"for p in vf-module-input-parameters.param[]","xml":"<for silentFailure='true' index='p' start='0' end='`$vf-module-topology-operation-input.vf-module-request-input.vf-module-input-parameters.param_length`' >\n","comments":"","outputs":1,"x":798.7857360839844,"y":928.5000686645508,"z":"d8d4f820.a9f2c8","wires":[["1850ab54.f65915"]]},{"id":"994e44eb.cda288","type":"set","name":"set tmp.exist.vf_module_label = true","xml":"<set>\n<parameter name='tmp.exist.vf_module_label' value='true' />","comments":"","x":1634.571517944336,"y":976.8572063446045,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"949cc974.cc8408","type":"set","name":"set tmp.exist.sdnc-model-name = true","xml":"<set>\n<parameter name='tmp.exist.sdnc-model-name' value='true' />\n","comments":"","x":1637.2856254577637,"y":927.8572216033936,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"80a19b00.38d098","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":478.0952606201172,"y":822.809549331665,"z":"d8d4f820.a9f2c8","wires":[["3b005b00.a35596","cb18195c.6f2d48","95817df.ca9598","18b4c78a.d2faa8"]]},{"id":"8f2630b2.5922a","type":"comment","name":"SELF-SERVE FORK","info":"","comments":"","x":376.3809509277344,"y":775.6190795898438,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"867b00d4.84d36","type":"outcome","name":"sdnc_model_name","xml":"<outcome value='sdnc_model_name'>\n","comments":"","outputs":1,"x":1348.8571646554128,"y":927.9048306601387,"z":"d8d4f820.a9f2c8","wires":[["949cc974.cc8408"]]},{"id":"a23fb886.63cae8","type":"outcome","name":"vf_module_label","xml":"<outcome value='vf_module_label'>\n","comments":"","outputs":1,"x":1351.7142868041992,"y":977.333402633667,"z":"d8d4f820.a9f2c8","wires":[["994e44eb.cda288"]]},{"id":"409dae26.2ed94","type":"get-resource","name":"get VF_MODEL.sdnc_model_name","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT sdnc_model_name from VF_MODEL \n  \tWHERE customization_uuid = $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-information.onap-model-information.model-customization-uuid \n  \tAND sdnc_model_name is not null'\n  pfx='db.vf-model-name'>\n\n","comments":"","outputs":1,"x":1497.8096466064453,"y":1401.975938796997,"z":"d8d4f820.a9f2c8","wires":[["d6d5d88b.eabb68","a4981e1e.9320f","2010a869.ad46e8"]]},{"id":"d6d5d88b.eabb68","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1748.1667709350586,"y":1312.356879234314,"z":"d8d4f820.a9f2c8","wires":[["dacb6066.5e513"]]},{"id":"a4981e1e.9320f","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1753.8810195922852,"y":1499.4997911453247,"z":"d8d4f820.a9f2c8","wires":[["42d9f159.049be"]]},{"id":"dacb6066.5e513","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VF_MODEL table\" />\n","comments":"","x":1929.1667518615723,"y":1312.4997863769531,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"959b16c5.cfdd28","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":1249.6550369262695,"y":1402.1662158966064,"z":"d8d4f820.a9f2c8","wires":[["409dae26.2ed94"]]},{"id":"6869510a.76d46","type":"call","name":"call self-serve-vf-module-assign","xml":"<call module='GENERIC-RESOURCE-API' rpc='self-serve-vf-module-assign' mode='sync' >\n","comments":"","outputs":1,"x":2570.844772338867,"y":1041.9643993377686,"z":"d8d4f820.a9f2c8","wires":[["5a051c2e.c847a4"]]},{"id":"b17d915c.29f83","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Failed to create self-serve assignment for vf-module with vf-module-id=' + $vf-module-topology-operation-input.vf-module-information.vf-module-id`\" />\n","comments":"","x":2954.9161491394043,"y":1041.964349746704,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"18b4c78a.d2faa8","type":"switchNode","name":"switch: tmp.exist.sdnc-model-name && tmp.exist.vf_module_label == true","xml":"<switch test=\"`$tmp.exist.sdnc-model-name == 'true' and $tmp.exist.vf_module_label == 'true'`\">\n","comments":"","outputs":1,"x":887.1546936035156,"y":1115.5712890625,"z":"d8d4f820.a9f2c8","wires":[["959b16c5.cfdd28","59f967f4.589b18"]]},{"id":"59f967f4.589b18","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1253.7621002197266,"y":1042.9283809661865,"z":"d8d4f820.a9f2c8","wires":[["8f945edb.cca72"]]},{"id":"5a051c2e.c847a4","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2791.1423530578613,"y":1041.4524307250977,"z":"d8d4f820.a9f2c8","wires":[["b17d915c.29f83"]]},{"id":"d7a65b96.fc6f88","type":"get-resource","name":"get VF_MODULE_MODEL.vf-module-label","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT vf_module_label from VF_MODULE_MODEL \n  \tWHERE vf_customization_uuid = $vf-module-topology-operation-input.vnf-information.onap-model-information.model-customization-uuid\n  \tAND vf_module_label is not null '\n  pfx='db.vf-module-label'>\n\n","comments":"","outputs":1,"x":2026.0478134155273,"y":1402.214199066162,"z":"d8d4f820.a9f2c8","wires":[["e25f08a7.9318c8","7872d8b0.c039a8","3377bd66.e95b22"]]},{"id":"e25f08a7.9318c8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2301.4050369262695,"y":1402.3093299865723,"z":"d8d4f820.a9f2c8","wires":[["e24e689c.636158"]]},{"id":"7872d8b0.c039a8","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2311.9763946533203,"y":1450.0235958099365,"z":"d8d4f820.a9f2c8","wires":[["42d9f159.049be"]]},{"id":"e24e689c.636158","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VF_MODULE_MODEL table\" />\n","comments":"","x":2475.5475463867188,"y":1402.8807754516602,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"42d9f159.049be","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2485.3815994262695,"y":1499.0713062286377,"z":"d8d4f820.a9f2c8","wires":[["1775cfdf.a41f2"]]},{"id":"3377bd66.e95b22","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2305.762107849121,"y":1353.2142543792725,"z":"d8d4f820.a9f2c8","wires":[["8f945edb.cca72"]]},{"id":"2010a869.ad46e8","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1751.821533203125,"y":1401.9760036468506,"z":"d8d4f820.a9f2c8","wires":[["d7a65b96.fc6f88"]]},{"id":"cb18195c.6f2d48","type":"set","name":"initialize tmp.exist.sdnc-model-name && tmp.exist.vf_module_label = false","xml":"<set>\n<parameter name='tmp.exist.sdnc-model-name' value='false' />\n<parameter name='tmp.exist.vf_module_label' value='false' />\n","comments":"","x":890.6785659790039,"y":823.0832109451294,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"6060b17a.6d498","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n","comments":"","x":2517.7140159606934,"y":1191.8093185424805,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"77c14fbf.49c74","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/ss-vnfend.log' />\n","comments":"","outputs":1,"x":2509.761558532715,"y":1146.300862312317,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"78ad4b36.5258c4","type":"set","name":"set order-status to PendingCreate","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.order-status'\n  value='PendingCreate' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-rpc-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.request-action`' />\n","comments":"","x":2580.452075958252,"y":1095.2617568969727,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"8f945edb.cca72","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2291.547504425049,"y":1041.6425609588623,"z":"d8d4f820.a9f2c8","wires":[["6869510a.76d46","78ad4b36.5258c4","77c14fbf.49c74","6060b17a.6d498"]]},{"id":"95817df.ca9598","type":"switchNode","name":"switch: vf-module-input-parameters.param_length","xml":"<switch test=\"`$vf-module-topology-operation-input.vf-module-request-input.vf-module-input-parameters.param_length`\">\n","comments":"","outputs":1,"x":818.5357437133789,"y":871.559494972229,"z":"d8d4f820.a9f2c8","wires":[["9943f7c0.8dd638"]]},{"id":"9943f7c0.8dd638","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":1082.107162475586,"y":871.8452348709106,"z":"d8d4f820.a9f2c8","wires":[["94052809.3a5b08"]]},{"id":"94052809.3a5b08","type":"set","name":"set vf-module-input-parameters.param_length = 0","xml":"<set>\n<parameter name='vf-module-topology-operation-input.vf-module-request-input.vf-module-input-parameters.param_length' value='0' />\n","comments":"","x":1355.821403503418,"y":871.7023963928223,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"a63dbeeb.4bce7","type":"comment","name":"First, count the subnets for this address family","info":"","comments":"","x":2665.000442504883,"y":3543.333065032959,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"c2f9e6e2.faa158","type":"for","name":"for each subnet-data","xml":"<for index='subnet-data-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data_length`' >\n","comments":"","outputs":1,"x":3038.3331298828125,"y":3838.333568572998,"z":"d8d4f820.a9f2c8","wires":[["827ca18b.bd2b"]]},{"id":"827ca18b.bd2b","type":"switchNode","name":"address-families match?","xml":"<switch test='`$tmp.address-family\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].ip-version`'>\n","comments":"","outputs":1,"x":3264.999755859375,"y":3838.333568572998,"z":"d8d4f820.a9f2c8","wires":[["2e8f7728.5eef98"]]},{"id":"2e8f7728.5eef98","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":3444.9997215270996,"y":3838.333974838257,"z":"d8d4f820.a9f2c8","wires":[["cbe63cfa.b3c54"]]},{"id":"9c50301d.6f785","type":"set","name":"set af-count to 0","xml":"<set>\n<parameter name='af-count' value='0' />\n","comments":"","x":2520.000015258789,"y":3584.9998168945312,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"7f2ed8e2.f43358","type":"set","name":"increment af-count","xml":"<set>\n<parameter name='af-count' value='`$af-count + 1`' />\n","comments":"","x":3268.333381652832,"y":3651.666566848755,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"67a74b25.307554","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3084.999755859375,"y":3633.333251953125,"z":"d8d4f820.a9f2c8","wires":[["7f2ed8e2.f43358","359913e8.4a2d5c"]]},{"id":"359913e8.4a2d5c","type":"set","name":"set subnet-id","xml":"<set>\n<parameter name='subnet-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].sdnc-subnet-id`' />\n","comments":"","x":3249.999801635742,"y":3606.6665649414062,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"b268b257.f4937","type":"switchNode","name":"switch af-count","xml":"<switch test='`$af-count`'>\n","comments":"","outputs":1,"x":2510.0004272460938,"y":3821.6667337417603,"z":"d8d4f820.a9f2c8","wires":[["47f4cc28.12c994","67d8790a.7cb008"]]},{"id":"47f4cc28.12c994","type":"outcome","name":"1","xml":"<outcome value='1'>\n","comments":"","outputs":1,"x":2669.9999465942383,"y":3719.9999027252197,"z":"d8d4f820.a9f2c8","wires":[["676a6ca5.90afb4"]]},{"id":"676a6ca5.90afb4","type":"set","name":"set subnet-id in vnfc-ip-assignments (temp variable)","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].subnet-id'\n  value='`$subnet-id`' />\n","comments":"","x":2943.333251953125,"y":3718.333251953125,"z":"d8d4f820.a9f2c8","wires":[]},{"id":"67d8790a.7cb008","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":2669.9998626708984,"y":3921.6668224334717,"z":"d8d4f820.a9f2c8","wires":[["b86bec73.946bd"]]},{"id":"b86bec73.946bd","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2826.66650390625,"y":3921.66650390625,"z":"d8d4f820.a9f2c8","wires":[["b6f1045b.d072f8","c2f9e6e2.faa158","ee077a58.fea5e8","4528dd6c.a9d804"]]},{"id":"cbe63cfa.b3c54","type":"switchNode","name":"switch network-start-address","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].network-start-address`'>\n","comments":"","outputs":1,"x":3639.999900817871,"y":3836.6668186187744,"z":"d8d4f820.a9f2c8","wires":[["590d4d0f.430904","e49b4763.0e6e18"]]},{"id":"590d4d0f.430904","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":3836.666572570801,"y":3819.999988555908,"z":"d8d4f820.a9f2c8","wires":[["e0fe30f.45309d"]]},{"id":"e49b4763.0e6e18","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":3836.4285430908203,"y":3864.2857913970947,"z":"d8d4f820.a9f2c8","wires":[["bc070e16.b6321"]]},{"id":"e0fe30f.45309d","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":3964.999828338623,"y":3819.333484649658,"z":"d8d4f820.a9f2c8","wires":[[]]},{"id":"bc070e16.b6321","type":"switchNode","name":"switch cidr-mask","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].cidr-mask`'>\n","comments":"","outputs":1,"x":3991.6663360595703,"y":3863.332998275757,"z":"d8d4f820.a9f2c8","wires":[["e9be8551.036f28","293dac39.a696a4"]]},{"id":"e9be8551.036f28","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":4148.333011627197,"y":3824.999990463257,"z":"d8d4f820.a9f2c8","wires":[["1afe48f0.034447"]]},{"id":"293dac39.a696a4","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":4146.428714752197,"y":3900.952304840088,"z":"d8d4f820.a9f2c8","wires":[["9bdb2ded.f7444"]]},{"id":"1afe48f0.034447","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":4276.6662673950195,"y":3824.333486557007,"z":"d8d4f820.a9f2c8","wires":[[]]}]