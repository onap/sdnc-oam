[
  {
    "id":"2e8304f2.d1333c",
    "type":"dgstart",
    "name":"DGSTART",
    "outputs":1,
    "x":140,
    "y":102,
    "z":"e6090836.aef008",
    "wires":[
      [
        "30732ff9.e0c76"
      ]
    ]
  },
  {
    "id":"30732ff9.e0c76",
    "type":"service-logic",
    "name":"GENERIC-RESOURCE-API 1.2.0-SNAPSHOT-INT110901",
    "module":"GENERIC-RESOURCE-API",
    "version":"${project.version}",
    "comments":"",
    "xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='1.2.0-SNAPSHOT-INT110901'>",
    "outputs":1,
    "x":253.85713577270508,
    "y":141.80953788757324,
    "z":"e6090836.aef008",
    "wires":[
      [
        "9c4b6ed9.61ebe"
      ]
    ]
  },
  {
    "id":"9c4b6ed9.61ebe",
    "type":"method",
    "name":"method vf-module-topology-operation-assign",
    "xml":"<method rpc='vf-module-topology-operation-assign' mode='sync'>\n",
    "comments":"",
    "outputs":1,
    "x":253.42862701416016,
    "y":182,
    "z":"e6090836.aef008",
    "wires":[
      [
        "4a26d4a8.22be7c"
      ]
    ]
  },
  {
    "id":"5527c1d7.da9d7",
    "type":"comment",
    "name":"vf-module-topology-operation-assign",
    "info":"",
    "comments":"",
    "x":545.3210983276367,
    "y":44.97569942474365,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"2e530cdc.f4ef94",
    "type":"switchNode",
    "name":"switch request-action",
    "xml":"<switch test='`$vf-module-topology-operation-input.request-information.request-action`'>\n",
    "comments":"",
    "outputs":1,
    "x":545.1905097961426,
    "y":357.52382230758667,
    "z":"e6090836.aef008",
    "wires":[
      [
        "bfda8f90.6e24d",
        "77f2de42.6ba9a"
      ]
    ]
  },
  {
    "id":"bfda8f90.6e24d",
    "type":"outcome",
    "name":"CreateVfModuleInstance",
    "xml":"<outcome value='CreateVfModuleInstance'>\n",
    "comments":"",
    "outputs":1,
    "x":807.2381248474121,
    "y":334.66670846939087,
    "z":"e6090836.aef008",
    "wires":[
      [
        "40654d05.71fd14"
      ]
    ]
  },
  {
    "id":"77f2de42.6ba9a",
    "type":"other",
    "name":"other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":750.9047698974609,
    "y":380.0476975440979,
    "z":"e6090836.aef008",
    "wires":[
      [
        "8b7d596e.984638"
      ]
    ]
  },
  {
    "id":"40654d05.71fd14",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":997.0952892303467,
    "y":334.6667399406433,
    "z":"e6090836.aef008",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"8b7d596e.984638",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"If svc-action is 'assign' then request-action must be 'CreateVfModuleInstance'\" />\n",
    "comments":"",
    "x":1015.9047775268555,
    "y":380.381010055542,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"aea9b344.20b1b",
    "type":"get-resource",
    "name":"get-resource VF_MODULE_MODEL",
    "xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VF_MODULE_MODEL WHERE customization_uuid = $vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid'\n  pfx='db.vf-module-model'>\n\n",
    "comments":"",
    "outputs":1,
    "x":592.5237770080566,
    "y":448.66677236557007,
    "z":"e6090836.aef008",
    "wires":[
      [
        "4b7c3e12.248ee",
        "6ee12611.a15fe8"
      ]
    ]
  },
  {
    "id":"f817dd96.2592f",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No model found for VF module customization UUID ' + $vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid`\" />\n",
    "comments":"",
    "x":1033.9521980285645,
    "y":473.09524488449097,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"4b7c3e12.248ee",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":858.3094673156738,
    "y":429.0476031303406,
    "z":"e6090836.aef008",
    "wires":[
      [
        "d8b6dd53.baf73"
      ]
    ]
  },
  {
    "id":"6ee12611.a15fe8",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":866.8808975219727,
    "y":473.33331632614136,
    "z":"e6090836.aef008",
    "wires":[
      [
        "f817dd96.2592f"
      ]
    ]
  },
  {
    "id":"d8b6dd53.baf73",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VF_MODULE_MODEL table\" />\n",
    "comments":"",
    "x":1033.309398651123,
    "y":428.1905035972595,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"a8ff9e79.0b468",
    "type":"switchNode",
    "name":"switch service-data.vnfs.vnf_length",
    "xml":"<switch test='`$service-data.vnfs.vnf_length`'>\n",
    "comments":"",
    "outputs":1,
    "x":587.6190414428711,
    "y":657.2381076812744,
    "z":"e6090836.aef008",
    "wires":[
      [
        "45e1ae95.939d1",
        "5930857d.90f94c"
      ]
    ]
  },
  {
    "id":"45e1ae95.939d1",
    "type":"other",
    "name":"NULL",
    "xml":"<outcome value=''>\n",
    "comments":"",
    "outputs":1,
    "x":828.3333129882812,
    "y":634.3808479309082,
    "z":"e6090836.aef008",
    "wires":[
      [
        "1632f046.4d998"
      ]
    ]
  },
  {
    "id":"5930857d.90f94c",
    "type":"other",
    "name":"other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":828.0951538085938,
    "y":675.333366394043,
    "z":"e6090836.aef008",
    "wires":[
      [
        "223ba3cb.be09fc"
      ]
    ]
  },
  {
    "id":"4a26d4a8.22be7c",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":194.99999237060547,
    "y":2351.9999599456787,
    "z":"e6090836.aef008",
    "wires":[
      [
        "2e530cdc.f4ef94",
        "aea9b344.20b1b",
        "a8ff9e79.0b468",
        "358800b1.81ab1",
        "88b7c37.4ed0e4",
        "eac7ee4b.07efc",
        "e57448b6.7f55b8",
        "aaaa0574.80d838",
        "9a073bb9.44d298",
        "e811de1a.3c14a",
        "ad1485f5.221e88",
        "98b04124.336cf",
        "cfad5308.b616e",
        "7923367d.eb91d8",
        "809c73eb.2a71c",
        "a3e0954f.9194f8",
        "a65c32d0.f1f0d",
        "fa12b719.f97378",
        "1f990c33.cacfc4",
        "714310a.b7326f",
        "69ed6361.64762c",
        "e47d3411.0e7818",
        "582721c4.126f6",
        "b0ef8497.4ea668",
        "3ab291c1.7ed19e",
        "8923d8d0.f4b338",
        "4f613c00.2b7644",
        "39e9e85.a687718",
        "dfa4db2.9778928",
        "14f4699d.ce7016",
        "7ae88bfe.f72b94",
        "aa1a950e.7071b8",
        "1f69056.fe181fb",
        "19070089.9bb2ff",
        "a2e18bff.138e78",
        "454e063f.718d08",
        "aedcd126.656c8",
        "c314b843.e5cd58"
      ]
    ]
  },
  {
    "id":"1632f046.4d998",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"There are no VNFs defined in MD-SAL\" />\n",
    "comments":"",
    "x":994.999927520752,
    "y":633.6666030883789,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"223ba3cb.be09fc",
    "type":"for",
    "name":"for each vnf",
    "xml":"<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
    "comments":"",
    "outputs":1,
    "x":990.3332977294922,
    "y":674.9999847412109,
    "z":"e6090836.aef008",
    "wires":[
      [
        "220abc57.c6caa4"
      ]
    ]
  },
  {
    "id":"220abc57.c6caa4",
    "type":"switchNode",
    "name":"switch service data vnf == input vnf",
    "xml":"<switch test='`$service-data.vnfs.vnf[$idx].vnf-id == $vf-module-topology-operation-input.vnf-information.vnf-id`'>\n",
    "comments":"",
    "outputs":1,
    "x":1241.6665153503418,
    "y":674.6666717529297,
    "z":"e6090836.aef008",
    "wires":[
      [
        "8fa71765.ff25a8"
      ]
    ]
  },
  {
    "id":"8fa71765.ff25a8",
    "type":"outcomeTrue",
    "name":"true",
    "xml":"<outcome value='true'>\n",
    "comments":"",
    "outputs":1,
    "x":1471.6666069030762,
    "y":674.0000257492065,
    "z":"e6090836.aef008",
    "wires":[
      [
        "99e80d15.cd3ff"
      ]
    ]
  },
  {
    "id":"358800b1.81ab1",
    "type":"set",
    "name":"set vnf-index to -1",
    "xml":"<set>\n<parameter name='vnf-index' value='-1' />\n",
    "comments":"",
    "x":536.6666641235352,
    "y":588.6666069030762,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"2b9d4cfa.693254",
    "type":"set",
    "name":"set vnf-index to idx",
    "xml":"<set>\n<parameter name='vnf-index' value='`$idx`' />\n",
    "comments":"",
    "x":1793.3332443237305,
    "y":644.9999837875366,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"88b7c37.4ed0e4",
    "type":"switchNode",
    "name":"switch vnf-index",
    "xml":"<switch test='`$vnf-index`'>\n",
    "comments":"",
    "outputs":1,
    "x":526.6666717529297,
    "y":725.3333034515381,
    "z":"e6090836.aef008",
    "wires":[
      [
        "12b4f972.baaff7"
      ]
    ]
  },
  {
    "id":"12b4f972.baaff7",
    "type":"outcome",
    "name":"-1",
    "xml":"<outcome value='-1'>\n",
    "comments":"",
    "outputs":1,
    "x":705.000057220459,
    "y":724.6666793823242,
    "z":"e6090836.aef008",
    "wires":[
      [
        "a416b02e.8e4f1"
      ]
    ]
  },
  {
    "id":"a416b02e.8e4f1",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find VNF ID ' + $vf-module-topology-operation-input.vnf-information.vnf-id + ' in MD-SAL'`\" />\n",
    "comments":"",
    "x":864.9999656677246,
    "y":723.9999828338623,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"eac7ee4b.07efc",
    "type":"switchNode",
    "name":"switch vnf order status",
    "xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.order-status`'>\n",
    "comments":"",
    "outputs":1,
    "x":549.6666946411133,
    "y":796.6667003631592,
    "z":"e6090836.aef008",
    "wires":[
      [
        "2fc04200.260dfe",
        "bef7e5a8.884d58"
      ]
    ]
  },
  {
    "id":"2fc04200.260dfe",
    "type":"outcome",
    "name":"Created",
    "xml":"<outcome value='Created'>\n",
    "comments":"",
    "outputs":1,
    "x":749.9999961853027,
    "y":770.3332843780518,
    "z":"e6090836.aef008",
    "wires":[
      [
        "3cba4216.c1fc4e"
      ]
    ]
  },
  {
    "id":"3cba4216.c1fc4e",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":890.0000076293945,
    "y":770.3333263397217,
    "z":"e6090836.aef008",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"bef7e5a8.884d58",
    "type":"other",
    "name":"other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":746.666633605957,
    "y":811.9999618530273,
    "z":"e6090836.aef008",
    "wires":[
      [
        "fc26f30c.6bb1c"
      ]
    ]
  },
  {
    "id":"fc26f30c.6bb1c",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VNF order status is ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.order-status + ' but should be Created'`\" />\n",
    "comments":"",
    "x":906.666633605957,
    "y":811.6666488647461,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"e57448b6.7f55b8",
    "type":"switchNode",
    "name":"switch vf-module_length",
    "xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`'>\n",
    "comments":"",
    "outputs":1,
    "x":553.333381652832,
    "y":888.6666212081909,
    "z":"e6090836.aef008",
    "wires":[
      [
        "9b350576.68ef18",
        "22c3a3f5.72d6ac"
      ]
    ]
  },
  {
    "id":"9b350576.68ef18",
    "type":"other",
    "name":"NULL",
    "xml":"<outcome value=''>\n",
    "comments":"",
    "outputs":1,
    "x":810.7143363952637,
    "y":855.8093948364258,
    "z":"e6090836.aef008",
    "wires":[
      [
        "c6416be8.6fa798"
      ]
    ]
  },
  {
    "id":"c6416be8.6fa798",
    "type":"set",
    "name":"set vf-module-index=0",
    "xml":"<set>\n<parameter name='vf-module-index' value='0' />\n",
    "comments":"",
    "x":998.3333740234375,
    "y":856.4761695861816,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"22c3a3f5.72d6ac",
    "type":"other",
    "name":"other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":811.142879486084,
    "y":920.0952529907227,
    "z":"e6090836.aef008",
    "wires":[
      [
        "19a7ad8a.4f2812"
      ]
    ]
  },
  {
    "id":"421fd6a0.579bd8",
    "type":"set",
    "name":"set vf-module-index = vf-module_length",
    "xml":"<set>\n<parameter name='vf-module-index' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' />\n",
    "comments":"",
    "x":1196.3334197998047,
    "y":900.2856483459473,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"1d996969.d26e67",
    "type":"for",
    "name":"for each existing VF module",
    "xml":"<for index='idx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' >\n",
    "comments":"",
    "outputs":1,
    "x":1155.4285125732422,
    "y":944.3808784484863,
    "z":"e6090836.aef008",
    "wires":[
      [
        "a0040550.7bc5d8"
      ]
    ]
  },
  {
    "id":"19a7ad8a.4f2812",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":947.8571586608887,
    "y":920.095178604126,
    "z":"e6090836.aef008",
    "wires":[
      [
        "421fd6a0.579bd8",
        "1d996969.d26e67"
      ]
    ]
  },
  {
    "id":"a0040550.7bc5d8",
    "type":"switchNode",
    "name":"switch vf-module-information.vf-module-id == service-data.vnfs.vnf[].vf-modules.vf-module[].vf-module-id",
    "xml":"<switch test='`$vf-module-topology-operation-input.vf-module-information.vf-module-id == $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id`'>\n",
    "comments":"",
    "outputs":1,
    "x":1659.0476150512695,
    "y":943.9522895812988,
    "z":"e6090836.aef008",
    "wires":[
      [
        "6ba70fe.734c0f"
      ]
    ]
  },
  {
    "id":"6ba70fe.734c0f",
    "type":"outcomeTrue",
    "name":"true",
    "xml":"<outcome value='true'>\n",
    "comments":"",
    "outputs":1,
    "x":2101.666664123535,
    "y":943.5237407684326,
    "z":"e6090836.aef008",
    "wires":[
      [
        "93b8e785.9fee48"
      ]
    ]
  },
  {
    "id":"93b8e785.9fee48",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VF module id ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id\n       + ' already exists, and status is ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-data.vf-module-level-oper-status.order-status`\" />\n",
    "comments":"",
    "x":2253.571544647217,
    "y":943.5237274169922,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"f56d52b4.a8261",
    "type":"comment",
    "name":"make sure this VF module doesn't exist already",
    "info":"",
    "comments":"",
    "x":1685.4999618530273,
    "y":898.5797815322876,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"aaaa0574.80d838",
    "type":"set",
    "name":"set new vf-module_length",
    "xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length' value='`$vf-module-index + 1`' />\n",
    "comments":"",
    "x":558.3333206176758,
    "y":983.6665554046631,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"9a073bb9.44d298",
    "type":"set",
    "name":"set vf-module-topology data",
    "xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-topology-identifier.vf-module-id' value='`$vf-module-topology-operation-input.vf-module-information.vf-module-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-topology-identifier.vf-module-name' value='`$vf-module-topology-operation-input.vf-module-request-input.vf-module-name`' />\n<parameter name='tmp.vf-module-topology.vf-module-topology-identifier.vf-module-type' value='`$vf-module-topology-operation-input.vf-module-information.vf-module-type`' />\n<parameter name='tmp.vf-module-topology.tenant' value='`$vf-module-topology-operation-input.vf-module-request-input.tenant`' />\n<parameter name='tmp.vf-module-topology.aic-cloud-region' value='`$vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region`' />\n",
    "comments":"",
    "x":564.8333396911621,
    "y":1096.1666622161865,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"71021cf9.d2ce64",
    "type":"set",
    "name":"set aic-clli",
    "xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.aic-clli'\n   value='`$aai-uid-split[$aai-uid-split_length - 1]`' />\n",
    "comments":"",
    "x":1325.7855987548828,
    "y":1255.4045886993408,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"e811de1a.3c14a",
    "type":"switchNode",
    "name":"switch aic-clli",
    "xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.aic-clli`'>\n",
    "comments":"",
    "outputs":1,
    "x":524.8332595825195,
    "y":1369.3569288253784,
    "z":"e6090836.aef008",
    "wires":[
      [
        "c686f39d.72ab2"
      ]
    ]
  },
  {
    "id":"c686f39d.72ab2",
    "type":"outcome",
    "name":"NULL",
    "xml":"<outcome value=''>",
    "comments":"",
    "outputs":1,
    "x":670.1189498901367,
    "y":1369.3569974899292,
    "z":"e6090836.aef008",
    "wires":[
      [
        "6f7dc11c.49e2c"
      ]
    ]
  },
  {
    "id":"6f7dc11c.49e2c",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find aic-clli in AAI for aic-cloud-region ' + $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region`\" />\n",
    "comments":"",
    "x":817.2618103027344,
    "y":1368.9284315109253,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"ad1485f5.221e88",
    "type":"get-resource",
    "name":"get-resource cloud region",
    "xml":"<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"cloud-region\" \n\t\tkey=\"cloud-region.cloud-owner = 'CloudOwner' AND \n\t\t     cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\"\n        pfx='aai.cloud-region' local-only='false' >\n\n",
    "comments":"",
    "outputs":1,
    "x":563.6904754638672,
    "y":1169.5002002716064,
    "z":"e6090836.aef008",
    "wires":[
      [
        "8097c203.a4e64",
        "ef1c3461.dc92d8"
      ]
    ]
  },
  {
    "id":"ef1c3461.dc92d8",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":777.9366683959961,
    "y":1187.6510562896729,
    "z":"e6090836.aef008",
    "wires":[
      [
        "6dfc15a7.72a2bc"
      ]
    ]
  },
  {
    "id":"6dfc15a7.72a2bc",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error retrieving cloud region from AAI\" />\n",
    "comments":"",
    "x":952.9366416931152,
    "y":1187.6510925292969,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"8097c203.a4e64",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":786.8652648925781,
    "y":1145.9367895126343,
    "z":"e6090836.aef008",
    "wires":[
      [
        "4786ef92.946f8"
      ]
    ]
  },
  {
    "id":"4786ef92.946f8",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Cloud region not found in AAI\" />\n",
    "comments":"",
    "x":953.214542388916,
    "y":1145.2423667907715,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"98b04124.336cf",
    "type":"set",
    "name":"set vf-module-parameters",
    "xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-parameters.'\n  value='vf-module-topology-operation-input.vf-module-request-input.vf-module-input-parameters.' />\n",
    "comments":"",
    "x":560.595287322998,
    "y":1818.7860202789307,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"cfad5308.b616e",
    "type":"set",
    "name":"set order-status to PendingCreate",
    "xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.order-status'\n  value='PendingCreate' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-rpc-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.request-action`' />\n",
    "comments":"",
    "x":576.2262573242188,
    "y":5020.3927001953125,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"7923367d.eb91d8",
    "type":"get-resource",
    "name":"get-resource VF_MODULE_TO_VFC_MAPPING",
    "xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VF_MODULE_TO_VFC_MAPPING WHERE vf_module_customization_uuid = $vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid'\n  pfx='db.vf-module-to-vfc-mapping[]'>\n\n",
    "comments":"",
    "outputs":1,
    "x":633.9286880493164,
    "y":1872.642807006836,
    "z":"e6090836.aef008",
    "wires":[
      [
        "61dd146a.6f14fc",
        "cfdcc8b2.a45fb8"
      ]
    ]
  },
  {
    "id":"61dd146a.6f14fc",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":899.7143783569336,
    "y":1853.0236377716064,
    "z":"e6090836.aef008",
    "wires":[
      [
        "3ca0362b.6e2f9a"
      ]
    ]
  },
  {
    "id":"cfdcc8b2.a45fb8",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":908.2858085632324,
    "y":1897.3093509674072,
    "z":"e6090836.aef008",
    "wires":[
      [
        "f2ed6314.ee329"
      ]
    ]
  },
  {
    "id":"3ca0362b.6e2f9a",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VF_MODULE_TO_VFC_MAPPING table\" />\n",
    "comments":"",
    "x":1074.7143096923828,
    "y":1852.1665382385254,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"809c73eb.2a71c",
    "type":"for",
    "name":"for each vm-type",
    "xml":"<for index='vm-type-index' start='0' end='`$db.vf-module-to-vfc-mapping_length`' >\n",
    "comments":"",
    "outputs":1,
    "x":534.0476989746094,
    "y":2501.6430587768555,
    "z":"e6090836.aef008",
    "wires":[
      [
        "1f699ee5.b89dd1"
      ]
    ]
  },
  {
    "id":"ae4ef538.4223c8",
    "type":"get-resource",
    "name":"get-resource VFC_MODEL",
    "xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VFC_MODEL WHERE customization_uuid = $db.vf-module-to-vfc-mapping[$vm-type-index].vfc-customization-uuid'\n  pfx='db.vfc-model'>\n\n",
    "comments":"",
    "outputs":1,
    "x":975.9524993896484,
    "y":1993.5477199554443,
    "z":"e6090836.aef008",
    "wires":[
      [
        "c1a94592.ef7dc8",
        "36c932eb.81f9ae"
      ]
    ]
  },
  {
    "id":"2749f807.59cbd8",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No entries found in VFC_MODEL table for customization UUID ' + $db.vf-module-to-vfc-mapping[$db-vm-index].vfc_customization_uuid`\" />\n",
    "comments":"",
    "x":1346.3808479309082,
    "y":2017.9761123657227,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"c1a94592.ef7dc8",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":1171.7381172180176,
    "y":1973.9284706115723,
    "z":"e6090836.aef008",
    "wires":[
      [
        "480721a9.59fc5"
      ]
    ]
  },
  {
    "id":"36c932eb.81f9ae",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":1180.3095474243164,
    "y":2018.214183807373,
    "z":"e6090836.aef008",
    "wires":[
      [
        "2749f807.59cbd8"
      ]
    ]
  },
  {
    "id":"480721a9.59fc5",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VFC_MODEL table\" />\n",
    "comments":"",
    "x":1346.7380485534668,
    "y":1973.0713710784912,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"1f699ee5.b89dd1",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":725.9524917602539,
    "y":2500.214427947998,
    "z":"e6090836.aef008",
    "wires":[
      [
        "ae4ef538.4223c8",
        "96edef9a.d3b33",
        "dc43de7f.70791",
        "c2deb4af.5c58c8",
        "8101c46.e2ef238",
        "f5bdc66c.11bd78",
        "4f18de56.831f8",
        "18e532bb.94aa6d"
      ]
    ]
  },
  {
    "id":"69ed6361.64762c",
    "type":"set",
    "name":"set vm_length",
    "xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm_length'\n  value='`$db.vf-module-to-vfc-mapping_length`' />\n",
    "comments":"",
    "x":525.833366394043,
    "y":1932.8334846496582,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"96edef9a.d3b33",
    "type":"set",
    "name":"set vm data",
    "xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-type'\n   value='`$db.vf-module-to-vfc-mapping[$vm-type-index].vm-type`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-naming-code'\n   value='`$db.vfc-model.nfc-naming-code`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-type-tag'\n   value='`$db.vfc-model.vm-type-tag`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-count'\n   value='`$db.vf-module-to-vfc-mapping[$vm-type-index].vm-count`' />\n",
    "comments":"",
    "x":926.6667518615723,
    "y":2119.5001974105835,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"99e80d15.cd3ff",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1620.0000686645508,
    "y":672.9197244644165,
    "z":"e6090836.aef008",
    "wires":[
      [
        "2b9d4cfa.693254",
        "e08ffaca.0297f8"
      ]
    ]
  },
  {
    "id":"e08ffaca.0297f8",
    "type":"break",
    "name":"break",
    "xml":"<break>",
    "comments":"",
    "x":1755.0000343322754,
    "y":694.5863103866577,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"d743beeb.1dbe5",
    "type":"set",
    "name":"set from DB",
    "xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-invariant-uuid'\n  value='`$db.vf-module-model.invariant-uuid`' />\n",
    "comments":"",
    "x":939.1665992736816,
    "y":1410.7529220581055,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"a3e0954f.9194f8",
    "type":"switchNode",
    "name":"switch input model-invariant-uuid",
    "xml":"<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-invariant-uuid`'>\n",
    "comments":"",
    "outputs":1,
    "x":583.0236740112305,
    "y":1433.5773658752441,
    "z":"e6090836.aef008",
    "wires":[
      [
        "2c1d02c0.78dd0e",
        "a95a3eca.03f4"
      ]
    ]
  },
  {
    "id":"2c1d02c0.78dd0e",
    "type":"outcome",
    "name":"NULL",
    "xml":"<outcome value=''>",
    "comments":"",
    "outputs":1,
    "x":788.6903457641602,
    "y":1410.720329284668,
    "z":"e6090836.aef008",
    "wires":[
      [
        "d743beeb.1dbe5"
      ]
    ]
  },
  {
    "id":"a95a3eca.03f4",
    "type":"other",
    "name":"other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":790.1189422607422,
    "y":1455.0059204101562,
    "z":"e6090836.aef008",
    "wires":[
      [
        "25dab957.580636"
      ]
    ]
  },
  {
    "id":"25dab957.580636",
    "type":"set",
    "name":"set from input",
    "xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-invariant-uuid'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-invariant-uuid`' />\n",
    "comments":"",
    "x":944.4046783447266,
    "y":1454.4344925880432,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"638901d0.ce1ec",
    "type":"set",
    "name":"set from DB",
    "xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-uuid'\n  value='`$db.vf-module-model.uuid`' />\n",
    "comments":"",
    "x":940.1188697814941,
    "y":1499.2915983200073,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"a65c32d0.f1f0d",
    "type":"switchNode",
    "name":"switch input model-uuid",
    "xml":"<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-uuid`'>\n",
    "comments":"",
    "outputs":1,
    "x":555.642692565918,
    "y":1522.1161031723022,
    "z":"e6090836.aef008",
    "wires":[
      [
        "ed142f55.1f70c",
        "75273d61.353b14"
      ]
    ]
  },
  {
    "id":"ed142f55.1f70c",
    "type":"outcome",
    "name":"NULL",
    "xml":"<outcome value=''>",
    "comments":"",
    "outputs":1,
    "x":789.6426658630371,
    "y":1499.2590351104736,
    "z":"e6090836.aef008",
    "wires":[
      [
        "638901d0.ce1ec"
      ]
    ]
  },
  {
    "id":"75273d61.353b14",
    "type":"other",
    "name":"other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":791.0712623596191,
    "y":1543.544626235962,
    "z":"e6090836.aef008",
    "wires":[
      [
        "da1cfb23.9a25e8"
      ]
    ]
  },
  {
    "id":"da1cfb23.9a25e8",
    "type":"set",
    "name":"set from input",
    "xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-uuid'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-uuid`' />\n",
    "comments":"",
    "x":945.3569984436035,
    "y":1542.9731984138489,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"65429406.6c6b9c",
    "type":"set",
    "name":"set from DB",
    "xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-version'\n  value='`$db.vf-module-model.version`' />\n",
    "comments":"",
    "x":937.2618026733398,
    "y":1588.1488056182861,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"fa12b719.f97378",
    "type":"switchNode",
    "name":"switch input model-version",
    "xml":"<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-version`'>\n",
    "comments":"",
    "outputs":1,
    "x":563.7855644226074,
    "y":1610.9732503890991,
    "z":"e6090836.aef008",
    "wires":[
      [
        "1200d2f5.494f9d",
        "f5147fc0.bfa5e"
      ]
    ]
  },
  {
    "id":"1200d2f5.494f9d",
    "type":"outcome",
    "name":"NULL",
    "xml":"<outcome value=''>",
    "comments":"",
    "outputs":1,
    "x":786.7855491638184,
    "y":1588.1162128448486,
    "z":"e6090836.aef008",
    "wires":[
      [
        "65429406.6c6b9c"
      ]
    ]
  },
  {
    "id":"f5147fc0.bfa5e",
    "type":"other",
    "name":"other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":788.2141456604004,
    "y":1632.401803970337,
    "z":"e6090836.aef008",
    "wires":[
      [
        "d74f65ed.78d448"
      ]
    ]
  },
  {
    "id":"d74f65ed.78d448",
    "type":"set",
    "name":"set from input",
    "xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-version'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-version`' />\n",
    "comments":"",
    "x":942.4998817443848,
    "y":1631.8303761482239,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"da71a3e1.3185a",
    "type":"set",
    "name":"set from DB",
    "xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-name'\n  value='`$db.vf-module-model.name`' />\n",
    "comments":"",
    "x":937.2618026733398,
    "y":1675.2916278839111,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"1f990c33.cacfc4",
    "type":"switchNode",
    "name":"switch input model-name",
    "xml":"<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-name`'>\n",
    "comments":"",
    "outputs":1,
    "x":558.7855644226074,
    "y":1698.1160726547241,
    "z":"e6090836.aef008",
    "wires":[
      [
        "647b0438.ab102c",
        "663c8c44.ce20c4"
      ]
    ]
  },
  {
    "id":"647b0438.ab102c",
    "type":"outcome",
    "name":"NULL",
    "xml":"<outcome value=''>",
    "comments":"",
    "outputs":1,
    "x":786.7855491638184,
    "y":1675.2590351104736,
    "z":"e6090836.aef008",
    "wires":[
      [
        "da71a3e1.3185a"
      ]
    ]
  },
  {
    "id":"663c8c44.ce20c4",
    "type":"other",
    "name":"other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":788.2141456604004,
    "y":1719.544626235962,
    "z":"e6090836.aef008",
    "wires":[
      [
        "e84c9dce.744b8"
      ]
    ]
  },
  {
    "id":"e84c9dce.744b8",
    "type":"set",
    "name":"set from input",
    "xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-name'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-name`' />\n",
    "comments":"",
    "x":942.4998817443848,
    "y":1718.9731984138489,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"714310a.b7326f",
    "type":"set",
    "name":"set model-customization-uuid",
    "xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-customization-uuid'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid`' />\n",
    "comments":"",
    "x":573.2378997802734,
    "y":1770.6250619888306,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"dc43de7f.70791",
    "type":"for",
    "name":"for each vm",
    "xml":"<for index='vm-index' start='0' end='`$db.vf-module-to-vfc-mapping[$vm-type-index].vm-count`' >\n",
    "comments":"",
    "outputs":1,
    "x":928.3332405090332,
    "y":2228.7531156539917,
    "z":"e6090836.aef008",
    "wires":[
      [
        "7505754.7087a8c"
      ]
    ]
  },
  {
    "id":"c2deb4af.5c58c8",
    "type":"set",
    "name":"set vm-name-length",
    "xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vm-name_length'\n  value='`$db.vf-module-to-vfc-mapping[$vm-type-index].vm-count`' />\n",
    "comments":"",
    "x":951.6666946411133,
    "y":2163.753373146057,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"2f06bc6e.cdf504",
    "type":"call",
    "name":"call GENERIC-RESOURCE-API:generate-unique-name",
    "xml":"<call module='GENERIC-RESOURCE-API' rpc='generate-unique-name' mode='sync' >\n",
    "comments":"",
    "outputs":1,
    "x":1394.761863708496,
    "y":2251.3722620010376,
    "z":"e6090836.aef008",
    "wires":[
      [
        "6c48629.77e939c",
        "a3fd6e6d.5788b"
      ]
    ]
  },
  {
    "id":"6c48629.77e939c",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":1690.4761517842617,
    "y":2224.2295246124268,
    "z":"e6090836.aef008",
    "wires":[
      [
        "8b35adee.43478"
      ]
    ]
  },
  {
    "id":"a3fd6e6d.5788b",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":1693.8095016479492,
    "y":2275.896167755127,
    "z":"e6090836.aef008",
    "wires":[
      [
        "a8057f80.cfbdb"
      ]
    ]
  },
  {
    "id":"18ce2f16.816031",
    "type":"set",
    "name":"set variables for generating unique name",
    "xml":"<set>\n<parameter name='generate-unique-name-input.index-table-name' value='VM_NAME_INDEX' />\n<parameter name='generate-unique-name-input.index-table-prefix-column' value='vm_name_prefix' />\n<parameter name='generate-unique-name-input.name-table-type' value='VM_INSTANCE' />\n<parameter name='generate-unique-name-input.prefix' value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-name + $db.vfc-model.nfc-naming-code`\" />\n<parameter name='generate-unique-name-input.index-length' value='3' />\n",
    "comments":"",
    "x":1351.4285774230957,
    "y":2199.7055883407593,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"a8057f80.cfbdb",
    "type":"set",
    "name":"set generated name",
    "xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vm-name[$vm-index]' value='`$generate-unique-name-output.generated-name`' />\n",
    "comments":"",
    "x":1878.3332176208496,
    "y":2275.3721857070923,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"8b35adee.43478",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`$generate-unique-name-output.error-message`\" />\n",
    "comments":"",
    "x":1858.3332646687832,
    "y":2223.6580362319946,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"e47d3411.0e7818",
    "type":"set",
    "name":"set vf-module-id",
    "xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id'\n   value='`$vf-module-topology-operation-input.vf-module-information.vf-module-id`' />\n",
    "comments":"",
    "x":526.4285469055176,
    "y":1039.348237991333,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"7505754.7087a8c",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":1092.738182067871,
    "y":2228.396019935608,
    "z":"e6090836.aef008",
    "wires":[
      [
        "18ce2f16.816031",
        "2f06bc6e.cdf504"
      ]
    ]
  },
  {
    "id":"8101c46.e2ef238",
    "type":"get-resource",
    "name":"get-resource VFC_TO_NETWORK_ROLE_MAPPING",
    "xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VFC_TO_NETWORK_ROLE_MAPPING WHERE vfc_customization_uuid = $db.vf-module-to-vfc-mapping[$vm-type-index].vfc-customization-uuid'\n  pfx='db.vfc-to-network-role-mapping[]'>\n\n",
    "comments":"",
    "outputs":1,
    "x":1055.595329284668,
    "y":2351.253088951111,
    "z":"e6090836.aef008",
    "wires":[
      [
        "61785549.e0849c",
        "5224b8ad.063668"
      ]
    ]
  },
  {
    "id":"61785549.e0849c",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":1342.8095321655273,
    "y":2331.6339359283447,
    "z":"e6090836.aef008",
    "wires":[
      [
        "58d75d53.d15634"
      ]
    ]
  },
  {
    "id":"5224b8ad.063668",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":1351.3809623718262,
    "y":2375.9196491241455,
    "z":"e6090836.aef008",
    "wires":[
      [
        "16f89ad6.193655"
      ]
    ]
  },
  {
    "id":"58d75d53.d15634",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VFC_TO_NETWORK_ROLE_MAPPING table\" />\n",
    "comments":"",
    "x":1517.8094635009766,
    "y":2330.7768363952637,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"f5bdc66c.11bd78",
    "type":"for",
    "name":"for each network-role",
    "xml":"<for index='network-role-index' start='0' end='`$db.vfc-to-network-role-mapping_length`' >\n",
    "comments":"",
    "outputs":1,
    "x":948.6906204223633,
    "y":2662.4439306259155,
    "z":"e6090836.aef008",
    "wires":[
      [
        "f495fb98.6c0a18"
      ]
    ]
  },
  {
    "id":"f495fb98.6c0a18",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":1155.1190719604492,
    "y":2659.11043548584,
    "z":"e6090836.aef008",
    "wires":[
      [
        "8d2e0b.55c471f8",
        "b8d6dab7.8f19b8",
        "46e547.478a3ab8",
        "1da90578.6d8f2b",
        "415ccc2d.a04f44",
        "5a0fce27.0cc5",
        "2cebaf.8e65f452",
        "c8e0f30f.8d5d8"
      ]
    ]
  },
  {
    "id":"8d2e0b.55c471f8",
    "type":"for",
    "name":"for each network",
    "xml":"<for silentFailure='true' index='idx' start='0' end='`$service-data.networks.network_length`' >\n",
    "comments":"",
    "outputs":1,
    "x":1364.166633605957,
    "y":2491.253191947937,
    "z":"e6090836.aef008",
    "wires":[
      [
        "e2ef30d6.1b483"
      ]
    ]
  },
  {
    "id":"b8d6dab7.8f19b8",
    "type":"set",
    "name":"set network-index to -1",
    "xml":"<set>\n<parameter name='network-index' value='-1' />\n",
    "comments":"",
    "x":1384.1667022705078,
    "y":2448.396188735962,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"e2ef30d6.1b483",
    "type":"switchNode",
    "name":"switch network-role matches",
    "xml":"<switch test='`$service-data.networks.network[$idx].network-data.network-topology.network-topology-identifier-structure.network-role == $db.vfc-to-network-role-mapping[$network-role-index].network-role`'>\n",
    "comments":"",
    "outputs":1,
    "x":1592.737907409668,
    "y":2489.824381828308,
    "z":"e6090836.aef008",
    "wires":[
      [
        "79eba1ee.46b8"
      ]
    ]
  },
  {
    "id":"79eba1ee.46b8",
    "type":"outcomeTrue",
    "name":"true",
    "xml":"<outcome value='true'>\n",
    "comments":"",
    "outputs":1,
    "x":1791.3095741271973,
    "y":2489.824585914612,
    "z":"e6090836.aef008",
    "wires":[
      [
        "52d952.2163c6b"
      ]
    ]
  },
  {
    "id":"52d952.2163c6b",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1932.7381420135498,
    "y":2488.396014213562,
    "z":"e6090836.aef008",
    "wires":[
      [
        "19d3b2d3.0314cd",
        "b934653f.8e9748"
      ]
    ]
  },
  {
    "id":"19d3b2d3.0314cd",
    "type":"set",
    "name":"set network-index to idx",
    "xml":"<set>\n<parameter name='network-index' value='`$idx`' />\n",
    "comments":"",
    "x":2111.30965423584,
    "y":2465.5390100479126,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"b934653f.8e9748",
    "type":"break",
    "name":"break",
    "xml":"<break>",
    "comments":"",
    "x":2059.8808937072754,
    "y":2511.2531900405884,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"46e547.478a3ab8",
    "type":"switchNode",
    "name":"switch network-index",
    "xml":"<switch test='`$network-index`'>\n",
    "comments":"",
    "outputs":1,
    "x":1376.0714721679688,
    "y":2540.062829017639,
    "z":"e6090836.aef008",
    "wires":[
      [
        "d2ba67f.cc23298"
      ]
    ]
  },
  {
    "id":"d2ba67f.cc23298",
    "type":"outcomeTrue",
    "name":"-1",
    "xml":"<outcome value='-1'>\n",
    "comments":"",
    "outputs":1,
    "x":1570.3571968078613,
    "y":2540.062726020813,
    "z":"e6090836.aef008",
    "wires":[
      [
        "78f92d17.cec774"
      ]
    ]
  },
  {
    "id":"78f92d17.cec774",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No network found in MD-SAL with network-role ' + $db.vfc-to-network-role-mapping[$network-role-index].network-role`\" />\n",
    "comments":"",
    "x":1727.5000457763672,
    "y":2538.634196281433,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"582721c4.126f6",
    "type":"for",
    "name":"for each cloud-region relationship",
    "xml":"<for index='idx' start='0' end='`$aai.cloud-region.relationship-list.relationship_length`' >\n",
    "comments":"",
    "outputs":1,
    "x":585.9442901611328,
    "y":1258.0068836212158,
    "z":"e6090836.aef008",
    "wires":[
      [
        "f632bc1b.960e"
      ]
    ]
  },
  {
    "id":"f632bc1b.960e",
    "type":"switchNode",
    "name":"switch related-to",
    "xml":"<switch test='`$aai.cloud-region.relationship-list.relationship[$idx].related-to`'>\n",
    "comments":"",
    "outputs":1,
    "x":833.6228332519531,
    "y":1257.7568130493164,
    "z":"e6090836.aef008",
    "wires":[
      [
        "c5ce5df.fba4ea"
      ]
    ]
  },
  {
    "id":"c5ce5df.fba4ea",
    "type":"outcome",
    "name":"complex",
    "xml":"<outcome value='complex'>\n",
    "comments":"",
    "outputs":1,
    "x":1003.0871543884277,
    "y":1257.1496353149414,
    "z":"e6090836.aef008",
    "wires":[
      [
        "36cd2be.f10ccd4"
      ]
    ]
  },
  {
    "id":"af57b732.5de4d8",
    "type":"execute",
    "name":"split related-link",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split'>\n   <parameter name='ctx_memory_result_key' value='aai-uid-split' />\n   <parameter name='original_string' value='`$aai.cloud-region.relationship-list.relationship[$idx].related-link`' />\n   <parameter name='regex' value='/' />\n",
    "comments":"",
    "outputs":1,
    "x":1343.1823120117188,
    "y":1211.5782108306885,
    "z":"e6090836.aef008",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"36cd2be.f10ccd4",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":1162.8490142822266,
    "y":1258.2449989318848,
    "z":"e6090836.aef008",
    "wires":[
      [
        "af57b732.5de4d8",
        "e276c8d3.3ab668",
        "71021cf9.d2ce64"
      ]
    ]
  },
  {
    "id":"e276c8d3.3ab668",
    "type":"break",
    "name":"break",
    "xml":"<break>",
    "comments":"",
    "x":1312.848976135254,
    "y":1301.5782957077026,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"1da90578.6d8f2b",
    "type":"set",
    "name":"set network-role and tag",
    "xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-role'\n   value='`$db.vfc-to-network-role-mapping[$network-role-index].network-role`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-role-tag'\n   value='`$db.vfc-to-network-role-mapping[$network-role-index].network-role-tag`' />\n",
    "comments":"",
    "x":1385.8333549499512,
    "y":2636.2530155181885,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"4f18de56.831f8",
    "type":"set",
    "name":"set vm-network-length",
    "xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network_length'\n  value='`$db.vfc-to-network-role-mapping_length`' />\n",
    "comments":"",
    "x":942.4999465942383,
    "y":3051.2532806396484,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"415ccc2d.a04f44",
    "type":"switchNode",
    "name":"switch ipv4-ip-version",
    "xml":"<switch test='`$db.vfc-to-network-role-mapping[$network-role-index].ipv4-ip-version`'>\n",
    "comments":"",
    "outputs":1,
    "x":1378.452407836914,
    "y":2719.5863428115845,
    "z":"e6090836.aef008",
    "wires":[
      [
        "eff505c0.4d80a8",
        "7ba4a75.88aab58"
      ]
    ]
  },
  {
    "id":"15f50ec8.ae15e1",
    "type":"set",
    "name":"set network-information-index to -1",
    "xml":"<set>\n<parameter name='network-information-index' value='-1' />\n\n",
    "comments":"",
    "x":1787.97603225708,
    "y":2684.5864477157593,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"eff505c0.4d80a8",
    "type":"outcome",
    "name":"NULL",
    "xml":"<outcome value=''>",
    "comments":"",
    "outputs":1,
    "x":1555.1189270019531,
    "y":2684.586483001709,
    "z":"e6090836.aef008",
    "wires":[
      [
        "15f50ec8.ae15e1"
      ]
    ]
  },
  {
    "id":"7ba4a75.88aab58",
    "type":"other",
    "name":"4",
    "xml":"<outcome value='4'>\n",
    "comments":"",
    "outputs":1,
    "x":1553.8808784484863,
    "y":2750.538625717163,
    "z":"e6090836.aef008",
    "wires":[
      [
        "77d24f8f.dfe93"
      ]
    ]
  },
  {
    "id":"9db64306.b784b",
    "type":"set",
    "name":"set network-information-index to 0",
    "xml":"<set>\n<parameter name='network-information-index' value='0' />\n",
    "comments":"",
    "x":1958.4521408081055,
    "y":2725.0624866485596,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"77d24f8f.dfe93",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":1721.0713539123535,
    "y":2749.872091293335,
    "z":"e6090836.aef008",
    "wires":[
      [
        "9db64306.b784b",
        "ae06599.ab8ada8"
      ]
    ]
  },
  {
    "id":"ae06599.ab8ada8",
    "type":"set",
    "name":"set ip-version 4, use-dhcp, and ip-count",
    "xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-information-items.network-information-item[$network-information-index].ip-version'\n   value='4' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-information-items.network-information-item[$network-information-index].use-dhcp'\n   value='`$db.vfc-to-network-role-mapping[$network-role-index].ipv4-use-dhcp`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-information-items.network-information-item[$network-information-index].ip-count'\n   value='`$db.vfc-to-network-role-mapping[$network-role-index].ipv4-count`' />\n",
    "comments":"",
    "x":1975.4047241210938,
    "y":2771.7294425964355,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"5a0fce27.0cc5",
    "type":"switchNode",
    "name":"switch ipv6-ip-version",
    "xml":"<switch test='`$db.vfc-to-network-role-mapping[$network-role-index].ipv6-ip-version`'>\n",
    "comments":"",
    "outputs":1,
    "x":1378.9286041259766,
    "y":2846.4911251068115,
    "z":"e6090836.aef008",
    "wires":[
      [
        "c42cc110.b1b6c",
        "3f79e3b9.76574c"
      ]
    ]
  },
  {
    "id":"c42cc110.b1b6c",
    "type":"outcome",
    "name":"NULL",
    "xml":"<outcome value=''>",
    "comments":"",
    "outputs":1,
    "x":1557.7380981445312,
    "y":2816.728937149048,
    "z":"e6090836.aef008",
    "wires":[
      [
        "804f081a.ae1078"
      ]
    ]
  },
  {
    "id":"3f79e3b9.76574c",
    "type":"other",
    "name":"6",
    "xml":"<outcome value='6'>\n",
    "comments":"",
    "outputs":1,
    "x":1559.1666526794434,
    "y":2881.0144939422607,
    "z":"e6090836.aef008",
    "wires":[
      [
        "a9db339d.d7ff6"
      ]
    ]
  },
  {
    "id":"dae18443.96dc88",
    "type":"set",
    "name":"increment network-information-index",
    "xml":"<set>\n<parameter name='network-information-index' value='`$network-information-index + 1`' />\n",
    "comments":"",
    "x":1964.880744934082,
    "y":2855.5385236740112,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"a9db339d.d7ff6",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":1714.4048118591309,
    "y":2880.0622329711914,
    "z":"e6090836.aef008",
    "wires":[
      [
        "dae18443.96dc88",
        "d1e2a302.f2a79"
      ]
    ]
  },
  {
    "id":"804f081a.ae1078",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1700.404727935791,
    "y":2816.0625553131104,
    "z":"e6090836.aef008",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"2cebaf.8e65f452",
    "type":"switchNode",
    "name":"switch network-information-index",
    "xml":"<switch test='`$network-information-index`'>\n",
    "comments":"",
    "outputs":1,
    "x":1414.166618347168,
    "y":2982.919370651245,
    "z":"e6090836.aef008",
    "wires":[
      [
        "65a0822f.ef5c1c",
        "83f08e39.d6a15"
      ]
    ]
  },
  {
    "id":"65a0822f.ef5c1c",
    "type":"outcome",
    "name":"-1",
    "xml":"<outcome value='-1'>",
    "comments":"",
    "outputs":1,
    "x":1632.4999752044678,
    "y":2959.5861167907715,
    "z":"e6090836.aef008",
    "wires":[
      [
        "19418e05.1e8042"
      ]
    ]
  },
  {
    "id":"83f08e39.d6a15",
    "type":"other",
    "name":"other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":1632.2619380950928,
    "y":3005.5384311676025,
    "z":"e6090836.aef008",
    "wires":[
      [
        "5955caa.70cc334"
      ]
    ]
  },
  {
    "id":"19418e05.1e8042",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1769.166690826416,
    "y":2957.919776916504,
    "z":"e6090836.aef008",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"5955caa.70cc334",
    "type":"set",
    "name":"set network-information-item_length",
    "xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-information-items.network-information-item_length'\n   value='`$network-information-index + 1`' />\n",
    "comments":"",
    "x":1860.8333053588867,
    "y":3002.919569015503,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"b0ef8497.4ea668",
    "type":"for",
    "name":"for each vm-type",
    "xml":"<for index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n",
    "comments":"",
    "outputs":1,
    "x":541,
    "y":3149.9194660186768,
    "z":"e6090836.aef008",
    "wires":[
      [
        "fe06fed9.aff3e"
      ]
    ]
  },
  {
    "id":"fe06fed9.aff3e",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":744.5715255737305,
    "y":3150.1576709747314,
    "z":"e6090836.aef008",
    "wires":[
      [
        "d04bd80b.387cf8"
      ]
    ]
  },
  {
    "id":"c8e0f30f.8d5d8",
    "type":"set",
    "name":"save network-id",
    "xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-id'\n  value='`$service-data.networks.network[$idx].network-data.network-topology.network-topology-identifier-structure.network-id`' />\n",
    "comments":"This isn't a node in MD-SAL, but we need to save this for later when we are doing EIPAM processing",
    "x":1357.9761810302734,
    "y":2586.253023147583,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"d04bd80b.387cf8",
    "type":"for",
    "name":"for each network-role",
    "xml":"<for index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network_length`' >\n",
    "comments":"",
    "outputs":1,
    "x":945.999885559082,
    "y":3149.252721786499,
    "z":"e6090836.aef008",
    "wires":[
      [
        "5ff438d4.980868"
      ]
    ]
  },
  {
    "id":"5ff438d4.980868",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":1147.9047012329102,
    "y":3148.490758895874,
    "z":"e6090836.aef008",
    "wires":[
      [
        "5c7949ed.12f198"
      ]
    ]
  },
  {
    "id":"5c7949ed.12f198",
    "type":"for",
    "name":"for each network-information-item",
    "xml":"<for index='ip-version-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-information-items.network-information-item_length`' >\n",
    "comments":"",
    "outputs":1,
    "x":1392.6665725708008,
    "y":3148.0151510238647,
    "z":"e6090836.aef008",
    "wires":[
      [
        "3c49e4a4.13796c"
      ]
    ]
  },
  {
    "id":"97b8ba37.35fdb8",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":637.666633605957,
    "y":3353.9195766448975,
    "z":"e6090836.aef008",
    "wires":[
      [
        "c20748cc.14a758",
        "f73ba212.a9db1",
        "eccb2ab1.4ecf58",
        "6c51c35e.c8107c",
        "373238a0.60e488"
      ]
    ]
  },
  {
    "id":"c20748cc.14a758",
    "type":"get-resource",
    "name":"get-resource EIPAM_IP_SUBNETS",
    "xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from EIPAM_IP_SUBNETS WHERE network_id = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-id\n    AND address_family = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-information-items.network-information-item[$ip-version-index].ip-version'\n  pfx='db.eipam-ip-subnets[]'>\n\n",
    "comments":"",
    "outputs":1,
    "x":1017.6666564941406,
    "y":3315.586072921753,
    "z":"e6090836.aef008",
    "wires":[
      [
        "e7cc33.f38f63d",
        "6e4ec0e0.26982"
      ]
    ]
  },
  {
    "id":"1c2857df.d8b0a8",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No entries found in EIPAM_IP_SUBNETS table for network ID '\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-id\n        + ' and address family ' + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-information-items.network-information-item[$ip-version-index].ip-version`\" />\n",
    "comments":"",
    "x":1407.6665954589844,
    "y":3337.2528343200684,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"e7cc33.f38f63d",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":1233.0238647460938,
    "y":3293.205192565918,
    "z":"e6090836.aef008",
    "wires":[
      [
        "6c1c41f9.cb5ac"
      ]
    ]
  },
  {
    "id":"6e4ec0e0.26982",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":1241.5952949523926,
    "y":3337.4909057617188,
    "z":"e6090836.aef008",
    "wires":[
      [
        "1c2857df.d8b0a8"
      ]
    ]
  },
  {
    "id":"6c1c41f9.cb5ac",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading EIPAM_IP_SUBNETS table\" />\n",
    "comments":"",
    "x":1408.023796081543,
    "y":3292.348093032837,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"f73ba212.a9db1",
    "type":"for",
    "name":"for each record in EIPAM_IP_SUBNETS",
    "xml":"<for index='subnets-index' start='0' end='`$db.eipam-ip-subnets_length`' >\n",
    "comments":"",
    "outputs":1,
    "x":1036.9524688720703,
    "y":3620.82426071167,
    "z":"e6090836.aef008",
    "wires":[
      [
        "48786485.afdfcc"
      ]
    ]
  },
  {
    "id":"48786485.afdfcc",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":1293.3810195922852,
    "y":3621.77654838562,
    "z":"e6090836.aef008",
    "wires":[
      [
        "76f82048.a92cb",
        "564032f0.dfbc3c",
        "a8b83f38.2b35f",
        "802baf6d.dddb5",
        "d69aacbb.b1933"
      ]
    ]
  },
  {
    "id":"76f82048.a92cb",
    "type":"get-resource",
    "name":"get-resource EIPAM_IP_SUBNET_KEYS",
    "xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from EIPAM_IP_SUBNET_KEYS WHERE entity_id = $db.eipam-ip-subnets[$subnets-index].entity-id'\n  pfx='db.eipam-ip-subnet-keys[]'>\n\n",
    "comments":"",
    "outputs":1,
    "x":1604.809585571289,
    "y":3458.205156326294,
    "z":"e6090836.aef008",
    "wires":[
      [
        "5c773ab4.c1c354",
        "76282e7d.401a9"
      ]
    ]
  },
  {
    "id":"ea3f166e.9742f8",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No entries found in EIPAM_IP_SUBNET_KEYS table for entity ID '\n        + $db.eipam-ip-subnets[$subnets-index].entity-id`\" />",
    "comments":"",
    "x":2019.809585571289,
    "y":3478.205156326294,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"5c773ab4.c1c354",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":1845.1668548583984,
    "y":3434.1575145721436,
    "z":"e6090836.aef008",
    "wires":[
      [
        "a89d01a.87957"
      ]
    ]
  },
  {
    "id":"76282e7d.401a9",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":1853.7382850646973,
    "y":3478.4432277679443,
    "z":"e6090836.aef008",
    "wires":[
      [
        "ea3f166e.9742f8"
      ]
    ]
  },
  {
    "id":"a89d01a.87957",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading EIPAM_IP_SUBNET_KEYS table\" />\n",
    "comments":"",
    "x":2020.1667861938477,
    "y":3433.3004150390625,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"eccb2ab1.4ecf58",
    "type":"set",
    "name":"set max-level to -1",
    "xml":"<set>\n<parameter name='max-level' value='-1' />\n",
    "comments":"",
    "x":965.7619323730469,
    "y":3381.538688659668,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"564032f0.dfbc3c",
    "type":"for",
    "name":"for each record in EIPAM_IP_SUBNET_KEYS",
    "xml":"<for index='keys-index' start='0' end='`$db.eipam-ip-subnet-keys_length`' >\n",
    "comments":"",
    "outputs":1,
    "x":1619.3334045410156,
    "y":3527.2529106140137,
    "z":"e6090836.aef008",
    "wires":[
      [
        "96321389.4c73f"
      ]
    ]
  },
  {
    "id":"96321389.4c73f",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":1906.0000534057617,
    "y":3525.586248397827,
    "z":"e6090836.aef008",
    "wires":[
      [
        "2d3eea0b.50e1e6"
      ]
    ]
  },
  {
    "id":"2d3eea0b.50e1e6",
    "type":"switchNode",
    "name":"switch level > max-level?",
    "xml":"<switch test='`$db.eipam-ip-subnet-keys[$keys-index].level &gt; $max-level`'>\n",
    "comments":"",
    "outputs":1,
    "x":2122.6666717529297,
    "y":3525.586166381836,
    "z":"e6090836.aef008",
    "wires":[
      [
        "c87a6e6.e044e9"
      ]
    ]
  },
  {
    "id":"c87a6e6.e044e9",
    "type":"outcomeTrue",
    "name":"true",
    "xml":"<outcome value='true'>\n",
    "comments":"",
    "outputs":1,
    "x":2314.333599090576,
    "y":3525.58616065979,
    "z":"e6090836.aef008",
    "wires":[
      [
        "f7e5553.b6c1fa8"
      ]
    ]
  },
  {
    "id":"f7e5553.b6c1fa8",
    "type":"set",
    "name":"set max-level, selected-entity-id, selected-plan-name",
    "xml":"<set>\n<parameter name='max-level' value='`$db.eipam-ip-subnet-keys[$keys-index].level`' />\n<parameter name='selected-entity-id' value='`$db.eipam-ip-subnet-keys[$keys-index].entity-id`' />\n<parameter name='selected-plan-name' value='`$db.eipam-ip-subnets[$subnets-index].plan-name`' />\n",
    "comments":"",
    "x":2606.0001068115234,
    "y":3523.9194173812866,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"a8b83f38.2b35f",
    "type":"get-resource",
    "name":"get-resource EIPAM_IP_SUBNET_KEYS",
    "xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from EIPAM_IP_SUBNET_KEYS WHERE entity_id = $selected-entity-id order by level'\n  pfx='db.eipam-ip-subnet-keys[]'>\n\n",
    "comments":"",
    "outputs":1,
    "x":1606.000015258789,
    "y":3599.157615661621,
    "z":"e6090836.aef008",
    "wires":[
      [
        "d369bc07.5b51d",
        "ce7c7e60.3e34b"
      ]
    ]
  },
  {
    "id":"7b19e8c7.72e078",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No entries found in EIPAM_IP_SUBNET_KEYS table for entity ID '\n        + $selected-entity-id`\" />",
    "comments":"",
    "x":2021.000015258789,
    "y":3619.157615661621,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"d369bc07.5b51d",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":1846.3572845458984,
    "y":3575.1099739074707,
    "z":"e6090836.aef008",
    "wires":[
      [
        "404aa28f.128f4c"
      ]
    ]
  },
  {
    "id":"ce7c7e60.3e34b",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":1854.9287147521973,
    "y":3619.3956871032715,
    "z":"e6090836.aef008",
    "wires":[
      [
        "7b19e8c7.72e078"
      ]
    ]
  },
  {
    "id":"404aa28f.128f4c",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading EIPAM_IP_SUBNET_KEYS table\" />\n",
    "comments":"",
    "x":2021.3572158813477,
    "y":3574.2528743743896,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"f31caaf8.dddbb8",
    "type":"for",
    "name":"for each record in EIPAM_IP_SUBNET_KEYS",
    "xml":"<for index='level-index' start='0' end='`$db.eipam-ip-subnet-keys_length`' >\n",
    "comments":"",
    "outputs":1,
    "x":2051.952362060547,
    "y":3667.729072570801,
    "z":"e6090836.aef008",
    "wires":[
      [
        "b8b8da21.b44008"
      ]
    ]
  },
  {
    "id":"b21661ec.87447",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":1744.8093643188477,
    "y":3751.5385093688965,
    "z":"e6090836.aef008",
    "wires":[
      [
        "f31caaf8.dddbb8",
        "18077655.54097a",
        "b9fd5f75.b5e8a",
        "df5529a.8c63fd8",
        "863bfcf2.a453f"
      ]
    ]
  },
  {
    "id":"802baf6d.dddb5",
    "type":"for",
    "name":"for each ip in ip-count",
    "xml":"<for index='request-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-information-items.network-information-item[$ip-version-index].ip-count`' >\n",
    "comments":"",
    "outputs":1,
    "x":1543.142807006836,
    "y":3751.5401363372803,
    "z":"e6090836.aef008",
    "wires":[
      [
        "b21661ec.87447"
      ]
    ]
  },
  {
    "id":"b8b8da21.b44008",
    "type":"set",
    "name":"set eipam data for level",
    "xml":"<set>\n<parameter name='eipam-ip-block.plans[$plans-index].requests[$request-index].pools[$level-index].key-name'\n   value='`$db.eipam-ip-subnet-keys[$level-index].key-name`' />\n<parameter name='eipam-ip-block.plans[$plans-index].requests[$request-index].pools[$level-index].key-value'\n   value='`$db.eipam-ip-subnet-keys[$level-index].key-value`' />\n",
    "comments":"",
    "x":2358.8571243286133,
    "y":3667.4918384552,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"18077655.54097a",
    "type":"set",
    "name":"set eipam data pools_length",
    "xml":"<set>\n<parameter name='eipam-ip-block.plans[$plans-index].requests[$request-index].pools_length'\n   value='`$db.eipam-ip-subnet-keys_length`' />\n",
    "comments":"",
    "x":1998.142677307129,
    "y":3713.2054557800293,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"3ab291c1.7ed19e",
    "type":"set",
    "name":"set plans-index to 0",
    "xml":"<set>\n<parameter name='plans-index' value='0' />\n",
    "comments":"",
    "x":549.7619171142578,
    "y":3093.8717365264893,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"6c51c35e.c8107c",
    "type":"set",
    "name":"increment plans-index",
    "xml":"<set>\n<parameter name='plans-index' value='`$plans-index + 1`' />\n",
    "comments":"",
    "x":981.0952224731445,
    "y":4012.871983528137,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"d69aacbb.b1933",
    "type":"set",
    "name":"set eipam requests_length",
    "xml":"<set>\n<parameter name='eipam-ip-block.plans[$plans-index].requests_length'\n   value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-information-items.network-information-item[$ip-version-index].ip-count`' />\n",
    "comments":"",
    "x":1553.6191711425781,
    "y":3893.2055082321167,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"373238a0.60e488",
    "type":"set",
    "name":"set eipam plan-name, address-family",
    "xml":"<set>\n<parameter name='eipam-ip-block.plans[$plans-index].plan-name' value='`$selected-plan-name`' />\n<parameter name='eipam-ip-block.plans[$plans-index].address-family'\n   value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-information-items.network-information-item[$ip-version-index].ip-version`' />\n",
    "comments":"",
    "x":1029.6666564941406,
    "y":3965.7284650802612,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"8923d8d0.f4b338",
    "type":"set",
    "name":"set eipam plans_length",
    "xml":"<set>\n<parameter name='eipam-ip-block.plans_length' value='`$plans-index`' />\n",
    "comments":"",
    "x":553.4285697937012,
    "y":4037.919857978821,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"4f613c00.2b7644",
    "type":"returnSuccess",
    "name":"return success",
    "xml":"<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments":"",
    "x":512.7975616455078,
    "y":5113.011030197144,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"39e9e85.a687718",
    "type":"set",
    "name":"copy input data",
    "xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.sdnc-request-header.'\n   value='$vf-module-topology-operation-input.sdnc-request-header.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.request-information.'\n   value='$vf-module-topology-operation-input.request-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.service-information.'\n   value='$vf-module-topology-operation-input.service-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vnf-information.'\n   value='$vf-module-topology-operation-input.vnf-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-information.'\n   value='$vf-module-topology-operation-input.vf-module-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-request-input.'\n   value='$vf-module-topology-operation-input.vf-module-request-input.' />\n\n",
    "comments":"",
    "x":524.5832290649414,
    "y":4888.990794181824,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"dfa4db2.9778928",
    "type":"set",
    "name":"copy vf-module-topology data",
    "xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.' value='$tmp.vf-module-topology.' />\n",
    "comments":"",
    "x":569.4642333984375,
    "y":4840.776306152344,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"ff59520e.ec557",
    "type":"execute",
    "name":"printContext",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vfmodule.log' />\n",
    "comments":"",
    "outputs":1,
    "x":507.6785125732422,
    "y":5065.240846633911,
    "z":"e6090836.aef008",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"26166f96.2f2dc",
    "type":"execute",
    "name":"call EIPAM assignIPAddress",
    "xml":"<execute plugin=\"com.att.sdnctl.sli.plugin.eipam.EIPAMPlugin\" method=\"assignIPAddress\">",
    "comments":"",
    "outputs":1,
    "x":933.5952911376953,
    "y":4126.880926132202,
    "z":"e6090836.aef008",
    "wires":[
      [
        "3cca0436.97a71c"
      ]
    ]
  },
  {
    "id":"3cca0436.97a71c",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>",
    "outputs":1,
    "x":1147.5952911376953,
    "y":4126.880926132202,
    "z":"e6090836.aef008",
    "wires":[
      [
        "3c2970af.d2cab"
      ]
    ]
  },
  {
    "id":"3c2970af.d2cab",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"An error occured while obtaining new address blocks from EIPAM.\" />\n",
    "comments":"",
    "x":1286.5952911376953,
    "y":4126.880926132202,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"b9fd5f75.b5e8a",
    "type":"set",
    "name":"set eipam client-key, mask",
    "xml":"<set>\n<parameter name='eipam-ip-block.plans[$plans-index].requests[$request-index].client-key'\n   value='`$generate-unique-name-output.generated-name`' />\n<parameter name='eipam-ip-block.plans[$plans-index].requests[$request-index].info'\n   value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id`' />\n<parameter name='eipam-ip-block.plans[$plans-index].requests[$request-index].mask'\n   value='32' />\n",
    "comments":"",
    "x":1995.2857284545898,
    "y":3847.015483856201,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"7ae88bfe.f72b94",
    "type":"for",
    "name":"for each vm-type",
    "xml":"<for index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n",
    "comments":"",
    "outputs":1,
    "x":533,
    "y":4236.252558708191,
    "z":"e6090836.aef008",
    "wires":[
      [
        "42f93af5.a0fff4"
      ]
    ]
  },
  {
    "id":"42f93af5.a0fff4",
    "type":"for",
    "name":"for each vm-network",
    "xml":"<for index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network_length`' >\n",
    "comments":"",
    "outputs":1,
    "x":741.6666831970215,
    "y":4236.252884864807,
    "z":"e6090836.aef008",
    "wires":[
      [
        "75df27a.fd89ad8"
      ]
    ]
  },
  {
    "id":"75df27a.fd89ad8",
    "type":"for",
    "name":"for each network-information-item",
    "xml":"<for index='ip-version-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-information-items.network-information-item_length`' >\n",
    "comments":"",
    "outputs":1,
    "x":1006.6666717529297,
    "y":4237.919226646423,
    "z":"e6090836.aef008",
    "wires":[
      [
        "fd735d1.2d1f0a"
      ]
    ]
  },
  {
    "id":"14f4699d.ce7016",
    "type":"set",
    "name":"set plans-index = 0",
    "xml":"<set>\n<parameter name='plans-index' value='0' />\n",
    "comments":"",
    "x":539.9999923706055,
    "y":4181.252646446228,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"2d342044.e7473",
    "type":"for",
    "name":"for each eipam request",
    "xml":"<for index='ip-index' start='0' end='`$eipam-ip-block.plans[$plans-index].requests_length`' >\n",
    "comments":"",
    "outputs":1,
    "x":1776.6666259765625,
    "y":4209.586531639099,
    "z":"e6090836.aef008",
    "wires":[
      [
        "c211fc94.3e7ba"
      ]
    ]
  },
  {
    "id":"c211fc94.3e7ba",
    "type":"set",
    "name":"set ip address",
    "xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-information-items.network-information-item[$ip-version-index].network-ips.network-ip[$ip-index]'\n  value='`$eipam-ip-block.plans[$plans-index].requests[$ip-index].ip-prefix`' />\n",
    "comments":"",
    "x":1988.3332633972168,
    "y":4207.919702529907,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"bffc2bb7.1135f8",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":1576.6664581298828,
    "y":4234.586045265198,
    "z":"e6090836.aef008",
    "wires":[
      [
        "2d342044.e7473",
        "2cedc5a4.ab6bba"
      ]
    ]
  },
  {
    "id":"2cedc5a4.ab6bba",
    "type":"set",
    "name":"increment plans-index",
    "xml":"<set>\n<parameter name='plans-index' value='`$plans-index + 1`' />\n",
    "comments":"",
    "x":1771.66650390625,
    "y":4256.252387046814,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"1f69056.fe181fb",
    "type":"save",
    "name":"update vf-module",
    "xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vf-module\"\n   key=\"vf-module.vf-module-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id\n      AND generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"vf-module-name\" value=\"`$tmp.vf-module-topology.vf-module-topology-identifier.vf-module-name`\" />\n<parameter name=\"model-invariant-id\" value=\"`$tmp.vf-module-topology.onap-model-information.model-invariant-uuid`\" />\n<parameter name=\"model-version-id\" value=\"`$tmp.vf-module-topology.onap-model-information.model-uuid`\" />\n<parameter name=\"model-customization-id\" value=\"`$tmp.vf-module-topology.onap-model-information.model-customization-uuid`\" />\n<parameter name=\"selflink\" value=\"`$vf-module-object-path`\" />\n",
    "comments":"",
    "outputs":1,
    "x":534.9999694824219,
    "y":4381.252729415894,
    "z":"e6090836.aef008",
    "wires":[
      [
        "80694bdc.1daa28",
        "7fffbd12.aef484"
      ]
    ]
  },
  {
    "id":"753f20c5.bbede",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No vf-module found in AAI for vf module ID ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id`\" />\n",
    "comments":"",
    "x":1028.333396911621,
    "y":4434.585899353027,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"80694bdc.1daa28",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":704.3573303222656,
    "y":4348.204874038696,
    "z":"e6090836.aef008",
    "wires":[
      [
        "1dc4fe5.fac6902"
      ]
    ]
  },
  {
    "id":"7fffbd12.aef484",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":712.9286842346191,
    "y":4410.823854446411,
    "z":"e6090836.aef008",
    "wires":[
      [
        "34139b45.2d0504"
      ]
    ]
  },
  {
    "id":"8f30d2e9.eb03c",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vf-module in AAI\" />\n",
    "comments":"",
    "x":1039.3572845458984,
    "y":4366.348430633545,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"aa1a950e.7071b8",
    "type":"set",
    "name":"set vf-module-object-path",
    "xml":"<set>\n<parameter name='vf-module-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $service-data.service-topology.service-topology-identifier.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vf-modules/vf-module/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id\n + '/vf-module-data/vf-module-topology/'`\"/>\n\n",
    "comments":"",
    "x":561.666633605957,
    "y":4306.252715110779,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"df808ad1.2e9658",
    "type":"save",
    "name":"save vf-module relationships",
    "xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vf-module:relationship-list\"\n   key=\"vf-module.vf-module-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id\n      AND generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"l3-network.network-id\" />\n    <parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-id`\" />\n",
    "comments":"",
    "outputs":1,
    "x":994.3094787597656,
    "y":4509.975717544556,
    "z":"e6090836.aef008",
    "wires":[
      [
        "64c1b4ac.c2087c",
        "f9da1963.2589e8"
      ]
    ]
  },
  {
    "id":"64c1b4ac.c2087c",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":1219.1428108215332,
    "y":4470.847640037537,
    "z":"e6090836.aef008",
    "wires":[
      [
        "e705dca.d8b482"
      ]
    ]
  },
  {
    "id":"f9da1963.2589e8",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":1227.7142639160156,
    "y":4548.466782569885,
    "z":"e6090836.aef008",
    "wires":[
      [
        "76421cc4.4bff94"
      ]
    ]
  },
  {
    "id":"8b99afe7.e214",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vf-module relationships in AAI\" />\n",
    "comments":"",
    "x":1554.1429443359375,
    "y":4490.657536506653,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"19070089.9bb2ff",
    "type":"for",
    "name":"for each vm-type",
    "xml":"<for index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n",
    "comments":"",
    "outputs":1,
    "x":535.3095092773438,
    "y":4511.642220497131,
    "z":"e6090836.aef008",
    "wires":[
      [
        "4fc0dd78.6aaf84"
      ]
    ]
  },
  {
    "id":"4fc0dd78.6aaf84",
    "type":"for",
    "name":"for each vm-network",
    "xml":"<for index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network_length`' >\n",
    "comments":"",
    "outputs":1,
    "x":745.9761867523193,
    "y":4509.976043701172,
    "z":"e6090836.aef008",
    "wires":[
      [
        "df808ad1.2e9658"
      ]
    ]
  },
  {
    "id":"a464ded4.4fcf4",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No vf-module found in AAI for vf module ID ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id`\" />\n",
    "comments":"",
    "x":1555.9762382507324,
    "y":4565.642075538635,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"d1e2a302.f2a79",
    "type":"set",
    "name":"set ip-version 6, use-dhcp, and ip-count",
    "xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-information-items.network-information-item[$network-information-index].ip-version'\n   value='6' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-information-items.network-information-item[$network-information-index].use-dhcp'\n   value='`$db.vfc-to-network-role-mapping[$network-role-index].ipv6-use-dhcp`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-information-items.network-information-item[$network-information-index].ip-count'\n   value='`$db.vfc-to-network-role-mapping[$network-role-index].ipv6-count`' />\n",
    "comments":"",
    "x":1974.7857208251953,
    "y":2900.213849067688,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"3c49e4a4.13796c",
    "type":"switchNode",
    "name":"switch use-dhcp",
    "xml":"<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-information-items.network-information-item[$ip-version-index].use-dhcp`'>\n",
    "comments":"",
    "outputs":1,
    "x":1640.500114440918,
    "y":3147.356598854065,
    "z":"e6090836.aef008",
    "wires":[
      [
        "2413eb81.677464"
      ]
    ]
  },
  {
    "id":"2413eb81.677464",
    "type":"outcome",
    "name":"N",
    "xml":"<outcome value='N'>\n",
    "comments":"",
    "outputs":1,
    "x":1810.5000267028809,
    "y":3145.928201675415,
    "z":"e6090836.aef008",
    "wires":[
      [
        "97b8ba37.35fdb8"
      ]
    ]
  },
  {
    "id":"fd735d1.2d1f0a",
    "type":"switchNode",
    "name":"switch use-dhcp",
    "xml":"<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-information-items.network-information-item[$ip-version-index].use-dhcp`'>\n",
    "comments":"",
    "outputs":1,
    "x":1247.642837524414,
    "y":4236.642521858215,
    "z":"e6090836.aef008",
    "wires":[
      [
        "b5446bac.ef4728"
      ]
    ]
  },
  {
    "id":"b5446bac.ef4728",
    "type":"outcome",
    "name":"N",
    "xml":"<outcome value='N'>\n",
    "comments":"",
    "outputs":1,
    "x":1417.642749786377,
    "y":4235.214124679565,
    "z":"e6090836.aef008",
    "wires":[
      [
        "bffc2bb7.1135f8"
      ]
    ]
  },
  {
    "id":"a2e18bff.138e78",
    "type":"for",
    "name":"for each vm-type",
    "xml":"<for index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n",
    "comments":"",
    "outputs":1,
    "x":534.309455871582,
    "y":4641.642714500427,
    "z":"e6090836.aef008",
    "wires":[
      [
        "2e24847f.54fa9c"
      ]
    ]
  },
  {
    "id":"2e24847f.54fa9c",
    "type":"for",
    "name":"for each vm",
    "xml":"<for index='vm-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-count`' >\n",
    "comments":"",
    "outputs":1,
    "x":729.3094863891602,
    "y":4640.975722312927,
    "z":"e6090836.aef008",
    "wires":[
      [
        "2284873e.c8dbc8"
      ]
    ]
  },
  {
    "id":"cae20484.4fdb28",
    "type":"save",
    "name":"save VIPR_CONFIGURATION",
    "xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource\" resource=\"SQL\"\nkey=\"INSERT INTO VIPR_CONFIGURATION (vnf_id, vnf_name, ecomp_service_instance_id, vm_name, cloud_region_id, cloud_owner) VALUES ( $service-data.vnfs.vnf[$vnf-index].vnf-id , $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.vnf-name , $service-data.service-information.service-instance-id , $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vm-name[$vm-index] , $tmp.vf-module-topology.aic-cloud-region , 'CloudOwner')\" >",
    "comments":"",
    "outputs":1,
    "x":1120.976188659668,
    "y":4663.643372535706,
    "z":"e6090836.aef008",
    "wires":[
      [
        "4d4ebb0a.8e16a4"
      ]
    ]
  },
  {
    "id":"317d3d10.b08102",
    "type":"comment",
    "name":"Not a failure",
    "info":"",
    "comments":"",
    "x":1640.976089477539,
    "y":4663.643377304077,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"4d4ebb0a.8e16a4",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":1330.976173400879,
    "y":4663.643522262573,
    "z":"e6090836.aef008",
    "wires":[
      [
        "6df75797.6cb868"
      ]
    ]
  },
  {
    "id":"6df75797.6cb868",
    "type":"record",
    "name":"record",
    "xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API.vf-module-topology-operation-assign:REQID\"/>\n<parameter name=\"field3\" value=\"`$vf-module-topology-operation-input.sdnc-request-header.svc-request-id`\"/>\n<parameter name=\"field4\" value=\"Failed to insert VIPR_CONFIGURATION record\"/>\n",
    "comments":"",
    "outputs":1,
    "x":1474.3096160888672,
    "y":4663.643360137939,
    "z":"e6090836.aef008",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"863bfcf2.a453f",
    "type":"call",
    "name":"call GENERIC-RESOURCE-API:generate-unique-name",
    "xml":"<call module='GENERIC-RESOURCE-API' rpc='generate-unique-name' mode='sync' >\n",
    "comments":"",
    "outputs":1,
    "x":2084.3094940185547,
    "y":3801.641947746277,
    "z":"e6090836.aef008",
    "wires":[
      [
        "41e4565d.44f878"
      ]
    ]
  },
  {
    "id":"41e4565d.44f878",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":2371.6905364990234,
    "y":3799.4993686676025,
    "z":"e6090836.aef008",
    "wires":[
      [
        "892fb77a.70d198"
      ]
    ]
  },
  {
    "id":"df5529a.8c63fd8",
    "type":"set",
    "name":"set variables for generating unique name",
    "xml":"<set>\n<parameter name='generate-unique-name-input.index-table-name' value='EIPAM_CLIENT_KEY_INDEX' />\n<parameter name='generate-unique-name-input.index-table-prefix-column' value='vnf_name_prefix' />\n<parameter name='generate-unique-name-input.name-table-type' value='CLIENT_KEY' />\n<parameter name='generate-unique-name-input.prefix' value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.vnf-name + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-naming-code + ':' + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-id + ':' + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-information-items.network-information-item[$ip-version-index].ip-version + ':'`\" />\n<parameter name='generate-unique-name-input.index-length' value='' />\n",
    "comments":"",
    "x":2037.6428260803223,
    "y":3756.6421089172363,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"892fb77a.70d198",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`$generate-unique-name-output.error-message`\" />\n",
    "comments":"",
    "x":2539.547649383545,
    "y":3798.9278802871704,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"18e532bb.94aa6d",
    "type":"switchNode",
    "name":"switch ecomp-generated-naming == 'Y'",
    "xml":"<switch test=\"$db.vfc-model.ecomp-generated-naming == 'Y'\">\n",
    "comments":"",
    "outputs":1,
    "x":1014.3095626831055,
    "y":2063.309280395508,
    "z":"e6090836.aef008",
    "wires":[
      [
        "87402ff0.1c134"
      ]
    ]
  },
  {
    "id":"87402ff0.1c134",
    "type":"outcomeFalse",
    "name":"false",
    "xml":"<outcome value='false'>\n",
    "comments":"",
    "outputs":1,
    "x":1245.976173400879,
    "y":2062.3089113235474,
    "z":"e6090836.aef008",
    "wires":[
      [
        "92edfbd1.110d28"
      ]
    ]
  },
  {
    "id":"92edfbd1.110d28",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'ECOMP generated naming is not Y for VFC customization UUID ' + $db.vf-module-to-vfc-mapping[$db-vm-index].vfc_customization_uuid`\" />\n",
    "comments":"",
    "x":1392.6429138183594,
    "y":2061.6423664093018,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"127d9e0e.3be312",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":1504.3097381591797,
    "y":4614.975073814392,
    "z":"e6090836.aef008",
    "wires":[
      [
        "d222b70d.a58a58"
      ]
    ]
  },
  {
    "id":"4cc71899.b3ae38",
    "type":"comment",
    "name":"Not a failure",
    "info":"",
    "comments":"",
    "x":1827.6427917480469,
    "y":4613.308896064758,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"d222b70d.a58a58",
    "type":"record",
    "name":"record",
    "xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API.vf-module-topology-operation-assign:REQID\"/>\n<parameter name=\"field3\" value=\"`$vf-module-topology-operation-input.sdnc-request-header.svc-request-id`\"/>\n<parameter name=\"field4\" value=\"Failed to insert VIPR_CONFIGURATION record\"/>\n",
    "comments":"",
    "outputs":1,
    "x":1650.3096733093262,
    "y":4614.975707054138,
    "z":"e6090836.aef008",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"2284873e.c8dbc8",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":897.642879486084,
    "y":4639.975566864014,
    "z":"e6090836.aef008",
    "wires":[
      [
        "a73701c2.3e09c",
        "cae20484.4fdb28"
      ]
    ]
  },
  {
    "id":"a73701c2.3e09c",
    "type":"delete",
    "name":"delete any pre-existing records in VIPR_CONFIGURATION",
    "xml":"<delete plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='DELETE from VIPR_CONFIGURATION WHERE vnf_id = $service-data.vnfs.vnf[$vnf-index].vnf-id\n     AND ecomp_service_instance_id = $service-data.service-information.service-instance-id\n     AND vm_name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vm-name[$vm-index]' >",
    "comments":"",
    "outputs":1,
    "x":1210.976203918457,
    "y":4615.309706687927,
    "z":"e6090836.aef008",
    "wires":[
      [
        "127d9e0e.3be312"
      ]
    ]
  },
  {
    "id":"68800eba.46188",
    "type":"update",
    "name":"update EIPAM_IP_ASSIGNMENTS to PENDING_DELETE...",
    "xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource\" resource=\"SQL\"\nkey=\"UPDATE EIPAM_IP_ASSIGNMENTS set status = $tmp.status WHERE info = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-topology-identifier.vf-module-id\" >",
    "comments":"",
    "outputs":1,
    "x":2917.6429481506348,
    "y":4251.64261007309,
    "z":"e6090836.aef008",
    "wires":[
      [
        "7301d98d.3c90a8"
      ]
    ]
  },
  {
    "id":"b6002bec.a5ed88",
    "type":"set",
    "name":"set status variable",
    "xml":"<set>\n<parameter name='tmp.status' value=\"`'PENDING_DELETE_' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-topology-identifier.vf-module-id`\" />\n",
    "comments":"",
    "x":2787.642910003662,
    "y":4204.9759821891785,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"7301d98d.3c90a8",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":3222.6428565979004,
    "y":4249.97590970993,
    "z":"e6090836.aef008",
    "wires":[
      [
        "4d39b53.eeb304c"
      ]
    ]
  },
  {
    "id":"4d39b53.eeb304c",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating EIPAM_IP_ASSIGNMENTS table on rollback\" />\n",
    "comments":"",
    "x":3412.6428833007812,
    "y":4249.785645008087,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"72df2a3e.4251b4",
    "type":"execute",
    "name":"execute EIPAM unassign IP addresses",
    "xml":"<execute plugin=\"com.att.sdnctl.sli.plugin.eipam.EIPAMPlugin\" method=\"unassignIPAddress\">\n<parameter name=\"deleteEIPAM_status\" value=\"`$tmp.status`\" />\n",
    "comments":"",
    "outputs":1,
    "x":2852.6429176330566,
    "y":4296.642653942108,
    "z":"e6090836.aef008",
    "wires":[
      [
        "77b8e820.4a3988"
      ]
    ]
  },
  {
    "id":"77b8e820.4a3988",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":3089.309543609619,
    "y":4296.642596721649,
    "z":"e6090836.aef008",
    "wires":[
      [
        "89dbd50f.fd7c38"
      ]
    ]
  },
  {
    "id":"89dbd50f.fd7c38",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error in EIPAM unassign IP address on rollback\" />\n",
    "comments":"",
    "x":3279.3095703125,
    "y":4296.452332019806,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"54652b75.46fe04",
    "type":"comment",
    "name":"roll back EIPAM",
    "info":"",
    "comments":"",
    "x":2762.6429481506348,
    "y":4151.642935593923,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"2bdf3ccf.849b44",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":2594.3095741271973,
    "y":4254.97610616684,
    "z":"e6090836.aef008",
    "wires":[
      [
        "b6002bec.a5ed88",
        "68800eba.46188",
        "72df2a3e.4251b4"
      ]
    ]
  },
  {
    "id":"1dc4fe5.fac6902",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":862.6428985595703,
    "y":4347.975544929504,
    "z":"e6090836.aef008",
    "wires":[
      [
        "8f30d2e9.eb03c",
        "b9241d04.9c139"
      ]
    ]
  },
  {
    "id":"34139b45.2d0504",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":867.6428375244141,
    "y":4410.641888618469,
    "z":"e6090836.aef008",
    "wires":[
      [
        "753f20c5.bbede",
        "b9241d04.9c139"
      ]
    ]
  },
  {
    "id":"e705dca.d8b482",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":1387.6428146362305,
    "y":4470.641909599304,
    "z":"e6090836.aef008",
    "wires":[
      [
        "8b99afe7.e214",
        "b9241d04.9c139"
      ]
    ]
  },
  {
    "id":"76421cc4.4bff94",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":1382.642734527588,
    "y":4548.641750335693,
    "z":"e6090836.aef008",
    "wires":[
      [
        "a464ded4.4fcf4",
        "b9241d04.9c139"
      ]
    ]
  },
  {
    "id":"f2ed6314.ee329",
    "type":"set",
    "name":"set vf-module-to-vfc-mapping length to 0",
    "xml":"<set>\n<parameter name='db.vf-module-to-vfc-mapping_length' value='0' />\n",
    "comments":"",
    "x":1161.500099182129,
    "y":1896.9280138015747,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"16f89ad6.193655",
    "type":"set",
    "name":"set vfc-to-network-role-mapping length to 0",
    "xml":"<set>\n<parameter name='db.vfc-to-network-role-mapping_length' value='0' />\n",
    "comments":"",
    "x":1614.7857818603516,
    "y":2375.9280395507812,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"454e063f.718d08",
    "type":"switchNode",
    "name":"switch plans-index > 0",
    "xml":"<switch test='`$plans-index &gt; 0`'>\n",
    "comments":"",
    "outputs":1,
    "x":550.5000762939453,
    "y":4127.356512069702,
    "z":"e6090836.aef008",
    "wires":[
      [
        "7b0f806f.b0b31"
      ]
    ]
  },
  {
    "id":"7b0f806f.b0b31",
    "type":"outcomeTrue",
    "name":"true",
    "xml":"<outcome value='true'>\n",
    "comments":"",
    "outputs":1,
    "x":733.3572158813477,
    "y":4127.356721878052,
    "z":"e6090836.aef008",
    "wires":[
      [
        "26166f96.2f2dc"
      ]
    ]
  },
  {
    "id":"b9241d04.9c139",
    "type":"switchNode",
    "name":"switch plans-index > 0",
    "xml":"<switch test='`$plans-index &gt; 0`'>\n",
    "comments":"",
    "outputs":1,
    "x":2241.6665000915527,
    "y":4254.261742115021,
    "z":"e6090836.aef008",
    "wires":[
      [
        "d4e55b39.4088b8"
      ]
    ]
  },
  {
    "id":"d4e55b39.4088b8",
    "type":"outcomeTrue",
    "name":"true",
    "xml":"<outcome value='true'>\n",
    "comments":"",
    "outputs":1,
    "x":2424.523639678955,
    "y":4254.26195192337,
    "z":"e6090836.aef008",
    "wires":[
      [
        "2bdf3ccf.849b44"
      ]
    ]
  },
  {
    "id":"aedcd126.656c8",
    "type":"set",
    "name":"set service-type",
    "xml":"<set>\n<parameter name='service-data.service-information.service-type' value='`$service-data.service-information.subscription-service-type`' />\n",
    "comments":"EIPAM plug-in needs this attribute set with this name",
    "x":530.6666145324707,
    "y":4080.92791557312,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"47f3a0dd.9d94b",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments":"",
    "x":269,
    "y":4838.749938964844,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"eba5daaf.aa8698",
    "type":"comment",
    "name":"Fix $ in value",
    "info":"",
    "comments":"",
    "x":774.7499465942383,
    "y":4844.000087738037,
    "z":"e6090836.aef008",
    "wires":[

    ]
  },
  {
    "id":"c314b843.e5cd58",
    "type":"call",
    "name":"call check for VNF-API-preload and copy",
    "xml":"<call module='GENERIC-RESOURCE-API' rpc='gw-vfmodule-update' mode='sync' >\n",
    "comments":"",
    "outputs":1,
    "x":604.1668701171875,
    "y":4950.9169921875,
    "z":"e6090836.aef008",
    "wires":[
      [

      ]
    ]
  }
]