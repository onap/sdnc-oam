[{"id":"d41630d3.caf9a","type":"dgstart","name":"DGSTART","outputs":1,"x":105.71428680419922,"y":83.8422281742096,"z":"32e1851.926797a","wires":[["9e79d189.ad06b"]]},{"id":"9e79d189.ad06b","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":218.1428451538086,"y":124.08033871650696,"z":"32e1851.926797a","wires":[["6e767b2e.801194"]]},{"id":"6e767b2e.801194","type":"method","name":"method vnf-topology-operation-changeassign","xml":"<method rpc='vnf-topology-operation-changeassign' mode='sync'>\n","comments":"","outputs":1,"x":213.85719299316406,"y":163.84222626686096,"z":"32e1851.926797a","wires":[["cdbcf3e1.d9504"]]},{"id":"919859b6.f73948","type":"comment","name":"vnf-topology-operation-changeassign","info":"","comments":"","x":500.05914306640625,"y":31.428571939468384,"z":"32e1851.926797a","wires":[]},{"id":"1648c2a1.20d86d","type":"switchNode","name":"switch request-action","xml":"<switch test='`$vnf-topology-operation-input.request-information.request-action`'>\n","comments":"","outputs":1,"x":504.95240020751953,"y":265.5565197467804,"z":"32e1851.926797a","wires":[["3f59da7f.089086","a2fb0705.451bf8"]]},{"id":"3f59da7f.089086","type":"outcome","name":"CreateVnfInstance","xml":"<outcome value='CreateVnfInstance'>\n","comments":"","outputs":1,"x":729.09521484375,"y":239.8422281742096,"z":"32e1851.926797a","wires":[["a743e47e.939ef8"]]},{"id":"a2fb0705.451bf8","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":692.0952377319336,"y":283.88986706733704,"z":"32e1851.926797a","wires":[["c3555984.d18d58"]]},{"id":"a743e47e.939ef8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":920.6666717529297,"y":239.8422634601593,"z":"32e1851.926797a","wires":[[]]},{"id":"c3555984.d18d58","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"If svc-action is 'changeassign' then request-action must be 'CreateVnfInstance'\" />\n","comments":"","x":899.4761848449707,"y":283.88987851142883,"z":"32e1851.926797a","wires":[]},{"id":"d86bb989.8ab7c8","type":"switchNode","name":"switch order-status","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.order-status`'>\n","comments":"","outputs":1,"x":494.38086700439453,"y":487.6994640827179,"z":"32e1851.926797a","wires":[["1d49a618.4e5c5a","605edc8b.b378c4"]]},{"id":"1d49a618.4e5c5a","type":"other","name":"PendingDelete","xml":"<outcome value='PendingDelete'>\n","comments":"","outputs":1,"x":696.3809242248535,"y":465.41363167762756,"z":"32e1851.926797a","wires":[["8b82ff89.45fb2"]]},{"id":"f9215f25.69fe3","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"The requested VNF is not pending deletion\" />\n","comments":"","x":862.5237884521484,"y":508.74700951576233,"z":"32e1851.926797a","wires":[]},{"id":"cdbcf3e1.d9504","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":218.0952606201172,"y":488.6041262149811,"z":"32e1851.926797a","wires":[["1648c2a1.20d86d","dcd61c11.fb1ce","98cbff17.bccb1","163736b2.ccd829","1515e5b2.0118aa","89e2b7c.97d0548","a5133000.e13b5","efae7497.72e208","312db6c6.9c69aa"]]},{"id":"dcd61c11.fb1ce","type":"set","name":"set service-object-path","xml":"<set>\n<parameter name='service-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $service-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n","comments":"","x":506.4285125732422,"y":743.1280481815338,"z":"32e1851.926797a","wires":[]},{"id":"98cbff17.bccb1","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n","comments":"","x":480.7142143249512,"y":785.9851868152618,"z":"32e1851.926797a","wires":[]},{"id":"163736b2.ccd829","type":"switchNode","name":"switch vnf_length","xml":"<switch test='`$service-data.vnfs.vnf_length`'>\n","comments":"","outputs":1,"x":492.38087463378906,"y":328.8422396183014,"z":"32e1851.926797a","wires":[["2235973c.92a228"]]},{"id":"2235973c.92a228","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":679.0475540161133,"y":328.1755373477936,"z":"32e1851.926797a","wires":[["fd830e18.e5be3"]]},{"id":"fd830e18.e5be3","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"There are no VNFs in MD-SAL\" />\n","comments":"","x":860.7141799926758,"y":328.1755373477936,"z":"32e1851.926797a","wires":[]},{"id":"1515e5b2.0118aa","type":"for","name":"for each vnf","xml":"<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n","comments":"","outputs":1,"x":474.0475540161133,"y":377.1755573749542,"z":"32e1851.926797a","wires":[["3ca56343.0130cc"]]},{"id":"3ca56343.0130cc","type":"switchNode","name":"switch this vnf-id == input vnf-id","xml":"<switch test='`$service-data.vnfs.vnf[$idx].vnf-id == $vnf-topology-operation-input.vnf-information.vnf-id`'>\n","comments":"","outputs":1,"x":729.0476417541504,"y":375.84222531318665,"z":"32e1851.926797a","wires":[["c74d5ebe.aea64"]]},{"id":"c74d5ebe.aea64","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":967.3809280395508,"y":374.84220337867737,"z":"32e1851.926797a","wires":[["8ac9dc06.55595"]]},{"id":"8ac9dc06.55595","type":"set","name":"set vnf-index","xml":"<set>\n<parameter name='vnf-index' value='`$idx`' />\n","comments":"","x":1135.7141227722168,"y":374.84222531318665,"z":"32e1851.926797a","wires":[]},{"id":"89e2b7c.97d0548","type":"switchNode","name":"switch vnf-index","xml":"<switch test='`$vnf-index`'>\n","comments":"","outputs":1,"x":485.71421813964844,"y":423.8422272205353,"z":"32e1851.926797a","wires":[["4db6429a.65f11c"]]},{"id":"4db6429a.65f11c","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":667.3808364868164,"y":423.1755573749542,"z":"32e1851.926797a","wires":[["ee7d31ce.c7dec"]]},{"id":"ee7d31ce.c7dec","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"'Could not find VNF ' + $vnf-topology-operation-input.vnf-information.vnf-id + ' in MD-SAL'\" />\n","comments":"","x":834.0475234985352,"y":422.8421833515167,"z":"32e1851.926797a","wires":[]},{"id":"a5133000.e13b5","type":"set","name":"copy ONAP model information","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.onap-model-information.'\n  value='`$vnf-topology-operation-input.vnf-information.onap-model-information.`' />\n","comments":"","x":529.7854614257812,"y":645.7142851352692,"z":"32e1851.926797a","wires":[]},{"id":"efae7497.72e208","type":"set","name":"set vnf-level-oper-status to Created","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.order-status' value='Created' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.last-rpc-action' value='`$vnf-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.last-action' value='`$vnf-topology-operation-input.request-information.request-action`' />\n","comments":"","x":542.3809356689453,"y":695.5089495182037,"z":"32e1851.926797a","wires":[]},{"id":"8b82ff89.45fb2","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":845.7142868041992,"y":464.76190304756165,"z":"32e1851.926797a","wires":[[]]},{"id":"605edc8b.b378c4","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":670.7143211364746,"y":509.7618935108185,"z":"32e1851.926797a","wires":[["f9215f25.69fe3"]]},{"id":"312db6c6.9c69aa","type":"get-resource","name":"get-resource VF_MODEL","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VF_MODEL WHERE customization_uuid = $vnf-topology-operation-input.vnf-information.onap-model-information.model-customization-uuid'\n  pfx='db.vf-model'>\n\n","comments":"","outputs":1,"x":519.047607421875,"y":573.0951960086823,"z":"32e1851.926797a","wires":[["2c51876f.25c698","1bf6f57.eff1e0b"]]},{"id":"247e5789.2d6a68","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No model found for VNF customization UUID ' + $vnf-topology-operation-input.vnf-information.onap-model-information.model-customization-uuid`\" />\n","comments":"","x":872.1427955627441,"y":598.1903688907623,"z":"32e1851.926797a","wires":[]},{"id":"2c51876f.25c698","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":706.4999961853027,"y":553.476033449173,"z":"32e1851.926797a","wires":[["2bf6a953.4d1446"]]},{"id":"1bf6f57.eff1e0b","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":715.0714263916016,"y":597.7617466449738,"z":"32e1851.926797a","wires":[["247e5789.2d6a68"]]},{"id":"2bf6a953.4d1446","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VF_MODEL table\" />\n","comments":"","x":871.4999961853027,"y":553.2856276035309,"z":"32e1851.926797a","wires":[]},{"id":"9a3a0f27.7772","type":"comment","name":"check removed with US622450","info":"","comments":"","x":1060.0000610351562,"y":475.7142686843872,"z":"32e1851.926797a","wires":[]}]