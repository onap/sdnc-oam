[
    {
        "id": "85443592.af092",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 98,
        "y": 38,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "852063b.0947b2"
            ]
        ]
    },
    {
        "id": "852063b.0947b2",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 229.2856903076172,
        "y": 87.23810863494873,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "aeeba709.125ee8"
            ]
        ]
    },
    {
        "id": "aeeba709.125ee8",
        "type": "method",
        "name": "method sotn-vf-operation-uni-activate",
        "xml": "<method rpc='sotn-vf-operation-uni-activate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 232.42861938476562,
        "y": 172.00003242492676,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "607019e9.c9785"
            ]
        ]
    },
    {
        "id": "91f12862.db0db8",
        "type": "switchNode",
        "name": "switch vf-modules.vf-module_length",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 704.9959564208984,
        "y": 352.99998915195465,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "583dc2c6.a1eadc",
                "8575a683.b84fa",
                "550ed40f.69db1c"
            ]
        ]
    },
    {
        "id": "607019e9.c9785",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 323.6626205444336,
        "y": 457.66670763492584,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "91f12862.db0db8",
                "9d769fa.70def6",
                "5f3f8849.95d748",
                "e7066e5e.bd1598",
                "d390a700.afff28",
                "bbda4146.d9ba7",
                "eb840621.54dba",
                "90ab95eb.d707c"
            ]
        ]
    },
    {
        "id": "5f3f8849.95d748",
        "type": "for",
        "name": "for each vnf",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 670.0273170471191,
        "y": 223.269144654274,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "89dba9bf.84a9b"
            ]
        ]
    },
    {
        "id": "9d769fa.70def6",
        "type": "switchNode",
        "name": "switch vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 674.9959716796875,
        "y": 162.00001394748688,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "6defab1b.9f589c"
            ]
        ]
    },
    {
        "id": "6defab1b.9f589c",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 854.9959526062012,
        "y": 161.0000034570694,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "64e5f15f.80e5"
            ]
        ]
    },
    {
        "id": "64e5f15f.80e5",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 1004.4246788024902,
        "y": 162.14292109012604,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "89dba9bf.84a9b",
        "type": "switchNode",
        "name": "switch this vnf-id == input vnf-id",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$idx].vnf-id == $vf-module-topology-operation-input.vnf-information.vnf-id`\">    \n",
        "comments": "",
        "outputs": 1,
        "x": 892.9959678649902,
        "y": 224.00000965595245,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "927d25a0.9b192"
            ]
        ]
    },
    {
        "id": "927d25a0.9b192",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1107.9959526062012,
        "y": 222.0000034570694,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "cf847dc6.e7718"
            ]
        ]
    },
    {
        "id": "28206034.44efa",
        "type": "set",
        "name": "set vnf-index",
        "xml": "<set>\n<parameter name='vnf-index' value='`$idx`' />\n",
        "comments": "",
        "x": 1448.9959716796875,
        "y": 190,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "8575a683.b84fa",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 964.9959716796875,
        "y": 377,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "119d4d0b.7a079b"
            ]
        ]
    },
    {
        "id": "583dc2c6.a1eadc",
        "type": "outcome",
        "name": "0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 961.9959716796875,
        "y": 305,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "119d4d0b.7a079b"
            ]
        ]
    },
    {
        "id": "119d4d0b.7a079b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 1133.9959716796875,
        "y": 339,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "550ed40f.69db1c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 926.9959487915039,
        "y": 447.9999986886978,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "7abd9cc7.4badf4"
            ]
        ]
    },
    {
        "id": "c7633f36.59d75",
        "type": "set",
        "name": "set vf-module_length",
        "xml": "<set>\n<parameter name='vf-module-length' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' />\n\n",
        "comments": "",
        "x": 1280.995964050293,
        "y": 446.0000126361847,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "7abd9cc7.4badf4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1087.995994567871,
        "y": 444.99999010562897,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "c7633f36.59d75",
                "ec6b544.1550628"
            ]
        ]
    },
    {
        "id": "ec6b544.1550628",
        "type": "for",
        "name": "for each existing vf-index",
        "xml": "<for index='idx' start='0' end='`$vf-module-length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1299.9959335327148,
        "y": 498.99998915195465,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "2f003dfc.c09752"
            ]
        ]
    },
    {
        "id": "2f003dfc.c09752",
        "type": "switchNode",
        "name": "switch vf-module-id found",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id == $vf-module-topology-operation-input.vf-module-information.vf-module-id`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1542.995948791504,
        "y": 493.9999986886978,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "bc526c4d.7064b8"
            ]
        ]
    },
    {
        "id": "bc526c4d.7064b8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1740.9959774017334,
        "y": 481.00000536441803,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "8d2f78f6.19375"
            ]
        ]
    },
    {
        "id": "8d2f78f6.19375",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1892.995948791504,
        "y": 482.9999986886978,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "77a297db.c2104",
                "6e412733.5c6ba"
            ]
        ]
    },
    {
        "id": "77a297db.c2104",
        "type": "set",
        "name": "set tmp.vidx and ctx.vnf-data",
        "xml": "<set>\n<parameter name='tmp.vidx' value='`$idx`' />\n<parameter name='ctx.vf-module-data.' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-data.`' />\n",
        "comments": "",
        "x": 2120.996063232422,
        "y": 425.0000025033951,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "6e412733.5c6ba",
        "type": "set",
        "name": "set vf-module-request-input.",
        "xml": "<set>\n<parameter name='vf-module-request-input.' value='`$ctx.vf-module-data.vf-module-request-input.`' />\n\n",
        "comments": "",
        "x": 2124.996063232422,
        "y": 479.0000025033951,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "e7066e5e.bd1598",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 598.9961547851562,
        "y": 1652.501220703125,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "8ad19510.26b14",
        "type": "call",
        "name": "call sotn-get-vf-module-uni-param",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sdwan-get-vf-module-lanport-param' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2155.45108795166,
        "y": 530.0104948282242,
        "z": "a9486230.abaca8",
        "wires": [
            []
        ]
    },
    {
        "id": "d390a700.afff28",
        "type": "execute",
        "name": "execute Properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 684.9959564208984,
        "y": 292.5039049386978,
        "z": "a9486230.abaca8",
        "wires": [
            []
        ]
    },
    {
        "id": "cf847dc6.e7718",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1271,
        "y": 232,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "28206034.44efa",
                "7bec934c.afda74"
            ]
        ]
    },
    {
        "id": "7bec934c.afda74",
        "type": "set",
        "name": "set tmp.vnf-id",
        "xml": "<set>\n<parameter name='tmp.vnf-id' value='`$vf-module-topology-operation-input.vnf-information.vnf-id`' />\n",
        "comments": "",
        "x": 1456,
        "y": 247,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "90ab95eb.d707c",
        "type": "get-resource",
        "name": "get-resource generic-vnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"generic-vnf\" \n\t\tkey=\"generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-id\"\n        pfx='tmp.aai.generic-vnf' local-only='false' >\n\n<!--AND depth = '0'\"-->\n\n",
        "comments": "",
        "outputs": 1,
        "x": 577,
        "y": 511,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "8ccaf711.31aa4"
            ]
        ]
    },
    {
        "id": "8cabc424.4e22c8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 807,
        "y": 559,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "5fc2da03.1d071c",
                "3d46b86.8c742c8"
            ]
        ]
    },
    {
        "id": "3d46b86.8c742c8",
        "type": "for",
        "name": "for each relationship in gen-vnf",
        "xml": "<for silentFailure='true' index='vidx' start='0' end='`$tmp.aai.generic-vnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1019,
        "y": 562,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "4909c045.b1da"
            ]
        ]
    },
    {
        "id": "4909c045.b1da",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.generic-vnf.relationship-list.relationship[$vidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1245,
        "y": 566,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "9b3ab29f.42cf08"
            ]
        ]
    },
    {
        "id": "9b3ab29f.42cf08",
        "type": "outcome",
        "name": "uni",
        "xml": "<outcome value='uni'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1434.285888671875,
        "y": 574.82177734375,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "65cb3fab.86e0b8"
            ]
        ]
    },
    {
        "id": "65cb3fab.86e0b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1609.117431640625,
        "y": 577.3402709960938,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "7d0630b8.9b289"
            ]
        ]
    },
    {
        "id": "7a2b5a85.21693c",
        "type": "set",
        "name": "set tmp.unis.uni[].tpId",
        "xml": "<set>\n<!--<parameter name='`tmp.unis.uni[$vidx].tpId`' value=\"`$tmp.aai.src-pnf.relationship-list.relationship[$vidx].relationship-data[0].relationship-value`\" />-->\n\n<parameter name='tmp.tp-id' value=\"`$tmp.aai.uni.tp-id`\" />\n",
        "comments": "",
        "x": 2540.117431640625,
        "y": 618.3402709960938,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "5fc2da03.1d071c",
        "type": "switchNode",
        "name": "switch number of unis  less than two",
        "xml": "<switch test='`$tmp.unis.uni_length &lt; 2`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 994,
        "y": 726,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "c70e962d.92df"
            ]
        ]
    },
    {
        "id": "24e891c1.19b05e",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n\n",
        "comments": "",
        "x": 1402,
        "y": 728,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "c70e962d.92df",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1210,
        "y": 727,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "24e891c1.19b05e"
            ]
        ]
    },
    {
        "id": "c25132f5.a97a9",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.uni.tp-id`'/>\n<parameter name=\"regex\" value=\"[^-]+$\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2579,
        "y": 693,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "24c82b36.46c39c",
                "630e66bd.e52df8"
            ]
        ]
    },
    {
        "id": "630e66bd.e52df8",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2802,
        "y": 648,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "a1db8006.117e2"
            ]
        ]
    },
    {
        "id": "24c82b36.46c39c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2804,
        "y": 712,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "1b614bdf.e6fde4"
            ]
        ]
    },
    {
        "id": "a1db8006.117e2",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix[$param-prefix_length -1]`' />\n",
        "comments": "",
        "x": 3024,
        "y": 650,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "1b614bdf.e6fde4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 2963,
        "y": 731,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "6b1b7759.250c98",
        "type": "get-resource",
        "name": "get-resource pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"'pnf.pnf-name = $tmp.unis.uni[$vidx].pnf-name'\n\t\tAND depth = '0'\"\n        pfx='tmp.aai.pnf' local-only='false' >\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\t\tresource=\"generic-vnf\" -->\n<!--\t\tkey=\"'generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-id' -->\n<!--\t\tAND depth = '0'\"-->\n<!--        pfx='tmp.aai.generic-vnf' local-only='false' >-->",
        "comments": "",
        "outputs": 1,
        "x": 2509,
        "y": 830,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "55f3c1e5.5a0098"
            ]
        ]
    },
    {
        "id": "7ece5f8e.1b9b38",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2868.88232421875,
        "y": 838.6556396484375,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "68f9febc.4723f8",
                "8f8ea6dc.d16678"
            ]
        ]
    },
    {
        "id": "68f9febc.4723f8",
        "type": "set",
        "name": "set node-id",
        "xml": "<set>\n<parameter name='`$tmp.unis.uni[$vidx].node-id`' value=\"`$tmp.aai.pnf.pnf-id`\" />\n",
        "comments": "",
        "x": 3048,
        "y": 792,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "8f8ea6dc.d16678",
        "type": "for",
        "name": "for each relationship in pnf",
        "xml": "<for silentFailure='true' index='ridx' start='0' end='`$tmp.aai.pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3060.882568359375,
        "y": 878.6597290039062,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "65ed7a4.b573f04"
            ]
        ]
    },
    {
        "id": "65ed7a4.b573f04",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.src-pnf.relationship-list.relationship[$vidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3286.882568359375,
        "y": 878.6597290039062,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "974bc5e6.b4d62",
                "e5a98e29.7e38d8"
            ]
        ]
    },
    {
        "id": "e5a98e29.7e38d8",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3496,
        "y": 948,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "f9474736.835c28"
            ]
        ]
    },
    {
        "id": "f9474736.835c28",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3709,
        "y": 949,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "ec758b37.bd131",
                "8dbd70c6.b809a8"
            ]
        ]
    },
    {
        "id": "ec758b37.bd131",
        "type": "set",
        "name": "set network-id",
        "xml": "<set>\n<parameter name='`$tmp.unis.uni[$vidx].network-id`' value=\"`$tmp.aai.pnf.relationship-list.relationship[$ridx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 3944,
        "y": 879,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "8dbd70c6.b809a8",
        "type": "get-resource",
        "name": "get-resource network-resource",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"network-resource\" \n\t\tkey=\"'network-resource.network-id = $tmp.unis.uni[$vidx].network-id'\n\t\tAND depth = '0'\"\n        pfx='tmp.aai.network-resource' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3952,
        "y": 960,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "fcf952ac.a0e578"
            ]
        ]
    },
    {
        "id": "fcf952ac.a0e578",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4184.5,
        "y": 956,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "14d23388.330624"
            ]
        ]
    },
    {
        "id": "14d23388.330624",
        "type": "set",
        "name": "set network-id, topo-id, client-id, etc",
        "xml": "<set>\n<parameter name=\"`$tmp.unis.uni[$vidx].network-id`\" value=\"`$tmp.aai.network-resource.network-id`\" />\n<parameter name=\"`$tmp.unis.uni[$vidx].provider-id`\" value=\"`$tmp.aai.network-resource.provider-id`\" />\n<parameter name=\"`$tmp.unis.uni[$vidx].client-id`\" value=\"`$tmp.aai.network-resource.client-id`\" />\n<parameter name=\"`$tmp.unis.uni[$vidx].te-topo-id`\" value=\"`$tmp.aai.network-resource.te-topo-id`\" />\n<parameter name=\"`$tmp.unis.uni[$vidx].network-type`\" value=\"`$tmp.aai.network-resource.network-type`\" />\n\n\n",
        "comments": "",
        "x": 4453,
        "y": 955,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "eb840621.54dba",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:sotn-get-otn-tunnel-path-from-oof",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sotn-get-otn-tunnel-path-from-oof' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 783,
        "y": 873,
        "z": "a9486230.abaca8",
        "wires": [
            []
        ]
    },
    {
        "id": "974bc5e6.b4d62",
        "type": "outcome",
        "name": "thirdparty-controller",
        "xml": "<outcome value='thirdparty-controller'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3523,
        "y": 813,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "7bf0b175.d7fd18"
            ]
        ]
    },
    {
        "id": "7bf0b175.d7fd18",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3736,
        "y": 814,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "f82d81f3.06226"
            ]
        ]
    },
    {
        "id": "f82d81f3.06226",
        "type": "set",
        "name": "set thirdparty-sdnc-id",
        "xml": "<set>\n<parameter name='`$tmp.unis.uni[$vidx].thirdparty-sdnc-id`' value=\"`$tmp.aai.pnf.relationship-list.relationship[$ridx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 3963,
        "y": 813,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "cfcd9efa.e41c08",
        "type": "comment",
        "name": "when we reach here, we have 2 UNIs, so do ACTN operations",
        "info": "",
        "comments": "",
        "x": 796,
        "y": 819,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "bbda4146.d9ba7",
        "type": "for",
        "name": "for vidx..unis.uni_length[]",
        "xml": "<for index='vidx' start='0' end='`$tmp.unis.uni_length`' >",
        "comments": "",
        "outputs": 1,
        "x": 649,
        "y": 1065,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "a0c1a02.ae339e"
            ]
        ]
    },
    {
        "id": "6deceac6.273a7c",
        "type": "set",
        "name": "set oof.vpn",
        "xml": "<set>\n<parameter name='oof.vpn.' value='`$tmp.unis.uni[$vidx].`' />",
        "comments": "",
        "x": 1079.0272216796875,
        "y": 923.040771484375,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "23c6bb2c.1ee91c",
        "type": "set",
        "name": "set controller data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 1555.0272216796875,
        "y": 1117.0407409667969,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "15d08552.c95093",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1385.0272216796875,
        "y": 1117.0407409667969,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "23c6bb2c.1ee91c"
            ]
        ]
    },
    {
        "id": "40600b2e.91061c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1389.0272216796875,
        "y": 1157.0407409667969,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "2b53d3c0.494304"
            ]
        ]
    },
    {
        "id": "6d1532.96f61ad",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1381.0272216796875,
        "y": 1197.0407409667969,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "c51555c1.127b9"
            ]
        ]
    },
    {
        "id": "2b53d3c0.494304",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 1539.0272216796875,
        "y": 1157.0407409667969,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "c51555c1.127b9",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 1539.0272216796875,
        "y": 1197.0407409667969,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "39a43e8c.12f28a",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1385.0272216796875,
        "y": 1237.0407409667969,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "9ffed135.085748"
            ]
        ]
    },
    {
        "id": "127cb0e0.f6337f",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1381.0272216796875,
        "y": 1277.0407409667969,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "42670ca5.0d852c"
            ]
        ]
    },
    {
        "id": "42670ca5.0d852c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing get token rest api\" />\n",
        "comments": "",
        "x": 1539.0272216796875,
        "y": 1277.0407409667969,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "9ffed135.085748",
        "type": "set",
        "name": "set token-id",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
        "comments": "",
        "x": 1535.5272216796875,
        "y": 1237.0407409667969,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "ca782055.9e2288",
        "type": "comment",
        "name": "Get controller info and send request",
        "info": "",
        "comments": "",
        "x": 1147.0272216796875,
        "y": 1117.0407409667969,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "7c55f05.ae92f9",
        "type": "get-resource",
        "name": "get-resource esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $prop.sdncRestApi.thirdpartySdnc.id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1139.0272216796875,
        "y": 1157.0407409667969,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "15d08552.c95093",
                "40600b2e.91061c",
                "6d1532.96f61ad"
            ]
        ]
    },
    {
        "id": "132c8130.52018f",
        "type": "execute",
        "name": "execute RestApiCallNode Get token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1151.5272216796875,
        "y": 1257.0407409667969,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "39a43e8c.12f28a",
                "127cb0e0.f6337f"
            ]
        ]
    },
    {
        "id": "8b8f431b.afab28",
        "type": "comment",
        "name": "call domain controller to  create underlay OTN tunnel",
        "info": "",
        "comments": "",
        "x": 1200.5272216796875,
        "y": 1342.49560546875,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "72587bb.46de384",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:sotn-create-otn-tunnel",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sotn-create-otn-tunnel' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1220.5272216796875,
        "y": 1386.49560546875,
        "z": "a9486230.abaca8",
        "wires": [
            []
        ]
    },
    {
        "id": "a0c1a02.ae339e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 802.5272216796875,
        "y": 1397.0407409667969,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "4d995f3e.15c858",
                "6deceac6.273a7c",
                "7c55f05.ae92f9",
                "db2b3730.902018",
                "72587bb.46de384",
                "ec5a35c9.5d1e88",
                "3df609df.1fc0ce",
                "132c8130.52018f"
            ]
        ]
    },
    {
        "id": "5781fdd6.208f54",
        "type": "comment",
        "name": "Loop through UNIs and configure domain controllers",
        "info": "",
        "comments": "",
        "x": 737.5003662109375,
        "y": 1205.5003662109375,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "4d995f3e.15c858",
        "type": "set",
        "name": "set sotn_value",
        "xml": "<set>\n<parameter name='ietf-eth-tran-service_etht-svc.globals.etht-svc-bandwidth-profiles[0].bandwidth-profile-type' value='ietf-eth-tran-types:mef-10-bwp' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-type' value='ietf-eth-tran-types:p2p-svc' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].admin-status' value='ietf-te-types:tunnel-state-up' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].access-port-id' value='0' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].service-classification-type' value='ietf-eth-tran-types:port-classification' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].access-port-id' value='1' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].service-classification-type' value='ietf-eth-tran-types:port-classification' />",
        "comments": "",
        "x": 1066.52734375,
        "y": 1465.040771484375,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "ec5a35c9.5d1e88",
        "type": "set",
        "name": "set attachment_param",
        "xml": "<set>\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].access-provider-id' value='`$oof.vpn.access-provider-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].access-client-id' value='`$oof.vpn.access-client-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].access-topology-id' value='`$oof.vpn.access-topology-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].access-ltp-id' value='`$oof.vpn.dst-access-ltp-id`' />\n\n",
        "comments": "",
        "x": 1091.02734375,
        "y": 1505.040771484375,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "3df609df.1fc0ce",
        "type": "switchNode",
        "name": "switch prop.sdncRestApi.token_id",
        "xml": "<switch test=\"`$prop.sdncRestApi.token_id`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1126.52734375,
        "y": 1545.040771484375,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "a0bdd826.3f4cd8",
                "6962c04c.c84c"
            ]
        ]
    },
    {
        "id": "f371d079.2c80a8",
        "type": "execute",
        "name": "execute RestApiCallNode Create ethernet Service with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestApiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1643.52734375,
        "y": 1565.040771484375,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "b25690a3.da1fe",
                "44b94c62.5f6294"
            ]
        ]
    },
    {
        "id": "b25690a3.da1fe",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1987.02734375,
        "y": 1565.040771484375,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "acd4383.6d75ac8"
            ]
        ]
    },
    {
        "id": "acd4383.6d75ac8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2144.52734375,
        "y": 1565.040771484375,
        "z": "a9486230.abaca8",
        "wires": [
            []
        ]
    },
    {
        "id": "acde530.390303",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
        "comments": "",
        "x": 2141.02734375,
        "y": 1525.040771484375,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "44b94c62.5f6294",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1983.02734375,
        "y": 1525.040771484375,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "acde530.390303"
            ]
        ]
    },
    {
        "id": "a0bdd826.3f4cd8",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1339.3711738586426,
        "y": 1525.162670135498,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "dd18b88a.c3942"
            ]
        ]
    },
    {
        "id": "6962c04c.c84c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1343.02734375,
        "y": 1565.040771484375,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "f371d079.2c80a8"
            ]
        ]
    },
    {
        "id": "dd18b88a.c3942",
        "type": "execute",
        "name": "execute RestApiCallNode Create ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestApiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1653.52734375,
        "y": 1525.040771484375,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "44b94c62.5f6294",
                "b25690a3.da1fe"
            ]
        ]
    },
    {
        "id": "8ccaf711.31aa4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 708,
        "y": 640,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "8cabc424.4e22c8"
            ]
        ]
    },
    {
        "id": "55f3c1e5.5a0098",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2692,
        "y": 837,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "7ece5f8e.1b9b38"
            ]
        ]
    },
    {
        "id": "5ed4925c.49643c",
        "type": "set",
        "name": "set tmp.unis.uni[].tpId",
        "xml": "<set>\n<parameter name='tmp.unis.uni[0].id' value=\"`$vf-module-topology-operation-input.vf-module-information.vf-module-id`\" />\n<parameter name='tmp.unis.uni[0].tp-id' value=\"networkId-providerId-5555-clientId-6666-topologyId-11-nodeId-0.190.0.1\" />\n<parameter name='tmp.unis.uni[0].access-provider-id' value=\"`$domain-A.provider-id`\" />\n<parameter name='tmp.unis.uni[0].access-client-id' value=\"`$domain-A.client-id`\" />\n<parameter name='tmp.unis.uni[0].access-topology-id' value=\"`$domain-A.topology-id`\" />\n<parameter name='tmp.unis.uni[0].access-node-id' value=\"0.190.0.1\" />\n<parameter name='tmp.unis.uni[0].src-access-ltp-id' value=\"1234\" />\n<parameter name='tmp.unis.uni[0].dst-access-ltp-id' value=\"5678\" />\n<parameter name='tmp.unis.uni[0].network-id' value=\"domain2-providerId-5555-clientId-6666-topologyId-11\" />\n\n\n<parameter name='tmp.unis.uni[1].id' value=\"5642e9dd-496c-4ef6-be97-5caf4e9beec9\" />\n<parameter name='tmp.unis.uni[1].tp-id' value=\"networkId-domain2-providerId-5555-clientId-6666-topologyId-11-nodeId-0.191.0.4\" />\n<parameter name='tmp.unis.uni[1].access-provider-id' value=\"`$domain-B.provider-id`\" />\n<parameter name='tmp.unis.uni[1].access-client-id' value=\"`$domain-B.client-id`\" />\n<parameter name='tmp.unis.uni[1].access-topology-id' value=\"`$domain-B.topology-id`\" />\n<parameter name='tmp.unis.uni[1].access-node-id' value=\"0.190.0.3\" />\n<parameter name='tmp.unis.uni[1].src-access-ltp-id' value=\"9123\" />\n<parameter name='tmp.unis.uni[1].dst-access-ltp-id' value=\"4567\" />\n<parameter name='tmp.unis.uni[1].network-id' value=\"domain2-providerId-5555-clientId-6666-topologyId-11\" />\n\n\n<parameter name='tmp.unis.uni_length' value=\"2\" />\n\n",
        "comments": "",
        "x": 638,
        "y": 992,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "db2b3730.902018",
        "type": "get-resource",
        "name": "get network-resource",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"network-resource\" \n\t\tkey=\"network-resource.network-id = $oof.vpn.network-id\"\n        pfx='tmp.aai.network-resource' local-only='false' >\n\n\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1111,
        "y": 1001,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "1a14b8d2.a8f357",
                "f7a955ca.9be14",
                "34e2d0ff.2b0ba8"
            ]
        ]
    },
    {
        "id": "1a14b8d2.a8f357",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1306.5001220703125,
        "y": 958,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "10c48a33.860696"
            ]
        ]
    },
    {
        "id": "f7a955ca.9be14",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1298.5001220703125,
        "y": 1013,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "7314720a.de097c"
            ]
        ]
    },
    {
        "id": "34e2d0ff.2b0ba8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1303.5001220703125,
        "y": 1070,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "247bba75.1dbfee"
            ]
        ]
    },
    {
        "id": "247bba75.1dbfee",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 1455.5001220703125,
        "y": 1071,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "7314720a.de097c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 1466.5001220703125,
        "y": 1016,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "10c48a33.860696",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1450.8824462890625,
        "y": 955.6556701660156,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "3803718b.d2dfd6"
            ]
        ]
    },
    {
        "id": "3803718b.d2dfd6",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for index='ridx' start='0' end='`$tmp.aai.network-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1665.8826904296875,
        "y": 955.6597290039062,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "7cf64c03.a76a4c"
            ]
        ]
    },
    {
        "id": "7cf64c03.a76a4c",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-resource.relationship-list.relationship[$ridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1891.8826904296875,
        "y": 955.6597290039062,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "7cc2a602.3c71d"
            ]
        ]
    },
    {
        "id": "7cc2a602.3c71d",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2098.0001220703125,
        "y": 954,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "f4284fa2.072448"
            ]
        ]
    },
    {
        "id": "f4284fa2.072448",
        "type": "set",
        "name": "set prop.sdncRestApi.thirdpartySdnc.id",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.id' value=\"`$tmp.aai.network-resource.relationship-list.relationship[$ridx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 2116,
        "y": 1033,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "7d0630b8.9b289",
        "type": "get-resource",
        "name": "get-resource uni",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"uni\" \n\t\tkey=\"uni.id = $tmp.aai.generic-vnf.relationship-list.relationship[$vidx].relationship-data[0].relationship-value\"\n        pfx='tmp.aai.uni' local-only='false' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1785,
        "y": 666,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "ad8ad07a.d8a1c8"
            ]
        ]
    },
    {
        "id": "ad8ad07a.d8a1c8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1957,
        "y": 666,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "9b99c47a.3de3d"
            ]
        ]
    },
    {
        "id": "8d4b6de9.39d208",
        "type": "set",
        "name": "set tmp.unis.uni[]",
        "xml": "<set>\n<!--<parameter name='`tmp.unis.uni[$vidx].tpId`' value=\"`$tmp.aai.src-pnf.relationship-list.relationship[$vidx].relationship-data[0].relationship-value`\" />-->\n\n<parameter name='`tmp.unis.uni[$vidx].`' value=\"`$tmp.aai.uni.`\" />\n",
        "comments": "",
        "x": 2282,
        "y": 622,
        "z": "a9486230.abaca8",
        "wires": []
    },
    {
        "id": "9b99c47a.3de3d",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2098,
        "y": 668,
        "z": "a9486230.abaca8",
        "wires": [
            [
                "8d4b6de9.39d208",
                "c25132f5.a97a9",
                "6b1b7759.250c98"
            ]
        ]
    }
]