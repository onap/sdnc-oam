[
    {
        "id": "fb32b655.b185b8",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 97,
        "y": 26,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "84e0c1e1.45193"
            ]
        ]
    },
    {
        "id": "84e0c1e1.45193",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 228.2856903076172,
        "y": 75.23810863494873,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "45da7482.2ad22c"
            ]
        ]
    },
    {
        "id": "45da7482.2ad22c",
        "type": "method",
        "name": "method sotn-vf-operation-uni-activate",
        "xml": "<method rpc='sotn-vf-operation-uni-activate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 231.42861938476562,
        "y": 160.00003242492676,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "edcc85d8.9d3d28"
            ]
        ]
    },
    {
        "id": "2c9ee1fb.c2a40e",
        "type": "switchNode",
        "name": "switch vf-modules.vf-module_length",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 703.9959564208984,
        "y": 340.99998915195465,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "a85389a5.eba5b8",
                "b56c9993.d26ec8",
                "d2286cfd.202a6"
            ]
        ]
    },
    {
        "id": "edcc85d8.9d3d28",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 322.6626205444336,
        "y": 445.66670763492584,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "2c9ee1fb.c2a40e",
                "fa8ab78.8a0bc48",
                "83723db3.8501b",
                "943ab36c.4be4",
                "56a2543.f406bac",
                "7638ccf.06d4134",
                "a53f3f0c.46a7a",
                "c42e922f.1abaa"
            ]
        ]
    },
    {
        "id": "83723db3.8501b",
        "type": "for",
        "name": "for each vnf",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 669.0273170471191,
        "y": 211.269144654274,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "b6860278.b7c3a"
            ]
        ]
    },
    {
        "id": "fa8ab78.8a0bc48",
        "type": "switchNode",
        "name": "switch vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 673.9959716796875,
        "y": 150.00001394748688,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "4d78f4ba.adcf7c"
            ]
        ]
    },
    {
        "id": "4d78f4ba.adcf7c",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 853.9959526062012,
        "y": 149.0000034570694,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "83071b4.81cf8e8"
            ]
        ]
    },
    {
        "id": "83071b4.81cf8e8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 1003.4246788024902,
        "y": 150.14292109012604,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "b6860278.b7c3a",
        "type": "switchNode",
        "name": "switch this vnf-id == input vnf-id",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$idx].vnf-id == $vf-module-topology-operation-input.vnf-information.vnf-id`\">    \n",
        "comments": "",
        "outputs": 1,
        "x": 891.9959678649902,
        "y": 212.00000965595245,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "a420300f.fcc77"
            ]
        ]
    },
    {
        "id": "a420300f.fcc77",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1106.9959526062012,
        "y": 210.0000034570694,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "61f2940f.e1eccc"
            ]
        ]
    },
    {
        "id": "5ebe199d.38e1f8",
        "type": "set",
        "name": "set vnf-index",
        "xml": "<set>\n<parameter name='vnf-index' value='`$idx`' />\n",
        "comments": "",
        "x": 1447.9959716796875,
        "y": 178,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "b56c9993.d26ec8",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 963.9959716796875,
        "y": 365,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "f74bba14.018558"
            ]
        ]
    },
    {
        "id": "a85389a5.eba5b8",
        "type": "outcome",
        "name": "0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 960.9959716796875,
        "y": 293,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "f74bba14.018558"
            ]
        ]
    },
    {
        "id": "f74bba14.018558",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 1132.9959716796875,
        "y": 327,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "d2286cfd.202a6",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 925.9959487915039,
        "y": 435.9999986886978,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "1141c0c2.8446df"
            ]
        ]
    },
    {
        "id": "bd0fe0b8.95c3d",
        "type": "set",
        "name": "set vf-module_length",
        "xml": "<set>\n<parameter name='vf-module-length' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' />\n\n",
        "comments": "",
        "x": 1279.995964050293,
        "y": 434.0000126361847,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "1141c0c2.8446df",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1086.995994567871,
        "y": 432.99999010562897,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "bd0fe0b8.95c3d",
                "7d4d8763.0f4718"
            ]
        ]
    },
    {
        "id": "7d4d8763.0f4718",
        "type": "for",
        "name": "for each existing vf-index",
        "xml": "<for index='idx' start='0' end='`$vf-module-length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1298.9959335327148,
        "y": 486.99998915195465,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "39d7ac61.94fef4"
            ]
        ]
    },
    {
        "id": "39d7ac61.94fef4",
        "type": "switchNode",
        "name": "switch vf-module-id found",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id == $vf-module-topology-operation-input.vf-module-information.vf-module-id`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1541.995948791504,
        "y": 481.9999986886978,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "1b63e74a.2edd39"
            ]
        ]
    },
    {
        "id": "1b63e74a.2edd39",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1739.9959774017334,
        "y": 469.00000536441803,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "21b15a7e.281f96"
            ]
        ]
    },
    {
        "id": "21b15a7e.281f96",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1891.995948791504,
        "y": 470.9999986886978,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "bfa5b77e.850078",
                "9791123.9d23ff",
                "5999c8a4.0563c8"
            ]
        ]
    },
    {
        "id": "bfa5b77e.850078",
        "type": "set",
        "name": "set tmp.vidx and ctx.vnf-data",
        "xml": "<set>\n<parameter name='tmp.vidx' value='`$idx`' />\n<parameter name='ctx.vf-module-data.' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-data.`' />\n",
        "comments": "",
        "x": 2119.996063232422,
        "y": 413.0000025033951,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "9791123.9d23ff",
        "type": "set",
        "name": "set vf-module-request-input.",
        "xml": "<set>\n<parameter name='vf-module-request-input.' value='`$ctx.vf-module-data.vf-module-request-input.`' />\n\n",
        "comments": "",
        "x": 2123.996063232422,
        "y": 467.0000025033951,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "943ab36c.4be4",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 597.9961547851562,
        "y": 1640.501220703125,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "5999c8a4.0563c8",
        "type": "call",
        "name": "call sotn-get-vf-module-uni-param",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sdwan-get-vf-module-lanport-param' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2154.45108795166,
        "y": 518.0104948282242,
        "z": "84e7e3f2.6b184",
        "wires": [
            []
        ]
    },
    {
        "id": "56a2543.f406bac",
        "type": "execute",
        "name": "execute Properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 683.9959564208984,
        "y": 280.5039049386978,
        "z": "84e7e3f2.6b184",
        "wires": [
            []
        ]
    },
    {
        "id": "61f2940f.e1eccc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1270,
        "y": 220,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "5ebe199d.38e1f8",
                "97c5cadc.46fd38"
            ]
        ]
    },
    {
        "id": "97c5cadc.46fd38",
        "type": "set",
        "name": "set tmp.vnf-id",
        "xml": "<set>\n<parameter name='tmp.vnf-id' value='`$vf-module-topology-operation-input.vnf-information.vnf-id`' />\n",
        "comments": "",
        "x": 1455,
        "y": 235,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "7638ccf.06d4134",
        "type": "get-resource",
        "name": "get-resource generic-vnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"generic-vnf\" \n\t\tkey=\"'generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-id' \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.generic-vnf' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 603,
        "y": 552,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "6951bd2b.63d4e4"
            ]
        ]
    },
    {
        "id": "6951bd2b.63d4e4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 806,
        "y": 547,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "c98c270d.88dcd8",
                "b05ba34b.acc5f"
            ]
        ]
    },
    {
        "id": "c98c270d.88dcd8",
        "type": "for",
        "name": "for each relationship in gen-vnf",
        "xml": "<for silentFailure='true' index='vidx' start='0' end='`$tmp.aai.generic-vnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1018,
        "y": 550,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "b3a5598e.a41448"
            ]
        ]
    },
    {
        "id": "b3a5598e.a41448",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.src-pnf.relationship-list.relationship[$vidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1244,
        "y": 554,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "4e594d45.0e1984"
            ]
        ]
    },
    {
        "id": "4e594d45.0e1984",
        "type": "outcome",
        "name": "uni",
        "xml": "<outcome value='uni'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1433.285888671875,
        "y": 562.82177734375,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "3e26d342.6174fc"
            ]
        ]
    },
    {
        "id": "3e26d342.6174fc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1608.117431640625,
        "y": 565.3402709960938,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "8d7c01bb.0e5ea",
                "db36cb56.ed0998",
                "9f8707c2.df5a68"
            ]
        ]
    },
    {
        "id": "8d7c01bb.0e5ea",
        "type": "set",
        "name": "set tmp.unis.uni[].tpId",
        "xml": "<set>\n<parameter name='`tmp.unis.uni[$vidx].tpId`' value=\"`$tmp.aai.src-pnf.relationship-list.relationship[$vidx].relationship-data[0].relationship-value`\" />\n\n",
        "comments": "",
        "x": 1825.117431640625,
        "y": 563.3402709960938,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "b05ba34b.acc5f",
        "type": "switchNode",
        "name": "switch number of unis  < 2",
        "xml": "<switch test='`$tmp.unis.uni_length < 2`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 993,
        "y": 714,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "9ad7b18c.9e2db"
            ]
        ]
    },
    {
        "id": "11a2c1f3.2f15de",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name='' value='' />\n",
        "comments": "",
        "x": 1401,
        "y": 716,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "9ad7b18c.9e2db",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1209,
        "y": 715,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "11a2c1f3.2f15de"
            ]
        ]
    },
    {
        "id": "db36cb56.ed0998",
        "type": "execute",
        "name": "execute split tpId to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`tmp.unis.uni[$vidx].tpId`'/>\n<parameter name=\"regex\" value=\"nodeId\"/>\n<parameter name=\"tmp.unis.uni[$vidx].pnf-name\" value=\"\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1864,
        "y": 638,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "51f60529.b960dc",
                "bd9180ed.9d6e6"
            ]
        ]
    },
    {
        "id": "bd9180ed.9d6e6",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2087,
        "y": 593,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "91a82817.a8c858"
            ]
        ]
    },
    {
        "id": "51f60529.b960dc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2089,
        "y": 657,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "4dddc62b.304038"
            ]
        ]
    },
    {
        "id": "91a82817.a8c858",
        "type": "set",
        "name": "set ipAddress prefixLength",
        "xml": "<set>\n<parameter name='prop.lan.ip-address' value='`$ipandMask[0]`' />\n<parameter name='prop.lan.prefixLength' value='`$ipandMask[1]`' />",
        "comments": "",
        "x": 2309,
        "y": 595,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "4dddc62b.304038",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 2248,
        "y": 676,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "9f8707c2.df5a68",
        "type": "get-resource",
        "name": "get-resource pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"`pnf.pnf-name = $tmp.unis.uni[$vidx].pnf-name AND depth = '0'`\"\n        pfx='tmp.aai.pnf' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1790,
        "y": 731,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "7f07585.a7576a8"
            ]
        ]
    },
    {
        "id": "7f07585.a7576a8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1990.5,
        "y": 749,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "2018b1.62ea675"
            ]
        ]
    },
    {
        "id": "2018b1.62ea675",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2153.88232421875,
        "y": 783.6556396484375,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "a36c84bd.45b6f8",
                "e1179ec.bdf3f6"
            ]
        ]
    },
    {
        "id": "e1179ec.bdf3f6",
        "type": "set",
        "name": "set node-id",
        "xml": "<set>\n<parameter name='`$tmp.unis.uni[$vidx].node-id`' value=\"`$tmp.aai.pnf.pnf-id`\" />\n",
        "comments": "",
        "x": 2390,
        "y": 734,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "a36c84bd.45b6f8",
        "type": "for",
        "name": "for each relationship in pnf",
        "xml": "<for silentFailure='true' index='ridx' start='0' end='`$tmp.aai.pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2345.882568359375,
        "y": 823.6597290039062,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "c153c531.99c278"
            ]
        ]
    },
    {
        "id": "c153c531.99c278",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.src-pnf.relationship-list.relationship[$vidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2571.882568359375,
        "y": 823.6597290039062,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "ebf22767.e2b168",
                "17f20ef3.96aa91"
            ]
        ]
    },
    {
        "id": "ebf22767.e2b168",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2770,
        "y": 936,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "15e83210.af0fbe"
            ]
        ]
    },
    {
        "id": "15e83210.af0fbe",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2983,
        "y": 937,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "7354a06a.e0a7c",
                "82642fbf.6f96f"
            ]
        ]
    },
    {
        "id": "7354a06a.e0a7c",
        "type": "set",
        "name": "set network-id",
        "xml": "<set>\n<parameter name='`$tmp.unis.uni[$vidx].network-id`' value=\"`$tmp.aai.pnf.relationship-list.relationship[$ridx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 3218,
        "y": 867,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "82642fbf.6f96f",
        "type": "get-resource",
        "name": "get-resource network-resource",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"network-resource\" \n\t\tkey=\"`network-resource.network-id = $tmp.unis.uni[$vidx].network-id AND depth = '0'`\"\n        pfx='tmp.aai.network-resource' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3226,
        "y": 948,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "dfffc86d.811b38"
            ]
        ]
    },
    {
        "id": "dfffc86d.811b38",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3458.5,
        "y": 944,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "c2666ab.b105298"
            ]
        ]
    },
    {
        "id": "c2666ab.b105298",
        "type": "set",
        "name": "set network-id, topo-id, client-id, etc",
        "xml": "<set>\n<parameter name=\"`$tmp.unis.uni[$vidx].network-id`\" value=\"`$tmp.aai.network-resource.network-id`\" />\n<parameter name=\"`$tmp.unis.uni[$vidx].provider-id`\" value=\"`$tmp.aai.network-resource.provider-id`\" />\n<parameter name=\"`$tmp.unis.uni[$vidx].client-id`\" value=\"`$tmp.aai.network-resource.client-id`\" />\n<parameter name=\"`$tmp.unis.uni[$vidx].te-topo-id`\" value=\"`$tmp.aai.network-resource.te-topo-id`\" />\n<parameter name=\"`$tmp.unis.uni[$vidx].network-type`\" value=\"`$tmp.aai.network-resource.network-type`\" />\n\n\n",
        "comments": "",
        "x": 3727,
        "y": 943,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "a53f3f0c.46a7a",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:sotn-get-otn-tunnel-path-from-oof",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sotn-get-otn-tunnel-path-from-oof' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 782,
        "y": 861,
        "z": "84e7e3f2.6b184",
        "wires": [
            []
        ]
    },
    {
        "id": "17f20ef3.96aa91",
        "type": "outcome",
        "name": "thirdparty-controller",
        "xml": "<outcome value='thirdparty-controller'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2797,
        "y": 801,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "a15f639f.76c57"
            ]
        ]
    },
    {
        "id": "a15f639f.76c57",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3010,
        "y": 802,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "94cd4673.029758"
            ]
        ]
    },
    {
        "id": "94cd4673.029758",
        "type": "set",
        "name": "set thirdparty-sdnc-id",
        "xml": "<set>\n<parameter name='`$tmp.unis.uni[$vidx].thirdparty-sdnc-id`' value=\"`$tmp.aai.pnf.relationship-list.relationship[$ridx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 3237,
        "y": 801,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "5c2c3ff1.fc693",
        "type": "comment",
        "name": "when we reach here, we have 2 UNIs, so do ACTN operations",
        "info": "",
        "comments": "",
        "x": 795,
        "y": 807,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "c42e922f.1abaa",
        "type": "for",
        "name": "for vidx..unis.uni_length[]",
        "xml": "<for index='vidx' start='0' end='`$tmp.unis.uni_length`' >",
        "comments": "",
        "outputs": 1,
        "x": 648,
        "y": 1053,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "1cfcb3ef.b12bfc"
            ]
        ]
    },
    {
        "id": "70ff03f1.58983c",
        "type": "set",
        "name": "set oof.vpn",
        "xml": "<set>\n<parameter name='oof.vpn.' value='`$tmp.unis.uni[$vidx].`' />",
        "comments": "",
        "x": 1074.0272216796875,
        "y": 992.040771484375,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "fcf606f6.efb428",
        "type": "set",
        "name": "set controller data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n",
        "comments": "",
        "x": 1554.0272216796875,
        "y": 1105.0407409667969,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "18d11459.dc281c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1384.0272216796875,
        "y": 1105.0407409667969,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "fcf606f6.efb428"
            ]
        ]
    },
    {
        "id": "71856f9f.960fe",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1388.0272216796875,
        "y": 1145.0407409667969,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "48d45483.15892c"
            ]
        ]
    },
    {
        "id": "f7967d43.ee995",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1380.0272216796875,
        "y": 1185.0407409667969,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "8a5a416f.cf1fa"
            ]
        ]
    },
    {
        "id": "48d45483.15892c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 1538.0272216796875,
        "y": 1145.0407409667969,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "8a5a416f.cf1fa",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 1538.0272216796875,
        "y": 1185.0407409667969,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "96b7c9e8.a8e308",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1384.0272216796875,
        "y": 1225.0407409667969,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "f7f59d76.ec927"
            ]
        ]
    },
    {
        "id": "9f0248ba.15c698",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1380.0272216796875,
        "y": 1265.0407409667969,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "66fab2ba.c9700c"
            ]
        ]
    },
    {
        "id": "66fab2ba.c9700c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing get token rest api\" />\n",
        "comments": "",
        "x": 1538.0272216796875,
        "y": 1265.0407409667969,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "f7f59d76.ec927",
        "type": "set",
        "name": "set token-id",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
        "comments": "",
        "x": 1534.5272216796875,
        "y": 1225.0407409667969,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "98b0b441.82bf68",
        "type": "comment",
        "name": "Get controller info and send request",
        "info": "",
        "comments": "",
        "x": 1146.0272216796875,
        "y": 1105.0407409667969,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "82fd1dc6.67489",
        "type": "get-resource",
        "name": "get-resource esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $oof.vpn.thirdparty-sdnc-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1138.0272216796875,
        "y": 1145.0407409667969,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "18d11459.dc281c",
                "71856f9f.960fe",
                "f7967d43.ee995"
            ]
        ]
    },
    {
        "id": "8222512c.b2b7f",
        "type": "execute",
        "name": "execute RestApiCallNode Get token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1150.5272216796875,
        "y": 1245.0407409667969,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "96b7c9e8.a8e308",
                "9f0248ba.15c698"
            ]
        ]
    },
    {
        "id": "21e9ada7.141962",
        "type": "comment",
        "name": "call domain controller to  create underlay OTN tunnel",
        "info": "",
        "comments": "",
        "x": 1199.5272216796875,
        "y": 1330.49560546875,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "47386aa5.9bb954",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:sotn-create-otn-tunnel",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sotn-create-otn-tunnel' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1219.5272216796875,
        "y": 1374.49560546875,
        "z": "84e7e3f2.6b184",
        "wires": [
            []
        ]
    },
    {
        "id": "1cfcb3ef.b12bfc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 801.5272216796875,
        "y": 1385.0407409667969,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "82fd1dc6.67489",
                "70ff03f1.58983c",
                "e0cd8c60.4c6de",
                "8b8f2197.efea1",
                "8222512c.b2b7f",
                "518a2698.5bffd8",
                "47386aa5.9bb954"
            ]
        ]
    },
    {
        "id": "cbbfd612.33a888",
        "type": "comment",
        "name": "Loop through UNIs and configure domain controllers",
        "info": "",
        "comments": "",
        "x": 736.5003662109375,
        "y": 1193.5003662109375,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "e0cd8c60.4c6de",
        "type": "set",
        "name": "set sotn_value",
        "xml": "<set>\n<parameter name='ietf-eth-tran-service_etht-svc.globals.etht-svc-bandwidth-profiles[0].bandwidth-profile-type' value='ietf-eth-tran-types:mef-10-bwp' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-type' value='ietf-eth-tran-types:p2p-svc' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].admin-status' value='ietf-te-types:tunnel-state-up' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].access-port-id' value='0' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].service-classification-type' value='ietf-eth-tran-types:port-classification' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].access-port-id' value='1' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].service-classification-type' value='ietf-eth-tran-types:port-classification' />",
        "comments": "",
        "x": 1065.52734375,
        "y": 1453.040771484375,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "8b8f2197.efea1",
        "type": "set",
        "name": "set attachment_param",
        "xml": "<set>\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].access-provider-id' value='`$oof.vpn.access-provider-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].access-client-id' value='`$oof.vpn.access-client-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].access-topology-id' value='`$oof.vpn.access-topology-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].access-ltp-id' value='`$oof.vpn.dst-access-ltp-id`' />\n\n",
        "comments": "",
        "x": 1090.02734375,
        "y": 1493.040771484375,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "518a2698.5bffd8",
        "type": "switchNode",
        "name": "switch prop.sdncRestApi.token_id",
        "xml": "<switch test=\"`$prop.sdncRestApi.token_id`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1125.52734375,
        "y": 1533.040771484375,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "7015f66c.94fd18",
                "82d35da9.66aaf"
            ]
        ]
    },
    {
        "id": "dd59a6d0.4b0dc8",
        "type": "execute",
        "name": "execute RestconfApiCallNode Create ethernet Service with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfapicall.RestconfApiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/sdnc/restapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1642.52734375,
        "y": 1553.040771484375,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "f3736e9e.60052",
                "c00d7e66.d88b7"
            ]
        ]
    },
    {
        "id": "f3736e9e.60052",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1986.02734375,
        "y": 1553.040771484375,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "113a662f.cf308a"
            ]
        ]
    },
    {
        "id": "113a662f.cf308a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2143.52734375,
        "y": 1553.040771484375,
        "z": "84e7e3f2.6b184",
        "wires": [
            []
        ]
    },
    {
        "id": "9be7bcfb.b7fdc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
        "comments": "",
        "x": 2140.02734375,
        "y": 1513.040771484375,
        "z": "84e7e3f2.6b184",
        "wires": []
    },
    {
        "id": "c00d7e66.d88b7",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1982.02734375,
        "y": 1513.040771484375,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "9be7bcfb.b7fdc"
            ]
        ]
    },
    {
        "id": "7015f66c.94fd18",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1338.3711738586426,
        "y": 1513.162670135498,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "d88a1a72.f911d8"
            ]
        ]
    },
    {
        "id": "82d35da9.66aaf",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1342.02734375,
        "y": 1553.040771484375,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "dd59a6d0.4b0dc8"
            ]
        ]
    },
    {
        "id": "d88a1a72.f911d8",
        "type": "execute",
        "name": "execute RestconfApiCallNode Create ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfapicall.RestconfApiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/sdnc/restapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1652.52734375,
        "y": 1513.040771484375,
        "z": "84e7e3f2.6b184",
        "wires": [
            [
                "c00d7e66.d88b7",
                "f3736e9e.60052"
            ]
        ]
    }
]