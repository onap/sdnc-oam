[
    {
        "id": "ea193d8f.e165e",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 112,
        "y": 70,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "45143e5e.12cef"
            ]
        ]
    },
    {
        "id": "45143e5e.12cef",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 243.2856903076172,
        "y": 119.23810863494873,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "22fb039d.719e1c"
            ]
        ]
    },
    {
        "id": "22fb039d.719e1c",
        "type": "method",
        "name": "method sotn-vf-operation-uni-activate",
        "xml": "<method rpc='sotn-vf-operation-uni-activate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 246.42861938476562,
        "y": 204.00003242492676,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "bbe79441.cda0b"
            ]
        ]
    },
    {
        "id": "8dca40ca.b6cbc8",
        "type": "switchNode",
        "name": "switch vf-modules.vf-module_length",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 718.9959564208984,
        "y": 384.99998915195465,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "66f88853.0801a8",
                "5f34a2a5.ce0fbc",
                "37779f9b.3e84f8"
            ]
        ]
    },
    {
        "id": "bbe79441.cda0b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 337.6626205444336,
        "y": 489.66670763492584,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "8dca40ca.b6cbc8",
                "b28368bd.88b17",
                "91b62864.f184c8",
                "b0f3fc53.5db61",
                "b5422f78.9d3e4",
                "f2975c47.fb694",
                "aeddedc2.f06158",
                "5950f717.b81e28"
            ]
        ]
    },
    {
        "id": "91b62864.f184c8",
        "type": "for",
        "name": "for each vnf",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 684.0273170471191,
        "y": 255.269144654274,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "3d5e06d8.9791c2"
            ]
        ]
    },
    {
        "id": "b28368bd.88b17",
        "type": "switchNode",
        "name": "switch vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 688.9959716796875,
        "y": 194.00001394748688,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "746b74df.fbc48c"
            ]
        ]
    },
    {
        "id": "746b74df.fbc48c",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 868.9959526062012,
        "y": 193.0000034570694,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "62ebea71.fce5b4"
            ]
        ]
    },
    {
        "id": "62ebea71.fce5b4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 1018.4246788024902,
        "y": 194.14292109012604,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "3d5e06d8.9791c2",
        "type": "switchNode",
        "name": "switch this vnf-id == input vnf-id",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$idx].vnf-id == $vf-module-topology-operation-input.vnf-information.vnf-id`\">    \n",
        "comments": "",
        "outputs": 1,
        "x": 906.9959678649902,
        "y": 256.00000965595245,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "fccff52.827ec08"
            ]
        ]
    },
    {
        "id": "fccff52.827ec08",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1121.9959526062012,
        "y": 254.0000034570694,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "fc0c6263.7f4b58"
            ]
        ]
    },
    {
        "id": "46df70e6.cbb32",
        "type": "set",
        "name": "set vnf-index",
        "xml": "<set>\n<parameter name='vnf-index' value='`$idx`' />\n",
        "comments": "",
        "x": 1462.9959716796875,
        "y": 222,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "5f34a2a5.ce0fbc",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 978.9959716796875,
        "y": 409,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "b65ac05a.92d3b8"
            ]
        ]
    },
    {
        "id": "66f88853.0801a8",
        "type": "outcome",
        "name": "0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 975.9959716796875,
        "y": 337,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "b65ac05a.92d3b8"
            ]
        ]
    },
    {
        "id": "b65ac05a.92d3b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 1147.9959716796875,
        "y": 371,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "37779f9b.3e84f8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 940.9959487915039,
        "y": 479.9999986886978,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "8619e619.b5b6f"
            ]
        ]
    },
    {
        "id": "b4807db5.ce3f18",
        "type": "set",
        "name": "set vf-module_length",
        "xml": "<set>\n<parameter name='vf-module-length' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' />\n\n",
        "comments": "",
        "x": 1294.995964050293,
        "y": 478.0000126361847,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "8619e619.b5b6f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1101.995994567871,
        "y": 476.99999010562897,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "b4807db5.ce3f18",
                "b7112b63.fa666"
            ]
        ]
    },
    {
        "id": "b7112b63.fa666",
        "type": "for",
        "name": "for each existing vf-index",
        "xml": "<for index='idx' start='0' end='`$vf-module-length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1313.9959335327148,
        "y": 530.9999891519547,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "207d79b0.f0396e"
            ]
        ]
    },
    {
        "id": "207d79b0.f0396e",
        "type": "switchNode",
        "name": "switch vf-module-id found",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id == $vf-module-topology-operation-input.vf-module-information.vf-module-id`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1556.995948791504,
        "y": 525.9999986886978,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "f2b976ec.55b34"
            ]
        ]
    },
    {
        "id": "f2b976ec.55b34",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1754.9959774017334,
        "y": 513.000005364418,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "eab205c1.ee7e8"
            ]
        ]
    },
    {
        "id": "eab205c1.ee7e8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1906.995948791504,
        "y": 514.9999986886978,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "7cce5705.9b51",
                "b161a727.31db88",
                "8cc64f67.5de4c"
            ]
        ]
    },
    {
        "id": "7cce5705.9b51",
        "type": "set",
        "name": "set tmp.vidx and ctx.vnf-data",
        "xml": "<set>\n<parameter name='tmp.vidx' value='`$idx`' />\n<parameter name='ctx.vf-module-data.' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-data.`' />\n",
        "comments": "",
        "x": 2134.996063232422,
        "y": 457.0000025033951,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "b161a727.31db88",
        "type": "set",
        "name": "set vf-module-request-input.",
        "xml": "<set>\n<parameter name='vf-module-request-input.' value='`$ctx.vf-module-data.vf-module-request-input.`' />\n\n",
        "comments": "",
        "x": 2138.996063232422,
        "y": 511.0000025033951,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "b0f3fc53.5db61",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 612.9961547851562,
        "y": 1684.501220703125,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "8cc64f67.5de4c",
        "type": "call",
        "name": "call sotn-get-vf-module-uni-param",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sdwan-get-vf-module-lanport-param' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2169.45108795166,
        "y": 562.0104948282242,
        "z": "5c3e2071.30fcf",
        "wires": [
            []
        ]
    },
    {
        "id": "b5422f78.9d3e4",
        "type": "execute",
        "name": "execute Properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 698.9959564208984,
        "y": 324.5039049386978,
        "z": "5c3e2071.30fcf",
        "wires": [
            []
        ]
    },
    {
        "id": "fc0c6263.7f4b58",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1285,
        "y": 264,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "46df70e6.cbb32",
                "868e2384.9bd088"
            ]
        ]
    },
    {
        "id": "868e2384.9bd088",
        "type": "set",
        "name": "set tmp.vnf-id",
        "xml": "<set>\n<parameter name='tmp.vnf-id' value='`$vf-module-topology-operation-input.vnf-information.vnf-id`' />\n",
        "comments": "",
        "x": 1470,
        "y": 279,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "5950f717.b81e28",
        "type": "get-resource",
        "name": "get-resource generic-vnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"generic-vnf\" \n\t\tkey=\"'generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-id' \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.generic-vnf' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 591,
        "y": 543,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "25602afb.1d9cfe"
            ]
        ]
    },
    {
        "id": "8bfca5dd.ccec38",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 821,
        "y": 591,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "3fb86113.9bfd2e",
                "cea6f99d.9fa3f8"
            ]
        ]
    },
    {
        "id": "cea6f99d.9fa3f8",
        "type": "for",
        "name": "for each relationship in gen-vnf",
        "xml": "<for silentFailure='true' index='vidx' start='0' end='`$tmp.aai.generic-vnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1033,
        "y": 594,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "380b3b11.1fc39c"
            ]
        ]
    },
    {
        "id": "380b3b11.1fc39c",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.src-pnf.relationship-list.relationship[$vidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1259,
        "y": 598,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "6ce242f7.50a224"
            ]
        ]
    },
    {
        "id": "6ce242f7.50a224",
        "type": "outcome",
        "name": "uni",
        "xml": "<outcome value='uni'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1448.285888671875,
        "y": 606.82177734375,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "8f0c299e.76aa68"
            ]
        ]
    },
    {
        "id": "8f0c299e.76aa68",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1623.117431640625,
        "y": 609.3402709960938,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "9cc6d571.b014d8",
                "8d29ebb2.4924b",
                "1b814ca6.da0c53"
            ]
        ]
    },
    {
        "id": "9cc6d571.b014d8",
        "type": "set",
        "name": "set tmp.unis.uni[].tpId",
        "xml": "<set>\n<parameter name='`tmp.unis.uni[$vidx].tpId`' value=\"`$tmp.aai.src-pnf.relationship-list.relationship[$vidx].relationship-data[0].relationship-value`\" />\n\n",
        "comments": "",
        "x": 1840.117431640625,
        "y": 607.3402709960938,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "3fb86113.9bfd2e",
        "type": "switchNode",
        "name": "switch number of unis  less than two",
        "xml": "<switch test='`$tmp.unis.uni_length &lt; 2`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1008,
        "y": 758,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "ca909120.1610f"
            ]
        ]
    },
    {
        "id": "6807aab1.3361f4",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n\n",
        "comments": "",
        "x": 1416,
        "y": 760,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "ca909120.1610f",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1224,
        "y": 759,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "6807aab1.3361f4"
            ]
        ]
    },
    {
        "id": "8d29ebb2.4924b",
        "type": "execute",
        "name": "execute split tpId to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`tmp.unis.uni[$vidx].tpId`'/>\n<parameter name=\"regex\" value=\"nodeId\"/>\n<parameter name=\"tmp.unis.uni[$vidx].pnf-name\" value=\"\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1879,
        "y": 682,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "8df25e56.70ef2",
                "5281d33f.6cf23c"
            ]
        ]
    },
    {
        "id": "5281d33f.6cf23c",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2102,
        "y": 637,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "98c7bac7.1f7b2"
            ]
        ]
    },
    {
        "id": "8df25e56.70ef2",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2104,
        "y": 701,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "538dd561.19c994"
            ]
        ]
    },
    {
        "id": "98c7bac7.1f7b2",
        "type": "set",
        "name": "set ipAddress prefixLength",
        "xml": "<set>\n<parameter name='prop.lan.ip-address' value='`$ipandMask[0]`' />\n<parameter name='prop.lan.prefixLength' value='`$ipandMask[1]`' />",
        "comments": "",
        "x": 2324,
        "y": 639,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "538dd561.19c994",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 2263,
        "y": 720,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "1b814ca6.da0c53",
        "type": "get-resource",
        "name": "get-resource pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"'pnf.pnf-name = $tmp.unis.uni[$vidx].pnf-name'\n\t\tAND depth = '0'\"\n        pfx='tmp.aai.pnf' local-only='false' >\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\t\tresource=\"generic-vnf\" -->\n<!--\t\tkey=\"'generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-id' -->\n<!--\t\tAND depth = '0'\"-->\n<!--        pfx='tmp.aai.generic-vnf' local-only='false' >-->",
        "comments": "",
        "outputs": 1,
        "x": 1809,
        "y": 819,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "a9afb163.16d81"
            ]
        ]
    },
    {
        "id": "6d7469b.d065118",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2168.88232421875,
        "y": 827.6556396484375,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "d8ebfcdc.d7e228",
                "e363b1ad.6cf518"
            ]
        ]
    },
    {
        "id": "d8ebfcdc.d7e228",
        "type": "set",
        "name": "set node-id",
        "xml": "<set>\n<parameter name='`$tmp.unis.uni[$vidx].node-id`' value=\"`$tmp.aai.pnf.pnf-id`\" />\n",
        "comments": "",
        "x": 2348,
        "y": 781,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "e363b1ad.6cf518",
        "type": "for",
        "name": "for each relationship in pnf",
        "xml": "<for silentFailure='true' index='ridx' start='0' end='`$tmp.aai.pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2360.882568359375,
        "y": 867.6597290039062,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "95c7940c.2b5948"
            ]
        ]
    },
    {
        "id": "95c7940c.2b5948",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.src-pnf.relationship-list.relationship[$vidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2586.882568359375,
        "y": 867.6597290039062,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "a1776b53.b80d",
                "af94fb8e.80dfb8"
            ]
        ]
    },
    {
        "id": "af94fb8e.80dfb8",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2785,
        "y": 980,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "127afd4b.34da43"
            ]
        ]
    },
    {
        "id": "127afd4b.34da43",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2998,
        "y": 981,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "9a33ae38.4ad288",
                "b1e1b5aa.ff6b18"
            ]
        ]
    },
    {
        "id": "9a33ae38.4ad288",
        "type": "set",
        "name": "set network-id",
        "xml": "<set>\n<parameter name='`$tmp.unis.uni[$vidx].network-id`' value=\"`$tmp.aai.pnf.relationship-list.relationship[$ridx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 3233,
        "y": 911,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "b1e1b5aa.ff6b18",
        "type": "get-resource",
        "name": "get-resource network-resource",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"network-resource\" \n\t\tkey=\"'network-resource.network-id = $tmp.unis.uni[$vidx].network-id'\n\t\tAND depth = '0'\"\n        pfx='tmp.aai.network-resource' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3241,
        "y": 992,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "7923986a.2dfdb"
            ]
        ]
    },
    {
        "id": "7923986a.2dfdb",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3473.5,
        "y": 988,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "e1de0e95.dce97"
            ]
        ]
    },
    {
        "id": "e1de0e95.dce97",
        "type": "set",
        "name": "set network-id, topo-id, client-id, etc",
        "xml": "<set>\n<parameter name=\"`$tmp.unis.uni[$vidx].network-id`\" value=\"`$tmp.aai.network-resource.network-id`\" />\n<parameter name=\"`$tmp.unis.uni[$vidx].provider-id`\" value=\"`$tmp.aai.network-resource.provider-id`\" />\n<parameter name=\"`$tmp.unis.uni[$vidx].client-id`\" value=\"`$tmp.aai.network-resource.client-id`\" />\n<parameter name=\"`$tmp.unis.uni[$vidx].te-topo-id`\" value=\"`$tmp.aai.network-resource.te-topo-id`\" />\n<parameter name=\"`$tmp.unis.uni[$vidx].network-type`\" value=\"`$tmp.aai.network-resource.network-type`\" />\n\n\n",
        "comments": "",
        "x": 3742,
        "y": 987,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "aeddedc2.f06158",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:sotn-get-otn-tunnel-path-from-oof",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sotn-get-otn-tunnel-path-from-oof' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 797,
        "y": 905,
        "z": "5c3e2071.30fcf",
        "wires": [
            []
        ]
    },
    {
        "id": "a1776b53.b80d",
        "type": "outcome",
        "name": "thirdparty-controller",
        "xml": "<outcome value='thirdparty-controller'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2812,
        "y": 845,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "4c01f776.c87b7"
            ]
        ]
    },
    {
        "id": "4c01f776.c87b7",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3025,
        "y": 846,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "583e9b05.f6eef4"
            ]
        ]
    },
    {
        "id": "583e9b05.f6eef4",
        "type": "set",
        "name": "set thirdparty-sdnc-id",
        "xml": "<set>\n<parameter name='`$tmp.unis.uni[$vidx].thirdparty-sdnc-id`' value=\"`$tmp.aai.pnf.relationship-list.relationship[$ridx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 3252,
        "y": 845,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "d059a84d.8e506",
        "type": "comment",
        "name": "when we reach here, we have 2 UNIs, so do ACTN operations",
        "info": "",
        "comments": "",
        "x": 810,
        "y": 851,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "f2975c47.fb694",
        "type": "for",
        "name": "for vidx..unis.uni_length[]",
        "xml": "<for index='vidx' start='0' end='`$tmp.unis.uni_length`' >",
        "comments": "",
        "outputs": 1,
        "x": 663,
        "y": 1097,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "de539d0a.26596"
            ]
        ]
    },
    {
        "id": "3b0a5525.2ac102",
        "type": "set",
        "name": "set oof.vpn",
        "xml": "<set>\n<parameter name='oof.vpn.' value='`$tmp.unis.uni[$vidx].`' />",
        "comments": "",
        "x": 1089.0272216796875,
        "y": 1036.040771484375,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "29b92baa.41f5cc",
        "type": "set",
        "name": "set controller data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n",
        "comments": "",
        "x": 1569.0272216796875,
        "y": 1149.0407409667969,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "82572a7a.757f1",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1399.0272216796875,
        "y": 1149.0407409667969,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "29b92baa.41f5cc"
            ]
        ]
    },
    {
        "id": "7ff0b8e4.d0edd",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1403.0272216796875,
        "y": 1189.0407409667969,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "d2605932.de72d8"
            ]
        ]
    },
    {
        "id": "bcaaab5e.f760b",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1395.0272216796875,
        "y": 1229.0407409667969,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "c5af9444.32cba8"
            ]
        ]
    },
    {
        "id": "d2605932.de72d8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 1553.0272216796875,
        "y": 1189.0407409667969,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "c5af9444.32cba8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 1553.0272216796875,
        "y": 1229.0407409667969,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "dc15d354.485648",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1399.0272216796875,
        "y": 1269.0407409667969,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "189365cc.5aa2da"
            ]
        ]
    },
    {
        "id": "36cada17.d60606",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1395.0272216796875,
        "y": 1309.0407409667969,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "436f764c.14ed4"
            ]
        ]
    },
    {
        "id": "436f764c.14ed4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing get token rest api\" />\n",
        "comments": "",
        "x": 1553.0272216796875,
        "y": 1309.0407409667969,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "189365cc.5aa2da",
        "type": "set",
        "name": "set token-id",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
        "comments": "",
        "x": 1549.5272216796875,
        "y": 1269.0407409667969,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "bce6bff8.ae1f18",
        "type": "comment",
        "name": "Get controller info and send request",
        "info": "",
        "comments": "",
        "x": 1161.0272216796875,
        "y": 1149.0407409667969,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "8c2f104c.2ab35",
        "type": "get-resource",
        "name": "get-resource esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $oof.vpn.thirdparty-sdnc-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1153.0272216796875,
        "y": 1189.0407409667969,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "82572a7a.757f1",
                "7ff0b8e4.d0edd",
                "bcaaab5e.f760b"
            ]
        ]
    },
    {
        "id": "e9d11d4a.ea432",
        "type": "execute",
        "name": "execute RestApiCallNode Get token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1165.5272216796875,
        "y": 1289.0407409667969,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "dc15d354.485648",
                "36cada17.d60606"
            ]
        ]
    },
    {
        "id": "81bac551.cc757",
        "type": "comment",
        "name": "call domain controller to  create underlay OTN tunnel",
        "info": "",
        "comments": "",
        "x": 1214.5272216796875,
        "y": 1374.49560546875,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "f9c270fa.7abd5",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:sotn-create-otn-tunnel",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sotn-create-otn-tunnel' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1234.5272216796875,
        "y": 1418.49560546875,
        "z": "5c3e2071.30fcf",
        "wires": [
            []
        ]
    },
    {
        "id": "de539d0a.26596",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 816.5272216796875,
        "y": 1429.0407409667969,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "8c2f104c.2ab35",
                "3b0a5525.2ac102",
                "2c3edd05.477cca",
                "543dd31e.1a6c4c",
                "e9d11d4a.ea432",
                "ab256b41.e2d9b8",
                "f9c270fa.7abd5"
            ]
        ]
    },
    {
        "id": "641e0b16.a7aa44",
        "type": "comment",
        "name": "Loop through UNIs and configure domain controllers",
        "info": "",
        "comments": "",
        "x": 751.5003662109375,
        "y": 1237.5003662109375,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "2c3edd05.477cca",
        "type": "set",
        "name": "set sotn_value",
        "xml": "<set>\n<parameter name='ietf-eth-tran-service_etht-svc.globals.etht-svc-bandwidth-profiles[0].bandwidth-profile-type' value='ietf-eth-tran-types:mef-10-bwp' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-type' value='ietf-eth-tran-types:p2p-svc' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].admin-status' value='ietf-te-types:tunnel-state-up' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].access-port-id' value='0' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].service-classification-type' value='ietf-eth-tran-types:port-classification' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].access-port-id' value='1' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].service-classification-type' value='ietf-eth-tran-types:port-classification' />",
        "comments": "",
        "x": 1080.52734375,
        "y": 1497.040771484375,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "543dd31e.1a6c4c",
        "type": "set",
        "name": "set attachment_param",
        "xml": "<set>\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].access-provider-id' value='`$oof.vpn.access-provider-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].access-client-id' value='`$oof.vpn.access-client-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].access-topology-id' value='`$oof.vpn.access-topology-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].access-ltp-id' value='`$oof.vpn.dst-access-ltp-id`' />\n\n",
        "comments": "",
        "x": 1105.02734375,
        "y": 1537.040771484375,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "ab256b41.e2d9b8",
        "type": "switchNode",
        "name": "switch prop.sdncRestApi.token_id",
        "xml": "<switch test=\"`$prop.sdncRestApi.token_id`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1140.52734375,
        "y": 1577.040771484375,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "7aea425d.d2ac8c",
                "c6896fdc.d8f088"
            ]
        ]
    },
    {
        "id": "e7a0edea.212a28",
        "type": "execute",
        "name": "execute RestconfApiCallNode Create ethernet Service with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfapicall.RestconfApiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/sdnc/restapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1657.52734375,
        "y": 1597.040771484375,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "dc79f422.6ffec8",
                "fce6e76c.ef0f5"
            ]
        ]
    },
    {
        "id": "dc79f422.6ffec8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2001.02734375,
        "y": 1597.040771484375,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "e78610af.f485d"
            ]
        ]
    },
    {
        "id": "e78610af.f485d",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2158.52734375,
        "y": 1597.040771484375,
        "z": "5c3e2071.30fcf",
        "wires": [
            []
        ]
    },
    {
        "id": "3c748274.94d126",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
        "comments": "",
        "x": 2155.02734375,
        "y": 1557.040771484375,
        "z": "5c3e2071.30fcf",
        "wires": []
    },
    {
        "id": "fce6e76c.ef0f5",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1997.02734375,
        "y": 1557.040771484375,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "3c748274.94d126"
            ]
        ]
    },
    {
        "id": "7aea425d.d2ac8c",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1353.3711738586426,
        "y": 1557.162670135498,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "7a6c581b.b1ed5"
            ]
        ]
    },
    {
        "id": "c6896fdc.d8f088",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1357.02734375,
        "y": 1597.040771484375,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "e7a0edea.212a28"
            ]
        ]
    },
    {
        "id": "7a6c581b.b1ed5",
        "type": "execute",
        "name": "execute RestconfApiCallNode Create ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfapicall.RestconfApiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/sdnc/restapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1667.52734375,
        "y": 1557.040771484375,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "fce6e76c.ef0f5",
                "dc79f422.6ffec8"
            ]
        ]
    },
    {
        "id": "25602afb.1d9cfe",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 722,
        "y": 672,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "8bfca5dd.ccec38"
            ]
        ]
    },
    {
        "id": "a9afb163.16d81",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1992,
        "y": 826,
        "z": "5c3e2071.30fcf",
        "wires": [
            [
                "6d7469b.d065118"
            ]
        ]
    }
]