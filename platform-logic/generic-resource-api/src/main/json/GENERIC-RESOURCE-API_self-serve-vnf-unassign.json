[
    {
        "id": "76165194.b6c96",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 165.71429443359375,
        "y": 75.71428680419922,
        "z": "303dc9e1.28f7b6",
        "wires": [
            [
                "236f2975.7a6d96"
            ]
        ]
    },
    {
        "id": "5e292d5b.0c61b4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 209.44049835205078,
        "y": 194.4920768737793,
        "z": "303dc9e1.28f7b6",
        "wires": [
            [
                "8e6fd286.da7e4",
                "9cf90cf3.4244d",
                "c41a4b38.3c8b38",
                "f9a09d54.7ab46",
                "59a68f10.20a5"
            ]
        ]
    },
    {
        "id": "c3f3aa48.2e3088",
        "type": "method",
        "name": "method self-serve-vnf-unassign",
        "xml": "<method rpc='self-serve-vnf-unassign' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 282.47620391845703,
        "y": 130.4206418991089,
        "z": "303dc9e1.28f7b6",
        "wires": [
            [
                "5e292d5b.0c61b4"
            ]
        ]
    },
    {
        "id": "236f2975.7a6d96",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 440.9524917602539,
        "y": 75.9047794342041,
        "z": "303dc9e1.28f7b6",
        "wires": [
            [
                "c3f3aa48.2e3088"
            ]
        ]
    },
    {
        "id": "aed7b0d8.edb31",
        "type": "for",
        "name": "foreach vnf-parameters-data.param[]",
        "xml": "<for index='pidx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 792.4646072387695,
        "y": 473.2738456726074,
        "z": "303dc9e1.28f7b6",
        "wires": [
            [
                "4c583cb3.a2e9b4",
                "d15480d3.12273"
            ]
        ]
    },
    {
        "id": "13c9ccf0.5ce9c3",
        "type": "switchNode",
        "name": "switch resource-resolution-data.status",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$pidx].resource-resolution-data.status`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1091.5598983764648,
        "y": 695.5477423667908,
        "z": "303dc9e1.28f7b6",
        "wires": [
            [
                "e71d8f06.04b4e",
                "f1d7b373.953da"
            ]
        ]
    },
    {
        "id": "e71d8f06.04b4e",
        "type": "other",
        "name": "SUCCESS",
        "xml": "<outcome value='SUCCESS'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1366.9528999328613,
        "y": 696.2619976997375,
        "z": "303dc9e1.28f7b6",
        "wires": [
            [
                "17e4f190.77d57e"
            ]
        ]
    },
    {
        "id": "8e6fd286.da7e4",
        "type": "for",
        "name": "foreach capability-order[]",
        "xml": "<for index='cidx' start='0' end='`$ss.capability.execution-order_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 458.0358428955078,
        "y": 328.4642505645752,
        "z": "303dc9e1.28f7b6",
        "wires": [
            [
                "53aeb795.8d7128",
                "fc9f38f4.0c2118",
                "aed7b0d8.edb31",
                "88725cd7.d671f"
            ]
        ]
    },
    {
        "id": "4c583cb3.a2e9b4",
        "type": "switchNode",
        "name": "switch param capability-name == execution",
        "xml": "<switch test='`$ss.capability-name == $tmp.param.capability-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1148.357521057129,
        "y": 516.9999752044678,
        "z": "303dc9e1.28f7b6",
        "wires": [
            [
                "b2f5ce63.5ec31"
            ]
        ]
    },
    {
        "id": "b2f5ce63.5ec31",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1411.857521057129,
        "y": 517.2499752044678,
        "z": "303dc9e1.28f7b6",
        "wires": [
            [
                "6eaca446.a10d9c"
            ]
        ]
    },
    {
        "id": "17e4f190.77d57e",
        "type": "call",
        "name": "call ss.capability-dg",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='`$ss.capability-dg`' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1572.071632385254,
        "y": 696.0238490104675,
        "z": "303dc9e1.28f7b6",
        "wires": [
            [
                "d6448b55.e69ab8",
                "87e5a636.7bc3f8"
            ]
        ]
    },
    {
        "id": "53aeb795.8d7128",
        "type": "set",
        "name": "ss.capability-name",
        "xml": "<set>\n<parameter name='ss.capability-name' value='`$ss.capability.execution-order[$cidx]`' />\n\n<!--\nss.capability.execution-order[]\n-->\n",
        "comments": "",
        "x": 738.3928985595703,
        "y": 328.4167022705078,
        "z": "303dc9e1.28f7b6",
        "wires": []
    },
    {
        "id": "d15480d3.12273",
        "type": "set",
        "name": "tmp.param.capability-name",
        "xml": "<set>\n<parameter name='tmp.param.capability-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$pidx].resource-resolution-data.capability-name`' />\n",
        "comments": "",
        "x": 1097.7145462036133,
        "y": 471.60718536376953,
        "z": "303dc9e1.28f7b6",
        "wires": []
    },
    {
        "id": "fc9f38f4.0c2118",
        "type": "set",
        "name": "set ss.capability.action = unassign",
        "xml": "<set>\n<parameter name='ss.capability-action' value='unassign' />\n",
        "comments": "",
        "x": 785.1070404052734,
        "y": 375.3332862854004,
        "z": "303dc9e1.28f7b6",
        "wires": []
    },
    {
        "id": "d6448b55.e69ab8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1756.9641418457031,
        "y": 696.0239100456238,
        "z": "303dc9e1.28f7b6",
        "wires": [
            [
                "2977dc30.549ee4"
            ]
        ]
    },
    {
        "id": "88725cd7.d671f",
        "type": "set",
        "name": "set capability-dg",
        "xml": "<set>\n<parameter name='ss.capability-dg' value=\"`'self-serve-' + $ss.capability.execution-order[$cidx]`\" />\n",
        "comments": "",
        "x": 729.5357284545898,
        "y": 424.22620010375977,
        "z": "303dc9e1.28f7b6",
        "wires": []
    },
    {
        "id": "cd466606.4c16b8",
        "type": "execute",
        "name": "generate ss-vnf url replace service-instance-id",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.ss-vnf-assignments`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ss-vnf-url\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2239.8215255737305,
        "y": 749.9056353569031,
        "z": "303dc9e1.28f7b6",
        "wires": [
            []
        ]
    },
    {
        "id": "facf39f.6d396c8",
        "type": "execute",
        "name": "execute RestApiCallNode - PUT vnf",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ss.vnf.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ss-vnf-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ss-vnf\" />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2209.285820007324,
        "y": 852.7628569602966,
        "z": "303dc9e1.28f7b6",
        "wires": [
            [
                "d6b3aa2.7030758",
                "4ad4756c.b7b35c"
            ]
        ]
    },
    {
        "id": "d6b3aa2.7030758",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2483.8794860839844,
        "y": 906.7610106468201,
        "z": "303dc9e1.28f7b6",
        "wires": [
            [
                "f21e0168.83df2"
            ]
        ]
    },
    {
        "id": "4ad4756c.b7b35c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2476.308120727539,
        "y": 853.2610306739807,
        "z": "303dc9e1.28f7b6",
        "wires": [
            [
                "f21e0168.83df2"
            ]
        ]
    },
    {
        "id": "f21e0168.83df2",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2678.440444946289,
        "y": 852.905285358429,
        "z": "303dc9e1.28f7b6",
        "wires": [
            [
                "3798eb1e.07c1a4"
            ]
        ]
    },
    {
        "id": "3798eb1e.07c1a4",
        "type": "configure",
        "name": "set error-message",
        "xml": "<set>\n<parameter name=\"error-message\" value=\"Error persisting self-serve vnf assignments in MD-SAL during unassign\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2896.7262115478516,
        "y": 853.0481486320496,
        "z": "303dc9e1.28f7b6",
        "wires": [
            []
        ]
    },
    {
        "id": "d4697d10.10b26",
        "type": "set",
        "name": "set vf data for restapi-call-node",
        "xml": "<set>\n<parameter name='vf.vnf-id'\n    value='`$service-data.vnfs.vnf[$vnf-index].vnf-id`' />\n<parameter name='vf.vnf-data.sdnc-request-header.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.sdnc-request-header.`' />\n<parameter name='vf.vnf-data.request-information.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.request-information.`' />\n<parameter name='vf.vnf-data.service-information.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.`' />\n<parameter name='vf.vnf-data.vnf-information.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-information.`' />\n<parameter name='vf.vnf-data.vnf-request-input.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-request-input.`' />\n<parameter name='vf.vnf-data.vnf-request-input.vnf-input-parameters.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-request-input.vnf-input-parameters.`' />\n<parameter name='vf.vnf-data.vnf-topology.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.`' />\n<parameter name='vf.vnf-data.vnf-level-oper-status.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.`' />",
        "comments": "",
        "x": 2192.273826599121,
        "y": 696.0001473426819,
        "z": "303dc9e1.28f7b6",
        "wires": []
    },
    {
        "id": "f5cfb551.80d6c8",
        "type": "execute",
        "name": "generate ss-vnf url - replace vnf-id",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.ss-vnf-url`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ss-vnf-url\"/>\n    <parameter name=\"target\" value=\"{vnf-id}\"/>\n    <parameter name=\"replacement\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-id`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2204.1072311401367,
        "y": 800.714403629303,
        "z": "303dc9e1.28f7b6",
        "wires": [
            []
        ]
    },
    {
        "id": "2977dc30.549ee4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1917.9168167114258,
        "y": 695.7620215415955,
        "z": "303dc9e1.28f7b6",
        "wires": [
            [
                "cd466606.4c16b8",
                "facf39f.6d396c8",
                "d4697d10.10b26",
                "f5cfb551.80d6c8",
                "d61e4f37.d59c8"
            ]
        ]
    },
    {
        "id": "d61e4f37.d59c8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Failed to unassign self-serve vnf assignments for ' + $ss.capability-dg + ' with error: ' + $error-message`\" />\n",
        "comments": "",
        "x": 2138.8217849731445,
        "y": 980.5358049869537,
        "z": "303dc9e1.28f7b6",
        "wires": []
    },
    {
        "id": "f9a09d54.7ab46",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/ss-vnf-assign.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 406.26222229003906,
        "y": 1234.6311283111572,
        "z": "303dc9e1.28f7b6",
        "wires": [
            []
        ]
    },
    {
        "id": "9cf90cf3.4244d",
        "type": "set",
        "name": "set ss.capability.execution-order[]",
        "xml": "<set>\n<parameter name='ss.capability.execution-order[0]' value='mS-mac-address-assign' />\n<parameter name='ss.capability.execution-order[1]' value='mac-address-assign' />\n<parameter name='ss.capability.execution-order[2]' value='netbox-ip-assign' />\n<parameter name='ss.capability.execution-order[3]' value='eipam-ip-assignment' />\n<parameter name='ss.capability.execution-order[4]' value='mS-vlan-tag-assign' />\n<parameter name='ss.capability.execution-order[5]' value='vlan-tag-assign' />\n<parameter name='ss.capability.execution-order[6]' value='alts-license-assign' />\n<parameter name='ss.capability.execution-order[7]' value='alts-entitlement-assign' />\n<parameter name='ss.capability.execution-order[8]' value='generate-name' />\n<parameter name='ss.capability.execution-order_length' value='9' />",
        "comments": "",
        "x": 488.9643325805664,
        "y": 194.71429061889648,
        "z": "303dc9e1.28f7b6",
        "wires": []
    },
    {
        "id": "c41a4b38.3c8b38",
        "type": "set",
        "name": "set ss.capability-type = vnf",
        "xml": "<set>\n<parameter name='ss.capability-type' value='vnf' />\n",
        "comments": "",
        "x": 468.5714340209961,
        "y": 234.2857208251953,
        "z": "303dc9e1.28f7b6",
        "wires": []
    },
    {
        "id": "f1d7b373.953da",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1357.2737617492676,
        "y": 763.511917591095,
        "z": "303dc9e1.28f7b6",
        "wires": [
            [
                "770743b2.c0595c"
            ]
        ]
    },
    {
        "id": "770743b2.c0595c",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"`'SS: resource-resolution-data.status: ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$pidx].resource-resolution-data.status`\"/>\n<parameter name=\"field2\" value=\"`'SS: ss.capability-name: ' + $ss.capability-name`\"/>\n<parameter name=\"field3\" value=\"`'SS: tmp.param.capability-name: ' + $tmp.param.capability-name`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1505.3809432983398,
        "y": 763.5476231575012,
        "z": "303dc9e1.28f7b6",
        "wires": [
            []
        ]
    },
    {
        "id": "6eaca446.a10d9c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 807.1428298950195,
        "y": 695.6666359901428,
        "z": "303dc9e1.28f7b6",
        "wires": [
            [
                "ae3d848d.b63f78",
                "13c9ccf0.5ce9c3"
            ]
        ]
    },
    {
        "id": "ae3d848d.b63f78",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 985.5714721679688,
        "y": 1128.2381744384766,
        "z": "303dc9e1.28f7b6",
        "wires": []
    },
    {
        "id": "87e5a636.7bc3f8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1784.4643249511719,
        "y": 881.964298248291,
        "z": "303dc9e1.28f7b6",
        "wires": [
            [
                "c5b341ce.afbb1"
            ]
        ]
    },
    {
        "id": "c5b341ce.afbb1",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"`'DONE: ' + $ss.capability-dg`\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1928.2143249511719,
        "y": 880.714298248291,
        "z": "303dc9e1.28f7b6",
        "wires": [
            []
        ]
    },
    {
        "id": "a4639d29.fba05",
        "type": "execute",
        "name": "execute PropertiesNode",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 877.7143685477122,
        "y": 281.0000043596541,
        "z": "303dc9e1.28f7b6",
        "wires": [
            []
        ]
    },
    {
        "id": "59a68f10.20a5",
        "type": "switchNode",
        "name": "switch prop.controller.user",
        "xml": "<switch test='`$prop.controller.user`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 466.42860412597656,
        "y": 281.4286251068115,
        "z": "303dc9e1.28f7b6",
        "wires": [
            [
                "e826631e.9bcf2"
            ]
        ]
    },
    {
        "id": "e826631e.9bcf2",
        "type": "failure",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 666.2856995718821,
        "y": 281.0000396456038,
        "z": "303dc9e1.28f7b6",
        "wires": [
            [
                "a4639d29.fba05"
            ]
        ]
    }
]