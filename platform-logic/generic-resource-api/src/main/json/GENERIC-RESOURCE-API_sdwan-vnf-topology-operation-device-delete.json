[
  {
    "id": "a1df0c8c.e610f",
    "type": "switchNode",
    "name": "switch service-data.vnfs.vnf_length",
    "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 652.5634536743164,
    "y": 312.26116919517517,
    "z": "42785b1.0f2e6a4",
    "wires": [
      [
        "a23f9932.76df28",
        "eec5abe1.727dc8"
      ]
    ]
  },
  {
    "id": "dda3e77b.e1de28",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 114.46875,
    "y": 76.9999988079071,
    "z": "42785b1.0f2e6a4",
    "wires": [
      [
        "b55d96f3.653dc8"
      ]
    ]
  },
  {
    "id": "b55d96f3.653dc8",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 189.75445556640625,
    "y": 117.23811030387878,
    "z": "42785b1.0f2e6a4",
    "wires": [
      [
        "e0c2d3e0.8a2bb"
      ]
    ]
  },
  {
    "id": "8ad52b68.cd0138",
    "type": "comment",
    "name": "wan port-vnf-topology-operation-delete",
    "info": "",
    "comments": "",
    "x": 563.8136672973633,
    "y": 150.58639788627625,
    "z": "42785b1.0f2e6a4",
    "wires": []
  },
  {
    "id": "c136d1d8.af3e6",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 191.13541412353516,
    "y": 378.6666705608368,
    "z": "42785b1.0f2e6a4",
    "wires": [
      [
        "13bff567.359d0b",
        "acde315f.a495",
        "a72c9897.585208",
        "d19a177f.7de988",
        "30536e3.568f592",
        "a1df0c8c.e610f",
        "9db50f7b.a0897",
        "4dffba9e.fd0434",
        "28632f25.b7972"
      ]
    ]
  },
  {
    "id": "a23f9932.76df28",
    "type": "other",
    "name": "outcome Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 917.2857666015625,
    "y": 294.81679129600525,
    "z": "42785b1.0f2e6a4",
    "wires": [
      [
        "81cc943f.50f958"
      ]
    ]
  },
  {
    "id": "81cc943f.50f958",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 1098.2856369018555,
    "y": 289.81666922569275,
    "z": "42785b1.0f2e6a4",
    "wires": []
  },
  {
    "id": "eec5abe1.727dc8",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 902.7857666015625,
    "y": 346.8167541027069,
    "z": "42785b1.0f2e6a4",
    "wires": [
      [
        "679d4612.15d218"
      ]
    ]
  },
  {
    "id": "679d4612.15d218",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1074.785472869873,
    "y": 346.8167521953583,
    "z": "42785b1.0f2e6a4",
    "wires": [
      [
        "862951df.5fe1d",
        "dc6fa4c3.5ecea8"
      ]
    ]
  },
  {
    "id": "dc6fa4c3.5ecea8",
    "type": "switchNode",
    "name": "switch tmp.vidx ",
    "xml": "<switch test=\"`$tmp.vidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1249.78564453125,
    "y": 365.81667399406433,
    "z": "42785b1.0f2e6a4",
    "wires": [
      [
        "1c173742.b90799"
      ]
    ]
  },
  {
    "id": "30536e3.568f592",
    "type": "switchNode",
    "name": "switch vnf-level-oper-status",
    "xml": "<switch test='`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.order-status`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 622.9524536132812,
    "y": 386.70563292503357,
    "z": "42785b1.0f2e6a4",
    "wires": [
      [
        "ba7f62e0.c87a8",
        "246d8ed1.13b9e2"
      ]
    ]
  },
  {
    "id": "ba7f62e0.c87a8",
    "type": "outcome",
    "name": "outcome PendingDelete",
    "xml": "<outcome value='PendingDelete'>\n",
    "comments": "",
    "outputs": 1,
    "x": 913.7857208251953,
    "y": 390.81675601005554,
    "z": "42785b1.0f2e6a4",
    "wires": [
      [
        "7fe1211e.ac713"
      ]
    ]
  },
  {
    "id": "246d8ed1.13b9e2",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 859.7857818603516,
    "y": 437.8167598247528,
    "z": "42785b1.0f2e6a4",
    "wires": [
      [
        "7d27948.1b45c6c"
      ]
    ]
  },
  {
    "id": "7d27948.1b45c6c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VNF is not in appropriate state for activate. Current state is ' + $service-data.vnfs.vnf[$tmp.nidx].vnf-data.vnf-level-oper-status.order-status`\" />",
    "comments": "",
    "x": 1019.2855491638184,
    "y": 440.8167588710785,
    "z": "42785b1.0f2e6a4",
    "wires": []
  },
  {
    "id": "9db50f7b.a0897",
    "type": "switchNode",
    "name": "switch vnf-id",
    "xml": "<switch test=\"`$vnf-topology-operation-input.vnf-information.vnf-id`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 588.7857704162598,
    "y": 267.81676268577576,
    "z": "42785b1.0f2e6a4",
    "wires": [
      [
        "2d92055a.30ffda"
      ]
    ]
  },
  {
    "id": "2d92055a.30ffda",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>",
    "comments": "",
    "outputs": 1,
    "x": 786.7858352661133,
    "y": 257.81677508354187,
    "z": "42785b1.0f2e6a4",
    "wires": [
      [
        "889ae61d.096b48"
      ]
    ]
  },
  {
    "id": "889ae61d.096b48",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-request-input.vnf-input-parameters.name is a required input\" />\n",
    "comments": "",
    "x": 953.2857208251953,
    "y": 254.81676936149597,
    "z": "42785b1.0f2e6a4",
    "wires": []
  },
  {
    "id": "862951df.5fe1d",
    "type": "for",
    "name": "for vidx..service-data.vnfs.vnf[]",
    "xml": "<for index='vidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1310.2856483459473,
    "y": 301.81667017936707,
    "z": "42785b1.0f2e6a4",
    "wires": [
      [
        "91f5b0d9.94102"
      ]
    ]
  },
  {
    "id": "91f5b0d9.94102",
    "type": "switchNode",
    "name": "switch vnf-id found",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-id == $vnf-topology-operation-input.vnf-information.vnf-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1566.2856674194336,
    "y": 301.81667017936707,
    "z": "42785b1.0f2e6a4",
    "wires": [
      [
        "8dc7c708.bc5718"
      ]
    ]
  },
  {
    "id": "8dc7c708.bc5718",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1742.7857208251953,
    "y": 304.81667017936707,
    "z": "42785b1.0f2e6a4",
    "wires": [
      [
        "2d4f17e9.19c368"
      ]
    ]
  },
  {
    "id": "dd40fac0.73a058",
    "type": "set",
    "name": "set tmp.vidx and ctx.vnf-data",
    "xml": "<set>\n<parameter name='tmp.vidx' value='`$vidx`' />\n<parameter name='ctx.vnf-data.' value='`$service-data.vnfs.vnf[$vidx].vnf-data.`' />\n",
    "comments": "",
    "x": 2159.785934448242,
    "y": 383.8167221546173,
    "z": "42785b1.0f2e6a4",
    "wires": []
  },
  {
    "id": "59a5fc66.f24204",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 1555.285659790039,
    "y": 365.81667399406433,
    "z": "42785b1.0f2e6a4",
    "wires": []
  },
  {
    "id": "1c173742.b90799",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1417.785659790039,
    "y": 365.81667399406433,
    "z": "42785b1.0f2e6a4",
    "wires": [
      [
        "59a5fc66.f24204"
      ]
    ]
  },
  {
    "id": "a72c9897.585208",
    "type": "set",
    "name": "set vnfId and vnf-object-path",
    "xml": "<set>\n<parameter name='vnfId' value='`$vnf-topology-operation-input.vnf-information.vnf-id`' />\n<parameter name='vnf-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vnf-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'` \" />",
    "comments": "",
    "x": 600.8021850585938,
    "y": 562.3334157466888,
    "z": "42785b1.0f2e6a4",
    "wires": []
  },
  {
    "id": "d19a177f.7de988",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 549.9133453369141,
    "y": 687.8888461589813,
    "z": "42785b1.0f2e6a4",
    "wires": []
  },
  {
    "id": "13bff567.359d0b",
    "type": "set",
    "name": "set new vnf length",
    "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf_length\" value=\"`$service-data.vnfs.vnf_length - 1`\"/>\n\n\t\n",
    "comments": "",
    "x": 581.4347686767578,
    "y": 459.8042733669281,
    "z": "42785b1.0f2e6a4",
    "wires": []
  },
  {
    "id": "acde315f.a495",
    "type": "set",
    "name": "Remove vnf from ServiceData",
    "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf[$tmp.vidx].\" value=\"\"/>\n\n",
    "comments": "",
    "x": 617.0589599609375,
    "y": 503.77224040031433,
    "z": "42785b1.0f2e6a4",
    "wires": []
  },
  {
    "id": "7fe1211e.ac713",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1111.0921211242676,
    "y": 401.14191031455994,
    "z": "42785b1.0f2e6a4",
    "wires": [
      []
    ]
  },
  {
    "id": "e0c2d3e0.8a2bb",
    "type": "method",
    "name": "method sdwan-vnf-topology-operation-device-delete",
    "xml": "<method rpc='sdwan-vnf-topology-operation-device-delete' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 195,
    "y": 233.26116919517517,
    "z": "42785b1.0f2e6a4",
    "wires": [
      [
        "c136d1d8.af3e6"
      ]
    ]
  },
  {
    "id": "4dffba9e.fd0434",
    "type": "execute",
    "name": "execute requiredParameters",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='requiredParameters' >\n<parameter name=\"vnf-topology-operation-input.vnf-information.vnf-id\" value=\"$vnf-topology-operation-input.vnf-information.vnf-id\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 646.2858276367188,
    "y": 207.81676173210144,
    "z": "42785b1.0f2e6a4",
    "wires": [
      []
    ]
  },
  {
    "id": "7385dfef.35179",
    "type": "delete",
    "name": "delete wan port instance configuration in AAI",
    "xml": "<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" resource='device' \n        key='device.id = $vnf-topology-operation-input.vnf-information.vnf-id'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1050.0001640319824,
    "y": 615.2613143920898,
    "z": "42785b1.0f2e6a4",
    "wires": [
      []
    ]
  },
  {
    "id": "3c959d82.f7e672",
    "type": "call",
    "name": "call sdwan-get-device-param",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='sdwan-get-device-param' mode='sync' >\n",
    "comments": "",
    "outputs": 1,
    "x": 2151.5635147094727,
    "y": 328.2611758708954,
    "z": "42785b1.0f2e6a4",
    "wires": [
      []
    ]
  },
  {
    "id": "5f3e6fd4.e37e8",
    "type": "set",
    "name": "set vnf-request-input.",
    "xml": "<set>\n<parameter name='vnf-request-input.' value='`$ctx.vnf-data.vnf-data.vnf-request-input.`' />\n\n",
    "comments": "",
    "x": 2146.923065185547,
    "y": 265.81170535087585,
    "z": "42785b1.0f2e6a4",
    "wires": []
  },
  {
    "id": "94ec2391.e8ee4",
    "type": "set",
    "name": "set tmp.vidx and ctx.vnf-data",
    "xml": "<set>\n<parameter name='tmp.vidx' value='`$vidx`' />\n<parameter name='ctx.vnf-data.' value='`$service-data.vnfs.vnf[$vidx].`' />\n",
    "comments": "",
    "x": 2174.476776123047,
    "y": 219.15406966209412,
    "z": "42785b1.0f2e6a4",
    "wires": []
  },
  {
    "id": "2d4f17e9.19c368",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1912.563331604004,
    "y": 306.26116919517517,
    "z": "42785b1.0f2e6a4",
    "wires": [
      [
        "dd40fac0.73a058",
        "3c959d82.f7e672",
        "5f3e6fd4.e37e8",
        "94ec2391.e8ee4"
      ]
    ]
  },
  {
    "id": "28632f25.b7972",
    "type": "switchNode",
    "name": "switch prop.device.sdncCreate",
    "xml": "<switch test=\"`$prop.device.sdncCreate`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 591.5636596679688,
    "y": 619.2613067626953,
    "z": "42785b1.0f2e6a4",
    "wires": [
      [
        "d02123b.6bfe7e"
      ]
    ]
  },
  {
    "id": "d02123b.6bfe7e",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 802.5634689331055,
    "y": 619.2611770629883,
    "z": "42785b1.0f2e6a4",
    "wires": [
      [
        "7385dfef.35179"
      ]
    ]
  }
]
