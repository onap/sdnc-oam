[
  {
    "id": "7735fc30.841634",
    "type": "switchNode",
    "name": "switch service-data.vnfs.vnf_length",
    "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 757.03125,
    "y": 380.03125,
    "z": "f20d2d3a.d3597",
    "wires": [
      [
        "8fd37aa5.017ed8",
        "9c974a8d.2ebbc8"
      ]
    ]
  },
  {
    "id": "44891278.d01ccc",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 218.9365463256836,
    "y": 144.77007961273193,
    "z": "f20d2d3a.d3597",
    "wires": [
      [
        "cf34b9f3.a217e8"
      ]
    ]
  },
  {
    "id": "cf34b9f3.a217e8",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 294.22225189208984,
    "y": 185.0081911087036,
    "z": "f20d2d3a.d3597",
    "wires": [
      [
        "f275038d.034f"
      ]
    ]
  },
  {
    "id": "9fb20f9.a2934f",
    "type": "comment",
    "name": "wan port-vnf-topology-operation-delete",
    "info": "",
    "comments": "",
    "x": 668.2814636230469,
    "y": 218.35647869110107,
    "z": "f20d2d3a.d3597",
    "wires": []
  },
  {
    "id": "47c2021d.e2c7fc",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 295.60321044921875,
    "y": 446.4367513656616,
    "z": "f20d2d3a.d3597",
    "wires": [
      [
        "e3e2bc88.e9b0d",
        "6dbec876.fc0328",
        "750850d5.2167c",
        "3731bfbc.74cda",
        "25ec4ecb.412e22",
        "7735fc30.841634",
        "e6700fc6.f20b6",
        "6f81e67.c77e818",
        "3b4d6073.21879"
      ]
    ]
  },
  {
    "id": "8fd37aa5.017ed8",
    "type": "other",
    "name": "outcome Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1021.7535629272461,
    "y": 362.5868721008301,
    "z": "f20d2d3a.d3597",
    "wires": [
      [
        "847c658a.4062c8"
      ]
    ]
  },
  {
    "id": "847c658a.4062c8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 1202.753433227539,
    "y": 357.5867500305176,
    "z": "f20d2d3a.d3597",
    "wires": []
  },
  {
    "id": "9c974a8d.2ebbc8",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1007.2535629272461,
    "y": 414.58683490753174,
    "z": "f20d2d3a.d3597",
    "wires": [
      [
        "a54560d4.0ba6d"
      ]
    ]
  },
  {
    "id": "a54560d4.0ba6d",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1179.2532691955566,
    "y": 414.5868330001831,
    "z": "f20d2d3a.d3597",
    "wires": [
      [
        "77ddf34.4623e0c",
        "6b40a8cd.dcd938",
        "7e832033.e29c9"
      ]
    ]
  },
  {
    "id": "6b40a8cd.dcd938",
    "type": "switchNode",
    "name": "switch tmp.vidx ",
    "xml": "<switch test=\"`$tmp.vidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1354.2534408569336,
    "y": 433.58675479888916,
    "z": "f20d2d3a.d3597",
    "wires": [
      [
        "5d6c7481.ef0eac"
      ]
    ]
  },
  {
    "id": "25ec4ecb.412e22",
    "type": "switchNode",
    "name": "switch vnf-level-oper-status",
    "xml": "<switch test='`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.order-status`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 727.4202499389648,
    "y": 454.4757137298584,
    "z": "f20d2d3a.d3597",
    "wires": [
      [
        "6e834974.d9b6b8",
        "8930f777.246948"
      ]
    ]
  },
  {
    "id": "6e834974.d9b6b8",
    "type": "outcome",
    "name": "outcome PendingDelete",
    "xml": "<outcome value='PendingDelete'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1018.2535171508789,
    "y": 458.58683681488037,
    "z": "f20d2d3a.d3597",
    "wires": [
      [
        "9d8ec192.cf786"
      ]
    ]
  },
  {
    "id": "8930f777.246948",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 964.2535781860352,
    "y": 505.58684062957764,
    "z": "f20d2d3a.d3597",
    "wires": [
      [
        "8989bed6.5ee81"
      ]
    ]
  },
  {
    "id": "8989bed6.5ee81",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VNF is not in appropriate state for activate. Current state is ' + $service-data.vnfs.vnf[$tmp.nidx].vnf-data.vnf-level-oper-status.order-status`\" />",
    "comments": "",
    "x": 1123.753345489502,
    "y": 508.5868396759033,
    "z": "f20d2d3a.d3597",
    "wires": []
  },
  {
    "id": "e6700fc6.f20b6",
    "type": "switchNode",
    "name": "switch vnf-id",
    "xml": "<switch test=\"`$vnf-topology-operation-input.vnf-information.vnf-id`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 693.2535667419434,
    "y": 335.5868434906006,
    "z": "f20d2d3a.d3597",
    "wires": [
      [
        "73ae75a9.e85c8c"
      ]
    ]
  },
  {
    "id": "73ae75a9.e85c8c",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>",
    "comments": "",
    "outputs": 1,
    "x": 891.2536315917969,
    "y": 325.5868558883667,
    "z": "f20d2d3a.d3597",
    "wires": [
      [
        "dd6eb157.d89e"
      ]
    ]
  },
  {
    "id": "dd6eb157.d89e",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-request-input.vnf-input-parameters.name is a required input\" />\n",
    "comments": "",
    "x": 1057.753517150879,
    "y": 322.5868501663208,
    "z": "f20d2d3a.d3597",
    "wires": []
  },
  {
    "id": "77ddf34.4623e0c",
    "type": "for",
    "name": "for vidx..service-data.vnfs.vnf[]",
    "xml": "<for index='vidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1414.7534446716309,
    "y": 369.5867509841919,
    "z": "f20d2d3a.d3597",
    "wires": [
      [
        "cd627687.735828"
      ]
    ]
  },
  {
    "id": "cd627687.735828",
    "type": "switchNode",
    "name": "switch vnf-id found",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-id == $vnf-topology-operation-input.vnf-information.vnf-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1670.7534637451172,
    "y": 369.5867509841919,
    "z": "f20d2d3a.d3597",
    "wires": [
      [
        "4efba8ed.463c18"
      ]
    ]
  },
  {
    "id": "4efba8ed.463c18",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1847.253517150879,
    "y": 372.5867509841919,
    "z": "f20d2d3a.d3597",
    "wires": [
      [
        "ae933ccf.17812"
      ]
    ]
  },
  {
    "id": "1bcea5bb.85368a",
    "type": "set",
    "name": "set tmp.vidx and ctx.vnf-data",
    "xml": "<set>\n<parameter name='tmp.vidx' value='`$vidx`' />\n<parameter name='ctx.vnf-data.' value='`$service-data.vnfs.vnf[$vidx].vnf-data.`' />\n",
    "comments": "",
    "x": 2264.253730773926,
    "y": 451.58680295944214,
    "z": "f20d2d3a.d3597",
    "wires": []
  },
  {
    "id": "3be2d098.9a5d7",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 1659.7534561157227,
    "y": 433.58675479888916,
    "z": "f20d2d3a.d3597",
    "wires": []
  },
  {
    "id": "5d6c7481.ef0eac",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1522.2534561157227,
    "y": 433.58675479888916,
    "z": "f20d2d3a.d3597",
    "wires": [
      [
        "3be2d098.9a5d7"
      ]
    ]
  },
  {
    "id": "750850d5.2167c",
    "type": "set",
    "name": "set vnfId and vnf-object-path",
    "xml": "<set>\n<parameter name='vnfId' value='`$vnf-topology-operation-input.vnf-information.vnf-id`' />\n<parameter name='vnf-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vnf-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'` \" />",
    "comments": "",
    "x": 705.2699813842773,
    "y": 630.1034965515137,
    "z": "f20d2d3a.d3597",
    "wires": []
  },
  {
    "id": "3731bfbc.74cda",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 654.3811416625977,
    "y": 755.6589269638062,
    "z": "f20d2d3a.d3597",
    "wires": []
  },
  {
    "id": "e3e2bc88.e9b0d",
    "type": "set",
    "name": "set new vnf length",
    "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf_length\" value=\"`$service-data.vnfs.vnf_length - 1`\"/>\n\n\t\n",
    "comments": "",
    "x": 685.9025650024414,
    "y": 527.5743541717529,
    "z": "f20d2d3a.d3597",
    "wires": []
  },
  {
    "id": "6dbec876.fc0328",
    "type": "set",
    "name": "Remove vnf from ServiceData",
    "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf[$tmp.vidx].\" value=\"\"/>\n\n",
    "comments": "",
    "x": 721.5267562866211,
    "y": 571.5423212051392,
    "z": "f20d2d3a.d3597",
    "wires": []
  },
  {
    "id": "9d8ec192.cf786",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1215.5599174499512,
    "y": 468.91199111938477,
    "z": "f20d2d3a.d3597",
    "wires": [
      []
    ]
  },
  {
    "id": "f275038d.034f",
    "type": "method",
    "name": "method sdwan-vnf-topology-operation-device-delete",
    "xml": "<method rpc='sdwan-vnf-topology-operation-device-delete' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 299.4677963256836,
    "y": 301.03125,
    "z": "f20d2d3a.d3597",
    "wires": [
      [
        "47c2021d.e2c7fc"
      ]
    ]
  },
  {
    "id": "6f81e67.c77e818",
    "type": "execute",
    "name": "execute requiredParameters",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='requiredParameters' >\n<parameter name=\"vnf-topology-operation-input.vnf-information.vnf-id\" value=\"$vnf-topology-operation-input.vnf-information.vnf-id\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 750.7536239624023,
    "y": 275.58684253692627,
    "z": "f20d2d3a.d3597",
    "wires": [
      []
    ]
  },
  {
    "id": "9d539b15.274ee8",
    "type": "delete",
    "name": "delete wan port instance configuration in AAI",
    "xml": "<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" resource='device' \n        key='device.id = $vnf-topology-operation-input.vnf-information.vnf-id'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1058.4678955078125,
    "y": 693.0313606262207,
    "z": "f20d2d3a.d3597",
    "wires": [
      []
    ]
  },
  {
    "id": "7e832033.e29c9",
    "type": "record",
    "name": "record",
    "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/svclogic.log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"tmp.vidx1234555\"/>\n<parameter name=\"field3\" value='`$tmp.vidx`'/>\n",
    "comments": "",
    "outputs": 1,
    "x": 1403.4679336547852,
    "y": 488.0312623977661,
    "z": "f20d2d3a.d3597",
    "wires": [
      []
    ]
  },
  {
    "id": "baf87e05.49718",
    "type": "call",
    "name": "call sdwan-get-device-param",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='sdwan-get-device-param' mode='sync' >\n",
    "comments": "",
    "outputs": 1,
    "x": 2256.0313110351562,
    "y": 396.0312566757202,
    "z": "f20d2d3a.d3597",
    "wires": [
      []
    ]
  },
  {
    "id": "657365d9.06388c",
    "type": "set",
    "name": "set vnf-request-input.",
    "xml": "<set>\n<parameter name='vnf-request-input.' value='`$ctx.vnf-data.vnf-data.vnf-request-input.`' />\n\n",
    "comments": "",
    "x": 2251.3908615112305,
    "y": 333.5817861557007,
    "z": "f20d2d3a.d3597",
    "wires": []
  },
  {
    "id": "2c001ef8.5cd552",
    "type": "set",
    "name": "set tmp.vidx and ctx.vnf-data",
    "xml": "<set>\n<parameter name='tmp.vidx' value='`$vidx`' />\n<parameter name='ctx.vnf-data.' value='`$service-data.vnfs.vnf[$vidx].`' />\n",
    "comments": "",
    "x": 2278.9445724487305,
    "y": 286.92415046691895,
    "z": "f20d2d3a.d3597",
    "wires": []
  },
  {
    "id": "ae933ccf.17812",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2017.0311279296875,
    "y": 374.03125,
    "z": "f20d2d3a.d3597",
    "wires": [
      [
        "1bcea5bb.85368a",
        "baf87e05.49718",
        "657365d9.06388c",
        "2c001ef8.5cd552"
      ]
    ]
  },
  {
    "id": "3b4d6073.21879",
    "type": "switchNode",
    "name": "switch prop.device.sdncCreate",
    "xml": "<switch test=\"`$prop.device.sdncCreate`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 649.0314254760742,
    "y": 691.0313444137573,
    "z": "f20d2d3a.d3597",
    "wires": [
      [
        "749e7d0b.8542b4"
      ]
    ]
  },
  {
    "id": "749e7d0b.8542b4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 803.0312919616699,
    "y": 692.031268119812,
    "z": "f20d2d3a.d3597",
    "wires": [
      [
        "9d539b15.274ee8"
      ]
    ]
  }
]