[
  {
    "id": "c9dff872.319c28",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 182.03125,
    "y": 193.0103907585144,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "f599176a.0162d8"
      ]
    ]
  },
  {
    "id": "f599176a.0162d8",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 257.31695556640625,
    "y": 233.24850225448608,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "6ef8717d.0a89a"
      ]
    ]
  },
  {
    "id": "6ef8717d.0a89a",
    "type": "method",
    "name": "method site-vnf-topology-operation-activate",
    "xml": "<method rpc='site-vnf-topology-operation-activate' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 278.4598693847656,
    "y": 323.0103907585144,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "e4c81f6e.49ef7"
      ]
    ]
  },
  {
    "id": "e4c81f6e.49ef7",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 266.69798278808594,
    "y": 512.6771693229675,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "cd35c02d.85245",
        "cbc96af.e7a6b98",
        "f380f867.7d6998",
        "be9b1521.3244d8",
        "8699a911.00b498",
        "640f5d20.cfa064",
        "e28c053e.d4c358",
        "c2b356f7.cb66f8",
        "cfdaefb3.97c88",
        "de98d30f.d2fa5"
      ]
    ]
  },
  {
    "id": "cd35c02d.85245",
    "type": "switchNode",
    "name": "switch service-data.vnfs.vnf_length",
    "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 706.0209121704102,
    "y": 141.99998569488525,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "e72f24a3.7e9cf8",
        "56a6c4e8.1f860c",
        "7ce3d5f2.723dec"
      ]
    ]
  },
  {
    "id": "e72f24a3.7e9cf8",
    "type": "other",
    "name": "Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 937.0208892822266,
    "y": 144.0000491142273,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "edb6abe2.7bba78"
      ]
    ]
  },
  {
    "id": "edb6abe2.7bba78",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 1094.7984046936035,
    "y": 124.88899755477905,
    "z": "8546294e.bbf628",
    "wires": []
  },
  {
    "id": "56a6c4e8.1f860c",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 929.0213165283203,
    "y": 179.00007104873657,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "28abc688.86ccda"
      ]
    ]
  },
  {
    "id": "28abc688.86ccda",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1095.290786743164,
    "y": 170.55460453033447,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "13d47e80.4e6022",
        "5d523d19.4e3534",
        "63f3d384.29d3ac"
      ]
    ]
  },
  {
    "id": "13d47e80.4e6022",
    "type": "for",
    "name": "for vidx..service-data.vnfs.vnf_length[]",
    "xml": "<for index='vidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1365.3068771362305,
    "y": 114.42860555648804,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "9845da61.98a1c8"
      ]
    ]
  },
  {
    "id": "5d523d19.4e3534",
    "type": "switchNode",
    "name": "switch tmp.vidx ",
    "xml": "<switch test=\"`$tmp.vidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1301.6082305908203,
    "y": 165.41179418563843,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "26cec9c2.9bd426"
      ]
    ]
  },
  {
    "id": "26cec9c2.9bd426",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1453.0370330810547,
    "y": 165.98322439193726,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "a0a7bb4c.608bd8"
      ]
    ]
  },
  {
    "id": "90e8fa4e.9e0b88",
    "type": "switchNode",
    "name": "switch vnfid found",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-id == $vnf-topology-operation-input.vnf-information.vnf-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1762.7356185913086,
    "y": 74.67872762680054,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "b847bf38.a4e72"
      ]
    ]
  },
  {
    "id": "a0a7bb4c.608bd8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 1591.465431213379,
    "y": 167.12604665756226,
    "z": "8546294e.bbf628",
    "wires": []
  },
  {
    "id": "b847bf38.a4e72",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1936.6880989074707,
    "y": 74.57144784927368,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "fe37a50e.9b06e8"
      ]
    ]
  },
  {
    "id": "7ce3d5f2.723dec",
    "type": "outcome",
    "name": "0",
    "xml": "<outcome value='0'>\n",
    "comments": "",
    "outputs": 1,
    "x": 934.9897003173828,
    "y": 106.96873807907104,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "edb6abe2.7bba78"
      ]
    ]
  },
  {
    "id": "be9b1521.3244d8",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 650.3649482727051,
    "y": 695.344174861908,
    "z": "8546294e.bbf628",
    "wires": []
  },
  {
    "id": "c2b356f7.cb66f8",
    "type": "set",
    "name": "set vnf-level-oper-status to Active",
    "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.order-status' value='Active' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.last-rpc-action' value='`$vnf-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.last-action' value='`$vnf-topology-operation-input.request-information.request-action`' />\n",
    "comments": "",
    "x": 712.8451385498047,
    "y": 529.6816143989563,
    "z": "8546294e.bbf628",
    "wires": []
  },
  {
    "id": "e28c053e.d4c358",
    "type": "set",
    "name": "set vnf-index and vnf-object-path",
    "xml": "<set>\n<parameter name='vnfId' value='`$service-data.vnfs.vnf[$tmp.vidx].vnf-id`' />\n<parameter name=\"vnf-object-path\" value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/vnfs/vnf/'  + $service-data.vnfs.vnf[$tmp.vidx].vnf-id  + '/vnf-data/'` \" />",
    "comments": "",
    "x": 712.53173828125,
    "y": 486.3441491127014,
    "z": "8546294e.bbf628",
    "wires": []
  },
  {
    "id": "5369a88f.c265a8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1570.531826019287,
    "y": 431.00039863586426,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "e11a3e97.9a4cf"
      ]
    ]
  },
  {
    "id": "e11a3e97.9a4cf",
    "type": "set",
    "name": "set controller data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n",
    "comments": "",
    "x": 1759.0319213867188,
    "y": 425.0004082918167,
    "z": "8546294e.bbf628",
    "wires": []
  },
  {
    "id": "a5222a28.6f55b8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1574.022792816162,
    "y": 478.5744342803955,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "ea233a49.a94538"
      ]
    ]
  },
  {
    "id": "ea233a49.a94538",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 1747.5942039489746,
    "y": 466.8601703643799,
    "z": "8546294e.bbf628",
    "wires": []
  },
  {
    "id": "42b5e401.e14b8c",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1566.355800628662,
    "y": 519.9077472686768,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "28e9f15e.a3f2ce"
      ]
    ]
  },
  {
    "id": "28e9f15e.a3f2ce",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 1754.1283569335938,
    "y": 515.3469400405884,
    "z": "8546294e.bbf628",
    "wires": []
  },
  {
    "id": "e43f8602.8d7af8",
    "type": "get-resource",
    "name": "get-resource esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = SDWAN-Controller AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1303.53173828125,
    "y": 479.00040447711945,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "5369a88f.c265a8",
        "a5222a28.6f55b8",
        "42b5e401.e14b8c"
      ]
    ]
  },
  {
    "id": "d2ea4d7a.0f7bc",
    "type": "execute",
    "name": "execute RestApiCallNode Create  SDWAN site",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-site.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/net/sites'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"site-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1326.031852722168,
    "y": 636.0003986358643,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "f57bd183.9204c"
      ]
    ]
  },
  {
    "id": "b5c8e88e.b71a98",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 1746.6983757019043,
    "y": 637.8892993927002,
    "z": "8546294e.bbf628",
    "wires": [
      []
    ]
  },
  {
    "id": "db67aff2.ce7ea",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
    "comments": "",
    "x": 1732.1429595947266,
    "y": 697.4446468353271,
    "z": "8546294e.bbf628",
    "wires": []
  },
  {
    "id": "8e3552db.71c4c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1587.1429500579834,
    "y": 694.4446449279785,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "db67aff2.ce7ea"
      ]
    ]
  },
  {
    "id": "f57bd183.9204c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1587.587287902832,
    "y": 638.1114530563354,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "b5c8e88e.b71a98"
      ]
    ]
  },
  {
    "id": "cfdaefb3.97c88",
    "type": "set",
    "name": "copy input data to service data",
    "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-id' value='`$service-data.vnfs.vnf[$tmp.vidx].vnf-id`' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.sdnc-request-header.' value='$vnf-topology-operation-input.sdnc-request-header.' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.request-information.' value='$vnf-topology-operation-input.request-information.' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.' value='$vnf-topology-operation-input.service-information.' />",
    "comments": "",
    "x": 701.0316848754883,
    "y": 572.0005831718445,
    "z": "8546294e.bbf628",
    "wires": []
  },
  {
    "id": "b24b0990.f29818",
    "type": "execute",
    "name": "execute RestApiCallNode Get token",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
    "comments": "",
    "outputs": 1,
    "x": 1304.7858352661133,
    "y": 572.0044652223587,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "289de783.f62c58",
        "794b6e1c.8d635"
      ]
    ]
  },
  {
    "id": "289de783.f62c58",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1569.785717010498,
    "y": 557.0043603181839,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "9a259234.042bd"
      ]
    ]
  },
  {
    "id": "794b6e1c.8d635",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1562.035717010498,
    "y": 598.6472436189651,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "abdc5f44.099"
      ]
    ]
  },
  {
    "id": "abdc5f44.099",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1688.119213104248,
    "y": 598.8932763338089,
    "z": "8546294e.bbf628",
    "wires": [
      []
    ]
  },
  {
    "id": "9a259234.042bd",
    "type": "set",
    "name": "set token-id",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
    "comments": "",
    "x": 1706.785717010498,
    "y": 557.0043603181839,
    "z": "8546294e.bbf628",
    "wires": []
  },
  {
    "id": "6db7dcff.bc7ce4",
    "type": "comment",
    "name": "tmp.thirdparty-sdnc-id is hardcoded value?",
    "info": "",
    "comments": "",
    "x": 1352.0356369018555,
    "y": 433.004376411438,
    "z": "8546294e.bbf628",
    "wires": []
  },
  {
    "id": "640f5d20.cfa064",
    "type": "set",
    "name": "set vnf-index to service data",
    "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-id' value='`$service-data.vnfs.vnf[$tmp.vidx].vnf-id`' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length].name' value='siteId' />\n<!--parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length].value' value='`$site-result[0].id`' /-->\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length].value' value='`$vnf-topology-operation-input.vnf-information.vnf-id`' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length' value='`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length + 1`' />\n",
    "comments": "",
    "x": 702.0354537963867,
    "y": 448.00424432754517,
    "z": "8546294e.bbf628",
    "wires": []
  },
  {
    "id": "3d75d87b.d2ff28",
    "type": "switchNode",
    "name": "switch ActivateSDWANDeviceInstance",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-data.request-information.request-action == 'ActivateSDWANDeviceInstance'`\">\n\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 1830.2855911254883,
    "y": 144.00390481948853,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "628cbd2.1a1aa44"
      ]
    ]
  },
  {
    "id": "628cbd2.1a1aa44",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2057.285446166992,
    "y": 143.0039038658142,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "b1822ffa.bc97b"
      ]
    ]
  },
  {
    "id": "9845da61.98a1c8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1600.285415649414,
    "y": 115.00389051437378,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "3d75d87b.d2ff28",
        "90e8fa4e.9e0b88"
      ]
    ]
  },
  {
    "id": "fab4e8d5.eaaa38",
    "type": "comment",
    "name": "Get devices",
    "info": "",
    "comments": "",
    "x": 1864.0356063842773,
    "y": 164.7539200782776,
    "z": "8546294e.bbf628",
    "wires": []
  },
  {
    "id": "cbc96af.e7a6b98",
    "type": "set",
    "name": "set prop.site.sdwan false",
    "xml": "<set>\n<parameter name='prop.site.sdwan' value=\"false\" />\n\n",
    "comments": "",
    "x": 685.0312652587891,
    "y": 83.0000352859497,
    "z": "8546294e.bbf628",
    "wires": []
  },
  {
    "id": "8699a911.00b498",
    "type": "switchNode",
    "name": "switch prop.site.sdwan",
    "xml": "<switch test=\"`$prop.site.sdwan`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 681.0313720703125,
    "y": 390.666624546051,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "ace66bf6.fc6f18"
      ]
    ]
  },
  {
    "id": "ace66bf6.fc6f18",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 860.031421661377,
    "y": 387.666624546051,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "70ebd8ae.1dd798"
      ]
    ]
  },
  {
    "id": "70ebd8ae.1dd798",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1016.0316467285156,
    "y": 384.6669464111328,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "2f462de2.0453e2",
        "2f8e9052.03ea2",
        "d2ea4d7a.0f7bc",
        "e43f8602.8d7af8",
        "b24b0990.f29818"
      ]
    ]
  },
  {
    "id": "b1822ffa.bc97b",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2010.6982822418213,
    "y": 212.00003480911255,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "f8a73d95.16c95"
      ]
    ]
  },
  {
    "id": "f8a73d95.16c95",
    "type": "for",
    "name": "for loop deviceidx - Get deviceId from servicedata",
    "xml": "<for index=\"deviceidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">",
    "comments": "",
    "outputs": 1,
    "x": 2294.0321140289307,
    "y": 215.00006532669067,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "f4aaaa9b.0e63e8"
      ]
    ]
  },
  {
    "id": "f4aaaa9b.0e63e8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2410.031898498535,
    "y": 266.0002508163452,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "560efc8.407e904"
      ]
    ]
  },
  {
    "id": "560efc8.407e904",
    "type": "switchNode",
    "name": "switch deviceId",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$deviceidx].name == 'deviceId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2570.032154083252,
    "y": 268.0001039505005,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "364ea14b.4737ce"
      ]
    ]
  },
  {
    "id": "364ea14b.4737ce",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2722.032325744629,
    "y": 267.0001039505005,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "57bae08d.5682f"
      ]
    ]
  },
  {
    "id": "57bae08d.5682f",
    "type": "set",
    "name": "set deviceId",
    "xml": "<set>\n<parameter name='prop.site.deviceId[$prop.site.deviceId_length]' value='`$service-data.vnfs.vnf[$tmp.deviceVidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$deviceidx].value`' />\n<parameter name='prop.site.deviceId_length' value='`$prop.site.deviceId_length + 1`' />\n",
    "comments": "",
    "x": 2862.032329559326,
    "y": 266.600058555603,
    "z": "8546294e.bbf628",
    "wires": []
  },
  {
    "id": "63f3d384.29d3ac",
    "type": "set",
    "name": "set prop.site.deviceId_length",
    "xml": "<set>\n<parameter name='prop.site.deviceId_length' value='0' />\n",
    "comments": "",
    "x": 1338.031322479248,
    "y": 69.99999761581421,
    "z": "8546294e.bbf628",
    "wires": []
  },
  {
    "id": "de98d30f.d2fa5",
    "type": "save",
    "name": "update siteInstance configuration in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='site-resource' \n      key='site-resource.id = $service-data.vnfs.vnf[$tmp.vidx].vnf-id' >\n<parameter name='id' value='`$service-data.vnfs.vnf[$tmp.vidx].vnf-id`' />      \n<parameter name='generated-site-id' value='`$site-result[0].site-id`' /> \n<parameter name='operational-status' value='Active' />\n",
    "comments": "",
    "outputs": 1,
    "x": 731.0313720703125,
    "y": 633.0000977516174,
    "z": "8546294e.bbf628",
    "wires": [
      []
    ]
  },
  {
    "id": "f380f867.7d6998",
    "type": "execute",
    "name": "execute Properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
    "comments": "",
    "outputs": 1,
    "x": 677.0312881469727,
    "y": 279.99999952316284,
    "z": "8546294e.bbf628",
    "wires": [
      []
    ]
  },
  {
    "id": "2f462de2.0453e2",
    "type": "set",
    "name": "set siteId",
    "xml": "<set>\n<parameter name='prop.site.siteId' value=\"\" />\n\n",
    "comments": "",
    "x": 1225.0315856933594,
    "y": 375.0001050233841,
    "z": "8546294e.bbf628",
    "wires": []
  },
  {
    "id": "e43a0564.6e85b8",
    "type": "comment",
    "name": "should be null in request",
    "info": "",
    "comments": "",
    "x": 1234.031509399414,
    "y": 346.0000592470169,
    "z": "8546294e.bbf628",
    "wires": []
  },
  {
    "id": "fe37a50e.9b06e8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2107.031394958496,
    "y": 78.65758323669434,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "4bd89f7e.9676d",
        "9ff83ab.3d923c8",
        "523d9c1d.3e7a14",
        "471b0999.b03818"
      ]
    ]
  },
  {
    "id": "9ff83ab.3d923c8",
    "type": "set",
    "name": "set vnf-request-input.",
    "xml": "<set>\n<parameter name='vnf-request-input.' value='`$ctx.vnf-data.vnf-data.vnf-request-input.`' />\n\n",
    "comments": "",
    "x": 2359.364402770996,
    "y": 95.65763854980469,
    "z": "8546294e.bbf628",
    "wires": []
  },
  {
    "id": "4bd89f7e.9676d",
    "type": "set",
    "name": "set tmp.vidx and ctx.vnf-data",
    "xml": "<set>\n<parameter name='tmp.vidx' value='`$vidx`' />\n<parameter name='ctx.vnf-data.' value='`$service-data.vnfs.vnf[$vidx].`' />\n",
    "comments": "",
    "x": 2386.918113708496,
    "y": 49.00000286102295,
    "z": "8546294e.bbf628",
    "wires": []
  },
  {
    "id": "523d9c1d.3e7a14",
    "type": "call",
    "name": "call sdwan-get-site-param",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='sdwan-get-site-param' mode='sync' >\n",
    "comments": "",
    "outputs": 1,
    "x": 2358.005081176758,
    "y": 131.10712242126465,
    "z": "8546294e.bbf628",
    "wires": [
      []
    ]
  },
  {
    "id": "2f8e9052.03ea2",
    "type": "for",
    "name": "for cpidx..prop.site.controlpoints",
    "xml": "<for index='cpidx' start='0' end='`$prop.site.controlpoints_length`' >\n\t\t\t\t\t\t\t\t\t\n",
    "comments": "",
    "outputs": 1,
    "x": 1285.0318603515625,
    "y": 276.0313186645508,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "5d6d521c.a38a7c"
      ]
    ]
  },
  {
    "id": "5d6d521c.a38a7c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1528.0313720703125,
    "y": 274.03125762939453,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "a5905cec.9f577"
      ]
    ]
  },
  {
    "id": "a5905cec.9f577",
    "type": "for",
    "name": "for cpvidx..service-data.vnfs.vnf_length[]",
    "xml": "<for index='cpvidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1777.0313720703125,
    "y": 272.031289100647,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "c5914904.7dd248"
      ]
    ]
  },
  {
    "id": "c5914904.7dd248",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1630.531322479248,
    "y": 338.03128933906555,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "81562a69.669098"
      ]
    ]
  },
  {
    "id": "81562a69.669098",
    "type": "switchNode",
    "name": "switch ActivateSiteInstance",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-data.request-information.request-action == 'ActivateSiteInstance'`\">\n\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 1826.5317573547363,
    "y": 337.0312900543213,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "4dd0f132.ac22d"
      ]
    ]
  },
  {
    "id": "4dd0f132.ac22d",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2015.5316467285156,
    "y": 336.031259059906,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "c19716c9.bf16e8"
      ]
    ]
  },
  {
    "id": "c19716c9.bf16e8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2169.874858856201,
    "y": 352.1174783706665,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "b380d74e.7f6938"
      ]
    ]
  },
  {
    "id": "b380d74e.7f6938",
    "type": "for",
    "name": "for loop sidx - Get siteId from servicedata",
    "xml": "<for index=\"sidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$cpvidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">",
    "comments": "",
    "outputs": 1,
    "x": 2415.5315895080566,
    "y": 354.0313606262207,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "586aef3f.c2594"
      ]
    ]
  },
  {
    "id": "586aef3f.c2594",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2141.531894683838,
    "y": 451.0313949584961,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "6ca3ced4.b496f"
      ]
    ]
  },
  {
    "id": "6ca3ced4.b496f",
    "type": "switchNode",
    "name": "switch name",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$cpvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$sidx].name == 'name'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2301.5321502685547,
    "y": 453.03124809265137,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "e4e196a3.719d08"
      ]
    ]
  },
  {
    "id": "e4e196a3.719d08",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2453.5323219299316,
    "y": 452.03124809265137,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "79a83f73.ae9af"
      ]
    ]
  },
  {
    "id": "9f3ec9f2.b22258",
    "type": "switchNode",
    "name": "switch name match with controlPoint",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$cpvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$sidx].value == $prop.site.controlpoints[$cpidx]`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2690.0319023132324,
    "y": 462.031436920166,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "2d878bd7.4ff264"
      ]
    ]
  },
  {
    "id": "2d878bd7.4ff264",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2899.031665802002,
    "y": 455.03130531311035,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "3590859d.52442a"
      ]
    ]
  },
  {
    "id": "95b453fd.ee43a",
    "type": "for",
    "name": "for loop lidx - Get siteId from servicedata",
    "xml": "<for index=\"lidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$cpvidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">",
    "comments": "",
    "outputs": 1,
    "x": 2483.0317192077637,
    "y": 566.0313177108765,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "29fb7e8d.917742"
      ]
    ]
  },
  {
    "id": "29fb7e8d.917742",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2273.0313606262207,
    "y": 640.0315551757812,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "43fe6c1f.7a83e4"
      ]
    ]
  },
  {
    "id": "43fe6c1f.7a83e4",
    "type": "switchNode",
    "name": "switch siteId",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$cpvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$lidx].name == 'siteId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2419.0316047668457,
    "y": 643.0313415527344,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "48abb19b.d8fe"
      ]
    ]
  },
  {
    "id": "48abb19b.d8fe",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2566.031913757324,
    "y": 641.0313110351562,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "2780c7bb.98f1c8"
      ]
    ]
  },
  {
    "id": "2780c7bb.98f1c8",
    "type": "set",
    "name": "set siteId in control point",
    "xml": "<set>\n<parameter name='prop.site.controlpoints[$cpidx]' value='`$service-data.vnfs.vnf[$cpvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$lidx].value`' />\n\n",
    "comments": "",
    "x": 2745.0322227478027,
    "y": 643.631411075592,
    "z": "8546294e.bbf628",
    "wires": []
  },
  {
    "id": "3590859d.52442a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2227.0316123962402,
    "y": 566.0313024520874,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "95b453fd.ee43a"
      ]
    ]
  },
  {
    "id": "471b0999.b03818",
    "type": "record",
    "name": "record",
    "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/svclogic.log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"sdwan-site-activateeeee-delete\"/>\n<parameter name=\"field3\" value='`$prop.site.sdwan`'/>\n",
    "comments": "",
    "outputs": 1,
    "x": 2300.0313873291016,
    "y": 177.03126049041748,
    "z": "8546294e.bbf628",
    "wires": [
      []
    ]
  },
  {
    "id": "79a83f73.ae9af",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2720.5314903259277,
    "y": 401.031286239624,
    "z": "8546294e.bbf628",
    "wires": [
      [
        "9f3ec9f2.b22258"
      ]
    ]
  }
]
