[
    {
        "id": "32e79365.f9a674",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 585,
        "y": 664,
        "z": "e7492f37.77e028",
        "wires": [
            [
                "b127d6e2.ff9c7"
            ]
        ]
    },
    {
        "id": "b127d6e2.ff9c7",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 972.9998817443848,
        "y": 664.0000047683716,
        "z": "e7492f37.77e028",
        "wires": [
            [
                "2c85dd35.2b753a"
            ]
        ]
    },
    {
        "id": "2c85dd35.2b753a",
        "type": "method",
        "name": "method:bbs-access-connectivity-network-topology-operation-delete-huawei",
        "xml": "<method rpc='bbs-access-connectivity-network-topology-operation-delete-huawei' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 935.9998817443848,
        "y": 783.0000047683716,
        "z": "e7492f37.77e028",
        "wires": [
            [
                "ef9e0c93.94adf8"
            ]
        ]
    },
    {
        "id": "ef9e0c93.94adf8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1333.9999885559082,
        "y": 782.0000047683716,
        "z": "e7492f37.77e028",
        "wires": [
            [
                "267997b8.e9b0d",
                "f1c69874.61cb9",
                "7e468fe4.3b77e8",
                "68d0163d.33ab6",
                "1d5f9b67.3462ad",
                "5f5fa66b.a3a898",
                "a5de3800.3f3c9"
            ]
        ]
    },
    {
        "id": "267997b8.e9b0d",
        "type": "execute",
        "name": "excute:readProperties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1776.000286102295,
        "y": 636.1110858917236,
        "z": "e7492f37.77e028",
        "wires": [
            []
        ]
    },
    {
        "id": "5f5fa66b.a3a898",
        "type": "for",
        "name": "for:network-input-paramters",
        "xml": "<for index='idx' start='0' end='`$network-input-parameters.param_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1780.0003089904785,
        "y": 857.9999313354492,
        "z": "e7492f37.77e028",
        "wires": [
            [
                "a2cbb6ad.9498d8"
            ]
        ]
    },
    {
        "id": "1d5f9b67.3462ad",
        "type": "execute",
        "name": "execute:querryTokenID",
        "xml": " <execute plugin=\"org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode\" method=\"sendRequest\">\n    <parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/bbs-token-template.json'`\"/>\n    <parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url+'/rest/plat/smapp/v1/oauth/token'`\"/>\n    <parameter name=\"format\" value=\"json\"/>\n    <parameter name=\"httpMethod\" value=\"put\"/>\n    <parameter name=\"responsePrefix\" value=\"token-result\"/>\n    <parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n    <parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n    <parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n    <parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1771.0003089904785,
        "y": 768.0000076293945,
        "z": "e7492f37.77e028",
        "wires": [
            [
                "2b64faec.a1d51e",
                "15bc857f.bafd43"
            ]
        ]
    },
    {
        "id": "15bc857f.bafd43",
        "type": "outcome",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2070.166934967041,
        "y": 764.2500076293945,
        "z": "e7492f37.77e028",
        "wires": [
            [
                "c730ec93.32f82"
            ]
        ]
    },
    {
        "id": "2b64faec.a1d51e",
        "type": "outcome",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2066.166934967041,
        "y": 658.2499771118164,
        "z": "e7492f37.77e028",
        "wires": [
            [
                "20d8621f.db8eee"
            ]
        ]
    },
    {
        "id": "5704a92f.4d6488",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"error-code\" value=\"500\" />\n<parameter name=\"error-message\" value=\"Error executing queryTokenID,vaule is null\" />\n",
        "comments": "",
        "x": 2613.2807388305664,
        "y": 706.6136617660522,
        "z": "e7492f37.77e028",
        "wires": []
    },
    {
        "id": "a55c0e66.2654c8",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 2437.000316619873,
        "y": 706.999963760376,
        "z": "e7492f37.77e028",
        "wires": [
            [
                "5704a92f.4d6488"
            ]
        ]
    },
    {
        "id": "c730ec93.32f82",
        "type": "switchNode",
        "name": "switch:token ",
        "xml": "<switch test='`$token-result.accessSession`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2269.000316619873,
        "y": 764.999963760376,
        "z": "e7492f37.77e028",
        "wires": [
            [
                "a55c0e66.2654c8",
                "72281c79.15bf7c"
            ]
        ]
    },
    {
        "id": "72281c79.15bf7c",
        "type": "outcome",
        "name": "Other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2438.000316619873,
        "y": 763.999963760376,
        "z": "e7492f37.77e028",
        "wires": [
            [
                "85cd43c3.a877f8"
            ]
        ]
    },
    {
        "id": "85cd43c3.a877f8",
        "type": "set",
        "name": "set:token-id",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.accessSession`' />\n",
        "comments": "",
        "x": 2612.5003089904785,
        "y": 763.2500076293945,
        "z": "e7492f37.77e028",
        "wires": []
    },
    {
        "id": "cf8179f9.6c703",
        "type": "record",
        "name": "log file",
        "xml": " <record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n    <parameter name=\"file\" value=\"/opt/oak/logx.txt\" />\n    <parameter name=\"field1\" value=\"__TIMESTAMP__\" />\n    <parameter name=\"field2\" value=\"sucess executing Get token rest api\" />\n    <parameter name=\"field3\" value=\"`$token-result.accessSession`\" />\n    ",
        "comments": "",
        "outputs": 1,
        "x": 2824.0003089904785,
        "y": 760.9999465942383,
        "z": "e7492f37.77e028",
        "wires": [
            []
        ]
    },
    {
        "id": "68d0163d.33ab6",
        "type": "set",
        "name": "set:variables",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value='https://172.30.0.55:26335' />\n<parameter name='network-input-parameters.' value='`$network-topology-operation-input.network-request-input.network-input-parameters.`' />\n",
        "comments": "",
        "x": 1742.000286102295,
        "y": 556.0001621246338,
        "z": "e7492f37.77e028",
        "wires": []
    },
    {
        "id": "a5de3800.3f3c9",
        "type": "execute",
        "name": "execute:deleteAccessConnectivityService",
        "xml": "<execute plugin=\"org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode\" method=\"sendRequest\">\n    <parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/ws/rest/1002/FanOpenAPI/DeactivateOnt?serviceID='+$prop.bbs.serviceID`\" />\n    <parameter name=\"httpMethod\" value=\"get\"/>\n    <parameter name=\"contentType\" value=\"application/x-www-form-urlencoded\"/>\n    <parameter name=\"responsePrefix\" value=\"service-result\"/>\n    <parameter name=\"customHttpHeaders\" value=\"`'X-Auth-Token=' + $prop.sdncRestApi.token_id`\"/>\n    <parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n    <parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n    <parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n    <parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1832.0005722045898,
        "y": 1038.0001103878021,
        "z": "e7492f37.77e028",
        "wires": [
            [
                "5b7315a4.8b9d54",
                "b2a61f83.59c088"
            ]
        ]
    },
    {
        "id": "5b7315a4.8b9d54",
        "type": "outcome",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2137.000587463379,
        "y": 978.0000915527344,
        "z": "e7492f37.77e028",
        "wires": [
            [
                "218de6d2.4c392a"
            ]
        ]
    },
    {
        "id": "b2a61f83.59c088",
        "type": "outcome",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2137.000560760498,
        "y": 1037.0000913143158,
        "z": "e7492f37.77e028",
        "wires": [
            [
                "ce8b9653.804e"
            ]
        ]
    },
    {
        "id": "67d761ed.040b7",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 2623.0006713867188,
        "y": 934.000025510788,
        "z": "e7492f37.77e028",
        "wires": [
            [
                "f6e3cbc5.9d1b18"
            ]
        ]
    },
    {
        "id": "f6e3cbc5.9d1b18",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"error-code\" value=\"500\" />\n<parameter name=\"error-message\" value=\"$network-input-parameters.param[$idx].name  +' value is null, please check it.'\" />\n",
        "comments": "",
        "x": 2807.9096183776855,
        "y": 933.9090785980225,
        "z": "e7492f37.77e028",
        "wires": []
    },
    {
        "id": "a2cbb6ad.9498d8",
        "type": "switchNode",
        "name": "switch:serviceID",
        "xml": "<switch test=\"`$network-input-parameters.param[$idx].name == 'serviceID'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2055.0003356933594,
        "y": 857.0000190734863,
        "z": "e7492f37.77e028",
        "wires": [
            [
                "8cd031d1.154ec8"
            ]
        ]
    },
    {
        "id": "8cd031d1.154ec8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2228.000220298767,
        "y": 856.0000171661377,
        "z": "e7492f37.77e028",
        "wires": [
            [
                "9ffc371.a8c8ec8"
            ]
        ]
    },
    {
        "id": "7e9b3155.7cd6d",
        "type": "set",
        "name": "set:serviceID",
        "xml": "<set>\n<parameter name='prop.bbs.serviceID' value='`$network-input-parameters.param[$idx].value`' />\n",
        "comments": "",
        "x": 2799.000186920166,
        "y": 855.6000289916992,
        "z": "e7492f37.77e028",
        "wires": []
    },
    {
        "id": "9ffc371.a8c8ec8",
        "type": "switchNode",
        "name": "switch:serviceID value",
        "xml": "<switch test='`$network-input-parameters.param[$idx].value`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2409.148380279541,
        "y": 855.777702331543,
        "z": "e7492f37.77e028",
        "wires": [
            [
                "46008887.d0731",
                "67d761ed.040b7"
            ]
        ]
    },
    {
        "id": "46008887.d0731",
        "type": "outcome",
        "name": "Other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2617.148380279541,
        "y": 856.777702331543,
        "z": "e7492f37.77e028",
        "wires": [
            [
                "7e9b3155.7cd6d"
            ]
        ]
    },
    {
        "id": "f1c69874.61cb9",
        "type": "call",
        "name": "call:validate-bbs-network-input-parameters",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='validate-bbs-network-input-parameters' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1853.499912261963,
        "y": 475.00001335144043,
        "z": "e7492f37.77e028",
        "wires": [
            []
        ]
    },
    {
        "id": "fca294fa.de967",
        "type": "record",
        "name": "log file",
        "xml": " <record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n    <parameter name=\"file\" value=\"/opt/oak/logx.txt\" />\n    <parameter name=\"field1\" value=\"deleteAccessConnectivityService success!\" />\n    ",
        "comments": "",
        "outputs": 1,
        "x": 3170.500503540039,
        "y": 1121.0001611709595,
        "z": "e7492f37.77e028",
        "wires": [
            []
        ]
    },
    {
        "id": "ce8b9653.804e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2313.500358581543,
        "y": 1038.0002694129944,
        "z": "e7492f37.77e028",
        "wires": [
            [
                "558a111d.84c158"
            ]
        ]
    },
    {
        "id": "558a111d.84c158",
        "type": "switchNode",
        "name": "switch:service-result",
        "xml": "<switch test=\"`$service-result.errors.error[0].error-message`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2531.5002365112305,
        "y": 1037.0001168251038,
        "z": "e7492f37.77e028",
        "wires": [
            [
                "3ed23c26.7d9344",
                "3b7a58ab.469a28"
            ]
        ]
    },
    {
        "id": "3ed23c26.7d9344",
        "type": "outcome",
        "name": "Other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2765.5002822875977,
        "y": 1038.0000767707825,
        "z": "e7492f37.77e028",
        "wires": [
            [
                "a4966b56.feb3a"
            ]
        ]
    },
    {
        "id": "3b7a58ab.469a28",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 2767.5002822875977,
        "y": 1124.0000767707825,
        "z": "e7492f37.77e028",
        "wires": [
            [
                "f89a532c.628618"
            ]
        ]
    },
    {
        "id": "daa9ee04.8494a8",
        "type": "record",
        "name": "log error",
        "xml": " <record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n    <parameter name=\"file\" value=\"/opt/oak/logx.txt\" />\n    <parameter name=\"field1\" value=\"deleteAccessConnectivityService falied!\" />\n    <parameter name=\"field2\" value=\"`$service-result.errors.error[0].error-info.error-code`\" />\n    <parameter name=\"field3\" value=\"`$service-result.errors.error[0].error-message`\" />\n    <parameter name=\"field4\" value=\"`$service-result.errors.error[0].error-tag`\" />\n    ",
        "comments": "",
        "outputs": 1,
        "x": 3205.50044631958,
        "y": 1025.000093460083,
        "z": "e7492f37.77e028",
        "wires": [
            []
        ]
    },
    {
        "id": "7e468fe4.3b77e8",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1733.5001258850098,
        "y": 1176.0000190734863,
        "z": "e7492f37.77e028",
        "wires": []
    },
    {
        "id": "a4966b56.feb3a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"error-code\" value=\"500\" />\n<parameter name=\"error-message\" value=\"`'Error deleteAccessConnectivityService return: '+$service-result.errors.error[0].error-message`\" />\n\n",
        "comments": "",
        "x": 2965.49995803833,
        "y": 1038.0000114440918,
        "z": "e7492f37.77e028",
        "wires": []
    },
    {
        "id": "f89a532c.628618",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2951.4999771118164,
        "y": 1123.2726850509644,
        "z": "e7492f37.77e028",
        "wires": [
            [
                "fca294fa.de967"
            ]
        ]
    },
    {
        "id": "20d8621f.db8eee",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"error-code\" value=\"500\" />\n<parameter name=\"error-message\" value=\"Error failed to call queryTokenID\" />\n",
        "comments": "",
        "x": 2258.664794921875,
        "y": 659.1193237304688,
        "z": "e7492f37.77e028",
        "wires": []
    },
    {
        "id": "218de6d2.4c392a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"error-code\" value=\"500\" />\n<parameter name=\"error-message\" value=\"Error failed to call deleteAccessConnectivityService\" />\n",
        "comments": "",
        "x": 2307.272705078125,
        "y": 976.3635864257812,
        "z": "e7492f37.77e028",
        "wires": []
    }
]