[
    {
        "id": "3e7ef4ac.b2e17c",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 704.53125,
        "y": 248.03125,
        "z": "9458f851.9a2498",
        "wires": [
            [
                "cbfbc44.cd69838"
            ]
        ]
    },
    {
        "id": "cbfbc44.cd69838",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 1092.5311317443848,
        "y": 248.03125476837158,
        "z": "9458f851.9a2498",
        "wires": [
            [
                "8072076.84dccf8"
            ]
        ]
    },
    {
        "id": "8072076.84dccf8",
        "type": "method",
        "name": "method:bbs-access-connectivity-network-topology-operation-delete-huawei",
        "xml": "<method rpc='bbs-access-connectivity-network-topology-operation-delete-huawei' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1055.5311317443848,
        "y": 367.0312547683716,
        "z": "9458f851.9a2498",
        "wires": [
            [
                "9a3cc53d.6e79d8"
            ]
        ]
    },
    {
        "id": "9a3cc53d.6e79d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1453.5312385559082,
        "y": 366.0312547683716,
        "z": "9458f851.9a2498",
        "wires": [
            [
                "d6360288.4527f",
                "29565532.cf8cca",
                "79257394.2307bc",
                "bfbc37d6.3aa9c8",
                "5837e3f.e88671c",
                "ccc27501.c46688",
                "afc719e1.eb7f48"
            ]
        ]
    },
    {
        "id": "d6360288.4527f",
        "type": "execute",
        "name": "excute:readProperties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1895.531536102295,
        "y": 220.14233589172363,
        "z": "9458f851.9a2498",
        "wires": [
            []
        ]
    },
    {
        "id": "ccc27501.c46688",
        "type": "for",
        "name": "for:network-input-paramters",
        "xml": "<for index='idx' start='0' end='`$network-input-parameters.param_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1899.5315589904785,
        "y": 442.0311813354492,
        "z": "9458f851.9a2498",
        "wires": [
            [
                "430a13df.a78e9c"
            ]
        ]
    },
    {
        "id": "5837e3f.e88671c",
        "type": "execute",
        "name": "execute:querryTokenID",
        "xml": " <execute plugin=\"org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode\" method=\"sendRequest\">\n    <parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/bbs-token-template.json'`\"/>\n    <parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url+'/rest/plat/smapp/v1/oauth/token'`\"/>\n    <parameter name=\"format\" value=\"json\"/>\n    <parameter name=\"httpMethod\" value=\"put\"/>\n    <parameter name=\"responsePrefix\" value=\"token-result\"/>\n    <parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n    <parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n    <parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n    <parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1890.5315589904785,
        "y": 352.03125762939453,
        "z": "9458f851.9a2498",
        "wires": [
            [
                "632411.2d700bf",
                "df6b78a.61b9688"
            ]
        ]
    },
    {
        "id": "df6b78a.61b9688",
        "type": "outcome",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2189.698184967041,
        "y": 348.28125762939453,
        "z": "9458f851.9a2498",
        "wires": [
            [
                "c7e8c95e.bd9528"
            ]
        ]
    },
    {
        "id": "632411.2d700bf",
        "type": "outcome",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2185.698184967041,
        "y": 242.2812271118164,
        "z": "9458f851.9a2498",
        "wires": [
            [
                "da5c448.537c3b8"
            ]
        ]
    },
    {
        "id": "53a754bd.11dc7c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"error-code\" value=\"500\" />\n<parameter name=\"error-message\" value=\"Error executing queryTokenID,vaule is null\" />\n",
        "comments": "",
        "x": 2732.8119888305664,
        "y": 290.64491176605225,
        "z": "9458f851.9a2498",
        "wires": []
    },
    {
        "id": "54233be2.f30004",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 2556.531566619873,
        "y": 291.031213760376,
        "z": "9458f851.9a2498",
        "wires": [
            [
                "53a754bd.11dc7c"
            ]
        ]
    },
    {
        "id": "c7e8c95e.bd9528",
        "type": "switchNode",
        "name": "switch:token ",
        "xml": "<switch test='`$token-result.accessSession`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2388.531566619873,
        "y": 349.031213760376,
        "z": "9458f851.9a2498",
        "wires": [
            [
                "54233be2.f30004",
                "2525724.318638e"
            ]
        ]
    },
    {
        "id": "2525724.318638e",
        "type": "outcome",
        "name": "Other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2557.531566619873,
        "y": 348.031213760376,
        "z": "9458f851.9a2498",
        "wires": [
            [
                "b5f78ce0.e4e8f"
            ]
        ]
    },
    {
        "id": "b5f78ce0.e4e8f",
        "type": "set",
        "name": "set:token-id",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.accessSession`' />\n",
        "comments": "",
        "x": 2732.0315589904785,
        "y": 347.28125762939453,
        "z": "9458f851.9a2498",
        "wires": []
    },
    {
        "id": "e0b6a2ae.458e8",
        "type": "record",
        "name": "log file",
        "xml": " <record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n    <parameter name=\"file\" value=\"/opt/oak/logx.txt\" />\n    <parameter name=\"field1\" value=\"__TIMESTAMP__\" />\n    <parameter name=\"field2\" value=\"sucess executing Get token rest api\" />\n    <parameter name=\"field3\" value=\"`$token-result.accessSession`\" />\n    ",
        "comments": "",
        "outputs": 1,
        "x": 2943.5315589904785,
        "y": 345.0311965942383,
        "z": "9458f851.9a2498",
        "wires": [
            []
        ]
    },
    {
        "id": "bfbc37d6.3aa9c8",
        "type": "set",
        "name": "set:variables",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value='https://172.30.0.55:26335' />\n<parameter name='network-input-parameters.' value='`$network-topology-operation-input.network-request-input.network-input-parameters.`' />\n",
        "comments": "",
        "x": 1861.531536102295,
        "y": 140.0314121246338,
        "z": "9458f851.9a2498",
        "wires": []
    },
    {
        "id": "afc719e1.eb7f48",
        "type": "execute",
        "name": "execute:deleteAccessConnectivityService",
        "xml": "<execute plugin=\"org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode\" method=\"sendRequest\">\n    <parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/ws/rest/1002/FanOpenAPI/DeactivateOnt?serviceID='+$prop.bbs.serviceID`\" />\n    <parameter name=\"httpMethod\" value=\"get\"/>\n    <parameter name=\"contentType\" value=\"application/x-www-form-urlencoded\"/>\n    <parameter name=\"responsePrefix\" value=\"service-result\"/>\n    <parameter name=\"customHttpHeaders\" value=\"`'X-Auth-Token=' + $prop.sdncRestApi.token_id`\"/>\n    <parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n    <parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n    <parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n    <parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1951.5318222045898,
        "y": 622.0313603878021,
        "z": "9458f851.9a2498",
        "wires": [
            [
                "c6939dae.0ae37",
                "7116ae31.13271"
            ]
        ]
    },
    {
        "id": "c6939dae.0ae37",
        "type": "outcome",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2256.531837463379,
        "y": 562.0313415527344,
        "z": "9458f851.9a2498",
        "wires": [
            [
                "c09b1f3e.53091"
            ]
        ]
    },
    {
        "id": "7116ae31.13271",
        "type": "outcome",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2256.531810760498,
        "y": 621.0313413143158,
        "z": "9458f851.9a2498",
        "wires": [
            [
                "1c65ae1f.8b01d2"
            ]
        ]
    },
    {
        "id": "b5b74804.ae8938",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 2742.5319213867188,
        "y": 518.031275510788,
        "z": "9458f851.9a2498",
        "wires": [
            [
                "19c841bb.b9c39e"
            ]
        ]
    },
    {
        "id": "19c841bb.b9c39e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"error-code\" value=\"500\" />\n<parameter name=\"error-message\" value=\"$network-input-parameters.param[$idx].name  +' value is null, please check it.'\" />\n",
        "comments": "",
        "x": 2927.4408683776855,
        "y": 517.9403285980225,
        "z": "9458f851.9a2498",
        "wires": []
    },
    {
        "id": "430a13df.a78e9c",
        "type": "switchNode",
        "name": "switch:serviceID",
        "xml": "<switch test=\"`$network-input-parameters.param[$idx].name == 'serviceID'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2174.5315856933594,
        "y": 441.0312690734863,
        "z": "9458f851.9a2498",
        "wires": [
            [
                "804331b5.825a1"
            ]
        ]
    },
    {
        "id": "804331b5.825a1",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2347.531470298767,
        "y": 440.0312671661377,
        "z": "9458f851.9a2498",
        "wires": [
            [
                "1d00164b.c74e1a"
            ]
        ]
    },
    {
        "id": "b8311cf7.388d1",
        "type": "set",
        "name": "set:serviceID",
        "xml": "<set>\n<parameter name='prop.bbs.serviceID' value='`$network-input-parameters.param[$idx].value`' />\n",
        "comments": "",
        "x": 2918.531436920166,
        "y": 439.6312789916992,
        "z": "9458f851.9a2498",
        "wires": []
    },
    {
        "id": "1d00164b.c74e1a",
        "type": "switchNode",
        "name": "switch:serviceID value",
        "xml": "<switch test='`$network-input-parameters.param[$idx].value`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2528.679630279541,
        "y": 439.80895233154297,
        "z": "9458f851.9a2498",
        "wires": [
            [
                "acaa6a13.89b9f8",
                "b5b74804.ae8938"
            ]
        ]
    },
    {
        "id": "acaa6a13.89b9f8",
        "type": "outcome",
        "name": "Other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2736.679630279541,
        "y": 440.80895233154297,
        "z": "9458f851.9a2498",
        "wires": [
            [
                "b8311cf7.388d1"
            ]
        ]
    },
    {
        "id": "29565532.cf8cca",
        "type": "call",
        "name": "call:validate-bbs-network-input-parameters",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='validate-bbs-network-input-parameters' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1973.031162261963,
        "y": 59.03126335144043,
        "z": "9458f851.9a2498",
        "wires": [
            []
        ]
    },
    {
        "id": "1c65ae1f.8b01d2",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2433.031608581543,
        "y": 622.0315194129944,
        "z": "9458f851.9a2498",
        "wires": [
            [
                "cced1fd6.04da4"
            ]
        ]
    },
    {
        "id": "cced1fd6.04da4",
        "type": "switchNode",
        "name": "switch:service-result",
        "xml": "<switch test=\"`$service-result.errors.error[0].error-message`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2651.0314865112305,
        "y": 621.0313668251038,
        "z": "9458f851.9a2498",
        "wires": [
            [
                "4dce053b.3feafc",
                "cf917e9d.94b86"
            ]
        ]
    },
    {
        "id": "4dce053b.3feafc",
        "type": "outcome",
        "name": "Other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2885.0315322875977,
        "y": 622.0313267707825,
        "z": "9458f851.9a2498",
        "wires": [
            [
                "7c2264f5.7e8cec"
            ]
        ]
    },
    {
        "id": "cf917e9d.94b86",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 2887.0315322875977,
        "y": 708.0313267707825,
        "z": "9458f851.9a2498",
        "wires": [
            [
                "523726af.0e2f78"
            ]
        ]
    },
    {
        "id": "7f7a43fa.cb783c",
        "type": "record",
        "name": "log error",
        "xml": " <record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n    <parameter name=\"file\" value=\"/opt/oak/logx.txt\" />\n    <parameter name=\"field1\" value=\"deleteAccessConnectivityService falied!\" />\n    <parameter name=\"field2\" value=\"`$service-result.errors.error[0].error-info.error-code`\" />\n    <parameter name=\"field3\" value=\"`$service-result.errors.error[0].error-message`\" />\n    <parameter name=\"field4\" value=\"`$service-result.errors.error[0].error-tag`\" />\n    ",
        "comments": "",
        "outputs": 1,
        "x": 3325.03169631958,
        "y": 609.031343460083,
        "z": "9458f851.9a2498",
        "wires": [
            []
        ]
    },
    {
        "id": "79257394.2307bc",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1853.0313758850098,
        "y": 760.0312690734863,
        "z": "9458f851.9a2498",
        "wires": []
    },
    {
        "id": "7c2264f5.7e8cec",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"error-code\" value=\"500\" />\n<parameter name=\"error-message\" value=\"`'Error deleteAccessConnectivityService return: '+$service-result.errors.error[0].error-message`\" />\n\n",
        "comments": "",
        "x": 3085.03120803833,
        "y": 622.0312614440918,
        "z": "9458f851.9a2498",
        "wires": []
    },
    {
        "id": "523726af.0e2f78",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3071.0312271118164,
        "y": 707.3039350509644,
        "z": "9458f851.9a2498",
        "wires": [
            []
        ]
    },
    {
        "id": "da5c448.537c3b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"error-code\" value=\"500\" />\n<parameter name=\"error-message\" value=\"Error failed to call queryTokenID\" />\n",
        "comments": "",
        "x": 2378.196044921875,
        "y": 243.15057373046875,
        "z": "9458f851.9a2498",
        "wires": []
    },
    {
        "id": "c09b1f3e.53091",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"error-code\" value=\"500\" />\n<parameter name=\"error-message\" value=\"Error failed to call deleteAccessConnectivityService\" />\n",
        "comments": "",
        "x": 2426.803955078125,
        "y": 560.3948364257812,
        "z": "9458f851.9a2498",
        "wires": []
    },
    {
        "id": "3a60417f.fe190e",
        "type": "record",
        "name": "log file",
        "xml": " <record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n    <parameter name=\"file\" value=\"/opt/oak/logx.txt\" />\n    <parameter name=\"field1\" value=\"deleteAccessConnectivityService success!\" />\n    ",
        "comments": "",
        "outputs": 1,
        "x": 3290.031753540039,
        "y": 705.0314111709595,
        "z": "9458f851.9a2498",
        "wires": [
            []
        ]
    }
]