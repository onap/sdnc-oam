[{"id":"c1453738.42a898","type":"dgstart","name":"DGSTART","outputs":1,"x":251,"y":162,"z":"3b92925f.163c6e","wires":[["d3e07181.eedbb8"]]},{"id":"d3e07181.eedbb8","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":347.2380790710449,"y":222.95239067077637,"z":"3b92925f.163c6e","wires":[["adbf57db.5116"]]},{"id":"adbf57db.5116","type":"method","name":"gw-vfmodule-update","xml":"<method rpc='gw-vfmodule-update' mode='sync'>\n","comments":"","outputs":1,"x":231.15488815307617,"y":316.1904306411743,"z":"3b92925f.163c6e","wires":[["9a46a9fa.3aafa"]]},{"id":"9a46a9fa.3aafa","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":347.9999809265137,"y":416.0000009536743,"z":"3b92925f.163c6e","wires":[["2c968d51.0bd2e2","b741cf13.457da8","873df790.867b68","17c420b4.7c0eb7"]]},{"id":"b8b1c133.6f2e","type":"execute","name":"generate vnf service-info url - vnf-d","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.vnf-api-url1`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.vnf-api-url2\"/>\n    <parameter name=\"target\" value=\"{vnf-id}\"/>\n    <parameter name=\"replacement\" value=\"`$brg-topology-operation-input.allotted-resource-data.brg-topology.brg-assignments.gw-vnf-id`\"/>\n\n","comments":"","outputs":1,"x":2107.2500610351562,"y":1586.0002136230469,"z":"3b92925f.163c6e","wires":[[]]},{"id":"20782ff0.3e5288","type":"execute","name":"execute RestApiCallNode - PUT service into service","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.services.vnf.vfmodule.templatefile`\" />\n   <!--\n   <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.vnf-api-url3`' />\n   -->\n   <parameter name='restapiUrl' value='`$tmp.vf-module-object-path`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-vfmodule-vgw\" />\n\n","comments":"","outputs":1,"x":1693.9999389648438,"y":2117.0001831054688,"z":"3b92925f.163c6e","wires":[["1f1c6bc6.f69f14"]]},{"id":"8dfc09cc.422228","type":"execute","name":"generate vnf service-info url - service-instance-id","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.service.vnf.vfmodule-resource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.vnf-api-url1\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.service-data.service-information.service-instance-id`\"/>\n","comments":"","outputs":1,"x":2152.7500610351562,"y":1543.2502136230469,"z":"3b92925f.163c6e","wires":[[]]},{"id":"560eb9b1.1f1f7","type":"execute","name":"generate vnf service-info url - vf-module-id","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.vnf-api-url2`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.vnf-api-url3\"/>\n    <parameter name=\"target\" value=\"{vf-module-id}\"/>\n    <parameter name=\"replacement\" value=\"`$brg-topology-operation-input.allotted-resource-data.brg-topology.brg-assignments.gw-vfmodule-id`\"/>\n\n","comments":"","outputs":1,"x":2131.5000610351562,"y":1627.0002136230469,"z":"3b92925f.163c6e","wires":[[]]},{"id":"2fd02508.da9e42","type":"set","name":"set tmp.vgw.vg_mux_tunnel.vni","xml":"<set>\n<!--\n<parameter name='tmp.service.vnf.vf-module.vg-mux-tunnel-vni' value='`$input.vni`' />\n-->\n<parameter name='tmp.service.vnf.vf-module.vg-mux-tunnel-vni' value='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource[0].allotted-resource-data[0].tunnelxconn-topology[0].tunnelxconn-assignments[0].vni`' />\n<parameter name='tmp.service.vnf.vf-module.vg-lan-ip' value='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource[0].allotted-resource-data[0].tunnelxconn-topology[0].tunnelxconn-assignments[0].vg-ip`' />\n\n\n\n","comments":"","x":1685.2500610351562,"y":1704.5002136230469,"z":"3b92925f.163c6e","wires":[]},{"id":"9fc7771a.9c8f9","type":"set","name":"set tmp.service.vnf.vf-module-id","xml":"<set>\n<parameter name='tmp.service.vnf.vf-module.vf-module-id' value='9aa4ede4-c639-48c4-9386-74c9ff87f8e3' />\n<parameter name='brg-topology-operation-input.allotted-resource-data.brg-topology.brg-assignments.gw-vfmodule-id' value='9aa4ede4-c639-48c4-9386-74c9ff87f8e3' />","comments":"","x":2147.75,"y":1384.0834045410156,"z":"3b92925f.163c6e","wires":[]},{"id":"eb138cbb.85dbe","type":"set","name":"set tmp.service-data.vnf-information.vnf-id","xml":"<set>\n<parameter name='tmp.service-data.vnf-information.vnf-id' value='3a3332d1-12ad-4709-ac81-ba32b304a462' />\n<parameter name='brg-topology-operation-input.allotted-resource-data.brg-topology.brg-assignments.gw-vnf-id' value='3a3332d1-12ad-4709-ac81-ba32b304a462' />\n","comments":"","x":2114,"y":1344.0834045410156,"z":"3b92925f.163c6e","wires":[]},{"id":"dc872333.0afd98","type":"set","name":"set tmp.service-data.service-information.service-instance-id","xml":"<set>\n<parameter name='tmp.service-data.service-information.service-instance-id' value='6e34b9fb-9ec1-4c95-9e12-0326c434c623' />\n","comments":"","x":2162.7499389648438,"y":1289.083251953125,"z":"3b92925f.163c6e","wires":[]},{"id":"50b6bdad.79abd4","type":"set","name":"set tmp.service.vnf.vf-module-id","xml":"<set>\n<parameter name='tmp.restapi.service.vnf.vfmodule-resource' value='`$prop.restapi.service.vnf.vfmodule-resource`' />\n","comments":"","x":1667.75,"y":1422.8333435058594,"z":"3b92925f.163c6e","wires":[]},{"id":"18ead3e8.6a792c","type":"execute","name":"execute Propertis gen-res-api-dg","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n","comments":"","outputs":1,"x":1675.2498779296875,"y":1214.0834045410156,"z":"3b92925f.163c6e","wires":[[]]},{"id":"1f1c6bc6.f69f14","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1975.2499389648438,"y":2168.2501831054688,"z":"3b92925f.163c6e","wires":[["53fb6e2d.3ab58"]]},{"id":"53fb6e2d.3ab58","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value='Failed on PUT vf-module parameters to MD0SAL' />\n","comments":"","x":2165.2499389648438,"y":2177.0001831054688,"z":"3b92925f.163c6e","wires":[]},{"id":"17c420b4.7c0eb7","type":"set","name":"set  consuming service-instance","xml":"<set>\n<!--\n<parameter name='tmp.brg-macaddress' value='fa:16:3e:8f:ea:68' />\n\n\n<parameter name='tmp.consuming-service-instance-id' value='b3cb7040-f7a5-4beb-ad2f-2a893b7d374b' />\nservice-data.service-topology.service-topology-identifier.service-instance-id\n\n-->\n<parameter name='tmp.brg-mac-address-match' value=\"`'VGW2BRG-' + $tmp.brg-macaddress`\"/>\n<parameter name='tmp.consuming-service-instance-id' value='`$service-data.service-topology.service-topology-identifier.service-instance-id`' />\n","comments":"","x":722.0000610351562,"y":428.08343505859375,"z":"3b92925f.163c6e","wires":[]},{"id":"daaeb9ef.8b4378","type":"get-resource","name":"get-resource vnfs","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.mdsal.ConfigResource' resource='VNF-API' key='preload-vnfs' pfx='tmp.preloadvnfdata' >\n","comments":"","outputs":1,"x":884.3055419921875,"y":759.7499694824219,"z":"3b92925f.163c6e","wires":[[]]},{"id":"1ece97b8.8a8b7","type":"for","name":"for tmp.vnfs","xml":"<for index='vnfidx' start='0' end='`$tmp.preloadvnfdata.preload-vnfs.vnf-preload-list_length`' >\n\n\n","comments":"","outputs":1,"x":878.1944580078125,"y":861.9723510742188,"z":"3b92925f.163c6e","wires":[["fc6621e2.aa04c"]]},{"id":"48fed561.a74c4c","type":"switchNode","name":"switch parameter name","xml":"<switch test='`$tmp.preloadvnfdata.preload-vnfs.vnf-preload-list[$vnfidx].vnf-name == $tmp.brg-mac-address-match`'>\n\n\n","comments":"","outputs":1,"x":1166.1942749023438,"y":877.361083984375,"z":"3b92925f.163c6e","wires":[["359f934e.d31b64"]]},{"id":"359f934e.d31b64","type":"success","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1324.91650390625,"y":1023.5,"z":"3b92925f.163c6e","wires":[["ba0967af.51efe"]]},{"id":"ba0967af.51efe","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1240,"y":1483.5,"z":"3b92925f.163c6e","wires":[["a67acd63.bafec8","18ead3e8.6a792c","50b6bdad.79abd4","e4b74198.b4a08","3fffba2f.87934e","fa44659.2bd9398","1b6c5025.a28cb","d503c7f6.04f208","2fd02508.da9e42","b45646b7.e1cbe"]]},{"id":"483a348f.22282c","type":"comment","name":"vnfidx ","info":"","comments":"","x":1486.2499389648438,"y":897.2500305175781,"z":"3b92925f.163c6e","wires":[]},{"id":"a67acd63.bafec8","type":"for","name":"for each vnf parameter copy to vf_module_parameter","xml":"<for index='preloadIdx' start='0' end='`$tmp.endLoop1`'>\n<!--\n\n     \"preload-data\": {\n          \"vnf-topology-information\": {\n            \"vnf-parameters\": [\n            \n            -->\n","comments":"","outputs":1,"x":1742.4999389648438,"y":1092.25,"z":"3b92925f.163c6e","wires":[["f753321a.6c2d1"]]},{"id":"237abfdc.8fde88","type":"set","name":"set name/values","xml":"<set>\n<parameter name='tmp.vfmodule.param[$preloadIdx].name'  value='`$tmp.preloadvnfdata.preload-vnfs.vnf-preload-list[$vnfidx].preload-data.vnf-topology-information.vnf-parameters[$preloadIdx].vnf-parameter-name`' />\n<parameter name='tmp.vfmodule.param[$preloadIdx].value' value='`$tmp.preloadvnfdata.preload-vnfs.vnf-preload-list[$vnfidx].preload-data.vnf-topology-information.vnf-parameters[$preloadIdx].vnf-parameter-value`' />","comments":"","x":2247.6389770507812,"y":1161.9722595214844,"z":"3b92925f.163c6e","wires":[]},{"id":"2c968d51.0bd2e2","type":"get-resource","name":"get-resource tunnelxcon-allotted-resources","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.mdsal.ConfigResource' resource='GENERIC-RESOURCE-API'    \n         key='tunnelxconn-allotted-resources/' pfx='tmp.txconns' >\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t","comments":"","outputs":1,"x":664.3635559082031,"y":528.8182067871094,"z":"3b92925f.163c6e","wires":[["11d74753.206f81"]]},{"id":"5ee10ee7.c6cf","type":"for","name":"for tmp.xconns.tunnelxconn-allotted-resoruces.tunnelxonn-alloted-resource[]","xml":"<for index='txidx' start='0' end='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource_length`' >\n\n\n","comments":"","outputs":1,"x":1135.4544982910156,"y":551.9090576171875,"z":"3b92925f.163c6e","wires":[["240fab80.3e4614"]]},{"id":"c9248b80.346018","type":"switchNode","name":"switch parameter name","xml":"<switch test='`$tmp.test1 == $tmp.consuming-service-instance-id`'>","comments":"","outputs":1,"x":1521,"y":683.7423706054688,"z":"3b92925f.163c6e","wires":[["e3a95b7d.6e3cc8"]]},{"id":"e3a95b7d.6e3cc8","type":"success","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1689.5,"y":754.060546875,"z":"3b92925f.163c6e","wires":[["e36cb24f.8f8238"]]},{"id":"da18c149.35236","type":"set","name":"set thisIsVGW","xml":"<set>\n<parameter name='tmp.thisIsVGW' value='true' />\n","comments":"","x":2036.8182373046875,"y":868.5454711914062,"z":"3b92925f.163c6e","wires":[]},{"id":"b741cf13.457da8","type":"set","name":"set thisIsVGW false","xml":"<set>\n<parameter name='tmp.thisIsVGW' value='false' />\n","comments":"","x":584.8181762695312,"y":478.81817626953125,"z":"3b92925f.163c6e","wires":[]},{"id":"873df790.867b68","type":"switchNode","name":"switch thsIsVGW","xml":"<switch test='`$tmp.thisIsVGW`'>\n","comments":"","outputs":1,"x":396.3636474609375,"y":587.3637084960938,"z":"3b92925f.163c6e","wires":[["56eeee6b.c37618","6aee2248.0c84ac"]]},{"id":"56eeee6b.c37618","type":"other","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":419.090909090909,"y":669.1818181818181,"z":"3b92925f.163c6e","wires":[["98aba483.4d0d2"]]},{"id":"98aba483.4d0d2","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":600.6747436523438,"y":857.293701171875,"z":"3b92925f.163c6e","wires":[["daaeb9ef.8b4378","1ece97b8.8a8b7"]]},{"id":"fc6621e2.aa04c","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":956.666748046875,"y":912.1112060546875,"z":"3b92925f.163c6e","wires":[["48fed561.a74c4c","674d487f.eb7e1"]]},{"id":"240fab80.3e4614","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1290,"y":615.4444580078125,"z":"3b92925f.163c6e","wires":[["c9248b80.346018","ccce1d51.01276"]]},{"id":"f753321a.6c2d1","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2045.4166259765625,"y":1124.1944885253906,"z":"3b92925f.163c6e","wires":[["237abfdc.8fde88"]]},{"id":"11d74753.206f81","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":749.6666666666665,"y":579.2222222222222,"z":"3b92925f.163c6e","wires":[["5ee10ee7.c6cf"]]},{"id":"ccce1d51.01276","type":"set","name":"set txconns.tunnelxconn-allotted-resources.tunnelxconn-alloted-resource[$txidx].allotted-resource-data.tunnelxconn-topology.allotted-resource-identifiers.consuming-service-instance-id","xml":"<set>\n<parameter name='tmp.test1' value='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource[$txidx].allotted-resource-data.tunnelxconn-topology.allotted-resource-identifiers.consuming-service-instance-id`' />\n<parameter name='tmp.test2' value='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource-data[$txidx].tunnelxconn-topology[0].allotted-resource-identifiers[0].consuming-service-instance-id`' />","comments":"","x":1392,"y":254,"z":"3b92925f.163c6e","wires":[]},{"id":"674d487f.eb7e1","type":"set","name":"set test3","xml":"<set>\n<parameter name='tmp.test3' value='`$tmp.preloadvnfdata.preload-vnfs.vnf-preload-list[$vnfidx].vnf-name`' />\n<parameter name='tmp.test4' value='`$tmp.brg-mac-address-match`'/>\n\n\n","comments":"","x":1118,"y":803,"z":"3b92925f.163c6e","wires":[]},{"id":"e4b74198.b4a08","type":"set","name":"set length of for  endLoop1","xml":"<set>\n<parameter name='tmp.endLoop1' value='`$tmp.preloadvnfdata.preload-vnfs.vnf-preload-list[$vnfidx].preload-data.vnf-topology-information.vnf-parameters_length`' />","comments":"","x":1656.25,"y":1018.5,"z":"3b92925f.163c6e","wires":[]},{"id":"3fffba2f.87934e","type":"set","name":"set vf-module-object-path","xml":"<set>\n<parameter name='tmp.vf-module-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $service-data.service-topology.service-topology-identifier.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vf-modules/vf-module/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id \n + '/'`\"/>\n","comments":"","x":1592.5,"y":1483.5,"z":"3b92925f.163c6e","wires":[]},{"id":"fa44659.2bd9398","type":"set","name":"copy  vf-module-parameters","xml":"<set>\n<!--\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param.'\n\n                 service-data.vnfs.vnf\\[0\\].       vnf-data.vf-modules.vf-module\\[0\\]             .vf-module-data.vf-module-topology.vf-module-parameters.param.\n   value='$tmp.vfmodule.' />\n-->\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.'\n   value='$tmp.vfmodule.' />","comments":"","x":1630.0000610351562,"y":1889.2499389648438,"z":"3b92925f.163c6e","wires":[]},{"id":"78311370.3a2a8c","type":"execute","name":"execute print context","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bdf-gw-vfmodule.log' />\n","comments":"","outputs":1,"x":1566.2500610351562,"y":1944.7499389648438,"z":"3b92925f.163c6e","wires":[[]]},{"id":"1b6c5025.a28cb","type":"set","name":"set tmp.vfmodule.param_length","xml":"<set>\n<parameter name='tmp.vfmodule.param_length' value='`$tmp.endLoop1`' />\n","comments":"","x":1676.2501831054688,"y":1156,"z":"3b92925f.163c6e","wires":[]},{"id":"5b7de177.d6649","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n","comments":"","x":1317.5,"y":1703.5,"z":"3b92925f.163c6e","wires":[]},{"id":"d503c7f6.04f208","type":"for","name":"for paramIdx to set VNI","xml":"<for index='paramIdx' start='0' end='`$tmp.vfmodule.param_length`' >\n","comments":"","outputs":1,"x":1665,"y":1803.5,"z":"3b92925f.163c6e","wires":[["aa9ad258.364768"]]},{"id":"c3b85a56.a27c6","type":"switchNode","name":"switch parameter name vg-mux-tunnel-vni","xml":"<switch test='`$tmp.vfmodule.param[$paramIdx].name == $tmp.vg-mux-tunnel-vni-match`'>","comments":"","outputs":1,"x":2162.5,"y":1872.25,"z":"3b92925f.163c6e","wires":[["f9a8b460.0aebc8"]]},{"id":"f9a8b460.0aebc8","type":"success","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2480,"y":1899.75,"z":"3b92925f.163c6e","wires":[["5f636c63.51455c"]]},{"id":"5f636c63.51455c","type":"set","name":"set vni in tmp.vfmodule.param","xml":"<set>\n<parameter name='$tmp.vfmodule.param[$paramIdx].value' value='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource.allotted-resource-data.tunnelxconn-topology.tunnelxconn-assignments.vni`' />\n","comments":"","x":2692.5,"y":1937.25,"z":"3b92925f.163c6e","wires":[]},{"id":"b45646b7.e1cbe","type":"set","name":"set switch test string","xml":"<set>\n<!--\n<parameter name='tmp.service.vnf.vf-module.vg-mux-tunnel-vni' value='`$input.vni`' />\n-->\n<parameter name='tmp.vg-mux-tunnel-vni-match' value='vg_vgmux_tunnel_vni' />\n<parameter name='tmp.vg-lan-ip-match' value='vgw_private_ip_0' />\n\n\n\n\n","comments":"","x":1655,"y":1753.5,"z":"3b92925f.163c6e","wires":[]},{"id":"aa9ad258.364768","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1871.25,"y":1798.5,"z":"3b92925f.163c6e","wires":[["c3b85a56.a27c6","e00e9048.087e"]]},{"id":"5402a6e0.bb6a08","type":"set","name":"set to see tmpvfmodule.param[].name","xml":"<set>\n<!--\n<parameter name='tmp.service.vnf.vf-module.vg-mux-tunnel-vni' value='`$input.vni`' />\n-->\n<parameter name='tmp.test.param[$paramIdx].name' value='`$tmp.vfmodule.param[$paramIdx].name`' />\n\n\n\n","comments":"","x":2150.0000610351562,"y":1791,"z":"3b92925f.163c6e","wires":[]},{"id":"95928c0a.48109","type":"comment","name":"let md-sal helper save data so no need for the RESTAPICAll Node","info":"","comments":"","x":1662.4999084472656,"y":2043.5,"z":"3b92925f.163c6e","wires":[]},{"id":"f383d653.4e192","type":"comment","name":" using path from calling DG - these nodes for testing","info":"","comments":"","x":2145,"y":1494.75,"z":"3b92925f.163c6e","wires":[]},{"id":"5b061076.f69d08","type":"set","name":"set MACADDRESS fa:16:3e:8f:ea:68 ","xml":"<set>\n<parameter name='tmp.brg-macaddress' value='fa:16:3e:8f:ea:68' />\n\n","comments":"","x":639,"y":380,"z":"3b92925f.163c6e","wires":[]},{"id":"12c5fa84.c32cbd","type":"set","name":"set VGW2BRG-MACADDRESs & consuming service-instance","xml":"<set>\n<parameter name='tmp.brg-mac-address-match' value=\"`'VGW2BRG-' + $tmp.brg-macaddress`\"/>\n<parameter name='tmp.consuming-service-instance-id' value='`$service-data.service-topology.service-topology-identifier.service-instance-id`' />\n\n<!--\n<parameter name='tmp.brg-macaddress' value='fa:16:3e:8f:ea:68' />\n<parameter name='tmp.brg-mac-address-match' value=\"`'VGW2BRG-' + $tmp.brg-macaddress`\"/>\n-->\n<!--\n<parameter name='tmp.consuming-service-instance-id' value='b3cb7040-f7a5-4beb-ad2f-2a893b7d374b' />\nservice-data.service-topology.service-topology-identifier.service-instance-id\n\n-->\n","comments":"","x":2179,"y":801,"z":"3b92925f.163c6e","wires":[]},{"id":"e36cb24f.8f8238","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1835,"y":784,"z":"3b92925f.163c6e","wires":[["da18c149.35236","12c5fa84.c32cbd","9353e1b2.a30a7"]]},{"id":"9353e1b2.a30a7","type":"set","name":"set MACADDRESS tmp.txconcs...brg-wan-mac-address","xml":"<set>\n<parameter name='tmp.brg-macaddress' \n      value='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource.allotted-resource-data.allotted-resource-operation-information.tunnelxconn-request-input.brg-wan-mac-address`' />\n\n","comments":"","x":2153,"y":738,"z":"3b92925f.163c6e","wires":[]},{"id":"6aee2248.0c84ac","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":359,"y":828,"z":"3b92925f.163c6e","wires":[["a86b65a1.1c30c8"]]},{"id":"b0589543.c2b0f8","type":"returnFailure","name":"return failure Did not find vGW Preload","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value='Did not find vGW Preload' />\n","comments":"","x":617,"y":994,"z":"3b92925f.163c6e","wires":[]},{"id":"a86b65a1.1c30c8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":371,"y":906,"z":"3b92925f.163c6e","wires":[["b0589543.c2b0f8"]]},{"id":"db862ccc.ab0a8","type":"execute","name":"execute print context","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bdf-gw-vfmodule.failure.log' />\n","comments":"","outputs":1,"x":567,"y":943,"z":"3b92925f.163c6e","wires":[[]]},{"id":"e00e9048.087e","type":"switchNode","name":"switch parameter name vg-mux-tunnel-vni","xml":"<switch test='`$tmp.vfmodule.param[$paramIdx].name == $tmp.vg-lan-ip-match`'>","comments":"","outputs":1,"x":2156,"y":1937,"z":"3b92925f.163c6e","wires":[["62e8c19f.5ebc3"]]},{"id":"62e8c19f.5ebc3","type":"success","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2473.5,"y":1964.5,"z":"3b92925f.163c6e","wires":[["a833b7f7.da47"]]},{"id":"a833b7f7.da47","type":"set","name":"set lan-ip[ in tmp.vfmodule.param","xml":"<set>\n<parameter name='$tmp.vfmodule.param[$paramIdx].value' value='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource.allotted-resource-data.tunnelxconn-topology.tunnelxconn-assignments.vg-ip`' />\n","comments":"","x":2686,"y":2002,"z":"3b92925f.163c6e","wires":[]},{"id":"7226ef2a.8b2378","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n","comments":"","x":1908,"y":1939,"z":"3b92925f.163c6e","wires":[]}]
