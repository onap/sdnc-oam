[{"id":"598da1da.5ff53","type":"dgstart","name":"DGSTART","outputs":1,"x":193,"y":95,"z":"ecd400e4.7e3cd","wires":[["e8bfe1b5.44e4"]]},{"id":"e8bfe1b5.44e4","type":"service-logic","name":"GENERIC-RESOURCE-API 1.2.0-SNAPSHOT-111701","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":289.2380790710449,"y":155.95239067077637,"z":"ecd400e4.7e3cd","wires":[["c2c3f191.17b448"]]},{"id":"c2c3f191.17b448","type":"method","name":"gw-vfmodule-update","xml":"<method rpc='gw-vfmodule-update' mode='sync'>\n","comments":"","outputs":1,"x":173.15488815307617,"y":249.19043064117432,"z":"ecd400e4.7e3cd","wires":[["816d44b0.518088"]]},{"id":"816d44b0.518088","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":289.9999809265137,"y":349.0000009536743,"z":"ecd400e4.7e3cd","wires":[["20ee11ef.1a4046","59e4ffe0.ab8b38","b4fdc1d0.687e58","5b65bf62.669eb8"]]},{"id":"f5047148.69fc68","type":"execute","name":"generate vnf service-info url - vnf-d","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.vnf-api-url1`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.vnf-api-url2\"/>\n    <parameter name=\"target\" value=\"{vnf-id}\"/>\n    <parameter name=\"replacement\" value=\"`$brg-topology-operation-input.allotted-resource-data.brg-topology.brg-assignments.gw-vnf-id`\"/>\n\n","comments":"","outputs":1,"x":2049.2500610351562,"y":1519.0002136230469,"z":"ecd400e4.7e3cd","wires":[[]]},{"id":"29cdf559.ca1eaa","type":"execute","name":"execute RestApiCallNode - PUT service into service","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.services.vnf.vfmodule.templatefile`\" />\n   <!--\n   <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.vnf-api-url3`' />\n   -->\n   <parameter name='restapiUrl' value='`$tmp.vf-module-object-path`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-vfmodule-vgw\" />\n\n","comments":"","outputs":1,"x":1635.9999389648438,"y":2050.0001831054688,"z":"ecd400e4.7e3cd","wires":[["2fbded9d.71d2e2"]]},{"id":"56800ae7.a5f704","type":"execute","name":"generate vnf service-info url - service-instance-id","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.service.vnf.vfmodule-resource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.vnf-api-url1\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.service-data.service-information.service-instance-id`\"/>\n","comments":"","outputs":1,"x":2094.7500610351562,"y":1476.2502136230469,"z":"ecd400e4.7e3cd","wires":[[]]},{"id":"f3f3244.993d5d8","type":"execute","name":"generate vnf service-info url - vf-module-id","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.vnf-api-url2`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.vnf-api-url3\"/>\n    <parameter name=\"target\" value=\"{vf-module-id}\"/>\n    <parameter name=\"replacement\" value=\"`$brg-topology-operation-input.allotted-resource-data.brg-topology.brg-assignments.gw-vfmodule-id`\"/>\n\n","comments":"","outputs":1,"x":2073.5000610351562,"y":1560.0002136230469,"z":"ecd400e4.7e3cd","wires":[[]]},{"id":"633d1701.4091a8","type":"set","name":"set tmp.vgw.vg_mux_tunnel.vni","xml":"<set>\n<!--\n<parameter name='tmp.service.vnf.vf-module.vg-mux-tunnel-vni' value='`$input.vni`' />\n-->\n<parameter name='tmp.service.vnf.vf-module.vg-mux-tunnel-vni' value='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource[0].allotted-resource-data[0].tunnelxconn-topology[0].tunnelxconn-assignments[0].vni`' />\n<parameter name='tmp.service.vnf.vf-module.vg-lan-ip' value='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource[0].allotted-resource-data[0].tunnelxconn-topology[0].tunnelxconn-assignments[0].vg-ip`' />\n\n\n\n","comments":"","x":1627.2500610351562,"y":1637.5002136230469,"z":"ecd400e4.7e3cd","wires":[]},{"id":"7714e38d.36b9a4","type":"set","name":"set tmp.service.vnf.vf-module-id","xml":"<set>\n<parameter name='tmp.service.vnf.vf-module.vf-module-id' value='9aa4ede4-c639-48c4-9386-74c9ff87f8e3' />\n<parameter name='brg-topology-operation-input.allotted-resource-data.brg-topology.brg-assignments.gw-vfmodule-id' value='9aa4ede4-c639-48c4-9386-74c9ff87f8e3' />","comments":"","x":2089.75,"y":1317.0834045410156,"z":"ecd400e4.7e3cd","wires":[]},{"id":"93e84d90.340078","type":"set","name":"set tmp.service-data.vnf-information.vnf-id","xml":"<set>\n<parameter name='tmp.service-data.vnf-information.vnf-id' value='3a3332d1-12ad-4709-ac81-ba32b304a462' />\n<parameter name='brg-topology-operation-input.allotted-resource-data.brg-topology.brg-assignments.gw-vnf-id' value='3a3332d1-12ad-4709-ac81-ba32b304a462' />\n","comments":"","x":2056,"y":1277.0834045410156,"z":"ecd400e4.7e3cd","wires":[]},{"id":"d17fe59a.3953d8","type":"set","name":"set tmp.service-data.service-information.service-instance-id","xml":"<set>\n<parameter name='tmp.service-data.service-information.service-instance-id' value='6e34b9fb-9ec1-4c95-9e12-0326c434c623' />\n","comments":"","x":2104.7499389648438,"y":1222.083251953125,"z":"ecd400e4.7e3cd","wires":[]},{"id":"7600efdf.c93f7","type":"set","name":"set tmp.service.vnf.vf-module-id","xml":"<set>\n<parameter name='tmp.restapi.service.vnf.vfmodule-resource' value='`$prop.restapi.service.vnf.vfmodule-resource`' />\n","comments":"","x":1609.75,"y":1355.8333435058594,"z":"ecd400e4.7e3cd","wires":[]},{"id":"d5a817bf.40d818","type":"execute","name":"execute Propertis gen-res-api-dg","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n","comments":"","outputs":1,"x":1617.2498779296875,"y":1147.0834045410156,"z":"ecd400e4.7e3cd","wires":[[]]},{"id":"2fbded9d.71d2e2","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1917.2499389648438,"y":2101.2501831054688,"z":"ecd400e4.7e3cd","wires":[["7c36fcac.724384"]]},{"id":"7c36fcac.724384","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value='Failed on PUT vf-module parameters to MD0SAL' />\n","comments":"","x":2107.2499389648438,"y":2110.0001831054688,"z":"ecd400e4.7e3cd","wires":[]},{"id":"5b65bf62.669eb8","type":"set","name":"set  consuming service-instance","xml":"<set>\n<!--\n<parameter name='tmp.brg-macaddress' value='fa:16:3e:8f:ea:68' />\n<parameter name='tmp.brg-mac-address-match' value=\"`'VGW2BRG-' + $tmp.brg-macaddress`\"/>\n\n<parameter name='tmp.consuming-service-instance-id' value='b3cb7040-f7a5-4beb-ad2f-2a893b7d374b' />\nservice-data.service-topology.service-topology-identifier.service-instance-id\n\n-->\n<parameter name='tmp.consuming-service-instance-id' value='`$service-data.service-topology.service-topology-identifier.service-instance-id`' />\n","comments":"","x":664.0000610351562,"y":361.08343505859375,"z":"ecd400e4.7e3cd","wires":[]},{"id":"3216409f.ddf908","type":"get-resource","name":"get-resource vnfs","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.mdsal.ConfigResource' resource='VNF-API' key='preload-vnfs' pfx='tmp.preloadvnfdata' >\n","comments":"","outputs":1,"x":826.3055419921875,"y":692.7499694824219,"z":"ecd400e4.7e3cd","wires":[[]]},{"id":"88679ac8.e6e25","type":"for","name":"for tmp.vnfs","xml":"<for index='vnfidx' start='0' end='`$tmp.preloadvnfdata.preload-vnfs.vnf-preload-list_length`' >\n\n\n","comments":"","outputs":1,"x":820.1944580078125,"y":794.9723510742188,"z":"ecd400e4.7e3cd","wires":[["fa60d02d.93243"]]},{"id":"a2c42524.6f687","type":"switchNode","name":"switch parameter name","xml":"<switch test='`$tmp.preloadvnfdata.preload-vnfs.vnf-preload-list[$vnfidx].vnf-name == $tmp.brg-mac-address-match`'>\n\n\n","comments":"","outputs":1,"x":1108.1942749023438,"y":810.361083984375,"z":"ecd400e4.7e3cd","wires":[["3dad1eb1.cf3592"]]},{"id":"3dad1eb1.cf3592","type":"success","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1266.91650390625,"y":956.5,"z":"ecd400e4.7e3cd","wires":[["8001b05.27f695"]]},{"id":"8001b05.27f695","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1182,"y":1416.5,"z":"ecd400e4.7e3cd","wires":[["d512d66d.0b04b","d5a817bf.40d818","7600efdf.c93f7","1fcf0406.6ca354","c75aac33.bcb838","b54dc0bb.53e598","332e311a.704a56","a4d6fe94.d5efb","633d1701.4091a8","ac8b339d.25537"]]},{"id":"5b61d2f6.309134","type":"comment","name":"vnfidx ","info":"","comments":"","x":1428.2499389648438,"y":830.2500305175781,"z":"ecd400e4.7e3cd","wires":[]},{"id":"d512d66d.0b04b","type":"for","name":"for each vnf parameter copy to vf_module_parameter","xml":"<for index='preloadIdx' start='0' end='`$tmp.endLoop1`'>\n<!--\n\n     \"preload-data\": {\n          \"vnf-topology-information\": {\n            \"vnf-parameters\": [\n            \n            -->\n","comments":"","outputs":1,"x":1684.4999389648438,"y":1025.25,"z":"ecd400e4.7e3cd","wires":[["1bd3d02c.d5cd3"]]},{"id":"cfe4dc41.e3614","type":"set","name":"set name/values","xml":"<set>\n<parameter name='tmp.vfmodule.param[$preloadIdx].name'  value='`$tmp.preloadvnfdata.preload-vnfs.vnf-preload-list[$vnfidx].preload-data.vnf-topology-information.vnf-parameters[$preloadIdx].vnf-parameter-name`' />\n<parameter name='tmp.vfmodule.param[$preloadIdx].value' value='`$tmp.preloadvnfdata.preload-vnfs.vnf-preload-list[$vnfidx].preload-data.vnf-topology-information.vnf-parameters[$preloadIdx].vnf-parameter-value`' />","comments":"","x":2189.6389770507812,"y":1094.9722595214844,"z":"ecd400e4.7e3cd","wires":[]},{"id":"20ee11ef.1a4046","type":"get-resource","name":"get-resource tunnelxcon-allotted-resources","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.mdsal.ConfigResource' resource='GENERIC-RESOURCE-API'    \n         key='tunnelxconn-allotted-resources/' pfx='tmp.txconns' >\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t","comments":"","outputs":1,"x":606.3635559082031,"y":461.8182067871094,"z":"ecd400e4.7e3cd","wires":[["4410a476.e7419c"]]},{"id":"710c230b.5aad44","type":"for","name":"for tmp.xconns.tunnelxconn-allotted-resoruces.tunnelxonn-alloted-resource[]","xml":"<for index='txidx' start='0' end='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource_length`' >\n\n\n","comments":"","outputs":1,"x":1077.4544982910156,"y":484.9090576171875,"z":"ecd400e4.7e3cd","wires":[["ecbc73ca.69e62"]]},{"id":"3ef68d67.22a6d2","type":"switchNode","name":"switch parameter name","xml":"<switch test='`$tmp.test1 == $tmp.consuming-service-instance-id`'>","comments":"","outputs":1,"x":1463,"y":616.7423706054688,"z":"ecd400e4.7e3cd","wires":[["5315da24.624c8c"]]},{"id":"5315da24.624c8c","type":"success","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1631.5,"y":687.060546875,"z":"ecd400e4.7e3cd","wires":[["fe521292.47c1e"]]},{"id":"c1660858.96d478","type":"set","name":"set thisIsVGW","xml":"<set>\n<parameter name='tmp.thisIsVGW' value='true' />\n","comments":"","x":1978.8182373046875,"y":801.5454711914062,"z":"ecd400e4.7e3cd","wires":[]},{"id":"59e4ffe0.ab8b38","type":"set","name":"set thisIsVGW false","xml":"<set>\n<parameter name='tmp.thisIsVGW' value='false' />\n","comments":"","x":526.8181762695312,"y":411.81817626953125,"z":"ecd400e4.7e3cd","wires":[]},{"id":"b4fdc1d0.687e58","type":"switchNode","name":"switch thsIsVGW","xml":"<switch test='`$tmp.thisIsVGW`'>\n","comments":"","outputs":1,"x":338.3636474609375,"y":520.3637084960938,"z":"ecd400e4.7e3cd","wires":[["88c25d14.74fa5","9b8dd609.661cf8"]]},{"id":"88c25d14.74fa5","type":"other","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":361.090909090909,"y":602.1818181818181,"z":"ecd400e4.7e3cd","wires":[["fb8053dc.74e628"]]},{"id":"fb8053dc.74e628","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":542.6747436523438,"y":790.293701171875,"z":"ecd400e4.7e3cd","wires":[["3216409f.ddf908","88679ac8.e6e25"]]},{"id":"fa60d02d.93243","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":898.666748046875,"y":845.1112060546875,"z":"ecd400e4.7e3cd","wires":[["a2c42524.6f687","14253b4.3054045"]]},{"id":"ecbc73ca.69e62","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1232,"y":548.4444580078125,"z":"ecd400e4.7e3cd","wires":[["3ef68d67.22a6d2","7c99eecf.8882b8"]]},{"id":"1bd3d02c.d5cd3","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1987.4166259765625,"y":1057.1944885253906,"z":"ecd400e4.7e3cd","wires":[["cfe4dc41.e3614"]]},{"id":"4410a476.e7419c","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":691.6666666666665,"y":512.2222222222222,"z":"ecd400e4.7e3cd","wires":[["710c230b.5aad44"]]},{"id":"7c99eecf.8882b8","type":"set","name":"set txconns.tunnelxconn-allotted-resources.tunnelxconn-alloted-resource[$txidx].allotted-resource-data.tunnelxconn-topology.allotted-resource-identifiers.consuming-service-instance-id","xml":"<set>\n<parameter name='tmp.test1' value='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource[$txidx].allotted-resource-data.tunnelxconn-topology.allotted-resource-identifiers.consuming-service-instance-id`' />\n<parameter name='tmp.test2' value='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource-data[$txidx].tunnelxconn-topology[0].allotted-resource-identifiers[0].consuming-service-instance-id`' />","comments":"","x":1334,"y":187,"z":"ecd400e4.7e3cd","wires":[]},{"id":"14253b4.3054045","type":"set","name":"set test3","xml":"<set>\n<parameter name='tmp.test3' value='`$tmp.preloadvnfdata.preload-vnfs.vnf-preload-list[$vnfidx].vnf-name`' />\n<parameter name='tmp.test4' value='`$tmp.brg-mac-address-match`'/>\n\n\n","comments":"","x":1060,"y":736,"z":"ecd400e4.7e3cd","wires":[]},{"id":"1fcf0406.6ca354","type":"set","name":"set length of for  endLoop1","xml":"<set>\n<parameter name='tmp.endLoop1' value='`$tmp.preloadvnfdata.preload-vnfs.vnf-preload-list[$vnfidx].preload-data.vnf-topology-information.vnf-parameters_length`' />","comments":"","x":1598.25,"y":951.5,"z":"ecd400e4.7e3cd","wires":[]},{"id":"c75aac33.bcb838","type":"set","name":"set vf-module-object-path","xml":"<set>\n<parameter name='tmp.vf-module-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $service-data.service-topology.service-topology-identifier.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vf-modules/vf-module/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id \n + '/'`\"/>\n","comments":"","x":1534.5,"y":1416.5,"z":"ecd400e4.7e3cd","wires":[]},{"id":"b54dc0bb.53e598","type":"set","name":"copy  vf-module-parameters","xml":"<set>\n<!--\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param.'\n\n                 service-data.vnfs.vnf\\[0\\].       vnf-data.vf-modules.vf-module\\[0\\]             .vf-module-data.vf-module-topology.vf-module-parameters.param.\n   value='$tmp.vfmodule.' />\n-->\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.'\n   value='$tmp.vfmodule.' />","comments":"","x":1572.0000610351562,"y":1822.2499389648438,"z":"ecd400e4.7e3cd","wires":[]},{"id":"c73039d5.8482e8","type":"execute","name":"execute print context","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bdf-gw-vfmodule.log' />\n","comments":"","outputs":1,"x":1508.2500610351562,"y":1877.7499389648438,"z":"ecd400e4.7e3cd","wires":[[]]},{"id":"332e311a.704a56","type":"set","name":"set tmp.vfmodule.param_length","xml":"<set>\n<parameter name='tmp.vfmodule.param_length' value='`$tmp.endLoop1`' />\n","comments":"","x":1618.2501831054688,"y":1089,"z":"ecd400e4.7e3cd","wires":[]},{"id":"573eb1da.bd7c1","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n","comments":"","x":1259.5,"y":1636.5,"z":"ecd400e4.7e3cd","wires":[]},{"id":"a4d6fe94.d5efb","type":"for","name":"for paramIdx to set VNI","xml":"<for index='paramIdx' start='0' end='`$tmp.vfmodule.param_length`' >\n","comments":"","outputs":1,"x":1607,"y":1736.5,"z":"ecd400e4.7e3cd","wires":[["b708abc8.8af15"]]},{"id":"32d12113.25874e","type":"switchNode","name":"switch parameter name vg-mux-tunnel-vni","xml":"<switch test='`$tmp.vfmodule.param[$paramIdx].name == $tmp.vg-mux-tunnel-vni-match`'>","comments":"","outputs":1,"x":2104.5,"y":1805.25,"z":"ecd400e4.7e3cd","wires":[["d89f78c6.0ed118"]]},{"id":"d89f78c6.0ed118","type":"success","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2422,"y":1832.75,"z":"ecd400e4.7e3cd","wires":[["290b1a68.798296"]]},{"id":"290b1a68.798296","type":"set","name":"set vni in tmp.vfmodule.param","xml":"<set>\n<parameter name='$tmp.vfmodule.param[$paramIdx].value' value='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource.allotted-resource-data.tunnelxconn-topology.tunnelxconn-assignments.vni`' />\n","comments":"","x":2634.5,"y":1870.25,"z":"ecd400e4.7e3cd","wires":[]},{"id":"ac8b339d.25537","type":"set","name":"set switch test string","xml":"<set>\n<!--\n<parameter name='tmp.service.vnf.vf-module.vg-mux-tunnel-vni' value='`$input.vni`' />\n-->\n<parameter name='tmp.vg-mux-tunnel-vni-match' value='vg_vgmux_tunnel_vni' />\n<parameter name='tmp.vg-lan-ip-match' value='vgw_private_ip_0' />\n\n\n\n\n","comments":"","x":1597,"y":1686.5,"z":"ecd400e4.7e3cd","wires":[]},{"id":"b708abc8.8af15","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1813.25,"y":1731.5,"z":"ecd400e4.7e3cd","wires":[["32d12113.25874e","8d15a992.b4eaa"]]},{"id":"bcc180fb.a085f8","type":"set","name":"set to see tmpvfmodule.param[].name","xml":"<set>\n<!--\n<parameter name='tmp.service.vnf.vf-module.vg-mux-tunnel-vni' value='`$input.vni`' />\n-->\n<parameter name='tmp.test.param[$paramIdx].name' value='`$tmp.vfmodule.param[$paramIdx].name`' />\n\n\n\n","comments":"","x":2092.0000610351562,"y":1724,"z":"ecd400e4.7e3cd","wires":[]},{"id":"91617dc.d84638","type":"comment","name":"let md-sal helper save data so no need for the RESTAPICAll Node","info":"","comments":"","x":1604.4999084472656,"y":1976.5,"z":"ecd400e4.7e3cd","wires":[]},{"id":"ce85b4c1.5261a8","type":"comment","name":" using path from calling DG - these nodes for testing","info":"","comments":"","x":2087,"y":1427.75,"z":"ecd400e4.7e3cd","wires":[]},{"id":"7c8c3457.7b7a54","type":"set","name":"set MACADDRESS fa:16:3e:8f:ea:68 ","xml":"<set>\n<parameter name='tmp.brg-macaddress' value='fa:16:3e:8f:ea:68' />\n\n","comments":"","x":581,"y":313,"z":"ecd400e4.7e3cd","wires":[]},{"id":"8e5b5b63.4d5608","type":"set","name":"set VGW2BRG-MACADDRESs & consuming service-instance","xml":"<set>\n<parameter name='tmp.brg-macaddress' value='fa:16:3e:8f:ea:68' />\n<parameter name='tmp.brg-mac-address-match' value=\"`'VGW2BRG-' + $tmp.brg-macaddress`\"/>\n<!--\n<parameter name='tmp.consuming-service-instance-id' value='b3cb7040-f7a5-4beb-ad2f-2a893b7d374b' />\nservice-data.service-topology.service-topology-identifier.service-instance-id\n\n-->\n<parameter name='tmp.consuming-service-instance-id' value='`$service-data.service-topology.service-topology-identifier.service-instance-id`' />\n","comments":"","x":2121,"y":734,"z":"ecd400e4.7e3cd","wires":[]},{"id":"fe521292.47c1e","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1777,"y":717,"z":"ecd400e4.7e3cd","wires":[["c1660858.96d478","8e5b5b63.4d5608","e1791278.975078"]]},{"id":"e1791278.975078","type":"set","name":"set MACADDRESS tmp.txconcs...brg-wan-mac-address","xml":"<set>\n<parameter name='tmp.brg-macaddress' \n      value='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource.allotted-resource-data.allotted-resource-operation-information.tunnelxconn-request-input.brg-wan-mac-address`' />\n\n","comments":"","x":2095,"y":671,"z":"ecd400e4.7e3cd","wires":[]},{"id":"9b8dd609.661cf8","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":301,"y":761,"z":"ecd400e4.7e3cd","wires":[["655a26ce.271898"]]},{"id":"5c61a2e.ac4ccdc","type":"returnFailure","name":"return failure Did not find vGW Preload","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value='Did not find vGW Preload' />\n","comments":"","x":559,"y":927,"z":"ecd400e4.7e3cd","wires":[]},{"id":"655a26ce.271898","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":313,"y":839,"z":"ecd400e4.7e3cd","wires":[["5c61a2e.ac4ccdc"]]},{"id":"5669f615.7ed478","type":"execute","name":"execute print context","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bdf-gw-vfmodule.failure.log' />\n","comments":"","outputs":1,"x":509,"y":876,"z":"ecd400e4.7e3cd","wires":[[]]},{"id":"8d15a992.b4eaa","type":"switchNode","name":"switch parameter name vg-mux-tunnel-vni","xml":"<switch test='`$tmp.vfmodule.param[$paramIdx].name == $tmp.vg-lan-ip-match`'>","comments":"","outputs":1,"x":2098,"y":1870,"z":"ecd400e4.7e3cd","wires":[["5bf23ed2.af844"]]},{"id":"5bf23ed2.af844","type":"success","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2415.5,"y":1897.5,"z":"ecd400e4.7e3cd","wires":[["7c18fafa.f033b4"]]},{"id":"7c18fafa.f033b4","type":"set","name":"set lan-ip[ in tmp.vfmodule.param","xml":"<set>\n<parameter name='$tmp.vfmodule.param[$paramIdx].value' value='`$tmp.txconns.tunnelxconn-allotted-resources.tunnelxconn-allotted-resource.allotted-resource-data.tunnelxconn-topology.tunnelxconn-assignments.vg-ip`' />\n","comments":"","x":2628,"y":1935,"z":"ecd400e4.7e3cd","wires":[]},{"id":"abd8f89a.2207a","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n","comments":"","x":1850,"y":1872,"z":"ecd400e4.7e3cd","wires":[]}]
