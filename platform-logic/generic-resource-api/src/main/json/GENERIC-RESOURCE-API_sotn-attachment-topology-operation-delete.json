[
  {
    "id": "11e769e3.3811f6",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 114,
    "y": 40,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "a911446f.df7748"
      ]
    ]
  },
  {
    "id": "a911446f.df7748",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 288.00000381469727,
    "y": 95.0000171661377,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "7ff497ab.f66f98"
      ]
    ]
  },
  {
    "id": "7ff497ab.f66f98",
    "type": "method",
    "name": "sotn-attachment-topology-operation-delete",
    "xml": "<method rpc='sotn-attachment-topology-operation-delete' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 276.0001220703125,
    "y": 183,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "5cbadab.7a99a24"
      ]
    ]
  },
  {
    "id": "5cbadab.7a99a24",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 292.0001220703125,
    "y": 738.0002446174622,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "12de2d1a.68bba3",
        "51b97e85.9070d",
        "1fed4a5d.8e6a46",
        "6484d39f.eed1bc",
        "5b5b7d66.22fc34",
        "e0c27564.dc6708",
        "4516c95e.b99748",
        "497a6009.1522c",
        "79c8cfb5.a81b4",
        "72f76f27.124fe",
        "eb5610dc.278e7",
        "8cb29231.a6eaa",
        "322e0846.b44bc8",
        "9ea8a95d.e39878",
        "75c532eb.23cc8c"
      ]
    ]
  },
  {
    "id": "12de2d1a.68bba3",
    "type": "set",
    "name": "set tmp.ar.allotted-resource-id,etc",
    "xml": "<set>\n<parameter name='tmp.ar.allotted-resource-id' value='`$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-id`' />\n<parameter name='tmp.ar.parent-service-instance-id' value='`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id`' />\n\n\n",
    "comments": "",
    "x": 688.9935607910156,
    "y": 136.9934868812561,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "a47c80d2.4bf0a",
    "type": "comment",
    "name": "set tmp ar-id to fetch resource from MDSAL",
    "info": "",
    "comments": "",
    "x": 717.9538726806641,
    "y": 101.02528285980225,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "51b97e85.9070d",
    "type": "set",
    "name": "set tmp.ar.self-link",
    "xml": "<set>\n<parameter name='tmp.ar.self-link' value=\"`'restconf/config/GENERIC-RESOURCE-API:connection-attachment-allotted-resources/connection-attachment-allotted-resource/'\n + $tmp.ar.allotted-resource-id\n + '/allotted-resource-data/connection-attachment-topology/'` \" />\n\n",
    "comments": "",
    "x": 642.9934997558594,
    "y": 229.99349212646484,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "5b5b7d66.22fc34",
    "type": "execute",
    "name": "execute Properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
    "comments": "",
    "outputs": 1,
    "x": 649.2553901672363,
    "y": 317.6602210998535,
    "z": "22c49458.dad37c",
    "wires": [
      []
    ]
  },
  {
    "id": "1fed4a5d.8e6a46",
    "type": "execute",
    "name": "generate allotted-resource url",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.allotted-resource-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 681.2554168701172,
    "y": 405.66020250320435,
    "z": "22c49458.dad37c",
    "wires": [
      []
    ]
  },
  {
    "id": "ab7e7ca9.bc19e",
    "type": "comment",
    "name": "Used for setting output to API Handler",
    "info": "",
    "comments": "",
    "x": 696.9935302734375,
    "y": 196.993501663208,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "ba32781e.53a208",
    "type": "comment",
    "name": "Obtain different URL, template location etc",
    "info": "For saving resource information to MDSAL & for AAI",
    "comments": "",
    "x": 714.9934959411621,
    "y": 282.8823823928833,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "b5885f7.9b7d5a",
    "type": "comment",
    "name": "Used to Get AR by id to MDSAL, same as self-link",
    "info": "",
    "comments": "",
    "x": 740.9935150146484,
    "y": 369.8823413848877,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "e2ab0cde.eabb7",
    "type": "comment",
    "name": "GET parent-service-data from mdsal to check existence of other End point",
    "info": "",
    "comments": "",
    "x": 808.0003280639648,
    "y": 824.5316228866577,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "9608d482.14feb8",
    "type": "for",
    "name": "for pidx..mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[]",
    "xml": "<for index='pidx' start='0' end='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1636.1849365234375,
    "y": 1058.00425863266,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "9f0a169a.b7bf38"
      ]
    ]
  },
  {
    "id": "6484d39f.eed1bc",
    "type": "switchNode",
    "name": "switch mdsal-psd.service-data.provided-allotted-resources_length",
    "xml": "<switch test='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 787.1842956542969,
    "y": 1064.718041419983,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "3cb5550a.e1379a",
        "525dfe7f.9aace"
      ]
    ]
  },
  {
    "id": "72d22ab8.9fbaf4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1237.4544582366943,
    "y": 1104.7015271186829,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "9608d482.14feb8",
        "37cdb210.11699e"
      ]
    ]
  },
  {
    "id": "9f0a169a.b7bf38",
    "type": "switchNode",
    "name": "switch allotted-resource-id",
    "xml": "<switch test=\"`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[$pidx].allotted-resource-id == $tmp.ar.allotted-resource-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2086.296142578125,
    "y": 1056.0041165351868,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "1c3b0551.8a3d7b"
      ]
    ]
  },
  {
    "id": "e0c27564.dc6708",
    "type": "set",
    "name": "set tmp.ar.parent-service-instance-id",
    "xml": "<set>\n<parameter name='tmp.ar.parent-service-instance-id' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id` \" />\n\n",
    "comments": "",
    "x": 698.9687118530273,
    "y": 860.0000677108765,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "df350c49.f450e",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1078.968994140625,
    "y": 938.0001826286316,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "f5ff5552.dcef18"
      ]
    ]
  },
  {
    "id": "a707d837.6f7a08",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1070.8207969665527,
    "y": 973.066267490387,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "72020d23.f0ba44"
      ]
    ]
  },
  {
    "id": "72020d23.f0ba44",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN resource not found\" />\n    \n",
    "comments": "",
    "x": 1245.969482421875,
    "y": 969.3336176872253,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "f5ff5552.dcef18",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1229.968994140625,
    "y": 936.0001826286316,
    "z": "22c49458.dad37c",
    "wires": [
      []
    ]
  },
  {
    "id": "b9f57970.85bbb8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 932.7307624816895,
    "y": 1253.952815413475,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "7794b76c.3bcdd8"
      ]
    ]
  },
  {
    "id": "7794b76c.3bcdd8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"AAI failed\" />\n",
    "comments": "",
    "x": 1099.2546424865723,
    "y": 1265.57188642025,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "2e04eae7.d58896",
    "type": "failure",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 939.8260498046875,
    "y": 1286.7147830724716,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "7794b76c.3bcdd8"
      ]
    ]
  },
  {
    "id": "4516c95e.b99748",
    "type": "set",
    "name": "set output to api handler",
    "xml": "<set>\n<parameter name='allotted-resource-id' value='`$tmp.ar.allotted-resource-id`' />\n<parameter name='connection-attachment-object-path' value=\"`$tmp.ar.self-link`\"/>\n<parameter name='service-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $connection-attachment-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n \n",
    "comments": "",
    "x": 665.5461502075195,
    "y": 1217.8276824951172,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "497a6009.1522c",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 634.9592552185059,
    "y": 1318.4434370994568,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "75c532eb.23cc8c",
    "type": "execute",
    "name": "execute RestApiCallNode - PUT AR by id",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='Delete' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 714.6666641235352,
    "y": 494.3333625793457,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "62855576.29e8bc",
        "943e1cd3.5570d",
        "d016523b.d696c"
      ]
    ]
  },
  {
    "id": "62855576.29e8bc",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 954.3081665039062,
    "y": 534.6649107933044,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "1a54db3b.e65b75"
      ]
    ]
  },
  {
    "id": "943e1cd3.5570d",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 951.3081665039062,
    "y": 491.16490840911865,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "1a54db3b.e65b75"
      ]
    ]
  },
  {
    "id": "d016523b.d696c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 958.0582466125488,
    "y": 450.5220036506653,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "4e5c2e12.2b4c5"
      ]
    ]
  },
  {
    "id": "1a54db3b.e65b75",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for connection-attachment-allotted-resource\" />\n",
    "comments": "",
    "x": 1110.058334350586,
    "y": 512.9149088859558,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "4e5c2e12.2b4c5",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1095.7141780853271,
    "y": 450.7141833305359,
    "z": "22c49458.dad37c",
    "wires": [
      []
    ]
  },
  {
    "id": "568d92cc.719a5c",
    "type": "comment",
    "name": "Delete Allotted Resource",
    "info": "",
    "comments": "",
    "x": 662.0000457763672,
    "y": 463.0000286102295,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "34b11a52.976836",
    "type": "for",
    "name": "for cidx..service-data.consumed-allotted-resources.consumed-allotted-resource[]",
    "xml": "<for index='cidx' start='0' end='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1612.00390625,
    "y": 700.00390625,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "905bba1a.0e8108"
      ]
    ]
  },
  {
    "id": "79c8cfb5.a81b4",
    "type": "switchNode",
    "name": "switch service-data.consumed-allotted-resources_length",
    "xml": "<switch test='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 765.0032920837402,
    "y": 660.71790766716,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "a04a8128.1b845",
        "9bf1251d.a97d08"
      ]
    ]
  },
  {
    "id": "a04a8128.1b845",
    "type": "other",
    "name": "outcome Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1089.1461563110352,
    "y": 643.5753421783447,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "673a72bf.8ebb9c"
      ]
    ]
  },
  {
    "id": "9bf1251d.a97d08",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1075.1461791992188,
    "y": 706.5753309726715,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "db5549c4.4372e8"
      ]
    ]
  },
  {
    "id": "db5549c4.4372e8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1235.2732696533203,
    "y": 704.7013075351715,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "34b11a52.976836",
        "f5274780.cdc8d8"
      ]
    ]
  },
  {
    "id": "72f76f27.124fe",
    "type": "set",
    "name": "set consumed allotted resources for deletion",
    "xml": "<set>\n<parameter name=\"service-data.consumed-allotted-resources.consumed-allotted-resource[$cidx].\" value=\"\" />\n<parameter name='service-data.consumed-allotted-resources.consumed-allotted-resource_length' value='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length - 1`' />\n\n",
    "comments": "",
    "x": 721.8606262207031,
    "y": 731.28955078125,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "905bba1a.0e8108",
    "type": "switchNode",
    "name": "switch allotted-resource-id",
    "xml": "<switch test=\"`$service-data.consumed-allotted-resources.consumed-allotted-resource[$cidx].allotted-resource-id == $tmp.ar.allotted-resource-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2050.1155166625977,
    "y": 696.0040283203125,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "a9176335.8c5a3"
      ]
    ]
  },
  {
    "id": "a9176335.8c5a3",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2245.925338745117,
    "y": 695.4683527946472,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "c3d97090.70bae"
      ]
    ]
  },
  {
    "id": "cc5aea61.28e048",
    "type": "set",
    "name": "set tmp.cidx",
    "xml": "<set>\n<parameter name='tmp.cidx' value='`$cidx`' />\n",
    "comments": "",
    "x": 2561.2618713378906,
    "y": 696.2246108055115,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "ad0e4910.5dc848",
    "type": "comment",
    "name": "Delete consumed service consumed-allotted-resources in mdsal",
    "info": "",
    "comments": "",
    "x": 776.0045623779297,
    "y": 593.0038724095793,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "5b6b08ee.203c48",
    "type": "comment",
    "name": "This set resource will be deleted in MDSAL by provider code",
    "info": "",
    "comments": "",
    "x": 766.337345123291,
    "y": 697.781964302063,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "5c1ad210.960a1c",
    "type": "comment",
    "name": "Obtain the index of conusumed AR",
    "info": "",
    "comments": "",
    "x": 688.7817535400391,
    "y": 624.8927326202393,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "673a72bf.8ebb9c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Resource to be deleted doesn't exist in MDSAL.\" />\n",
    "comments": "",
    "x": 1251.00390625,
    "y": 644.00390625,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "c3d97090.70bae",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2395.003936767578,
    "y": 696.2539558410645,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "cc5aea61.28e048"
      ]
    ]
  },
  {
    "id": "b29df060.eb56c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"resource to be deleted is not available in mdsal\" />\n",
    "comments": "",
    "x": 1705.25390625,
    "y": 753.25390625,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "b8b02536.9fab38",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1567.75390625,
    "y": 753.25390625,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "b29df060.eb56c"
      ]
    ]
  },
  {
    "id": "f5274780.cdc8d8",
    "type": "switchNode",
    "name": "switch tmp.cidx ",
    "xml": "<switch test=\"`$tmp.cidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1413.75390625,
    "y": 753.25390625,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "b8b02536.9fab38"
      ]
    ]
  },
  {
    "id": "88b79953.981898",
    "type": "comment",
    "name": "Delete provided service provided-allotted-resources in mdsal",
    "info": "",
    "comments": "",
    "x": 762.5039215087891,
    "y": 789.00390625,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "525dfe7f.9aace",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1090.5041770935059,
    "y": 1103.7540984153748,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "72d22ab8.9fbaf4"
      ]
    ]
  },
  {
    "id": "3cb5550a.e1379a",
    "type": "other",
    "name": "outcome Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1107.5040969848633,
    "y": 1015.7539324760437,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "b0f98381.70f7"
      ]
    ]
  },
  {
    "id": "b0f98381.70f7",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Resource to be deleted doesn't exist in MDSAL.\" />\n",
    "comments": "",
    "x": 1271.3616943359375,
    "y": 1016.1824774742126,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "1af61fb0.016",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"resource to be deleted is not available in mdsal\" />\n",
    "comments": "",
    "x": 1702.7539501190186,
    "y": 1133.753936290741,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "457e37be.33a0e8",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1565.2539501190186,
    "y": 1133.753936290741,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "1af61fb0.016"
      ]
    ]
  },
  {
    "id": "37cdb210.11699e",
    "type": "switchNode",
    "name": "switch tmp.pidx ",
    "xml": "<switch test=\"`$tmp.pidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1411.2539501190186,
    "y": 1133.753936290741,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "457e37be.33a0e8"
      ]
    ]
  },
  {
    "id": "1c3b0551.8a3d7b",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2275.504367828369,
    "y": 1053.7540946006775,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "f8a04da0.ae331"
      ]
    ]
  },
  {
    "id": "26796192.02fd4e",
    "type": "set",
    "name": "set tmp.pidx",
    "xml": "<set>\n<parameter name='tmp.pidx' value='`$pidx`' />\n\n",
    "comments": "",
    "x": 2343.8404846191406,
    "y": 1188.5101914405823,
    "z": "22c49458.dad37c",
    "wires": []
  },
  {
    "id": "f8a04da0.ae331",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2335.582820892334,
    "y": 1124.539580821991,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "26796192.02fd4e"
      ]
    ]
  },
  {
    "id": "eb5610dc.278e7",
    "type": "update",
    "name": "update AAI allotted-resource",
    "xml": "<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" resource='allotted-resource'  \n\t\tkey=\"customer.global-customer-id = $connection-attachment-topology-operation-input.service-information.global-customer-id AND\n\t\t\tservice-subscription.service-type = $connection-attachment-topology-operation-input.service-information.subscription-service-type AND\n\t\t\tservice-instance.service-instance-id = $connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id AND\n\t\t\tallotted-resource.id = $tmp.ar.allotted-resource-id\">\n",
    "comments": "",
    "outputs": 1,
    "x": 678.2227554321289,
    "y": 1273.754346370697,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "b9f57970.85bbb8",
        "2e04eae7.d58896"
      ]
    ]
  },
  {
    "id": "322e0846.b44bc8",
    "type": "execute",
    "name": "execute RestApiCallNode - get-resource parent service data",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url-psd`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-psd\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 768.3334197998047,
    "y": 959.333366394043,
    "z": "22c49458.dad37c",
    "wires": [
      [
        "df350c49.f450e",
        "a707d837.6f7a08"
      ]
    ]
  },
  {
    "id": "8cb29231.a6eaa",
    "type": "execute",
    "name": "get parent-service-data tmp.ar-url-psd",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"/restconf/config/GENERIC-RESOURCE-API:services/service/{service-instance-id}/service-data\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url-psd\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.parent-service-instance-id`\"/>",
    "comments": "",
    "outputs": 1,
    "x": 702.3333587646484,
    "y": 917.3332056999207,
    "z": "22c49458.dad37c",
    "wires": [
      []
    ]
  },
  {
    "id": "9ea8a95d.e39878",
    "type": "execute",
    "name": "execute RestApiCallNode - delete-resource parent service data",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value=\"`$prop.controller.url + $tmp.ar-url-psd + '/provided-allotted-resources/provided-allotted-resource/' + $tmp.ar.allotted-resource-id`\" />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='DELETE' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-psd-delete\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 773,
    "y": 1168,
    "z": "22c49458.dad37c",
    "wires": [
      []
    ]
  }
]
