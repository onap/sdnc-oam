[
  {
    "id": "7471eddf.664dd4",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 102.00390625,
    "y": 48.999998569488525,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "56a3ff30.b3a8f"
      ]
    ]
  },
  {
    "id": "56a3ff30.b3a8f",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 314.00391006469727,
    "y": 121.00001573562622,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "33c848a6.7608b8"
      ]
    ]
  },
  {
    "id": "33c848a6.7608b8",
    "type": "method",
    "name": "sotn-attachment-topology-operation-delete",
    "xml": "<method rpc='sotn-attachment-topology-operation-delete' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 302.0040283203125,
    "y": 208.99999856948853,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "edc5e1ab.098b4"
      ]
    ]
  },
  {
    "id": "edc5e1ab.098b4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 318.0040283203125,
    "y": 764.0002431869507,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "9c64aa40.b01828",
        "714dade8.ec01a4",
        "9ecbe37d.4748f",
        "17a98c89.e64083",
        "4c07d6dc.5cd608",
        "682dd6f7.7b6b58",
        "53ffba24.ca7014",
        "2ebe64e9.e85d6c",
        "443758fd.fddb38",
        "6b36170a.c69ab8",
        "2c3971b1.13b8fe",
        "90616192.cc0b9",
        "a2591975.207cb8",
        "67976fed.606ce",
        "5e8f02c.6ddc2fc"
      ]
    ]
  },
  {
    "id": "9c64aa40.b01828",
    "type": "set",
    "name": "set tmp.ar.allotted-resource-id,etc",
    "xml": "<set>\n<parameter name='tmp.ar.allotted-resource-id' value='`$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-id`' />\n<parameter name='tmp.ar.parent-service-instance-id' value='`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id`' />\n\n\n",
    "comments": "",
    "x": 714.9974670410156,
    "y": 162.99348545074463,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "177f14ab.e768cb",
    "type": "comment",
    "name": "set tmp ar-id to fetch resource from MDSAL",
    "info": "",
    "comments": "",
    "x": 743.9577789306641,
    "y": 127.02528142929077,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "714dade8.ec01a4",
    "type": "set",
    "name": "set tmp.ar.self-link",
    "xml": "<set>\n<parameter name='tmp.ar.self-link' value=\"`'restconf/config/GENERIC-RESOURCE-API:connection-attachment-allotted-resources/connection-attachment-allotted-resource/'\n + $tmp.ar.allotted-resource-id\n + '/allotted-resource-data/connection-attachment-topology/'` \" />\n\n",
    "comments": "",
    "x": 668.9974060058594,
    "y": 255.99349069595337,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "4c07d6dc.5cd608",
    "type": "execute",
    "name": "execute Properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
    "comments": "",
    "outputs": 1,
    "x": 675.2592964172363,
    "y": 343.66021966934204,
    "z": "6a88577f.6e4368",
    "wires": [
      []
    ]
  },
  {
    "id": "9ecbe37d.4748f",
    "type": "execute",
    "name": "generate allotted-resource url",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.allotted-resource-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 707.2593231201172,
    "y": 431.66020107269287,
    "z": "6a88577f.6e4368",
    "wires": [
      []
    ]
  },
  {
    "id": "45104993.48f4c8",
    "type": "comment",
    "name": "Used for setting output to API Handler",
    "info": "",
    "comments": "",
    "x": 722.9974365234375,
    "y": 222.99350023269653,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "6f7b032.16630fc",
    "type": "comment",
    "name": "Obtain different URL, template location etc",
    "info": "For saving resource information to MDSAL & for AAI",
    "comments": "",
    "x": 740.9974021911621,
    "y": 308.8823809623718,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "71011c8a.b6d124",
    "type": "comment",
    "name": "Used to Get AR by id to MDSAL, same as self-link",
    "info": "",
    "comments": "",
    "x": 766.9974212646484,
    "y": 395.8823399543762,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "93366eeb.a5e34",
    "type": "comment",
    "name": "GET parent-service-data from mdsal to check existence of other End point",
    "info": "",
    "comments": "",
    "x": 834.0042343139648,
    "y": 850.5316214561462,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "e2c08fd4.a4baa",
    "type": "for",
    "name": "for pidx..mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[]",
    "xml": "<for index='pidx' start='0' end='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1662.1888427734375,
    "y": 1084.0042572021484,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "32acb693.259e0a"
      ]
    ]
  },
  {
    "id": "17a98c89.e64083",
    "type": "switchNode",
    "name": "switch mdsal-psd.service-data.provided-allotted-resources_length",
    "xml": "<switch test='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 813.1882019042969,
    "y": 1090.7180399894714,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "fbcee7e.a5b7d18",
        "56804f4d.bd8f8"
      ]
    ]
  },
  {
    "id": "47aee224.c9d82c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1263.4583644866943,
    "y": 1130.7015256881714,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "e2c08fd4.a4baa",
        "d88dba6a.ad64e8"
      ]
    ]
  },
  {
    "id": "32acb693.259e0a",
    "type": "switchNode",
    "name": "switch allotted-resource-id",
    "xml": "<switch test=\"`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[$pidx].allotted-resource-id == $tmp.ar.allotted-resource-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2112.300048828125,
    "y": 1082.0041151046753,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "a22b4be4.34c858"
      ]
    ]
  },
  {
    "id": "682dd6f7.7b6b58",
    "type": "set",
    "name": "set tmp.ar.parent-service-instance-id",
    "xml": "<set>\n<parameter name='tmp.ar.parent-service-instance-id' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id` \" />\n\n",
    "comments": "",
    "x": 724.9726181030273,
    "y": 886.000066280365,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "f6b0e27f.d258d",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1104.972900390625,
    "y": 964.0001811981201,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "e2f334df.014248"
      ]
    ]
  },
  {
    "id": "368cd074.e9f68",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1096.8247032165527,
    "y": 999.0662660598755,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "846e1a84.0a2d68"
      ]
    ]
  },
  {
    "id": "846e1a84.0a2d68",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN resource not found\" />\n    \n",
    "comments": "",
    "x": 1271.973388671875,
    "y": 995.3336162567139,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "e2f334df.014248",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1255.972900390625,
    "y": 962.0001811981201,
    "z": "6a88577f.6e4368",
    "wires": [
      []
    ]
  },
  {
    "id": "f1cf6160.7f849",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 958.7346687316895,
    "y": 1279.9528139829636,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "e24cda9a.480d88"
      ]
    ]
  },
  {
    "id": "e24cda9a.480d88",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"AAI failed\" />\n",
    "comments": "",
    "x": 1125.2585487365723,
    "y": 1291.5718849897385,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "13ca8036.713ca",
    "type": "failure",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 965.8299560546875,
    "y": 1312.7147816419601,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "e24cda9a.480d88"
      ]
    ]
  },
  {
    "id": "549be1bd.a8e55",
    "type": "comment",
    "name": "TODO: Rework after confirmation from AAI",
    "info": "",
    "comments": "",
    "x": 1090.1413345336914,
    "y": 1230.8732137680054,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "53ffba24.ca7014",
    "type": "set",
    "name": "set output to api handler",
    "xml": "<set>\n<parameter name='allotted-resource-id' value='`$tmp.ar.allotted-resource-id`' />\n<parameter name='connection-attachment-object-path' value=\"`$tmp.ar.self-link`\"/>\n<parameter name='service-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $connection-attachment-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n \n",
    "comments": "",
    "x": 691.5500564575195,
    "y": 1243.8276810646057,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "2ebe64e9.e85d6c",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 660.9631614685059,
    "y": 1344.4434356689453,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "443758fd.fddb38",
    "type": "execute",
    "name": "execute RestApiCallNode - PUT AR by id",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='Delete' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 740.6705703735352,
    "y": 520.3333611488342,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "20d3d411.225efc",
        "faf7013e.61cf5",
        "5d57791a.7f5588"
      ]
    ]
  },
  {
    "id": "20d3d411.225efc",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 980.3120727539062,
    "y": 560.664909362793,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "ade6dd76.065f"
      ]
    ]
  },
  {
    "id": "faf7013e.61cf5",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 977.3120727539062,
    "y": 517.1649069786072,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "ade6dd76.065f"
      ]
    ]
  },
  {
    "id": "5d57791a.7f5588",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 984.0621528625488,
    "y": 476.5220022201538,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "ad5b7cbd.bebbd"
      ]
    ]
  },
  {
    "id": "ade6dd76.065f",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for connection-attachment-allotted-resource\" />\n",
    "comments": "",
    "x": 1136.062240600586,
    "y": 538.9149074554443,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "ad5b7cbd.bebbd",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1121.7180843353271,
    "y": 476.7141819000244,
    "z": "6a88577f.6e4368",
    "wires": [
      []
    ]
  },
  {
    "id": "639d24f2.154b5c",
    "type": "comment",
    "name": "Delete Allotted Resource",
    "info": "",
    "comments": "",
    "x": 688.0039520263672,
    "y": 489.000027179718,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "51bd193d.80e858",
    "type": "for",
    "name": "for cidx..service-data.consumed-allotted-resources.consumed-allotted-resource[]",
    "xml": "<for index='cidx' start='0' end='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1638.0078125,
    "y": 726.0039048194885,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "6462572b.67f0c8"
      ]
    ]
  },
  {
    "id": "6b36170a.c69ab8",
    "type": "switchNode",
    "name": "switch service-data.consumed-allotted-resources_length",
    "xml": "<switch test='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 791.0071983337402,
    "y": 686.7179062366486,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "2c0d81e3.a1e5ae",
        "2598a7c4.458a58"
      ]
    ]
  },
  {
    "id": "2c0d81e3.a1e5ae",
    "type": "other",
    "name": "outcome Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1115.1500625610352,
    "y": 669.5753407478333,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "bc09f38e.205bd"
      ]
    ]
  },
  {
    "id": "2598a7c4.458a58",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1101.1500854492188,
    "y": 732.57532954216,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "592855bd.60d8cc"
      ]
    ]
  },
  {
    "id": "592855bd.60d8cc",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1261.2771759033203,
    "y": 730.70130610466,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "51bd193d.80e858",
        "e190ed92.b3975"
      ]
    ]
  },
  {
    "id": "2c3971b1.13b8fe",
    "type": "set",
    "name": "set consumed allotted resources for deletion",
    "xml": "<set>\n<parameter name=\"service-data.consumed-allotted-resources.consumed-allotted-resource[$cidx].\" value=\"\" />\n<parameter name='service-data.consumed-allotted-resources.consumed-allotted-resource_length' value='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length - 1`' />\n\n",
    "comments": "",
    "x": 747.8645324707031,
    "y": 757.2895493507385,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "6462572b.67f0c8",
    "type": "switchNode",
    "name": "switch allotted-resource-id",
    "xml": "<switch test=\"`$service-data.consumed-allotted-resources.consumed-allotted-resource[$cidx].allotted-resource-id == $tmp.ar.allotted-resource-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2076.1194229125977,
    "y": 722.004026889801,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "d918a944.64ccf8"
      ]
    ]
  },
  {
    "id": "d918a944.64ccf8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2271.929244995117,
    "y": 721.4683513641357,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "a65b9d53.83735"
      ]
    ]
  },
  {
    "id": "c36dd2a4.07df5",
    "type": "set",
    "name": "set tmp.cidx",
    "xml": "<set>\n<parameter name='tmp.cidx' value='`$cidx`' />\n",
    "comments": "",
    "x": 2587.2657775878906,
    "y": 722.224609375,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "c49bf54f.a0fed8",
    "type": "comment",
    "name": "Delete consumed service consumed-allotted-resources in mdsal",
    "info": "",
    "comments": "",
    "x": 802.0084686279297,
    "y": 619.0038709790679,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "38657f9.c95768",
    "type": "comment",
    "name": "This set resource will be deleted in MDSAL by provider code",
    "info": "",
    "comments": "",
    "x": 792.341251373291,
    "y": 723.7819628715515,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "81d01b76.8c3218",
    "type": "comment",
    "name": "Obtain the index of conusumed AR",
    "info": "",
    "comments": "",
    "x": 714.7856597900391,
    "y": 650.8927311897278,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "bc09f38e.205bd",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Resource to be deleted doesn't exist in MDSAL.\" />\n",
    "comments": "",
    "x": 1277.0078125,
    "y": 670.0039048194885,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "a65b9d53.83735",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2421.007843017578,
    "y": 722.253954410553,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "c36dd2a4.07df5"
      ]
    ]
  },
  {
    "id": "d3dbcba8.ccf148",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"resource to be deleted is not available in mdsal\" />\n",
    "comments": "",
    "x": 1731.2578125,
    "y": 779.2539048194885,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "8a498309.42763",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1593.7578125,
    "y": 779.2539048194885,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "d3dbcba8.ccf148"
      ]
    ]
  },
  {
    "id": "e190ed92.b3975",
    "type": "switchNode",
    "name": "switch tmp.cidx ",
    "xml": "<switch test=\"`$tmp.cidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1439.7578125,
    "y": 779.2539048194885,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "8a498309.42763"
      ]
    ]
  },
  {
    "id": "314a3853.93a798",
    "type": "comment",
    "name": "Delete provided service provided-allotted-resources in mdsal",
    "info": "",
    "comments": "",
    "x": 788.5078277587891,
    "y": 815.0039048194885,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "56804f4d.bd8f8",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1116.5080833435059,
    "y": 1129.7540969848633,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "47aee224.c9d82c"
      ]
    ]
  },
  {
    "id": "fbcee7e.a5b7d18",
    "type": "other",
    "name": "outcome Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1133.5080032348633,
    "y": 1041.7539310455322,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "531a4a5.ed242b4"
      ]
    ]
  },
  {
    "id": "531a4a5.ed242b4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Resource to be deleted doesn't exist in MDSAL.\" />\n",
    "comments": "",
    "x": 1297.3656005859375,
    "y": 1042.1824760437012,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "9e40b34e.93065",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"resource to be deleted is not available in mdsal\" />\n",
    "comments": "",
    "x": 1728.7578563690186,
    "y": 1159.7539348602295,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "4e908393.ec247c",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1591.2578563690186,
    "y": 1159.7539348602295,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "9e40b34e.93065"
      ]
    ]
  },
  {
    "id": "d88dba6a.ad64e8",
    "type": "switchNode",
    "name": "switch tmp.pidx ",
    "xml": "<switch test=\"`$tmp.pidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1437.2578563690186,
    "y": 1159.7539348602295,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "4e908393.ec247c"
      ]
    ]
  },
  {
    "id": "a22b4be4.34c858",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2301.508274078369,
    "y": 1079.754093170166,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "96abc8ef.f05218"
      ]
    ]
  },
  {
    "id": "cfd5c3e4.3bb8c",
    "type": "set",
    "name": "set tmp.pidx",
    "xml": "<set>\n<parameter name='tmp.pidx' value='`$pidx`' />\n",
    "comments": "",
    "x": 2369.8443908691406,
    "y": 1214.5101900100708,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "96abc8ef.f05218",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2361.586727142334,
    "y": 1150.5395793914795,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "cfd5c3e4.3bb8c"
      ]
    ]
  },
  {
    "id": "90616192.cc0b9",
    "type": "set",
    "name": "set provided allotted resources for deletion",
    "xml": "<set>\n<parameter name=\"service-data.provided-allotted-resources.consumed-allotted-resource[$pidx].\" value=\"\" />\n<parameter name=\"service-data.provided-allotted-resources.consumed-allotted-resource_length\" value='`$service-data.provided-allotted-resources.consumed-allotted-resource_length - 1`' />\n\n",
    "comments": "",
    "x": 747.0079040527344,
    "y": 1145.003975391388,
    "z": "6a88577f.6e4368",
    "wires": []
  },
  {
    "id": "a2591975.207cb8",
    "type": "update",
    "name": "update AAI allotted-resource",
    "xml": "<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" resource='allotted-resource'  \n\t\tkey=\"customer.global-customer-id = $connection-attachment-topology-operation-input.service-information.global-customer-id AND\n\t\t\tservice-subscription.service-type = $connection-attachment-topology-operation-input.service-information.subscription-service-type AND\n\t\t\tservice-instance.service-instance-id = $connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id AND\n\t\t\tallotted-resource.id = $tmp.ar.allotted-resource-id\">\n",
    "comments": "",
    "outputs": 1,
    "x": 704.2266616821289,
    "y": 1299.7543449401855,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "f1cf6160.7f849",
        "13ca8036.713ca"
      ]
    ]
  },
  {
    "id": "5e8f02c.6ddc2fc",
    "type": "execute",
    "name": "execute RestApiCallNode - get-resource parent service data",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url-psd`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-psd\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 794.3373260498047,
    "y": 985.3333649635315,
    "z": "6a88577f.6e4368",
    "wires": [
      [
        "f6b0e27f.d258d",
        "368cd074.e9f68"
      ]
    ]
  },
  {
    "id": "67976fed.606ce",
    "type": "execute",
    "name": "get parent-service-data tmp.ar-url-psd",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"/restconf/config/GENERIC-RESOURCE-API:services/service/{service-instance-id}/service-data\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url-psd\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.parent-service-instance-id`\"/>",
    "comments": "",
    "outputs": 1,
    "x": 728.3372650146484,
    "y": 943.3332042694092,
    "z": "6a88577f.6e4368",
    "wires": [
      []
    ]
  }
]
