[
  {
    "id": "40d74cd7.316a14",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 101,
    "y": 40,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "f8cb9b5e.038868"
      ]
    ]
  },
  {
    "id": "f8cb9b5e.038868",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 313.00000381469727,
    "y": 112.0000171661377,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "a82adde1.bdf47"
      ]
    ]
  },
  {
    "id": "a82adde1.bdf47",
    "type": "method",
    "name": "sotn-attachment-topology-operation-delete",
    "xml": "<method rpc='sotn-attachment-topology-operation-delete' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 301.0001220703125,
    "y": 200,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "949cc74.207fe38"
      ]
    ]
  },
  {
    "id": "949cc74.207fe38",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 317.0001220703125,
    "y": 755.0002446174622,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "e8c0ed11.a9ee2",
        "acbb646b.d77cc8",
        "fd6eb40b.cdb328",
        "9e6bdd2.2396b2",
        "b1c2a911.f82f08",
        "90800e39.89524",
        "3735d68f.ab66da",
        "c9fb1b0b.8e8c48",
        "3438f4ce.6e83dc",
        "8443751c.74bd98",
        "4de78821.6f3c58",
        "bcd52af9.df1738",
        "9273699a.4d08c8",
        "85ce8a7e.f20d58"
      ]
    ]
  },
  {
    "id": "e8c0ed11.a9ee2",
    "type": "set",
    "name": "set tmp.ar.allotted-resource-id,etc",
    "xml": "<set>\n<parameter name='tmp.ar.allotted-resource-id' value='`connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-id`' />\n<parameter name='tmp.ar.parent-service-instance-id' value='`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id`' />\n\n\n",
    "comments": "",
    "x": 713.9935607910156,
    "y": 153.9934868812561,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "43da58d7.610758",
    "type": "comment",
    "name": "set tmp ar-id to fetch resource from MDSAL",
    "info": "",
    "comments": "",
    "x": 742.9538726806641,
    "y": 118.02528285980225,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "acbb646b.d77cc8",
    "type": "set",
    "name": "set tmp.ar.self-link",
    "xml": "<set>\n<parameter name='tmp.ar.self-link' value=\"`'restconf/config/GENERIC-RESOURCE-API:connection-attachment-allotted-resources/connection-attachment-allotted-resource/'\n + $tmp.ar.allotted-resource-id\n + '/allotted-resource-data/connection-attachment-topology/'` \" />\n\n",
    "comments": "",
    "x": 667.9934997558594,
    "y": 246.99349212646484,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "90800e39.89524",
    "type": "execute",
    "name": "execute Properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
    "comments": "",
    "outputs": 1,
    "x": 674.2553901672363,
    "y": 334.6602210998535,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "fd6eb40b.cdb328",
    "type": "execute",
    "name": "generate allotted-resource url",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.allotted-resource-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 706.2554168701172,
    "y": 422.66020250320435,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "1905b8ab.ca3847",
    "type": "comment",
    "name": "Used for setting output to API Handler",
    "info": "",
    "comments": "",
    "x": 721.9935302734375,
    "y": 213.993501663208,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "472b5b53.359df4",
    "type": "comment",
    "name": "Obtain different URL, template location etc",
    "info": "For saving resource information to MDSAL & for AAI",
    "comments": "",
    "x": 739.9934959411621,
    "y": 299.8823823928833,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "e758b3f.c00a45",
    "type": "comment",
    "name": "Used to Get AR by id to MDSAL, same as self-link",
    "info": "",
    "comments": "",
    "x": 765.9935150146484,
    "y": 386.8823413848877,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "9e6bdd2.2396b2",
    "type": "get-resource",
    "name": "get-resource parent-service-data",
    "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.mdsal.ConfigResource' resource='GENERIC-RESOURCE-API' key='services/service/$tmp.ar.parent-service-instance-id/service-data' pfx='mdsal-psd' >\n",
    "comments": "",
    "outputs": 1,
    "x": 713.0003890991211,
    "y": 912.531683921814,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "376a6931.f70fe6",
        "344c3669.3f542a"
      ]
    ]
  },
  {
    "id": "7df855f0.47079c",
    "type": "comment",
    "name": "GET parent-service-data from mdsal to check existence of other End point",
    "info": "",
    "comments": "",
    "x": 833.0003280639648,
    "y": 841.5316228866577,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "3af49e65.969612",
    "type": "for",
    "name": "for pidx..mdsal-psd.provided-allotted-resources.provided-allotted-resource[]",
    "xml": "<for index='pidx' start='0' end='`$mdsal-psd.provided-allotted-resources.provided-allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1644.1849060058594,
    "y": 1017.0042171478271,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "c4ca63d9.fd59d"
      ]
    ]
  },
  {
    "id": "b1c2a911.f82f08",
    "type": "switchNode",
    "name": "switch mdsal-psd.provided-allotted-resources_length",
    "xml": "<switch test='`$mdsal-psd.provided-allotted-resources.provided-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 772.1841125488281,
    "y": 1001.7180595397949,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "af927d7b.49dce",
        "fc0125f.d3b43d8"
      ]
    ]
  },
  {
    "id": "97446eab.09441",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1258.4543991088867,
    "y": 1057.7015590667725,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "3af49e65.969612",
        "7aae58e1.7b18c8"
      ]
    ]
  },
  {
    "id": "c4ca63d9.fd59d",
    "type": "switchNode",
    "name": "switch allotted-resource-id",
    "xml": "<switch test=\"`$mdsal-psd.provided-allotted-resources.provided-allotted-resource[$cidx].allotted-resource-id == $tmp.ar.allotted-resource-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2063.2962188720703,
    "y": 1017.0040645599365,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "637d9cfe.cdf994"
      ]
    ]
  },
  {
    "id": "3735d68f.ab66da",
    "type": "set",
    "name": "set tmp.ar.parent-service-instance-id",
    "xml": "<set>\n<parameter name='tmp.ar.parent-service-instance-id' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id` \" />\n\n",
    "comments": "",
    "x": 723.9687118530273,
    "y": 877.0000677108765,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "376a6931.f70fe6",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 959.9687118530273,
    "y": 905.0000677108765,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "eee1cf23.532fa"
      ]
    ]
  },
  {
    "id": "344c3669.3f542a",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 951.8205146789551,
    "y": 940.0661525726318,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "38d98c77.5a5dc4"
      ]
    ]
  },
  {
    "id": "38d98c77.5a5dc4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN resource not found\" />\n    \n",
    "comments": "",
    "x": 1126.9692001342773,
    "y": 936.3335027694702,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "eee1cf23.532fa",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1110.9687118530273,
    "y": 903.0000677108765,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "fd82a90d.c15198",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 952.7306861877441,
    "y": 1186.9527963399887,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "a5f6bd09.ffa1d"
      ]
    ]
  },
  {
    "id": "a5f6bd09.ffa1d",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"AAI failed\" />\n",
    "comments": "",
    "x": 1119.254566192627,
    "y": 1198.5718673467636,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "399e5f25.1d673",
    "type": "failure",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 959.8259735107422,
    "y": 1219.7147639989853,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "a5f6bd09.ffa1d"
      ]
    ]
  },
  {
    "id": "c1db391c.684108",
    "type": "comment",
    "name": "TODO: Rework after confirmation from AAI",
    "info": "",
    "comments": "",
    "x": 1084.137351989746,
    "y": 1137.8731961250305,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "c9fb1b0b.8e8c48",
    "type": "set",
    "name": "set output to api handler",
    "xml": "<set>\n<parameter name='allotted-resource-id' value='`$tmp.ar.allotted-resource-id`' />\n<parameter name='connection-attachment-object-path' value=\"`$tmp.ar.self-link`\"/>\n<parameter name='service-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $connection-attachment-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n \n",
    "comments": "",
    "x": 685.5460739135742,
    "y": 1150.8276634216309,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "3438f4ce.6e83dc",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 654.9591789245605,
    "y": 1251.4434180259705,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "8443751c.74bd98",
    "type": "execute",
    "name": "execute RestApiCallNode - PUT AR by id",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='Delete' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 739.6666641235352,
    "y": 511.3333625793457,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "800033f.1bbe0d",
        "b5b39fe4.c4cab",
        "11a37ef9.11cf81"
      ]
    ]
  },
  {
    "id": "800033f.1bbe0d",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1008.3080406188965,
    "y": 562.6647743210196,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "84c30bf1.79ce98"
      ]
    ]
  },
  {
    "id": "b5b39fe4.c4cab",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 999.3080902099609,
    "y": 531.1648000702262,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "84c30bf1.79ce98"
      ]
    ]
  },
  {
    "id": "11a37ef9.11cf81",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1003.0581283569336,
    "y": 501.52190494537354,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "b7efe17a.65f42"
      ]
    ]
  },
  {
    "id": "84c30bf1.79ce98",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for connection-attachment-allotted-resource\" />\n",
    "comments": "",
    "x": 1169.0581283569336,
    "y": 531.9148239120841,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "b7efe17a.65f42",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1144.714096069336,
    "y": 497.71407413482666,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "67cf0e71.e946f",
    "type": "comment",
    "name": "Delete Allotted Resource",
    "info": "",
    "comments": "",
    "x": 687.0000457763672,
    "y": 480.0000286102295,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "c1be7c26.8538e",
    "type": "for",
    "name": "for cidx..service-data.consumed-allotted-resources.consumed-allotted-resource[]",
    "xml": "<for index='cidx' start='0' end='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1637.00390625,
    "y": 717.00390625,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "b702145d.d12dd8"
      ]
    ]
  },
  {
    "id": "4de78821.6f3c58",
    "type": "switchNode",
    "name": "switch service-data.consumed-allotted-resources_length",
    "xml": "<switch test='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 790.0032920837402,
    "y": 677.71790766716,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "9fcadeb2.7ddd3",
        "f277a541.5d4da8"
      ]
    ]
  },
  {
    "id": "9fcadeb2.7ddd3",
    "type": "other",
    "name": "outcome Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1114.1461563110352,
    "y": 660.5753421783447,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "6ed5686.b9f1498"
      ]
    ]
  },
  {
    "id": "f277a541.5d4da8",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1100.1461791992188,
    "y": 723.5753309726715,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "a167b159.d1f0a"
      ]
    ]
  },
  {
    "id": "a167b159.d1f0a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1260.2732696533203,
    "y": 721.7013075351715,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "c1be7c26.8538e",
        "a14b9903.574488"
      ]
    ]
  },
  {
    "id": "bcd52af9.df1738",
    "type": "set",
    "name": "set consumed allotted resources for deletion",
    "xml": "<set>\n<parameter name=\"service-data.consumed-allotted-resources.consumed-allotted-resource[$cidx].\" value=\"\" />\n<parameter name='service-data.consumed-allotted-resources.consumed-allotted-resource_length' value='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length - 1`' />\n\n",
    "comments": "",
    "x": 746.8606262207031,
    "y": 748.28955078125,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "b702145d.d12dd8",
    "type": "switchNode",
    "name": "switch allotted-resource-id",
    "xml": "<switch test=\"`$service-data.consumed-allotted-resources.consumed-allotted-resource[$cidx].allotted-resource-id == $tmp.ar.allotted-resource-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2075.1155166625977,
    "y": 713.0040283203125,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "5f8fbf17.00afa"
      ]
    ]
  },
  {
    "id": "5f8fbf17.00afa",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2270.925338745117,
    "y": 712.4683527946472,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "c51401e.55444"
      ]
    ]
  },
  {
    "id": "43e9034f.c4ea2c",
    "type": "set",
    "name": "set tmp.cidx",
    "xml": "<set>\n<parameter name='tmp.cidx' value='`$cidx`' />\n",
    "comments": "",
    "x": 2582.26171875,
    "y": 672.2246131896973,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "cdccd47e.bede38",
    "type": "comment",
    "name": "Delete consumed service consumed-allotted-resources in mdsal",
    "info": "",
    "comments": "",
    "x": 801.0045623779297,
    "y": 610.0038724095793,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "d296b738.04dcc8",
    "type": "comment",
    "name": "This set resource will be deleted in MDSAL by provider code",
    "info": "",
    "comments": "",
    "x": 791.337345123291,
    "y": 714.781964302063,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "8922e52b.01caf8",
    "type": "comment",
    "name": "Obtain the index of conusumed AR",
    "info": "",
    "comments": "",
    "x": 713.7817535400391,
    "y": 641.8927326202393,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "6ed5686.b9f1498",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Resource to be deleted doesn't exist in MDSAL.\" />\n",
    "comments": "",
    "x": 1276.00390625,
    "y": 661.00390625,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "e0029499.0fe808",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 2574.003875732422,
    "y": 732.2540216445923,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "c51401e.55444",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2420.003936767578,
    "y": 713.2539558410645,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "43e9034f.c4ea2c",
        "e0029499.0fe808"
      ]
    ]
  },
  {
    "id": "f81fb204.590a8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"resource to be deleted is not available in mdsal\" />\n",
    "comments": "",
    "x": 1730.25390625,
    "y": 770.25390625,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "1a2d8fc2.146df",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1592.75390625,
    "y": 770.25390625,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "f81fb204.590a8"
      ]
    ]
  },
  {
    "id": "a14b9903.574488",
    "type": "switchNode",
    "name": "switch tmp.cidx ",
    "xml": "<switch test=\"`$tmp.cidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1438.75390625,
    "y": 770.25390625,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "1a2d8fc2.146df"
      ]
    ]
  },
  {
    "id": "a2784c5c.f26de",
    "type": "comment",
    "name": "Delete provided service provided-allotted-resources in mdsal",
    "info": "",
    "comments": "",
    "x": 787.5039215087891,
    "y": 806.00390625,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "fc0125f.d3b43d8",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1081.5039596557617,
    "y": 1054.7539730072021,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "97446eab.09441"
      ]
    ]
  },
  {
    "id": "af927d7b.49dce",
    "type": "other",
    "name": "outcome Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1093.5038833618164,
    "y": 991.7539174556732,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "29d2e8ba.860218"
      ]
    ]
  },
  {
    "id": "29d2e8ba.860218",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Resource to be deleted doesn't exist in MDSAL.\" />\n",
    "comments": "",
    "x": 1255.3616333007812,
    "y": 992.1824815273285,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "8fbe7fb5.2044c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"resource to be deleted is not available in mdsal\" />\n",
    "comments": "",
    "x": 1752.75390625,
    "y": 1088.75390625,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "99d40761.083518",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1615.25390625,
    "y": 1088.75390625,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "8fbe7fb5.2044c"
      ]
    ]
  },
  {
    "id": "7aae58e1.7b18c8",
    "type": "switchNode",
    "name": "switch tmp.pidx ",
    "xml": "<switch test=\"`$tmp.pidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1461.25390625,
    "y": 1088.75390625,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "99d40761.083518"
      ]
    ]
  },
  {
    "id": "637d9cfe.cdf994",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2262.503963470459,
    "y": 1014.7539739608765,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "240168eb.ef4528"
      ]
    ]
  },
  {
    "id": "fb4a1e64.0992d",
    "type": "set",
    "name": "set tmp.pidx",
    "xml": "<set>\n<parameter name='tmp.pidx' value='`$pidx`' />\n",
    "comments": "",
    "x": 2580.8404235839844,
    "y": 973.5101690292358,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "a63547e2.d5edc8",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 2572.5825805664062,
    "y": 1033.5395774841309,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "240168eb.ef4528",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2418.5826416015625,
    "y": 1014.539511680603,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "fb4a1e64.0992d",
        "a63547e2.d5edc8"
      ]
    ]
  },
  {
    "id": "9273699a.4d08c8",
    "type": "set",
    "name": "set provided allotted resources for deletion",
    "xml": "<set>\n<parameter name=\"service-data.provided-allotted-resources.consumed-allotted-resource[$pidx].\" value=\"\" />\n<parameter name='service-data.provided-allotted-resources.consumed-allotted-resource_length' value='`$service-data.provided-allotted-resources.consumed-allotted-resource_length - 1`' />\n\n",
    "comments": "",
    "x": 741.0039215087891,
    "y": 1052.003957748413,
    "z": "344982e2.7dca5e",
    "wires": [
      
    ]
  },
  {
    "id": "85ce8a7e.f20d58",
    "type": "update",
    "name": "update AAI allotted-resource",
    "xml": "<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" resource='allotted-resource'  \n\t\tkey=\"customer.global-customer-id = $connection-attachment-topology-operation-input.service-information.global-customer-id AND\n\t\t\tservice-subscription.service-type = $connection-attachment-topology-operation-input.service-information.subscription-service-type AND\n\t\t\tservice-instance.service-instance-id = $connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id AND\n\t\t\tallotted-resource.id = $tmp.ar.allotted-resource-id\">\n",
    "comments": "",
    "outputs": 1,
    "x": 698.2226791381836,
    "y": 1206.7543272972107,
    "z": "344982e2.7dca5e",
    "wires": [
      [
        "fd82a90d.c15198",
        "399e5f25.1d673"
      ]
    ]
  }
]
