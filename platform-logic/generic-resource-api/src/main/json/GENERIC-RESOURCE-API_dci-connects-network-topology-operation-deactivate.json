[
  {
    "id":"148f01b9.7651be",
    "type":"dgstart",
    "name":"DGSTART",
    "outputs":1,
    "x":127.66666412353516,
    "y":59.666664123535156,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "75389724.73d1d8"
      ]
    ]
  },
  {
    "id":"75389724.73d1d8",
    "type":"service-logic",
    "name":"GENERIC-RESOURCE-API ${project.version}",
    "module":"GENERIC-RESOURCE-API",
    "version":"${project.version}",
    "comments":"",
    "xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs":1,
    "x":388.66666412353516,
    "y":130.66666412353516,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "c572bb07.b4aab8"
      ]
    ]
  },
  {
    "id":"c572bb07.b4aab8",
    "type":"method",
    "name":"method dci-connects-network-topology-operation-deactivate",
    "xml":"<method rpc='dci-connects-network-topology-operation-deactivate' mode='sync'>\n",
    "comments":"",
    "outputs":1,
    "x":278.66666412353516,
    "y":215.66666412353516,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "2e7d9d36.9e8932"
      ]
    ]
  },
  {
    "id":"2e7d9d36.9e8932",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":613.6666793823242,
    "y":215.66667366027832,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "b8044390.c16c5",
        "d126698a.8dba88",
        "3c585b18.c1b394",
        "17e0f0e1.f4a85f",
        "c13afebf.e4af7"
      ]
    ]
  },
  {
    "id":"b8044390.c16c5",
    "type":"call",
    "name":"call GENERIC-RESOURCE-API:validate-network-input-parameters",
    "xml":"<call module='GENERIC-RESOURCE-API' rpc='validate-network-input-parameters' mode='sync' >\n",
    "comments":"",
    "outputs":1,
    "x":948.6666641235352,
    "y":84.66666412353516,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"d126698a.8dba88",
    "type":"returnSuccess",
    "name":"return success",
    "xml":"<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments":"",
    "x":814.6666412353516,
    "y":863.6666374206543,
    "z":"b8d6a9b7.54bca8",
    "wires":[

    ]
  },
  {
    "id":"a0179072.b0699",
    "type":"block",
    "name":"block : sendRequest",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "comments":"",
    "outputs":1,
    "x":1010.1666946411133,
    "y":559.1823291778564,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "2004f909.4303c6",
        "8f1e5d77.2d978",
        "db4a772d.b48518",
        "a9badb26.f8ff08"
      ]
    ]
  },
  {
    "id":"48d3ef18.744f9",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":1542.666591644287,
    "y":356.1818552017212,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "f3e0b35b.ac7e6"
      ]
    ]
  },
  {
    "id":"1f0ce6e6.d7e319",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":1549.666591644287,
    "y":394.1818552017212,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "25422e06.a06362"
      ]
    ]
  },
  {
    "id":"c9371824.9cf4a8",
    "type":"other",
    "name":"other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":1541.666591644287,
    "y":436.1818552017212,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "caa6b2ac.fdad4"
      ]
    ]
  },
  {
    "id":"f3e0b35b.ac7e6",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1707.666591644287,
    "y":345.1818552017212,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"25422e06.a06362",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments":"",
    "x":1706.666591644287,
    "y":398.1818552017212,
    "z":"b8d6a9b7.54bca8",
    "wires":[

    ]
  },
  {
    "id":"caa6b2ac.fdad4",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments":"",
    "x":1699.666591644287,
    "y":445.1818552017212,
    "z":"b8d6a9b7.54bca8",
    "wires":[

    ]
  },
  {
    "id":"2004f909.4303c6",
    "type":"get-resource",
    "name":"get-resource esr-thirdparty-sdnc",
    "xml":"<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $prop.dci-connects.id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n",
    "comments":"",
    "outputs":1,
    "x":1318.6666793823242,
    "y":403.18186211586,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "48d3ef18.744f9",
        "1f0ce6e6.d7e319",
        "c9371824.9cf4a8"
      ]
    ]
  },
  {
    "id":"8f1e5d77.2d978",
    "type":"set",
    "name":"set controller data",
    "xml":"<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list[0].esr-system-info.serviceUrl`\" />\n<parameter name='prop.sdncRestApi.templateDir' value='/opt/onap/sdnc/data' />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list[0].esr-system-info.user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list[0].esr-system-info.password`\" />\n\n",
    "comments":"",
    "x":1290.1665306091309,
    "y":504.6818163394928,
    "z":"b8d6a9b7.54bca8",
    "wires":[

    ]
  },
  {
    "id":"fc904692.6194d8",
    "type":"execute",
    "name":"execute RestApiCallNode De-Activate Vxlan Tunnel",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"$prop.sdncRestApi.thirdpartySdnc.url + '/v2.0/l3-dci-connects/' + $prop.dci-connects.id\"/>\n<parameter name=\"restapiUser\" value=\"$prop.sdncRestApi.thirdpartySdnc.user\"/>\n<parameter name=\"restapiPassword\" value=\"$prop.sdncRestApi.thirdpartySdnc.password\"/>\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name=\"responsePrefix\" value=\"restapi-result\"/>\n",
    "comments":"",
    "outputs":1,
    "x":1818.1669692993164,
    "y":622.1822843551636,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"db4a772d.b48518",
    "type":"switchNode",
    "name":"switch tunnelType",
    "xml":"<switch test=\"`$prop.dci-connects.tunnelType`\">\n",
    "comments":"",
    "outputs":1,
    "x":1281.1664276123047,
    "y":646.6817951202393,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "435458d3.7f7428",
        "ac616ba.5114198"
      ]
    ]
  },
  {
    "id":"435458d3.7f7428",
    "type":"outcomeTrue",
    "name":"L3-DCI",
    "xml":"<outcome value='L3-DCI'>\n",
    "comments":"",
    "outputs":1,
    "x":1494.1665573120117,
    "y":626.6817951202393,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "fc904692.6194d8"
      ]
    ]
  },
  {
    "id":"ac616ba.5114198",
    "type":"outcomeTrue",
    "name":"L2-DCI",
    "xml":"<outcome value='L2-DCI'>\n",
    "comments":"",
    "outputs":1,
    "x":1492.1663780212402,
    "y":698.6817951202393,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "43446998.00c4b8"
      ]
    ]
  },
  {
    "id":"43446998.00c4b8",
    "type":"execute",
    "name":"execute RestApiCallNode De-Activate Vxlan Tunnel",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"$prop.sdncRestApi.thirdpartySdnc.url + '/v2.0/l2-dci-connects/' + $prop.dci-connects.id\"/>\n<parameter name=\"restapiUser\" value=\"$prop.sdncRestApi.thirdpartySdnc.user\"/>\n<parameter name=\"restapiPassword\" value=\"$prop.sdncRestApi.thirdpartySdnc.password\"/>\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name=\"responsePrefix\" value=\"restapi-result\"/>",
    "comments":"",
    "outputs":1,
    "x":1812.1669235229492,
    "y":699.1822204589844,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"f950c622.50d2c8",
    "type":"for",
    "name":"for each network-input-parameters",
    "xml":"<for index='idx' start='0' end='`$service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param_length`' >\n\n",
    "comments":"",
    "outputs":1,
    "x":1072.666648864746,
    "y":160.18229579925537,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "2803809e.cd6f9"
      ]
    ]
  },
  {
    "id":"a9badb26.f8ff08",
    "type":"record",
    "name":"record",
    "xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"dci-network-topology-operation-deactivate\"/>\n<parameter name=\"field3\" value=\"dci-connects.id\" />\n<parameter name=\"field4\" value=\"`$prop.dci-connects.id`\"/>\n<parameter name=\"field5\" value=\"dci-connects.tunnelType\" />\n<parameter name=\"field6\" value=\"`$prop.dci-connects.tunnelType`\"/>\n<parameter name=\"field7\" value=\"dci-connects.tunnelType\" />\n<parameter name=\"field8\" value=\"`$prop.dci-connects.tunnelType`\"/>\n<parameter name=\"field9\" value=\"sdncRestApi.thirdpartySdnc.url\"/>\n<parameter name=\"field10\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url`\"/>",
    "comments":"",
    "outputs":1,
    "x":1255.0000305175781,
    "y":578.6666641235352,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"2803809e.cd6f9",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1306.0000915527344,
    "y":159.6666717529297,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "b059e691.786878",
        "e3c86ec7.af8ef"
      ]
    ]
  },
  {
    "id":"b059e691.786878",
    "type":"switchNode",
    "name":"switch site1_id",
    "xml":"<switch test=\"`$service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param[$idx].name == 'site1_id'`\">\n",
    "comments":"",
    "outputs":1,
    "x":1512.3333015441895,
    "y":128.66666793823242,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "6b8958be.1a4d18"
      ]
    ]
  },
  {
    "id":"6b8958be.1a4d18",
    "type":"outcomeTrue",
    "name":"true",
    "xml":"<outcome value='true'>\n",
    "comments":"",
    "outputs":1,
    "x":1713.333396911621,
    "y":127.6666669845581,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "4c747d09.9d8e34"
      ]
    ]
  },
  {
    "id":"4c747d09.9d8e34",
    "type":"set",
    "name":"set id",
    "xml":"<set>\n<parameter name='prop.dci-connects.id' value='`$service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param[$idx].value`' />\n",
    "comments":"",
    "x":1886.9997482299805,
    "y":127.33321189880371,
    "z":"b8d6a9b7.54bca8",
    "wires":[

    ]
  },
  {
    "id":"e3c86ec7.af8ef",
    "type":"switchNode",
    "name":"switch tunnelType",
    "xml":"<switch test=\"`$service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param[$idx].name == 'tunnelType'`\">\n",
    "comments":"",
    "outputs":1,
    "x":1522.333381652832,
    "y":181.6666738986969,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "53a3a5f5.60a92c"
      ]
    ]
  },
  {
    "id":"53a3a5f5.60a92c",
    "type":"outcomeTrue",
    "name":"true",
    "xml":"<outcome value='true'>\n",
    "comments":"",
    "outputs":1,
    "x":1728.333381652832,
    "y":181.6666738986969,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "e41570df.a2318"
      ]
    ]
  },
  {
    "id":"e41570df.a2318",
    "type":"set",
    "name":"set tunnelType",
    "xml":"<set>\n<parameter name='prop.dci-connects.tunnelType' value='`$service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param[$idx].value`' />\n",
    "comments":"",
    "x":1897.333480834961,
    "y":181.66668915748596,
    "z":"b8d6a9b7.54bca8",
    "wires":[

    ]
  },
  {
    "id":"3c585b18.c1b394",
    "type":"block",
    "name":"block : executeSite1",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "comments":"",
    "outputs":1,
    "x":802,
    "y":161.3333282470703,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "f950c622.50d2c8",
        "a0179072.b0699"
      ]
    ]
  },
  {
    "id":"3cc5f533.01012a",
    "type":"for",
    "name":"for each network-input-parameters",
    "xml":"<for index='idx' start='0' end='`$service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param_length`' >\n\n",
    "comments":"",
    "outputs":1,
    "x":1077.666732788086,
    "y":266.3332996368408,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "38542283.614a3e"
      ]
    ]
  },
  {
    "id":"38542283.614a3e",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1306.000099182129,
    "y":268.81767559051514,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "4cb30828.1cc3b8"
      ]
    ]
  },
  {
    "id":"4cb30828.1cc3b8",
    "type":"switchNode",
    "name":"switch site2_id",
    "xml":"<switch test=\"`$service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param[$idx].name == 'site2_id'`\">\n",
    "comments":"",
    "outputs":1,
    "x":1507.0000495910645,
    "y":268.8176612854004,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "dd6bc853.9b86f8"
      ]
    ]
  },
  {
    "id":"dd6bc853.9b86f8",
    "type":"outcomeTrue",
    "name":"true",
    "xml":"<outcome value='true'>\n",
    "comments":"",
    "outputs":1,
    "x":1708.000144958496,
    "y":267.8176603317261,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "eabf42ba.5e4d4"
      ]
    ]
  },
  {
    "id":"eabf42ba.5e4d4",
    "type":"set",
    "name":"set id",
    "xml":"<set>\n<parameter name='prop.dci-connects.id' value='`$service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param[$idx].value`' />\n",
    "comments":"",
    "x":1881.6664962768555,
    "y":267.4842052459717,
    "z":"b8d6a9b7.54bca8",
    "wires":[

    ]
  },
  {
    "id":"17e0f0e1.f4a85f",
    "type":"block",
    "name":"block : executeSite1",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "comments":"",
    "outputs":1,
    "x":802.0000076293945,
    "y":270.48433208465576,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "3cc5f533.01012a",
        "a0179072.b0699"
      ]
    ]
  },
  {
    "id":"ba49b6c1.a72218",
    "type":"set",
    "name":"set object-path",
    "xml":"<set>\n<parameter name='network-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $network-topology-operation-input.service-information.service-instance-id\n + '/service-data/networks/network/'\n + $networkId\n + '/network-data/network-topology/'` \" />\n \n",
    "comments":"",
    "x":1117.0039901733398,
    "y":791.5274066925049,
    "z":"b8d6a9b7.54bca8",
    "wires":[

    ]
  },
  {
    "id":"378e343e.0cb45c",
    "type":"set",
    "name":"set networkId",
    "xml":"<set>\n<parameter name='networkId' value='`$network-topology-operation-input.network-information.network-id`' />\n",
    "comments":"",
    "x":1111.289623260498,
    "y":754.3845148086548,
    "z":"b8d6a9b7.54bca8",
    "wires":[

    ]
  },
  {
    "id":"c13afebf.e4af7",
    "type":"block",
    "name":"block : saveNetworkData",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "comments":"",
    "outputs":1,
    "x":854.0000610351562,
    "y":730.3333559036255,
    "z":"b8d6a9b7.54bca8",
    "wires":[
      [
        "378e343e.0cb45c",
        "ba49b6c1.a72218",
        "44d19a8f.ba7544",
        "e247e731.bf5fd8"
      ]
    ]
  },
  {
    "id":"74d41b77.b05d54",
    "type":"comment",
    "name":"TODO",
    "info":"Currently deactivate does deletion too, later divide in two phases.",
    "comments":"",
    "x":736,
    "y":23.666664123535156,
    "z":"b8d6a9b7.54bca8",
    "wires":[

    ]
  },
  {
    "id":"44d19a8f.ba7544",
    "type":"set",
    "name":"copy input to service-data",
    "xml":"<set>\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.sdnc-request-header.' value='`$network-topology-operation-input.sdnc-request-header.`' />\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.request-information.' value='`$network-topology-operation-input.request-information.`' />\n",
    "comments":"",
    "x":1147.0000686645508,
    "y":710.6666679382324,
    "z":"b8d6a9b7.54bca8",
    "wires":[

    ]
  },
  {
    "id":"e247e731.bf5fd8",
    "type":"set",
    "name":"set network-level-oper-status",
    "xml":"<set>\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-level-oper-status.order-status' value='Deleted' />\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-level-oper-status.last-rpc-action' value='`$network-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-level-oper-status.last-action' value='`$network-topology-operation-input.request-information.request-action`' />\n",
    "comments":"",
    "x":1161,
    "y":838.6666259765625,
    "z":"b8d6a9b7.54bca8",
    "wires":[

    ]
  }
]