[
  {
    "id":"afc28ff2.d8ea9",
    "type":"dgstart",
    "name":"DGSTART",
    "outputs":1,
    "x":101.93510437011719,
    "y":56,
    "z":"7989b353.45560c",
    "wires":[
      [
        "a8585fe8.5793e"
      ]
    ]
  },
  {
    "id":"a8585fe8.5793e",
    "type":"service-logic",
    "name":"GENERIC-RESOURCE-API ${project.version}",
    "module":"GENERIC-RESOURCE-API",
    "version":"${project.version}",
    "comments":"",
    "xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs":1,
    "x":362.9351043701172,
    "y":127,
    "z":"7989b353.45560c",
    "wires":[
      [
        "94697b2b.bea8e8"
      ]
    ]
  },
  {
    "id":"94697b2b.bea8e8",
    "type":"method",
    "name":"method dci-connects-network-topology-operation-deactivate",
    "xml":"<method rpc='dci-connects-network-topology-operation-deactivate' mode='sync'>\n",
    "comments":"",
    "outputs":1,
    "x":252.9351043701172,
    "y":212,
    "z":"7989b353.45560c",
    "wires":[
      [
        "24e4978b.40bb18"
      ]
    ]
  },
  {
    "id":"24e4978b.40bb18",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":587.9351196289062,
    "y":212.00000953674316,
    "z":"7989b353.45560c",
    "wires":[
      [
        "60e59d5a.4ad384",
        "9bff20c0.b11cf",
        "35e712db.b43fee",
        "6edb8096.c4d1e",
        "a782fd8c.f34ee"
      ]
    ]
  },
  {
    "id":"60e59d5a.4ad384",
    "type":"call",
    "name":"call GENERIC-RESOURCE-API:validate-network-input-parameters",
    "xml":"<call module='GENERIC-RESOURCE-API' rpc='validate-network-input-parameters' mode='sync' >\n",
    "comments":"",
    "outputs":1,
    "x":922.9351043701172,
    "y":81,
    "z":"7989b353.45560c",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"9bff20c0.b11cf",
    "type":"returnSuccess",
    "name":"return success",
    "xml":"<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments":"",
    "x":788.9350814819336,
    "y":859.9999732971191,
    "z":"7989b353.45560c",
    "wires":[

    ]
  },
  {
    "id":"bb4ced0c.de7b8",
    "type":"block",
    "name":"block : sendRequest",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "comments":"",
    "outputs":1,
    "x":984.4351348876953,
    "y":555.5156650543213,
    "z":"7989b353.45560c",
    "wires":[
      [
        "d1e4e88.126bd18",
        "bfe084a4.ec1ca8",
        "d78e26a8.5dd648",
        "1f1b0399.96268c"
      ]
    ]
  },
  {
    "id":"24a23dfb.9014c2",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":1516.9350318908691,
    "y":352.51519107818604,
    "z":"7989b353.45560c",
    "wires":[
      [
        "4f88ee45.9763"
      ]
    ]
  },
  {
    "id":"e4d7297.507cad8",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":1523.9350318908691,
    "y":390.51519107818604,
    "z":"7989b353.45560c",
    "wires":[
      [
        "30ddc43e.1be0dc"
      ]
    ]
  },
  {
    "id":"7ed45316.3f63cc",
    "type":"other",
    "name":"other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":1515.9350318908691,
    "y":432.51519107818604,
    "z":"7989b353.45560c",
    "wires":[
      [
        "f80e7609.f66618"
      ]
    ]
  },
  {
    "id":"4f88ee45.9763",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1681.9350318908691,
    "y":341.51519107818604,
    "z":"7989b353.45560c",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"30ddc43e.1be0dc",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments":"",
    "x":1680.9350318908691,
    "y":394.51519107818604,
    "z":"7989b353.45560c",
    "wires":[

    ]
  },
  {
    "id":"f80e7609.f66618",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments":"",
    "x":1673.9350318908691,
    "y":441.51519107818604,
    "z":"7989b353.45560c",
    "wires":[

    ]
  },
  {
    "id":"d1e4e88.126bd18",
    "type":"get-resource",
    "name":"get-resource esr-thirdparty-sdnc",
    "xml":"<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $prop.dci-connects.id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n",
    "comments":"",
    "outputs":1,
    "x":1292.9351196289062,
    "y":399.51519799232483,
    "z":"7989b353.45560c",
    "wires":[
      [
        "24a23dfb.9014c2",
        "e4d7297.507cad8",
        "7ed45316.3f63cc"
      ]
    ]
  },
  {
    "id":"bfe084a4.ec1ca8",
    "type":"set",
    "name":"set controller data",
    "xml":"<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list[0].esr-system-info.serviceUrl`\" />\n<parameter name='prop.sdncRestApi.templateDir' value='/opt/onap/sdnc/data' />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list[0].esr-system-info.user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list[0].esr-system-info.password`\" />\n\n",
    "comments":"",
    "x":1264.434970855713,
    "y":501.01515221595764,
    "z":"7989b353.45560c",
    "wires":[

    ]
  },
  {
    "id":"4fcdf2bb.86953c",
    "type":"execute",
    "name":"execute RestApiCallNode De-Activate Vxlan Tunnel",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/v2.0/l3-dci-connects/' + $prop.dci-connects.id`\"/>\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\"/>\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\"/>\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name=\"responsePrefix\" value=\"restapi-result\"/>\n",
    "comments":"",
    "outputs":1,
    "x":1792.4354095458984,
    "y":618.5156202316284,
    "z":"7989b353.45560c",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"d78e26a8.5dd648",
    "type":"switchNode",
    "name":"switch tunnelType",
    "xml":"<switch test=\"`$prop.dci-connects.tunnelType`\">\n",
    "comments":"",
    "outputs":1,
    "x":1255.4348678588867,
    "y":643.0151309967041,
    "z":"7989b353.45560c",
    "wires":[
      [
        "ee3b94c4.136978",
        "935dfafd.d77e18"
      ]
    ]
  },
  {
    "id":"ee3b94c4.136978",
    "type":"outcomeTrue",
    "name":"L3-DCI",
    "xml":"<outcome value='L3-DCI'>\n",
    "comments":"",
    "outputs":1,
    "x":1468.4349975585938,
    "y":623.0151309967041,
    "z":"7989b353.45560c",
    "wires":[
      [
        "4fcdf2bb.86953c"
      ]
    ]
  },
  {
    "id":"935dfafd.d77e18",
    "type":"outcomeTrue",
    "name":"L2-DCI",
    "xml":"<outcome value='L2-DCI'>\n",
    "comments":"",
    "outputs":1,
    "x":1466.4348182678223,
    "y":695.0151309967041,
    "z":"7989b353.45560c",
    "wires":[
      [
        "b315041d.581508"
      ]
    ]
  },
  {
    "id":"b315041d.581508",
    "type":"execute",
    "name":"execute RestApiCallNode De-Activate Vxlan Tunnel",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/v2.0/l2-dci-connects/' + $prop.dci-connects.id`\"/>\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\"/>\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\"/>\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name=\"responsePrefix\" value=\"restapi-result\"/>",
    "comments":"",
    "outputs":1,
    "x":1786.4353637695312,
    "y":695.5155563354492,
    "z":"7989b353.45560c",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"df0f7d7d.fb7f7",
    "type":"for",
    "name":"for each network-input-parameters",
    "xml":"<for index='idx' start='0' end='`$service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param_length`' >\n\n",
    "comments":"",
    "outputs":1,
    "x":1046.9350891113281,
    "y":156.51563167572021,
    "z":"7989b353.45560c",
    "wires":[
      [
        "d4d1f0ce.b7e74"
      ]
    ]
  },
  {
    "id":"1f1b0399.96268c",
    "type":"record",
    "name":"record",
    "xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"dci-network-topology-operation-deactivate\"/>\n<parameter name=\"field3\" value=\"dci-connects.id\" />\n<parameter name=\"field4\" value=\"`$prop.dci-connects.id`\"/>\n<parameter name=\"field5\" value=\"dci-connects.tunnelType\" />\n<parameter name=\"field6\" value=\"`$prop.dci-connects.tunnelType`\"/>\n<parameter name=\"field7\" value=\"dci-connects.tunnelType\" />\n<parameter name=\"field8\" value=\"`$prop.dci-connects.tunnelType`\"/>\n<parameter name=\"field9\" value=\"sdncRestApi.thirdpartySdnc.url\"/>\n<parameter name=\"field10\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url`\"/>",
    "comments":"",
    "outputs":1,
    "x":1229.2684707641602,
    "y":575,
    "z":"7989b353.45560c",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"d4d1f0ce.b7e74",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1280.2685317993164,
    "y":156.00000762939453,
    "z":"7989b353.45560c",
    "wires":[
      [
        "36149500.01f18c",
        "ba269191.56dc8"
      ]
    ]
  },
  {
    "id":"36149500.01f18c",
    "type":"switchNode",
    "name":"switch site1_id",
    "xml":"<switch test=\"`$service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param[$idx].name == 'site1_id'`\">\n",
    "comments":"",
    "outputs":1,
    "x":1486.6017417907715,
    "y":125.00000381469727,
    "z":"7989b353.45560c",
    "wires":[
      [
        "acfbd7a0.59b5e8"
      ]
    ]
  },
  {
    "id":"acfbd7a0.59b5e8",
    "type":"outcomeTrue",
    "name":"true",
    "xml":"<outcome value='true'>\n",
    "comments":"",
    "outputs":1,
    "x":1687.6018371582031,
    "y":124.00000286102295,
    "z":"7989b353.45560c",
    "wires":[
      [
        "237ecb59.1d0964"
      ]
    ]
  },
  {
    "id":"237ecb59.1d0964",
    "type":"set",
    "name":"set id",
    "xml":"<set>\n<parameter name='prop.dci-connects.id' value='`$service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param[$idx].value`' />\n",
    "comments":"",
    "x":1861.2681884765625,
    "y":123.66654777526855,
    "z":"7989b353.45560c",
    "wires":[

    ]
  },
  {
    "id":"ba269191.56dc8",
    "type":"switchNode",
    "name":"switch tunnelType",
    "xml":"<switch test=\"`$service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param[$idx].name == 'tunnelType'`\">\n",
    "comments":"",
    "outputs":1,
    "x":1496.601821899414,
    "y":178.00000977516174,
    "z":"7989b353.45560c",
    "wires":[
      [
        "6d15d351.7a469c"
      ]
    ]
  },
  {
    "id":"6d15d351.7a469c",
    "type":"outcomeTrue",
    "name":"true",
    "xml":"<outcome value='true'>\n",
    "comments":"",
    "outputs":1,
    "x":1702.601821899414,
    "y":178.00000977516174,
    "z":"7989b353.45560c",
    "wires":[
      [
        "330168fb.71c318"
      ]
    ]
  },
  {
    "id":"330168fb.71c318",
    "type":"set",
    "name":"set tunnelType",
    "xml":"<set>\n<parameter name='prop.dci-connects.tunnelType' value='`$service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param[$idx].value`' />\n",
    "comments":"",
    "x":1871.601921081543,
    "y":178.0000250339508,
    "z":"7989b353.45560c",
    "wires":[

    ]
  },
  {
    "id":"35e712db.b43fee",
    "type":"block",
    "name":"block : executeSite1",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "comments":"",
    "outputs":1,
    "x":776.268440246582,
    "y":157.66666412353516,
    "z":"7989b353.45560c",
    "wires":[
      [
        "df0f7d7d.fb7f7",
        "bb4ced0c.de7b8"
      ]
    ]
  },
  {
    "id":"5b0cba4c.81dcb4",
    "type":"for",
    "name":"for each network-input-parameters",
    "xml":"<for index='idx' start='0' end='`$service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param_length`' >\n\n",
    "comments":"",
    "outputs":1,
    "x":1051.935173034668,
    "y":262.66663551330566,
    "z":"7989b353.45560c",
    "wires":[
      [
        "2694ce03.b776a2"
      ]
    ]
  },
  {
    "id":"2694ce03.b776a2",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1280.268539428711,
    "y":265.15101146698,
    "z":"7989b353.45560c",
    "wires":[
      [
        "cdac3e08.6cbf5"
      ]
    ]
  },
  {
    "id":"cdac3e08.6cbf5",
    "type":"switchNode",
    "name":"switch site2_id",
    "xml":"<switch test=\"`$service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param[$idx].name == 'site2_id'`\">\n",
    "comments":"",
    "outputs":1,
    "x":1481.2684898376465,
    "y":265.15099716186523,
    "z":"7989b353.45560c",
    "wires":[
      [
        "6bd0e46.d18a11c"
      ]
    ]
  },
  {
    "id":"6bd0e46.d18a11c",
    "type":"outcomeTrue",
    "name":"true",
    "xml":"<outcome value='true'>\n",
    "comments":"",
    "outputs":1,
    "x":1682.2685852050781,
    "y":264.1509962081909,
    "z":"7989b353.45560c",
    "wires":[
      [
        "aa108b27.c2a0e8"
      ]
    ]
  },
  {
    "id":"aa108b27.c2a0e8",
    "type":"set",
    "name":"set id",
    "xml":"<set>\n<parameter name='prop.dci-connects.id' value='`$service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param[$idx].value`' />\n",
    "comments":"",
    "x":1855.9349365234375,
    "y":263.8175411224365,
    "z":"7989b353.45560c",
    "wires":[

    ]
  },
  {
    "id":"6edb8096.c4d1e",
    "type":"block",
    "name":"block : executeSite1",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "comments":"",
    "outputs":1,
    "x":776.2684478759766,
    "y":266.8176679611206,
    "z":"7989b353.45560c",
    "wires":[
      [
        "5b0cba4c.81dcb4",
        "bb4ced0c.de7b8"
      ]
    ]
  },
  {
    "id":"45699908.a75b98",
    "type":"set",
    "name":"set object-path",
    "xml":"<set>\n<parameter name='network-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $network-topology-operation-input.service-information.service-instance-id\n + '/service-data/networks/network/'\n + $networkId\n + '/network-data/network-topology/'` \" />\n \n",
    "comments":"",
    "x":1091.2724304199219,
    "y":787.8607425689697,
    "z":"7989b353.45560c",
    "wires":[

    ]
  },
  {
    "id":"d2e9c512.6abce8",
    "type":"set",
    "name":"set networkId",
    "xml":"<set>\n<parameter name='networkId' value='`$network-topology-operation-input.network-information.network-id`' />\n",
    "comments":"",
    "x":1085.55806350708,
    "y":750.7178506851196,
    "z":"7989b353.45560c",
    "wires":[

    ]
  },
  {
    "id":"a782fd8c.f34ee",
    "type":"block",
    "name":"block : saveNetworkData",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "comments":"",
    "outputs":1,
    "x":828.2685012817383,
    "y":726.6666917800903,
    "z":"7989b353.45560c",
    "wires":[
      [
        "d2e9c512.6abce8",
        "45699908.a75b98",
        "50cb404a.13f74",
        "768af1e8.a21de"
      ]
    ]
  },
  {
    "id":"d2714bfd.01d828",
    "type":"comment",
    "name":"TODO",
    "info":"Currently deactivate does deletion too, later divide in two phases.",
    "comments":"",
    "x":710.268440246582,
    "y":20,
    "z":"7989b353.45560c",
    "wires":[

    ]
  },
  {
    "id":"50cb404a.13f74",
    "type":"set",
    "name":"copy input to service-data",
    "xml":"<set>\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.sdnc-request-header.' value='`$network-topology-operation-input.sdnc-request-header.`' />\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.request-information.' value='`$network-topology-operation-input.request-information.`' />\n",
    "comments":"",
    "x":1121.2685089111328,
    "y":707.0000038146973,
    "z":"7989b353.45560c",
    "wires":[

    ]
  },
  {
    "id":"768af1e8.a21de",
    "type":"set",
    "name":"set network-level-oper-status",
    "xml":"<set>\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-level-oper-status.order-status' value='Deleted' />\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-level-oper-status.last-rpc-action' value='`$network-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-level-oper-status.last-action' value='`$network-topology-operation-input.request-information.request-action`' />\n",
    "comments":"",
    "x":1135.268440246582,
    "y":834.9999618530273,
    "z":"7989b353.45560c",
    "wires":[

    ]
  }
]