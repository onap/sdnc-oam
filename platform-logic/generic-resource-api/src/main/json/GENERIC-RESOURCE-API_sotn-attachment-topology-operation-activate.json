[
  {
    "id": "a77629b2.29acf8",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 104.03125,
    "y": 31.999999523162842,
    "z": "205403e9.560efc",
    "wires": [
      [
        "2a935009.ef91b"
      ]
    ]
  },
  {
    "id": "2a935009.ef91b",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 316.03125381469727,
    "y": 104.00001668930054,
    "z": "205403e9.560efc",
    "wires": [
      [
        "394d3966.f7a306"
      ]
    ]
  },
  {
    "id": "394d3966.f7a306",
    "type": "method",
    "name": "sotn-attachment-topology-operation-activate",
    "xml": "<method rpc='sotn-attachment-topology-operation-activate' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 304.0313720703125,
    "y": 191.99999952316284,
    "z": "205403e9.560efc",
    "wires": [
      [
        "3355788a.12aa08"
      ]
    ]
  },
  {
    "id": "3355788a.12aa08",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 320.0313720703125,
    "y": 747.000244140625,
    "z": "205403e9.560efc",
    "wires": [
      [
        "3df84881.f08dd8",
        "d2f1b91d.444978",
        "e6d1c52b.520cc8",
        "1587558f.923b5a",
        "606696e.6cc0f68",
        "6558b5c9.5b8bec",
        "d1e1bdb5.615f1",
        "c7d4c837.69f1a8",
        "f3e22a0c.d8db48",
        "cb89d188.f33cc",
        "3bc10ee7.beb432",
        "bef55f2e.ad6b3",
        "36004db7.4505d2",
        "d7f464d6.9ac5f8",
        "a66d68ee.9308e8",
        "9ab0f309.357b6",
        "f9e2a4f.0cf5858",
        "6afb5fe5.f951c",
        "7b232ea8.d345"
      ]
    ]
  },
  {
    "id": "3df84881.f08dd8",
    "type": "set",
    "name": "set tmp.ar.allotted-resource-id,etc",
    "xml": "<set>\n<parameter name='tmp.ar.allotted-resource-id' value='`connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-id`' />\n<parameter name='tmp.ar.parent-service-instance-id' value='`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id`' />\n\n\n",
    "comments": "",
    "x": 717.0248107910156,
    "y": 145.99348640441895,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "66bc483f.e63618",
    "type": "comment",
    "name": "set tmp ar-id to fetch resource from MDSAL",
    "info": "",
    "comments": "",
    "x": 745.9851226806641,
    "y": 110.02528238296509,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "d2f1b91d.444978",
    "type": "set",
    "name": "set tmp.ar.self-link",
    "xml": "<set>\n<parameter name='tmp.ar.self-link' value=\"`'restconf/config/GENERIC-RESOURCE-API:connection-attachment-allotted-resources/connection-attachment-allotted-resource/'\n + $tmp.ar.allotted-resource-id\n + '/allotted-resource-data/connection-attachment-topology/'` \" />\n\n",
    "comments": "",
    "x": 671.0247497558594,
    "y": 238.99349164962769,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "c7d4c837.69f1a8",
    "type": "execute",
    "name": "execute Properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
    "comments": "",
    "outputs": 1,
    "x": 677.2866401672363,
    "y": 326.66022062301636,
    "z": "205403e9.560efc",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "e6d1c52b.520cc8",
    "type": "execute",
    "name": "generate allotted-resource url",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.allotted-resource-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 709.2866668701172,
    "y": 414.6602020263672,
    "z": "205403e9.560efc",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "1587558f.923b5a",
    "type": "get-resource",
    "name": "get-resource connection-attachment-allotted-resource",
    "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.mdsal.ConfigResource' resource='GENERIC-RESOURCE-API' key='connection-attachment-allotted-resources/connection-attachment-allotted-resource/$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-id/' pfx='mdsal-ar' >\n",
    "comments": "",
    "outputs": 1,
    "x": 780.0247650146484,
    "y": 504.7712607383728,
    "z": "205403e9.560efc",
    "wires": [
      [
        "9d21fc06.56c9b",
        "b5f5dd22.5d92a"
      ]
    ]
  },
  {
    "id": "4c5a1d8d.682774",
    "type": "comment",
    "name": "GET connection-attachment-allotted-resource from mdsal",
    "info": "",
    "comments": "",
    "x": 786.8395614624023,
    "y": 476.53857946395874,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "6cf9a5a4.2b253c",
    "type": "comment",
    "name": "Used for setting output to API Handler",
    "info": "",
    "comments": "",
    "x": 725.0247802734375,
    "y": 205.99350118637085,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "15f9c1a1.7257ee",
    "type": "comment",
    "name": "Obtain different URL, template location etc",
    "info": "For saving resource information to MDSAL & for AAI",
    "comments": "",
    "x": 743.0247459411621,
    "y": 291.88238191604614,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "b17883ed.6bb59",
    "type": "comment",
    "name": "Used to Get AR by id to MDSAL, same as self-link",
    "info": "",
    "comments": "",
    "x": 769.0247650146484,
    "y": 378.88234090805054,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "9d21fc06.56c9b",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1079.6979675292969,
    "y": 489.9999918937683,
    "z": "205403e9.560efc",
    "wires": [
      [
        "a51a2d9d.383d"
      ]
    ]
  },
  {
    "id": "a51a2d9d.383d",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1248.6979713439941,
    "y": 488.4998927116394,
    "z": "205403e9.560efc",
    "wires": [
      [
        "1edb162f.f7047a"
      ]
    ]
  },
  {
    "id": "1edb162f.f7047a",
    "type": "switchNode",
    "name": "switch cr length",
    "xml": "<switch test='`$mdsal-ar.connection-attachment-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1459.5552139282227,
    "y": 488.1190218925476,
    "z": "205403e9.560efc",
    "wires": [
      [
        "2c727498.5563ec",
        "cc396d19.c6009"
      ]
    ]
  },
  {
    "id": "2c727498.5563ec",
    "type": "other",
    "name": "outcome 1",
    "xml": "<outcome value='1'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1648.8885192871094,
    "y": 488.1189799308777,
    "z": "205403e9.560efc",
    "wires": [
      [
        "94f9a14a.aa9d1"
      ]
    ]
  },
  {
    "id": "94f9a14a.aa9d1",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic='true'>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1833.4124088287354,
    "y": 485.0238137245178,
    "z": "205403e9.560efc",
    "wires": [
      [
        "ccbbcb55.91af38",
        "ca13a843.2cf298",
        "b1755c5c.5e7d2"
      ]
    ]
  },
  {
    "id": "151fea4f.a51286",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN resource not found\" />\n    \n",
    "comments": "",
    "x": 1792.5502090454102,
    "y": 566.0660452842712,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "b5f5dd22.5d92a",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1071.5497703552246,
    "y": 525.0660767555237,
    "z": "205403e9.560efc",
    "wires": [
      [
        "318eef9c.54777"
      ]
    ]
  },
  {
    "id": "318eef9c.54777",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1251.5497207641602,
    "y": 525.7326273918152,
    "z": "205403e9.560efc",
    "wires": [
      [
        "151fea4f.a51286"
      ]
    ]
  },
  {
    "id": "cc396d19.c6009",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1637.2164726257324,
    "y": 525.3993401527405,
    "z": "205403e9.560efc",
    "wires": [
      [
        "151fea4f.a51286"
      ]
    ]
  },
  {
    "id": "ccbbcb55.91af38",
    "type": "set",
    "name": "set connection-attachment-ar from get",
    "xml": "<set>\n<parameter name='connection-attachment-ar.' value='$mdsal-ar.connection-attachment-allotted-resource[0].' />\n",
    "comments": "",
    "x": 2201.4758911132812,
    "y": 454.0000534057617,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "b1755c5c.5e7d2",
    "type": "set",
    "name": "set oper-status",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.request-information.request-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$connection-attachment-ar.allotted-resource-status.rpc-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.svc-request-id`' />\n\n",
    "comments": "",
    "x": 2135.4759216308594,
    "y": 527.4285559654236,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "ca13a843.2cf298",
    "type": "switchNode",
    "name": "switch order-status",
    "xml": "<switch test='`$connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2145.475700378418,
    "y": 492.9999899864197,
    "z": "205403e9.560efc",
    "wires": [
      [
        "c5c8df87.d7496",
        "96fbbcc4.3796a"
      ]
    ]
  },
  {
    "id": "c5c8df87.d7496",
    "type": "outcome",
    "name": "outcome Created",
    "xml": "<outcome value='Created'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2381.075782775879,
    "y": 487.00002098083496,
    "z": "205403e9.560efc",
    "wires": [
      [
        "88f78e4e.b4f9"
      ]
    ]
  },
  {
    "id": "96fbbcc4.3796a",
    "type": "outcome",
    "name": "outcome Other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2374.7902221679688,
    "y": 526.4286289215088,
    "z": "205403e9.560efc",
    "wires": [
      [
        "935468c0.294618"
      ]
    ]
  },
  {
    "id": "88f78e4e.b4f9",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2595.546298980713,
    "y": 488.37565517425537,
    "z": "205403e9.560efc",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "935468c0.294618",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" \n    value=\"`'Existing connection-attachment-allotted-resource with order status of ' + $connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status + '.'`\" />\n",
    "comments": "",
    "x": 2614.6980018615723,
    "y": 529.0000190734863,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "cd666072.c4472",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:sotn-get-request-input-param",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='connection-attachment-get-request-input-param' mode='sync' >\n",
    "comments": "",
    "outputs": 1,
    "x": 967.3342895507812,
    "y": 594.4935550689697,
    "z": "205403e9.560efc",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "f3e22a0c.d8db48",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 649.3403663635254,
    "y": 594.4998416900635,
    "z": "205403e9.560efc",
    "wires": [
      [
        "cd666072.c4472"
      ]
    ]
  },
  {
    "id": "606696e.6cc0f68",
    "type": "get-resource",
    "name": "get-resource parent-service-data",
    "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.mdsal.ConfigResource' resource='GENERIC-RESOURCE-API' key='services/service/$tmp.ar.parent-service-instance-id/service-data' pfx='mdsal-psd' >\n",
    "comments": "",
    "outputs": 1,
    "x": 714.0316772460938,
    "y": 736.5316162109375,
    "z": "205403e9.560efc",
    "wires": [
      [
        "f37fbd01.3a27c",
        "a7659493.fc2068"
      ]
    ]
  },
  {
    "id": "3f9c5fc2.bcfea",
    "type": "comment",
    "name": "GET parent-service-data from mdsal to check existence of other End point",
    "info": "",
    "comments": "",
    "x": 834.0316162109375,
    "y": 665.5315551757812,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "a4aef874.7e7e88",
    "type": "for",
    "name": "for pidx..mdsal-psd.provided-allotted-resources.provided-allotted-resource[]",
    "xml": "<for index='pidx' start='0' end='`$mdsal-psd.provided-allotted-resources.provided-allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1723.2160968780518,
    "y": 904.0041084289551,
    "z": "205403e9.560efc",
    "wires": [
      [
        "c0e3f5d5.ead6e8"
      ]
    ]
  },
  {
    "id": "6558b5c9.5b8bec",
    "type": "switchNode",
    "name": "switch mdsal-psd.provided-allotted-resources_length",
    "xml": "<switch test='`$mdsal-psd.provided-allotted-resources.provided-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 780.2154541015625,
    "y": 880.7180786132812,
    "z": "205403e9.560efc",
    "wires": [
      [
        "c8d5ad22.c170b",
        "7c868dde.220b24",
        "5e4728c1.e810e8"
      ]
    ]
  },
  {
    "id": "c8d5ad22.c170b",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1112.3582763671875,
    "y": 1157.5755004882812,
    "z": "205403e9.560efc",
    "wires": [
      [
        "bad30438.d05408"
      ]
    ]
  },
  {
    "id": "3a4d0461.4005dc",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1306.4856853485107,
    "y": 898.7015209197998,
    "z": "205403e9.560efc",
    "wires": [
      [
        "a4aef874.7e7e88",
        "e5572f4b.0166d"
      ]
    ]
  },
  {
    "id": "c0e3f5d5.ead6e8",
    "type": "switchNode",
    "name": "switch allotted-resource-id",
    "xml": "<switch test=\"`$mdsal-psd.provided-allotted-resources.provided-allotted-resource[$cidx].allotted-resource-id == $tmp.ar.allotted-resource-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2158.3274974823,
    "y": 904.0040054321289,
    "z": "205403e9.560efc",
    "wires": [
      [
        "ac0df227.58a1c",
        "39a3c95.9a56f36"
      ]
    ]
  },
  {
    "id": "ac0df227.58a1c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2367.1377239227295,
    "y": 876.4684953689575,
    "z": "205403e9.560efc",
    "wires": [
      [
        "22a29502.ccff9a"
      ]
    ]
  },
  {
    "id": "64186f05.4be35",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2546.8984203338623,
    "y": 940.3256740570068,
    "z": "205403e9.560efc",
    "wires": [
      [
        "482d5120.f30ca",
        "a13cbdb.502bd4"
      ]
    ]
  },
  {
    "id": "482d5120.f30ca",
    "type": "set",
    "name": "set tmp.pidx and ptx.consumed-ar",
    "xml": "<set>\n<parameter name='tmp.pidx' value='`$pidx`' />\n<parameter name='tmp.provided-ar.' value='`$mdsal-psd.provided-allotted-resources.provided-allotted-resource[$pidx].`' />\n<parameter name='tmp.found-in-ar' value='true' />\n<parameter name='tmp.ep-available' value='true' />",
    "comments": "",
    "x": 2803.755926132202,
    "y": 914.8971881866455,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "a13cbdb.502bd4",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 2714.6166439056396,
    "y": 961.6532039642334,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "f72ddcab.98ba7",
    "type": "comment",
    "name": "Check existence of other AR in parent service data",
    "info": "Check if other allotted resource is available.",
    "comments": "",
    "x": 769.993896484375,
    "y": 814.8928833007812,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "7c868dde.220b24",
    "type": "other",
    "name": "outcome 1",
    "xml": "<outcome value='1'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1124.0107231140137,
    "y": 1028.6772651672363,
    "z": "205403e9.560efc",
    "wires": [
      [
        "4884d527.f966cc"
      ]
    ]
  },
  {
    "id": "bad30438.d05408",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN resource not found\" />\n    \n",
    "comments": "",
    "x": 1285.0106201171875,
    "y": 1156.6772422790527,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "5e4728c1.e810e8",
    "type": "other",
    "name": "outcome 2",
    "xml": "<outcome value='2'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1132.010705947876,
    "y": 899.6772212982178,
    "z": "205403e9.560efc",
    "wires": [
      [
        "3a4d0461.4005dc"
      ]
    ]
  },
  {
    "id": "22a29502.ccff9a",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2525.1219387054443,
    "y": 875.6772384643555,
    "z": "205403e9.560efc",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "39a3c95.9a56f36",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2366.1219387054443,
    "y": 938.6772384643555,
    "z": "205403e9.560efc",
    "wires": [
      [
        "64186f05.4be35"
      ]
    ]
  },
  {
    "id": "e5572f4b.0166d",
    "type": "switchNode",
    "name": "switch tmp.found-in-ar",
    "xml": "<switch test='`$tmp.found-in-ar`'>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1553.0106105804443,
    "y": 975.4549942016602,
    "z": "205403e9.560efc",
    "wires": [
      [
        "23e2fd66.fcd7c2"
      ]
    ]
  },
  {
    "id": "23e2fd66.fcd7c2",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1776.0106563568115,
    "y": 974.5661640167236,
    "z": "205403e9.560efc",
    "wires": [
      [
        "8fa1eba4.3c67f8"
      ]
    ]
  },
  {
    "id": "8fa1eba4.3c67f8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1966.0106868743896,
    "y": 974.5662136077881,
    "z": "205403e9.560efc",
    "wires": [
      [
        "5c438258.2817dc"
      ]
    ]
  },
  {
    "id": "5c438258.2817dc",
    "type": "get-resource",
    "name": "get-resource provided-ar.allotted-resource",
    "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.mdsal.ConfigResource' resource='GENERIC-RESOURCE-API' key='connection-attachment-allotted-resources/connection-attachment-allotted-resource/$tmp.provided-ar.allotted-resource-id/' pfx='mdsal-other-ar' >",
    "comments": "",
    "outputs": 1,
    "x": 2271.4550399780273,
    "y": 1026.5662593841553,
    "z": "205403e9.560efc",
    "wires": [
      [
        "75e596c5.28a268",
        "3fc2682f.986b78"
      ]
    ]
  },
  {
    "id": "75e596c5.28a268",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2571.128242492676,
    "y": 1011.7949905395508,
    "z": "205403e9.560efc",
    "wires": [
      [
        "2d352ea7.0e12c2"
      ]
    ]
  },
  {
    "id": "3fc2682f.986b78",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2562.9800453186035,
    "y": 1046.8610754013062,
    "z": "205403e9.560efc",
    "wires": [
      [
        "1ccb7b0b.274855"
      ]
    ]
  },
  {
    "id": "abb4ba72.e83978",
    "type": "switchNode",
    "name": "switch mdsal-psd.networks_length",
    "xml": "<switch test='`$mdsal-psd.networks.network_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1550.3441162109375,
    "y": 1127.8997802734375,
    "z": "205403e9.560efc",
    "wires": [
      [
        "7abae666.d51f58",
        "f199acdb.1cc56"
      ]
    ]
  },
  {
    "id": "f199acdb.1cc56",
    "type": "other",
    "name": "outcome 1",
    "xml": "<outcome value='1'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1829.343994140625,
    "y": 1137.78857421875,
    "z": "205403e9.560efc",
    "wires": [
      [
        "362dc46c.af4b8c"
      ]
    ]
  },
  {
    "id": "7abae666.d51f58",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1823.3441162109375,
    "y": 1197.78857421875,
    "z": "205403e9.560efc",
    "wires": [
      [
        "7c1c105.99f43f"
      ]
    ]
  },
  {
    "id": "7c1c105.99f43f",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Incorrect state found more then 1 network\" />\n    \n",
    "comments": "",
    "x": 1979.9964599609375,
    "y": 1198.890380859375,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "df5ebca6.dc1ea",
    "type": "set",
    "name": "set tmp.network.",
    "xml": "<set>\n<parameter name='tmp.network.' value='`$mdsal-psd.networks.network[0].`' />\n",
    "comments": "",
    "x": 2276.7888259887695,
    "y": 1121.7887411117554,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "4884d527.f966cc",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1296.455078125,
    "y": 1029.7885131835938,
    "z": "205403e9.560efc",
    "wires": [
      [
        "abb4ba72.e83978"
      ]
    ]
  },
  {
    "id": "362dc46c.af4b8c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2021.1217041015625,
    "y": 1140.7884521484375,
    "z": "205403e9.560efc",
    "wires": [
      [
        "df5ebca6.dc1ea",
        "37668a8f.d84a36"
      ]
    ]
  },
  {
    "id": "37668a8f.d84a36",
    "type": "for",
    "name": "for nidx..tmp.network.network-data.network-request-input.network...[]",
    "xml": "<for index='nidx' start='0' end='`$tmp.network.network-data.network-request-input.network-input-parameters.param_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 2438.1218338012695,
    "y": 1188.7885284423828,
    "z": "205403e9.560efc",
    "wires": [
      [
        "8d783898.486c38"
      ]
    ]
  },
  {
    "id": "8d783898.486c38",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2809.67724609375,
    "y": 1221.7884521484375,
    "z": "205403e9.560efc",
    "wires": [
      [
        "f4f7612.08260a",
        "4421135d.084d2c",
        "5f144f0e.31549",
        "37e78cdf.278a44",
        "ed440eb3.36c94",
        "f75e941b.01edb8",
        "5523625.526319c",
        "882c3718.7bb828",
        "dae6d839.a75e08",
        "bc77042c.0ab858"
      ]
    ]
  },
  {
    "id": "f4f7612.08260a",
    "type": "switchNode",
    "name": "switch access-node-id",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'access-node-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 3015.1881942749023,
    "y": 1069.7990770339966,
    "z": "205403e9.560efc",
    "wires": [
      [
        "5989197c.f6f7f8"
      ]
    ]
  },
  {
    "id": "5989197c.f6f7f8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3204.1878204345703,
    "y": 1071.7989416122437,
    "z": "205403e9.560efc",
    "wires": [
      [
        "b51d0ed2.6b0e5"
      ]
    ]
  },
  {
    "id": "b51d0ed2.6b0e5",
    "type": "set",
    "name": "set tmp.found-in-network tmp.ep-available",
    "xml": "<set>\n<parameter name='tmp.found-in-network' value='true' />\n<parameter name='tmp.ep-available' value='true' />",
    "comments": "",
    "x": 3457.1879959106445,
    "y": 1071.3989877700806,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "4421135d.084d2c",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 2996.1772994995117,
    "y": 1526.7884120941162,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "d1e1bdb5.615f1",
    "type": "switchNode",
    "name": "switch tmp.ep-available",
    "xml": "<switch test='`$tmp.ep-available`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 706.3440551757812,
    "y": 1292.2327880859375,
    "z": "205403e9.560efc",
    "wires": [
      [
        "32c06766.90eaa8",
        "3e428e4a.b1f8b2"
      ]
    ]
  },
  {
    "id": "3e428e4a.b1f8b2",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 925.0107746124268,
    "y": 1341.5661449432373,
    "z": "205403e9.560efc",
    "wires": [
      [
        "5db74705.3b89f8"
      ]
    ]
  },
  {
    "id": "32c06766.90eaa8",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 929.8995761871338,
    "y": 1250.5662059783936,
    "z": "205403e9.560efc",
    "wires": [
      [
        "64e7831f.72ebbc"
      ]
    ]
  },
  {
    "id": "64e7831f.72ebbc",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1076.8995723724365,
    "y": 1252.4550189971924,
    "z": "205403e9.560efc",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "5db74705.3b89f8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1095.121862411499,
    "y": 1339.5661029815674,
    "z": "205403e9.560efc",
    "wires": [
      [
        "3c2f6627.61512a",
        "380c3c36.553114",
        "42f94a2e.999604"
      ]
    ]
  },
  {
    "id": "3c2f6627.61512a",
    "type": "switchNode",
    "name": "switch tmp.found-in-ar",
    "xml": "<switch test='`$tmp.found-in-ar`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1325.23291015625,
    "y": 1274.566162109375,
    "z": "205403e9.560efc",
    "wires": [
      [
        "d79615f7.087d78",
        "1c319701.787ef9"
      ]
    ]
  },
  {
    "id": "d79615f7.087d78",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1545.677282333374,
    "y": 1260.5661029815674,
    "z": "205403e9.560efc",
    "wires": [
      [
        "ba9cd8cc.15f248"
      ]
    ]
  },
  {
    "id": "1c319701.787ef9",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1546.67724609375,
    "y": 1306.566162109375,
    "z": "205403e9.560efc",
    "wires": [
      [
        "719bb92a.4ee018"
      ]
    ]
  },
  {
    "id": "ba9cd8cc.15f248",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1733.232946395874,
    "y": 1257.5661029815674,
    "z": "205403e9.560efc",
    "wires": [
      [
        "a6fc819d.1ebca"
      ]
    ]
  },
  {
    "id": "719bb92a.4ee018",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1734.23291015625,
    "y": 1305.566162109375,
    "z": "205403e9.560efc",
    "wires": [
      [
        "815fbac.230c748"
      ]
    ]
  },
  {
    "id": "25783fac.20762",
    "type": "comment",
    "name": "GET connection-attachment-ar to store AR data from mdsal",
    "info": "",
    "comments": "",
    "x": 2265.5040397644043,
    "y": 416.5039129257202,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "b02bb1b6.e7f4b",
    "type": "comment",
    "name": "Set source end point",
    "info": "",
    "comments": "",
    "x": 671.0039176940918,
    "y": 562.2539224624634,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "cb89d188.f33cc",
    "type": "set",
    "name": "set tmp.ar.parent-service-instance-id",
    "xml": "<set>\n<parameter name='tmp.ar.parent-service-instance-id' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id` \" />\n\n",
    "comments": "",
    "x": 725,
    "y": 701,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "f37fbd01.3a27c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 961,
    "y": 729,
    "z": "205403e9.560efc",
    "wires": [
      [
        "204f751a.862bca"
      ]
    ]
  },
  {
    "id": "a7659493.fc2068",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 952.8518028259277,
    "y": 764.0660848617554,
    "z": "205403e9.560efc",
    "wires": [
      [
        "7b61e92b.2f9e78"
      ]
    ]
  },
  {
    "id": "7b61e92b.2f9e78",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN resource not found\" />\n    \n",
    "comments": "",
    "x": 1128.00048828125,
    "y": 760.3334350585938,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "204f751a.862bca",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1112,
    "y": 727,
    "z": "205403e9.560efc",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "1ccb7b0b.274855",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN provided attachment resource not found\" />\n    \n",
    "comments": "",
    "x": 2732.9999256134033,
    "y": 1048.0000953674316,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "2d352ea7.0e12c2",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2716.9999256134033,
    "y": 1009.0000953674316,
    "z": "205403e9.560efc",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "3bc10ee7.beb432",
    "type": "set",
    "name": "set tmp.found-in-ar tmp.found-in-network tmp.ep-available to false",
    "xml": "<set>\n<parameter name='tmp.found-in-ar' value='false' />\n<parameter name='tmp.found-in-network' value='false' />\n<parameter name='tmp.ep-available' value='false' />",
    "comments": "",
    "x": 817,
    "y": 846,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "c79a6189.fcf2c",
    "type": "comment",
    "name": "If other EP exists set destination end point",
    "info": "Check if other allotted resource is available.",
    "comments": "",
    "x": 757,
    "y": 1217,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "bac44858.bd4fb8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1524,
    "y": 1423,
    "z": "205403e9.560efc",
    "wires": [
      [
        "43736465.ded50c",
        "1f0536d6.03d209",
        "1c6c8b83.e7b554",
        "804dff2.f416",
        "faab91d9.9baa6",
        "40922023.6161",
        "cce7fa52.3ac5b8",
        "afdc2a42.250d98"
      ]
    ]
  },
  {
    "id": "43736465.ded50c",
    "type": "switchNode",
    "name": "switch access-node-id",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-node-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1760.51025390625,
    "y": 1356.0103759765625,
    "z": "205403e9.560efc",
    "wires": [
      [
        "327e9777.bfc4d8"
      ]
    ]
  },
  {
    "id": "1f0536d6.03d209",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 1733.5002059936523,
    "y": 1661.0003395080566,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "1c6c8b83.e7b554",
    "type": "switchNode",
    "name": "switch access-ltp-id",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-ltp-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1752.0000839233398,
    "y": 1399.777907371521,
    "z": "205403e9.560efc",
    "wires": [
      [
        "a140ea29.0beb08"
      ]
    ]
  },
  {
    "id": "804dff2.f416",
    "type": "switchNode",
    "name": "switch clientSignal",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'clientSignal'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1746.0001220703125,
    "y": 1445.7779541015625,
    "z": "205403e9.560efc",
    "wires": [
      [
        "ce02a989.0990f8"
      ]
    ]
  },
  {
    "id": "faab91d9.9baa6",
    "type": "switchNode",
    "name": "switch cVLAN",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'cVLAN'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1729.9896240234375,
    "y": 1484.7674560546875,
    "z": "205403e9.560efc",
    "wires": [
      [
        "f26df0a2.edf49"
      ]
    ]
  },
  {
    "id": "327e9777.bfc4d8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1938.22216796875,
    "y": 1356.666748046875,
    "z": "205403e9.560efc",
    "wires": [
      [
        "ded3a3b2.bb6de"
      ]
    ]
  },
  {
    "id": "ded3a3b2.bb6de",
    "type": "set",
    "name": "set dst-access-node-id",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-node-id' value='`$tmp.ep.parameters.param[$idx].value`' />",
    "comments": "",
    "x": 2111.22216796875,
    "y": 1356.2667236328125,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "a140ea29.0beb08",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1933.7120361328125,
    "y": 1399.4342041015625,
    "z": "205403e9.560efc",
    "wires": [
      [
        "d26fb8e0.ff59f8"
      ]
    ]
  },
  {
    "id": "ce02a989.0990f8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1933.7120361328125,
    "y": 1445.4342041015625,
    "z": "205403e9.560efc",
    "wires": [
      [
        "ee911b75.034b28"
      ]
    ]
  },
  {
    "id": "f26df0a2.edf49",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1933.7015380859375,
    "y": 1484.423828125,
    "z": "205403e9.560efc",
    "wires": [
      [
        "16f5641b.4b39fc"
      ]
    ]
  },
  {
    "id": "380c3c36.553114",
    "type": "for",
    "name": "for idx..tmp.ep.parameters[]",
    "xml": "<for index='idx' start='0' end='`$tmp.ep.parameters.param_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 1342,
    "y": 1356,
    "z": "205403e9.560efc",
    "wires": [
      [
        "bac44858.bd4fb8"
      ]
    ]
  },
  {
    "id": "a6fc819d.1ebca",
    "type": "set",
    "name": "set tmp.ep.parameters",
    "xml": "<set>\n<parameter name='tmp.ep.parameters' value='`$mdsal-other-ar.allotted-resource-data.connection-attachment-topology.connection-attachment-parameters`' />",
    "comments": "",
    "x": 1945,
    "y": 1257,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "815fbac.230c748",
    "type": "set",
    "name": "set tmp.ep.parameters",
    "xml": "<set>\n<parameter name='tmp.ep.parameters' value='`$tmp.network.network-data.network-request-input.network-input-parameters`' />\n",
    "comments": "",
    "x": 1945.999963760376,
    "y": 1301.0000591278076,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "d26fb8e0.ff59f8",
    "type": "set",
    "name": "set dst-access-node-id",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$tmp.ep.parameters.param[$idx].value`' />",
    "comments": "",
    "x": 2111,
    "y": 1399,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "ee911b75.034b28",
    "type": "set",
    "name": "set dst-clientSignal",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.clientSignal' value='`$tmp.ep.parameters.param[$idx].value`' />",
    "comments": "",
    "x": 2105,
    "y": 1443,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "16f5641b.4b39fc",
    "type": "set",
    "name": "set dst-cVLAN",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.cVLAN' value='`$tmp.ep.parameters.param[$idx].value`' />",
    "comments": "",
    "x": 2096,
    "y": 1482,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "42f94a2e.999604",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 736,
    "y": 1584,
    "z": "205403e9.560efc",
    "wires": [
      [
        "cb687dc5.52b2d",
        "4ed51df6.e8ec54"
      ]
    ]
  },
  {
    "id": "164aff86.323ed",
    "type": "comment",
    "name": "Get controller info and send request",
    "info": "",
    "comments": "",
    "x": 686,
    "y": 1546,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "9edea41a.d68a58",
    "type": "execute",
    "name": "execute RestApiCallNode Create ethernet Service",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + 'restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1379.0000305175781,
    "y": 2062.0007610321045,
    "z": "205403e9.560efc",
    "wires": [
      [
        "616e1655.379198",
        "b0089735.e037f8"
      ]
    ]
  },
  {
    "id": "616e1655.379198",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1666.0000228881836,
    "y": 2083.0007104873657,
    "z": "205403e9.560efc",
    "wires": [
      [
        "96c14b60.8835b8"
      ]
    ]
  },
  {
    "id": "96c14b60.8835b8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 1835.9999618530273,
    "y": 2086.0007104873657,
    "z": "205403e9.560efc",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "a39478d4.ff01e8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
    "comments": "",
    "x": 1836.0000839233398,
    "y": 2042.0007104873657,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "b0089735.e037f8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1668.9999618530273,
    "y": 2042.0007104873657,
    "z": "205403e9.560efc",
    "wires": [
      [
        "a39478d4.ff01e8"
      ]
    ]
  },
  {
    "id": "ed031fec.cf219",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1018.7622451782227,
    "y": 2481.953144431114,
    "z": "205403e9.560efc",
    "wires": [
      [
        "2bd27313.7e4a0c"
      ]
    ]
  },
  {
    "id": "2bd27313.7e4a0c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"AAI failed\" />\n",
    "comments": "",
    "x": 1185.2861251831055,
    "y": 2493.572215437889,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "581d8c50.26f904",
    "type": "failure",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1025.8575325012207,
    "y": 2514.715112090111,
    "z": "205403e9.560efc",
    "wires": [
      [
        "2bd27313.7e4a0c"
      ]
    ]
  },
  {
    "id": "9aeb74dd.a24a08",
    "type": "comment",
    "name": "Save Resource to AAI",
    "info": "",
    "comments": "",
    "x": 737.8099594116211,
    "y": 2464.302532672882,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "9158a090.142c2",
    "type": "comment",
    "name": "TODO: Rework after confirmation from AAI",
    "info": "",
    "comments": "",
    "x": 1038.1688690185547,
    "y": 2441.873571395874,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "f9e2a4f.0cf5858",
    "type": "set",
    "name": "set output to api handler",
    "xml": "<set>\n<parameter name='allotted-resource-id' value='`$tmp.ar.allotted-resource-id`' />\n<parameter name='connection-attachment-object-path' value=\"`$tmp.ar.self-link`\"/>\n<parameter name='service-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $connection-attachment-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n \n",
    "comments": "",
    "x": 752.5776557922363,
    "y": 2385.828013896942,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "6afb5fe5.f951c",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 720.9907379150391,
    "y": 2546.443766117096,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "9ab0f309.357b6",
    "type": "execute",
    "name": "execute RestApiCallNode - PUT AR by id",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.sotn-attachment.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 802.309757232666,
    "y": 2293.4687876701355,
    "z": "205403e9.560efc",
    "wires": [
      [
        "cf614e80.0a4b3",
        "6d53da86.669ad4",
        "131ccd05.2f3143"
      ]
    ]
  },
  {
    "id": "cf614e80.0a4b3",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1070.9511337280273,
    "y": 2344.8001994118094,
    "z": "205403e9.560efc",
    "wires": [
      [
        "ef1dfc84.71501"
      ]
    ]
  },
  {
    "id": "6d53da86.669ad4",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1061.9511833190918,
    "y": 2313.300225161016,
    "z": "205403e9.560efc",
    "wires": [
      [
        "ef1dfc84.71501"
      ]
    ]
  },
  {
    "id": "131ccd05.2f3143",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1065.7012214660645,
    "y": 2283.6573300361633,
    "z": "205403e9.560efc",
    "wires": [
      [
        "e18bb85.a259b48"
      ]
    ]
  },
  {
    "id": "ef1dfc84.71501",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for connection-attachment-allotted-resource\" />\n",
    "comments": "",
    "x": 1231.7012214660645,
    "y": 2314.050249002874,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "e18bb85.a259b48",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1207.3571891784668,
    "y": 2279.8494992256165,
    "z": "205403e9.560efc",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "bef55f2e.ad6b3",
    "type": "set",
    "name": "set ar-data",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-status.action' value=\"`$connection-attachment-topology-operation-input.request-information.request-action` \" />\n<parameter name='connection-attachment-ar.allotted-resource-status.rpc-name' value=\"connection-attachment-topology-operation\" />\n<parameter name='connection-attachment-ar.allotted-resource-status.rpc-action' value=\"`$connection-attachment-topology-operation-input.sdnc-request-header.svc-action` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.request-information.' value=\"`$connection-attachment-topology-operation-input.request-information.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.' value=\"`$connection-attachment-topology-operation-input.sdnc-request-header.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.service-information.' value=\"`$connection-attachment-topology-operation-input.service-information.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.allotted-resource-information.' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.` \" />",
    "comments": "",
    "x": 707.5233535766602,
    "y": 2144.849767923355,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "d7f464d6.9ac5f8",
    "type": "execute",
    "name": "execute getTime",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='setTime' >\n    <parameter name=\"outputPath\" value=\"tmp.current-time\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 724.809196472168,
    "y": 2217.4693655967712,
    "z": "205403e9.560efc",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "a66d68ee.9308e8",
    "type": "set",
    "name": "set allotted-resource-oper-status",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status' value='Active' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$connection-attachment-topology-operation-input.request-information.request-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$connection-attachment-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$connection-attachment-topology-operation-input.sdnc-request-header.svc-request-id`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.create-timestamp' value='`$tmp.current-time`' />\n",
    "comments": "",
    "x": 774.7962760925293,
    "y": 2254.420445919037,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "36004db7.4505d2",
    "type": "set",
    "name": "set model-data",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.connection-attachment-topology.onap-model-information.' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.` \" />",
    "comments": "",
    "x": 721.3648948669434,
    "y": 2184.0244183540344,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "8c652fd0.4d9e2",
    "type": "comment",
    "name": "Prepare data for allotted-resource addition to MDSAL",
    "info": "This will add to allotted-resource which is present inside service.",
    "comments": "",
    "x": 834.698356628418,
    "y": 2105.0243704319,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "69186aa2.60ef84",
    "type": "comment",
    "name": "Add to allotted-resources in mdsal",
    "info": "",
    "comments": "",
    "x": 776.2781829833984,
    "y": 2072.437672138214,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "7b232ea8.d345",
    "type": "update",
    "name": "update AAI allotted-resource",
    "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"allotted-resource\" \n\t\tkey=\"customer.global-customer-id = $connection-attachment-topology-operation-input.service-information.global-customer-id AND\n\t\t\tservice-subscription.service-type = $connection-attachment-topology-operation-input.service-information.subscription-service-type AND\n\t\t\tservice-instance.service-instance-id = $connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id AND\n\t\t\tallotted-resource.id = $tmp.ar.allotted-resource-id\"\n        pfx='pfx' local-only='false' force='false'>\n\t<parameter name=\"description\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-type`\" />\n\t<parameter name=\"selflink\" value=\"`$tmp.ar.self-link`\" />\n\t<parameter name=\"model-invariant-id\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.model-invariant-uuid`\" />\n\t<parameter name=\"model-version-id\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.model-uuid`\" />\n\t<parameter name=\"operational-status\" value=\"Active\" />\n",
    "comments": "",
    "outputs": 1,
    "x": 764.2542381286621,
    "y": 2501.754675388336,
    "z": "205403e9.560efc",
    "wires": [
      [
        "ed031fec.cf219",
        "581d8c50.26f904"
      ]
    ]
  },
  {
    "id": "cb687dc5.52b2d",
    "type": "execute",
    "name": "execute RestApiCallNode getPath from OOF",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.oof-getpath.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.oof.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.oof.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1043.0040130615234,
    "y": 1572.2544918060303,
    "z": "205403e9.560efc",
    "wires": [
      [
        "e275a7ba.f6ec08",
        "ec20f395.66c91"
      ]
    ]
  },
  {
    "id": "e275a7ba.f6ec08",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1350.0039558410645,
    "y": 1593.2543387413025,
    "z": "205403e9.560efc",
    "wires": [
      [
        "d000e963.b327a8"
      ]
    ]
  },
  {
    "id": "d000e963.b327a8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 1520.0038948059082,
    "y": 1596.2543387413025,
    "z": "205403e9.560efc",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "773ede9b.4ecb",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
    "comments": "",
    "x": 1520.0040168762207,
    "y": 1552.2543387413025,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "ec20f395.66c91",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1353.0038948059082,
    "y": 1552.2543387413025,
    "z": "205403e9.560efc",
    "wires": [
      [
        "773ede9b.4ecb"
      ]
    ]
  },
  {
    "id": "461ac2a4.5bdfec",
    "type": "comment",
    "name": "Get VPNs from OOF",
    "info": "",
    "comments": "",
    "x": 963.0079040527344,
    "y": 1535.2584590911865,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "4ed51df6.e8ec54",
    "type": "for",
    "name": "for vidx..oof.vpns_length[]",
    "xml": "<for index='vidx' start='0' end='`$oof.vpns_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 994.0039024353027,
    "y": 1656.5040574073792,
    "z": "205403e9.560efc",
    "wires": [
      [
        "fa8596fd.dc6fb8"
      ]
    ]
  },
  {
    "id": "9e6cff97.3e047",
    "type": "comment",
    "name": "Loop through VPN and configure them",
    "info": "",
    "comments": "",
    "x": 1016.004020690918,
    "y": 1620.0043177604675,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "5f144f0e.31549",
    "type": "switchNode",
    "name": "switch name",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$idx].name == 'name'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2994.7882919311523,
    "y": 1167.1217517852783,
    "z": "205403e9.560efc",
    "wires": [
      [
        "36d080c6.aaac9"
      ]
    ]
  },
  {
    "id": "36d080c6.aaac9",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3181.788299560547,
    "y": 1161.1216888427734,
    "z": "205403e9.560efc",
    "wires": [
      [
        "dd94e80d.e79a58"
      ]
    ]
  },
  {
    "id": "dd94e80d.e79a58",
    "type": "set",
    "name": "set etht-svc-name & bandwidth-profile-name",
    "xml": "<set>\n<parameter name='prop.global.sotn.etht-svc-name' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$idx].value`' />\n<parameter name='prop.global.sotn.bandwidth-profile-name' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 3443.788589477539,
    "y": 1147.721715927124,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "37e78cdf.278a44",
    "type": "switchNode",
    "name": "switch description",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$idx].name == 'description'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3005.627960205078,
    "y": 1205.1216869354248,
    "z": "205403e9.560efc",
    "wires": [
      [
        "87cfc59c.1be938"
      ]
    ]
  },
  {
    "id": "87cfc59c.1be938",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3175.627960205078,
    "y": 1201.1216869354248,
    "z": "205403e9.560efc",
    "wires": [
      [
        "af30cb49.aad268"
      ]
    ]
  },
  {
    "id": "af30cb49.aad268",
    "type": "set",
    "name": "set etht-svc-descr",
    "xml": "<set>\n<parameter name='prop.global.sotn.etht-svc-descr' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 3362.961400985718,
    "y": 1199.5828437805176,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "ed440eb3.36c94",
    "type": "switchNode",
    "name": "switch tenantId",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$idx].name == 'tenantId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2991.010353088379,
    "y": 1251.455090522766,
    "z": "205403e9.560efc",
    "wires": [
      [
        "824d6eab.2a9f8"
      ]
    ]
  },
  {
    "id": "824d6eab.2a9f8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3183.010341644287,
    "y": 1244.4550142288208,
    "z": "205403e9.560efc",
    "wires": [
      [
        "58ea9e80.950b3"
      ]
    ]
  },
  {
    "id": "58ea9e80.950b3",
    "type": "set",
    "name": "set tenantId",
    "xml": "<set>\n<parameter name='prop.global.sotn.tenantId' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 3351.010341644287,
    "y": 1245.0550203323364,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "5523625.526319c",
    "type": "switchNode",
    "name": "switch CIR",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$idx].name == 'CIR'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2977.849998474121,
    "y": 1338.455072402954,
    "z": "205403e9.560efc",
    "wires": [
      [
        "6cc5147d.9f838c"
      ]
    ]
  },
  {
    "id": "6cc5147d.9f838c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3185.850067138672,
    "y": 1334.4550857543945,
    "z": "205403e9.560efc",
    "wires": [
      [
        "5119c20c.53e31c"
      ]
    ]
  },
  {
    "id": "5119c20c.53e31c",
    "type": "set",
    "name": "set cir",
    "xml": "<set>\n<parameter name='prop.sotn.cir' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 3335.1833877563477,
    "y": 1332.9162330627441,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "f75e941b.01edb8",
    "type": "switchNode",
    "name": "switch vpnType",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$idx].name == 'vpnType'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2997.1584701538086,
    "y": 1292.2327914237976,
    "z": "205403e9.560efc",
    "wires": [
      [
        "94f8c651.7d4c68"
      ]
    ]
  },
  {
    "id": "94f8c651.7d4c68",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3184.1584701538086,
    "y": 1288.2327914237976,
    "z": "205403e9.560efc",
    "wires": [
      [
        "a2401fbd.0e5a6"
      ]
    ]
  },
  {
    "id": "a2401fbd.0e5a6",
    "type": "set",
    "name": "set vpnType",
    "xml": "<set>\n<parameter name='prop.global.sotn.vpnType' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 3353.49210357666,
    "y": 1285.693956375122,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "882c3718.7bb828",
    "type": "switchNode",
    "name": "switch EIR",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$idx].name == 'EIR'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2979.140449523926,
    "y": 1381.1529388427734,
    "z": "205403e9.560efc",
    "wires": [
      [
        "6a090cfc.b29bc4"
      ]
    ]
  },
  {
    "id": "6a090cfc.b29bc4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3181.140411376953,
    "y": 1376.152958869934,
    "z": "205403e9.560efc",
    "wires": [
      [
        "7cfdc8c0.796128"
      ]
    ]
  },
  {
    "id": "7cfdc8c0.796128",
    "type": "set",
    "name": "set eir",
    "xml": "<set>\n<parameter name='prop.global.sotn.eir' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 3337.4739151000977,
    "y": 1375.614094734192,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "dae6d839.a75e08",
    "type": "switchNode",
    "name": "switch color-aware",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$idx].name == 'color-aware'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3006.1407203674316,
    "y": 1435.152904510498,
    "z": "205403e9.560efc",
    "wires": [
      [
        "1c170ed.c3c73f1"
      ]
    ]
  },
  {
    "id": "1c170ed.c3c73f1",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3184.140724182129,
    "y": 1429.1528968811035,
    "z": "205403e9.560efc",
    "wires": [
      [
        "aafef618.cfb6d8"
      ]
    ]
  },
  {
    "id": "aafef618.cfb6d8",
    "type": "set",
    "name": "set colorAware",
    "xml": "<set>\n<parameter name='prop.global.sotn.colorAware' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 3365.4741020202637,
    "y": 1428.614055633545,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "bc77042c.0ab858",
    "type": "switchNode",
    "name": "switch coupling-flag",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$idx].name == 'coupling-flag'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3006.140727996826,
    "y": 1481.1529293060303,
    "z": "205403e9.560efc",
    "wires": [
      [
        "9c20abd0.a9e0c8"
      ]
    ]
  },
  {
    "id": "9c20abd0.a9e0c8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3184.1407203674316,
    "y": 1473.1528978347778,
    "z": "205403e9.560efc",
    "wires": [
      [
        "28950acd.c17166"
      ]
    ]
  },
  {
    "id": "28950acd.c17166",
    "type": "set",
    "name": "set couplingFlag",
    "xml": "<set>\n<parameter name='prop.global.sotn.couplingFlag' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 3369.4741020202637,
    "y": 1473.6140804290771,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "dddada55.283bb8",
    "type": "comment",
    "name": "Check if other EP exists in SOTNConnectionResource",
    "info": "",
    "comments": "",
    "x": 3109.3440551757812,
    "y": 1034.7883319854736,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "e2fb1fc.98e08e",
    "type": "comment",
    "name": "Get other global parameters from network",
    "info": "",
    "comments": "",
    "x": 3080.3438568115234,
    "y": 1126.7882843017578,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "40922023.6161",
    "type": "switchNode",
    "name": "switch access-provider-id",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-provider-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1767.56591796875,
    "y": 1530.232666015625,
    "z": "205403e9.560efc",
    "wires": [
      [
        "dcc5b1ab.d080a"
      ]
    ]
  },
  {
    "id": "dcc5b1ab.d080a",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1954.56591796875,
    "y": 1526.232666015625,
    "z": "205403e9.560efc",
    "wires": [
      [
        "61749b73.8eae04"
      ]
    ]
  },
  {
    "id": "61749b73.8eae04",
    "type": "set",
    "name": "set access-provider-id",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$tmp.ep.parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 2122.56591796875,
    "y": 1526.8326721191406,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "cce7fa52.3ac5b8",
    "type": "switchNode",
    "name": "switch access-client-id",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-client-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1758.565933227539,
    "y": 1573.2431144714355,
    "z": "205403e9.560efc",
    "wires": [
      [
        "17cba761.8a69d9"
      ]
    ]
  },
  {
    "id": "17cba761.8a69d9",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1945.565933227539,
    "y": 1569.2431144714355,
    "z": "205403e9.560efc",
    "wires": [
      [
        "e72fdf36.f1b28"
      ]
    ]
  },
  {
    "id": "e72fdf36.f1b28",
    "type": "set",
    "name": "set access-client-id",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-client-id' value='`$tmp.ep.parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 2113.565933227539,
    "y": 1569.8431205749512,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "afdc2a42.250d98",
    "type": "switchNode",
    "name": "switch access-topology-id",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-topology-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1771.5658779144287,
    "y": 1615.2431454658508,
    "z": "205403e9.560efc",
    "wires": [
      [
        "d336b3c.0b7875"
      ]
    ]
  },
  {
    "id": "d336b3c.0b7875",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1958.5658779144287,
    "y": 1611.2431454658508,
    "z": "205403e9.560efc",
    "wires": [
      [
        "85508473.900a98"
      ]
    ]
  },
  {
    "id": "85508473.900a98",
    "type": "set",
    "name": "set access-topology-id",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$tmp.ep.parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 2126.5658779144287,
    "y": 1611.8431515693665,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "fa8596fd.dc6fb8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1066.1213836669922,
    "y": 1742.3442287445068,
    "z": "205403e9.560efc",
    "wires": [
      [
        "9edea41a.d68a58",
        "abb09171.f6ee",
        "abc114d6.41e528",
        "9b39618e.ffe5f"
      ]
    ]
  },
  {
    "id": "521aa066.c8761",
    "type": "set",
    "name": "set controller data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n",
    "comments": "",
    "x": 1764.56591796875,
    "y": 1896.6771240234375,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "abb09171.f6ee",
    "type": "get-resource",
    "name": "get-resource esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.thirdparty-sdnc-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1328.0658569335938,
    "y": 1955.6771240234375,
    "z": "205403e9.560efc",
    "wires": [
      [
        "b2bcb2cd.da9e",
        "d1f1ad90.96011",
        "bed51f39.f008"
      ]
    ]
  },
  {
    "id": "b2bcb2cd.da9e",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1567.0658569335938,
    "y": 1908.6771240234375,
    "z": "205403e9.560efc",
    "wires": [
      [
        "521aa066.c8761"
      ]
    ]
  },
  {
    "id": "d1f1ad90.96011",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1570.5568237304688,
    "y": 1956.2511596679688,
    "z": "205403e9.560efc",
    "wires": [
      [
        "d02c15ce.c1c438"
      ]
    ]
  },
  {
    "id": "bed51f39.f008",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1565.8898315429688,
    "y": 1997.58447265625,
    "z": "205403e9.560efc",
    "wires": [
      [
        "1dfb5bf0.cbb2c4"
      ]
    ]
  },
  {
    "id": "d02c15ce.c1c438",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 1747.1282348632812,
    "y": 1944.5368957519531,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "1dfb5bf0.cbb2c4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 1753.6623878479004,
    "y": 1993.0236654281616,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "abc114d6.41e528",
    "type": "get-resource",
    "name": "get-resource pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $oof.vpn.access-node-id AND \n\t\t     depth = '0'\"\n        pfx='tmp.aai.pnf' local-only='false' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1274.56591796875,
    "y": 1768.6771240234375,
    "z": "205403e9.560efc",
    "wires": [
      [
        "e5c7f4bb.a977b8",
        "c9ac24e7.49a298",
        "89a637ca.249d28"
      ]
    ]
  },
  {
    "id": "e5c7f4bb.a977b8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1621.5658569335938,
    "y": 1772.6771545410156,
    "z": "205403e9.560efc",
    "wires": [
      [
        "9bb25e1d.4626"
      ]
    ]
  },
  {
    "id": "c9ac24e7.49a298",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1625.0568237304688,
    "y": 1820.2511901855469,
    "z": "205403e9.560efc",
    "wires": [
      [
        "700f50e2.2becf"
      ]
    ]
  },
  {
    "id": "89a637ca.249d28",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1620.3898315429688,
    "y": 1861.5845031738281,
    "z": "205403e9.560efc",
    "wires": [
      [
        "634a1d02.90e474"
      ]
    ]
  },
  {
    "id": "700f50e2.2becf",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 1801.6282348632812,
    "y": 1808.5369262695312,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "634a1d02.90e474",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 1808.1623878479004,
    "y": 1857.0236959457397,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "9bb25e1d.4626",
    "type": "set",
    "name": "set tmp.thirdparty-sdnc-id",
    "xml": "<set>\n<parameter name='tmp.thirdparty-sdnc-id' value=\"`$tmp.aai.pnf.relationship-list.relationship[0].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 1825.5658569335938,
    "y": 1759.6771545410156,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "f371e386.134de",
    "type": "comment",
    "name": "get domain controller information",
    "info": "",
    "comments": "",
    "x": 1319.0697860717773,
    "y": 1734.6810216903687,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "9b39618e.ffe5f",
    "type": "set",
    "name": "set oof.vpn",
    "xml": "<set>\n<parameter name='oof.vpn.' value='`$oof.vpns[$vidx].`' />",
    "comments": "",
    "x": 1256.5658874511719,
    "y": 1695.7881488800049,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  },
  {
    "id": "ab06a549.912008",
    "type": "comment",
    "name": "TODO: Add VPN resource and its relation with SOTN Connectivity resource",
    "info": "",
    "comments": "",
    "x": 1452.0103912353516,
    "y": 2134.6769676208496,
    "z": "205403e9.560efc",
    "wires": [
      
    ]
  }
]
