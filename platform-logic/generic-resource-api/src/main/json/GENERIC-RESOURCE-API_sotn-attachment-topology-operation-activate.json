[
  {
    "id": "71fdb5ef.ee391c",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 101.00390625,
    "y": 29.00390625,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "a4dcfbf6.919dd8"
      ]
    ]
  },
  {
    "id": "a4dcfbf6.919dd8",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 313.00391006469727,
    "y": 101.0039234161377,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "38c2d67f.c0125a"
      ]
    ]
  },
  {
    "id": "38c2d67f.c0125a",
    "type": "method",
    "name": "sotn-attachment-topology-operation-activate",
    "xml": "<method rpc='sotn-attachment-topology-operation-activate' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 301.0040283203125,
    "y": 189.00390625,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "7e11da52.bae034"
      ]
    ]
  },
  {
    "id": "7e11da52.bae034",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 317.0040283203125,
    "y": 744.0041508674622,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "bcb6710f.60491",
        "9de2d686.d43068",
        "e3179f52.9775f",
        "4c953e8a.98233",
        "d89a14d8.c09248",
        "acc294a9.d6b008",
        "99d1fd8d.5ee26",
        "3e40f3a6.82089c",
        "8e9bf1eb.38c9",
        "1c88532f.194fed",
        "e5c9e33d.18a82",
        "944bde78.6e19f",
        "7d0836ce.0f22a8",
        "7b24e33a.f35e9c",
        "3fefcac3.35f3d6",
        "1ffa21d0.0db2ae",
        "be54ff4d.2f71b",
        "174983a1.05755c",
        "7b6608b.bd704f8",
        "437188db.7e7e48",
        "4d587972.d08178"
      ]
    ]
  },
  {
    "id": "bcb6710f.60491",
    "type": "set",
    "name": "set tmp.ar.allotted-resource-id,etc",
    "xml": "<set>\n<parameter name='tmp.ar.allotted-resource-id' value='`$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-id`' />\n<parameter name='tmp.ar.parent-service-instance-id' value='`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id`' />\n\n\n",
    "comments": "",
    "x": 713.9974670410156,
    "y": 142.9973931312561,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "914eea4d.2c70e8",
    "type": "comment",
    "name": "set tmp ar-id to fetch resource from MDSAL",
    "info": "",
    "comments": "",
    "x": 742.9577789306641,
    "y": 107.02918910980225,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "9de2d686.d43068",
    "type": "set",
    "name": "set tmp.ar.self-link",
    "xml": "<set>\n<parameter name='tmp.ar.self-link' value=\"`'restconf/config/GENERIC-RESOURCE-API:connection-attachment-allotted-resources/connection-attachment-allotted-resource/'\n + $tmp.ar.allotted-resource-id\n + '/allotted-resource-data/connection-attachment-topology/'` \" />\n\n",
    "comments": "",
    "x": 667.9974060058594,
    "y": 235.99739837646484,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "d89a14d8.c09248",
    "type": "execute",
    "name": "execute Properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
    "comments": "",
    "outputs": 1,
    "x": 674.2592964172363,
    "y": 323.6641273498535,
    "z": "f572e422.d0cbe8",
    "wires": [
      []
    ]
  },
  {
    "id": "e3179f52.9775f",
    "type": "execute",
    "name": "generate allotted-resource tmp.ar-url",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.allotted-resource-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 721.2593536376953,
    "y": 411.6641311645508,
    "z": "f572e422.d0cbe8",
    "wires": [
      []
    ]
  },
  {
    "id": "e4d2ecfb.e43af",
    "type": "comment",
    "name": "GET connection-attachment-allotted-resource from mdsal",
    "info": "",
    "comments": "",
    "x": 769.8122711181641,
    "y": 510.5425372123718,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "363ab330.de07dc",
    "type": "comment",
    "name": "Used for setting output to API Handler",
    "info": "",
    "comments": "",
    "x": 721.9974365234375,
    "y": 202.997407913208,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "90a03682.af3c68",
    "type": "comment",
    "name": "Obtain different URL, template location etc",
    "info": "For saving resource information to MDSAL & for AAI",
    "comments": "",
    "x": 739.9974021911621,
    "y": 288.8862886428833,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "cdce090c.0a10d8",
    "type": "comment",
    "name": "Used to Get AR by id to MDSAL, same as self-link",
    "info": "",
    "comments": "",
    "x": 765.9974212646484,
    "y": 375.8862476348877,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "1aea27d5.55f278",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1227.6706981658936,
    "y": 560.0038909912109,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "686a2249.e37f5c"
      ]
    ]
  },
  {
    "id": "686a2249.e37f5c",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1371.6707763671875,
    "y": 517.5038089752197,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "798bd260.638b6c"
      ]
    ]
  },
  {
    "id": "798bd260.638b6c",
    "type": "switchNode",
    "name": "switch cr length",
    "xml": "<switch test='`$mdsal-ar.connection-attachment-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1540.5282001495361,
    "y": 515.1229801177979,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "f5569839.8a8b68",
        "69e95f52.c2fae"
      ]
    ]
  },
  {
    "id": "f5569839.8a8b68",
    "type": "other",
    "name": "outcome 1",
    "xml": "<outcome value='1'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1695.8613357543945,
    "y": 487.1228952407837,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "ff8c3d05.911ec"
      ]
    ]
  },
  {
    "id": "ff8c3d05.911ec",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic='true'>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1854.385139465332,
    "y": 485.02774238586426,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "76c0983a.61e258",
        "91d97687.33a0a8",
        "2d05b438.906f6c"
      ]
    ]
  },
  {
    "id": "d20d0063.55c44",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Connection attachment resource not exist\" />\n    \n",
    "comments": "",
    "x": 1794.5230712890625,
    "y": 592.0699768066406,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "62cd6493.f95d4c",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1219.5225009918213,
    "y": 595.0699758529663,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "1151f902.0ffd77"
      ]
    ]
  },
  {
    "id": "1151f902.0ffd77",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1399.5224514007568,
    "y": 595.7365264892578,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "d20d0063.55c44"
      ]
    ]
  },
  {
    "id": "69e95f52.c2fae",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1687.189338684082,
    "y": 546.4032697677612,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "d20d0063.55c44"
      ]
    ]
  },
  {
    "id": "76c0983a.61e258",
    "type": "set",
    "name": "set connection-attachment-ar from get",
    "xml": "<set>\n<parameter name='connection-attachment-ar.' value='$mdsal-ar.connection-attachment-allotted-resource[0].' />\n",
    "comments": "",
    "x": 2101.4485931396484,
    "y": 458.00399446487427,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "2d05b438.906f6c",
    "type": "set",
    "name": "set oper-status",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.request-information.request-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$connection-attachment-ar.allotted-resource-status.rpc-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.svc-request-id`' />\n\n",
    "comments": "",
    "x": 2035.4486236572266,
    "y": 531.4324970245361,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "91d97687.33a0a8",
    "type": "switchNode",
    "name": "switch order-status",
    "xml": "<switch test='`$connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2045.4484024047852,
    "y": 497.0039310455322,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "dde47d53.2b3de",
        "dd069f9.343786"
      ]
    ]
  },
  {
    "id": "dde47d53.2b3de",
    "type": "outcome",
    "name": "outcome Created",
    "xml": "<outcome value='Created'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2281.048484802246,
    "y": 491.0039620399475,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "be7a3c35.2e9a"
      ]
    ]
  },
  {
    "id": "dd069f9.343786",
    "type": "outcome",
    "name": "outcome Other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2274.762924194336,
    "y": 530.4325699806213,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "d6ab6eb5.d4f72"
      ]
    ]
  },
  {
    "id": "be7a3c35.2e9a",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2439.519157409668,
    "y": 491.37961769104004,
    "z": "f572e422.d0cbe8",
    "wires": [
      []
    ]
  },
  {
    "id": "d6ab6eb5.d4f72",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" \n    value=\"`'Existing connection-attachment-allotted-resource with order status of ' + $connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status + '.'`\" />\n",
    "comments": "",
    "x": 2450.670738220215,
    "y": 529.0039691925049,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "d3557a86.d81c98",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:sotn-get-saved-ar-param",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='sotn-get-saved-ar-param' mode='sync' >\n",
    "comments": "",
    "outputs": 1,
    "x": 938.306957244873,
    "y": 642.4975109100342,
    "z": "f572e422.d0cbe8",
    "wires": [
      []
    ]
  },
  {
    "id": "acc294a9.d6b008",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 632.3130569458008,
    "y": 643.5038814544678,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "d3557a86.d81c98"
      ]
    ]
  },
  {
    "id": "fb48a2b6.8809f",
    "type": "comment",
    "name": "GET parent-service-data from mdsal to check existence of other End point",
    "info": "",
    "comments": "",
    "x": 820.00439453125,
    "y": 688.5356588363647,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "854bdb1c.4151f8",
    "type": "for",
    "name": "for pidx..mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[]",
    "xml": "<for index='pidx' start='0' end='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1711.1891021728516,
    "y": 841.0081362724304,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "8a14002.a188f"
      ]
    ]
  },
  {
    "id": "4c953e8a.98233",
    "type": "switchNode",
    "name": "switch mdsal-psd.service-data.provided-allotted-resources_length",
    "xml": "<switch test='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 795.1881256103516,
    "y": 948.7221727371216,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "8c8c6b85.e2fb88",
        "654a7569.63f96c",
        "d45a4e2f.207a4"
      ]
    ]
  },
  {
    "id": "8c8c6b85.e2fb88",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1123.3311462402344,
    "y": 1021.5794467926025,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "4d293e8c.c46d"
      ]
    ]
  },
  {
    "id": "96af6f68.a46f",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1307.458408355713,
    "y": 880.7054557800293,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "854bdb1c.4151f8",
        "2f1b19bd.dd8516"
      ]
    ]
  },
  {
    "id": "8a14002.a188f",
    "type": "switchNode",
    "name": "switch allotted-resource-id",
    "xml": "<switch test=\"`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[$pidx].allotted-resource-id == $tmp.ar.allotted-resource-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2151.3004302978516,
    "y": 838.0079383850098,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "fe53c712.385a18",
        "7f5196b9.988768"
      ]
    ]
  },
  {
    "id": "fe53c712.385a18",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2324.1106452941895,
    "y": 809.4725532531738,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "70dcec65.b22604"
      ]
    ]
  },
  {
    "id": "23bec5b9.27006a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2472.8711166381836,
    "y": 866.3296403884888,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "296483f5.bba8ac"
      ]
    ]
  },
  {
    "id": "296483f5.bba8ac",
    "type": "set",
    "name": "set tmp.pidx and ptx.consumed-ar",
    "xml": "<set>\n<parameter name='tmp.pidx' value='`$pidx`' />\n<parameter name='tmp.provided-ar.' value='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[$pidx].`' />\n<parameter name='tmp.found-in-ar' value='true' />\n<parameter name='tmp.ep-available' value='true' />",
    "comments": "",
    "x": 2707.728542327881,
    "y": 864.9011726379395,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "eff683.536c998",
    "type": "comment",
    "name": "Check existence of other AR in parent service data",
    "info": "Check if other allotted resource is available.",
    "comments": "",
    "x": 742.9665641784668,
    "y": 853.8968677520752,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "654a7569.63f96c",
    "type": "other",
    "name": "outcome 1",
    "xml": "<outcome value='1'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1137.9836158752441,
    "y": 960.6811304092407,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "302c20b.add4fe"
      ]
    ]
  },
  {
    "id": "4d293e8c.c46d",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: End points not available\" />\n    \n",
    "comments": "",
    "x": 1282.9834938049316,
    "y": 1020.68137550354,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "d45a4e2f.207a4",
    "type": "other",
    "name": "outcome 2",
    "xml": "<outcome value='2'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1132.9834289550781,
    "y": 881.6811561584473,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "96af6f68.a46f"
      ]
    ]
  },
  {
    "id": "70dcec65.b22604",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2482.0948600769043,
    "y": 808.6812963485718,
    "z": "f572e422.d0cbe8",
    "wires": [
      []
    ]
  },
  {
    "id": "7f5196b9.988768",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2331.0945014953613,
    "y": 865.6811561584473,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "23bec5b9.27006a"
      ]
    ]
  },
  {
    "id": "2f1b19bd.dd8516",
    "type": "switchNode",
    "name": "switch tmp.found-in-ar",
    "xml": "<switch test='`$tmp.found-in-ar`'>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1519.9834060668945,
    "y": 934.4589738845825,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "440a957.d743e6c"
      ]
    ]
  },
  {
    "id": "440a957.d743e6c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1690.98344039917,
    "y": 935.5701951980591,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "5efb8b1a.4feab4"
      ]
    ]
  },
  {
    "id": "5efb8b1a.4feab4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1839.9835357666016,
    "y": 935.5701942443848,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "c0afb39.32e2e5",
        "5dc504a1.e9ac7c"
      ]
    ]
  },
  {
    "id": "9070ad9c.77006",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2586.101360321045,
    "y": 951.7990484237671,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "9133cba5.4f04f8"
      ]
    ]
  },
  {
    "id": "f1e10286.e13ce",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2577.9531631469727,
    "y": 986.8651332855225,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "2fe95be.19995a4"
      ]
    ]
  },
  {
    "id": "d318e2e5.e3f4b",
    "type": "switchNode",
    "name": "switch mdsal-psd.service-data.networks_length",
    "xml": "<switch test='`$mdsal-psd.service-data.networks.network_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1583.316909790039,
    "y": 1035.903814315796,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "fb735c40.86a7",
        "aa83f3b0.457d9"
      ]
    ]
  },
  {
    "id": "aa83f3b0.457d9",
    "type": "other",
    "name": "outcome 1",
    "xml": "<outcome value='1'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1847.3167572021484,
    "y": 1015.7925605773926,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "72fb688a.22fca8"
      ]
    ]
  },
  {
    "id": "fb735c40.86a7",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1837.3168182373047,
    "y": 1063.792531967163,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "48e23dfc.00df44"
      ]
    ]
  },
  {
    "id": "48e23dfc.00df44",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Incorrect state found more then 1 network\" />\n    \n",
    "comments": "",
    "x": 1975.9691619873047,
    "y": 1065.894292831421,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "4cc4d60b.d3fe58",
    "type": "set",
    "name": "set tmp.network.",
    "xml": "<set>\n<parameter name='tmp.network.' value='`$mdsal-psd.service-data.networks.network[0].`' />\n\n\n",
    "comments": "",
    "x": 2208.761615753174,
    "y": 1016.7927303314209,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "302c20b.add4fe",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1305.4279251098633,
    "y": 959.7923974990845,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "d318e2e5.e3f4b"
      ]
    ]
  },
  {
    "id": "72fb688a.22fca8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2006.0945281982422,
    "y": 1018.7923946380615,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "4cc4d60b.d3fe58",
        "25b69a7a.ac8696"
      ]
    ]
  },
  {
    "id": "25b69a7a.ac8696",
    "type": "for",
    "name": "for nidx..tmp.network.network-data.network-request-input.network...[]",
    "xml": "<for index='nidx' start='0' end='`$tmp.network.network-data.network-request-input.network-input-parameters.param_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 2369.094566345215,
    "y": 1064.7925491333008,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "68a05136.75bd6"
      ]
    ]
  },
  {
    "id": "68a05136.75bd6",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2415.650634765625,
    "y": 1295.7923583984375,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "1e5253c7.f66bcc",
        "2711bfd5.bb13c",
        "4cc35d02.ba63e4",
        "9ba9596e.d4c3b8",
        "5e2992ce.ffddac",
        "3e397edc.2b0ba2",
        "58b84e0.2006ab4",
        "6352ab9f.ed06e4",
        "94b2e538.7a3948",
        "a49180b4.50921"
      ]
    ]
  },
  {
    "id": "1e5253c7.f66bcc",
    "type": "switchNode",
    "name": "switch access-node-id",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'access-node-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 2692.1608505249023,
    "y": 1137.8031058311462,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "1ce46f.6cc75b92"
      ]
    ]
  },
  {
    "id": "1ce46f.6cc75b92",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2881.1604766845703,
    "y": 1139.8029704093933,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "11913fa0.ee7c8"
      ]
    ]
  },
  {
    "id": "11913fa0.ee7c8",
    "type": "set",
    "name": "set tmp.found-in-network tmp.ep-available",
    "xml": "<set>\n<parameter name='tmp.found-in-network' value='true' />\n<parameter name='tmp.ep-available' value='true' />",
    "comments": "",
    "x": 3134.1606521606445,
    "y": 1139.4030165672302,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "2711bfd5.bb13c",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 2666.150302886963,
    "y": 1511.7923970222473,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "7d0836ce.0f22a8",
    "type": "switchNode",
    "name": "switch tmp.ep-available",
    "xml": "<switch test='`$tmp.ep-available`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 658.3167266845703,
    "y": 1144.236707687378,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "5ff96c29.dea884",
        "14bf09c.9f22cf6"
      ]
    ]
  },
  {
    "id": "14bf09c.9f22cf6",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 876.9834461212158,
    "y": 1193.5700645446777,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "65b9d457.f4013c"
      ]
    ]
  },
  {
    "id": "5ff96c29.dea884",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 881.8722476959229,
    "y": 1102.570125579834,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "f734093b.c92d98"
      ]
    ]
  },
  {
    "id": "f734093b.c92d98",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1028.8722438812256,
    "y": 1104.4589385986328,
    "z": "f572e422.d0cbe8",
    "wires": [
      []
    ]
  },
  {
    "id": "65b9d457.f4013c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1047.094533920288,
    "y": 1191.5700225830078,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "3aa9c18e.f5c34e",
        "eee6797c.367168",
        "b5a54c65.79307"
      ]
    ]
  },
  {
    "id": "3aa9c18e.f5c34e",
    "type": "switchNode",
    "name": "switch tmp.found-in-ar",
    "xml": "<switch test='`$tmp.found-in-ar`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1273.2055473327637,
    "y": 1158.5700225830078,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "91470982.6fe008",
        "56d54603.887748"
      ]
    ]
  },
  {
    "id": "91470982.6fe008",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1468.6499938964844,
    "y": 1136.570083618164,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "d888512b.fdc66"
      ]
    ]
  },
  {
    "id": "56d54603.887748",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1465.64990234375,
    "y": 1184.570068359375,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "9449d929.8730a8"
      ]
    ]
  },
  {
    "id": "d888512b.fdc66",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1656.2056579589844,
    "y": 1133.570083618164,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "f7e0eb58.4dfe68"
      ]
    ]
  },
  {
    "id": "9449d929.8730a8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1653.20556640625,
    "y": 1183.570068359375,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "99367ee1.bf07c"
      ]
    ]
  },
  {
    "id": "aeb9ebcb.716b68",
    "type": "comment",
    "name": "GET connection-attachment-ar to store AR data from mdsal",
    "info": "",
    "comments": "",
    "x": 2165.4767417907715,
    "y": 420.50785398483276,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "622f430.99bbebc",
    "type": "comment",
    "name": "Set source end point",
    "info": "",
    "comments": "",
    "x": 656.9766235351562,
    "y": 477.2578458786011,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "99d1fd8d.5ee26",
    "type": "set",
    "name": "set tmp.ar.parent-service-instance-id",
    "xml": "<set>\n<parameter name='tmp.ar.parent-service-instance-id' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id` \" />\n\n",
    "comments": "",
    "x": 705.9727325439453,
    "y": 718.0039968490601,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "6e0e6040.75061",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1065.972885131836,
    "y": 789.0039834976196,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "3c4902f3.de6f0e"
      ]
    ]
  },
  {
    "id": "f46164a.c819098",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1057.8246879577637,
    "y": 824.070068359375,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "d66c61d6.d2d15"
      ]
    ]
  },
  {
    "id": "d66c61d6.d2d15",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Parent service data not available\" />\n    \n",
    "comments": "",
    "x": 1203.9734687805176,
    "y": 823.3374795913696,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "3c4902f3.de6f0e",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1196.9729804992676,
    "y": 789.0040445327759,
    "z": "f572e422.d0cbe8",
    "wires": [
      []
    ]
  },
  {
    "id": "2fe95be.19995a4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN provided attachment resource not found\" />\n    \n",
    "comments": "",
    "x": 2727.973213195801,
    "y": 987.00417137146,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "9133cba5.4f04f8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2712.9733352661133,
    "y": 954.0041561126709,
    "z": "f572e422.d0cbe8",
    "wires": [
      []
    ]
  },
  {
    "id": "3e40f3a6.82089c",
    "type": "set",
    "name": "set tmp.found-in-ar tmp.found-in-network tmp.ep-available to false",
    "xml": "<set>\n<parameter name='tmp.found-in-ar' value='false' />\n<parameter name='tmp.found-in-network' value='false' />\n<parameter name='tmp.ep-available' value='false' />",
    "comments": "",
    "x": 791.9726715087891,
    "y": 891.0039710998535,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "d08360b4.a1453",
    "type": "comment",
    "name": "If other EP exists set destination end point",
    "info": "Check if other allotted resource is available.",
    "comments": "",
    "x": 708.9726715087891,
    "y": 1069.0039196014404,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "fb0304f9.edda38",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1448.9727935791016,
    "y": 1396.0042009353638,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "ca635ac.00581a8",
        "8de39312.347fb",
        "11375b15.665f65",
        "91661817.646278",
        "7c0f4fd3.14a11",
        "f4869f2b.93faf",
        "2ef0fdbb.10c862",
        "1c439fe6.f9953"
      ]
    ]
  },
  {
    "id": "ca635ac.00581a8",
    "type": "switchNode",
    "name": "switch access-node-id",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-node-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1691.4830951690674,
    "y": 1266.014597415924,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "f6ba8f8e.ec15f"
      ]
    ]
  },
  {
    "id": "8de39312.347fb",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 1664.4730472564697,
    "y": 1571.0045609474182,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "11375b15.665f65",
    "type": "switchNode",
    "name": "switch access-ltp-id",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-ltp-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1682.9729251861572,
    "y": 1309.7821288108826,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "d04e1e98.91169"
      ]
    ]
  },
  {
    "id": "91661817.646278",
    "type": "switchNode",
    "name": "switch clientSignal",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'clientSignal'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1676.9729633331299,
    "y": 1355.782175540924,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "32e19c3f.a4d564"
      ]
    ]
  },
  {
    "id": "7c0f4fd3.14a11",
    "type": "switchNode",
    "name": "switch cVLAN",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'cVLAN'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1660.9624652862549,
    "y": 1394.771677494049,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "612995ff.c9babc"
      ]
    ]
  },
  {
    "id": "f6ba8f8e.ec15f",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1869.1950092315674,
    "y": 1266.6709694862366,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "fd6c0300.a0664"
      ]
    ]
  },
  {
    "id": "fd6c0300.a0664",
    "type": "set",
    "name": "set dst-access-node-id",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-node-id' value='`$tmp.ep.parameters.param[$idx].value`' />",
    "comments": "",
    "x": 2044.1950092315674,
    "y": 1266.270944595337,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "d04e1e98.91169",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1864.6848773956299,
    "y": 1309.438425540924,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "ddeced72.ad9c1"
      ]
    ]
  },
  {
    "id": "32e19c3f.a4d564",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1864.6848773956299,
    "y": 1355.438425540924,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "4a0443c8.75617c"
      ]
    ]
  },
  {
    "id": "612995ff.c9babc",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1864.6743793487549,
    "y": 1394.4280495643616,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "d1906b8.b891d98"
      ]
    ]
  },
  {
    "id": "eee6797c.367168",
    "type": "for",
    "name": "for idx..tmp.ep.parameters[]",
    "xml": "<for index='idx' start='0' end='`$tmp.ep.parameters.param_length`'>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1301.97265625,
    "y": 1284.00390625,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "fb0304f9.edda38"
      ]
    ]
  },
  {
    "id": "f7e0eb58.4dfe68",
    "type": "set",
    "name": "set tmp.ep.parameters",
    "xml": "<set>\n<parameter name='tmp.ep.parameters.' value='`$mdsal-other-ar.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.`' />\n",
    "comments": "",
    "x": 1867.9727115631104,
    "y": 1133.0039806365967,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "99367ee1.bf07c",
    "type": "set",
    "name": "set tmp.ep.parameters",
    "xml": "<set>\n<parameter name='tmp.ep.parameters.' value='`$tmp.network.network-data.network-request-input.network-input-parameters.`' />\n",
    "comments": "",
    "x": 1864.972620010376,
    "y": 1179.0039653778076,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "ddeced72.ad9c1",
    "type": "set",
    "name": "set dst-access-node-id",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$tmp.ep.parameters.param[$idx].value`' />",
    "comments": "",
    "x": 2041.9728412628174,
    "y": 1309.0042214393616,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "4a0443c8.75617c",
    "type": "set",
    "name": "set dst-clientSignal",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.clientSignal' value='`$tmp.ep.parameters.param[$idx].value`' />",
    "comments": "",
    "x": 2035.9728412628174,
    "y": 1353.0042214393616,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "d1906b8.b891d98",
    "type": "set",
    "name": "set dst-cVLAN",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.cVLAN' value='`$tmp.ep.parameters.param[$idx].value`' />",
    "comments": "",
    "x": 2026.9728412628174,
    "y": 1392.0042214393616,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "a9ff720d.1dabc",
    "type": "comment",
    "name": "Get controller info and send request",
    "info": "",
    "comments": "",
    "x": 1908.972713470459,
    "y": 1863.004059791565,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "bef60c61.8dd24",
    "type": "execute",
    "name": "execute RestApiCallNode Create ethernet Service",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + 'restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1961.97314453125,
    "y": 2006.0048599243164,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "2fd31fcd.ca56b",
        "65199c5e.c49694"
      ]
    ]
  },
  {
    "id": "2fd31fcd.ca56b",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2227.972869873047,
    "y": 2035.0049829483032,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "ff977f1a.ff86a"
      ]
    ]
  },
  {
    "id": "ff977f1a.ff86a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 2375.972869873047,
    "y": 2033.0048608779907,
    "z": "f572e422.d0cbe8",
    "wires": [
      []
    ]
  },
  {
    "id": "93cd8069.9f63",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
    "comments": "",
    "x": 2357.972900390625,
    "y": 1980.0049209594727,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "65199c5e.c49694",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2218.9728088378906,
    "y": 1980.0049209594727,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "93cd8069.9f63"
      ]
    ]
  },
  {
    "id": "646b5327.7ab30c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 880.7350807189941,
    "y": 2086.9576148986816,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "7382f6e8.cf2f28"
      ]
    ]
  },
  {
    "id": "7382f6e8.cf2f28",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"AAI failed\" />\n",
    "comments": "",
    "x": 1047.2589015960693,
    "y": 2113.5766220092773,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "244683aa.b2e15c",
    "type": "failure",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 882.8303089141846,
    "y": 2134.719457626343,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "7382f6e8.cf2f28"
      ]
    ]
  },
  {
    "id": "e28c15e2.7e54a8",
    "type": "comment",
    "name": "Save Resource to AAI",
    "info": "",
    "comments": "",
    "x": 654.7827243804932,
    "y": 2075.3067779541016,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "7b6608b.bd704f8",
    "type": "set",
    "name": "set output to api handler",
    "xml": "<set>\n<parameter name='allotted-resource-id' value='`$tmp.ar.allotted-resource-id`' />\n<parameter name='connection-attachment-object-path' value=\"`$tmp.ar.self-link`\"/>\n<parameter name='service-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $connection-attachment-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n \n",
    "comments": "",
    "x": 669.5504207611084,
    "y": 1996.8322591781616,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "4d587972.d08178",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 629.9635925292969,
    "y": 2182.4480476379395,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "174983a1.05755c",
    "type": "execute",
    "name": "execute RestApiCallNode - PUT AR by id",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.sotn-attachment.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 722.2825031280518,
    "y": 1921.4731121063232,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "9285fa86.a961b8",
        "962e1208.5465d",
        "edd09ec.e9ee86"
      ]
    ]
  },
  {
    "id": "9285fa86.a961b8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 976.9239253997803,
    "y": 1965.8045063018799,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "67dec81d.0da728"
      ]
    ]
  },
  {
    "id": "962e1208.5465d",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 978.9239482879639,
    "y": 1924.3044704422355,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "67dec81d.0da728"
      ]
    ]
  },
  {
    "id": "edd09ec.e9ee86",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 982.6740322113037,
    "y": 1875.6616230010986,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "7cf3383c.d147f8"
      ]
    ]
  },
  {
    "id": "67dec81d.0da728",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for connection-attachment-allotted-resource\" />\n",
    "comments": "",
    "x": 1137.67405128479,
    "y": 1944.054536819458,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "7cf3383c.d147f8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1110.3299770355225,
    "y": 1877.8537912368774,
    "z": "f572e422.d0cbe8",
    "wires": [
      []
    ]
  },
  {
    "id": "7b24e33a.f35e9c",
    "type": "set",
    "name": "set ar-data",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-status.action' value=\"`$connection-attachment-topology-operation-input.request-information.request-action` \" />\n<parameter name='connection-attachment-ar.allotted-resource-status.rpc-name' value=\"connection-attachment-topology-operation\" />\n<parameter name='connection-attachment-ar.allotted-resource-status.rpc-action' value=\"`$connection-attachment-topology-operation-input.sdnc-request-header.svc-action` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.request-information.' value=\"`$connection-attachment-topology-operation-input.request-information.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.' value=\"`$connection-attachment-topology-operation-input.sdnc-request-header.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.service-information.' value=\"`$connection-attachment-topology-operation-input.service-information.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.allotted-resource-information.' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.` \" />",
    "comments": "",
    "x": 624.4961185455322,
    "y": 1755.8540132045746,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "1ffa21d0.0db2ae",
    "type": "execute",
    "name": "execute getTime",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='setTime' >\n    <parameter name=\"outputPath\" value=\"tmp.current-time\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 641.78196144104,
    "y": 1828.4736108779907,
    "z": "f572e422.d0cbe8",
    "wires": [
      []
    ]
  },
  {
    "id": "be54ff4d.2f71b",
    "type": "set",
    "name": "set allotted-resource-oper-status",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status' value='Active' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$connection-attachment-topology-operation-input.request-information.request-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$connection-attachment-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$connection-attachment-topology-operation-input.sdnc-request-header.svc-request-id`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.create-timestamp' value='`$tmp.current-time`' />\n",
    "comments": "",
    "x": 691.7690410614014,
    "y": 1865.4246912002563,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "3fefcac3.35f3d6",
    "type": "set",
    "name": "set model-data",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.connection-attachment-topology.onap-model-information.' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.` \" />",
    "comments": "",
    "x": 638.3376598358154,
    "y": 1795.028663635254,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "82a75000.282d4",
    "type": "comment",
    "name": "Prepare data for allotted-resource addition to MDSAL",
    "info": "This will add to allotted-resource which is present inside service.",
    "comments": "",
    "x": 751.67112159729,
    "y": 1716.0286157131195,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "53f12dd9.5187b4",
    "type": "comment",
    "name": "Add to allotted-resources in mdsal",
    "info": "",
    "comments": "",
    "x": 693.2509479522705,
    "y": 1683.4419174194336,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "437188db.7e7e48",
    "type": "update",
    "name": "update AAI allotted-resource",
    "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"allotted-resource\" \n\t\tkey=\"customer.global-customer-id = $connection-attachment-topology-operation-input.service-information.global-customer-id AND\n\t\t\tservice-subscription.service-type = $connection-attachment-topology-operation-input.service-information.subscription-service-type AND\n\t\t\tservice-instance.service-instance-id = $connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id AND\n\t\t\tallotted-resource.id = $tmp.ar.allotted-resource-id\"\n        pfx='pfx' local-only='false' force='false'>\n\t<parameter name=\"description\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-type`\" />\n\t<parameter name=\"selflink\" value=\"`$tmp.ar.self-link`\" />\n\t<parameter name=\"model-invariant-id\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.model-invariant-uuid`\" />\n\t<parameter name=\"model-version-id\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.model-uuid`\" />\n\t<parameter name=\"operational-status\" value=\"Active\" />\n",
    "comments": "",
    "outputs": 1,
    "x": 681.2270030975342,
    "y": 2112.7589206695557,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "646b5327.7ab30c",
        "244683aa.b2e15c"
      ]
    ]
  },
  {
    "id": "291b9285.0c13be",
    "type": "execute",
    "name": "execute RestApiCallNode getPath from OOF",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.oof-getpath.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.oof.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.oof.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1489.976963043213,
    "y": 1675.2585725784302,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "5a86e66f.e53618",
        "3c1bf87c.4433b8"
      ]
    ]
  },
  {
    "id": "5a86e66f.e53618",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1729.9771041870117,
    "y": 1699.258542060852,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "189e4feb.bb9fb"
      ]
    ]
  },
  {
    "id": "1b7ba0b0.7acd5f",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing OOF api\" />\n",
    "comments": "",
    "x": 1868.977138519287,
    "y": 1648.2586336135864,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "3c1bf87c.4433b8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1728.9768905639648,
    "y": 1648.258632659912,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "1b7ba0b0.7acd5f"
      ]
    ]
  },
  {
    "id": "ca2da24.112da6",
    "type": "comment",
    "name": "Get VPNs from OOF",
    "info": "",
    "comments": "",
    "x": 1475.980884552002,
    "y": 1642.2625722885132,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "35dc5eea.c22982",
    "type": "for",
    "name": "for vidx..oof.vpns_length[]",
    "xml": "<for index='vidx' start='0' end='`$oof.vpns_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 1442.9766845703125,
    "y": 1780.50830078125,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "5b3e80e8.5499a"
      ]
    ]
  },
  {
    "id": "1d05a69.0912359",
    "type": "comment",
    "name": "Loop through VPN and configure them",
    "info": "",
    "comments": "",
    "x": 1472.977138519287,
    "y": 1743.0086650848389,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "4cc35d02.ba63e4",
    "type": "switchNode",
    "name": "switch name",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'name'`\">\n                \n",
    "comments": "",
    "outputs": 1,
    "x": 2669.760986328125,
    "y": 1229.125732421875,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "e1f770b9.f06f4"
      ]
    ]
  },
  {
    "id": "e1f770b9.f06f4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2858.760955810547,
    "y": 1229.125717639923,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "b1436c53.ab70a"
      ]
    ]
  },
  {
    "id": "b1436c53.ab70a",
    "type": "set",
    "name": "set etht-svc-name & bandwidth-profile-name",
    "xml": "<set>\n<parameter name='prop.global.sotn.etht-svc-name' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n<parameter name='prop.global.sotn.bandwidth-profile-name' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
    "comments": "",
    "x": 3099.76127243042,
    "y": 1228.7257723808289,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "9ba9596e.d4c3b8",
    "type": "switchNode",
    "name": "switch description",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'description'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2682.6008644104004,
    "y": 1264.1258273124695,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "67295afb.f71c14"
      ]
    ]
  },
  {
    "id": "67295afb.f71c14",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2857.600929260254,
    "y": 1266.1258130073547,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "4b6f6d02.f84c14"
      ]
    ]
  },
  {
    "id": "4b6f6d02.f84c14",
    "type": "set",
    "name": "set etht-svc-descr",
    "xml": "<set>\n<parameter name='prop.global.sotn.etht-svc-descr' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
    "comments": "",
    "x": 3013.9342460632324,
    "y": 1263.5868878364563,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "5e2992ce.ffddac",
    "type": "switchNode",
    "name": "switch tenantId",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'tenantId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2677.983127593994,
    "y": 1297.4592175483704,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "d0c0f377.60187"
      ]
    ]
  },
  {
    "id": "d0c0f377.60187",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2855.9831314086914,
    "y": 1301.4590954780579,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "69518e0b.8fe3f"
      ]
    ]
  },
  {
    "id": "69518e0b.8fe3f",
    "type": "set",
    "name": "set tenantId",
    "xml": "<set>\n<parameter name='prop.global.sotn.tenantId' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
    "comments": "",
    "x": 2993.9833183288574,
    "y": 1298.0590710639954,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "58b84e0.2006ab4",
    "type": "switchNode",
    "name": "switch CIR",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'CIR'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2660.822727203369,
    "y": 1370.4591727256775,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "169356ed.0d5769"
      ]
    ]
  },
  {
    "id": "169356ed.0d5769",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2855.8227920532227,
    "y": 1371.4591727256775,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "230170f6.0d498"
      ]
    ]
  },
  {
    "id": "230170f6.0d498",
    "type": "set",
    "name": "set cir",
    "xml": "<set>\n<parameter name='prop.sotn.cir' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
    "comments": "",
    "x": 2980.15629196167,
    "y": 1369.920247554779,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "3e397edc.2b0ba2",
    "type": "switchNode",
    "name": "switch vpnType",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'vpnType'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2675.131015777588,
    "y": 1333.236882686615,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "db6c357b.896278"
      ]
    ]
  },
  {
    "id": "db6c357b.896278",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2857.131202697754,
    "y": 1336.236867427826,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "70158969.098b28"
      ]
    ]
  },
  {
    "id": "70158969.098b28",
    "type": "set",
    "name": "set vpnType",
    "xml": "<set>\n<parameter name='prop.global.sotn.vpnType' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
    "comments": "",
    "x": 2993.464946746826,
    "y": 1332.6981091499329,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "6352ab9f.ed06e4",
    "type": "switchNode",
    "name": "switch EIR",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'EIR'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2656.1130714416504,
    "y": 1404.1570801734924,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "a120391a.097ab8"
      ]
    ]
  },
  {
    "id": "a120391a.097ab8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2856.1133193969727,
    "y": 1407.1570191383362,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "9a542dbe.f2741"
      ]
    ]
  },
  {
    "id": "9a542dbe.f2741",
    "type": "set",
    "name": "set eir",
    "xml": "<set>\n<parameter name='prop.global.sotn.eir' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
    "comments": "",
    "x": 2979.4469413757324,
    "y": 1406.6180787086487,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "94b2e538.7a3948",
    "type": "switchNode",
    "name": "switch color-aware",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'color-aware'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2681.113681793213,
    "y": 1438.1569590568542,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "a2cb850a.579278"
      ]
    ]
  },
  {
    "id": "a2cb850a.579278",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2852.1135025024414,
    "y": 1444.1568975448608,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "b252744c.e11418"
      ]
    ]
  },
  {
    "id": "b252744c.e11418",
    "type": "set",
    "name": "set colorAware",
    "xml": "<set>\n<parameter name='prop.global.sotn.colorAware' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
    "comments": "",
    "x": 3000.44681930542,
    "y": 1444.6181101799011,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "a49180b4.50921",
    "type": "switchNode",
    "name": "switch coupling-flag",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'coupling-flag'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2683.1136207580566,
    "y": 1474.1570210456848,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "cce1d743.92d488"
      ]
    ]
  },
  {
    "id": "cce1d743.92d488",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2855.1135025024414,
    "y": 1483.1569905281067,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "d103f570.7038a8"
      ]
    ]
  },
  {
    "id": "d103f570.7038a8",
    "type": "set",
    "name": "set couplingFlag",
    "xml": "<set>\n<parameter name='prop.global.sotn.couplingFlag' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
    "comments": "",
    "x": 3008.44681930542,
    "y": 1483.6181111335754,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "380a1490.c1d42c",
    "type": "comment",
    "name": "Check if other EP exists in SOTNConnectionResource",
    "info": "",
    "comments": "",
    "x": 2814.316650390625,
    "y": 1092.7923583984375,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "b6e15066.371d9",
    "type": "comment",
    "name": "Get other global parameters from network",
    "info": "",
    "comments": "",
    "x": 2750.31640625,
    "y": 1178.7923583984375,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "f4869f2b.93faf",
    "type": "switchNode",
    "name": "switch access-provider-id",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-provider-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1698.5387592315674,
    "y": 1440.2368874549866,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "2c3cec5f.b7ba94"
      ]
    ]
  },
  {
    "id": "2c3cec5f.b7ba94",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1885.5387592315674,
    "y": 1436.2368874549866,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "7bc78877.3a9018"
      ]
    ]
  },
  {
    "id": "7bc78877.3a9018",
    "type": "set",
    "name": "set access-provider-id",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$tmp.ep.parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 2053.5387592315674,
    "y": 1436.8368935585022,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "2ef0fdbb.10c862",
    "type": "switchNode",
    "name": "switch access-client-id",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-client-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1689.5387744903564,
    "y": 1483.2473359107971,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "1939faad.f5cad5"
      ]
    ]
  },
  {
    "id": "1939faad.f5cad5",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1876.5387744903564,
    "y": 1479.2473359107971,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "4b55b2c6.c0f2cc"
      ]
    ]
  },
  {
    "id": "4b55b2c6.c0f2cc",
    "type": "set",
    "name": "set access-client-id",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-client-id' value='`$tmp.ep.parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 2044.5387744903564,
    "y": 1479.8473420143127,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "1c439fe6.f9953",
    "type": "switchNode",
    "name": "switch access-topology-id",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-topology-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1702.538719177246,
    "y": 1525.2473669052124,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "bf0d2026.36af4"
      ]
    ]
  },
  {
    "id": "bf0d2026.36af4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1889.538719177246,
    "y": 1521.2473669052124,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "691ba679.47dde8"
      ]
    ]
  },
  {
    "id": "691ba679.47dde8",
    "type": "set",
    "name": "set access-topology-id",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$tmp.ep.parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 2057.538719177246,
    "y": 1521.847373008728,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "5b3e80e8.5499a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1648.0940551757812,
    "y": 1778.3482403755188,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "6dc1e6c9.edcf38",
        "62dcc449.56377c",
        "7cbb5c9b.2206c4",
        "8d9b4b24.5f21c8",
        "f7de6f45.6e5c2",
        "dc7dbda5.64c6",
        "247b18c6.efdc18",
        "2f1e05f0.cf59fa",
        "e52e5e73.18fae",
        "bef60c61.8dd24"
      ]
    ]
  },
  {
    "id": "8923d936.d310b8",
    "type": "set",
    "name": "set controller data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n",
    "comments": "",
    "x": 2294.538787841797,
    "y": 1858.6815524101257,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "e52e5e73.18fae",
    "type": "get-resource",
    "name": "get-resource esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.thirdparty-sdnc-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1911.0386962890625,
    "y": 1895.6814918518066,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "db4522f9.552d3",
        "2e004670.9e10ba",
        "ed9340a2.d89cf"
      ]
    ]
  },
  {
    "id": "db4522f9.552d3",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2131.038631439209,
    "y": 1859.6814608573914,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "8923d936.d310b8"
      ]
    ]
  },
  {
    "id": "2e004670.9e10ba",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2140.529571533203,
    "y": 1900.2554669380188,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "1c9f3529.87ef7b"
      ]
    ]
  },
  {
    "id": "ed9340a2.d89cf",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2135.862548828125,
    "y": 1936.5887799263,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "4cf07d2c.fa2904"
      ]
    ]
  },
  {
    "id": "1c9f3529.87ef7b",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 2287.1009216308594,
    "y": 1896.5412936210632,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "4cf07d2c.fa2904",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 2290.6351928710938,
    "y": 1938.0279278755188,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "2f1e05f0.cf59fa",
    "type": "get-resource",
    "name": "get-resource pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $oof.vpn.access-node-id AND \n\t\t     depth = '0'\"\n        pfx='tmp.aai.pnf' local-only='false' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1856.538589477539,
    "y": 1804.6811356544495,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "80d9d73d.c15ea8",
        "a5203f54.f1d7c",
        "e17ef46d.4c8f98"
      ]
    ]
  },
  {
    "id": "80d9d73d.c15ea8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2038.5386352539062,
    "y": 1749.681245803833,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "1d22105b.8b025"
      ]
    ]
  },
  {
    "id": "a5203f54.f1d7c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2039.0295372009277,
    "y": 1787.2553424835205,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "f09a4d93.ac521"
      ]
    ]
  },
  {
    "id": "e17ef46d.4c8f98",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2030.362548828125,
    "y": 1820.5887174606323,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "be872ee0.2958e"
      ]
    ]
  },
  {
    "id": "f09a4d93.ac521",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 2186.601161956787,
    "y": 1786.5412311553955,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "be872ee0.2958e",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 2184.1351928710938,
    "y": 1820.027865409851,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "1d22105b.8b025",
    "type": "set",
    "name": "set tmp.thirdparty-sdnc-id",
    "xml": "<set>\n<parameter name='tmp.thirdparty-sdnc-id' value=\"`$tmp.aai.pnf.relationship-list.relationship[0].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 2223.5386352539062,
    "y": 1748.6813678741455,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "e1153afb.7b83f8",
    "type": "comment",
    "name": "get domain controller information",
    "info": "",
    "comments": "",
    "x": 1907.0425033569336,
    "y": 1771.6850910186768,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "247b18c6.efdc18",
    "type": "set",
    "name": "set oof.vpn",
    "xml": "<set>\n<parameter name='oof.vpn.' value='`$oof.vpns[$vidx].`' />",
    "comments": "",
    "x": 1868.538589477539,
    "y": 1725.7922191619873,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "62dcc449.56377c",
    "type": "save",
    "name": "save VPN resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.vpnName' >\n<parameter name='vpn-id' value='`$tmp.vpnName`' />\n<parameter name='vpn-name' value='`$tmp.vpnName`' />\n<parameter name='access-provider-id' value='`$oof.vpn.access-provider-id`' />\n<parameter name='access-client-id' value='`$oof.vpn.access-client-id`' />\n<parameter name='access-topology-id' value='`$oof.vpn.access-topology-id`' />\n<parameter name='src-access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='src-access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />\n<parameter name='dst-access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='dst-access-ltp-id' value='`$oof.vpn.dst-access-ltp-id`' />\n<parameter name='cvlan-tag-entry' value='`$prop.connection-attachment.cVLAN`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='configuration-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />",
    "comments": "",
    "outputs": 1,
    "x": 1887.004005432129,
    "y": 2142.7546215057373,
    "z": "f572e422.d0cbe8",
    "wires": [
      []
    ]
  },
  {
    "id": "7cbb5c9b.2206c4",
    "type": "set",
    "name": "set tmp.vpnName",
    "xml": "<set>\n<parameter name='tmp.vpnName' value=\"`$oof.vpn.access-node-id + '-' + $prop.global.sotn.etht-svc-name`\" />",
    "comments": "",
    "x": 1863.504005432129,
    "y": 2095.2543182373047,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "8d9b4b24.5f21c8",
    "type": "save",
    "name": "save connectivity relationship in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $mdsal-psd.networks.network[0].network-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$mdsal-psd.networks.network[0].network-id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1922.004005432129,
    "y": 2187.7543773651123,
    "z": "f572e422.d0cbe8",
    "wires": [
      []
    ]
  },
  {
    "id": "9bc44d11.0b0d9",
    "type": "comment",
    "name": "save vpn and its relation to AAI",
    "info": "",
    "comments": "",
    "x": 1905.0042037963867,
    "y": 2056.754587173462,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "6dc1e6c9.edcf38",
    "type": "set",
    "name": "set src-ltpId dst-ltpId",
    "xml": "<set>\n<parameter name='src-ltpId' value=\"`'nodeId-' + $oof.vpn.access-node-id + '-ltpId-' + $oof.vpn.src-access-ltp-id`\" />\n<parameter name='dst-ltpId' value=\"`'nodeId-' + $oof.vpn.access-node-id + '-ltpId-' + $oof.vpn.dst-access-ltp-id`\" />",
    "comments": "",
    "x": 1874.004035949707,
    "y": 2227.754497528076,
    "z": "f572e422.d0cbe8",
    "wires": []
  },
  {
    "id": "f7de6f45.6e5c2",
    "type": "save",
    "name": "save srcLTP relationship in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/network-resources/network-resource/' + $mdsal-psd.service-data.networks.network[0].network-id + '/pnfs/pnf/' + $oof.vpn.access-node-id '/p-interfaces/p-interface/' + $src-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$src-ltpId`\" />\n\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1908.0039825439453,
    "y": 2267.5043773651123,
    "z": "f572e422.d0cbe8",
    "wires": [
      []
    ]
  },
  {
    "id": "dc7dbda5.64c6",
    "type": "save",
    "name": "save dstLTP relationship in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/network-resources/network-resource/' + $mdsal-psd.service-data.networks.network[0].network-id + '/pnfs/pnf/' + $oof.vpn.access-node-id '/p-interfaces/p-interface/' + $dst-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$dst-ltpId`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1906.0039863586426,
    "y": 2313.2543773651123,
    "z": "f572e422.d0cbe8",
    "wires": [
      []
    ]
  },
  {
    "id": "8e9bf1eb.38c9",
    "type": "execute",
    "name": "generate connection attachment url ",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url-connection\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 706.0079116821289,
    "y": 544.5078773498535,
    "z": "f572e422.d0cbe8",
    "wires": [
      []
    ]
  },
  {
    "id": "1c88532f.194fed",
    "type": "execute",
    "name": "execute RestApiCallNode - get-resource connection-attachment-allotted-resource",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url-connection`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 848.0078430175781,
    "y": 578.0078182220459,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "1aea27d5.55f278",
        "62cd6493.f95d4c"
      ]
    ]
  },
  {
    "id": "e5c9e33d.18a82",
    "type": "execute",
    "name": "execute RestApiCallNode - get-resource parent service data",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url-psd`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-psd\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 775.0079956054688,
    "y": 805.007981300354,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "6e0e6040.75061",
        "f46164a.c819098"
      ]
    ]
  },
  {
    "id": "944bde78.6e19f",
    "type": "execute",
    "name": "get parent-service-data url",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"/restconf/config/GENERIC-RESOURCE-API:services/service/{service-instance-id}/service-data\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url-psd\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.parent-service-instance-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 675.0079040527344,
    "y": 768.0078144073486,
    "z": "f572e422.d0cbe8",
    "wires": [
      []
    ]
  },
  {
    "id": "c0afb39.32e2e5",
    "type": "execute",
    "name": "generate tmp.ar-other-url-connection",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-other-url-connection\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.provided-ar.allotted-resource-id`\"/>\n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 2089.0042572021484,
    "y": 924.3373756408691,
    "z": "f572e422.d0cbe8",
    "wires": [
      []
    ]
  },
  {
    "id": "5dc504a1.e9ac7c",
    "type": "execute",
    "name": "execute RestApiCallNode - get-resource connection-attachment-allotted-resource",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-other-url-connection`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-other-ar\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2226.004898071289,
    "y": 966.8372402191162,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "9070ad9c.77006",
        "f1e10286.e13ce"
      ]
    ]
  },
  {
    "id": "189e4feb.bb9fb",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1851.0041770935059,
    "y": 1690.0040254592896,
    "z": "f572e422.d0cbe8",
    "wires": [
      []
    ]
  },
  {
    "id": "b5a54c65.79307",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1227.9727897644043,
    "y": 1715.0042095184326,
    "z": "f572e422.d0cbe8",
    "wires": [
      [
        "35dc5eea.c22982",
        "291b9285.0c13be"
      ]
    ]
  }
]
