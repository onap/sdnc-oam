[
    {
        "id": "89ecb451.3ce48",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 105.75,
        "y": 90.77389526367188,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "b197fb.e6a5e808"
            ]
        ]
    },
    {
        "id": "b197fb.e6a5e808",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 375.74964904785156,
        "y": 91.77391719818115,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "4eb8c75d.3cbac"
            ]
        ]
    },
    {
        "id": "4eb8c75d.3cbac",
        "type": "method",
        "name": "method:bbs-internet-profile-vnf-topology-operation-delete-huawei",
        "xml": "<method rpc='bbs-internet-profile-vnf-topology-operation-delete-huawei' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 373.7496337890625,
        "y": 287.77399349212646,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "5369da28.c8a254"
            ]
        ]
    },
    {
        "id": "5369da28.c8a254",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 780.7498626708984,
        "y": 288.77395725250244,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "1a642c7d.ba4dbc",
                "f1d95589.9e56e",
                "d0206f33.806508",
                "7a98573b.372f68",
                "d5245309.1dda78"
            ]
        ]
    },
    {
        "id": "f2205233.7fb058",
        "type": "execute",
        "name": "execute:DeleteInternetProfileInstance",
        "xml": "<execute plugin=\"org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode\" method=\"sendRequest\">\n    <parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/bbs-internet-profile-operation.json'`\" />\n    <parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/DeleteInternetProfileInstance'`\" />\n    <parameter name=\"contentType\" value=\"application/json\"/>\n    <parameter name=\"httpMethod\" value=\"post\"/>\n    <parameter name=\"responsePrefix\" value=\"service-result\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1618.40087890625,
        "y": 291.7347717285156,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "daef222c.437ee",
                "a9bbb95e.2ca7"
            ]
        ]
    },
    {
        "id": "a9bbb95e.2ca7",
        "type": "outcome",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1923.73388671875,
        "y": 289.7347717285156,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "248303b.84aab7c"
            ]
        ]
    },
    {
        "id": "daef222c.437ee",
        "type": "outcome",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1658.7337646484375,
        "y": 376.7347717285156,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "e5e911e1.5284d"
            ]
        ]
    },
    {
        "id": "248303b.84aab7c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"error-code\" value=\"500\" />\n<parameter name=\"error-message\" value=\"Error failed to call DeleteInternetProfileInstance\" />\n",
        "comments": "",
        "x": 2167.66748046875,
        "y": 300.0243225097656,
        "z": "1cb61378.78a0d5",
        "wires": []
    },
    {
        "id": "1a642c7d.ba4dbc",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1108.1387634277344,
        "y": 805.6630086898804,
        "z": "1cb61378.78a0d5",
        "wires": []
    },
    {
        "id": "f1d95589.9e56e",
        "type": "call",
        "name": "call:bbs-internet-profile-vnf-topology-operation-common-huawei",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='bbs-internet-profile-vnf-topology-operation-common-huawei' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1281.4169082641602,
        "y": 208.77395057678223,
        "z": "1cb61378.78a0d5",
        "wires": [
            []
        ]
    },
    {
        "id": "18bc431f.3f9f65",
        "type": "comment",
        "name": "fetch relationship-list",
        "info": "",
        "comments": "",
        "x": 1088.9205322265625,
        "y": 82,
        "z": "1cb61378.78a0d5",
        "wires": []
    },
    {
        "id": "6ea6fde7.d37dc4",
        "type": "switchNode",
        "name": "switch vnf-id",
        "xml": "<switch test='`$aai.service-instance.relationship-list.relationship[$ridx].relationship-data[$rdidx].relationship-key`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2100.6151123046875,
        "y": 536.4167175292969,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "e6fac790.e0951"
            ]
        ]
    },
    {
        "id": "e6fac790.e0951",
        "type": "other",
        "name": "generic-vnf.vnf-id",
        "xml": "<outcome value='generic-vnf.vnf-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2273.837333679199,
        "y": 536.5277791023254,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "6db0d524.ce19fc"
            ]
        ]
    },
    {
        "id": "6db0d524.ce19fc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2495.0594520568848,
        "y": 536.3055739402771,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "5f6b23e9.6ff52c"
            ]
        ]
    },
    {
        "id": "5f6b23e9.6ff52c",
        "type": "update",
        "name": "get AAI generic-vnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"generic-vnf\" \n\t\tkey=\"generic-vnf.vnf-id = $aai.service-instance.relationship-list.relationship[$ridx].relationship-data[$rdidx].relationship-value\"\n        pfx='aai.generic-vnf' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 2706.22607421875,
        "y": 537.3056030273438,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "8bafe963.bdd5d8"
            ]
        ]
    },
    {
        "id": "22443033.81bbb",
        "type": "switchNode",
        "name": "switch vnf-type",
        "xml": "<switch test='`$aai.generic-vnf.vnf-type`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3232.504741668701,
        "y": 535.5277919769287,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "c5276ccd.3c9ae"
            ]
        ]
    },
    {
        "id": "c5276ccd.3c9ae",
        "type": "other",
        "name": "InternetProfile",
        "xml": "<outcome value='InternetProfile'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3426.504497528076,
        "y": 529.5278215408325,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "7971ad3a.2055ac"
            ]
        ]
    },
    {
        "id": "7971ad3a.2055ac",
        "type": "set",
        "name": "set InternetProfile vnf-id",
        "xml": "<set>\n<parameter name='prop.bbs.internetProfileVNFId' value='`$aai.generic-vnf.vnf-id`' />\n",
        "comments": "",
        "x": 3670.504009246826,
        "y": 527.5277462005615,
        "z": "1cb61378.78a0d5",
        "wires": []
    },
    {
        "id": "56cbac42.e4ecfc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1301.9482955932617,
        "y": 638.6667156219482,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "f880ecf4.4a1218"
            ]
        ]
    },
    {
        "id": "709b79be.b19de",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1309.9482955932617,
        "y": 698.6667156219482,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "f880ecf4.4a1218"
            ]
        ]
    },
    {
        "id": "f880ecf4.4a1218",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1517.9482955932617,
        "y": 673.6667156219482,
        "z": "1cb61378.78a0d5",
        "wires": []
    },
    {
        "id": "ac50fc15.29f07",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1904.75390625,
        "y": 535.5833435058594,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "6ea6fde7.d37dc4"
            ]
        ]
    },
    {
        "id": "2bf5a15d.873426",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3049.5038871765137,
        "y": 536.0277919769287,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "22443033.81bbb"
            ]
        ]
    },
    {
        "id": "8bafe963.bdd5d8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2879.9482421875,
        "y": 536.6666870117188,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "2bf5a15d.873426"
            ]
        ]
    },
    {
        "id": "d0206f33.806508",
        "type": "update",
        "name": "deleteResourceAAI",
        "xml": "<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"generic-vnf\" \n\t\tkey=\"generic-vnf.vnf-id = $prop.bbs.internetProfileVNFId\">",
        "comments": "",
        "outputs": 1,
        "x": 1111.9112243652344,
        "y": 638.7129230499268,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "56cbac42.e4ecfc",
                "709b79be.b19de"
            ]
        ]
    },
    {
        "id": "b3d5df89.6e3a88",
        "type": "comment",
        "name": "delete AAI resource",
        "info": "",
        "comments": "",
        "x": 1109.6890716552734,
        "y": 585.3796081542969,
        "z": "1cb61378.78a0d5",
        "wires": []
    },
    {
        "id": "7a98573b.372f68",
        "type": "update",
        "name": "get AAI service-instance",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"service-instance\" \n\t\tkey=\"customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id AND\n\t\t\tservice-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type AND\n\t\t\tservice-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\"\n        pfx='aai.service-instance' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 1061,
        "y": 456.7738952636719,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "ddbb253d.f688b8",
                "f8609a2b.6e7318"
            ]
        ]
    },
    {
        "id": "fae0fd49.bafaa8",
        "type": "comment",
        "name": "fetch relationship-list",
        "info": "",
        "comments": "",
        "x": 1046.000015258789,
        "y": 400.77374267578125,
        "z": "1cb61378.78a0d5",
        "wires": []
    },
    {
        "id": "ddbb253d.f688b8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1313.0002326965332,
        "y": 407.7737874984741,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "76b6e352.3b91c4"
            ]
        ]
    },
    {
        "id": "76b6e352.3b91c4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1504.000015258789,
        "y": 407.7737731933594,
        "z": "1cb61378.78a0d5",
        "wires": []
    },
    {
        "id": "f8609a2b.6e7318",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1249.2501220703125,
        "y": 505.52374267578125,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "cc6cb021.99b958"
            ]
        ]
    },
    {
        "id": "cc6cb021.99b958",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1392.2501220703125,
        "y": 514.5237426757812,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "ea848abf.1de3f",
                "5392fc06.9fe4e4"
            ]
        ]
    },
    {
        "id": "ea848abf.1de3f",
        "type": "for",
        "name": "for metadata",
        "xml": "<for silentFailure='true' index='rix' start='0' end=\"`$aai.service-instance.metadata.metadatum_length`\" >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1567.75,
        "y": 616.7738952636719,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "bf10b850.7ce9a8"
            ]
        ]
    },
    {
        "id": "eb32894a.e58a48",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2201,
        "y": 641.0238952636719,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "a2dd44c5.93fd28"
            ]
        ]
    },
    {
        "id": "a2dd44c5.93fd28",
        "type": "update",
        "name": "deleteResourceAAI",
        "xml": "<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n        resource=\"service-instance\"\n\t\tkey=\"customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id AND\n\t\t\tservice-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type AND\n\t\t\tservice-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id AND\n\t\t\tmetadatum.metaname = $aai.service-instance.metadata.metadatum[$rix].metaname\" >",
        "comments": "",
        "outputs": 1,
        "x": 2428,
        "y": 638.0238952636719,
        "z": "1cb61378.78a0d5",
        "wires": [
            []
        ]
    },
    {
        "id": "41afa08d.2f0f18",
        "type": "other",
        "name": "service-type",
        "xml": "<outcome value='service-type'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1955.4996337890625,
        "y": 585.5239562988281,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "eb32894a.e58a48"
            ]
        ]
    },
    {
        "id": "b9a73372.0499d",
        "type": "other",
        "name": "down-speed",
        "xml": "<outcome value='down-speed'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1962.4996337890625,
        "y": 681.5239562988281,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "eb32894a.e58a48"
            ]
        ]
    },
    {
        "id": "bf10b850.7ce9a8",
        "type": "switchNode",
        "name": "switch vnf-type",
        "xml": "<switch test='`$aai.service-instance.metadata.metadatum[$rix].metaname`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1763.5,
        "y": 638.5238952636719,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "c9054eba.440178",
                "41afa08d.2f0f18",
                "b9a73372.0499d"
            ]
        ]
    },
    {
        "id": "c9054eba.440178",
        "type": "other",
        "name": "up-speed",
        "xml": "<outcome value='up-speed'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1955.4996337890625,
        "y": 635.5239562988281,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "eb32894a.e58a48"
            ]
        ]
    },
    {
        "id": "5392fc06.9fe4e4",
        "type": "for",
        "name": "for relationship-list",
        "xml": "<for silentFailure='true' index='ridx' start='0' end=\"`$aai.service-instance.relationship-list.relationship_length`\" >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1563,
        "y": 481.7738952636719,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "35b7288d.63e16"
            ]
        ]
    },
    {
        "id": "35b7288d.63e16",
        "type": "for",
        "name": "for relationship data",
        "xml": "<for silentFailure='false' index='rdidx' start='0' end=\"`$aai.service-instance.relationship-list.relationship[$ridx].relationship-data_length`\" >",
        "comments": "",
        "outputs": 1,
        "x": 1716.25,
        "y": 538.5238342285156,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "ac50fc15.29f07"
            ]
        ]
    },
    {
        "id": "e5e911e1.5284d",
        "type": "switchNode",
        "name": "switch:service-result",
        "xml": "<switch test=\"`$service-result.status`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1838.25,
        "y": 373.75,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "ea692b4f.008238",
                "35c232e6.a11b2e"
            ]
        ]
    },
    {
        "id": "ea692b4f.008238",
        "type": "outcome",
        "name": "Other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2044.2503662109375,
        "y": 376.7500915527344,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "2f4dd1a8.24ecee"
            ]
        ]
    },
    {
        "id": "35c232e6.a11b2e",
        "type": "outcome",
        "name": "ok",
        "xml": "<outcome value='ok'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2056.2501220703125,
        "y": 465.74993896484375,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "6b136e9b.37e4e"
            ]
        ]
    },
    {
        "id": "2f4dd1a8.24ecee",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"error-code\" value=\"500\" />\n<parameter name=\"error-message\" value=\"`'Error ChangeInternetProfileInstance return: '+$service-result.status`\" />\n\n",
        "comments": "",
        "x": 2192.75,
        "y": 373.74993896484375,
        "z": "1cb61378.78a0d5",
        "wires": []
    },
    {
        "id": "6b136e9b.37e4e",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2206.4166107177734,
        "y": 465.7499485015869,
        "z": "1cb61378.78a0d5",
        "wires": [
            []
        ]
    },
    {
        "id": "d5245309.1dda78",
        "type": "switchNode",
        "name": "switch svc-action",
        "xml": "<switch test='`$vnf-topology-operation-input.sdnc-request-header.svc-action`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1054.75,
        "y": 291.75,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "ad17bf21.72296"
            ]
        ]
    },
    {
        "id": "ad17bf21.72296",
        "type": "outcome",
        "name": "delete",
        "xml": "<outcome value='delete'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1223.25,
        "y": 295.75,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "512053dc.7e9bdc"
            ]
        ]
    },
    {
        "id": "512053dc.7e9bdc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1383.25,
        "y": 294.25,
        "z": "1cb61378.78a0d5",
        "wires": [
            [
                "f2205233.7fb058"
            ]
        ]
    }
]