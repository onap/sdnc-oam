[
  {
    "id": "8722df6b.da333",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 118,
    "y": 57,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "5f0a72e7.8810fc"
      ]
    ]
  },
  {
    "id": "5f0a72e7.8810fc",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 234.2856903076172,
    "y": 108.23810768127441,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "a6501208.be07a"
      ]
    ]
  },
  {
    "id": "a6501208.be07a",
    "type": "method",
    "name": "method sdwan-wanport-vnf-topology-operation-underlay",
    "xml": "<method rpc='sdwan-wanport-vnf-topology-operation-underlay' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 237.42861938476562,
    "y": 193.00003147125244,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "fbe9ed1f.31b14"
      ]
    ]
  },
  {
    "id": "fbe9ed1f.31b14",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 169.66668701171875,
    "y": 301.66673278808594,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "ba308345.6a0be",
        "723ddf07.218d1",
        "431fc2f2.17609c",
        "38f6b67d.380b9a",
        "32bd7569.5de31a"
      ]
    ]
  },
  {
    "id": "ba308345.6a0be",
    "type": "for",
    "name": "for cidx..service-data.consumed-allotted-resources.consumed-allotted-resource[]",
    "xml": "<for index='cidx' start='0' end='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 604.000431060791,
    "y": 440.6668539047241,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "88f8bb94.113e88"
      ]
    ]
  },
  {
    "id": "2cdd7d19.2083a2",
    "type": "set",
    "name": "set prop.ar.allotted-resource-id",
    "xml": "<set>\n<parameter name='prop.ar.allotted-resource-id' value='`$service-data.consumed-allotted-resources.consumed-allotted-resource[$cidx].allotted-resource-id`' />\n",
    "comments": "",
    "x": 1394.0013427734375,
    "y": 129.9687786102295,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "f2739d06.3f82a",
    "type": "comment",
    "name": "Query MDSAL for AR",
    "info": "",
    "comments": "",
    "x": 1719.3340148925781,
    "y": 153.96864795684814,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "4600defb.d9dc1",
    "type": "comment",
    "name": "Query MDSAL to get parent service based on service instance id from AR",
    "info": "",
    "comments": "",
    "x": 2189.334873199463,
    "y": 172.96862697601318,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "2398fd5d.dbac12",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1968.66841506958,
    "y": 208.63526725769043,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "179e1db5.4a8f02"
      ]
    ]
  },
  {
    "id": "179e1db5.4a8f02",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2123.668254852295,
    "y": 208.13510036468506,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "35d0f2e8.ed82ae"
      ]
    ]
  },
  {
    "id": "f8dd83a.151c88",
    "type": "other",
    "name": "outcome 1",
    "xml": "<outcome value='1'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2447.3587913513184,
    "y": 204.75424098968506,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "2218a177.4e456e"
      ]
    ]
  },
  {
    "id": "7900e8ec.0ba228",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Connection attachement resource not found\" />\n    \n",
    "comments": "",
    "x": 2593.1275672912598,
    "y": 244.20122909545898,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "7edde1df.f81a4",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1961.5201416015625,
    "y": 255.70127391815186,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "ae127aa8.bf8958"
      ]
    ]
  },
  {
    "id": "ae127aa8.bf8958",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2111.5199851989746,
    "y": 256.36782932281494,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "c86b6674.f9da58"
      ]
    ]
  },
  {
    "id": "735fee8b.f10fd",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2435.6867446899414,
    "y": 242.03460121154785,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "7900e8ec.0ba228"
      ]
    ]
  },
  {
    "id": "35d0f2e8.ed82ae",
    "type": "switchNode",
    "name": "switch cr length",
    "xml": "<switch test='`$mdsal-ar.connection-attachment-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2287.668430328369,
    "y": 208.6352834701538,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "f8dd83a.151c88",
        "735fee8b.f10fd"
      ]
    ]
  },
  {
    "id": "99f51e24.95bbd",
    "type": "set",
    "name": "set parent-service-instance-id",
    "xml": "<set>\n<parameter name='prop.parent-service-instance-id' value='`$mdsal-ar.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.allotted-resource-information.parent-service-instance-id`' />\n\n",
    "comments": "",
    "x": 2843.0020294189453,
    "y": 205.63526439666748,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "2218a177.4e456e",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic='true'>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2597.4778213500977,
    "y": 204.80180072784424,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "99f51e24.95bbd",
        "87284033.76d89"
      ]
    ]
  },
  {
    "id": "c86b6674.f9da58",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Connection attachement resource not found\" />\n    \n",
    "comments": "",
    "x": 2279.001438140869,
    "y": 254.63520526885986,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "3ba72ba0.13a9f4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2066.303554534912,
    "y": 526.7709312438965,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "3c18f953.7698e6"
      ]
    ]
  },
  {
    "id": "b947c854.e35438",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2058.15535736084,
    "y": 561.8370161056519,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "5f7ffb48.00ef54"
      ]
    ]
  },
  {
    "id": "5f7ffb48.00ef54",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN resource not found\" />\n    \n",
    "comments": "",
    "x": 2204.304130554199,
    "y": 562.1045122146606,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "3c18f953.7698e6",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2186.3038024902344,
    "y": 526.771014213562,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "9ef76182.7b173",
    "type": "for",
    "name": "for pnidx.. mdsal-psd.networks.network_length[]",
    "xml": "<for index='pnidx' start='0' end='`$mdsal-psd.service-data.networks.network_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1749.6683502197266,
    "y": 626.3028893470764,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "e38b67ea.4c8758"
      ]
    ]
  },
  {
    "id": "348ba1e1.19e85e",
    "type": "switchNode",
    "name": "switch ActivateSDWANConnectivityInstance",
    "xml": "<switch test=\"`$mdsal-psd.service-data.networks.network[$pnidx].network-data.request-information.request-action == 'ActivateSDWANConnectivityInstance'`\">\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 2279.3349838256836,
    "y": 595.3028907775879,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "27c81bce.91e324"
      ]
    ]
  },
  {
    "id": "27c81bce.91e324",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2531.334518432617,
    "y": 596.3028283119202,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "917509ae.cf1bf8"
      ]
    ]
  },
  {
    "id": "917509ae.cf1bf8",
    "type": "set",
    "name": "set tmp.pnidx ",
    "xml": "<set>\n<parameter name='tmp.pnidx' value='`$pnidx`' />\n\n",
    "comments": "",
    "x": 2687.3342056274414,
    "y": 596.3028283119202,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "1fd45985.393f26",
    "type": "for",
    "name": "for loop paramidx - Get topology from servicedata",
    "xml": "<for index=\"paramidx\" start=\"0\" end=\"`$mdsal-psd.service-data.networks.network[$tmp.pnidx].network-data.network-request-input.network-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 1681.3351593017578,
    "y": 711.3025188446045,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "4ebf01e5.37d06"
      ]
    ]
  },
  {
    "id": "8d7971fd.c23e3",
    "type": "switchNode",
    "name": "switch topology",
    "xml": "<switch test=\"`$mdsal-psd.service-data.networks.network[$tmp.pnidx].network-data.network-request-input.network-input-parameters.param[$paramidx].name == 'topology'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2133.335250854492,
    "y": 690.3024244308472,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "e336f6e8.a1adc8"
      ]
    ]
  },
  {
    "id": "e336f6e8.a1adc8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2284.335262298584,
    "y": 688.3024663925171,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "f2813d3e.d5ec3"
      ]
    ]
  },
  {
    "id": "f2813d3e.d5ec3",
    "type": "set",
    "name": "set topology",
    "xml": "<set>\n<parameter name='prop.topology' value='`$mdsal-psd.service-data.networks.network[$tmp.pnidx].network-data.network-request-input.network-input-parameters.param[$paramidx].value`' />\n",
    "comments": "",
    "x": 2425.334991455078,
    "y": 687.9024000167847,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "4a7f65c3.11a50c",
    "type": "switchNode",
    "name": "switch tmp.pnidx ",
    "xml": "<switch test=\"`$tmp.pnidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1652.334976196289,
    "y": 670.9690914154053,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "42c35e07.6414a"
      ]
    ]
  },
  {
    "id": "42c35e07.6414a",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1807.7636489868164,
    "y": 669.5404710769653,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "79c31704.e1ea48"
      ]
    ]
  },
  {
    "id": "79c31704.e1ea48",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 1948.1922721862793,
    "y": 670.6835603713989,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "d058b4fc.a3d908",
    "type": "switchNode",
    "name": "switch topology hub-spoke",
    "xml": "<switch test=\"`$prop.topology == 'hub-spoke'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 1560.3348426818848,
    "y": 773.3023405075073,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "80132a76.17bcc8",
        "f4211b87.94b798"
      ]
    ]
  },
  {
    "id": "80132a76.17bcc8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1750.334529876709,
    "y": 798.3028259277344,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "7df004fc.b974bc"
      ]
    ]
  },
  {
    "id": "f4211b87.94b798",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1744.3354568481445,
    "y": 759.3024883270264,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "f043ab05.abcb68"
      ]
    ]
  },
  {
    "id": "f043ab05.abcb68",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1880.3354606628418,
    "y": 759.3024272918701,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "7df004fc.b974bc",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1755.66748046875,
    "y": 866.3020601272583,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "f2cfe93e.7237b8"
      ]
    ]
  },
  {
    "id": "f2cfe93e.7237b8",
    "type": "for",
    "name": "for ppidx.. mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[]",
    "xml": "<for index='ppidx' start='0' end='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 2163.000732421875,
    "y": 866.6356782913208,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "de6797a2.586c78"
      ]
    ]
  },
  {
    "id": "ffb0cb19.6bd078",
    "type": "set",
    "name": "set prop.ar.provided-allotted-resource-id",
    "xml": "<set>\n<parameter name='prop.ar.provided-allotted-resource-id' value='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[$ppidx].allotted-resource-id`' />\n\n",
    "comments": "",
    "x": 2254.0018463134766,
    "y": 944.6359763145447,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "7d29151f.aff58c",
    "type": "for",
    "name": "for loop aridx - Get role from allotted resource",
    "xml": "<for index=\"aridx\" start=\"0\" end=\"`$mdsal-providedAr.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2272.0025482177734,
    "y": 1055.302767753601,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "99b001da.0efb4"
      ]
    ]
  },
  {
    "id": "175772d7.f9d53d",
    "type": "switchNode",
    "name": "switch Role",
    "xml": "<switch test=\"`$mdsal-providedAr.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.param[$aridx].name == 'Role'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2681.002658843994,
    "y": 1058.3028545379639,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "d13f62a9.a25bd"
      ]
    ]
  },
  {
    "id": "d13f62a9.a25bd",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2822.0029907226562,
    "y": 1057.3028535842896,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "63261a78.0b6344"
      ]
    ]
  },
  {
    "id": "63261a78.0b6344",
    "type": "set",
    "name": "set prop.role",
    "xml": "<set>\n<parameter name='prop.role' value='`$mdsal-providedAr.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.param[$aridx].value`' />\n",
    "comments": "",
    "x": 2963.0030250549316,
    "y": 1058.9027452468872,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "63613798.d70908",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2758.0020446777344,
    "y": 961.969269990921,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "18ba51e1.01a3be"
      ]
    ]
  },
  {
    "id": "9fe7ff8.35548",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2754.8537673950195,
    "y": 1016.0353531837463,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "2fd2f3c1.09b97c"
      ]
    ]
  },
  {
    "id": "8ad9ee53.6aa87",
    "type": "switchNode",
    "name": "switch role hub",
    "xml": "<switch test=\"`$prop.role == hub`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2138.3351821899414,
    "y": 1120.6358079910278,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "6011fd41.335614",
        "472beb8.34ca814"
      ]
    ]
  },
  {
    "id": "890f782e.076f68",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2454.3345680236816,
    "y": 1096.6354112625122,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "aa2b8cd4.2f9ae",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2864.3042030334473,
    "y": 1192.1045179367065,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "4765f05a.45c5e"
      ]
    ]
  },
  {
    "id": "1bed61f6.90e36e",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2866.155773162842,
    "y": 1252.170599937439,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "151f6728.afe339"
      ]
    ]
  },
  {
    "id": "151f6728.afe339",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SDWAN service-data not found\" />\n    \n",
    "comments": "",
    "x": 3010.304546356201,
    "y": 1214.4380140304565,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "4765f05a.45c5e",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2994.3042221069336,
    "y": 1181.1046781539917,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "f7f9e60d.d46178",
    "type": "set",
    "name": "set prop.ar-service-instance-id",
    "xml": "<set>\n<parameter name='prop.ar-service-instance-id' value='`$mdsal-providedAr.connection-attachment-allotted-resource[0].allotted-resource-data.connection-attachment-topology.allotted-resource-identifiers.consuming-service-instance-id`' />\n",
    "comments": "",
    "x": 2466.3356018066406,
    "y": 1180.6360107660294,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "f464743.4983e88",
    "type": "for",
    "name": "for arvidx.. mdsal-arsd.service-data.vnfs.vnf_length[]",
    "xml": "<for index='arvidx' start='0' end='`$mdsal-arsd.service-data.vnfs.vnf_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 2510.0020751953125,
    "y": 1302.6358003616333,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "535fb492.abce2c"
      ]
    ]
  },
  {
    "id": "535fb492.abce2c",
    "type": "block",
    "name": "block atmoic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2856.6683959960938,
    "y": 1292.6357765197754,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "b26020e0.3a846",
        "5e2a4404.59208c",
        "858743af.15464"
      ]
    ]
  },
  {
    "id": "b26020e0.3a846",
    "type": "switchNode",
    "name": "switch ActivateSDWANPortInstance",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$arvidx].vnf-data.request-information.request-action == 'ActivateSDWANPortInstance'`\">\n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 3118.668504714966,
    "y": 1263.6367359161377,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "6b78409.f5b87c"
      ]
    ]
  },
  {
    "id": "dde2f6f9.3c1848",
    "type": "switchNode",
    "name": "switch tmp.portvidx ",
    "xml": "<switch test=\"`$tmp.portvidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2591.668212890625,
    "y": 1347.3024454116821,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "58f23c0f.4a7544"
      ]
    ]
  },
  {
    "id": "3d280456.864e3c",
    "type": "for",
    "name": "for loop wportidx - Get wan port ID from servicedata",
    "xml": "<for index=\"wportidx\" start=\"0\" end=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2516.6688232421875,
    "y": 1502.6367044448853,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "3b6a88cf.f649b8"
      ]
    ]
  },
  {
    "id": "58f23c0f.4a7544",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 2752.0966777801514,
    "y": 1346.8739652633667,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "6637a392.65819c"
      ]
    ]
  },
  {
    "id": "6637a392.65819c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id (port) not found in service-data\" />\n",
    "comments": "",
    "x": 2889.525634765625,
    "y": 1347.0173768997192,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "6b78409.f5b87c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3346.66819190979,
    "y": 1261.636736869812,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "11f23b34.c014d5"
      ]
    ]
  },
  {
    "id": "3b6a88cf.f649b8",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2859.669807434082,
    "y": 1505.6369543075562,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "9eb62557.123aa8",
        "6f944994.65d2c8",
        "b81eb9e0.1976f8",
        "3235095c.ee2c06"
      ]
    ]
  },
  {
    "id": "9eb62557.123aa8",
    "type": "switchNode",
    "name": "switch transportNetworkName",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$wportidx].name == 'transportNetworkName'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3154.670757293701,
    "y": 1444.6374912261963,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "a7e30f58.58c4"
      ]
    ]
  },
  {
    "id": "11f23b34.c014d5",
    "type": "set",
    "name": "set tmp.portvidx ",
    "xml": "<set>\n<parameter name='tmp.portvidx' value='`$arvidx`' />\n\n",
    "comments": "",
    "x": 3501.667875289917,
    "y": 1261.6367359161377,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "a7e30f58.58c4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3347.6707725524902,
    "y": 1444.63765335083,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "9cf2c3d4.0b4b5"
      ]
    ]
  },
  {
    "id": "9cf2c3d4.0b4b5",
    "type": "set",
    "name": "set prop.hub.transportNetworkName",
    "xml": "<set>\n<parameter name='prop.hub.transportNetworkName' value='`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$wportidx].value`' />\n",
    "comments": "",
    "x": 3565.6707801818848,
    "y": 1443.23823928833,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "6f944994.65d2c8",
    "type": "switchNode",
    "name": "switch wanPortId",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$wportidx].name == 'wanPortId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3116.003490447998,
    "y": 1478.6371002197266,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "b31bd9b2.46c7d8"
      ]
    ]
  },
  {
    "id": "b31bd9b2.46c7d8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3277.003818511963,
    "y": 1479.6371803283691,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "d3357919.f54078"
      ]
    ]
  },
  {
    "id": "d3357919.f54078",
    "type": "set",
    "name": "set prop.hub.wanPortId",
    "xml": "<set>\n<parameter name='prop.hub.wanPortId' value='`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$wportidx].value`' />\n",
    "comments": "",
    "x": 3467.004280090332,
    "y": 1479.2374563217163,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "2c43f3c.460060c",
    "type": "switchNode",
    "name": "switch  prop.hub.transportNetworkName==prop.spoke.transportNetworkName",
    "xml": "<switch test=\"`$prop.hub.transportNetworkName == $prop.spoke.transportNetworkName`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2594.004150390625,
    "y": 1605.304440498352,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "cf49239.d51bfe",
        "c6577e7a.d8dfd"
      ]
    ]
  },
  {
    "id": "cf49239.d51bfe",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2940.0036811828613,
    "y": 1642.3045144081116,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "c20a45c1.991ea8"
      ]
    ]
  },
  {
    "id": "c6577e7a.d8dfd",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2944.0041694641113,
    "y": 1577.3041467666626,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "7523e16b.4849a"
      ]
    ]
  },
  {
    "id": "7523e16b.4849a",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3084.0040969848633,
    "y": 1605.304271697998,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "de6797a2.586c78",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1905.0322265625,
    "y": 975.8333101272583,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "ffb0cb19.6bd078",
        "9b080888.c9b298",
        "1ff59188.ff36ae",
        "8ad9ee53.6aa87",
        "7d29151f.aff58c"
      ]
    ]
  },
  {
    "id": "524b783f.8c1128",
    "type": "switchNode",
    "name": "switch vpnId",
    "xml": "<switch test=\"`$mdsal-psd.service-data.networks.network[$tmp.pnidx].network-data.network-request-input.network-input-parameters.param[$paramidx].name == 'vpn-id'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2123.001266479492,
    "y": 734.6354351043701,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "6c47f41b.3d3cac"
      ]
    ]
  },
  {
    "id": "6c47f41b.3d3cac",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2267.001277923584,
    "y": 734.6354761123657,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "9b1a7d07.58406"
      ]
    ]
  },
  {
    "id": "9b1a7d07.58406",
    "type": "set",
    "name": "set prop.vpnId",
    "xml": "<set>\n<parameter name='prop.vpnId' value='`$mdsal-psd.service-data.networks.network[$tmp.pnidx].network-data.network-request-input.network-input-parameters.param[$paramidx].value`' />\n",
    "comments": "",
    "x": 2425.0009994506836,
    "y": 733.2354106903076,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "c93e7e34.eb504",
    "type": "set",
    "name": "Set prop.hubTnpId",
    "xml": "<set>\n<parameter name='prop.hubTnpId' value='$prop.hub.wanPortId' />\n\n",
    "comments": "",
    "x": 2631.336555480957,
    "y": 1731.6363048553467,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "33961398.8b885c",
    "type": "execute",
    "name": "execute RestApiCallNode underlay route",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-underlay.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/routing-protocol/static/action/batch-delete'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"underlayHubResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3463.33624458313,
    "y": 2602.9708592891693,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "54355641.66e388",
        "a6852c79.79538"
      ]
    ]
  },
  {
    "id": "a6852c79.79538",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3730.3361530303955,
    "y": 2630.970888853073,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "54355641.66e388",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3728.335832595825,
    "y": 2586.97087931633,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "e784c17f.677b5"
      ]
    ]
  },
  {
    "id": "e784c17f.677b5",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing sdwan hub route underlay rest api\" />\n",
    "comments": "",
    "x": 3870.336519241333,
    "y": 2584.9709622859955,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "45a08ea1.9e3d3",
    "type": "set",
    "name": "Add prop.hub.route",
    "xml": "<set>\n<parameter name='prop.route.id' value='`$prop.hubRouteId`' />\n<parameter name='prop.route.vpnId' value='`$prop.vpnId`' />\n<parameter name='prop.route.siteId' value='`$prop.hub.siteId`' />\n<parameter name='prop.route.deviceId' value='`$prop.hub.deviceId`' />\n<parameter name='prop.route.providerIpAddress' value='`$prop.hub.providerIpAddress`' />\n<parameter name='prop.route.wanportId' value='`$prop.spoke.wanPortId`' />\n<parameter name='prop.route.ipAddress' value='`$prop.hub.ipAddress`' />\n\n\n",
    "comments": "",
    "x": 3407.6696243286133,
    "y": 2559.637367248535,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "5e2b5a00.fe4964",
    "type": "execute",
    "name": "execute RestApiCallNode underlay route",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-underlay.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/routing-protocol/static/action/batch-delete'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"underlayspokeResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3482.6696243286133,
    "y": 2701.637832403183,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "e568918e.3bed",
        "6ef02e4e.06cc1"
      ]
    ]
  },
  {
    "id": "6ef02e4e.06cc1",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3734.669771194458,
    "y": 2730.6381289958954,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "e568918e.3bed",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3732.6694507598877,
    "y": 2686.638119459152,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "43fb9f64.6e794"
      ]
    ]
  },
  {
    "id": "43fb9f64.6e794",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing sdwan spoke route underlay rest api\" />\n",
    "comments": "",
    "x": 3874.6701374053955,
    "y": 2684.6382024288177,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "5e2a4404.59208c",
    "type": "switchNode",
    "name": "switch ActivateSDWANDeviceInstance",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$arvidx].vnf-data.request-information.request-action == 'ActivateSDWANDeviceInstance'`\">\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 3129.532081604004,
    "y": 1296.8336944580078,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "355d1cb7.8466e4"
      ]
    ]
  },
  {
    "id": "85c67b27.be5eb8",
    "type": "switchNode",
    "name": "switch tmp.devicevidx ",
    "xml": "<switch test=\"`$tmp.devicevidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2597.5316314697266,
    "y": 1389.4999265670776,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "188473e9.fdf33c"
      ]
    ]
  },
  {
    "id": "188473e9.fdf33c",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 2763.9600677490234,
    "y": 1389.0714597702026,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "ec42dab0.d633d8"
      ]
    ]
  },
  {
    "id": "ec42dab0.d633d8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id (device) not found in service-data\" />\n",
    "comments": "",
    "x": 2904.388999938965,
    "y": 1391.2144346237183,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "355d1cb7.8466e4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3357.531768798828,
    "y": 1294.8336954116821,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "73270e6c.070f4"
      ]
    ]
  },
  {
    "id": "73270e6c.070f4",
    "type": "set",
    "name": "set tmp.devicevidx ",
    "xml": "<set>\n<parameter name='tmp.devicevidx' value='`$arvidx`' />\n\n",
    "comments": "",
    "x": 3512.531452178955,
    "y": 1294.8336944580078,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "858743af.15464",
    "type": "switchNode",
    "name": "switch ActivateSiteInstance",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$arvidx].vnf-data.request-information.request-action == 'ActivateSiteInstance'`\">\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 3092.5321521759033,
    "y": 1330.833758354187,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "f6939cb3.d0942"
      ]
    ]
  },
  {
    "id": "1e774611.be647a",
    "type": "switchNode",
    "name": "switch tmp.sitevidx ",
    "xml": "<switch test=\"`$tmp.sitevidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2596.5315017700195,
    "y": 1427.4998044967651,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "bc02814a.d7499"
      ]
    ]
  },
  {
    "id": "bc02814a.d7499",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 2756.959966659546,
    "y": 1427.0713243484497,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "d392366e.9150d8"
      ]
    ]
  },
  {
    "id": "d392366e.9150d8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id (site) not found in service-data\" />\n",
    "comments": "",
    "x": 2905.388921737671,
    "y": 1429.2143306732178,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "f6939cb3.d0942",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3280.531717300415,
    "y": 1330.833924293518,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "ab570b08.b1c7a8"
      ]
    ]
  },
  {
    "id": "ab570b08.b1c7a8",
    "type": "set",
    "name": "set tmp.sitevidx ",
    "xml": "<set>\n<parameter name='tmp.sitevidx' value='`$arvidx`' />\n\n",
    "comments": "",
    "x": 3435.531400680542,
    "y": 1330.8339233398438,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "37339d04.d0e692",
    "type": "for",
    "name": "for loop deviceidx - Get wan port ID from servicedata",
    "xml": "<for index=\"deviceidx\" start=\"0\" end=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.devicevidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2728.5331497192383,
    "y": 1767.834059715271,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "fc5d79c.538d088"
      ]
    ]
  },
  {
    "id": "29161345.19c04c",
    "type": "switchNode",
    "name": "switch deviceId",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.devicevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$deviceidx].name == 'deviceId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3189.5345039367676,
    "y": 1681.834927558899,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "cded98bd.ccea58"
      ]
    ]
  },
  {
    "id": "cded98bd.ccea58",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3340.5348777770996,
    "y": 1678.835171699524,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "d9cc984d.9f9d28"
      ]
    ]
  },
  {
    "id": "d9cc984d.9f9d28",
    "type": "set",
    "name": "set prop.hub.deviceId",
    "xml": "<set>\n<parameter name='prop.hub.deviceId' value='`$mdsal-arsd.service-data.vnfs.vnf[$tmp.devicevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$deviceidx].value`' />\n",
    "comments": "",
    "x": 3515.535125732422,
    "y": 1678.4356966018677,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "125c1fec.50ea4",
    "type": "for",
    "name": "for loop siteidx - Get site ID from servicedata",
    "xml": "<for index=\"siteidx\" start=\"0\" end=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2703.0330352783203,
    "y": 1824.83407497406,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "d543abbf.21d958"
      ]
    ]
  },
  {
    "id": "e6b24865.170e78",
    "type": "comment",
    "name": "Add route src->dst, dst->src",
    "info": "",
    "comments": "",
    "x": 2919.6687927246094,
    "y": 1872.6359510421753,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "79cfeb5f.61b2e4",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2141.334228515625,
    "y": 1252.968747138977,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "f464743.4983e88",
        "3d280456.864e3c",
        "2c43f3c.460060c",
        "18153066.3dcbc",
        "f7f9e60d.d46178",
        "a780d837.5bb548",
        "fcb5aaf7.a56738"
      ]
    ]
  },
  {
    "id": "18153066.3dcbc",
    "type": "block",
    "name": "block atmoic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2396.333984375,
    "y": 1389.3021211624146,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "dde2f6f9.3c1848",
        "85c67b27.be5eb8",
        "1e774611.be647a"
      ]
    ]
  },
  {
    "id": "c20a45c1.991ea8",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2416.3350219726562,
    "y": 1761.635643005371,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "c93e7e34.eb504",
        "37339d04.d0e692",
        "125c1fec.50ea4",
        "f1944c46.f8a7e"
      ]
    ]
  },
  {
    "id": "b81eb9e0.1976f8",
    "type": "switchNode",
    "name": "switch providerIpAddress",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$wportidx].name == 'providerIpAddress'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3137.5319747924805,
    "y": 1515.8334050178528,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "9a3783d0.0d525"
      ]
    ]
  },
  {
    "id": "9a3783d0.0d525",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3313.532958984375,
    "y": 1515.8335275650024,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "87437b42.24d3e8"
      ]
    ]
  },
  {
    "id": "87437b42.24d3e8",
    "type": "set",
    "name": "set prop.hub.providerIpAddress",
    "xml": "<set>\n<parameter name='prop.hub.providerIpAddress' value='`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$wportidx].value`' />\n",
    "comments": "",
    "x": 3515.5329971313477,
    "y": 1516.4334478378296,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "3235095c.ee2c06",
    "type": "switchNode",
    "name": "switch ipAddress",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$wportidx].name == 'ipAddress'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3110.0320568084717,
    "y": 1553.333490371704,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "901583b2.3d45c"
      ]
    ]
  },
  {
    "id": "901583b2.3d45c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3314.0329971313477,
    "y": 1553.3334422111511,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "3c3cbc3f.366104"
      ]
    ]
  },
  {
    "id": "3c3cbc3f.366104",
    "type": "set",
    "name": "set prop.hub.ipAddress",
    "xml": "<set>\n<parameter name='prop.hub.ipAddress' value='`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$wportidx].value`' />\n",
    "comments": "",
    "x": 3509.033000946045,
    "y": 1552.9334177970886,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "3208baf8.6aed86",
    "type": "set",
    "name": "Add prop.spoke.route",
    "xml": "<set>\n<parameter name='prop.route.id' value='`$prop.spokeRouteId`' />\n<parameter name='prop.route.vpnId' value='`$prop.vpnId`' />\n<parameter name='prop.route.siteId' value='`$prop.spoke.siteId`' />\n<parameter name='prop.route.deviceId' value='`$prop.spoke.deviceId`' />\n<parameter name='prop.route.providerIpAddress' value='`$prop.spoke.providerIpAddress`' />\n<parameter name='prop.route.wanportId' value='`$prop.hub.wanPortId`' />\n<parameter name='prop.route.ipAddress' value='`$prop.spoke.ipAddress`' />\n\n\n\n\n",
    "comments": "",
    "x": 3417.533639907837,
    "y": 2670.3345935344696,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "723ddf07.218d1",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 366.3343048095703,
    "y": 1127.3343391418457,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "428d17cf.9d4528",
    "type": "execute",
    "name": "generate connection attachment AR url ",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url-connection\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$prop.ar.allotted-resource-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 1415.6672058105469,
    "y": 189.30183696746826,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "31785cb6.7e6854",
    "type": "execute",
    "name": "execute RestApiCallNode - get-resource connection-attachment-allotted-resource",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url-connection`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1542.667236328125,
    "y": 237.3018274307251,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "2398fd5d.dbac12",
        "7edde1df.f81a4"
      ]
    ]
  },
  {
    "id": "8a7f6cb5.ac077",
    "type": "execute",
    "name": "execute RestApiCallNode - get parent service data",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url-parent-connection`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-psd\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1767.0013885498047,
    "y": 571.3021411895752,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "3ba72ba0.13a9f4",
        "b947c854.e35438"
      ]
    ]
  },
  {
    "id": "39b9e240.c55f5e",
    "type": "execute",
    "name": "generate connection attachment parent url ",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"/restconf/config/GENERIC-RESOURCE-API:services/service/{service-instance-id}/service-data\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url-parent-connection\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$prop.parent-service-instance-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 1744.0010375976562,
    "y": 517.3020687103271,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "e2c10566.d14818",
    "type": "comment",
    "name": "full mesh do nothing",
    "info": "",
    "comments": "",
    "x": 1578.667839050293,
    "y": 728.3021068572998,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "3ed45cd4.e3df94",
    "type": "comment",
    "name": "hub-spoke",
    "info": "",
    "comments": "",
    "x": 2579.6672401428223,
    "y": 825.3019967079163,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "9b080888.c9b298",
    "type": "execute",
    "name": "generate connection attachment AR url ",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url-connection\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$prop.ar.provided-allotted-resource-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 2252.0003929138184,
    "y": 976.3019919395447,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "1ff59188.ff36ae",
    "type": "execute",
    "name": "execute RestApiCallNode - get-resource connection-attachment-allotted-resource",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url-connection`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-providedAr\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2383.000473022461,
    "y": 1015.9686217308044,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "63613798.d70908",
        "9fe7ff8.35548"
      ]
    ]
  },
  {
    "id": "a780d837.5bb548",
    "type": "execute",
    "name": "generate service data url",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"/restconf/config/GENERIC-RESOURCE-API:services/service/{service-instance-id}/service-data\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url-connection\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$prop.ar-service-instance-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 2433.504367828369,
    "y": 1217.3058919906616,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "fcb5aaf7.a56738",
    "type": "execute",
    "name": "execute RestApiCallNode - get service data of allotted resource",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url-connection`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-arsd\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2549.5045013427734,
    "y": 1254.3057832717896,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "aa2b8cd4.2f9ae",
        "1bed61f6.90e36e"
      ]
    ]
  },
  {
    "id": "472beb8.34ca814",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2313.5000648498535,
    "y": 1139.8018560409546,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "79cfeb5f.61b2e4"
      ]
    ]
  },
  {
    "id": "6011fd41.335614",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2319.500312805176,
    "y": 1096.801947593689,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "890f782e.076f68"
      ]
    ]
  },
  {
    "id": "87284033.76d89",
    "type": "for",
    "name": "for loop roleidx - Get role from allotted resource",
    "xml": "<for index=\"roleidx\" start=\"0\" end=\"`$mdsal-ar.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2894.5008697509766,
    "y": 244.30177307128906,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "73b90990.d19928"
      ]
    ]
  },
  {
    "id": "73b90990.d19928",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3153.5011825561523,
    "y": 243.3020887374878,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "8cac5932.b8b208"
      ]
    ]
  },
  {
    "id": "8cac5932.b8b208",
    "type": "switchNode",
    "name": "switch Role",
    "xml": "<switch test=\"`$mdsal-ar.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.param[$roleidx].name == 'role'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3302.501194000244,
    "y": 244.3019256591797,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "bf369f65.c443d"
      ]
    ]
  },
  {
    "id": "9b7f20f8.db3b3",
    "type": "set",
    "name": "set prop.spoke.role",
    "xml": "<set>\n<parameter name='prop.spoke.role' value='`$mdsal-ar.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.param[$roleidx].value`' />\n",
    "comments": "",
    "x": 3607.501754760742,
    "y": 241.90183353424072,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "bf369f65.c443d",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3438.00101852417,
    "y": 241.30176544189453,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "9b7f20f8.db3b3"
      ]
    ]
  },
  {
    "id": "8baae43.65cdc18",
    "type": "switchNode",
    "name": "switch spoke",
    "xml": "<switch test=\"`$prop.spoke.role == 'spoke'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 1330.000373840332,
    "y": 388.301700592041,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "b158c146.c1f85"
      ]
    ]
  },
  {
    "id": "b158c146.c1f85",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1471.000129699707,
    "y": 389.30173778533936,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "67d378cf.68e458"
      ]
    ]
  },
  {
    "id": "b0c4da2c.234108",
    "type": "for",
    "name": "for i.. service-data.vnfs.vnf_length[]",
    "xml": "<for index='i' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1743.5006561279297,
    "y": 443.3017330169678,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "63ff4ec5.ab647"
      ]
    ]
  },
  {
    "id": "63ff4ec5.ab647",
    "type": "block",
    "name": "block atmoic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2077.166847229004,
    "y": 387.3016633987427,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "84784063.67ffb",
        "341080b7.07512",
        "ed155104.c2191"
      ]
    ]
  },
  {
    "id": "84784063.67ffb",
    "type": "switchNode",
    "name": "switch ActivateSDWANPortInstance",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.request-information.request-action == 'ActivateSDWANPortInstance'`\">\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 2348.1668853759766,
    "y": 333.3025498390198,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "126e021b.594fce"
      ]
    ]
  },
  {
    "id": "126e021b.594fce",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2561.166648864746,
    "y": 334.3025527000427,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "c1a0895d.a44898"
      ]
    ]
  },
  {
    "id": "c1a0895d.a44898",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2710.0003929138184,
    "y": 336.3017420768738,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "cad8cdd9.d6465"
      ]
    ]
  },
  {
    "id": "cad8cdd9.d6465",
    "type": "for",
    "name": "for loop widx - Get wan port ID from servicedata",
    "xml": "<for index=\"widx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2983.000343322754,
    "y": 334.6689600944519,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "e45e8fbc.86968"
      ]
    ]
  },
  {
    "id": "e45e8fbc.86968",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3252.0012702941895,
    "y": 333.66920614242554,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "bc53f544.71b638",
        "25d65cd3.81eaf4",
        "af8fabf7.c19df8",
        "97c92085.94f67"
      ]
    ]
  },
  {
    "id": "bc53f544.71b638",
    "type": "switchNode",
    "name": "switch transportNetworkName",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$widx].name == 'transportNetworkName'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3495.0023040771484,
    "y": 288.6697793006897,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "de0d2806.856438"
      ]
    ]
  },
  {
    "id": "de0d2806.856438",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3695.0020790100098,
    "y": 288.6699414253235,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "9a3c947a.1c5d88"
      ]
    ]
  },
  {
    "id": "9a3c947a.1c5d88",
    "type": "set",
    "name": "set prop.spoke.transportNetworkName",
    "xml": "<set>\n<parameter name='prop.spoke.transportNetworkName' value='`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$widx].value`' />\n",
    "comments": "",
    "x": 3922.002815246582,
    "y": 290.2705235481262,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "67d378cf.68e458",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1223.9694213867188,
    "y": 699.2706489562988,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "b0c4da2c.234108",
        "39b9e240.c55f5e",
        "8a7f6cb5.ac077",
        "9ef76182.7b173",
        "1fd45985.393f26",
        "d058b4fc.a3d908",
        "4a7f65c3.11a50c",
        "86cead5c.3dd72"
      ]
    ]
  },
  {
    "id": "341080b7.07512",
    "type": "switchNode",
    "name": "switch ActivateSDWANDeviceInstance",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.request-information.request-action == 'ActivateSDWANDeviceInstance'`\">\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 2340.5003204345703,
    "y": 407.3017544746399,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "b16c0723.99d848"
      ]
    ]
  },
  {
    "id": "b16c0723.99d848",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2559.5000705718994,
    "y": 408.30173921585083,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "6b12cdd6.190a84"
      ]
    ]
  },
  {
    "id": "6b12cdd6.190a84",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2710.3340606689453,
    "y": 414.3009305000305,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "c142c3ae.d5baf"
      ]
    ]
  },
  {
    "id": "c142c3ae.d5baf",
    "type": "for",
    "name": "for loop didx - Get device ID from servicedata",
    "xml": "<for index=\"didx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2969.334312438965,
    "y": 416.66822576522827,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "6fd86632.b15c78"
      ]
    ]
  },
  {
    "id": "6fd86632.b15c78",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3255.334819793701,
    "y": 449.66841077804565,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "4c164cba.1f51b4"
      ]
    ]
  },
  {
    "id": "4c164cba.1f51b4",
    "type": "switchNode",
    "name": "switch deviceId",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$didx].name == 'deviceId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3438.3357315063477,
    "y": 449.66902112960815,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "4e22d2eb.17a27c"
      ]
    ]
  },
  {
    "id": "4e22d2eb.17a27c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3638.335506439209,
    "y": 449.66918325424194,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "bda2d14d.2382d"
      ]
    ]
  },
  {
    "id": "bda2d14d.2382d",
    "type": "set",
    "name": "set prop.spoke.deviceId",
    "xml": "<set>\n<parameter name='prop.spoke.deviceId' value='`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$didx].value`' />\n",
    "comments": "",
    "x": 3833.3361892700195,
    "y": 446.26976442337036,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "ed155104.c2191",
    "type": "switchNode",
    "name": "switch ActivateSiteInstance",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.request-information.request-action == 'ActivateSiteInstance'`\">\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 2319.5004348754883,
    "y": 468.30178594589233,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "3684ce31.756aa2"
      ]
    ]
  },
  {
    "id": "3684ce31.756aa2",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2553.500072479248,
    "y": 469.3017258644104,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "379dde17.f5f7e2"
      ]
    ]
  },
  {
    "id": "379dde17.f5f7e2",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2705.3340606689453,
    "y": 491.30096197128296,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "54ff4036.7eef1",
        "dc7900f6.c1794"
      ]
    ]
  },
  {
    "id": "54ff4036.7eef1",
    "type": "for",
    "name": "for loop widx - Get wan site ID from servicedata",
    "xml": "<for index=\"sidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2986.3338928222656,
    "y": 490.668164730072,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "53c73c75.c0fe44"
      ]
    ]
  },
  {
    "id": "53c73c75.c0fe44",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3255.334819793701,
    "y": 489.66841077804565,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "1d2d8e3b.d07092",
        "812b076f.3b7138",
        "8b3ca259.e59f8"
      ]
    ]
  },
  {
    "id": "1d2d8e3b.d07092",
    "type": "switchNode",
    "name": "switch siteId",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$sidx].name == 'siteId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3444.33602142334,
    "y": 539.6690826416016,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "35fdfb9a.5d5ab4"
      ]
    ]
  },
  {
    "id": "35fdfb9a.5d5ab4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3644.3354988098145,
    "y": 527.6691970825195,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "ea9da0a4.eb61c"
      ]
    ]
  },
  {
    "id": "ea9da0a4.eb61c",
    "type": "set",
    "name": "set prop.spoke.siteId",
    "xml": "<set>\n<parameter name='prop.spoke.siteId' value='`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$sidx].value`' />\n",
    "comments": "",
    "x": 3837.336452484131,
    "y": 534.2698273658752,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "25d65cd3.81eaf4",
    "type": "switchNode",
    "name": "switch wanPortId",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$widx].name == 'wanPortId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3468.5,
    "y": 325.3018355369568,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "70f2426c.7fe2dc"
      ]
    ]
  },
  {
    "id": "70f2426c.7fe2dc",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3698.5000038146973,
    "y": 325.3019471168518,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "2a2fa3c7.e081ac"
      ]
    ]
  },
  {
    "id": "2a2fa3c7.e081ac",
    "type": "set",
    "name": "set prop.spoke.wanPortId",
    "xml": "<set>\n<parameter name='prop.spoke.wanPortId' value='`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$widx].value`' />\n",
    "comments": "",
    "x": 3925.5007400512695,
    "y": 326.90252923965454,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "af8fabf7.c19df8",
    "type": "switchNode",
    "name": "switch providerIpAddress",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$widx].name == 'providerIpAddress'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3486.500160217285,
    "y": 369.30178594589233,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "b8a267e9.b9ee48"
      ]
    ]
  },
  {
    "id": "b8a267e9.b9ee48",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3686.4999351501465,
    "y": 369.3019480705261,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "1f49c17b.29132f"
      ]
    ]
  },
  {
    "id": "1f49c17b.29132f",
    "type": "set",
    "name": "set prop.spoke.providerIpAddress",
    "xml": "<set>\n<parameter name='prop.spoke.providerIpAddress' value='`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$widx].value`' />\n",
    "comments": "",
    "x": 3913.5006713867188,
    "y": 370.90253019332886,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "97c92085.94f67",
    "type": "switchNode",
    "name": "switch ipAddress",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$widx].name == 'ipAddress'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3466.499988555908,
    "y": 408.30182218551636,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "f16f752f.3e9e18"
      ]
    ]
  },
  {
    "id": "f16f752f.3e9e18",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3690.4998168945312,
    "y": 408.3019394874573,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "ca30b35f.a1be"
      ]
    ]
  },
  {
    "id": "ca30b35f.a1be",
    "type": "set",
    "name": "set prop.spoke.ipAddress",
    "xml": "<set>\n<parameter name='prop.spoke.ipAddress' value='`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$widx].value`' />\n",
    "comments": "",
    "x": 3917.5005531311035,
    "y": 409.90252161026,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "88f8bb94.113e88",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1033.999900817871,
    "y": 267.5000419616699,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "2cdd7d19.2083a2",
        "428d17cf.9d4528",
        "31785cb6.7e6854",
        "8baae43.65cdc18"
      ]
    ]
  },
  {
    "id": "47687d06.0a1964",
    "type": "comment",
    "name": "get spoke device,site,wanport info",
    "info": "",
    "comments": "",
    "x": 1790.96875,
    "y": 390.96874713897705,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "c21c0002.43242",
    "type": "comment",
    "name": "Add routes only on activation of spoke Attach site",
    "info": "",
    "comments": "",
    "x": 1451.4999160766602,
    "y": 334.00006103515625,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "7b6f0604.c9da18",
    "type": "comment",
    "name": "Loop for all the hub allotted resources, get respective service data and get vnfs info",
    "info": "",
    "comments": "",
    "x": 2207.5,
    "y": 829.500057220459,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "d543abbf.21d958",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2963.4997177124023,
    "y": 1810.9999589920044,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "a19625ef.be4768",
        "450fbdd4.50bf64"
      ]
    ]
  },
  {
    "id": "fc5d79c.538d088",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3013.4997749328613,
    "y": 1683.999843597412,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "29161345.19c04c"
      ]
    ]
  },
  {
    "id": "a19625ef.be4768",
    "type": "switchNode",
    "name": "switch siteId",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$siteidx].name == 'siteId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3148.499641418457,
    "y": 1821.9998016357422,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "fce00f2c.408f7"
      ]
    ]
  },
  {
    "id": "fce00f2c.408f7",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3299.500011444092,
    "y": 1820.999984741211,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "a6e04d71.45ffd"
      ]
    ]
  },
  {
    "id": "a6e04d71.45ffd",
    "type": "set",
    "name": "set prop.hub.siteId",
    "xml": "<set>\n<parameter name='prop.hub.siteId' value='`$mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$siteidx].value`' />\n",
    "comments": "",
    "x": 3471.5000190734863,
    "y": 1818.6005535125732,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "f1944c46.f8a7e",
    "type": "switchNode",
    "name": "switch request-action",
    "xml": "<switch test='`$connection-attachment-topology-operation-input.request-information.request-action`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2624.9997482299805,
    "y": 2174.0004453659058,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "4a7669f9.690ed8",
        "9523edcb.d7c9a"
      ]
    ]
  },
  {
    "id": "4a7669f9.690ed8",
    "type": "outcome",
    "name": "ActivateSDWANAttachmentInstance",
    "xml": "<outcome value='ActivateSDWANAttachmentInstance'>",
    "comments": "",
    "outputs": 1,
    "x": 2895.0271530151367,
    "y": 1985.0314779281616,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "5392f603.1e5608"
      ]
    ]
  },
  {
    "id": "ed2e9b23.246118",
    "type": "execute",
    "name": "execute RestApiCallNode underlay route",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-underlay.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/routing-protocol/static'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"underlayHubResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3483.500099182129,
    "y": 1914.0003824234009,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "e1bfc10d.7f44e",
        "523fbf6b.72c95"
      ]
    ]
  },
  {
    "id": "523fbf6b.72c95",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3730.499927520752,
    "y": 1893.0002145767212,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "e1bfc10d.7f44e",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3728.4996070861816,
    "y": 1849.000205039978,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "5684be77.d184a"
      ]
    ]
  },
  {
    "id": "5684be77.d184a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing sdwan hub route underlay rest api\" />\n",
    "comments": "",
    "x": 3870.5002937316895,
    "y": 1847.0002880096436,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "fc0a8ce8.4d15f",
    "type": "set",
    "name": "Add prop.hub.route",
    "xml": "<set>\n<parameter name='prop.route.vpnId' value='`$prop.vpnId`' />\n<parameter name='prop.route.siteId' value='`$prop.hub.siteId`' />\n<parameter name='prop.route.deviceId' value='`$prop.hub.deviceId`' />\n<parameter name='prop.route.providerIpAddress' value='`$prop.hub.providerIpAddress`' />\n<parameter name='prop.route.wanportId' value='`$prop.spoke.wanPortId`' />\n<parameter name='prop.route.ipAddress' value='`$prop.hub.ipAddress`' />\n\n\n",
    "comments": "",
    "x": 3418.8337020874023,
    "y": 1884.666922569275,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "4be3d8b3.562cb8",
    "type": "execute",
    "name": "execute RestApiCallNode underlay route",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-underlay.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/routing-protocol/static'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"underlayspokeResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3500.834144592285,
    "y": 2119.6675004959106,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "5f8c1bef.56c114",
        "a3d1295e.fa6b28"
      ]
    ]
  },
  {
    "id": "a3d1295e.fa6b28",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3752.83424949646,
    "y": 2107.667459964752,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "5f8c1bef.56c114",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3750.8339290618896,
    "y": 2063.667450428009,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "e475f129.f6d52"
      ]
    ]
  },
  {
    "id": "e475f129.f6d52",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing sdwan spoke route underlay rest api\" />\n",
    "comments": "",
    "x": 3892.8346157073975,
    "y": 2061.6675333976746,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "9b5e472e.7046c8",
    "type": "set",
    "name": "Add prop.spoke.route",
    "xml": "<set>\n<parameter name='prop.route.vpnId' value='`$prop.vpnId`' />\n<parameter name='prop.route.siteId' value='`$prop.spoke.siteId`' />\n<parameter name='prop.route.deviceId' value='`$prop.spoke.deviceId`' />\n<parameter name='prop.route.providerIpAddress' value='`$prop.spoke.providerIpAddress`' />\n<parameter name='prop.route.wanportId' value='`$prop.hub.wanPortId`' />                                                \n<parameter name='prop.route.ipAddress' value='`$prop.spoke.ipAddress`' />\n\n\n",
    "comments": "",
    "x": 3441.6980171203613,
    "y": 2082.3642127513885,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "f4ba3683.379f28",
    "type": "set",
    "name": "set  prop.underlay.routeIds",
    "xml": "<set>\n<parameter name='prop.underlay.routeIds[$prop.underlay.routeIds_length].hubSiteId' value='`$prop.hub.siteId`' />\n<!--parameter name='prop.underlay.routeIds[$prop.underlay.routeIds_length].spokeSiteId' value='`$prop.spoke.siteId`' /-->\n<parameter name='prop.underlay.routeIds[$prop.underlay.routeIds_length].hubRouteId' value='`$underlayHubResp.success[0].id`' />\n<parameter name='prop.underlay.routeIds[$prop.underlay.routeIds_length].spokeRouteId' value='`$underlayspokeResp.success[0].id`' />\n\n\n\n",
    "comments": "",
    "x": 3451.665542602539,
    "y": 2242.0309886932373,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "5392f603.1e5608",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3130.999671936035,
    "y": 1982.4999113082886,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "fc0a8ce8.4d15f",
        "9b5e472e.7046c8",
        "f4ba3683.379f28",
        "4be3d8b3.562cb8",
        "ed2e9b23.246118",
        "26c99249.a4074e",
        "41b2e501.e4cadc",
        "805d9d92.cb3bf",
        "f41a7058.b220e",
        "57accb29.01bb34"
      ]
    ]
  },
  {
    "id": "cf3f5a97.bb53e8",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3162.9997749328613,
    "y": 2624.5002613067627,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "45a08ea1.9e3d3",
        "3208baf8.6aed86",
        "33961398.8b885c",
        "5e2b5a00.fe4964",
        "3396ac88.cb4974",
        "a8dab23b.85144",
        "3c48a4f4.f048ec"
      ]
    ]
  },
  {
    "id": "9523edcb.d7c9a",
    "type": "outcome",
    "name": "DeactivateSDWANAttachmentInstance",
    "xml": "<outcome value='DeactivateSDWANAttachmentInstance'>",
    "comments": "",
    "outputs": 1,
    "x": 2911.4998321533203,
    "y": 2618.500072479248,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "cf3f5a97.bb53e8"
      ]
    ]
  },
  {
    "id": "41b2e501.e4cadc",
    "type": "set",
    "name": "Add sites to list and update length",
    "xml": "<set>\n<parameter name='prop.provision.siteIds[$prop.provision.siteIds_length].hubSiteName' value='`$prop.hub.siteName`' />\n<parameter name='prop.provision.siteIds[$prop.provision.siteIds_length].hubSiteId' value='`$prop.hub.siteId`' />\n<parameter name='prop.provision.siteIds[$prop.provision.siteIds_length].spokeSiteName' value='`$prop.spoke.siteName`' />\n<parameter name='prop.provision.siteIds[$prop.provision.siteIds_length].spokeSiteId' value='`$prop.spoke.siteId`' />\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "comments": "",
    "x": 3456.0318298339844,
    "y": 2367.0318689346313,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "84283d54.1b30c",
    "type": "comment",
    "name": "save hubsiteIds and spoke siteIds for provision",
    "info": "",
    "comments": "",
    "x": 3488.0322036743164,
    "y": 2323.0317430496216,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "812b076f.3b7138",
    "type": "switchNode",
    "name": "switch name",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$sidx].name == 'name'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3445.031005859375,
    "y": 489.03125,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "e2b5302b.c9211"
      ]
    ]
  },
  {
    "id": "e2b5302b.c9211",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3645.0307807922363,
    "y": 489.0314121246338,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "3a42d854.33d438"
      ]
    ]
  },
  {
    "id": "3a42d854.33d438",
    "type": "set",
    "name": "set prop.spoke.siteName",
    "xml": "<set>\n<parameter name='prop.spoke.siteName' value='`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$sidx].value`' />\n",
    "comments": "",
    "x": 3833.0315856933594,
    "y": 487.63202571868896,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "450fbdd4.50bf64",
    "type": "switchNode",
    "name": "switch name",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$siteidx].name == 'name'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3147.0310287475586,
    "y": 1788.5311088562012,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "7d26f71b.6a9a68"
      ]
    ]
  },
  {
    "id": "7d26f71b.6a9a68",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3298.0313987731934,
    "y": 1787.53129196167,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "570427f3.ac5a28"
      ]
    ]
  },
  {
    "id": "570427f3.ac5a28",
    "type": "set",
    "name": "set prop.hub.siteName",
    "xml": "<set>\n<parameter name='prop.hub.siteName' value='`$mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$siteidx].value`' />\n",
    "comments": "",
    "x": 3470.031406402588,
    "y": 1785.1318607330322,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "431fc2f2.17609c",
    "type": "set",
    "name": "set prop.provision.siteIds_length=0",
    "xml": "<set>\n<parameter name='prop.provision.siteIds_length' value='0' />\n\n\n\n",
    "comments": "",
    "x": 470.03126525878906,
    "y": 375.0312547683716,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "bebb2153.0e2a7",
    "type": "execute",
    "name": "execute RestApiCallNode site provision urls",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-site-provision.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/net/sites/provision-urls'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"provisionUrlRsp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 822.0312957763672,
    "y": 807.0314712524414,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "e47835d0.8f5408",
        "8e71b3d6.afc8d"
      ]
    ]
  },
  {
    "id": "8e71b3d6.afc8d",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1086.0315551757812,
    "y": 829.0315160751343,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "e47835d0.8f5408",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1087.0313415527344,
    "y": 786.0314540863037,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "610d5a0c.9e2794"
      ]
    ]
  },
  {
    "id": "610d5a0c.9e2794",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing provision url rest api\" />\n",
    "comments": "",
    "x": 1266.0318984985352,
    "y": 784.0315053462982,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "38f6b67d.380b9a",
    "type": "for",
    "name": "for providx..prop.provision.siteIds[]",
    "xml": "<for index='providx' start='0' end='`$prop.provision.siteIds_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 463.0312957763672,
    "y": 579.0312948226929,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "3da0634c.7d37dc"
      ]
    ]
  },
  {
    "id": "3da0634c.7d37dc",
    "type": "block",
    "name": "block atmoic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 487.0313377380371,
    "y": 789.031268119812,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "89ba9fe.36f7b6",
        "bebb2153.0e2a7",
        "ae5d2651.0df3f8"
      ]
    ]
  },
  {
    "id": "89ba9fe.36f7b6",
    "type": "set",
    "name": "set prop.spoke.hubSiteId, spokeSiteId",
    "xml": "<set>\n<parameter name='prop.provision.hubSitename' value='`$prop.provision.siteIds[$providx].hubSiteName`' />\n<parameter name='prop.provision.spokeSitename' value='`$prop.provision.siteIds[$providx].spokeSiteName`' />\n<parameter name='prop.provision.hubspokesite[0]' value='`$prop.provision.siteIds[$providx].hubSiteId`' />\n<parameter name='prop.provision.hubspokesite[1]' value='`$prop.provision.siteIds[$providx].spokeSiteId`' />\n<parameter name='prop.provision.hubspokesite_length' value='2' />\n",
    "comments": "",
    "x": 798.0339965820312,
    "y": 665.6329832077026,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "ae5d2651.0df3f8",
    "type": "record",
    "name": "record provision url response to the file",
    "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"`'/opt/opendaylight/current/data/log/' + 'HUB-' + $prop.provision.hubSitename + '-SPOKE-' + $prop.provision.spokeSitename + '-provisionUrl'`\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value='`$provisionUrlRsp.success[0].url`'/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 794.0313720703125,
    "y": 901.0313358306885,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "99b001da.0efb4",
    "type": "block",
    "name": "block atmoic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2536.031482696533,
    "y": 1056.0313262939453,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "175772d7.f9d53d"
      ]
    ]
  },
  {
    "id": "e38b67ea.4c8758",
    "type": "block",
    "name": "block atmoic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2016.0311584472656,
    "y": 619.0313091278076,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "348ba1e1.19e85e"
      ]
    ]
  },
  {
    "id": "4ebf01e5.37d06",
    "type": "block",
    "name": "block atmoic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1960.0313262939453,
    "y": 710.0312175750732,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "8d7971fd.c23e3",
        "524b783f.8c1128"
      ]
    ]
  },
  {
    "id": "26c99249.a4074e",
    "type": "set",
    "name": "set prop.underlay.routeIds_length++",
    "xml": "<set>\n<parameter name='prop.underlay.routeIds_length' value='`$prop.underlay.routeIds_length + 1`' />\n\n\n\n\n",
    "comments": "",
    "x": 3481.0011596679688,
    "y": 2278.250065803528,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "805d9d92.cb3bf",
    "type": "set",
    "name": "Update prop.provision.siteIds_length",
    "xml": "<set>\n<parameter name='prop.provision.siteIds_length' value='`$prop.provision.siteIds_length + 1`' />\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "comments": "",
    "x": 3464.5009002685547,
    "y": 2402.2501611709595,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "dc7900f6.c1794",
    "type": "set",
    "name": "set prop.spoke.siteidx",
    "xml": "<set>\n<parameter name='prop.spoke.siteidx' value='`$i`' />\n\n",
    "comments": "",
    "x": 2904.7501907348633,
    "y": 455.0000286102295,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "54fe9391.9e9afc",
    "type": "set",
    "name": "set  underlay route ids to service data",
    "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$prop.spoke.siteidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$service-data.vnfs.vnf[$prop.spoke.siteidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length].name' value=\"underlayRouteIds\" />\n<parameter name='service-data.vnfs.vnf[$prop.spoke.siteidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$service-data.vnfs.vnf[$prop.spoke.siteidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length].value' value='`$tmp.routeString`' />\n\n\n",
    "comments": "",
    "x": 1927.0006408691406,
    "y": 1942.0003986358643,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "32bd7569.5de31a",
    "type": "set",
    "name": "set prop.underlay.routeIds_length=0",
    "xml": "<set>\n<parameter name='prop.underlay.routeIds_length' value='0' />\n\n\n\n",
    "comments": "",
    "x": 474.9961242675781,
    "y": 326.9961128234863,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "3396ac88.cb4974",
    "type": "for",
    "name": "for loop uidx - Get route Id from prop.underlay.routeIds",
    "xml": "<for index=\"uidx\" start=\"0\" end=\"`$prop.underlay.routeIds_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 3518.6630325317383,
    "y": 2497.3295001983643,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "48bdd272.66024c"
      ]
    ]
  },
  {
    "id": "48bdd272.66024c",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3810.3297271728516,
    "y": 2497.3295001983643,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "164a1404.cbc8dc"
      ]
    ]
  },
  {
    "id": "164a1404.cbc8dc",
    "type": "switchNode",
    "name": "switch prop.hub.siteId",
    "xml": "<switch test=\"`$prop.underlay.routeIds[$uidx].hubSiteId == $prop.hub.siteId`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3999.3297424316406,
    "y": 2497.3296632766724,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "beeec1da.addd9"
      ]
    ]
  },
  {
    "id": "beeec1da.addd9",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4170.329177856445,
    "y": 2497.329662322998,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "8b49993a.fe8e88"
      ]
    ]
  },
  {
    "id": "8b49993a.fe8e88",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4324.329177856445,
    "y": 2501.3296699523926,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "ef00b5c0.d59378"
      ]
    ]
  },
  {
    "id": "ef00b5c0.d59378",
    "type": "set",
    "name": "set prop.hubRouteId prop.spokeRouteId",
    "xml": "<set>\n<parameter name='prop.hubRouteId' value='`$prop.underlay.routeIds[$uidx].hubRouteId`' />\n<parameter name='prop.spokeRouteId' value='`$prop.underlay.routeIds[$uidx].spokeRouteId`' />\n",
    "comments": "",
    "x": 4410.32918548584,
    "y": 2573.32967376709,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "8b3ca259.e59f8",
    "type": "switchNode",
    "name": "switch underlayRouteIds",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$sidx].name == 'underlayRouteIds'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3449.99609375,
    "y": 593.6627197265625,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "90960264.013bb"
      ]
    ]
  },
  {
    "id": "90960264.013bb",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3649.9955711364746,
    "y": 581.6628341674805,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "dec6d150.266b1"
      ]
    ]
  },
  {
    "id": "f1e8e357.7d127",
    "type": "set",
    "name": "set prop.underlay.routeIds",
    "xml": "<set>\n<parameter name='prop.underlay.routeIdsString' value='`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$sidx].value`' />\n",
    "comments": "",
    "x": 4020.996971130371,
    "y": 581.2635440826416,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "86cead5c.3dd72",
    "type": "switchNode",
    "name": "switch request-action",
    "xml": "<switch test='`$connection-attachment-topology-operation-input.request-information.request-action`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1136.9963836669922,
    "y": 2033.329628944397,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "d86f6d8b.19f1b",
        "42a75c7f.9dc134"
      ]
    ]
  },
  {
    "id": "d86f6d8b.19f1b",
    "type": "outcome",
    "name": "ActivateSDWANAttachmentInstance",
    "xml": "<outcome value='ActivateSDWANAttachmentInstance'>",
    "comments": "",
    "outputs": 1,
    "x": 1400.9964294433594,
    "y": 1988.329626083374,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "1dbe9d9f.7f9c82"
      ]
    ]
  },
  {
    "id": "1dbe9d9f.7f9c82",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1642.9689407348633,
    "y": 1984.7983770370483,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "54fe9391.9e9afc",
        "5d55b77d.4fae98",
        "59b1613.c1f67a",
        "8abe0b00.ec56e8"
      ]
    ]
  },
  {
    "id": "a9b02dc4.79bbe",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1646.9689292907715,
    "y": 2068.7985458374023,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "ae1dbfd0.9ebac"
      ]
    ]
  },
  {
    "id": "42a75c7f.9dc134",
    "type": "outcome",
    "name": "DeactivateSDWANAttachmentInstance",
    "xml": "<outcome value='DeactivateSDWANAttachmentInstance'>",
    "comments": "",
    "outputs": 1,
    "x": 1398.4690704345703,
    "y": 2070.7983827590942,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "a9b02dc4.79bbe"
      ]
    ]
  },
  {
    "id": "ae1dbfd0.9ebac",
    "type": "set",
    "name": "set input parameter length -1",
    "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$prop.spoke.siteidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length' value='`$service-data.vnfs.vnf[$prop.spoke.siteidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length - 1`' />\n\n\n\n\n",
    "comments": "",
    "x": 1875.6626281738281,
    "y": 2067.32963180542,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "4d624738.aa86f8",
    "type": "comment",
    "name": "Get route routes IDs",
    "info": "",
    "comments": "",
    "x": 3418.3294982910156,
    "y": 2458.6627368927,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "5d55b77d.4fae98",
    "type": "set",
    "name": "set  underlay route ids to service data",
    "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$prop.spoke.siteidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length' value='`$service-data.vnfs.vnf[$prop.spoke.siteidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length + 1`' />\n\n\n\n\n",
    "comments": "",
    "x": 1916.329574584961,
    "y": 2016.662672996521,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "59b1613.c1f67a",
    "type": "for",
    "name": "for jidx paramidx - Get topology from servicedata",
    "xml": "<for index=\"jidx\" start=\"0\" end=\"`$prop.underlay.routeIds_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2005.3294982910156,
    "y": 1563.329444885254,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "f4c8ed71.c2698"
      ]
    ]
  },
  {
    "id": "3450a2a3.3f3b2e",
    "type": "execute",
    "name": "execute concat",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='concat' >\n    <parameter name=\"source\" value='`$tmp.concat`'/>\n    <parameter name=\"outputPath\" value=\"tmp.concat1\"/>\n    <parameter name=\"target\" value='`$prop.underlay.routeIds[$jidx].hubRouteId`'/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2189.329833984375,
    "y": 1696.9966478347778,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "5db41da3.1856f4",
    "type": "execute",
    "name": "execute concat",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='concat' >\n    <parameter name=\"source\" value='`$prop.underlay.routeIds[$jidx].hubSiteId`'/>\n    <parameter name=\"outputPath\" value=\"tmp.concat\"/>\n    <parameter name=\"target\" value=\",\"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2199.3298263549805,
    "y": 1649.6629858016968,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "f4c8ed71.c2698",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1912.329517364502,
    "y": 1748.6627750396729,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "5db41da3.1856f4",
        "3450a2a3.3f3b2e",
        "46517f63.3d70e",
        "74bf87c6.f701b8",
        "ec44da8a.7837c8",
        "f31858ee.e326d8"
      ]
    ]
  },
  {
    "id": "46517f63.3d70e",
    "type": "execute",
    "name": "execute concat",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='concat' >\n    <parameter name=\"source\" value='`$tmp.concat1`'/>\n    <parameter name=\"outputPath\" value=\"tmp.concat2\"/>\n    <parameter name=\"target\" value=\",\"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2196.3295364379883,
    "y": 1736.6628789901733,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "74bf87c6.f701b8",
    "type": "execute",
    "name": "execute concat",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='concat' >\n    <parameter name=\"source\" value='`$tmp.concat2`'/>\n    <parameter name=\"outputPath\" value=\"tmp.concat3\"/>\n    <parameter name=\"target\" value='`$prop.underlay.routeIds[$jidx].spokeRouteId`'/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2196.3295364379883,
    "y": 1772.6628789901733,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "ec44da8a.7837c8",
    "type": "execute",
    "name": "execute concat",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='concat' >\n    <parameter name=\"source\" value='`$tmp.concat3`'/>\n    <parameter name=\"outputPath\" value=\"tmp.concat4\"/>\n    <parameter name=\"target\" value=\" | \"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2189.3295364379883,
    "y": 1812.9962530136108,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "f31858ee.e326d8",
    "type": "execute",
    "name": "execute concat",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='concat' >\n    <parameter name=\"source\" value='`$tmp.routeString`'/>\n    <parameter name=\"outputPath\" value=\"tmp.routeString\"/>\n    <parameter name=\"target\" value='`$tmp.concat4`'/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2192.329475402832,
    "y": 1867.6627922058105,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "8abe0b00.ec56e8",
    "type": "set",
    "name": "Set tmp.routeString",
    "xml": "<set>\n<parameter name='tmp.routeString' value=\"\" />\n\n",
    "comments": "",
    "x": 1909.3294982910156,
    "y": 1504.6627759933472,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "dec6d150.266b1",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3797.9963188171387,
    "y": 627.9961318969727,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "f1e8e357.7d127",
        "38377ec9.53b982"
      ]
    ]
  },
  {
    "id": "38377ec9.53b982",
    "type": "execute",
    "name": "execute split |",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$prop.underlay.routeIdsString`'/>\n<parameter name=\"regex\" value=\" | \"/>\n<parameter name=\"ctx_memory_result_key\" value=\"prop.underlay.routeIdsValue\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3975.9963302612305,
    "y": 647.9961318969727,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "3268a5b9.fb215a",
        "c3ab3d57.d9ba"
      ]
    ]
  },
  {
    "id": "c3ab3d57.d9ba",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4152.9963455200195,
    "y": 628.9961309432983,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "d7617cb0.7601e"
      ]
    ]
  },
  {
    "id": "3268a5b9.fb215a",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4141.9963455200195,
    "y": 676.996132850647,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "d317db0c.b51f88"
      ]
    ]
  },
  {
    "id": "82fa522b.8f097",
    "type": "set",
    "name": "set ipAddress prefixLength",
    "xml": "<set>\n<parameter name='prop.underlay.routeIds[$prop.underlay.routeIds_length].hubSiteId' value='`$prop.underlay.routeIdsValues[0]`' />\n<parameter name='prop.underlay.routeIds[$prop.underlay.routeIds_length].hubRouteId' value='`$prop.underlay.routeIdsValues[1]`' />\n<parameter name='prop.underlay.routeIds[$prop.underlay.routeIds_length].spokeRouteId' value='`$prop.underlay.routeIdsValues[2]`' />",
    "comments": "",
    "x": 5338.997211456299,
    "y": 562.9963731765747,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "d317db0c.b51f88",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4271.996349334717,
    "y": 676.996132850647,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "d7617cb0.7601e",
    "type": "for",
    "name": "for loop ridx ",
    "xml": "<for index=\"ridx\" start=\"0\" end=\"`$prop.underlay.routeIdsValue_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 4298.996032714844,
    "y": 626.9961309432983,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "bae53b24.86f3f8"
      ]
    ]
  },
  {
    "id": "bae53b24.86f3f8",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4477.329044342041,
    "y": 623.9961318969727,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "95e8ce94.9a6d1"
      ]
    ]
  },
  {
    "id": "95e8ce94.9a6d1",
    "type": "execute",
    "name": "execute split ,",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$prop.underlay.routeIdsValue[$ridx]`'/>\n<parameter name=\"regex\" value=\",\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"prop.underlay.routeIdsValues\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 4652.329055786133,
    "y": 622.996129989624,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "17ee1f73.6ce3e1",
        "32bb2edf.2bc022"
      ]
    ]
  },
  {
    "id": "17ee1f73.6ce3e1",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4809.32905960083,
    "y": 599.9961376190186,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "25d53393.ccdc7c"
      ]
    ]
  },
  {
    "id": "32bb2edf.2bc022",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4798.32905960083,
    "y": 647.9961395263672,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "e299e773.789348"
      ]
    ]
  },
  {
    "id": "e299e773.789348",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4928.329063415527,
    "y": 647.9961395263672,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "cee6dd44.82ca8",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5131.661590576172,
    "y": 578.9962916374207,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "82fa522b.8f097",
        "e872fc0f.e3138"
      ]
    ]
  },
  {
    "id": "e872fc0f.e3138",
    "type": "set",
    "name": "set ipAddress prefixLength",
    "xml": "<set>\n<parameter name='prop.underlay.routeIds_length' value='`$prop.underlay.routeIds_length + 1`' />\n",
    "comments": "",
    "x": 5331.329250335693,
    "y": 604.996169090271,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "25d53393.ccdc7c",
    "type": "switchNode",
    "name": "switch prop.underlay.routeIdsValues_length",
    "xml": "<switch test='`$prop.underlay.routeIdsValues_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5007.663215637207,
    "y": 480.9961624145508,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "1988903d.6e7c9",
        "31c7868c.1d918a"
      ]
    ]
  },
  {
    "id": "1988903d.6e7c9",
    "type": "outcome",
    "name": "3",
    "xml": "<outcome value='3'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5242.632148742676,
    "y": 517.9648895263672,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "cee6dd44.82ca8"
      ]
    ]
  },
  {
    "id": "31c7868c.1d918a",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5259.663074493408,
    "y": 399.99610328674316,
    "z": "afa42c56.2fe06",
    "wires": [
      [
        "c3b9df69.c6c78"
      ]
    ]
  },
  {
    "id": "c3b9df69.c6c78",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5420.66259765625,
    "y": 439.99609375,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "2fd2f3c1.09b97c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN resource not found\" />\n    \n",
    "comments": "",
    "x": 2900.002540588379,
    "y": 1013.3028502464294,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "18ba51e1.01a3be",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2886.0020484924316,
    "y": 961.9692711830139,
    "z": "afa42c56.2fe06",
    "wires": [
      []
    ]
  },
  {
    "id": "f41a7058.b220e",
    "type": "set",
    "name": "hardcode hub route",
    "xml": "<set>\n<parameter name='prop.hub.ipAddress' value=\"10.2.0.2\" />\n<parameter name='prop.hub.providerIpAddress' value=\"10.2.0.0/16\" />\n\n\n",
    "comments": "",
    "x": 3420.0038681030273,
    "y": 1853.0039892196655,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "57accb29.01bb34",
    "type": "set",
    "name": "hardcode spoke route",
    "xml": "<set>\n<parameter name='prop.spoke.ipAddress' value=\"10.3.0.1\" />\n<parameter name='prop.spoke.providerIpAddress' value=\"10.3.0.0/16\" />",
    "comments": "",
    "x": 3435.004409790039,
    "y": 2051.0039653778076,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "a8dab23b.85144",
    "type": "set",
    "name": "hardcode hub route",
    "xml": "<set>\n<parameter name='prop.hub.ipAddress' value=\"10.2.0.2\" />\n<parameter name='prop.hub.providerIpAddress' value=\"10.2.0.0/16\" />\n\n\n",
    "comments": "",
    "x": 3470.333251953125,
    "y": 2532,
    "z": "afa42c56.2fe06",
    "wires": []
  },
  {
    "id": "3c48a4f4.f048ec",
    "type": "set",
    "name": "hardcode spoke route",
    "xml": "<set>\n<parameter name='prop.spoke.ipAddress' value=\"10.3.0.1\" />\n<parameter name='prop.spoke.providerIpAddress' value=\"10.3.0.0/16\" />",
    "comments": "",
    "x": 3476.333251953125,
    "y": 2639,
    "z": "afa42c56.2fe06",
    "wires": []
  }
]
