[
  {
    "id": "acaf9f12.dd321",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 119.00390625,
    "y": 52.00390625,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "9e7830e2.084e3"
      ]
    ]
  },
  {
    "id": "9e7830e2.084e3",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 235.2895965576172,
    "y": 103.24201393127441,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "b00ec17b.44975"
      ]
    ]
  },
  {
    "id": "b00ec17b.44975",
    "type": "method",
    "name": "method sdwan-wanport-vnf-topology-operation-underlay",
    "xml": "<method rpc='sdwan-wanport-vnf-topology-operation-underlay' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 238.43252563476562,
    "y": 188.00393772125244,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "2452d404.5dd7bc"
      ]
    ]
  },
  {
    "id": "2452d404.5dd7bc",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 170.67059326171875,
    "y": 296.67063903808594,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "74620ff1.b94be",
        "e68f1fae.052f",
        "18ea4160.5b97af",
        "84666856.592818",
        "f80aa612.1d1cd8"
      ]
    ]
  },
  {
    "id": "74620ff1.b94be",
    "type": "for",
    "name": "for cidx..service-data.consumed-allotted-resources.consumed-allotted-resource[]",
    "xml": "<for index='cidx' start='0' end='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 605.004337310791,
    "y": 435.6707601547241,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "89904125.f9c2d"
      ]
    ]
  },
  {
    "id": "f587f945.9668c8",
    "type": "set",
    "name": "set prop.ar.allotted-resource-id",
    "xml": "<set>\n<parameter name='prop.ar.allotted-resource-id' value='`$service-data.consumed-allotted-resources.consumed-allotted-resource[$cidx].allotted-resource-id`' />\n",
    "comments": "",
    "x": 1395.0052490234375,
    "y": 124.97268486022949,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "7103c5d5.4c730c",
    "type": "comment",
    "name": "Query MDSAL for AR",
    "info": "",
    "comments": "",
    "x": 1720.3379211425781,
    "y": 148.97255420684814,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "95a2de04.a237b",
    "type": "comment",
    "name": "Query MDSAL to get parent service based on service instance id from AR",
    "info": "",
    "comments": "",
    "x": 2190.338779449463,
    "y": 167.97253322601318,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "4d085fb4.7bdbe",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1969.67232131958,
    "y": 203.63917350769043,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "6619fa96.9e1c44"
      ]
    ]
  },
  {
    "id": "6619fa96.9e1c44",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2124.672161102295,
    "y": 203.13900661468506,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "65302594.0054ec"
      ]
    ]
  },
  {
    "id": "33787bc7.0b4834",
    "type": "other",
    "name": "outcome 1",
    "xml": "<outcome value='1'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2448.3626976013184,
    "y": 199.75814723968506,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "545b3871.7610f8"
      ]
    ]
  },
  {
    "id": "17a34962.7bafd7",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Connection attachement resource not found\" />\n    \n",
    "comments": "",
    "x": 2594.1314735412598,
    "y": 239.20513534545898,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "60f770e5.3c645",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1962.5240478515625,
    "y": 250.70518016815186,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "a69f2107.3bfff"
      ]
    ]
  },
  {
    "id": "a69f2107.3bfff",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2112.5238914489746,
    "y": 251.37173557281494,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "48f1dbd9.82eaf4"
      ]
    ]
  },
  {
    "id": "3677d240.46bcee",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2436.6906509399414,
    "y": 237.03850746154785,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "17a34962.7bafd7"
      ]
    ]
  },
  {
    "id": "65302594.0054ec",
    "type": "switchNode",
    "name": "switch cr length",
    "xml": "<switch test='`$mdsal-ar.connection-attachment-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2288.672336578369,
    "y": 203.6391897201538,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "33787bc7.0b4834",
        "3677d240.46bcee"
      ]
    ]
  },
  {
    "id": "f2c93863.974c98",
    "type": "set",
    "name": "set parent-service-instance-id",
    "xml": "<set>\n<parameter name='prop.parent-service-instance-id' value='`$mdsal-ar.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.allotted-resource-information.parent-service-instance-id`' />\n\n",
    "comments": "",
    "x": 2844.0059356689453,
    "y": 200.63917064666748,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "545b3871.7610f8",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic='true'>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2598.4817276000977,
    "y": 199.80570697784424,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "f2c93863.974c98",
        "c4ef0618.a01ef8"
      ]
    ]
  },
  {
    "id": "48f1dbd9.82eaf4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Connection attachement resource not found\" />\n    \n",
    "comments": "",
    "x": 2280.005344390869,
    "y": 249.63911151885986,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "3af4c28.a27653e",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2067.307460784912,
    "y": 521.7748374938965,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "29090a88.41c1f6"
      ]
    ]
  },
  {
    "id": "b8d8640d.13eac8",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2059.15926361084,
    "y": 556.8409223556519,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "bda3efcf.89dfe"
      ]
    ]
  },
  {
    "id": "bda3efcf.89dfe",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN resource not found\" />\n    \n",
    "comments": "",
    "x": 2205.308036804199,
    "y": 557.1084184646606,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "29090a88.41c1f6",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2187.3077087402344,
    "y": 521.774920463562,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "c548252d.342ee8",
    "type": "for",
    "name": "for pnidx.. mdsal-psd.networks.network_length[]",
    "xml": "<for index='pnidx' start='0' end='`$mdsal-psd.service-data.networks.network_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1750.6722564697266,
    "y": 621.3067955970764,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "e621a712.c02488"
      ]
    ]
  },
  {
    "id": "4d2b2a60.5a15c4",
    "type": "switchNode",
    "name": "switch ActivateSDWANConnectivityInstance",
    "xml": "<switch test=\"`$mdsal-psd.service-data.networks.network[$pnidx].network-data.request-information.request-action == 'ActivateSDWANConnectivityInstance'`\">\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 2280.3388900756836,
    "y": 590.3067970275879,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "eff7a2d.680436"
      ]
    ]
  },
  {
    "id": "eff7a2d.680436",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2532.338424682617,
    "y": 591.3067345619202,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "b41985de.5559e8"
      ]
    ]
  },
  {
    "id": "b41985de.5559e8",
    "type": "set",
    "name": "set tmp.pnidx ",
    "xml": "<set>\n<parameter name='tmp.pnidx' value='`$pnidx`' />\n\n",
    "comments": "",
    "x": 2688.3381118774414,
    "y": 591.3067345619202,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "2eff9ba0.ecf354",
    "type": "for",
    "name": "for loop paramidx - Get topology from servicedata",
    "xml": "<for index=\"paramidx\" start=\"0\" end=\"`$mdsal-psd.service-data.networks.network[$tmp.pnidx].network-data.network-request-input.network-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 1682.3390655517578,
    "y": 706.3064250946045,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "f3cef2f6.2a146"
      ]
    ]
  },
  {
    "id": "482a4c29.31cfa4",
    "type": "switchNode",
    "name": "switch topology",
    "xml": "<switch test=\"`$mdsal-psd.service-data.networks.network[$tmp.pnidx].network-data.network-request-input.network-input-parameters.param[$paramidx].name == 'topology'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2134.339157104492,
    "y": 685.3063306808472,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "65d66991.892e68"
      ]
    ]
  },
  {
    "id": "65d66991.892e68",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2285.339168548584,
    "y": 683.3063726425171,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "1a0e340c.b9591c"
      ]
    ]
  },
  {
    "id": "1a0e340c.b9591c",
    "type": "set",
    "name": "set topology",
    "xml": "<set>\n<parameter name='prop.topology' value='`$mdsal-psd.service-data.networks.network[$tmp.pnidx].network-data.network-request-input.network-input-parameters.param[$paramidx].value`' />\n",
    "comments": "",
    "x": 2426.338897705078,
    "y": 682.9063062667847,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "8b82943e.e37978",
    "type": "switchNode",
    "name": "switch tmp.pnidx ",
    "xml": "<switch test=\"`$tmp.pnidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1653.338882446289,
    "y": 665.9729976654053,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "6c46e25f.8ffa9c"
      ]
    ]
  },
  {
    "id": "6c46e25f.8ffa9c",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1808.7675552368164,
    "y": 664.5443773269653,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "7abaa33.8b7355c"
      ]
    ]
  },
  {
    "id": "7abaa33.8b7355c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 1949.1961784362793,
    "y": 665.6874666213989,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "f3550d2c.724f9",
    "type": "switchNode",
    "name": "switch topology hub-spoke",
    "xml": "<switch test=\"`$prop.topology == 'hub-spoke'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 1561.3387489318848,
    "y": 768.3062467575073,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "ab080c7a.92d5",
        "3d04ef10.4ea32"
      ]
    ]
  },
  {
    "id": "ab080c7a.92d5",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1751.338436126709,
    "y": 793.3067321777344,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "8abbeb7b.b004e8"
      ]
    ]
  },
  {
    "id": "3d04ef10.4ea32",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1745.3393630981445,
    "y": 754.3063945770264,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "86771426.4b32c8"
      ]
    ]
  },
  {
    "id": "86771426.4b32c8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1881.3393669128418,
    "y": 754.3063335418701,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "8abbeb7b.b004e8",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1756.67138671875,
    "y": 861.3059663772583,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "aa63c4ce.dcdf88"
      ]
    ]
  },
  {
    "id": "aa63c4ce.dcdf88",
    "type": "for",
    "name": "for ppidx.. mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[]",
    "xml": "<for index='ppidx' start='0' end='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 2164.004638671875,
    "y": 861.6395845413208,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "db34806a.eb197"
      ]
    ]
  },
  {
    "id": "a12ec2fd.fe008",
    "type": "set",
    "name": "set prop.ar.provided-allotted-resource-id",
    "xml": "<set>\n<parameter name='prop.ar.provided-allotted-resource-id' value='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[$ppidx].allotted-resource-id`' />\n\n",
    "comments": "",
    "x": 2255.0057525634766,
    "y": 939.6398825645447,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "48c0bc5c.016e84",
    "type": "for",
    "name": "for loop aridx - Get role from allotted resource",
    "xml": "<for index=\"aridx\" start=\"0\" end=\"`$mdsal-providedAr.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2273.0064544677734,
    "y": 1050.306674003601,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "6e2c1efa.030fd"
      ]
    ]
  },
  {
    "id": "d87f1462.94a148",
    "type": "switchNode",
    "name": "switch Role",
    "xml": "<switch test=\"`$mdsal-providedAr.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.param[$aridx].name == 'Role'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2682.006565093994,
    "y": 1053.3067607879639,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "8902bff0.b993a"
      ]
    ]
  },
  {
    "id": "8902bff0.b993a",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2823.0068969726562,
    "y": 1052.3067598342896,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "d0dace3e.a4044"
      ]
    ]
  },
  {
    "id": "d0dace3e.a4044",
    "type": "set",
    "name": "set prop.role",
    "xml": "<set>\n<parameter name='prop.role' value='`$mdsal-providedAr.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.param[$aridx].value`' />\n",
    "comments": "",
    "x": 2964.0069313049316,
    "y": 1053.9066514968872,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "a56e979.94c4668",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2759.0059509277344,
    "y": 956.973176240921,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "5e3a3525.ed601c"
      ]
    ]
  },
  {
    "id": "36ee87ff.edcc88",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2755.8576736450195,
    "y": 1011.0392594337463,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "61955a75.34d004"
      ]
    ]
  },
  {
    "id": "61955a75.34d004",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN resource not found\" />\n    \n",
    "comments": "",
    "x": 2901.006446838379,
    "y": 1008.3067564964294,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "5e3a3525.ed601c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2887.0059547424316,
    "y": 956.9731774330139,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "1dae6147.4a990f",
    "type": "switchNode",
    "name": "switch role hub",
    "xml": "<switch test=\"`$prop.role == hub`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2139.3390884399414,
    "y": 1115.6397142410278,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "918c56f9.c83968",
        "c6d12fe7.97792"
      ]
    ]
  },
  {
    "id": "f44852b5.87cbc",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2455.3384742736816,
    "y": 1091.6393175125122,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "b92c0442.b0f838",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2865.3081092834473,
    "y": 1187.1084241867065,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "c83cb2fc.e107f"
      ]
    ]
  },
  {
    "id": "3638a6d7.49015a",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2867.159679412842,
    "y": 1247.174506187439,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "7e0afffe.3838d"
      ]
    ]
  },
  {
    "id": "7e0afffe.3838d",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SDWAN service-data not found\" />\n    \n",
    "comments": "",
    "x": 3011.308452606201,
    "y": 1209.4419202804565,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "c83cb2fc.e107f",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2995.3081283569336,
    "y": 1176.1085844039917,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "f6606352.8ce6f",
    "type": "set",
    "name": "set prop.ar-service-instance-id",
    "xml": "<set>\n<parameter name='prop.ar-service-instance-id' value='`$mdsal-providedAr.connection-attachment-allotted-resource[0].allotted-resource-data.connection-attachment-topology.allotted-resource-identifiers.consuming-service-instance-id`' />\n",
    "comments": "",
    "x": 2467.3395080566406,
    "y": 1175.6399170160294,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "5ea29b9f.be4264",
    "type": "for",
    "name": "for arvidx.. mdsal-arsd.service-data.vnfs.vnf_length[]",
    "xml": "<for index='arvidx' start='0' end='`$mdsal-arsd.service-data.vnfs.vnf_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 2511.0059814453125,
    "y": 1297.6397066116333,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "4d51cabb.29bdd4"
      ]
    ]
  },
  {
    "id": "4d51cabb.29bdd4",
    "type": "block",
    "name": "block atmoic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2857.6723022460938,
    "y": 1287.6396827697754,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "d3ef4c0.e5881b8",
        "6e60b7ca.332018",
        "a1284f22.c1dd1"
      ]
    ]
  },
  {
    "id": "d3ef4c0.e5881b8",
    "type": "switchNode",
    "name": "switch ActivateSDWANPortInstance",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$arvidx].vnf-data.request-information.request-action == 'ActivateSDWANPortInstance'`\">\n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 3119.672410964966,
    "y": 1258.6406421661377,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "bf3a29ae.d2e8a8"
      ]
    ]
  },
  {
    "id": "5fa744b7.80a78c",
    "type": "switchNode",
    "name": "switch tmp.portvidx ",
    "xml": "<switch test=\"`$tmp.portvidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2592.672119140625,
    "y": 1342.3063516616821,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "72b9c858.12ec88"
      ]
    ]
  },
  {
    "id": "15f5118.456cfef",
    "type": "for",
    "name": "for loop wportidx - Get wan port ID from servicedata",
    "xml": "<for index=\"wportidx\" start=\"0\" end=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2517.6727294921875,
    "y": 1497.6406106948853,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "b2e9e931.6800c8"
      ]
    ]
  },
  {
    "id": "72b9c858.12ec88",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 2753.1005840301514,
    "y": 1341.8778715133667,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "f81f5327.8ee49"
      ]
    ]
  },
  {
    "id": "f81f5327.8ee49",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id (port) not found in service-data\" />\n",
    "comments": "",
    "x": 2890.529541015625,
    "y": 1342.0212831497192,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "bf3a29ae.d2e8a8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3347.67209815979,
    "y": 1256.640643119812,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "2e9dbb2.cfc4c44"
      ]
    ]
  },
  {
    "id": "b2e9e931.6800c8",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2860.673713684082,
    "y": 1500.6408605575562,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "948d8437.e73248",
        "89e2b91a.b2d6b8",
        "18165b60.a7ba85",
        "ccf6624c.26897"
      ]
    ]
  },
  {
    "id": "948d8437.e73248",
    "type": "switchNode",
    "name": "switch transportNetworkName",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$wportidx].name == 'transportNetworkName'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3155.674663543701,
    "y": 1439.6413974761963,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "cfc84538.b28318"
      ]
    ]
  },
  {
    "id": "2e9dbb2.cfc4c44",
    "type": "set",
    "name": "set tmp.portvidx ",
    "xml": "<set>\n<parameter name='tmp.portvidx' value='`$arvidx`' />\n\n",
    "comments": "",
    "x": 3502.671781539917,
    "y": 1256.6406421661377,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "cfc84538.b28318",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3348.6746788024902,
    "y": 1439.64155960083,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "cb06aff7.fe992"
      ]
    ]
  },
  {
    "id": "cb06aff7.fe992",
    "type": "set",
    "name": "set prop.hub.transportNetworkName",
    "xml": "<set>\n<parameter name='prop.hub.transportNetworkName' value='`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$wportidx].value`' />\n",
    "comments": "",
    "x": 3566.6746864318848,
    "y": 1438.24214553833,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "89e2b91a.b2d6b8",
    "type": "switchNode",
    "name": "switch wanPortId",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$wportidx].name == 'wanPortId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3117.007396697998,
    "y": 1473.6410064697266,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "c1169dfe.4c65a"
      ]
    ]
  },
  {
    "id": "c1169dfe.4c65a",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3278.007724761963,
    "y": 1474.6410865783691,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "6fd3807f.bc967"
      ]
    ]
  },
  {
    "id": "6fd3807f.bc967",
    "type": "set",
    "name": "set prop.hub.wanPortId",
    "xml": "<set>\n<parameter name='prop.hub.wanPortId' value='`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$wportidx].value`' />\n",
    "comments": "",
    "x": 3468.008186340332,
    "y": 1474.2413625717163,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "2d5b2f06.016de",
    "type": "switchNode",
    "name": "switch  prop.hub.transportNetworkName==prop.spoke.transportNetworkName",
    "xml": "<switch test=\"`$prop.hub.transportNetworkName == $prop.spoke.transportNetworkName`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2595.008056640625,
    "y": 1600.308346748352,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "336fdae9.175cb6",
        "1f1ba045.97a09"
      ]
    ]
  },
  {
    "id": "336fdae9.175cb6",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2941.0075874328613,
    "y": 1637.3084206581116,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "4f105ce1.5af714"
      ]
    ]
  },
  {
    "id": "1f1ba045.97a09",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2945.0080757141113,
    "y": 1572.3080530166626,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "5909586.22baea8"
      ]
    ]
  },
  {
    "id": "5909586.22baea8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3085.0080032348633,
    "y": 1600.308177947998,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "db34806a.eb197",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1906.0361328125,
    "y": 970.8372163772583,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "a12ec2fd.fe008",
        "48c0bc5c.016e84",
        "1dae6147.4a990f",
        "7504b3dc.db15fc",
        "28b961ad.bfb2de"
      ]
    ]
  },
  {
    "id": "3b80b5a9.9770ba",
    "type": "switchNode",
    "name": "switch vpnId",
    "xml": "<switch test=\"`$mdsal-psd.service-data.networks.network[$tmp.pnidx].network-data.network-request-input.network-input-parameters.param[$paramidx].name == 'vpnId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2124.005172729492,
    "y": 729.6393413543701,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "c6514d30.77c24"
      ]
    ]
  },
  {
    "id": "c6514d30.77c24",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2268.005184173584,
    "y": 729.6393823623657,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "777a9029.320d4"
      ]
    ]
  },
  {
    "id": "777a9029.320d4",
    "type": "set",
    "name": "set prop.vpnId",
    "xml": "<set>\n<parameter name='prop.vpnId' value='`$mdsal-psd.service-data.networks.network[$tmp.pnidx].network-data.network-request-input.network-input-parameters.param[$paramidx].value`' />\n",
    "comments": "",
    "x": 2426.0049057006836,
    "y": 728.2393169403076,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "772df895.4e43b8",
    "type": "set",
    "name": "Set prop.hubTnpId",
    "xml": "<set>\n<parameter name='prop.hubTnpId' value='$prop.hub.wanPortId' />\n\n",
    "comments": "",
    "x": 2632.340461730957,
    "y": 1726.6402111053467,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "32021f5a.688fc",
    "type": "execute",
    "name": "execute RestApiCallNode underlay route",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-underlay.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/routing-protocol/static/action/batch-delete'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"underlayHubResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3461.3399982452393,
    "y": 2412.9747483730316,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "dd81b865.bfe928",
        "b6ee17f7.b3f2b8"
      ]
    ]
  },
  {
    "id": "b6ee17f7.b3f2b8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3728.339906692505,
    "y": 2440.9747779369354,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "dd81b865.bfe928",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3726.3395862579346,
    "y": 2396.9747684001923,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "5f5cdc8d.3e29c4"
      ]
    ]
  },
  {
    "id": "5f5cdc8d.3e29c4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing sdwan hub route underlay rest api\" />\n",
    "comments": "",
    "x": 3868.3402729034424,
    "y": 2394.974851369858,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "ae46a29e.f97e3",
    "type": "set",
    "name": "Add prop.hub.route",
    "xml": "<set>\n<parameter name='prop.route.id' value='`$prop.hubRouteId`' />\n<parameter name='prop.route.vpnId' value='`$prop.vpnId`' />\n<parameter name='prop.route.siteId' value='`$prop.hub.siteId`' />\n<parameter name='prop.route.deviceId' value='`$prop.hub.deviceId`' />\n<parameter name='prop.route.providerIpAddress' value='`$prop.hub.providerIpAddress`' />\n<parameter name='prop.route.wanportId' value='`$prop.spoke.wanPortId`' />\n<parameter name='prop.route.ipAddress' value='`$prop.hub.ipAddress`' />\n\n\n",
    "comments": "",
    "x": 3405.6733779907227,
    "y": 2369.6412563323975,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "6c422db5.5ce744",
    "type": "execute",
    "name": "execute RestApiCallNode underlay route",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-underlay.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/routing-protocol/static/action/batch-delete'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"underlayspokeResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3480.6733779907227,
    "y": 2511.6417214870453,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "911061e0.d1dd4",
        "f999921.375d37"
      ]
    ]
  },
  {
    "id": "f999921.375d37",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3732.6735248565674,
    "y": 2540.6420180797577,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "911061e0.d1dd4",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3730.673204421997,
    "y": 2496.6420085430145,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "98292650.e96428"
      ]
    ]
  },
  {
    "id": "98292650.e96428",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing sdwan spoke route underlay rest api\" />\n",
    "comments": "",
    "x": 3872.673891067505,
    "y": 2494.64209151268,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "6e60b7ca.332018",
    "type": "switchNode",
    "name": "switch ActivateSDWANDeviceInstance",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$arvidx].vnf-data.request-information.request-action == 'ActivateSDWANDeviceInstance'`\">\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 3130.535987854004,
    "y": 1291.8376007080078,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "8aedc456.2f7ae8"
      ]
    ]
  },
  {
    "id": "ae09c3af.7e2b1",
    "type": "switchNode",
    "name": "switch tmp.devicevidx ",
    "xml": "<switch test=\"`$tmp.devicevidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2598.5355377197266,
    "y": 1384.5038328170776,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "250b22bf.a152be"
      ]
    ]
  },
  {
    "id": "250b22bf.a152be",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 2764.9639739990234,
    "y": 1384.0753660202026,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "923c6659.234fb8"
      ]
    ]
  },
  {
    "id": "923c6659.234fb8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id (device) not found in service-data\" />\n",
    "comments": "",
    "x": 2905.392906188965,
    "y": 1386.2183408737183,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "8aedc456.2f7ae8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3358.535675048828,
    "y": 1289.8376016616821,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "bd37a285.897b2"
      ]
    ]
  },
  {
    "id": "bd37a285.897b2",
    "type": "set",
    "name": "set tmp.devicevidx ",
    "xml": "<set>\n<parameter name='tmp.devicevidx' value='`$arvidx`' />\n\n",
    "comments": "",
    "x": 3513.535358428955,
    "y": 1289.8376007080078,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "a1284f22.c1dd1",
    "type": "switchNode",
    "name": "switch ActivateSiteInstance",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$arvidx].vnf-data.request-information.request-action == 'ActivateSiteInstance'`\">\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 3093.5360584259033,
    "y": 1325.837664604187,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "b05e575a.27f578"
      ]
    ]
  },
  {
    "id": "3739eed6.72baf2",
    "type": "switchNode",
    "name": "switch tmp.sitevidx ",
    "xml": "<switch test=\"`$tmp.sitevidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2597.5354080200195,
    "y": 1422.5037107467651,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "3396efac.e6fa3"
      ]
    ]
  },
  {
    "id": "3396efac.e6fa3",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 2757.963872909546,
    "y": 1422.0752305984497,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "35fde04d.b7b7a"
      ]
    ]
  },
  {
    "id": "35fde04d.b7b7a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id (site) not found in service-data\" />\n",
    "comments": "",
    "x": 2906.392827987671,
    "y": 1424.2182369232178,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "b05e575a.27f578",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3281.535623550415,
    "y": 1325.837830543518,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "18980fd.036c1f"
      ]
    ]
  },
  {
    "id": "18980fd.036c1f",
    "type": "set",
    "name": "set tmp.sitevidx ",
    "xml": "<set>\n<parameter name='tmp.sitevidx' value='`$arvidx`' />\n\n",
    "comments": "",
    "x": 3436.535306930542,
    "y": 1325.8378295898438,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "5b475dee.c12664",
    "type": "for",
    "name": "for loop deviceidx - Get wan port ID from servicedata",
    "xml": "<for index=\"deviceidx\" start=\"0\" end=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.devicevidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2729.5370559692383,
    "y": 1762.837965965271,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "42885256.de226c"
      ]
    ]
  },
  {
    "id": "a3360f10.ddde5",
    "type": "switchNode",
    "name": "switch deviceId",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.devicevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$deviceidx].name == 'deviceId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3190.5384101867676,
    "y": 1676.838833808899,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "ecee3f37.bc6a5"
      ]
    ]
  },
  {
    "id": "ecee3f37.bc6a5",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3341.5387840270996,
    "y": 1673.839077949524,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "1f5be2a4.d6905d"
      ]
    ]
  },
  {
    "id": "1f5be2a4.d6905d",
    "type": "set",
    "name": "set prop.hub.deviceId",
    "xml": "<set>\n<parameter name='prop.hub.deviceId' value='`$mdsal-arsd.service-data.vnfs.vnf[$tmp.devicevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$deviceidx].value`' />\n",
    "comments": "",
    "x": 3516.539031982422,
    "y": 1673.4396028518677,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "4b7a9b51.8c06a4",
    "type": "for",
    "name": "for loop siteidx - Get site ID from servicedata",
    "xml": "<for index=\"siteidx\" start=\"0\" end=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2704.0369415283203,
    "y": 1819.83798122406,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "48cb425f.55b89c"
      ]
    ]
  },
  {
    "id": "d000ff03.568cc",
    "type": "comment",
    "name": "Add route src->dst, dst->src",
    "info": "",
    "comments": "",
    "x": 2920.6726989746094,
    "y": 1867.6398572921753,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "29f55e34.5e8332",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2142.338134765625,
    "y": 1247.972653388977,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "5ea29b9f.be4264",
        "15f5118.456cfef",
        "2d5b2f06.016de",
        "e6f50ce2.c15fa",
        "f6606352.8ce6f",
        "ed12d667.ce10c8",
        "bae059eb.7d03c8"
      ]
    ]
  },
  {
    "id": "e6f50ce2.c15fa",
    "type": "block",
    "name": "block atmoic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2397.337890625,
    "y": 1384.3060274124146,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "5fa744b7.80a78c",
        "ae09c3af.7e2b1",
        "3739eed6.72baf2"
      ]
    ]
  },
  {
    "id": "4f105ce1.5af714",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2417.3389282226562,
    "y": 1756.639549255371,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "772df895.4e43b8",
        "5b475dee.c12664",
        "4b7a9b51.8c06a4",
        "4ae4f054.fa7eb"
      ]
    ]
  },
  {
    "id": "18165b60.a7ba85",
    "type": "switchNode",
    "name": "switch providerIpAddress",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$wportidx].name == 'providerIpAddress'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3138.5358810424805,
    "y": 1510.8373112678528,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "547ceb11.0ca1f4"
      ]
    ]
  },
  {
    "id": "547ceb11.0ca1f4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3314.536865234375,
    "y": 1510.8374338150024,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "79cc0282.5e8e0c"
      ]
    ]
  },
  {
    "id": "79cc0282.5e8e0c",
    "type": "set",
    "name": "set prop.hub.providerIpAddress",
    "xml": "<set>\n<parameter name='prop.hub.providerIpAddress' value='`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$wportidx].value`' />\n",
    "comments": "",
    "x": 3516.5369033813477,
    "y": 1511.4373540878296,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "ccf6624c.26897",
    "type": "switchNode",
    "name": "switch ipAddress",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$wportidx].name == 'ipAddress'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3111.0359630584717,
    "y": 1548.337396621704,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "11581651.226caa"
      ]
    ]
  },
  {
    "id": "11581651.226caa",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3315.0369033813477,
    "y": 1548.3373484611511,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "4b6a5df1.4c4ce4"
      ]
    ]
  },
  {
    "id": "4b6a5df1.4c4ce4",
    "type": "set",
    "name": "set prop.hub.ipAddress",
    "xml": "<set>\n<parameter name='prop.hub.ipAddress' value='`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$wportidx].value`' />\n",
    "comments": "",
    "x": 3510.036907196045,
    "y": 1547.9373240470886,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "162bc63c.6a40ba",
    "type": "set",
    "name": "Add prop.spoke.route",
    "xml": "<set>\n<parameter name='prop.route.id' value='`$prop.spokeRouteId`' />\n<parameter name='prop.route.vpnId' value='`$prop.vpnId`' />\n<parameter name='prop.route.siteId' value='`$prop.spoke.siteId`' />\n<parameter name='prop.route.deviceId' value='`$prop.spoke.deviceId`' />\n<parameter name='prop.route.providerIpAddress' value='`$prop.spoke.providerIpAddress`' />\n<parameter name='prop.route.wanportId' value='`$prop.hub.wanPortId`' />\n<parameter name='prop.route.ipAddress' value='`$prop.spoke.ipAddress`' />\n\n\n\n\n",
    "comments": "",
    "x": 3415.5373935699463,
    "y": 2480.338482618332,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "e68f1fae.052f",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 367.3382110595703,
    "y": 1122.3382453918457,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "20ecb75b.a622b8",
    "type": "execute",
    "name": "generate connection attachment AR url ",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url-connection\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$prop.ar.allotted-resource-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 1416.6711120605469,
    "y": 184.30574321746826,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "f4ac6977.3d92e8",
    "type": "execute",
    "name": "execute RestApiCallNode - get-resource connection-attachment-allotted-resource",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url-connection`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1543.671142578125,
    "y": 232.3057336807251,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "4d085fb4.7bdbe",
        "60f770e5.3c645"
      ]
    ]
  },
  {
    "id": "e17df7dc.7298b8",
    "type": "execute",
    "name": "execute RestApiCallNode - get parent service data",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url-parent-connection`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-psd\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1768.0052947998047,
    "y": 566.3060474395752,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "3af4c28.a27653e",
        "b8d8640d.13eac8"
      ]
    ]
  },
  {
    "id": "496b2343.92811c",
    "type": "execute",
    "name": "generate connection attachment parent url ",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"/restconf/config/GENERIC-RESOURCE-API:services/service/{service-instance-id}/service-data\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url-parent-connection\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$prop.parent-service-instance-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 1745.0049438476562,
    "y": 512.3059749603271,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "de20210d.6ba26",
    "type": "comment",
    "name": "full mesh do nothing",
    "info": "",
    "comments": "",
    "x": 1579.671745300293,
    "y": 723.3060131072998,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "688e61c6.6ef82",
    "type": "comment",
    "name": "hub-spoke",
    "info": "",
    "comments": "",
    "x": 2580.6711463928223,
    "y": 820.3059029579163,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "7504b3dc.db15fc",
    "type": "execute",
    "name": "generate connection attachment AR url ",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url-connection\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$prop.ar.provided-allotted-resource-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 2253.0042991638184,
    "y": 971.3058981895447,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "28b961ad.bfb2de",
    "type": "execute",
    "name": "execute RestApiCallNode - get-resource connection-attachment-allotted-resource",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url-connection`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-providedAr\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2384.004379272461,
    "y": 1010.9725279808044,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "a56e979.94c4668",
        "36ee87ff.edcc88"
      ]
    ]
  },
  {
    "id": "ed12d667.ce10c8",
    "type": "execute",
    "name": "generate service data url",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"/restconf/config/GENERIC-RESOURCE-API:services/service/{service-instance-id}/service-data\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url-connection\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$prop.ar-service-instance-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 2434.508274078369,
    "y": 1212.3097982406616,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "bae059eb.7d03c8",
    "type": "execute",
    "name": "execute RestApiCallNode - get service data of allotted resource",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url-connection`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-arsd\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2550.5084075927734,
    "y": 1249.3096895217896,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "b92c0442.b0f838",
        "3638a6d7.49015a"
      ]
    ]
  },
  {
    "id": "c6d12fe7.97792",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2314.5039710998535,
    "y": 1134.8057622909546,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "29f55e34.5e8332"
      ]
    ]
  },
  {
    "id": "918c56f9.c83968",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2320.504219055176,
    "y": 1091.805853843689,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "f44852b5.87cbc"
      ]
    ]
  },
  {
    "id": "c4ef0618.a01ef8",
    "type": "for",
    "name": "for loop roleidx - Get role from allotted resource",
    "xml": "<for index=\"roleidx\" start=\"0\" end=\"`$mdsal-ar.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2895.5047760009766,
    "y": 239.30567932128906,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "67fa3697.488778"
      ]
    ]
  },
  {
    "id": "67fa3697.488778",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3154.5050888061523,
    "y": 238.3059949874878,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "907c7650.cad4a8"
      ]
    ]
  },
  {
    "id": "907c7650.cad4a8",
    "type": "switchNode",
    "name": "switch Role",
    "xml": "<switch test=\"`$mdsal-ar.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.param[$roleidx].name == 'role'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3303.505100250244,
    "y": 239.3058319091797,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "d808a0cf.f074f"
      ]
    ]
  },
  {
    "id": "d539825b.12e92",
    "type": "set",
    "name": "set prop.spoke.role",
    "xml": "<set>\n<parameter name='prop.spoke.role' value='`$mdsal-ar.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.param[$roleidx].value`' />\n",
    "comments": "",
    "x": 3608.505661010742,
    "y": 236.90573978424072,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "d808a0cf.f074f",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3439.00492477417,
    "y": 236.30567169189453,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "d539825b.12e92"
      ]
    ]
  },
  {
    "id": "5d0ffac5.1d4814",
    "type": "switchNode",
    "name": "switch spoke",
    "xml": "<switch test=\"`$prop.spoke.role == 'spoke'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 1331.004280090332,
    "y": 383.305606842041,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "d39c2ae1.e3a298"
      ]
    ]
  },
  {
    "id": "d39c2ae1.e3a298",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1472.004035949707,
    "y": 384.30564403533936,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "401953e4.0343fc"
      ]
    ]
  },
  {
    "id": "3b2ee77e.0ad758",
    "type": "for",
    "name": "for i.. service-data.vnfs.vnf_length[]",
    "xml": "<for index='i' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1744.5045623779297,
    "y": 438.3056392669678,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "847bf9c5.b5b848"
      ]
    ]
  },
  {
    "id": "847bf9c5.b5b848",
    "type": "block",
    "name": "block atmoic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2078.170753479004,
    "y": 382.3055696487427,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "7d9b7d9a.b8ca74",
        "6a3836f9.009c38",
        "55c5f84e.24eae8"
      ]
    ]
  },
  {
    "id": "7d9b7d9a.b8ca74",
    "type": "switchNode",
    "name": "switch ActivateSDWANPortInstance",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.request-information.request-action == 'ActivateSDWANPortInstance'`\">\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 2349.1707916259766,
    "y": 328.3064560890198,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "5b0d5f1.e72d3a"
      ]
    ]
  },
  {
    "id": "5b0d5f1.e72d3a",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2562.170555114746,
    "y": 329.3064589500427,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "2bd1babe.4be726"
      ]
    ]
  },
  {
    "id": "2bd1babe.4be726",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2711.0042991638184,
    "y": 331.3056483268738,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "5b294f75.d92f3"
      ]
    ]
  },
  {
    "id": "5b294f75.d92f3",
    "type": "for",
    "name": "for loop widx - Get wan port ID from servicedata",
    "xml": "<for index=\"widx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2984.004249572754,
    "y": 329.6728663444519,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "32cc5203.15e8fe"
      ]
    ]
  },
  {
    "id": "32cc5203.15e8fe",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3253.0051765441895,
    "y": 328.67311239242554,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "2831a4a1.42336c",
        "8813fbf3.259e18",
        "c11e3914.922088",
        "5141e407.34b3cc"
      ]
    ]
  },
  {
    "id": "2831a4a1.42336c",
    "type": "switchNode",
    "name": "switch transportNetworkName",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$widx].name == 'transportNetworkName'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3496.0062103271484,
    "y": 283.6736855506897,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "2a15c273.32ab0e"
      ]
    ]
  },
  {
    "id": "2a15c273.32ab0e",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3696.0059852600098,
    "y": 283.6738476753235,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "5b3ec893.cb96e8"
      ]
    ]
  },
  {
    "id": "5b3ec893.cb96e8",
    "type": "set",
    "name": "set prop.spoke.transportNetworkName",
    "xml": "<set>\n<parameter name='prop.spoke.transportNetworkName' value='`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$widx].value`' />\n",
    "comments": "",
    "x": 3923.006721496582,
    "y": 285.2744297981262,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "401953e4.0343fc",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1224.9733276367188,
    "y": 694.2745552062988,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "3b2ee77e.0ad758",
        "496b2343.92811c",
        "e17df7dc.7298b8",
        "c548252d.342ee8",
        "2eff9ba0.ecf354",
        "f3550d2c.724f9",
        "8b82943e.e37978",
        "7fba3a52.cfca64"
      ]
    ]
  },
  {
    "id": "6a3836f9.009c38",
    "type": "switchNode",
    "name": "switch ActivateSDWANDeviceInstance",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.request-information.request-action == 'ActivateSDWANDeviceInstance'`\">\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 2341.5042266845703,
    "y": 402.3056607246399,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "7c4ac4a1.4747bc"
      ]
    ]
  },
  {
    "id": "7c4ac4a1.4747bc",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2560.5039768218994,
    "y": 403.30564546585083,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "f4aa9e41.b53e5"
      ]
    ]
  },
  {
    "id": "f4aa9e41.b53e5",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2711.3379669189453,
    "y": 409.3048367500305,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "82e0fc37.26ed9"
      ]
    ]
  },
  {
    "id": "82e0fc37.26ed9",
    "type": "for",
    "name": "for loop didx - Get device ID from servicedata",
    "xml": "<for index=\"didx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2970.338218688965,
    "y": 411.67213201522827,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "c5f6af8d.43acf"
      ]
    ]
  },
  {
    "id": "c5f6af8d.43acf",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3256.338726043701,
    "y": 444.67231702804565,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "eb564ac9.966e08"
      ]
    ]
  },
  {
    "id": "eb564ac9.966e08",
    "type": "switchNode",
    "name": "switch deviceId",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$didx].name == 'deviceId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3439.3396377563477,
    "y": 444.67292737960815,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "f15b5da7.6e6af"
      ]
    ]
  },
  {
    "id": "f15b5da7.6e6af",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3639.339412689209,
    "y": 444.67308950424194,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "24ab8642.92a16a"
      ]
    ]
  },
  {
    "id": "24ab8642.92a16a",
    "type": "set",
    "name": "set prop.spoke.deviceId",
    "xml": "<set>\n<parameter name='prop.spoke.deviceId' value='`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$didx].value`' />\n",
    "comments": "",
    "x": 3834.3400955200195,
    "y": 441.27367067337036,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "55c5f84e.24eae8",
    "type": "switchNode",
    "name": "switch ActivateSiteInstance",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.request-information.request-action == 'ActivateSiteInstance'`\">\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 2320.5043411254883,
    "y": 463.30569219589233,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "7ebe3d6.3c123c4"
      ]
    ]
  },
  {
    "id": "7ebe3d6.3c123c4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2554.503978729248,
    "y": 464.3056321144104,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "eaa83766.f196c8"
      ]
    ]
  },
  {
    "id": "eaa83766.f196c8",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2706.3379669189453,
    "y": 486.30486822128296,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "d0b475ec.f63c48",
        "3857554a.ced0aa"
      ]
    ]
  },
  {
    "id": "d0b475ec.f63c48",
    "type": "for",
    "name": "for loop widx - Get wan site ID from servicedata",
    "xml": "<for index=\"sidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2987.3377990722656,
    "y": 485.672070980072,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "d6950beb.98c1a8"
      ]
    ]
  },
  {
    "id": "d6950beb.98c1a8",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3256.338726043701,
    "y": 484.67231702804565,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "f84a2fdd.ca38",
        "8488fc33.1f86c",
        "4d409006.b4615"
      ]
    ]
  },
  {
    "id": "f84a2fdd.ca38",
    "type": "switchNode",
    "name": "switch siteId",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$sidx].name == 'siteId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3445.33992767334,
    "y": 534.6729888916016,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "785cdd27.fd93c4"
      ]
    ]
  },
  {
    "id": "785cdd27.fd93c4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3645.3394050598145,
    "y": 522.6731033325195,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "5c156f9.fbc869"
      ]
    ]
  },
  {
    "id": "5c156f9.fbc869",
    "type": "set",
    "name": "set prop.spoke.siteId",
    "xml": "<set>\n<parameter name='prop.spoke.siteId' value='`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$sidx].value`' />\n",
    "comments": "",
    "x": 3838.340358734131,
    "y": 529.2737336158752,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "8813fbf3.259e18",
    "type": "switchNode",
    "name": "switch wanPortId",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$widx].name == 'wanPortId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3469.50390625,
    "y": 320.3057417869568,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "d0babd8f.c557b"
      ]
    ]
  },
  {
    "id": "d0babd8f.c557b",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3699.5039100646973,
    "y": 320.3058533668518,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "e2b46cce.ea19d"
      ]
    ]
  },
  {
    "id": "e2b46cce.ea19d",
    "type": "set",
    "name": "set prop.spoke.wanPortId",
    "xml": "<set>\n<parameter name='prop.spoke.wanPortId' value='`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$widx].value`' />\n",
    "comments": "",
    "x": 3926.5046463012695,
    "y": 321.90643548965454,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "c11e3914.922088",
    "type": "switchNode",
    "name": "switch providerIpAddress",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$widx].name == 'providerIpAddress'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3487.504066467285,
    "y": 364.30569219589233,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "c0d01537.19ceb8"
      ]
    ]
  },
  {
    "id": "c0d01537.19ceb8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3687.5038414001465,
    "y": 364.3058543205261,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "6ecb9e8.25b2b6"
      ]
    ]
  },
  {
    "id": "6ecb9e8.25b2b6",
    "type": "set",
    "name": "set prop.spoke.providerIpAddress",
    "xml": "<set>\n<parameter name='prop.spoke.providerIpAddress' value='`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$widx].value`' />\n",
    "comments": "",
    "x": 3914.5045776367188,
    "y": 365.90643644332886,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "5141e407.34b3cc",
    "type": "switchNode",
    "name": "switch ipAddress",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$widx].name == 'ipAddress'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3467.503894805908,
    "y": 403.30572843551636,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "f9d0d35c.eced2"
      ]
    ]
  },
  {
    "id": "f9d0d35c.eced2",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3691.5037231445312,
    "y": 403.3058457374573,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "b1e06d93.e9e08"
      ]
    ]
  },
  {
    "id": "b1e06d93.e9e08",
    "type": "set",
    "name": "set prop.spoke.ipAddress",
    "xml": "<set>\n<parameter name='prop.spoke.ipAddress' value='`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$widx].value`' />\n",
    "comments": "",
    "x": 3918.5044593811035,
    "y": 404.90642786026,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "89904125.f9c2d",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1035.003807067871,
    "y": 262.5039482116699,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "f587f945.9668c8",
        "20ecb75b.a622b8",
        "f4ac6977.3d92e8",
        "5d0ffac5.1d4814"
      ]
    ]
  },
  {
    "id": "26a7429c.87187e",
    "type": "comment",
    "name": "get spoke device,site,wanport info",
    "info": "",
    "comments": "",
    "x": 1791.97265625,
    "y": 385.97265338897705,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "be393db5.b2c4b",
    "type": "comment",
    "name": "Add routes only on activation of spoke Attach site",
    "info": "",
    "comments": "",
    "x": 1452.5038223266602,
    "y": 329.00396728515625,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "3b335da8.075402",
    "type": "comment",
    "name": "Loop for all the hub allotted resources, get respective service data and get vnfs info",
    "info": "",
    "comments": "",
    "x": 2208.50390625,
    "y": 824.503963470459,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "48cb425f.55b89c",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2964.5036239624023,
    "y": 1806.0038652420044,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "6735788d.2eda88",
        "25ec0b7b.fede14"
      ]
    ]
  },
  {
    "id": "42885256.de226c",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3014.5036811828613,
    "y": 1679.003749847412,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "a3360f10.ddde5"
      ]
    ]
  },
  {
    "id": "6735788d.2eda88",
    "type": "switchNode",
    "name": "switch siteId",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$siteidx].name == 'siteId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3149.503547668457,
    "y": 1817.0037078857422,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "b824c970.9e9c08"
      ]
    ]
  },
  {
    "id": "b824c970.9e9c08",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3300.503917694092,
    "y": 1816.003890991211,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "1ab1bd98.e41432"
      ]
    ]
  },
  {
    "id": "1ab1bd98.e41432",
    "type": "set",
    "name": "set prop.hub.siteId",
    "xml": "<set>\n<parameter name='prop.hub.siteId' value='`$mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$siteidx].value`' />\n",
    "comments": "",
    "x": 3472.5039253234863,
    "y": 1813.6044597625732,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "4ae4f054.fa7eb",
    "type": "switchNode",
    "name": "switch request-action",
    "xml": "<switch test='`$connection-attachment-topology-operation-input.request-information.request-action`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2626.0036544799805,
    "y": 2169.0043516159058,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "a20f0327.bdb75",
        "464f548c.98a25c"
      ]
    ]
  },
  {
    "id": "a20f0327.bdb75",
    "type": "outcome",
    "name": "ActivateSDWANAttachmentInstance",
    "xml": "<outcome value='ActivateSDWANAttachmentInstance'>",
    "comments": "",
    "outputs": 1,
    "x": 2896.0310592651367,
    "y": 1980.0353841781616,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "3d36ce09.d3a452"
      ]
    ]
  },
  {
    "id": "cbad3e92.5f2c5",
    "type": "execute",
    "name": "execute RestApiCallNode underlay route",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-underlay.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/routing-protocol/static'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"underlayHubResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3485.5039291381836,
    "y": 1911.0042324066162,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "4b4ae946.a41e78",
        "7402b676.36e648"
      ]
    ]
  },
  {
    "id": "7402b676.36e648",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3731.503833770752,
    "y": 1888.0041208267212,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "4b4ae946.a41e78",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3729.5035133361816,
    "y": 1844.004111289978,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "bae0bb4c.569758"
      ]
    ]
  },
  {
    "id": "bae0bb4c.569758",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing sdwan hub route underlay rest api\" />\n",
    "comments": "",
    "x": 3871.5041999816895,
    "y": 1842.0041942596436,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "c33f2b8.8f859d8",
    "type": "set",
    "name": "Add prop.hub.route",
    "xml": "<set>\n<parameter name='prop.route.vpnId' value='`$prop.vpnId`' />\n<parameter name='prop.route.siteId' value='`$prop.hub.siteId`' />\n<parameter name='prop.route.deviceId' value='`$prop.hub.deviceId`' />\n<parameter name='prop.route.providerIpAddress' value='`$prop.hub.providerIpAddress`' />\n<parameter name='prop.route.wanportId' value='`$prop.spoke.wanPortId`' />\n<parameter name='prop.route.ipAddress' value='`$prop.hub.ipAddress`' />\n\n\n",
    "comments": "",
    "x": 3421.8374042510986,
    "y": 1864.6708335876465,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "d88550f2.429ff",
    "type": "execute",
    "name": "execute RestApiCallNode underlay route",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-underlay.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/routing-protocol/static'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"underlayspokeResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3490.837547302246,
    "y": 2012.671347618103,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "dc754a4a.149ee8",
        "9860dbdc.fb5c78"
      ]
    ]
  },
  {
    "id": "9860dbdc.fb5c78",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3742.837652206421,
    "y": 2000.6713070869446,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "dc754a4a.149ee8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3740.8373317718506,
    "y": 1956.6712975502014,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "1b7c78ed.47ac47"
      ]
    ]
  },
  {
    "id": "1b7c78ed.47ac47",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing sdwan spoke route underlay rest api\" />\n",
    "comments": "",
    "x": 3882.8380184173584,
    "y": 1954.671380519867,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "abc725a.b5905d8",
    "type": "set",
    "name": "Add prop.spoke.route",
    "xml": "<set>\n<parameter name='prop.route.vpnId' value='`$prop.vpnId`' />\n<parameter name='prop.route.siteId' value='`$prop.spoke.siteId`' />\n<parameter name='prop.route.deviceId' value='`$prop.spoke.deviceId`' />\n<parameter name='prop.route.providerIpAddress' value='`$prop.spoke.providerIpAddress`' />\n<parameter name='prop.route.wanportId' value='`$prop.hub.wanPortId`' />                                                \n<parameter name='prop.route.ipAddress' value='`$prop.spoke.ipAddress`' />\n\n\n",
    "comments": "",
    "x": 3431.7014198303223,
    "y": 1975.368059873581,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "4460a0d6.c4761",
    "type": "set",
    "name": "set  prop.underlay.routeIds",
    "xml": "<set>\n<parameter name='prop.underlay.routeIds[$prop.underlay.routeIds_length].hubSiteId' value='`$prop.hub.siteId`' />\n<!--parameter name='prop.underlay.routeIds[$prop.underlay.routeIds_length].spokeSiteId' value='`$prop.spoke.siteId`' /-->\n<parameter name='prop.underlay.routeIds[$prop.underlay.routeIds_length].hubRouteId' value='`$underlayHubResp.success[0].id`' />\n<parameter name='prop.underlay.routeIds[$prop.underlay.routeIds_length].spokeRouteId' value='`$underlayspokeResp.success[0].id`' />\n\n\n\n",
    "comments": "",
    "x": 3442.6688232421875,
    "y": 2060.034790992737,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "3d36ce09.d3a452",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3132.003578186035,
    "y": 1977.5038175582886,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "c33f2b8.8f859d8",
        "abc725a.b5905d8",
        "4460a0d6.c4761",
        "d88550f2.429ff",
        "cbad3e92.5f2c5",
        "f03bf85a.59ad68",
        "6591e05b.5ae5",
        "ab6e34c5.6a48d8"
      ]
    ]
  },
  {
    "id": "50a88f49.37ad4",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3161.0035285949707,
    "y": 2434.504150390625,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "ae46a29e.f97e3",
        "162bc63c.6a40ba",
        "32021f5a.688fc",
        "6c422db5.5ce744",
        "74f4468a.192018"
      ]
    ]
  },
  {
    "id": "464f548c.98a25c",
    "type": "outcome",
    "name": "DeactivateSDWANAttachmentInstance",
    "xml": "<outcome value='DeactivateSDWANAttachmentInstance'>",
    "comments": "",
    "outputs": 1,
    "x": 2909.5035858154297,
    "y": 2428.5039615631104,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "50a88f49.37ad4"
      ]
    ]
  },
  {
    "id": "6591e05b.5ae5",
    "type": "set",
    "name": "Add sites to list and update length",
    "xml": "<set>\n<parameter name='prop.provision.siteIds[$prop.provision.siteIds_length].hubSiteName' value='`$prop.hub.siteName`' />\n<parameter name='prop.provision.siteIds[$prop.provision.siteIds_length].hubSiteId' value='`$prop.hub.siteId`' />\n<parameter name='prop.provision.siteIds[$prop.provision.siteIds_length].spokeSiteName' value='`$prop.spoke.siteName`' />\n<parameter name='prop.provision.siteIds[$prop.provision.siteIds_length].spokeSiteId' value='`$prop.spoke.siteId`' />\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "comments": "",
    "x": 3447.035110473633,
    "y": 2185.035671234131,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "d686d76a.66e9d8",
    "type": "comment",
    "name": "save hubsiteIds and spoke siteIds for provision",
    "info": "",
    "comments": "",
    "x": 3479.035484313965,
    "y": 2141.035545349121,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "8488fc33.1f86c",
    "type": "switchNode",
    "name": "switch name",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$sidx].name == 'name'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3446.034912109375,
    "y": 484.03515625,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "a468bfef.f0d69"
      ]
    ]
  },
  {
    "id": "a468bfef.f0d69",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3646.0346870422363,
    "y": 484.0353183746338,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "861bdc8.697e72"
      ]
    ]
  },
  {
    "id": "861bdc8.697e72",
    "type": "set",
    "name": "set prop.spoke.siteName",
    "xml": "<set>\n<parameter name='prop.spoke.siteName' value='`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$sidx].value`' />\n",
    "comments": "",
    "x": 3834.0354919433594,
    "y": 482.63593196868896,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "25ec0b7b.fede14",
    "type": "switchNode",
    "name": "switch name",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$siteidx].name == 'name'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3148.0349349975586,
    "y": 1783.5350151062012,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "38461c3f.4e0404"
      ]
    ]
  },
  {
    "id": "38461c3f.4e0404",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3299.0353050231934,
    "y": 1782.53519821167,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "1ccd9e7.6905962"
      ]
    ]
  },
  {
    "id": "1ccd9e7.6905962",
    "type": "set",
    "name": "set prop.hub.siteName",
    "xml": "<set>\n<parameter name='prop.hub.siteName' value='`$mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$siteidx].value`' />\n",
    "comments": "",
    "x": 3471.035312652588,
    "y": 1780.1357669830322,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "18ea4160.5b97af",
    "type": "set",
    "name": "set prop.provision.siteIds_length=0",
    "xml": "<set>\n<parameter name='prop.provision.siteIds_length' value='0' />\n\n\n\n",
    "comments": "",
    "x": 471.03517150878906,
    "y": 370.0351610183716,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "2ccd4dc3.00e152",
    "type": "execute",
    "name": "execute RestApiCallNode site provision urls",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-site-provision.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/net/sites/provision-urls'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"provisionUrlRsp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 823.0352020263672,
    "y": 802.0353775024414,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "bbd8ad8.5648f5",
        "8ff338f4.67b7f8"
      ]
    ]
  },
  {
    "id": "8ff338f4.67b7f8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1087.0354614257812,
    "y": 824.0354223251343,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "bbd8ad8.5648f5",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1088.0352478027344,
    "y": 781.0353603363037,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "bb20e181.d535d"
      ]
    ]
  },
  {
    "id": "bb20e181.d535d",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing provision url rest api\" />\n",
    "comments": "",
    "x": 1267.0358047485352,
    "y": 779.0354115962982,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "84666856.592818",
    "type": "for",
    "name": "for providx..prop.provision.siteIds[]",
    "xml": "<for index='providx' start='0' end='`$prop.provision.siteIds_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 464.0352020263672,
    "y": 574.0352010726929,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "e0c31833.56f938"
      ]
    ]
  },
  {
    "id": "e0c31833.56f938",
    "type": "block",
    "name": "block atmoic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 488.0352439880371,
    "y": 784.035174369812,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "14ab7296.d70c4d",
        "2ccd4dc3.00e152",
        "28a5422.99608be"
      ]
    ]
  },
  {
    "id": "14ab7296.d70c4d",
    "type": "set",
    "name": "set prop.spoke.hubSiteId, spokeSiteId",
    "xml": "<set>\n<parameter name='prop.provision.hubSitename' value='`$prop.provision.siteIds[$providx].hubSiteName`' />\n<parameter name='prop.provision.spokeSitename' value='`$prop.provision.siteIds[$providx].spokeSiteName`' />\n<parameter name='prop.provision.hubspokesite[0]' value='`$prop.provision.siteIds[$providx].hubSiteId`' />\n<parameter name='prop.provision.hubspokesite[1]' value='`$prop.provision.siteIds[$providx].spokeSiteId`' />\n<parameter name='prop.provision.hubspokesite_length' value='2' />\n",
    "comments": "",
    "x": 799.0379028320312,
    "y": 660.6368894577026,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "28a5422.99608be",
    "type": "record",
    "name": "record provision url response to the file",
    "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"`'/opt/opendaylight/current/data/log/' + 'HUB-' + $prop.provision.hubSitename + '-SPOKE-' + $prop.provision.spokeSitename + '-provisionUrl'`\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value='`$provisionUrlRsp.success[0].url`'/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 795.0352783203125,
    "y": 896.0352420806885,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "6e2c1efa.030fd",
    "type": "block",
    "name": "block atmoic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2537.035388946533,
    "y": 1051.0352325439453,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "d87f1462.94a148"
      ]
    ]
  },
  {
    "id": "e621a712.c02488",
    "type": "block",
    "name": "block atmoic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2017.0350646972656,
    "y": 614.0352153778076,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "4d2b2a60.5a15c4"
      ]
    ]
  },
  {
    "id": "f3cef2f6.2a146",
    "type": "block",
    "name": "block atmoic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1961.0352325439453,
    "y": 705.0351238250732,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "482a4c29.31cfa4",
        "3b80b5a9.9770ba"
      ]
    ]
  },
  {
    "id": "f03bf85a.59ad68",
    "type": "set",
    "name": "set prop.underlay.routeIds_length++",
    "xml": "<set>\n<parameter name='prop.underlay.routeIds_length' value='`$prop.underlay.routeIds_length + 1`' />\n\n\n\n\n",
    "comments": "",
    "x": 3472.004440307617,
    "y": 2096.2538681030273,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "ab6e34c5.6a48d8",
    "type": "set",
    "name": "Update prop.provision.siteIds_length",
    "xml": "<set>\n<parameter name='prop.provision.siteIds_length' value='`$prop.provision.siteIds_length + 1`' />\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "comments": "",
    "x": 3455.504180908203,
    "y": 2220.253963470459,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "3857554a.ced0aa",
    "type": "set",
    "name": "set prop.spoke.siteidx",
    "xml": "<set>\n<parameter name='prop.spoke.siteidx' value='`$i`' />\n\n",
    "comments": "",
    "x": 2905.7540969848633,
    "y": 450.0039348602295,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "2ce54718.3d9808",
    "type": "set",
    "name": "set  underlay route ids to service data",
    "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$prop.spoke.siteidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$service-data.vnfs.vnf[$prop.spoke.siteidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length].name' value=\"underlayRouteIds\" />\n<parameter name='service-data.vnfs.vnf[$prop.spoke.siteidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$service-data.vnfs.vnf[$prop.spoke.siteidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length].value' value='`$tmp.routeString`' />\n\n\n",
    "comments": "",
    "x": 1928.0045471191406,
    "y": 1937.0043048858643,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "f80aa612.1d1cd8",
    "type": "set",
    "name": "set prop.underlay.routeIds_length=0",
    "xml": "<set>\n<parameter name='prop.underlay.routeIds_length' value='0' />\n\n\n\n",
    "comments": "",
    "x": 476.0000305175781,
    "y": 322.0000190734863,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "74f4468a.192018",
    "type": "for",
    "name": "for loop uidx - Get route Id from prop.underlay.routeIds",
    "xml": "<for index=\"uidx\" start=\"0\" end=\"`$prop.underlay.routeIds_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 3516.6667861938477,
    "y": 2307.3333892822266,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "2f560e9d.06e792"
      ]
    ]
  },
  {
    "id": "2f560e9d.06e792",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3808.333480834961,
    "y": 2307.3333892822266,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "dbb8a9cb.01e2a8"
      ]
    ]
  },
  {
    "id": "dbb8a9cb.01e2a8",
    "type": "switchNode",
    "name": "switch prop.hub.siteId",
    "xml": "<switch test=\"`$prop.underlay.routeIds[$uidx].hubSiteId == $prop.hub.siteId`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3997.33349609375,
    "y": 2307.3335523605347,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "4aa46b8.0419394"
      ]
    ]
  },
  {
    "id": "4aa46b8.0419394",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4168.332931518555,
    "y": 2307.3335514068604,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "74eb4369.b3544c"
      ]
    ]
  },
  {
    "id": "74eb4369.b3544c",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4322.332931518555,
    "y": 2311.333559036255,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "86900a6.74da6f8"
      ]
    ]
  },
  {
    "id": "86900a6.74da6f8",
    "type": "set",
    "name": "set prop.hubRouteId prop.spokeRouteId",
    "xml": "<set>\n<parameter name='prop.hubRouteId' value='`$prop.underlay.routeIds[$uidx].hubRouteId`' />\n<parameter name='prop.spokeRouteId' value='`$prop.underlay.routeIds[$uidx].spokeRouteId`' />\n",
    "comments": "",
    "x": 4408.332939147949,
    "y": 2383.333562850952,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "4d409006.b4615",
    "type": "switchNode",
    "name": "switch underlayRouteIds",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$sidx].name == 'underlayRouteIds'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3451,
    "y": 588.6666259765625,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "c14c6f3d.397e6"
      ]
    ]
  },
  {
    "id": "c14c6f3d.397e6",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3650.9994773864746,
    "y": 576.6667404174805,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "b91a3e00.56049"
      ]
    ]
  },
  {
    "id": "e6b57715.d86fd8",
    "type": "set",
    "name": "set prop.underlay.routeIds",
    "xml": "<set>\n<parameter name='prop.underlay.routeIdsString' value='`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$sidx].value`' />\n",
    "comments": "",
    "x": 4022.000877380371,
    "y": 576.2674503326416,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "7fba3a52.cfca64",
    "type": "switchNode",
    "name": "switch request-action",
    "xml": "<switch test='`$connection-attachment-topology-operation-input.request-information.request-action`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1138.0002899169922,
    "y": 2028.333535194397,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "6d3232d8.e0205c",
        "394f9ac2.7c54d6"
      ]
    ]
  },
  {
    "id": "6d3232d8.e0205c",
    "type": "outcome",
    "name": "ActivateSDWANAttachmentInstance",
    "xml": "<outcome value='ActivateSDWANAttachmentInstance'>",
    "comments": "",
    "outputs": 1,
    "x": 1402.0003356933594,
    "y": 1983.333532333374,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "cc4350b5.e04f4"
      ]
    ]
  },
  {
    "id": "cc4350b5.e04f4",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1643.9728469848633,
    "y": 1979.8022832870483,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "2ce54718.3d9808",
        "c043509c.599d6",
        "af0af852.8614c8",
        "879d0a95.c86bf8"
      ]
    ]
  },
  {
    "id": "a489ec70.35a57",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1647.9728355407715,
    "y": 2063.8024520874023,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "f104a03c.3d9ea"
      ]
    ]
  },
  {
    "id": "394f9ac2.7c54d6",
    "type": "outcome",
    "name": "DeactivateSDWANAttachmentInstance",
    "xml": "<outcome value='DeactivateSDWANAttachmentInstance'>",
    "comments": "",
    "outputs": 1,
    "x": 1399.4729766845703,
    "y": 2065.8022890090942,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "a489ec70.35a57"
      ]
    ]
  },
  {
    "id": "f104a03c.3d9ea",
    "type": "set",
    "name": "set input parameter length -1",
    "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$prop.spoke.siteidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length' value='`$service-data.vnfs.vnf[$prop.spoke.siteidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length - 1`' />\n\n\n\n\n",
    "comments": "",
    "x": 1876.6665344238281,
    "y": 2062.33353805542,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "f8e23d7f.b3d02",
    "type": "comment",
    "name": "Get route routes IDs",
    "info": "",
    "comments": "",
    "x": 3416.333251953125,
    "y": 2268.6666259765625,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "c043509c.599d6",
    "type": "set",
    "name": "set  underlay route ids to service data",
    "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$prop.spoke.siteidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length' value='`$service-data.vnfs.vnf[$prop.spoke.siteidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length + 1`' />\n\n\n\n\n",
    "comments": "",
    "x": 1917.333480834961,
    "y": 2011.666579246521,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "af0af852.8614c8",
    "type": "for",
    "name": "for jidx paramidx - Get topology from servicedata",
    "xml": "<for index=\"jidx\" start=\"0\" end=\"`$prop.underlay.routeIds_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2006.3334045410156,
    "y": 1558.333351135254,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "96c0f1e3.46564"
      ]
    ]
  },
  {
    "id": "71e83fcd.3926a",
    "type": "execute",
    "name": "execute concat",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='concat' >\n    <parameter name=\"source\" value='`$tmp.concat`'/>\n    <parameter name=\"outputPath\" value=\"tmp.concat1\"/>\n    <parameter name=\"target\" value='`$prop.underlay.routeIds[$jidx].hubRouteId`'/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2190.333740234375,
    "y": 1692.0005540847778,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "5b1d10b7.e85ce",
    "type": "execute",
    "name": "execute concat",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='concat' >\n    <parameter name=\"source\" value='`$prop.underlay.routeIds[$jidx].hubSiteId`'/>\n    <parameter name=\"outputPath\" value=\"tmp.concat\"/>\n    <parameter name=\"target\" value=\",\"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2200.3337326049805,
    "y": 1644.6668920516968,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "96c0f1e3.46564",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1913.333423614502,
    "y": 1743.6666812896729,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "5b1d10b7.e85ce",
        "71e83fcd.3926a",
        "4f918e1e.65c27",
        "743189f.b107678",
        "a740f981.130cb8",
        "7f673568.55d36c"
      ]
    ]
  },
  {
    "id": "4f918e1e.65c27",
    "type": "execute",
    "name": "execute concat",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='concat' >\n    <parameter name=\"source\" value='`$tmp.concat1`'/>\n    <parameter name=\"outputPath\" value=\"tmp.concat2\"/>\n    <parameter name=\"target\" value=\",\"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2197.3334426879883,
    "y": 1731.6667852401733,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "743189f.b107678",
    "type": "execute",
    "name": "execute concat",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='concat' >\n    <parameter name=\"source\" value='`$tmp.concat2`'/>\n    <parameter name=\"outputPath\" value=\"tmp.concat3\"/>\n    <parameter name=\"target\" value='`$prop.underlay.routeIds[$jidx].spokeRouteId`'/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2197.3334426879883,
    "y": 1767.6667852401733,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "a740f981.130cb8",
    "type": "execute",
    "name": "execute concat",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='concat' >\n    <parameter name=\"source\" value='`$tmp.concat3`'/>\n    <parameter name=\"outputPath\" value=\"tmp.concat4\"/>\n    <parameter name=\"target\" value=\" | \"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2190.3334426879883,
    "y": 1808.0001592636108,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "7f673568.55d36c",
    "type": "execute",
    "name": "execute concat",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='concat' >\n    <parameter name=\"source\" value='`$tmp.routeString`'/>\n    <parameter name=\"outputPath\" value=\"tmp.routeString\"/>\n    <parameter name=\"target\" value='`$tmp.concat4`'/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2193.333381652832,
    "y": 1862.6666984558105,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "879d0a95.c86bf8",
    "type": "set",
    "name": "Set tmp.routeString",
    "xml": "<set>\n<parameter name='tmp.routeString' value=\"\" />\n\n",
    "comments": "",
    "x": 1910.3334045410156,
    "y": 1499.6666822433472,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "b91a3e00.56049",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3799.0002250671387,
    "y": 623.0000381469727,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "e6b57715.d86fd8",
        "4cfad752.b82ab8"
      ]
    ]
  },
  {
    "id": "4cfad752.b82ab8",
    "type": "execute",
    "name": "execute split |",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$prop.underlay.routeIdsString`'/>\n<parameter name=\"regex\" value=\" | \"/>\n<parameter name=\"ctx_memory_result_key\" value=\"prop.underlay.routeIdsValue\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3977.0002365112305,
    "y": 643.0000381469727,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "18dab504.682e9b",
        "e6713c9a.ccf4e"
      ]
    ]
  },
  {
    "id": "e6713c9a.ccf4e",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4154.0002517700195,
    "y": 624.0000371932983,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "f6d503b7.ca422"
      ]
    ]
  },
  {
    "id": "18dab504.682e9b",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4143.0002517700195,
    "y": 672.000039100647,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "24d2d870.cadd68"
      ]
    ]
  },
  {
    "id": "a99b2248.b5ad4",
    "type": "set",
    "name": "set ipAddress prefixLength",
    "xml": "<set>\n<parameter name='prop.underlay.routeIds[$prop.underlay.routeIds_length].hubSiteId' value='`$prop.underlay.routeIdsValues[0]`' />\n<parameter name='prop.underlay.routeIds[$prop.underlay.routeIds_length].hubRouteId' value='`$prop.underlay.routeIdsValues[1]`' />\n<parameter name='prop.underlay.routeIds[$prop.underlay.routeIds_length].spokeRouteId' value='`$prop.underlay.routeIdsValues[2]`' />",
    "comments": "",
    "x": 5340.001117706299,
    "y": 558.0002794265747,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "24d2d870.cadd68",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4273.000255584717,
    "y": 672.000039100647,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "f6d503b7.ca422",
    "type": "for",
    "name": "for loop ridx ",
    "xml": "<for index=\"ridx\" start=\"0\" end=\"`$prop.underlay.routeIdsValue_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 4299.999938964844,
    "y": 622.0000371932983,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "d316c9fd.2bfac8"
      ]
    ]
  },
  {
    "id": "d316c9fd.2bfac8",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4478.332950592041,
    "y": 619.0000381469727,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "cc212d5d.4ecc7",
        "c2d5bdc6.1751b"
      ]
    ]
  },
  {
    "id": "cc212d5d.4ecc7",
    "type": "execute",
    "name": "execute split ,",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$prop.underlay.routeIdsValue[$ridx]`'/>\n<parameter name=\"regex\" value=\",\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"prop.underlay.routeIdsValues\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 4653.332962036133,
    "y": 618.000036239624,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "a41a70c9.992e7",
        "4e196c9a.1ec4e4"
      ]
    ]
  },
  {
    "id": "a41a70c9.992e7",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4810.33296585083,
    "y": 595.0000438690186,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "29342783.705ee8"
      ]
    ]
  },
  {
    "id": "4e196c9a.1ec4e4",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4799.33296585083,
    "y": 643.0000457763672,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "31dadcd0.9c88f4"
      ]
    ]
  },
  {
    "id": "31dadcd0.9c88f4",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4929.332969665527,
    "y": 643.0000457763672,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "c309d201.f689a",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5132.665496826172,
    "y": 574.0001978874207,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "a99b2248.b5ad4",
        "d11539fc.77a698"
      ]
    ]
  },
  {
    "id": "d11539fc.77a698",
    "type": "set",
    "name": "set ipAddress prefixLength",
    "xml": "<set>\n<parameter name='prop.underlay.routeIds_length' value='`$prop.underlay.routeIds_length + 1`' />\n",
    "comments": "",
    "x": 5332.333156585693,
    "y": 600.000075340271,
    "z": "816d5e60.eba45",
    "wires": []
  },
  {
    "id": "29342783.705ee8",
    "type": "switchNode",
    "name": "switch prop.underlay.routeIdsValues_length",
    "xml": "<switch test='`$prop.underlay.routeIdsValues_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5008.667121887207,
    "y": 476.0000686645508,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "4afb066.ff7c6f8",
        "6e26a8d2.50c7d8"
      ]
    ]
  },
  {
    "id": "4afb066.ff7c6f8",
    "type": "outcome",
    "name": "3",
    "xml": "<outcome value='3'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5243.636054992676,
    "y": 512.9687957763672,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "c309d201.f689a"
      ]
    ]
  },
  {
    "id": "6e26a8d2.50c7d8",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5260.666980743408,
    "y": 395.00000953674316,
    "z": "816d5e60.eba45",
    "wires": [
      [
        "cde0413a.7980f"
      ]
    ]
  },
  {
    "id": "cde0413a.7980f",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5421.66650390625,
    "y": 435,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  },
  {
    "id": "c2d5bdc6.1751b",
    "type": "record",
    "name": "record",
    "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/svclogic.log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"execute split , XXXXXXXXXXXX\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 4647.667106628418,
    "y": 569.0001220703125,
    "z": "816d5e60.eba45",
    "wires": [
      []
    ]
  }
]
