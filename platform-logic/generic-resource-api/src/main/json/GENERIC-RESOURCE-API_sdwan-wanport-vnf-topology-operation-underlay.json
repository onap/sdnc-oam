[
  {
    "id": "b5ebbde.e59a04",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 109,
    "y": 43,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "a87f9663.877998"
      ]
    ]
  },
  {
    "id": "a87f9663.877998",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 225.2856903076172,
    "y": 94.23810768127441,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "8c1b6d3.067719"
      ]
    ]
  },
  {
    "id": "8c1b6d3.067719",
    "type": "method",
    "name": "method sdwan-wanport-vnf-topology-operation-underlay",
    "xml": "<method rpc='sdwan-wanport-vnf-topology-operation-underlay' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 228.42861938476562,
    "y": 179.00003147125244,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "3cd9be6d.873c82"
      ]
    ]
  },
  {
    "id": "3cd9be6d.873c82",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 160.66668701171875,
    "y": 287.66673278808594,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "2d7b33ef.a2d9ac",
        "383a5f3d.e4cb2",
        "70ceaafc.e0d3f4",
        "c880f4e9.6d6098"
      ]
    ]
  },
  {
    "id": "2d7b33ef.a2d9ac",
    "type": "for",
    "name": "for cidx..service-data.consumed-allotted-resources.consumed-allotted-resource[]",
    "xml": "<for index='cidx' start='0' end='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 598.0004119873047,
    "y": 398.66683769226074,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "e9598182.81589"
      ]
    ]
  },
  {
    "id": "be430b5e.14a828",
    "type": "set",
    "name": "set prop.ar.allotted-resource-id",
    "xml": "<set>\n<parameter name='prop.ar.allotted-resource-id' value='`$service-data.consumed-allotted-resources.consumed-allotted-resource[$cidx].allotted-resource-id`' />\n",
    "comments": "",
    "x": 1385.0013427734375,
    "y": 115.96877861022949,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "423b3b97.a50914",
    "type": "comment",
    "name": "Query MDSAL for AR",
    "info": "",
    "comments": "",
    "x": 1710.3340148925781,
    "y": 139.96864795684814,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "dab21607.3703b8",
    "type": "comment",
    "name": "Query MDSAL to get parent service based on service instance id from AR",
    "info": "",
    "comments": "",
    "x": 2180.334873199463,
    "y": 158.96862697601318,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "90cd3398.44586",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1959.66841506958,
    "y": 194.63526725769043,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "1d70b537.cd409b"
      ]
    ]
  },
  {
    "id": "1d70b537.cd409b",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2114.668254852295,
    "y": 194.13510036468506,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "d282839d.a628"
      ]
    ]
  },
  {
    "id": "bce07922.8c4f98",
    "type": "other",
    "name": "outcome 1",
    "xml": "<outcome value='1'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2438.3587913513184,
    "y": 190.75424098968506,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "3b07cad3.619296"
      ]
    ]
  },
  {
    "id": "ee52805a.8bd8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Connection attachement resource not found\" />\n    \n",
    "comments": "",
    "x": 2584.1275672912598,
    "y": 230.20122909545898,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "259f1fc9.28f91",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1952.5201416015625,
    "y": 241.70127391815186,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "b7b7bf01.123cf"
      ]
    ]
  },
  {
    "id": "b7b7bf01.123cf",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2102.5199851989746,
    "y": 242.36782932281494,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "7cd11e1b.bfaf1"
      ]
    ]
  },
  {
    "id": "7c51c058.0306e",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2426.6867446899414,
    "y": 228.03460121154785,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "ee52805a.8bd8"
      ]
    ]
  },
  {
    "id": "d282839d.a628",
    "type": "switchNode",
    "name": "switch cr length",
    "xml": "<switch test='`$mdsal-ar.connection-attachment-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2278.668430328369,
    "y": 194.6352834701538,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "bce07922.8c4f98",
        "7c51c058.0306e"
      ]
    ]
  },
  {
    "id": "91cc0551.bc01e8",
    "type": "set",
    "name": "set parent-service-instance-id",
    "xml": "<set>\n<parameter name='prop.parent-service-instance-id' value='`$mdsal-ar.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.allotted-resource-information.parent-service-instance-id`' />\n\n",
    "comments": "",
    "x": 2834.0020294189453,
    "y": 191.63526439666748,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "3b07cad3.619296",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic='true'>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2588.4778213500977,
    "y": 190.80180072784424,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "91cc0551.bc01e8",
        "dc60366a.2e9048"
      ]
    ]
  },
  {
    "id": "7cd11e1b.bfaf1",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Connection attachement resource not found\" />\n    \n",
    "comments": "",
    "x": 2270.001438140869,
    "y": 240.63520526885986,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "dab3ccab.cce12",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2057.303554534912,
    "y": 512.7709312438965,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "d5fc5211.c019"
      ]
    ]
  },
  {
    "id": "4c1ffccd.7a1ed4",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2049.15535736084,
    "y": 547.8370161056519,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "4fdb783b.5926a8"
      ]
    ]
  },
  {
    "id": "4fdb783b.5926a8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN resource not found\" />\n    \n",
    "comments": "",
    "x": 2195.304130554199,
    "y": 548.1045122146606,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "d5fc5211.c019",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2177.3038024902344,
    "y": 512.771014213562,
    "z": "33eaf422.44290c",
    "wires": [
      []
    ]
  },
  {
    "id": "c5126628.a1afc8",
    "type": "for",
    "name": "for pnidx.. mdsal-psd.networks.network_length[]",
    "xml": "<for index='pnidx' start='0' end='`$mdsal-psd.service-data.networks.network_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1740.6683502197266,
    "y": 612.3028893470764,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "84a7b7df.1615b8"
      ]
    ]
  },
  {
    "id": "c8ac708.b0a709",
    "type": "switchNode",
    "name": "switch ActivateSDWANConnectivityInstance",
    "xml": "<switch test=\"`$mdsal-psd.service-data.networks.network[$pnidx].network-data.request-information.request-action == 'ActivateSDWANConnectivityInstance'`\">\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 2277.3349990844727,
    "y": 583.3028283119202,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "af2e2a1f.e9aba8"
      ]
    ]
  },
  {
    "id": "af2e2a1f.e9aba8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2522.334518432617,
    "y": 582.3028283119202,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "64a2447b.58478c"
      ]
    ]
  },
  {
    "id": "64a2447b.58478c",
    "type": "set",
    "name": "set tmp.pnidx ",
    "xml": "<set>\n<parameter name='tmp.pnidx' value='`$pnidx`' />\n\n",
    "comments": "",
    "x": 2678.3342056274414,
    "y": 582.3028283119202,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "cf236aa.4478b98",
    "type": "for",
    "name": "for loop paramidx - Get topology from servicedata",
    "xml": "<for index=\"paramidx\" start=\"0\" end=\"`$mdsal-psd.service-data.networks.network[$tmp.pnidx].network-data.network-request-input.network-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 1746.3349304199219,
    "y": 662.3024039268494,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "8e2c0789.42db78"
      ]
    ]
  },
  {
    "id": "5a69b1be.1055d",
    "type": "switchNode",
    "name": "switch topology",
    "xml": "<switch test=\"`$mdsal-psd.service-data.networks.network[$tmp.pnidx].network-data.network-request-input.network-input-parameters.param[$paramidx].name == 'topology'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2178.335252761841,
    "y": 660.3024020195007,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "333e463b.eac74a"
      ]
    ]
  },
  {
    "id": "333e463b.eac74a",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2329.3352642059326,
    "y": 658.3024439811707,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "3622de43.1881c2"
      ]
    ]
  },
  {
    "id": "3622de43.1881c2",
    "type": "set",
    "name": "set topology",
    "xml": "<set>\n<parameter name='prop.topology' value='`$mdsal-psd.service-data.networks.network[$tmp.pnidx].network-data.network-request-input.network-input-parameters.param[$paramidx].value`' />\n",
    "comments": "",
    "x": 2470.3349933624268,
    "y": 657.9023776054382,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "b9ac21ad.456c9",
    "type": "switchNode",
    "name": "switch tmp.pnidx ",
    "xml": "<switch test=\"`$tmp.pnidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2184.3346939086914,
    "y": 622.9690413475037,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "14fa21e1.174cde"
      ]
    ]
  },
  {
    "id": "14fa21e1.174cde",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 2331.7633361816406,
    "y": 622.5404515266418,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "aa33b299.d2b4d"
      ]
    ]
  },
  {
    "id": "aa33b299.d2b4d",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 2475.1921920776367,
    "y": 622.6835255622864,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "f19570ac.55187",
    "type": "switchNode",
    "name": "switch topology hub-spoke",
    "xml": "<switch test=\"`$prop.topology == 'hub-spoke'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 1551.3348426818848,
    "y": 759.3023405075073,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "aa80dabf.aca3c8",
        "4031750f.9789cc"
      ]
    ]
  },
  {
    "id": "aa80dabf.aca3c8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1741.334529876709,
    "y": 784.3028259277344,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "768ac816.c95648"
      ]
    ]
  },
  {
    "id": "4031750f.9789cc",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1742.3353233337402,
    "y": 712.3024568557739,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "bcb708b4.4756f8"
      ]
    ]
  },
  {
    "id": "bcb708b4.4756f8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1872.3353271484375,
    "y": 711.3024568557739,
    "z": "33eaf422.44290c",
    "wires": [
      []
    ]
  },
  {
    "id": "768ac816.c95648",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1746.66748046875,
    "y": 852.3020601272583,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "37a8a2fc.2a711e"
      ]
    ]
  },
  {
    "id": "37a8a2fc.2a711e",
    "type": "for",
    "name": "for ppidx.. mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[]",
    "xml": "<for index='ppidx' start='0' end='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 2154.000732421875,
    "y": 852.6356782913208,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "2c05f76b.7d8c98"
      ]
    ]
  },
  {
    "id": "27aa5d13.3e58c2",
    "type": "set",
    "name": "set prop.ar.provided-allotted-resource-id",
    "xml": "<set>\n<parameter name='prop.ar.provided-allotted-resource-id' value='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[$ppidx].allotted-resource-id`' />\n\n",
    "comments": "",
    "x": 2245.0018463134766,
    "y": 930.6359763145447,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "2e8e3485.54a23c",
    "type": "for",
    "name": "for loop aridx - Get role from allotted resource",
    "xml": "<for index=\"aridx\" start=\"0\" end=\"`$mdsal-providedAr.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2263.0025482177734,
    "y": 1041.302767753601,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "1e03ba47.0fb3f6"
      ]
    ]
  },
  {
    "id": "a525e63a.cc2b38",
    "type": "switchNode",
    "name": "switch Role",
    "xml": "<switch test=\"`$mdsal-providedAr.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.param[$aridx].name == 'Role'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2672.002658843994,
    "y": 1044.3028545379639,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "3f99d6d3.e0611a"
      ]
    ]
  },
  {
    "id": "3f99d6d3.e0611a",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2813.0029907226562,
    "y": 1043.3028535842896,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "7bec0d2f.0381d4"
      ]
    ]
  },
  {
    "id": "7bec0d2f.0381d4",
    "type": "set",
    "name": "set prop.role",
    "xml": "<set>\n<parameter name='prop.role' value='`$mdsal-providedAr.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.param[$aridx].value`' />\n",
    "comments": "",
    "x": 2954.0030250549316,
    "y": 1044.9027452468872,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "8fa9655b.7c6ef8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2749.0020446777344,
    "y": 947.969269990921,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "788b9cb8.8b37d4"
      ]
    ]
  },
  {
    "id": "3a2551b1.4f0ace",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2745.8537673950195,
    "y": 1002.0353531837463,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "5672e76f.825118"
      ]
    ]
  },
  {
    "id": "5672e76f.825118",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN resource not found\" />\n    \n",
    "comments": "",
    "x": 2891.002540588379,
    "y": 999.3028502464294,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "788b9cb8.8b37d4",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2877.0020484924316,
    "y": 947.9692711830139,
    "z": "33eaf422.44290c",
    "wires": [
      []
    ]
  },
  {
    "id": "f102bda6.18929",
    "type": "switchNode",
    "name": "switch role hub",
    "xml": "<switch test=\"`$prop.role == hub`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2129.3351821899414,
    "y": 1106.6358079910278,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "145fa94e.f27887",
        "f3be5614.599b68"
      ]
    ]
  },
  {
    "id": "da4408c3.f5c0d8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2445.3345680236816,
    "y": 1082.6354112625122,
    "z": "33eaf422.44290c",
    "wires": [
      []
    ]
  },
  {
    "id": "77da5adf.834034",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2855.3042030334473,
    "y": 1178.1045179367065,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "8a4c0c4d.62361"
      ]
    ]
  },
  {
    "id": "8429ea0a.844dc8",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2857.155773162842,
    "y": 1238.170599937439,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "e9382022.a0267"
      ]
    ]
  },
  {
    "id": "e9382022.a0267",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SDWAN service-data not found\" />\n    \n",
    "comments": "",
    "x": 3001.304546356201,
    "y": 1200.4380140304565,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "8a4c0c4d.62361",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2985.3042221069336,
    "y": 1167.1046781539917,
    "z": "33eaf422.44290c",
    "wires": [
      []
    ]
  },
  {
    "id": "cf6c45e0.a382b8",
    "type": "set",
    "name": "set prop.ar-service-instance-id",
    "xml": "<set>\n<parameter name='prop.ar-service-instance-id' value='`$mdsal-providedAr.connection-attachment-allotted-resource[0].allotted-resource-data.connection-attachment-topology.allotted-resource-identifiers.consuming-service-instance-id`' />\n",
    "comments": "",
    "x": 2457.3356018066406,
    "y": 1166.6360107660294,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "57a73c1e.aeb484",
    "type": "for",
    "name": "for arvidx.. mdsal-arsd.service-data.vnfs.vnf_length[]",
    "xml": "<for index='arvidx' start='0' end='`$mdsal-arsd.service-data.vnfs.vnf_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 2501.0020751953125,
    "y": 1288.6358003616333,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "c345e276.9551d"
      ]
    ]
  },
  {
    "id": "c345e276.9551d",
    "type": "block",
    "name": "block atmoic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2847.6683959960938,
    "y": 1278.6357765197754,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "568b8936.7e3108",
        "39f7ac2d.b359d4",
        "5ab57864.07d758"
      ]
    ]
  },
  {
    "id": "568b8936.7e3108",
    "type": "switchNode",
    "name": "switch ActivateSDWANPortInstance",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$arvidx].vnf-data.request-information.request-action == 'ActivateSDWANPortInstance'`\">\n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 3105.6684799194336,
    "y": 1233.636646270752,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "61fa4242.861d3c"
      ]
    ]
  },
  {
    "id": "cb874e53.482c8",
    "type": "switchNode",
    "name": "switch tmp.portvidx ",
    "xml": "<switch test=\"`$tmp.portvidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2582.668212890625,
    "y": 1333.3024454116821,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "6aed06ab.403dd8"
      ]
    ]
  },
  {
    "id": "815939d8.db2788",
    "type": "for",
    "name": "for loop wportidx - Get wan port ID from servicedata",
    "xml": "<for index=\"wportidx\" start=\"0\" end=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2507.6688232421875,
    "y": 1488.6367044448853,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "233ccbaa.09c2a4"
      ]
    ]
  },
  {
    "id": "6aed06ab.403dd8",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 2743.0966777801514,
    "y": 1332.8739652633667,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "ed789211.6aa24"
      ]
    ]
  },
  {
    "id": "ed789211.6aa24",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id (port) not found in service-data\" />\n",
    "comments": "",
    "x": 2880.525634765625,
    "y": 1333.0173768997192,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "61fa4242.861d3c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3333.668167114258,
    "y": 1231.6366472244263,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "8dcdd808.562708"
      ]
    ]
  },
  {
    "id": "233ccbaa.09c2a4",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2850.669807434082,
    "y": 1491.6369543075562,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "a50a8ecc.70146",
        "c6553e69.23e06",
        "a6ca66b6.132b88",
        "f8ad0824.756498"
      ]
    ]
  },
  {
    "id": "a50a8ecc.70146",
    "type": "switchNode",
    "name": "switch transportNetworkName",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$wportidx].name == 'transportNetworkName'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3145.670757293701,
    "y": 1430.6374912261963,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "1b0657c2.3d75f8"
      ]
    ]
  },
  {
    "id": "8dcdd808.562708",
    "type": "set",
    "name": "set tmp.portvidx ",
    "xml": "<set>\n<parameter name='tmp.portvidx' value='`$arvidx`' />\n\n",
    "comments": "",
    "x": 3488.6678504943848,
    "y": 1231.636646270752,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "1b0657c2.3d75f8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3338.6707725524902,
    "y": 1430.63765335083,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "b34f100.12863f"
      ]
    ]
  },
  {
    "id": "b34f100.12863f",
    "type": "set",
    "name": "set prop.hub.transportNetworkName",
    "xml": "<set>\n<parameter name='prop.hub.transportNetworkName' value='`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$wportidx].value`' />\n",
    "comments": "",
    "x": 3556.6707801818848,
    "y": 1429.23823928833,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "c6553e69.23e06",
    "type": "switchNode",
    "name": "switch wanPortId",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$wportidx].name == 'wanPortId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3107.003490447998,
    "y": 1464.6371002197266,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "2bec9518.ec7c8a"
      ]
    ]
  },
  {
    "id": "2bec9518.ec7c8a",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3268.003818511963,
    "y": 1465.6371803283691,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "37425798.ff2018"
      ]
    ]
  },
  {
    "id": "37425798.ff2018",
    "type": "set",
    "name": "set prop.hub.wanPortId",
    "xml": "<set>\n<parameter name='prop.hub.wanPortId' value='`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$wportidx].value`' />\n",
    "comments": "",
    "x": 3458.004280090332,
    "y": 1465.2374563217163,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "d298818e.120b",
    "type": "switchNode",
    "name": "switch  prop.hub.transportNetworkName==prop.spoke.transportNetworkName",
    "xml": "<switch test=\"`$prop.hub.transportNetworkName == $prop.spoke.transportNetworkName`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2585.004150390625,
    "y": 1591.304440498352,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "7a56c9bb.004ba8",
        "6f7c3402.62f4ac"
      ]
    ]
  },
  {
    "id": "7a56c9bb.004ba8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2931.0036811828613,
    "y": 1628.3045144081116,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "3d53e5a5.8f912a"
      ]
    ]
  },
  {
    "id": "6f7c3402.62f4ac",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2935.0041694641113,
    "y": 1563.3041467666626,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "67b638dd.ee4608"
      ]
    ]
  },
  {
    "id": "67b638dd.ee4608",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3075.0040969848633,
    "y": 1591.304271697998,
    "z": "33eaf422.44290c",
    "wires": [
      []
    ]
  },
  {
    "id": "2c05f76b.7d8c98",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1896.0322265625,
    "y": 961.8333101272583,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "27aa5d13.3e58c2",
        "2e8e3485.54a23c",
        "f102bda6.18929",
        "74cd5045.40831",
        "447d9e5f.d5a82"
      ]
    ]
  },
  {
    "id": "e66f705e.b1887",
    "type": "switchNode",
    "name": "switch vpnId",
    "xml": "<switch test=\"`$mdsal-psd.service-data.networks.network[$tmp.pnidx].network-data.network-request-input.network-input-parameters.param[$paramidx].name == 'vpnId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2168.001268386841,
    "y": 704.6354126930237,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "3f0e1104.f843be"
      ]
    ]
  },
  {
    "id": "3f0e1104.f843be",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2312.0012798309326,
    "y": 704.6354537010193,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "ca8d4515.16e2d8"
      ]
    ]
  },
  {
    "id": "ca8d4515.16e2d8",
    "type": "set",
    "name": "set prop.vpnId",
    "xml": "<set>\n<parameter name='prop.vpnId' value='`$mdsal-psd.service-data.networks.network[$tmp.pnidx].network-data.network-request-input.network-input-parameters.param[$paramidx].value`' />\n",
    "comments": "",
    "x": 2470.001001358032,
    "y": 703.2353882789612,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "49f7ab80.b2f444",
    "type": "set",
    "name": "Set prop.hubTnpId",
    "xml": "<set>\n<parameter name='prop.hubTnpId' value='$prop.hub.wanPortId' />\n\n",
    "comments": "",
    "x": 2622.336555480957,
    "y": 1717.6363048553467,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "e429ce4e.ff4d3",
    "type": "execute",
    "name": "execute RestApiCallNode underlay route",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-underlay.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/routing-protocol/static/action/batch-delete'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"underlayHubResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3483.335531234741,
    "y": 2176.970527648926,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "ec4a9fe3.5d773",
        "c11c5434.daa9b8"
      ]
    ]
  },
  {
    "id": "c11c5434.daa9b8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3730.3355026245117,
    "y": 2161.970682144165,
    "z": "33eaf422.44290c",
    "wires": [
      []
    ]
  },
  {
    "id": "ec4a9fe3.5d773",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3728.3351821899414,
    "y": 2117.970672607422,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "dfdd1a66.f211b8"
      ]
    ]
  },
  {
    "id": "dfdd1a66.f211b8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing sdwan hub route underlay rest api\" />\n",
    "comments": "",
    "x": 3870.335868835449,
    "y": 2115.9707555770874,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "f88633ef.4a895",
    "type": "set",
    "name": "Add prop.hub.route",
    "xml": "<set>\n<parameter name='prop.route.id' value='`$prop.hubRouteId`' />\n<parameter name='prop.route.vpnId' value='`$prop.vpnId`' />\n<parameter name='prop.route.siteId' value='`$prop.hub.siteId`' />\n<parameter name='prop.route.deviceId' value='`$prop.hub.deviceId`' />\n<parameter name='prop.route.providerIpAddress' value='`$prop.hub.providerIpAddress`' />\n<parameter name='prop.route.wanportId' value='`$prop.spoke.wanportId`' />\n<parameter name='prop.route.ipAddress' value='`$prop.hub.ipAddress`' />\n\n\n",
    "comments": "",
    "x": 3414.669235229492,
    "y": 2140.6372261047363,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "9c47cd10.cba71",
    "type": "execute",
    "name": "execute RestApiCallNode underlay route",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-underlay.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/routing-protocol/static/action/batch-delete'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"underlayspokeResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3489.669235229492,
    "y": 2282.637691259384,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "97c364c.1574998",
        "46a68448.91960c"
      ]
    ]
  },
  {
    "id": "46a68448.91960c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3734.669120788574,
    "y": 2261.6379222869873,
    "z": "33eaf422.44290c",
    "wires": [
      []
    ]
  },
  {
    "id": "97c364c.1574998",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3732.668800354004,
    "y": 2217.637912750244,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "32d31d6b.e39f42"
      ]
    ]
  },
  {
    "id": "32d31d6b.e39f42",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing sdwan spoke route underlay rest api\" />\n",
    "comments": "",
    "x": 3874.6694869995117,
    "y": 2215.6379957199097,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "39f7ac2d.b359d4",
    "type": "switchNode",
    "name": "switch ActivateSDWANDeviceInstance",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$arvidx].vnf-data.request-information.request-action == 'ActivateSDWANDeviceInstance'`\">\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 3116.5320568084717,
    "y": 1266.833604812622,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "f872eafd.ca0638"
      ]
    ]
  },
  {
    "id": "50e86192.f47ba",
    "type": "switchNode",
    "name": "switch tmp.devicevidx ",
    "xml": "<switch test=\"`$tmp.devicevidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2588.5316314697266,
    "y": 1375.4999265670776,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "e276c36a.0c845"
      ]
    ]
  },
  {
    "id": "e276c36a.0c845",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 2754.9600677490234,
    "y": 1375.0714597702026,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "58c8206f.bb829"
      ]
    ]
  },
  {
    "id": "58c8206f.bb829",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id (device) not found in service-data\" />\n",
    "comments": "",
    "x": 2895.388999938965,
    "y": 1377.2144346237183,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "f872eafd.ca0638",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3344.531744003296,
    "y": 1264.8336057662964,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "9b7f11e8.f156f"
      ]
    ]
  },
  {
    "id": "9b7f11e8.f156f",
    "type": "set",
    "name": "set tmp.devicevidx ",
    "xml": "<set>\n<parameter name='tmp.devicevidx' value='`$arvidx`' />\n\n",
    "comments": "",
    "x": 3499.531427383423,
    "y": 1264.833604812622,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "5ab57864.07d758",
    "type": "switchNode",
    "name": "switch ActivateSiteInstance",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$arvidx].vnf-data.request-information.request-action == 'ActivateSiteInstance'`\">\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 3079.532127380371,
    "y": 1300.8336687088013,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "c3a08b58.d519a8"
      ]
    ]
  },
  {
    "id": "971c87ae.5fde98",
    "type": "switchNode",
    "name": "switch tmp.sitevidx ",
    "xml": "<switch test=\"`$tmp.sitevidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2587.5315017700195,
    "y": 1413.4998044967651,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "9fcf4fcb.f5c0f"
      ]
    ]
  },
  {
    "id": "9fcf4fcb.f5c0f",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 2747.959966659546,
    "y": 1413.0713243484497,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "2e7d1637.59ed7a"
      ]
    ]
  },
  {
    "id": "2e7d1637.59ed7a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id (site) not found in service-data\" />\n",
    "comments": "",
    "x": 2896.388921737671,
    "y": 1415.2143306732178,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "c3a08b58.d519a8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3267.531692504883,
    "y": 1300.8338346481323,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "90c635f1.794b58"
      ]
    ]
  },
  {
    "id": "90c635f1.794b58",
    "type": "set",
    "name": "set tmp.sitevidx ",
    "xml": "<set>\n<parameter name='tmp.sitevidx' value='`$arvidx`' />\n\n",
    "comments": "",
    "x": 3422.5313758850098,
    "y": 1300.833833694458,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "d7805819.9cd108",
    "type": "for",
    "name": "for loop deviceidx - Get wan port ID from servicedata",
    "xml": "<for index=\"deviceidx\" start=\"0\" end=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.devicevidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2719.5331497192383,
    "y": 1753.834059715271,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "82cf7632.68ed28"
      ]
    ]
  },
  {
    "id": "2060fdef.b0b7d2",
    "type": "switchNode",
    "name": "switch deviceId",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.devicevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$deviceidx].name == 'deviceId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3180.5345039367676,
    "y": 1667.834927558899,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "2cf983c4.8e5dac"
      ]
    ]
  },
  {
    "id": "2cf983c4.8e5dac",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3331.5348777770996,
    "y": 1664.835171699524,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "234f9431.3dcaac"
      ]
    ]
  },
  {
    "id": "234f9431.3dcaac",
    "type": "set",
    "name": "set prop.hub.deviceId",
    "xml": "<set>\n<parameter name='prop.hub.deviceId' value='`$mdsal-arsd.service-data.vnfs.vnf[$tmp.devicevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$deviceidx].value`' />\n",
    "comments": "",
    "x": 3506.535125732422,
    "y": 1664.4356966018677,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "4ed5eacf.f6a1c4",
    "type": "for",
    "name": "for loop siteidx - Get site ID from servicedata",
    "xml": "<for index=\"siteidx\" start=\"0\" end=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2694.0330352783203,
    "y": 1810.83407497406,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "c6190b7b.0c6f78"
      ]
    ]
  },
  {
    "id": "c9e1f848.8aa118",
    "type": "switchNode",
    "name": "switch spokeRouteId",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$siteidx].name == 'spokeRouteId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3160.034511566162,
    "y": 1822.8348779678345,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "480353b6.36bf3c"
      ]
    ]
  },
  {
    "id": "480353b6.36bf3c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3323.035057067871,
    "y": 1820.8351745605469,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "7e8ff406.9f32cc"
      ]
    ]
  },
  {
    "id": "7e8ff406.9f32cc",
    "type": "set",
    "name": "set prop.spokeRouteId",
    "xml": "<set>\n<parameter name='prop.spokeRouteId' value='`$mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$siteidx].value`' />\n",
    "comments": "",
    "x": 3492.0350646972656,
    "y": 1820.4357604980469,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "4f4875cc.67999c",
    "type": "comment",
    "name": "Add route src->dst, dst->src",
    "info": "",
    "comments": "",
    "x": 2910.6687927246094,
    "y": 1858.6359510421753,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "2f1d0b59.a2f164",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2132.334228515625,
    "y": 1238.968747138977,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "57a73c1e.aeb484",
        "815939d8.db2788",
        "d298818e.120b",
        "bc0801cd.444e3",
        "cf6c45e0.a382b8",
        "380e9d46.aac952",
        "150f28bb.9cebb7"
      ]
    ]
  },
  {
    "id": "bc0801cd.444e3",
    "type": "block",
    "name": "block atmoic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2387.333984375,
    "y": 1375.3021211624146,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "cb874e53.482c8",
        "50e86192.f47ba",
        "971c87ae.5fde98"
      ]
    ]
  },
  {
    "id": "3d53e5a5.8f912a",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2381.3349609375,
    "y": 1747.6356172561646,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "49f7ab80.b2f444",
        "d7805819.9cd108",
        "4ed5eacf.f6a1c4",
        "927db1a6.0967b",
        "9c607856.359088"
      ]
    ]
  },
  {
    "id": "a6ca66b6.132b88",
    "type": "switchNode",
    "name": "switch providerIpAddress",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$wportidx].name == 'providerIpAddress'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3128.5319747924805,
    "y": 1501.8334050178528,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "22164d6f.99a622"
      ]
    ]
  },
  {
    "id": "22164d6f.99a622",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3304.532958984375,
    "y": 1501.8335275650024,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "46635360.d5dd9c"
      ]
    ]
  },
  {
    "id": "46635360.d5dd9c",
    "type": "set",
    "name": "set prop.hub.providerIpAddress",
    "xml": "<set>\n<parameter name='prop.hub.providerIpAddress' value='`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$wportidx].value`' />\n",
    "comments": "",
    "x": 3506.5329971313477,
    "y": 1502.4334478378296,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "f8ad0824.756498",
    "type": "switchNode",
    "name": "switch ipAddress",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$wportidx].name == 'ipAddress'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3101.0320568084717,
    "y": 1539.333490371704,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "ae5c5a08.535ae8"
      ]
    ]
  },
  {
    "id": "ae5c5a08.535ae8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3305.0329971313477,
    "y": 1539.3334422111511,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "a2ccd569.27b3a8"
      ]
    ]
  },
  {
    "id": "a2ccd569.27b3a8",
    "type": "set",
    "name": "set prop.hub.ipAddress",
    "xml": "<set>\n<parameter name='prop.hub.ipAddress' value='`$mdsal-arsd.service-data.vnfs.vnf[$tmp.portvidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$wportidx].value`' />\n",
    "comments": "",
    "x": 3500.033000946045,
    "y": 1538.9334177970886,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "7ec8de50.abc7a",
    "type": "set",
    "name": "Add prop.spoke.route",
    "xml": "<set>\n<parameter name='prop.route.id' value='`$prop.spokeRouteId`' />\n<parameter name='prop.route.vpnId' value='`$prop.vpnId`' />\n<parameter name='prop.route.siteId' value='`$prop.spoke.siteId`' />\n<parameter name='prop.route.deviceId' value='`$prop.spoke.deviceId`' />\n<parameter name='prop.route.providerIpAddress' value='`$prop.spoke.providerIpAddress`' />\n<parameter name='prop.route.wanportId' value='`$prop.hub.wanportId`' />\n<parameter name='prop.route.ipAddress' value='`$prop.spoke.ipAddress`' />\n\n\n\n\n",
    "comments": "",
    "x": 3424.533250808716,
    "y": 2251.334452390671,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "383a5f3d.e4cb2",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 357.3343048095703,
    "y": 1113.3343391418457,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "66dd18ab.e48f08",
    "type": "execute",
    "name": "generate connection attachment AR url ",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url-connection\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$prop.ar.allotted-resource-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 1406.6672058105469,
    "y": 175.30183696746826,
    "z": "33eaf422.44290c",
    "wires": [
      []
    ]
  },
  {
    "id": "8e4434c9.93e608",
    "type": "execute",
    "name": "execute RestApiCallNode - get-resource connection-attachment-allotted-resource",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url-connection`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1533.667236328125,
    "y": 223.3018274307251,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "90cd3398.44586",
        "259f1fc9.28f91"
      ]
    ]
  },
  {
    "id": "b50f711c.f7671",
    "type": "execute",
    "name": "execute RestApiCallNode - get parent service data",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url-parent-connection`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-psd\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1759.0013122558594,
    "y": 537.3021445274353,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "dab3ccab.cce12",
        "4c1ffccd.7a1ed4"
      ]
    ]
  },
  {
    "id": "4176c827.c206f8",
    "type": "execute",
    "name": "generate connection attachment parent url ",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"/restconf/config/GENERIC-RESOURCE-API:services/service/{service-instance-id}/service-data\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url-parent-connection\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$prop.parent-service-instance-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 1735.0010375976562,
    "y": 503.30206871032715,
    "z": "33eaf422.44290c",
    "wires": [
      []
    ]
  },
  {
    "id": "38bc1f98.0d705",
    "type": "comment",
    "name": "full mesh do nothing",
    "info": "",
    "comments": "",
    "x": 1569.667839050293,
    "y": 714.3021068572998,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "d2bafee.be2ed",
    "type": "comment",
    "name": "hub-spoke",
    "info": "",
    "comments": "",
    "x": 2570.6672401428223,
    "y": 811.3019967079163,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "74cd5045.40831",
    "type": "execute",
    "name": "generate connection attachment AR url ",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url-connection\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$prop.ar.provided-allotted-resource-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 2243.0003929138184,
    "y": 962.3019919395447,
    "z": "33eaf422.44290c",
    "wires": [
      []
    ]
  },
  {
    "id": "447d9e5f.d5a82",
    "type": "execute",
    "name": "execute RestApiCallNode - get-resource connection-attachment-allotted-resource",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url-connection`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-providedAr\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2374.000473022461,
    "y": 1001.9686217308044,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "8fa9655b.7c6ef8",
        "3a2551b1.4f0ace"
      ]
    ]
  },
  {
    "id": "380e9d46.aac952",
    "type": "execute",
    "name": "generate service data url",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"/restconf/config/GENERIC-RESOURCE-API:services/service/{service-instance-id}/service-data\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url-connection\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$prop.ar-service-instance-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 2424.504367828369,
    "y": 1203.3058919906616,
    "z": "33eaf422.44290c",
    "wires": [
      []
    ]
  },
  {
    "id": "150f28bb.9cebb7",
    "type": "execute",
    "name": "execute RestApiCallNode - get service data of allotted resource",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url-connection`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-arsd\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2540.5045013427734,
    "y": 1240.3057832717896,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "77da5adf.834034",
        "8429ea0a.844dc8"
      ]
    ]
  },
  {
    "id": "f3be5614.599b68",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2304.5000648498535,
    "y": 1125.8018560409546,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "2f1d0b59.a2f164"
      ]
    ]
  },
  {
    "id": "145fa94e.f27887",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2310.500312805176,
    "y": 1082.801947593689,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "da4408c3.f5c0d8"
      ]
    ]
  },
  {
    "id": "dc60366a.2e9048",
    "type": "for",
    "name": "for loop roleidx - Get role from allotted resource",
    "xml": "<for index=\"roleidx\" start=\"0\" end=\"`$mdsal-ar.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2885.5008697509766,
    "y": 230.30177307128906,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "b2e56fad.1ec69"
      ]
    ]
  },
  {
    "id": "b2e56fad.1ec69",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3144.5011825561523,
    "y": 229.3020887374878,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "694d9509.75a9ec"
      ]
    ]
  },
  {
    "id": "694d9509.75a9ec",
    "type": "switchNode",
    "name": "switch Role",
    "xml": "<switch test=\"`$mdsal-providedAr.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.param[$roleidx].name == 'role'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3293.501194000244,
    "y": 230.3019256591797,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "7d090fc5.01ae4"
      ]
    ]
  },
  {
    "id": "c3f6a3e4.765a9",
    "type": "set",
    "name": "set prop.spoke.role",
    "xml": "<set>\n<parameter name='prop.spoke.role' value='`$mdsal-providedAr.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.param[$roleidx].value`' />\n",
    "comments": "",
    "x": 3598.501754760742,
    "y": 227.90183353424072,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "7d090fc5.01ae4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3429.00101852417,
    "y": 227.30176544189453,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "c3f6a3e4.765a9"
      ]
    ]
  },
  {
    "id": "64901ca2.c8fd44",
    "type": "switchNode",
    "name": "switch spoke",
    "xml": "<switch test=\"`$prop.spoke.role == 'spoke'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 1321.000373840332,
    "y": 374.301700592041,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "3df0d9b2.5cda06"
      ]
    ]
  },
  {
    "id": "3df0d9b2.5cda06",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1462.000129699707,
    "y": 375.30173778533936,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "e7d060c2.d5397"
      ]
    ]
  },
  {
    "id": "51f4030a.ed3f5c",
    "type": "for",
    "name": "for i.. service-data.vnfs.vnf_length[]",
    "xml": "<for index='i' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1734.5006561279297,
    "y": 429.3017330169678,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "62a2db1c.5168f4"
      ]
    ]
  },
  {
    "id": "62a2db1c.5168f4",
    "type": "block",
    "name": "block atmoic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2068.166847229004,
    "y": 373.3016633987427,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "5123e57d.8bae0c",
        "23b51d10.325942",
        "e569fce4.0fcf9"
      ]
    ]
  },
  {
    "id": "5123e57d.8bae0c",
    "type": "switchNode",
    "name": "switch ActivateSDWANPortInstance",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.request-information.request-action == 'ActivateSDWANPortInstance'`\">\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 2339.1668853759766,
    "y": 319.3025498390198,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "6db9ff05.77666"
      ]
    ]
  },
  {
    "id": "6db9ff05.77666",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2552.166648864746,
    "y": 320.3025527000427,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "277a3bfe.22cd04"
      ]
    ]
  },
  {
    "id": "277a3bfe.22cd04",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2701.0003929138184,
    "y": 322.3017420768738,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "342216f2.a96c5a"
      ]
    ]
  },
  {
    "id": "342216f2.a96c5a",
    "type": "for",
    "name": "for loop widx - Get wan port ID from servicedata",
    "xml": "<for index=\"widx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2974.000343322754,
    "y": 320.6689600944519,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "bd426655.141608"
      ]
    ]
  },
  {
    "id": "bd426655.141608",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3243.0012702941895,
    "y": 319.66920614242554,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "d3ada690.01d678",
        "daf81956.349368",
        "5bef4443.c838fc",
        "a4bd0e48.6d82f"
      ]
    ]
  },
  {
    "id": "d3ada690.01d678",
    "type": "switchNode",
    "name": "switch transportNetworkName",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$widx].name == 'transportNetworkName'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3486.0023040771484,
    "y": 274.6697793006897,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "894b8be3.a2d3b8"
      ]
    ]
  },
  {
    "id": "894b8be3.a2d3b8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3686.0020790100098,
    "y": 274.6699414253235,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "4cf3ccb2.4c44b4"
      ]
    ]
  },
  {
    "id": "4cf3ccb2.4c44b4",
    "type": "set",
    "name": "set prop.spoke.transportNetworkName",
    "xml": "<set>\n<parameter name='prop.spoke.transportNetworkName' value='`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$widx].value`' />\n",
    "comments": "",
    "x": 3913.002815246582,
    "y": 276.2705235481262,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "e7d060c2.d5397",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1214.9694213867188,
    "y": 685.2706489562988,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "51f4030a.ed3f5c",
        "4176c827.c206f8",
        "b50f711c.f7671",
        "c5126628.a1afc8",
        "cf236aa.4478b98",
        "f19570ac.55187"
      ]
    ]
  },
  {
    "id": "23b51d10.325942",
    "type": "switchNode",
    "name": "switch ActivateSDWANDeviceInstance",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.request-information.request-action == 'ActivateSDWANDeviceInstance'`\">\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 2331.5003204345703,
    "y": 393.3017544746399,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "14d0bfc7.55b7a"
      ]
    ]
  },
  {
    "id": "14d0bfc7.55b7a",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2550.5000705718994,
    "y": 394.30173921585083,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "da1c13db.62f86"
      ]
    ]
  },
  {
    "id": "da1c13db.62f86",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2701.3340606689453,
    "y": 400.3009305000305,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "e71b7f46.84637"
      ]
    ]
  },
  {
    "id": "e71b7f46.84637",
    "type": "for",
    "name": "for loop didx - Get device ID from servicedata",
    "xml": "<for index=\"didx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2960.334312438965,
    "y": 402.66822576522827,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "ae18d850.3d05e8"
      ]
    ]
  },
  {
    "id": "ae18d850.3d05e8",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3246.334819793701,
    "y": 435.66841077804565,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "1383d6a4.a044c9"
      ]
    ]
  },
  {
    "id": "1383d6a4.a044c9",
    "type": "switchNode",
    "name": "switch deviceId",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$didx].name == 'deviceId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3429.3357315063477,
    "y": 435.66902112960815,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "cbbd7b54.04add8"
      ]
    ]
  },
  {
    "id": "cbbd7b54.04add8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3629.335506439209,
    "y": 435.66918325424194,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "2002292c.f851e6"
      ]
    ]
  },
  {
    "id": "2002292c.f851e6",
    "type": "set",
    "name": "set prop.spoke.deviceId",
    "xml": "<set>\n<parameter name='prop.spoke.deviceId' value='`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$didx].value`' />\n",
    "comments": "",
    "x": 3824.3361892700195,
    "y": 432.26976442337036,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "e569fce4.0fcf9",
    "type": "switchNode",
    "name": "switch ActivateSiteInstance",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.request-information.request-action == 'ActivateSiteInstance'`\">\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 2310.5004348754883,
    "y": 454.30178594589233,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "2c51cabd.1c1bf6"
      ]
    ]
  },
  {
    "id": "2c51cabd.1c1bf6",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2544.500072479248,
    "y": 455.3017258644104,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "4b1a4a05.7589d4"
      ]
    ]
  },
  {
    "id": "4b1a4a05.7589d4",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2696.3340606689453,
    "y": 477.30096197128296,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "bfdd7dbc.be644"
      ]
    ]
  },
  {
    "id": "bfdd7dbc.be644",
    "type": "for",
    "name": "for loop widx - Get wan site ID from servicedata",
    "xml": "<for index=\"sidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2977.3338928222656,
    "y": 476.668164730072,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "86ec8da.eb7757"
      ]
    ]
  },
  {
    "id": "86ec8da.eb7757",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3246.334819793701,
    "y": 475.66841077804565,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "ea6a5ab7.abd8e8",
        "b2aac804.e6f348"
      ]
    ]
  },
  {
    "id": "ea6a5ab7.abd8e8",
    "type": "switchNode",
    "name": "switch name",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$sidx].name == 'siteId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3435.335723876953,
    "y": 513.6690349578857,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "46e734ca.67fa0c"
      ]
    ]
  },
  {
    "id": "46e734ca.67fa0c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3635.3354988098145,
    "y": 513.6691970825195,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "f2397edb.062c5"
      ]
    ]
  },
  {
    "id": "f2397edb.062c5",
    "type": "set",
    "name": "set prop.spoke.siteId",
    "xml": "<set>\n<parameter name='prop.spoke.siteId' value='`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$sidx].value`' />\n",
    "comments": "",
    "x": 3823.3363037109375,
    "y": 512.2698106765747,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "daf81956.349368",
    "type": "switchNode",
    "name": "switch wanPortId",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$widx].name == 'wanPortId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3459.5,
    "y": 311.3018355369568,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "34972355.9c297c"
      ]
    ]
  },
  {
    "id": "34972355.9c297c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3689.5000038146973,
    "y": 311.3019471168518,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "6f9ff7e2.2957f8"
      ]
    ]
  },
  {
    "id": "6f9ff7e2.2957f8",
    "type": "set",
    "name": "set prop.spoke.wanPortId",
    "xml": "<set>\n<parameter name='prop.spoke.wanPortId' value='`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$widx].value`' />\n",
    "comments": "",
    "x": 3916.5007400512695,
    "y": 312.90252923965454,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "5bef4443.c838fc",
    "type": "switchNode",
    "name": "switch providerIpAddress",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$widx].name == 'providerIpAddress'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3477.500160217285,
    "y": 355.30178594589233,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "9220a2ce.263ec"
      ]
    ]
  },
  {
    "id": "9220a2ce.263ec",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3677.4999351501465,
    "y": 355.3019480705261,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "95bab342.b39b3"
      ]
    ]
  },
  {
    "id": "95bab342.b39b3",
    "type": "set",
    "name": "set prop.spoke.providerIpAddress",
    "xml": "<set>\n<parameter name='prop.spoke.providerIpAddress' value='`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$widx].value`' />\n",
    "comments": "",
    "x": 3904.5006713867188,
    "y": 356.90253019332886,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "a4bd0e48.6d82f",
    "type": "switchNode",
    "name": "switch ipAddress",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$widx].name == 'ipAddress'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3457.499988555908,
    "y": 394.30182218551636,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "511d5688.773858"
      ]
    ]
  },
  {
    "id": "511d5688.773858",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3681.4998168945312,
    "y": 394.3019394874573,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "fc2e69a1.2d4298"
      ]
    ]
  },
  {
    "id": "fc2e69a1.2d4298",
    "type": "set",
    "name": "set prop.spoke.ipAddress",
    "xml": "<set>\n<parameter name='prop.spoke.ipAddress' value='`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$widx].value`' />\n",
    "comments": "",
    "x": 3908.5005531311035,
    "y": 395.90252161026,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "e9598182.81589",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1024.999900817871,
    "y": 253.50004196166992,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "be430b5e.14a828",
        "66dd18ab.e48f08",
        "8e4434c9.93e608",
        "64901ca2.c8fd44"
      ]
    ]
  },
  {
    "id": "813e415f.e07c",
    "type": "comment",
    "name": "get spoke device,site,wanport info",
    "info": "",
    "comments": "",
    "x": 1781.96875,
    "y": 376.96874713897705,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "2db9ead7.c2b4b6",
    "type": "comment",
    "name": "Add routes only on activation of spoke Attach site",
    "info": "",
    "comments": "",
    "x": 1418.4998245239258,
    "y": 336.0000162124634,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "2dcb0ef7.828042",
    "type": "comment",
    "name": "Loop for all the hub allotted resources, get respective service data and get vnfs info",
    "info": "",
    "comments": "",
    "x": 2198.5,
    "y": 815.500057220459,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "c6190b7b.0c6f78",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2954.4997177124023,
    "y": 1796.9999589920044,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "c9e1f848.8aa118",
        "f616545c.e692d8",
        "dcfe4dc9.3d83d",
        "edcfc449.815b98"
      ]
    ]
  },
  {
    "id": "82cf7632.68ed28",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3004.4997749328613,
    "y": 1669.999843597412,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "2060fdef.b0b7d2"
      ]
    ]
  },
  {
    "id": "dcfe4dc9.3d83d",
    "type": "switchNode",
    "name": "switch hubRouteId",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$siteidx].name == 'hubRouteId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3159.4996376037598,
    "y": 1784.9998378753662,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "4b1456a4.ed61c8"
      ]
    ]
  },
  {
    "id": "4b1456a4.ed61c8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3322.5000228881836,
    "y": 1784.000150680542,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "71be6aaa.93fe04"
      ]
    ]
  },
  {
    "id": "71be6aaa.93fe04",
    "type": "set",
    "name": "set prop.hubRouteId",
    "xml": "<set>\n<parameter name='prop.hubRouteId' value='`$mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$siteidx].value`' />\n",
    "comments": "",
    "x": 3482.500015258789,
    "y": 1781.6005897521973,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "f616545c.e692d8",
    "type": "switchNode",
    "name": "switch siteId",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$siteidx].name == 'siteId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3141.4996185302734,
    "y": 1749.9998207092285,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "3ef84487.f4b53c"
      ]
    ]
  },
  {
    "id": "3ef84487.f4b53c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3292.499988555908,
    "y": 1749.0000038146973,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "97d8673.5139598"
      ]
    ]
  },
  {
    "id": "97d8673.5139598",
    "type": "set",
    "name": "set prop.hub.siteId",
    "xml": "<set>\n<parameter name='prop.hub.siteId' value='`$mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$siteidx].value`' />\n",
    "comments": "",
    "x": 3464.4999961853027,
    "y": 1746.6005725860596,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "927db1a6.0967b",
    "type": "switchNode",
    "name": "switch request-action",
    "xml": "<switch test='`$connection-attachment-topology-operation-input.request-information.request-action`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2619.9996948242188,
    "y": 2002.0004615783691,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "1a118523.efe04b",
        "3baee628.49c52a"
      ]
    ]
  },
  {
    "id": "1a118523.efe04b",
    "type": "outcome",
    "name": "ActivateSDWANAttachmentInstance",
    "xml": "<outcome value='ActivateSDWANAttachmentInstance'>",
    "comments": "",
    "outputs": 1,
    "x": 2886.0271530151367,
    "y": 1971.0314779281616,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "78365f62.f88ae"
      ]
    ]
  },
  {
    "id": "d881cca6.da522",
    "type": "execute",
    "name": "execute RestApiCallNode underlay route",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-underlay.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/routing-protocol/static'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"underlayHubResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3480.4997940063477,
    "y": 1892.000228881836,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "e1ec68ab.cefaf8",
        "62d40a0d.8230b4"
      ]
    ]
  },
  {
    "id": "62d40a0d.8230b4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3721.499927520752,
    "y": 1879.0002145767212,
    "z": "33eaf422.44290c",
    "wires": [
      []
    ]
  },
  {
    "id": "e1ec68ab.cefaf8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3719.4996070861816,
    "y": 1835.000205039978,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "93f8ad33.2f9f3"
      ]
    ]
  },
  {
    "id": "93f8ad33.2f9f3",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing sdwan hub route underlay rest api\" />\n",
    "comments": "",
    "x": 3861.5002937316895,
    "y": 1833.0002880096436,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "2cb0acf9.dc8014",
    "type": "set",
    "name": "Add prop.hub.route",
    "xml": "<set>\n<parameter name='prop.route.vpnId' value='`$prop.vpnId`' />\n<parameter name='prop.route.siteId' value='`$prop.hub.siteId`' />\n<parameter name='prop.route.deviceId' value='`$prop.hub.deviceId`' />\n<parameter name='prop.route.providerIpAddress' value='`$prop.hub.providerIpAddress`' />\n<parameter name='prop.route.wanportId' value='`$prop.spoke.wanportId`' />\n<parameter name='prop.route.ipAddress' value='`$prop.hub.ipAddress`' />\n\n\n",
    "comments": "",
    "x": 3411.8334980010986,
    "y": 1855.6669273376465,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "a3cb5620.778698",
    "type": "execute",
    "name": "execute RestApiCallNode underlay route",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-underlay.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/routing-protocol/static'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"underlayspokeResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3486.8334980010986,
    "y": 1997.6673924922943,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "da8f9dd5.0d7f2",
        "54a9a5c9.a84bec"
      ]
    ]
  },
  {
    "id": "54a9a5c9.a84bec",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3732.833745956421,
    "y": 1991.6674008369446,
    "z": "33eaf422.44290c",
    "wires": [
      []
    ]
  },
  {
    "id": "da8f9dd5.0d7f2",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3730.8334255218506,
    "y": 1947.6673913002014,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "405d037f.766c0c"
      ]
    ]
  },
  {
    "id": "405d037f.766c0c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing sdwan spoke route underlay rest api\" />\n",
    "comments": "",
    "x": 3872.8341121673584,
    "y": 1945.667474269867,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "cf64a525.59cc78",
    "type": "set",
    "name": "Add prop.spoke.route",
    "xml": "<set>\n<parameter name='prop.route.vpnId' value='`$prop.vpnId`' />\n<parameter name='prop.route.siteId' value='`$prop.spoke.siteId`' />\n<parameter name='prop.route.deviceId' value='`$prop.spoke.deviceId`' />\n<parameter name='prop.route.providerIpAddress' value='`$prop.spoke.providerIpAddress`' />\n<parameter name='prop.route.wanportId' value='`$prop.hub.wanportId`' />\n<parameter name='prop.route.ipAddress' value='`$prop.spoke.ipAddress`' />\n\n\n",
    "comments": "",
    "x": 3421.6975135803223,
    "y": 1966.364153623581,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "986185e9.8eec08",
    "type": "set",
    "name": "set route Id's in site parameters",
    "xml": "<set>\n<parameter name='mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length].name' value='hubRouteId' />\n<parameter name='mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length].value' value='`$underlayHubResp[0].id`' />\n<parameter name='mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length + 1].name' value='spokeRouteId' />\n<parameter name='mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length + 1].value' value='`$underlayspokeResp[0].id`' />\n<parameter name='mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length' value='`$mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length + 2`' />\n\n\n\n\n",
    "comments": "",
    "x": 3446.6644744873047,
    "y": 2054.0307354927063,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "78365f62.f88ae",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3121.999671936035,
    "y": 1968.4999113082886,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "2cb0acf9.dc8014",
        "cf64a525.59cc78",
        "986185e9.8eec08",
        "a3cb5620.778698",
        "d881cca6.da522"
      ]
    ]
  },
  {
    "id": "105d9963.f193b7",
    "type": "block",
    "name": "block atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3142.999668121338,
    "y": 2046.5001020431519,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "f88633ef.4a895",
        "7ec8de50.abc7a",
        "e429ce4e.ff4d3",
        "9c47cd10.cba71"
      ]
    ]
  },
  {
    "id": "3baee628.49c52a",
    "type": "outcome",
    "name": "DeactivateSDWANAttachmentInstance",
    "xml": "<outcome value='DeactivateSDWANAttachmentInstance'>",
    "comments": "",
    "outputs": 1,
    "x": 2891.499725341797,
    "y": 2040.4999132156372,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "105d9963.f193b7"
      ]
    ]
  },
  {
    "id": "9c607856.359088",
    "type": "set",
    "name": "Add sites to list and update length",
    "xml": "<set>\n<parameter name='prop.provision.siteIds[$prop.provision.siteIds_length].hubSiteName' value='`$prop.hub.siteName`' />\n<parameter name='prop.provision.siteIds[$prop.provision.siteIds_length].hubSiteId' value='`$prop.hub.siteId`' />\n<parameter name='prop.provision.siteIds[$prop.provision.siteIds_length].spokeSiteName' value='`$prop.spoke.siteName`' />\n<parameter name='prop.provision.siteIds[$prop.provision.siteIds_length].spokeSiteId' value='`$prop.spoke.siteId`' />\n<parameter name='prop.provision.siteIds_length' value='`$prop.provision.siteIds_length + 1`' />\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "comments": "",
    "x": 2636.030891418457,
    "y": 2295.031482696533,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "5323bc16.bbf554",
    "type": "comment",
    "name": "save hubsiteIds and spoke siteIds for provision",
    "info": "",
    "comments": "",
    "x": 2668.031265258789,
    "y": 2251.0313568115234,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "b2aac804.e6f348",
    "type": "switchNode",
    "name": "switch name",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$sidx].name == 'name'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3436.031005859375,
    "y": 475.03125,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "2e9ab920.c2df16"
      ]
    ]
  },
  {
    "id": "2e9ab920.c2df16",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3636.0307807922363,
    "y": 475.0314121246338,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "3bc80b86.299434"
      ]
    ]
  },
  {
    "id": "3bc80b86.299434",
    "type": "set",
    "name": "set prop.spoke.siteName",
    "xml": "<set>\n<parameter name='prop.spoke.siteName' value='`$service-data.vnfs.vnf[$i].vnf-data.vnf-request-input.vnf-input-parameters.param[$sidx].value`' />\n",
    "comments": "",
    "x": 3824.0315856933594,
    "y": 473.63202571868896,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "edcfc449.815b98",
    "type": "switchNode",
    "name": "switch name",
    "xml": "<switch test=\"`$mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$siteidx].name == 'name'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3140.031005859375,
    "y": 1716.5311279296875,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "47785d0f.321164"
      ]
    ]
  },
  {
    "id": "47785d0f.321164",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3291.0313758850098,
    "y": 1715.5313110351562,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "36650635.dab3aa"
      ]
    ]
  },
  {
    "id": "36650635.dab3aa",
    "type": "set",
    "name": "set prop.hub.siteName",
    "xml": "<set>\n<parameter name='prop.hub.siteName' value='`$mdsal-arsd.service-data.vnfs.vnf[$tmp.sitevidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$siteidx].value`' />\n",
    "comments": "",
    "x": 3463.0313835144043,
    "y": 1713.1318798065186,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "70ceaafc.e0d3f4",
    "type": "set",
    "name": "set prop.provision.siteIds_length=0",
    "xml": "<set>\n<parameter name='prop.provision.siteIds_length' value='0' />\n\n\n\n",
    "comments": "",
    "x": 461.03126525878906,
    "y": 361.0312547683716,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "2ebcd1d4.0c3f8e",
    "type": "execute",
    "name": "execute RestApiCallNode site provision urls",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-site-provision.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/net/sites/provision-urls'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"provisionUrlRsp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 813.0312957763672,
    "y": 793.0314712524414,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "ad0b5373.47c4b",
        "2423f336.bee55c"
      ]
    ]
  },
  {
    "id": "2423f336.bee55c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1077.0315551757812,
    "y": 815.0315160751343,
    "z": "33eaf422.44290c",
    "wires": [
      []
    ]
  },
  {
    "id": "ad0b5373.47c4b",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1078.0313415527344,
    "y": 772.0314540863037,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "21440771.f9b178"
      ]
    ]
  },
  {
    "id": "21440771.f9b178",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing provision url rest api\" />\n",
    "comments": "",
    "x": 1257.0318984985352,
    "y": 770.0315053462982,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "c880f4e9.6d6098",
    "type": "for",
    "name": "for providx..prop.provision.siteIds[]",
    "xml": "<for index='providx' start='0' end='`$prop.provision.siteIds_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 454.0312957763672,
    "y": 565.0312948226929,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "6ab9e97f.2340e8"
      ]
    ]
  },
  {
    "id": "6ab9e97f.2340e8",
    "type": "block",
    "name": "block atmoic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 478.0313377380371,
    "y": 775.031268119812,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "5392610f.9b85f",
        "2ebcd1d4.0c3f8e",
        "e83cbadb.6b3148"
      ]
    ]
  },
  {
    "id": "5392610f.9b85f",
    "type": "set",
    "name": "set prop.spoke.hubSiteId, spokeSiteId",
    "xml": "<set>\n<parameter name='prop.provision.hubSitename' value='`$prop.provision.siteIds[$providx].hubSiteName`' />\n<parameter name='prop.provision.spokeSitename' value='`$prop.provision.siteIds[$providx].spokeSiteName`' />\n<parameter name='prop.provision.hubspokesite[0]' value='`$prop.provision.siteIds[$providx].hubSiteId`' />\n<parameter name='prop.provision.hubspokesite[1]' value='`$prop.provision.siteIds[$providx].spokeSiteId`' />\n<parameter name='prop.provision.hubspokesite_length' value='2' />\n",
    "comments": "",
    "x": 789.0339965820312,
    "y": 651.6329832077026,
    "z": "33eaf422.44290c",
    "wires": []
  },
  {
    "id": "e83cbadb.6b3148",
    "type": "record",
    "name": "record provision url response to the file",
    "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"`'/opt/opendaylight/current/data/log/' + 'HUB-' + $prop.provision.hubSitename + '-SPOKE-' + $prop.provision.spokeSitename + '-provisionUrl'`\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value='`$provisionUrlRsp`'/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 785.0313720703125,
    "y": 887.0313358306885,
    "z": "33eaf422.44290c",
    "wires": [
      []
    ]
  },
  {
    "id": "1e03ba47.0fb3f6",
    "type": "block",
    "name": "block atmoic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2527.031482696533,
    "y": 1042.0313262939453,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "a525e63a.cc2b38"
      ]
    ]
  },
  {
    "id": "84a7b7df.1615b8",
    "type": "block",
    "name": "block atmoic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2007.0311584472656,
    "y": 605.0313091278076,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "c8ac708.b0a709",
        "b9ac21ad.456c9"
      ]
    ]
  },
  {
    "id": "8e2c0789.42db78",
    "type": "block",
    "name": "block atmoic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2014.0312194824219,
    "y": 680.0311765670776,
    "z": "33eaf422.44290c",
    "wires": [
      [
        "5a69b1be.1055d",
        "e66f705e.b1887"
      ]
    ]
  }
]
