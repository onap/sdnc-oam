[{"id":"aabae161.84a8e","type":"dgstart","name":"DGSTART","outputs":1,"x":145,"y":48.33333206176758,"z":"3cca8f3d.41f19","wires":[["32c2d09d.405f4"]]},{"id":"151dec40.5eba64","type":"method","name":"method self-serve-mS-vlan-tag-assign","xml":"<method rpc='self-serve-mS-vlan-tag-assign' mode='sync'>\n","comments":"","outputs":1,"x":280.7857208251953,"y":105.46032047271729,"z":"3cca8f3d.41f19","wires":[["79fa9224.7eaebc"]]},{"id":"79fa9224.7eaebc","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":174.32144165039062,"y":191.7619390487671,"z":"3cca8f3d.41f19","wires":[["7b1b0b7c.9d9814","22e565ef.e1f81a","bbb55e6a.b9e6e"]]},{"id":"32c2d09d.405f4","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":417.8571472167969,"y":47.7618989944458,"z":"3cca8f3d.41f19","wires":[["151dec40.5eba64"]]},{"id":"7b1b0b7c.9d9814","type":"switchNode","name":"switch: ss.capability-name","xml":"<switch test='`$ss.capability-name`'>\n","comments":"","outputs":1,"x":408.75000762939453,"y":193.08333683013916,"z":"3cca8f3d.41f19","wires":[["faf4bc95.6a7be"]]},{"id":"faf4bc95.6a7be","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":633.7500305175781,"y":193.58333539962769,"z":"3cca8f3d.41f19","wires":[["da90a749.6a7ba8"]]},{"id":"da90a749.6a7ba8","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"ss.capability-name is null\" />\n","comments":"","x":793.6667022705078,"y":193.6944341659546,"z":"3cca8f3d.41f19","wires":[]},{"id":"22e565ef.e1f81a","type":"switchNode","name":"switch: ss.capability-action","xml":"<switch test='`$ss.capability-action`'>\n","comments":"","outputs":1,"x":410.00002670288086,"y":243.08333730697632,"z":"3cca8f3d.41f19","wires":[["b5b6ed5e.c8cbf","bfcc5f0.da3c7a","b9349903.725cc8"]]},{"id":"b5b6ed5e.c8cbf","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":633.5000228881836,"y":243.33333730697632,"z":"3cca8f3d.41f19","wires":[["cab6e06b.f69b7"]]},{"id":"cab6e06b.f69b7","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"ss.capability-action is null\" />\n","comments":"","x":793.4166946411133,"y":243.44443607330322,"z":"3cca8f3d.41f19","wires":[]},{"id":"bfcc5f0.da3c7a","type":"outcome","name":"assign","xml":"<outcome value='assign'>","comments":"","outputs":1,"x":632.2500190734863,"y":298.3333406448364,"z":"3cca8f3d.41f19","wires":[["ba86f084.eca07"]]},{"id":"606fe3c0.ac6fac","type":"call","name":"call self-serve-capability-param-resolution","xml":"<call module='GENERIC-RESOURCE-API' rpc='self-serve-capability-param-resolution' mode='sync' >\n","comments":"","outputs":1,"x":1104.6666870117188,"y":298.5833444595337,"z":"3cca8f3d.41f19","wires":[["dd0ffcea.1cc94"]]},{"id":"dd0ffcea.1cc94","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1360.6666679382324,"y":298.5833406448364,"z":"3cca8f3d.41f19","wires":[["7134bba5.423dd4"]]},{"id":"7134bba5.423dd4","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"`'Not all assignments are resolved' + $error-message`\" />\n","comments":"","x":1519.416648864746,"y":298.58333683013916,"z":"3cca8f3d.41f19","wires":[]},{"id":"a907b119.1e325","type":"set","name":"set tmp.ss.param.capability-name","xml":"<set>\n<parameter name='tmp.ss.param.capability-name' \n\tvalue='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.capability-name`' />\n","comments":"","x":1364.420669555664,"y":402.93651008605957,"z":"3cca8f3d.41f19","wires":[]},{"id":"7398d485.cf2bec","type":"for","name":"for pidx in param_length","xml":"<for silentFailure='true' index=\"pidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param_length`\">","comments":"","outputs":1,"x":1052.634895324707,"y":403.0079803466797,"z":"3cca8f3d.41f19","wires":[["61eb3b37.c7ab84","a907b119.1e325"]]},{"id":"61eb3b37.c7ab84","type":"switchNode","name":"switch: capability-name - ss vs param","xml":"<switch test='`$tmp.ss.param.capability-name == $ss.capability-name`'>\n","comments":"","outputs":1,"x":1377.3491973876953,"y":449.3651523590088,"z":"3cca8f3d.41f19","wires":[["4bf9facc.70eae4"]]},{"id":"4bf9facc.70eae4","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1618.9563598632812,"y":448.68658351898193,"z":"3cca8f3d.41f19","wires":[["da66bad8.94a7e8"]]},{"id":"43644a4b.6cb834","type":"switchNode","name":"switch: resource-key[].name","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].name`'>\n","comments":"","outputs":1,"x":1729.639102935791,"y":659.8850131034851,"z":"3cca8f3d.41f19","wires":[["346ea27e.f40cfe","f7d608d.00106f8","9ba5ac0d.d405e","abe9c250.69bc3","a623b20c.279dd","9778b233.58cee"]]},{"id":"346ea27e.f40cfe","type":"outcome","name":"resource-name","xml":"<outcome value='resource-name'>\n","comments":"","outputs":1,"x":1997.9447441101074,"y":699.6350016593933,"z":"3cca8f3d.41f19","wires":[["dd60be1a.49e63"]]},{"id":"dd60be1a.49e63","type":"set","name":"set vt.request[].resource-name","xml":"<set>\n<parameter name='vt.request[$qidx].resource-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":2313.4446983337402,"y":699.384997844696,"z":"3cca8f3d.41f19","wires":[]},{"id":"9ba5ac0d.d405e","type":"outcome","name":"resource-value","xml":"<outcome value='resource-value'>\n","comments":"","outputs":1,"x":2000.028018951416,"y":865.3572721481323,"z":"3cca8f3d.41f19","wires":[["3c82d4f6.ddc8dc"]]},{"id":"e8bd8caa.325cc","type":"set","name":"set vt.request[].resource-value","xml":"<set>\n<parameter name='vt.request[$qidx].resource-value' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":2702.0280265808105,"y":864.1072702407837,"z":"3cca8f3d.41f19","wires":[]},{"id":"f7d608d.00106f8","type":"outcome","name":"vlan-tag-key","xml":"<outcome value='vlan-tag-key'>\n","comments":"","outputs":1,"x":1989.5400428771973,"y":782.746075630188,"z":"3cca8f3d.41f19","wires":[["8e713c3.5b04dc"]]},{"id":"8e713c3.5b04dc","type":"set","name":"set vt.request[].vlan-tag-key","xml":"<set>\n<parameter name='vt.request[$qidx].vlan-tag-key' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":2308.5400428771973,"y":781.496075630188,"z":"3cca8f3d.41f19","wires":[]},{"id":"ba86f084.eca07","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":805.0000305175781,"y":298.58334159851074,"z":"3cca8f3d.41f19","wires":[["7398d485.cf2bec","8d9e4f4c.f1df7","606fe3c0.ac6fac","7e60fec1.f1cce","c69a5e55.34d79"]]},{"id":"85c75f29.a5a0d","type":"for","name":"for kidx in resource-key_length","xml":"<for silentFailure='true' index=\"kidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key_length`\">","comments":"","outputs":1,"x":1450.5001792907715,"y":659.746123790741,"z":"3cca8f3d.41f19","wires":[["43644a4b.6cb834"]]},{"id":"bbb55e6a.b9e6e","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/ss.ms-vlan-tag.log' />\n","comments":"","outputs":1,"x":366.25000762939453,"y":408.3333387374878,"z":"3cca8f3d.41f19","wires":[[]]},{"id":"9778b233.58cee","type":"outcome","name":"policy-instance-name","xml":"<outcome value='policy-instance-name'>\n","comments":"","outputs":1,"x":2016.8333625793457,"y":659.384925365448,"z":"3cca8f3d.41f19","wires":[["6d38aa59.86bf14"]]},{"id":"6d38aa59.86bf14","type":"set","name":"set vt.request[].policy-instance-name","xml":"<set>\n<parameter name='vt.request[$qidx].policy-instance-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":2331.1943168640137,"y":659.4960370063782,"z":"3cca8f3d.41f19","wires":[]},{"id":"abe9c250.69bc3","type":"outcome","name":"scope-id","xml":"<outcome value='scope-id'>\n","comments":"","outputs":1,"x":1978.817569732666,"y":740.3571481704712,"z":"3cca8f3d.41f19","wires":[["e345f179.2c6f2"]]},{"id":"e345f179.2c6f2","type":"set","name":"set vt.request[].scope-id","xml":"<set>\n<parameter name='vt.request[$qidx].scope-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":2297.0675086975098,"y":740.3571157455444,"z":"3cca8f3d.41f19","wires":[]},{"id":"da66bad8.94a7e8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1211.3808059692383,"y":612.285758972168,"z":"3cca8f3d.41f19","wires":[["85c75f29.a5a0d","ea9e33c.6c578d","a0326ee.541d89","59a76995.60e778","b0e6bf2c.9e877"]]},{"id":"8d9e4f4c.f1df7","type":"set","name":"set qidx = 0, ss.vt. = null","xml":"<set>\n<parameter name='qidx' value='0' />\n<parameter name='ss.vt.' value='' />\n","comments":"","x":1053.2857284545898,"y":352.190465927124,"z":"3cca8f3d.41f19","wires":[]},{"id":"ea9e33c.6c578d","type":"set","name":"qidx++","xml":"<set>\n<parameter name='qidx' value='`$qidx + 1`' />\n","comments":"","x":1373.9880905151367,"y":880.8929171562195,"z":"3cca8f3d.41f19","wires":[]},{"id":"a0326ee.541d89","type":"set","name":"set vt.request_length = qidx","xml":"<set>\n<parameter name='vt.request_length' value='`$qidx`' />\n","comments":"","x":1438.988021850586,"y":927.8929634690285,"z":"3cca8f3d.41f19","wires":[]},{"id":"f4fc65ee.932678","type":"set","name":"set Test Inputs","xml":"<set>\n<parameter name='vnf-index' value='0' />\n<parameter name='vf-module-index' value='0' />\n<parameter name='ss.capability-name' value='mS-vlan-tag-assign' />\n<parameter name='ss.capability-action' value='assign' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vnf-topology.sdnc-generated-cloud-resources' value='true' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-topology.sdnc-generated-cloud-resources' value = 'true' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param_length' value = '11' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[0].name' value = 'vmxvpfe_name_0' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[0].value' value = 'bogus-vnfc-name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[1].name' value = 'vnfc-name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[1].value' value = '${vmxvpfe_name_0}' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[2].name' value = 'vm_name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[2].value' value = 'bogus-vnfc-name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[3].name' value = 'vm-type' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[3].value' value = 'oam' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[4].name' value = 'nfc-function' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[4].value' value = 'data' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[5].name' value = 'nfc-naming-code' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[5].value' value = 'dummy-naming-code' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[6].name' value = 'vnfc-model-customization-uuid' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[6].value' value = 'bbbb-99999' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[7].name' value = 'vnfc-model-invariant-uuid' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[7].value' value = 'aaaaa-10000' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[8].name' value = 'vnfc-model-version' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[8].value' value = 'model1' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].name' value = 'vlan-tag-1' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].value' value = '${vlan-tag-1v}' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[0].name' value = 'policy-instance-name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[0].value' value = 'JQIN1810SRIOV.Config_MS_SRIOV_VlanTag_1810_ADIOD_VPE.*' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[1].name' value = 'resource-name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[1].value' value = 'vlan-tag-1' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[2].name' value = 'resource-value' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[2].value' value = '' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[3].name' value = 'scope-id' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[3].value' value = 'MTCLL2238F' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[4].name' value = 'vlan-tag-key' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[4].value' value = 'dvncom4003' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[5].name' value = 'vlan-type' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[5].value' value = 'vlan-id-outer' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[6].name' value = 'vnfc-network-role' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[6].value' value = 'network-role-1' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key_length' value = '7' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.status' value = 'PENDING' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.capability-name' value = 'mS-vlan-tag-assign' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].name' value = 'vlan-tag-2' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].value' value = '[3503, 4001, 4002]' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[0].name' value = 'policy-instance-name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[0].value' value = 'JQIN1810SRIOV.Config_MS_SRIOV_VlanTag_1810_ADIOD_VPE.*' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[1].name' value = 'resource-name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[1].value' value = 'vlan-tag-2' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[2].name' value = 'resource-value' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[2].value' value = '[3503, 4001, 4002]' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[3].name' value = 'scope-id' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[3].value' value = 'MTCLL2238F' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[4].name' value = 'vlan-tag-key' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[4].value' value = 'dvncom4003' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[5].name' value = 'vlan-type' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[5].value' value = 'vlan-id-filter' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[6].name' value = 'vnfc-network-role' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[6].value' value = 'network-role-2' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key_length' value = '7' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.status' value = 'PENDING' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.capability-name' value = 'mS-vlan-tag-assign' />","comments":"","x":874.7619247436523,"y":57.38095474243164,"z":"3cca8f3d.41f19","wires":[]},{"id":"11c20fb6.dc4ff","type":"execute","name":"execute PropertiesNode","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n","comments":"","outputs":1,"x":905.1429138183594,"y":97.14286613464355,"z":"3cca8f3d.41f19","wires":[[]]},{"id":"b0e6bf2c.9e877","type":"set","name":"set ss.vt.param[].index","xml":"<set>\n<parameter name='ss.vt.param[$qidx].index' value='`$pidx`' />\n","comments":"","x":1424.2380599975586,"y":612.5714797973633,"z":"3cca8f3d.41f19","wires":[]},{"id":"59a76995.60e778","type":"set","name":"set ss.vt.param_length = qidx","xml":"<set>\n<parameter name='ss.vt.param_length' value='`$qidx`' />\n","comments":"","x":1443.7022857666016,"y":975.1786098480225,"z":"3cca8f3d.41f19","wires":[]},{"id":"381ea15d.7347ee","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"Failed to get vlan-tag assisgnment from mS\" />\n","comments":"","x":1696.5115661621094,"y":1157.0356283187866,"z":"3cca8f3d.41f19","wires":[]},{"id":"7e60fec1.f1cce","type":"execute","name":"execute RestApiCallNode","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ss.mS.vlan.tag.assign.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.vt.mS.url + $tmp.ss-vlan-tag-url`' />\n    <parameter name='restapiUser' value='`$prop.vt.mS.user`' />\n    <parameter name='restapiPassword' value='`$prop.vt.mS.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='POST' />\n    <parameter name=\"responsePrefix\" value=\"vtResp\" />","comments":"","outputs":1,"x":1069.7499237060547,"y":1151.4212789535522,"z":"3cca8f3d.41f19","wires":[["65633dba.ea8bd4","724e2a.384911d8","eb7ff11.88fdd1"]]},{"id":"65633dba.ea8bd4","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1302.772060394287,"y":1151.9908952713013,"z":"3cca8f3d.41f19","wires":[["984d604.28266a"]]},{"id":"724e2a.384911d8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1293.7721481323242,"y":1064.7766456604004,"z":"3cca8f3d.41f19","wires":[["984d604.28266a"]]},{"id":"eb7ff11.88fdd1","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1298.950798034668,"y":1252.5622129440308,"z":"3cca8f3d.41f19","wires":[["900674b6.f68a78"]]},{"id":"984d604.28266a","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1493.4759216308594,"y":1064.420844078064,"z":"3cca8f3d.41f19","wires":[["381ea15d.7347ee","9f711f39.cff08"]]},{"id":"ce532e9e.7c3fa","type":"set","name":"set resource-resolution-data.status = FAILED","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$vt-index].resource-resolution-data.status' \n\tvalue='FAILED' />\n","comments":"","x":2086.3334732055664,"y":1108.3213939666748,"z":"3cca8f3d.41f19","wires":[]},{"id":"9f711f39.cff08","type":"for","name":"for i in ss.vt.param_length","xml":"<for index=\"i\" start=\"0\" end=\"`$ss.vt.param_length`\">","comments":"","outputs":1,"x":1748.4048233032227,"y":1064.0715913772583,"z":"3cca8f3d.41f19","wires":[["ce532e9e.7c3fa","54219a27.2042a4"]]},{"id":"cf0ff9fa.558898","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1881.4286270141602,"y":1253.3334379196167,"z":"3cca8f3d.41f19","wires":[["1939556b.3f92cb","ce532e9e.7c3fa"]]},{"id":"900674b6.f68a78","type":"switchNode","name":"switch: vtResp.error-code","xml":"<switch test='`$vtResp.error-code`'>\n","comments":"","outputs":1,"x":1508.630874633789,"y":1252.726092338562,"z":"3cca8f3d.41f19","wires":[["e7672b67.291f68","d2b7f4ef.c24168"]]},{"id":"e7672b67.291f68","type":"outcomeTrue","name":"500","xml":"<outcome value='500'>\n","comments":"","outputs":1,"x":1720.8808708190918,"y":1252.476092338562,"z":"3cca8f3d.41f19","wires":[["cf0ff9fa.558898"]]},{"id":"d2b7f4ef.c24168","type":"outcomeTrue","name":"200","xml":"<outcome value='200'>\n","comments":"","outputs":1,"x":1722.380874633789,"y":1295.226092338562,"z":"3cca8f3d.41f19","wires":[["1d87da33.c632d6"]]},{"id":"1939556b.3f92cb","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500'/>\n<parameter name='error-message' value=\"`'Encountered error from mS-vlan-tag-assign with error-code = ' + $vtResp.error-code + ' and error-message = ' + $vtResp.error-message`\" />\n","comments":"","x":2067.7975540161133,"y":1252.8927879333496,"z":"3cca8f3d.41f19","wires":[]},{"id":"54219a27.2042a4","type":"set","name":"set vt-index","xml":"<set>\n<parameter name='vt-index' value='`$ss.vt.param[$i].index`' />\n","comments":"","x":1981.7975845336914,"y":1063.1428031921387,"z":"3cca8f3d.41f19","wires":[]},{"id":"c4ea190b.27e1a8","type":"for","name":"for vtidx in ss.vt.param_length","xml":"<for silentFailure='true' index=\"vtidx\" start=\"0\" end=\"`$ss.vt.param_length`\">","comments":"","outputs":1,"x":1299.2620162963867,"y":2024.0597066879272,"z":"3cca8f3d.41f19","wires":[["da35a908.13a648","3c31f169.b0bc4e"]]},{"id":"eb808af3.f6a468","type":"call","name":"call generate-cp-instance-id","xml":"<call module=\"GENERIC-RESOURCE-API\" rpc=\"generate-cp-instance-id\" mode=\"sync\" >\n","comments":"","outputs":1,"x":2875.0122871398926,"y":2477.773941040039,"z":"3cca8f3d.41f19","wires":[["efccf561.d93728"]]},{"id":"efccf561.d93728","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":3083.583680834089,"y":2477.916902814593,"z":"3cca8f3d.41f19","wires":[["283a2627.efa83a"]]},{"id":"283a2627.efa83a","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='500'/>\n\t<parameter name='error-message' value=\"`'Error in generating cp-instance-id in SDNC; ' + $error-message.generate-cp-instance-id`\" />\n","comments":"","x":3242.762315750122,"y":2477.000503540039,"z":"3cca8f3d.41f19","wires":[]},{"id":"5f966206.c08fdc","type":"execute","name":"param[$vt-index].value contains $","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='contains' emitsOutcome='true' >\n    <parameter name='source' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$vt-index].value`' />\n    <parameter name='target' value='$' />\n","comments":"","outputs":1,"x":1278.0833740234375,"y":2266.4886627197266,"z":"3cca8f3d.41f19","wires":[["75733513.f2579c","2d274bfa.9b8564"]]},{"id":"4cfe7bdb.dbd4d4","type":"set","name":"set capability-name = INPUT","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$vt-index].resource-resolution-data.capability-name' \n\tvalue='INPUT' />\n","comments":"","x":1942.9887237548828,"y":2609.4884395599365,"z":"3cca8f3d.41f19","wires":[]},{"id":"75733513.f2579c","type":"outcomeTrue","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":1525.131446838379,"y":2608.6313705444336,"z":"3cca8f3d.41f19","wires":[["878265b8.156d88"]]},{"id":"2d274bfa.9b8564","type":"outcomeFalse","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1531.7976608276367,"y":2265.7743244171143,"z":"3cca8f3d.41f19","wires":[["9a1642da.dbde8"]]},{"id":"f8cbd677.de19f8","type":"set","name":"set param[].value","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$vt-index].value' \n\tvalue='`$vtResp.output[$oidx].resource-value`' />\n","comments":"","x":2122.154571533203,"y":2268.131181716919,"z":"3cca8f3d.41f19","wires":[]},{"id":"5cb2291e.c80628","type":"for","name":"for oidx in vtResp.output_length","xml":"<for silentFailure='true' index=\"oidx\" start=\"0\" end=\"`$vtResp.output_length`\">","comments":"","outputs":1,"x":1009.7975444793701,"y":2024.2738239765167,"z":"3cca8f3d.41f19","wires":[["c4ea190b.27e1a8"]]},{"id":"da35a908.13a648","type":"switchNode","name":"switch: resource-name = param[].name","xml":"<switch test='`$vtResp.output[$oidx].resource-name == $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$vt-index].name`'>\n","comments":"","outputs":1,"x":1613.7975463867188,"y":2076.773820877075,"z":"3cca8f3d.41f19","wires":[["2f53bf99.faddf"]]},{"id":"2f53bf99.faddf","type":"outcomeFalse","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1860.5475463867188,"y":2076.773820877075,"z":"3cca8f3d.41f19","wires":[["5f966206.c08fdc"]]},{"id":"3c31f169.b0bc4e","type":"set","name":"set vt-index","xml":"<set>\n<parameter name='vt-index' value='`$ss.vt.param[$vtidx].index`' />\n","comments":"","x":1530.0475463867188,"y":2024.2738208770752,"z":"3cca8f3d.41f19","wires":[]},{"id":"9a1642da.dbde8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1901.9045333862305,"y":2268.131155014038,"z":"3cca8f3d.41f19","wires":[["f8cbd677.de19f8","2ea9694c.8c1736","dba4fe6b.4dfba"]]},{"id":"6e652163.87f5f","type":"for","name":"for sidx in stored-elements_length","xml":"<for silentFailure='true' index=\"sidx\" start=\"0\" end=\"`$vtResp.output[$oidx].stored-elements_length`\">","comments":"","outputs":1,"x":2894.440628051758,"y":2528.773941040039,"z":"3cca8f3d.41f19","wires":[["96ca685.1a0ce98"]]},{"id":"f11d85d3.a71a68","type":"set","name":"set vnfc-network-data[$idx].vnfc-network-role","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$vtidx].vnfc-network-role' \n\tvalue='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$vt-index].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":2926.440757751465,"y":2432.7739400863647,"z":"3cca8f3d.41f19","wires":[]},{"id":"c7485f84.06a53","type":"switchNode","name":"switch: resource-key[].name","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$vt-index].resource-resolution-data.resource-key[$kidx].name`'>\n","comments":"","outputs":1,"x":2447.226249694824,"y":2362.9880876541138,"z":"3cca8f3d.41f19","wires":[["717fac4d.9e7d24"]]},{"id":"2ea9694c.8c1736","type":"for","name":"for kidx in resource-key_length","xml":"<for silentFailure='true' index=\"kidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$vt-index].resource-resolution-data.resource-key_length`\">","comments":"","outputs":1,"x":2168.0873260498047,"y":2362.8491983413696,"z":"3cca8f3d.41f19","wires":[["c7485f84.06a53"]]},{"id":"717fac4d.9e7d24","type":"outcome","name":"vnfc-network-role","xml":"<outcome value='vnfc-network-role'>\n","comments":"","outputs":1,"x":2694.420509338379,"y":2362.4879999160767,"z":"3cca8f3d.41f19","wires":[["d39a866.b9bf078"]]},{"id":"96ca685.1a0ce98","type":"set","name":"set vlan-data[]","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$vtidx].connection-point.connection-point-id' \n\tvalue='`$tmp.return.generate-cp-instance-id.id`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$vtidx].connection-point.vlan-data[$sidx].vlan-uuid' \n\tvalue='`$vtResp.output[$oidx].stored-elements[$sidx].vlan-uuid`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$vtidx].connection-point.vlan-data[$sidx].vlan-tag-id' \n\tvalue='`$vtResp.output[$oidx].stored-elements[$sidx].vlantag-value`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$vtidx].connection-point.vlan-data[$sidx].vlan-tag-description' \n\tvalue='`$vtResp.output[$oidx].stored-elements[$sidx].vlantag-name`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$vtidx].connection-point.vlan-data[$sidx].vlan-role' \n\tvalue='`$vtResp.output[$oidx].stored-elements[$sidx].element-vlan-role`' />\n","comments":"","x":3153.1907234191895,"y":2528.7741556167603,"z":"3cca8f3d.41f19","wires":[]},{"id":"a623b20c.279dd","type":"outcome","name":"vlan-type","xml":"<outcome value='vlan-type'>\n","comments":"","outputs":1,"x":1982.952368736267,"y":823.3571267127991,"z":"3cca8f3d.41f19","wires":[["74b3c0ca.c5b9b"]]},{"id":"74b3c0ca.c5b9b","type":"set","name":"set vt.request[].vlan-type","xml":"<set>\n<parameter name='vt.request[$qidx].vlan-type' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":2300.952368736267,"y":823.1071267127991,"z":"3cca8f3d.41f19","wires":[]},{"id":"3c82d4f6.ddc8dc","type":"execute","name":"resource-key[$sidx].value contains $","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='contains' emitsOutcome='true' >\n    <parameter name='source' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n    <parameter name='target' value='$' />\n","comments":"","outputs":1,"x":2259.702335357666,"y":864.8571519851685,"z":"3cca8f3d.41f19","wires":[["cf45dc17.c98b5","5b6b80b5.8c302"]]},{"id":"cf45dc17.c98b5","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":2495.0595474243164,"y":864.1428117752075,"z":"3cca8f3d.41f19","wires":[["e8bd8caa.325cc"]]},{"id":"5b6b80b5.8c302","type":"outcomeFalse","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2495.952304840088,"y":905.8571367263794,"z":"3cca8f3d.41f19","wires":[["5c83c7df.a8de88"]]},{"id":"5c83c7df.a8de88","type":"set","name":"set vt.request[].resource-value = NULL","xml":"<set>\n<parameter name='vt.request[$qidx].resource-value' value='' />\n","comments":"","x":2730.452304840088,"y":906.1071367263794,"z":"3cca8f3d.41f19","wires":[]},{"id":"933ef04d.e5d8a","type":"comment","name":"Manually ASSIGNED","info":"","comments":"","x":2695.952304840088,"y":827.1071367263794,"z":"3cca8f3d.41f19","wires":[]},{"id":"b9349903.725cc8","type":"outcome","name":"unassign","xml":"<outcome value='unassign'>","comments":"","outputs":1,"x":645.2380714416504,"y":2713.9997758865356,"z":"3cca8f3d.41f19","wires":[["b209597b.41bed8"]]},{"id":"244b9202.7c946e","type":"set","name":"set tmp.ss.param.capability-name","xml":"<set>\n<parameter name='tmp.ss.param.capability-name' \n\tvalue='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.capability-name`' />\n","comments":"","x":1347.075340270996,"y":2765.9364380836487,"z":"3cca8f3d.41f19","wires":[]},{"id":"755aa361.5b330c","type":"for","name":"for pidx in param_length","xml":"<for silentFailure='true' index=\"pidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param_length`\">","comments":"","outputs":1,"x":1057.289566040039,"y":2766.007908344269,"z":"3cca8f3d.41f19","wires":[["f78c50c4.de9e6","244b9202.7c946e"]]},{"id":"f78c50c4.de9e6","type":"switchNode","name":"switch: capability-name - ss vs param","xml":"<switch test='`$tmp.ss.param.capability-name == $ss.capability-name`'>\n","comments":"","outputs":1,"x":1359.039566040039,"y":2809.507912158966,"z":"3cca8f3d.41f19","wires":[["7896a9fa.d06348"]]},{"id":"7896a9fa.d06348","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1600.646728515625,"y":2808.829343318939,"z":"3cca8f3d.41f19","wires":[["73d467dd.17ca58"]]},{"id":"b209597b.41bed8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":817.6547050476074,"y":2714.2499475479126,"z":"3cca8f3d.41f19","wires":[["755aa361.5b330c","115bf92f.2a52b7","b0c23727.1ab458","7d8a26af.c6a8e8"]]},{"id":"115bf92f.2a52b7","type":"set","name":"set qidx = 0, ss.vt. = null","xml":"<set>\n<parameter name='qidx' value='0' />\n<parameter name='ss.vt.' value='' />\n","comments":"","x":1057.9403991699219,"y":2715.190393924713,"z":"3cca8f3d.41f19","wires":[]},{"id":"956adbfc.43f988","type":"switchNode","name":"switch: resource-key[].name","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].name`'>\n","comments":"","outputs":1,"x":1758.5713386535645,"y":2983.0000314712524,"z":"3cca8f3d.41f19","wires":[["16b8efd1.e1fe3","cc6ecf40.7d3f3","f77fd9c1.af42e8"]]},{"id":"16b8efd1.e1fe3","type":"outcome","name":"vlan-tag-key","xml":"<outcome value='vlan-tag-key'>\n","comments":"","outputs":1,"x":2019.4722061157227,"y":3063.861227989197,"z":"3cca8f3d.41f19","wires":[["58620ca6.2f98e4"]]},{"id":"58620ca6.2f98e4","type":"set","name":"set vt.request[].vlan-tag-key","xml":"<set>\n<parameter name='vt.request[$qidx].vlan-tag-key' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":2311.4722061157227,"y":3063.611227989197,"z":"3cca8f3d.41f19","wires":[]},{"id":"6efc25dc.e4209c","type":"for","name":"for kidx in resource-key_length","xml":"<for silentFailure='true' index=\"kidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key_length`\">","comments":"","outputs":1,"x":1479.432415008545,"y":2982.8611421585083,"z":"3cca8f3d.41f19","wires":[["956adbfc.43f988"]]},{"id":"f77fd9c1.af42e8","type":"outcome","name":"policy-instance-name","xml":"<outcome value='policy-instance-name'>\n","comments":"","outputs":1,"x":2045.7655982971191,"y":2982.4999437332153,"z":"3cca8f3d.41f19","wires":[["58ea5262.7de7ac"]]},{"id":"58ea5262.7de7ac","type":"set","name":"set vt.request[].policy-instance-name","xml":"<set>\n<parameter name='vt.request[$qidx].policy-instance-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":2338.126552581787,"y":2982.6110553741455,"z":"3cca8f3d.41f19","wires":[]},{"id":"73d467dd.17ca58","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1241.3130416870117,"y":2939.4007773399353,"z":"3cca8f3d.41f19","wires":[["6efc25dc.e4209c","3462af45.d67fb","4306c301.35954c","c475d44f.1100f8","da9dd771.969ff8"]]},{"id":"3462af45.d67fb","type":"set","name":"qidx++","xml":"<set>\n<parameter name='qidx' value='`$qidx + 1`' />\n","comments":"","x":1402.9203834533691,"y":3142.3412942886353,"z":"3cca8f3d.41f19","wires":[]},{"id":"4306c301.35954c","type":"set","name":"set vt.request_length = qidx","xml":"<set>\n<parameter name='vt.request_length' value='`$qidx`' />\n","comments":"","x":1467.9203147888184,"y":3189.3413406014442,"z":"3cca8f3d.41f19","wires":[]},{"id":"da9dd771.969ff8","type":"set","name":"set ss.vt.param[].index","xml":"<set>\n<parameter name='ss.vt.param[$qidx].index' value='`$pidx`' />\n","comments":"","x":1454.170295715332,"y":2939.6864981651306,"z":"3cca8f3d.41f19","wires":[]},{"id":"c475d44f.1100f8","type":"set","name":"set ss.vt.param_length = qidx","xml":"<set>\n<parameter name='ss.vt.param_length' value='`$qidx`' />\n","comments":"","x":1475.967945098877,"y":3233.2937421798706,"z":"3cca8f3d.41f19","wires":[]},{"id":"cc6ecf40.7d3f3","type":"outcome","name":"vlan-type","xml":"<outcome value='vlan-type'>\n","comments":"","outputs":1,"x":2007.8845596313477,"y":3023.1388998031616,"z":"3cca8f3d.41f19","wires":[["613ddc2f.1a2004"]]},{"id":"613ddc2f.1a2004","type":"set","name":"set vt.request[].vlan-type","xml":"<set>\n<parameter name='vt.request[$qidx].vlan-type' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":2301.8845596313477,"y":3022.8888998031616,"z":"3cca8f3d.41f19","wires":[]},{"id":"62b24577.e67eec","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"Failed to get vlan-tag assisgnment from mS\" />\n","comments":"","x":1709.8092079162598,"y":3422.9998149871826,"z":"3cca8f3d.41f19","wires":[]},{"id":"b0c23727.1ab458","type":"execute","name":"execute RestApiCallNode","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ss.mS.vlan.tag.unassign.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $prop.restapi.ss-mS-vlan-tag-assign`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='POST' />\n    <parameter name=\"responsePrefix\" value=\"vtResp\" />\n\n","comments":"","outputs":1,"x":1068.0476264953613,"y":3417.9568424224854,"z":"3cca8f3d.41f19","wires":[["7b2f7f67.d6351","cd9e6801.2881d8","ca9ba81.75c9e58"]]},{"id":"7b2f7f67.d6351","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1316.0697021484375,"y":3417.9550819396973,"z":"3cca8f3d.41f19","wires":[["f0a44760.6f5588"]]},{"id":"cd9e6801.2881d8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1307.0697898864746,"y":3330.7408323287964,"z":"3cca8f3d.41f19","wires":[["f0a44760.6f5588"]]},{"id":"ca9ba81.75c9e58","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1312.2484397888184,"y":3518.5263996124268,"z":"3cca8f3d.41f19","wires":[["93bc2ffa.321b4"]]},{"id":"f0a44760.6f5588","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1506.7735633850098,"y":3330.38503074646,"z":"3cca8f3d.41f19","wires":[["62b24577.e67eec","79999354.b04e0c"]]},{"id":"e84ab7f1.440bc8","type":"set","name":"set resource-resolution-data.status = FAILED","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$vt-index].resource-resolution-data.status' \n\tvalue='FAILED' />\n","comments":"","x":2171.631114959717,"y":3374.285580635071,"z":"3cca8f3d.41f19","wires":[]},{"id":"79999354.b04e0c","type":"for","name":"for i in ss.vt.param_length","xml":"<for index=\"i\" start=\"0\" end=\"`$ss.vt.param_length`\">","comments":"","outputs":1,"x":1798.702465057373,"y":3330.0357780456543,"z":"3cca8f3d.41f19","wires":[["e84ab7f1.440bc8","b77e6050.cd677"]]},{"id":"93bc2ffa.321b4","type":"switchNode","name":"switch: vtResp.error-code","xml":"<switch test='`$vtResp.error-code`'>\n","comments":"","outputs":1,"x":1516.9286079406738,"y":3518.0234899520874,"z":"3cca8f3d.41f19","wires":[["a54712d9.a018a","1c981621.d6aefa"]]},{"id":"a54712d9.a018a","type":"outcomeTrue","name":"500","xml":"<outcome value='500'>\n","comments":"","outputs":1,"x":1729.1786041259766,"y":3517.7734899520874,"z":"3cca8f3d.41f19","wires":[["fe879328.58844"]]},{"id":"1c981621.d6aefa","type":"outcomeTrue","name":"200","xml":"<outcome value='200'>\n","comments":"","outputs":1,"x":1730.6786079406738,"y":3560.5234899520874,"z":"3cca8f3d.41f19","wires":[["26e20209.e7af6e"]]},{"id":"fac64af9.e74a98","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500'/>\n<parameter name='error-message' value=\"`'Encountered error from mS-vlan-tag-assign with error-code = ' + $vtResp.error-code + ' and error-message = ' + $vtResp.error-message`\" />\n","comments":"","x":2066.0951957702637,"y":3517.1901569366455,"z":"3cca8f3d.41f19","wires":[]},{"id":"b77e6050.cd677","type":"set","name":"set vt-index","xml":"<set>\n<parameter name='vt-index' value='`$ss.vt.param[$i].index`' />\n","comments":"","x":2067.095226287842,"y":3329.1069898605347,"z":"3cca8f3d.41f19","wires":[]},{"id":"dd8f5ebd.e4b98","type":"for","name":"for i in ss.vt.param_length","xml":"<for silentFailure='true' index=\"i\" start=\"0\" end=\"`$ss.vt.param_length`\">","comments":"","outputs":1,"x":2170.3692684173584,"y":3560.4522845745087,"z":"3cca8f3d.41f19","wires":[["32874e30.4df202","b84185e6.55bd98"]]},{"id":"26e20209.e7af6e","type":"for","name":"for oidx in output_length","xml":"<for silentFailure='true' index=\"oidx\" start=\"0\" end=\"`$vtResp.output_length`\">","comments":"","outputs":1,"x":1919.9047966003418,"y":3560.666401863098,"z":"3cca8f3d.41f19","wires":[["dd8f5ebd.e4b98"]]},{"id":"32874e30.4df202","type":"set","name":"set vt-index","xml":"<set>\n<parameter name='vt-index' value='`$ss.vt.param[$i]-index`' />\n","comments":"","x":2401.1547985076904,"y":3560.6663987636566,"z":"3cca8f3d.41f19","wires":[]},{"id":"b84185e6.55bd98","type":"set","name":"set resource-resolution-data.status = DELETED","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$vt-index].resource-resolution-data.status' \n\tvalue='DELETED' />\n","comments":"","x":2506.5714073181152,"y":3615.332921028137,"z":"3cca8f3d.41f19","wires":[]},{"id":"fe879328.58844","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1888.5712776184082,"y":3517.6665086746216,"z":"3cca8f3d.41f19","wires":[["fac64af9.e74a98","e84ab7f1.440bc8"]]},{"id":"c0bfc703.dda858","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":705.2380828857422,"y":96.33333778381348,"z":"3cca8f3d.41f19","wires":[["f4fc65ee.932678","11c20fb6.dc4ff"]]},{"id":"d39a866.b9bf078","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2625.773971557617,"y":2433.6071605682373,"z":"3cca8f3d.41f19","wires":[["f11d85d3.a71a68","6e652163.87f5f","eb808af3.f6a468"]]},{"id":"29b6ac39.646914","type":"set","name":"set Test vtResp","xml":"<set>\n<parameter name='vtResp.output_length' value='2' />\n<parameter name='vtResp.output[0].resource-name' value='vlan-tag-1' />\n<parameter name='vtResp.output[0].resource-value' value='[3553]' />\n<parameter name='vtResp.output[0].resource-vlan-role' value='outer-tag' />\n<parameter name='vtResp.output[0].stored-elements_length' value='1' />\n<parameter name='vtResp.output[0].stored-elements[0].vlan-uuid' value='vlan-uuid-0' />\n<parameter name='vtResp.output[0].stored-elements[0].vlantag-name' value='VPE-Cust' />\n<parameter name='vtResp.output[0].stored-elements[0].vlantag-value' value='3553' />\n<parameter name='vtResp.output[0].stored-elements[0].element-vlan-role' value='' />\n\n<parameter name='vtResp.output[1].resource-name' value='vlan-tag-2' />\n<parameter name='vtResp.output[1].resource-value' value='[  3503, 4001, 4002 ]' />\n<parameter name='vtResp.output[1].resource-vlan-role' value='' />\n<parameter name='vtResp.output[1].stored-elements_length' value='3' />\n<parameter name='vtResp.output[1].stored-elements[0].vlan-uuid' value='vlan-uuid-1' />\n<parameter name='vtResp.output[1].stored-elements[0].vlantag-name' value='VPE-Cust-Outer' />\n<parameter name='vtResp.output[1].stored-elements[0].vlantag-value' value='3503' />\n<parameter name='vtResp.output[1].stored-elements[0].element-vlan-role' value='outer-tag' />\n<parameter name='vtResp.output[1].stored-elements[1].vlan-uuid' value='vlan-uuid-2' />\n<parameter name='vtResp.output[1].stored-elements[1].vlantag-name' value='VPE-Core1' />\n<parameter name='vtResp.output[1].stored-elements[1].vlantag-value' value='4001' />\n<parameter name='vtResp.output[1].stored-elements[1].element-vlan-role' value='outer-tag' />\n<parameter name='vtResp.output[1].stored-elements[2].vlan-uuid' value='vlan-uuid-3' />\n<parameter name='vtResp.output[1].stored-elements[2].vlantag-name' value='VPE-Core2' />\n<parameter name='vtResp.output[1].stored-elements[2].vlantag-value' value='4002' />\n<parameter name='vtResp.output[1].stored-elements[2].element-vlan-role' value='outer-tag' />\n<parameter name='vtResp.error-code' value='200' />\n<parameter name='vtResp.error-message' value='Success' />","comments":"","x":1043.571403503418,"y":157.99998092651367,"z":"3cca8f3d.41f19","wires":[]},{"id":"dba4fe6b.4dfba","type":"set","name":"set status = SUCCESS","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$vt-index].resource-resolution-data.status' \n\tvalue='SUCCESS' />\n","comments":"","x":2141.666793823242,"y":2312.2864093780518,"z":"3cca8f3d.41f19","wires":[]},{"id":"878265b8.156d88","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1690.7144165039062,"y":2609.4288244247437,"z":"3cca8f3d.41f19","wires":[["4cfe7bdb.dbd4d4","9a1642da.dbde8"]]},{"id":"a17c09f0.020608","type":"set","name":"set vf-module-assignments.vms.vm[0]","xml":"<set>\n<parameter name = 'service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-type' value = '`$ss.param.vm-type`' />\n<parameter name = 'service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].onap-model-information.model-invariant-uuid' value = '`$ss.param.vnfc-model-invariant-uuid`' />\n<parameter name = 'service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].onap-model-information.model-customization-uuid' value = '`$ss.param.vnfc-model-customization-uuid`' />\n<parameter name = 'service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].onap-model-information.model-version' value = '`$ss.param.vnfc-model-version`' />\n<parameter name = 'service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-name' value = '`$ss.param.vnfc-name`' />\n","comments":"","x":1027.6195373535156,"y":1911.8091087341309,"z":"3cca8f3d.41f19","wires":[]},{"id":"c14f7e0.59d938","type":"switchNode","name":"switch: param[].name","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].name`'>\n","comments":"","outputs":1,"x":1217.61918258667,"y":1433.3805990219116,"z":"3cca8f3d.41f19","wires":[["2c57dbb0.1969c4","c82009e9.e31958","e97d1e24.43f64","f84d2f12.dc61c","649ce71a.606638","bf031968.f55938","6093f573.d041fc"]]},{"id":"2c57dbb0.1969c4","type":"outcome","name":"nfc-function","xml":"<outcome value='nfc-function'>\n","comments":"","outputs":1,"x":1453.36918258667,"y":1433.6305990219116,"z":"3cca8f3d.41f19","wires":[["4e103f0.32c0bc"]]},{"id":"4e103f0.32c0bc","type":"set","name":"set ss.param.nfc-function, index","xml":"<set>\n<parameter name='ss.param.nfc-function' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].value`' />\n<parameter name='ss.param.nfc-function-index' value='`$pidx`' />\n","comments":"","x":1695.6191902160645,"y":1433.8805675506592,"z":"3cca8f3d.41f19","wires":[]},{"id":"c82009e9.e31958","type":"outcome","name":"nfc-naming-code","xml":"<outcome value='nfc-naming-code'>\n","comments":"","outputs":1,"x":1470.86918258667,"y":1476.3805980682373,"z":"3cca8f3d.41f19","wires":[["c4a3e401.d72448"]]},{"id":"c4a3e401.d72448","type":"set","name":"set ss.param.nfc-naming-code, index","xml":"<set>\n<parameter name='ss.param.nfc-naming-code' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].value`' />\n<parameter name='ss.param.nfc-naming-code-index' value='`$pidx`' />\n","comments":"","x":1758.1191215515137,"y":1476.3805656433105,"z":"3cca8f3d.41f19","wires":[]},{"id":"e97d1e24.43f64","type":"outcome","name":"vnfc-model-customization-uuid","xml":"<outcome value='vnfc-model-customization-uuid'>\n","comments":"","outputs":1,"x":1514.6191902160645,"y":1516.3805990219116,"z":"3cca8f3d.41f19","wires":[["573f9da5.c8c0a4"]]},{"id":"573f9da5.c8c0a4","type":"set","name":"set ss.param.vnfc-model-customization-uuid, index","xml":"<set>\n<parameter name='ss.param.vnfc-model-customization-uuid' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].value`' />\n<parameter name='ss.param.vnfc-model-customization-uuid-index' value='`$pidx`' />\n","comments":"","x":1868.8691291809082,"y":1516.3805665969849,"z":"3cca8f3d.41f19","wires":[]},{"id":"f84d2f12.dc61c","type":"outcome","name":"vnfc-model-invariant-uuid","xml":"<outcome value='vnfc-model-invariant-uuid'>\n","comments":"","outputs":1,"x":1499.61918258667,"y":1557.630599975586,"z":"3cca8f3d.41f19","wires":[["ea85ad8d.4f956"]]},{"id":"ea85ad8d.4f956","type":"set","name":"set ss.param.vnfc-model-invariant-uuid, index","xml":"<set>\n<parameter name='ss.param.vnfc-model-invariant-uuid' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].value`' />\n<parameter name='ss.param.vnfc-model-invariant-uuid-index' value='`$pidx`' />\n","comments":"","x":1817.8691215515137,"y":1557.6305675506592,"z":"3cca8f3d.41f19","wires":[]},{"id":"649ce71a.606638","type":"outcome","name":"vnfc-model-version","xml":"<outcome value='vnfc-model-version'>\n","comments":"","outputs":1,"x":1482.11918258667,"y":1600.1306009292603,"z":"3cca8f3d.41f19","wires":[["2d523d96.3d1742"]]},{"id":"2d523d96.3d1742","type":"set","name":"set ss.param.vnfc-model-version, index","xml":"<set>\n<parameter name='ss.param.vnfc-model-version' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].value`' />\n<parameter name='ss.param.vnfc-model-version-index' value='`$pidx`' />\n","comments":"","x":1800.3691215515137,"y":1600.1305685043335,"z":"3cca8f3d.41f19","wires":[]},{"id":"bf031968.f55938","type":"outcome","name":"vm-type","xml":"<outcome value='vm-type'>\n","comments":"","outputs":1,"x":1450.86918258667,"y":1642.6306009292603,"z":"3cca8f3d.41f19","wires":[["bb00ccb4.e2dce"]]},{"id":"bb00ccb4.e2dce","type":"set","name":"set ss.param.vm-type, index","xml":"<set>\n<parameter name='ss.param.vm-type' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].value`' />\n<parameter name='ss.param.vm-type-index' value='`$pidx`' />\n","comments":"","x":1693.1191902160645,"y":1642.8805694580078,"z":"3cca8f3d.41f19","wires":[]},{"id":"2e2ca2b6.3d965e","type":"for","name":"for pidx in param_length","xml":"<for silentFailure='true' index=\"pidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param_length`\">","comments":"","outputs":1,"x":988.8968849182129,"y":1433.6624612808228,"z":"3cca8f3d.41f19","wires":[["c14f7e0.59d938"]]},{"id":"6093f573.d041fc","type":"outcome","name":"vnfc-name","xml":"<outcome value='vnfc-name'>\n","comments":"","outputs":1,"x":1457.6193237304688,"y":1687.5232906341553,"z":"3cca8f3d.41f19","wires":[["cc3ecb8d.be2a68"]]},{"id":"1d87da33.c632d6","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":748.7142028808594,"y":1433.4761066436768,"z":"3cca8f3d.41f19","wires":[["2e2ca2b6.3d965e","a17c09f0.020608","5cb2291e.c80628","c2a5f508.b43b18","81aa7b87.404648","a872dfda.0ea85"]]},{"id":"25a753d9.b3df8c","type":"switchNode","name":"switch: param[].name == ss.param.vnfc-name-unresolved-value","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$x].name == $ss.param.vnfc-name-unresolved-value`'>\n","comments":"","outputs":1,"x":2402.142906188965,"y":1871.6189851760864,"z":"3cca8f3d.41f19","wires":[["a69aada8.40b1b"]]},{"id":"4b315d8a.330e84","type":"for","name":"for x in param_length","xml":"<for silentFailure='true' index=\"x\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param_length`\">","comments":"","outputs":1,"x":2043.4206085205078,"y":1871.9008474349976,"z":"3cca8f3d.41f19","wires":[["25a753d9.b3df8c"]]},{"id":"cc3ecb8d.be2a68","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1650.142837524414,"y":1687.4762706756592,"z":"3cca8f3d.41f19","wires":[["ee58dbad.de9848","396ac594.8ae03a","2422c03f.9036","5e83afb4.5b469","8eec9a52.119328","7d2d3721.eaf018"]]},{"id":"ee58dbad.de9848","type":"execute","name":"replace ${ with \"\"","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$ss.param.vnfc-name-unresolved-value`\" />\n\t<parameter name=\"target\" value=\"${\"/>\n\t<parameter name=\"replacement\" value=\"\"/>\n\t<parameter name=\"outputPath\" value=\"ss.param.vnfc-name-unresolved-value\"/>\n","comments":"","outputs":1,"x":1867.857192993164,"y":1732.4762058258057,"z":"3cca8f3d.41f19","wires":[[]]},{"id":"396ac594.8ae03a","type":"set","name":"set ss.param.vnfc-name-unresolved-value","xml":"<set>\n<parameter name='ss.param.vnfc-name-unresolved-value' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].value`' />\n","comments":"","x":1943.5715026855469,"y":1687.1904230117798,"z":"3cca8f3d.41f19","wires":[]},{"id":"2422c03f.9036","type":"execute","name":"replace } with \"\"","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$ss.param.vnfc-name-unresolved-value`\" />\n\t<parameter name=\"target\" value=\"}\"/>\n\t<parameter name=\"replacement\" value=\"\"/>\n\t<parameter name=\"outputPath\" value=\"ss.param.vnfc-name-unresolved-value\"/>\n","comments":"","outputs":1,"x":1866.4286575317383,"y":1777.7620067596436,"z":"3cca8f3d.41f19","wires":[[]]},{"id":"a69aada8.40b1b","type":"outcomeFalse","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2713.571319580078,"y":1871.7618932724,"z":"3cca8f3d.41f19","wires":[["6ebadf0a.00e51"]]},{"id":"5e83afb4.5b469","type":"record","name":"record ss.param.vnfc-name-unresolved-value","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"`'ss.param.vnfc-name-unresolved-value = ' + $ss.param.vnfc-name-unresolved-value`\"/>","comments":"","outputs":1,"x":1960.7142944335938,"y":1826.3333988189697,"z":"3cca8f3d.41f19","wires":[[]]},{"id":"8eec9a52.119328","type":"switchNode","name":"switch: ss.param.vnfc-name","xml":"<switch test='`$ss.param.vnfc-name`'>\n","comments":"","outputs":1,"x":1907.8570251464844,"y":1979.190378189087,"z":"3cca8f3d.41f19","wires":[["ddc5f4c2.375de8"]]},{"id":"ddc5f4c2.375de8","type":"outcomeFalse","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":2117.857078552246,"y":1979.618947982788,"z":"3cca8f3d.41f19","wires":[["6eeb709b.bf7f6"]]},{"id":"6eeb709b.bf7f6","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value='Unable to resolve vnf-name' />\n","comments":"","x":2288.8570087977814,"y":1979.3332162584575,"z":"3cca8f3d.41f19","wires":[]},{"id":"592e74ab.f1fd6c","type":"set","name":"set ss.param.vnfc-name, index","xml":"<set>\n<parameter name='ss.param.vnfc-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$x].value`' />\n<parameter name='ss.param.vnfc-name-index' value='`$x`' />\n","comments":"","x":3121.2856979370117,"y":1871.2379312515259,"z":"3cca8f3d.41f19","wires":[]},{"id":"6ebadf0a.00e51","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2861.6071548461914,"y":1871.3694486618042,"z":"3cca8f3d.41f19","wires":[["592e74ab.f1fd6c","9a337dcd.70e43"]]},{"id":"c69a5e55.34d79","type":"execute","name":"generate vlan-tag url, replace action","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.ss-mS-vlan-tag-assign`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ss-vlan-tag-url\"/>\n    <parameter name=\"target\" value=\"{action}\"/>\n    <parameter name=\"replacement\" value=\"`$ss.capability-action`\"/>\n","comments":"","outputs":1,"x":1100.4762115478516,"y":1006.3333053588867,"z":"3cca8f3d.41f19","wires":[[]]},{"id":"7d8a26af.c6a8e8","type":"execute","name":"generate vlan-tag url, replace action","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.ss-mS-vlan-tag-assign`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ss-vlan-tag-url\"/>\n    <parameter name=\"target\" value=\"{action}\"/>\n    <parameter name=\"replacement\" value=\"`$ss.capability-action`\"/>\n","comments":"","outputs":1,"x":1098.5714263916016,"y":3267.9998302459717,"z":"3cca8f3d.41f19","wires":[[]]},{"id":"7d2d3721.eaf018","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1842.857162475586,"y":1871.8572330474854,"z":"3cca8f3d.41f19","wires":[["4b315d8a.330e84","3426891c.a5a986"]]},{"id":"3426891c.a5a986","type":"returnSuccess","name":"CATCH BREAK","xml":"<return status='success'>\n","comments":"","x":2000.0000534057617,"y":1918.5714302062988,"z":"3cca8f3d.41f19","wires":[]},{"id":"9a337dcd.70e43","type":"returnFailure","name":"BREAK","xml":"<return status='failure'>","comments":"","x":3048.9999465942383,"y":1912.8570919036865,"z":"3cca8f3d.41f19","wires":[]},{"id":"c2a5f508.b43b18","type":"set","name":"set vm_length, vnfc-names_length = 1","xml":"<set>\n<parameter name = 'service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm_length' value = '1' />\n<parameter name = 'service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names_length' value = '1' />\n","comments":"","x":1029.1429138183594,"y":1958.5714988708496,"z":"3cca8f3d.41f19","wires":[]},{"id":"81aa7b87.404648","type":"set","name":"set vnfc-network-data_length","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data_length' \n\tvalue='`$ss.vt.param_length`' />\n","comments":"","x":998.5715446472168,"y":2382.857276916504,"z":"3cca8f3d.41f19","wires":[]},{"id":"a872dfda.0ea85","type":"set","name":"set vlan-data_length","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$vtidx].connection-point.vlan-data_length' \n\tvalue='`$vtResp.output[$oidx].stored-elements_length`' />\n","comments":"","x":972.4285202026367,"y":2431.4286317825317,"z":"3cca8f3d.41f19","wires":[]}]