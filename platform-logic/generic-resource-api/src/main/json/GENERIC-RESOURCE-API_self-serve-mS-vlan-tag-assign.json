[{"id":"b50134a.9135fc8","type":"dgstart","name":"DGSTART","outputs":1,"x":119.99999237060547,"y":45,"z":"18bab70b.485059","wires":[["2ad7e6db.599bfa"]]},{"id":"2c1675b4.daf71a","type":"method","name":"method self-serve-mS-vlan-tag-assign","xml":"<method rpc='self-serve-mS-vlan-tag-assign' mode='sync'>\n","comments":"","outputs":1,"x":255.78571319580078,"y":102.1269884109497,"z":"18bab70b.485059","wires":[["bd716c4b.80fed"]]},{"id":"bd716c4b.80fed","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":149.3214340209961,"y":188.4286069869995,"z":"18bab70b.485059","wires":[["def524db.5fdc28","4f232482.f4e9fc","afe46b05.33f0c8"]]},{"id":"2ad7e6db.599bfa","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":392.85713958740234,"y":44.42856693267822,"z":"18bab70b.485059","wires":[["2c1675b4.daf71a"]]},{"id":"def524db.5fdc28","type":"switchNode","name":"switch: ss.capability-name","xml":"<switch test='`$ss.capability-name`'>\n","comments":"","outputs":1,"x":383.75,"y":189.75000476837158,"z":"18bab70b.485059","wires":[["451a9447.eefd0c"]]},{"id":"451a9447.eefd0c","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":608.7500228881836,"y":190.2500033378601,"z":"18bab70b.485059","wires":[["d536f4e1.df3898"]]},{"id":"d536f4e1.df3898","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"ss.capability-name is null\" />\n","comments":"","x":768.6666946411133,"y":190.361102104187,"z":"18bab70b.485059","wires":[]},{"id":"4f232482.f4e9fc","type":"switchNode","name":"switch: ss.capability-action","xml":"<switch test='`$ss.capability-action`'>\n","comments":"","outputs":1,"x":385.0000190734863,"y":239.75000524520874,"z":"18bab70b.485059","wires":[["2ef56591.78da4a","95f263a9.16cd2","bd2b8255.e75cf"]]},{"id":"2ef56591.78da4a","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":608.5000152587891,"y":240.00000524520874,"z":"18bab70b.485059","wires":[["d591ce18.551bc"]]},{"id":"d591ce18.551bc","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"ss.capability-action is null\" />\n","comments":"","x":768.4166870117188,"y":240.11110401153564,"z":"18bab70b.485059","wires":[]},{"id":"95f263a9.16cd2","type":"outcome","name":"assign","xml":"<outcome value='assign'>","comments":"","outputs":1,"x":607.2500114440918,"y":295.00000858306885,"z":"18bab70b.485059","wires":[["ff4e08f7.54efb8"]]},{"id":"8db2f25b.47c74","type":"call","name":"call self-serve-capability-param-resolution","xml":"<call module='GENERIC-RESOURCE-API' rpc='self-serve-capability-param-resolution' mode='sync' >\n","comments":"","outputs":1,"x":1079.6666793823242,"y":295.2500123977661,"z":"18bab70b.485059","wires":[["ae4c3885.2165f8"]]},{"id":"ae4c3885.2165f8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1335.666660308838,"y":295.25000858306885,"z":"18bab70b.485059","wires":[["6fc96497.0f616c"]]},{"id":"6fc96497.0f616c","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"`'Not all assignments are resolved' + $error-message`\" />\n","comments":"","x":1494.4166412353516,"y":295.2500047683716,"z":"18bab70b.485059","wires":[]},{"id":"aa1a1fd6.29d0e","type":"set","name":"set tmp.ss.param.capability-name","xml":"<set>\n<parameter name='tmp.ss.param.capability-name' \n\tvalue='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.capability-name`' />\n","comments":"","x":1339.4206619262695,"y":399.603178024292,"z":"18bab70b.485059","wires":[]},{"id":"2eba53d8.1a760c","type":"for","name":"for pidx in param_length","xml":"<for silentFailure='true' index=\"pidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param_length`\">","comments":"","outputs":1,"x":1027.6348876953125,"y":399.6746482849121,"z":"18bab70b.485059","wires":[["35b91f64.3fbf1","aa1a1fd6.29d0e"]]},{"id":"35b91f64.3fbf1","type":"switchNode","name":"switch: capability-name - ss vs param","xml":"<switch test='`$tmp.ss.param.capability-name == $ss.capability-name`'>\n","comments":"","outputs":1,"x":1352.3491897583008,"y":446.0318202972412,"z":"18bab70b.485059","wires":[["83190506.6dca78"]]},{"id":"83190506.6dca78","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1593.9563522338867,"y":445.35325145721436,"z":"18bab70b.485059","wires":[["90cb09fc.8600e8"]]},{"id":"5ec7f9e0.20e438","type":"switchNode","name":"switch: resource-key[].name","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].name`'>\n","comments":"","outputs":1,"x":1704.6390953063965,"y":656.5516810417175,"z":"18bab70b.485059","wires":[["dc237804.389ca8","ad7cda11.eb06d8","a65f01aa.58f09","b7dea22f.e6446","2622e5a6.a4f91a","f0b67cc6.43b0e"]]},{"id":"dc237804.389ca8","type":"outcome","name":"resource-name","xml":"<outcome value='resource-name'>\n","comments":"","outputs":1,"x":1972.944736480713,"y":696.3016695976257,"z":"18bab70b.485059","wires":[["1fa65740.7b0049"]]},{"id":"1fa65740.7b0049","type":"set","name":"set vt.request[].resource-name","xml":"<set>\n<parameter name='vt.request[$qidx].resource-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":2288.4446907043457,"y":696.0516657829285,"z":"18bab70b.485059","wires":[]},{"id":"a65f01aa.58f09","type":"outcome","name":"resource-value","xml":"<outcome value='resource-value'>\n","comments":"","outputs":1,"x":1975.0280113220215,"y":862.0239400863647,"z":"18bab70b.485059","wires":[["cfabc16e.d22c9"]]},{"id":"5c9fdcb3.974444","type":"set","name":"set vt.request[].resource-value","xml":"<set>\n<parameter name='vt.request[$qidx].resource-value' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":2677.028018951416,"y":860.7739381790161,"z":"18bab70b.485059","wires":[]},{"id":"ad7cda11.eb06d8","type":"outcome","name":"vlan-tag-key","xml":"<outcome value='vlan-tag-key'>\n","comments":"","outputs":1,"x":1964.5400352478027,"y":779.4127435684204,"z":"18bab70b.485059","wires":[["d54cf52e.ff1ae8"]]},{"id":"d54cf52e.ff1ae8","type":"set","name":"set vt.request[].vlan-tag-key","xml":"<set>\n<parameter name='vt.request[$qidx].vlan-tag-key' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":2283.5400352478027,"y":778.1627435684204,"z":"18bab70b.485059","wires":[]},{"id":"ff4e08f7.54efb8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":780.0000228881836,"y":295.25000953674316,"z":"18bab70b.485059","wires":[["2eba53d8.1a760c","1bfa8a0a.3559a6","8db2f25b.47c74","30649dde.6e1b62","e04ad205.115a6"]]},{"id":"32384dfc.cf1702","type":"for","name":"for kidx in resource-key_length","xml":"<for silentFailure='true' index=\"kidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key_length`\">","comments":"","outputs":1,"x":1425.500171661377,"y":656.4127917289734,"z":"18bab70b.485059","wires":[["5ec7f9e0.20e438"]]},{"id":"afe46b05.33f0c8","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/ss.ms-vlan-tag.log' />\n","comments":"","outputs":1,"x":341.25,"y":405.0000066757202,"z":"18bab70b.485059","wires":[[]]},{"id":"f0b67cc6.43b0e","type":"outcome","name":"policy-instance-name","xml":"<outcome value='policy-instance-name'>\n","comments":"","outputs":1,"x":1991.8333549499512,"y":656.0515933036804,"z":"18bab70b.485059","wires":[["944e6f13.7b1b3"]]},{"id":"944e6f13.7b1b3","type":"set","name":"set vt.request[].policy-instance-name","xml":"<set>\n<parameter name='vt.request[$qidx].policy-instance-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":2306.194309234619,"y":656.1627049446106,"z":"18bab70b.485059","wires":[]},{"id":"b7dea22f.e6446","type":"outcome","name":"scope-id","xml":"<outcome value='scope-id'>\n","comments":"","outputs":1,"x":1953.8175621032715,"y":737.0238161087036,"z":"18bab70b.485059","wires":[["49fb58d2.3a5e18"]]},{"id":"49fb58d2.3a5e18","type":"set","name":"set vt.request[].scope-id","xml":"<set>\n<parameter name='vt.request[$qidx].scope-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":2272.0675010681152,"y":737.0237836837769,"z":"18bab70b.485059","wires":[]},{"id":"90cb09fc.8600e8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1186.3807983398438,"y":608.9524269104004,"z":"18bab70b.485059","wires":[["32384dfc.cf1702","a912ffc8.e236b","34dc4b09.f22ba4","40ce7218.5cdf2c","93de8687.be3158"]]},{"id":"1bfa8a0a.3559a6","type":"set","name":"set qidx = 0, ss.vt. = null","xml":"<set>\n<parameter name='qidx' value='0' />\n<parameter name='ss.vt.' value='' />\n","comments":"","x":1028.2857208251953,"y":348.85713386535645,"z":"18bab70b.485059","wires":[]},{"id":"a912ffc8.e236b","type":"set","name":"qidx++","xml":"<set>\n<parameter name='qidx' value='`$qidx + 1`' />\n","comments":"","x":1348.9880828857422,"y":877.5595850944519,"z":"18bab70b.485059","wires":[]},{"id":"34dc4b09.f22ba4","type":"set","name":"set vt.request_length = qidx","xml":"<set>\n<parameter name='vt.request_length' value='`$qidx`' />\n","comments":"","x":1413.9880142211914,"y":924.5596314072609,"z":"18bab70b.485059","wires":[]},{"id":"794c3bd7.52c604","type":"set","name":"set Test Inputs","xml":"<set>\n<parameter name='vnf-index' value='0' />\n<parameter name='vf-module-index' value='0' />\n<parameter name='ss.capability-name' value='mS-vlan-tag-assign' />\n<parameter name='ss.capability-action' value='assign' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vnf-topology.sdnc-generated-cloud-resources' value='true' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-topology.sdnc-generated-cloud-resources' value = 'true' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param_length' value = '11' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[0].name' value = 'vmxvpfe_name_0' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[0].value' value = 'bogus-vnfc-name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[1].name' value = 'vnfc-name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[1].value' value = '${vmxvpfe_name_0}' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[2].name' value = 'vm_name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[2].value' value = 'bogus-vnfc-name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[3].name' value = 'vm-type' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[3].value' value = 'oam' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[4].name' value = 'nfc-function' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[4].value' value = 'data' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[5].name' value = 'nfc-naming-code' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[5].value' value = 'dummy-naming-code' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[6].name' value = 'vnfc-model-customization-uuid' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[6].value' value = 'bbbb-99999' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[7].name' value = 'vnfc-model-invariant-uuid' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[7].value' value = 'aaaaa-10000' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[8].name' value = 'vnfc-model-version' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[8].value' value = 'model1' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].name' value = 'vlan-tag-1' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].value' value = '${vlan-tag-1v}' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[0].name' value = 'policy-instance-name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[0].value' value = 'JQIN1810SRIOV.Config_MS_SRIOV_VlanTag_1810_ADIOD_VPE.*' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[1].name' value = 'resource-name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[1].value' value = 'vlan-tag-1' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[2].name' value = 'resource-value' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[2].value' value = '' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[3].name' value = 'scope-id' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[3].value' value = 'MTCLL2238F' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[4].name' value = 'vlan-tag-key' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[4].value' value = 'dvncom4003' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[5].name' value = 'vlan-type' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[5].value' value = 'vlan-id-outer' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[6].name' value = 'vnfc-network-role' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key[6].value' value = 'network-role-1' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.resource-key_length' value = '7' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.status' value = 'PENDING' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[9].resource-resolution-data.capability-name' value = 'mS-vlan-tag-assign' />\n\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].name' value = 'vlan-tag-2' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].value' value = '[3503, 4001, 4002]' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[0].name' value = 'policy-instance-name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[0].value' value = 'JQIN1810SRIOV.Config_MS_SRIOV_VlanTag_1810_ADIOD_VPE.*' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[1].name' value = 'resource-name' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[1].value' value = 'vlan-tag-2' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[2].name' value = 'resource-value' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[2].value' value = '[3503, 4001, 4002]' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[3].name' value = 'scope-id' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[3].value' value = 'MTCLL2238F' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[4].name' value = 'vlan-tag-key' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[4].value' value = 'dvncom4003' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[5].name' value = 'vlan-type' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[5].value' value = 'vlan-id-filter' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[6].name' value = 'vnfc-network-role' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key[6].value' value = 'network-role-2' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.resource-key_length' value = '7' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.status' value = 'PENDING' />\n<parameter name='service-data.vnfs.vnf[0].vnf-data.vf-modules.vf-module[0].vf-module-data.vf-module-topology.vf-module-parameters.param[10].resource-resolution-data.capability-name' value = 'mS-vlan-tag-assign' />","comments":"","x":849.7619171142578,"y":54.04762268066406,"z":"18bab70b.485059","wires":[]},{"id":"4a7eb9fd.2690f8","type":"execute","name":"execute PropertiesNode","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n","comments":"","outputs":1,"x":880.1429061889648,"y":93.80953407287598,"z":"18bab70b.485059","wires":[[]]},{"id":"93de8687.be3158","type":"set","name":"set ss.vt.param[].index","xml":"<set>\n<parameter name='ss.vt.param[$qidx].index' value='`$pidx`' />\n","comments":"","x":1399.238052368164,"y":609.2381477355957,"z":"18bab70b.485059","wires":[]},{"id":"40ce7218.5cdf2c","type":"set","name":"set ss.vt.param_length = qidx","xml":"<set>\n<parameter name='ss.vt.param_length' value='`$qidx`' />\n","comments":"","x":1418.702278137207,"y":971.8452777862549,"z":"18bab70b.485059","wires":[]},{"id":"9fc4e623.79ede8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"Failed to get vlan-tag assisgnment from mS\" />\n","comments":"","x":1671.5115585327148,"y":1153.702296257019,"z":"18bab70b.485059","wires":[]},{"id":"30649dde.6e1b62","type":"execute","name":"execute RestApiCallNode","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ss.mS.vlan.tag.assign.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.vt.mS.url + $tmp.ss-vlan-tag-url`' />\n    <parameter name='restapiUser' value='`$prop.vt.mS.user`' />\n    <parameter name='restapiPassword' value='`$prop.vt.mS.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='POST' />\n    <parameter name=\"responsePrefix\" value=\"vtResp\" />","comments":"","outputs":1,"x":1044.7499160766602,"y":1148.0879468917847,"z":"18bab70b.485059","wires":[["e1c863.24aa87a","68bb2ed8.54e3f","d31c1d11.cc361"]]},{"id":"e1c863.24aa87a","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1277.7720527648926,"y":1148.6575632095337,"z":"18bab70b.485059","wires":[["46abd18b.bc76a"]]},{"id":"68bb2ed8.54e3f","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1268.7721405029297,"y":1061.4433135986328,"z":"18bab70b.485059","wires":[["46abd18b.bc76a"]]},{"id":"d31c1d11.cc361","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1273.9507904052734,"y":1249.2288808822632,"z":"18bab70b.485059","wires":[["acb6c699.9add58"]]},{"id":"46abd18b.bc76a","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1468.4759140014648,"y":1061.0875120162964,"z":"18bab70b.485059","wires":[["9fc4e623.79ede8","b6db0666.f88248"]]},{"id":"e6de6f19.d5c2b","type":"set","name":"set resource-resolution-data.status = FAILED","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$vt-index].resource-resolution-data.status' \n\tvalue='FAILED' />\n","comments":"","x":2061.333465576172,"y":1104.9880619049072,"z":"18bab70b.485059","wires":[]},{"id":"b6db0666.f88248","type":"for","name":"for i in ss.vt.param_length","xml":"<for index=\"i\" start=\"0\" end=\"`$ss.vt.param_length`\">","comments":"","outputs":1,"x":1723.4048156738281,"y":1060.7382593154907,"z":"18bab70b.485059","wires":[["e6de6f19.d5c2b","dd87e82f.6f3328"]]},{"id":"adc7a196.ee98f","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1856.4286193847656,"y":1250.0001058578491,"z":"18bab70b.485059","wires":[["f62c6513.3ae628","e6de6f19.d5c2b"]]},{"id":"acb6c699.9add58","type":"switchNode","name":"switch: vtResp.error-code","xml":"<switch test='`$vtResp.error-code`'>\n","comments":"","outputs":1,"x":1483.6308670043945,"y":1249.3927602767944,"z":"18bab70b.485059","wires":[["6c2735c5.2a7efc","1291f857.20fa58"]]},{"id":"6c2735c5.2a7efc","type":"outcomeTrue","name":"500","xml":"<outcome value='500'>\n","comments":"","outputs":1,"x":1695.8808631896973,"y":1249.1427602767944,"z":"18bab70b.485059","wires":[["adc7a196.ee98f"]]},{"id":"1291f857.20fa58","type":"outcomeTrue","name":"200","xml":"<outcome value='200'>\n","comments":"","outputs":1,"x":1697.3808670043945,"y":1291.8927602767944,"z":"18bab70b.485059","wires":[["3e5e9da0.cfebc2"]]},{"id":"f62c6513.3ae628","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500'/>\n<parameter name='error-message' value=\"`'Encountered error from mS-vlan-tag-assign with error-code = ' + $vtResp.error-code + ' and error-message = ' + $vtResp.error-message`\" />\n","comments":"","x":2042.7975463867188,"y":1249.559455871582,"z":"18bab70b.485059","wires":[]},{"id":"dd87e82f.6f3328","type":"set","name":"set vt-index","xml":"<set>\n<parameter name='vt-index' value='`$ss.vt.param[$i].index`' />\n","comments":"","x":1956.7975769042969,"y":1059.809471130371,"z":"18bab70b.485059","wires":[]},{"id":"ed42d5f5.7bb7e8","type":"for","name":"for vtidx in ss.vt.param_length","xml":"<for silentFailure='true' index=\"vtidx\" start=\"0\" end=\"`$ss.vt.param_length`\">","comments":"","outputs":1,"x":1274.2620086669922,"y":2020.7263746261597,"z":"18bab70b.485059","wires":[["3ea4540b.98db0c","3e079b08.0374c4"]]},{"id":"98a42b2e.eb9288","type":"call","name":"call generate-cp-instance-id","xml":"<call module=\"GENERIC-RESOURCE-API\" rpc=\"generate-cp-instance-id\" mode=\"sync\" >\n","comments":"","outputs":1,"x":2850.012279510498,"y":2474.4406089782715,"z":"18bab70b.485059","wires":[["7d39e063.15c8f"]]},{"id":"7d39e063.15c8f","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":3058.5836732046946,"y":2474.5835707528254,"z":"18bab70b.485059","wires":[["3e10793b.9a74f6"]]},{"id":"3e10793b.9a74f6","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='500'/>\n\t<parameter name='error-message' value=\"`'Error in generating cp-instance-id in SDNC; ' + $error-message.generate-cp-instance-id`\" />\n","comments":"","x":3217.7623081207275,"y":2473.6671714782715,"z":"18bab70b.485059","wires":[]},{"id":"5e6c14c9.1866fc","type":"execute","name":"param[$vt-index].value contains $","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='contains' emitsOutcome='true' >\n    <parameter name='source' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$vt-index].value`' />\n    <parameter name='target' value='$' />\n","comments":"","outputs":1,"x":1253.083366394043,"y":2263.155330657959,"z":"18bab70b.485059","wires":[["31b23028.25db7","d40ac253.f8c87"]]},{"id":"f6adfc0f.4da25","type":"set","name":"set capability-name = INPUT","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$vt-index].resource-resolution-data.capability-name' \n\tvalue='INPUT' />\n","comments":"","x":1917.9887161254883,"y":2606.155107498169,"z":"18bab70b.485059","wires":[]},{"id":"31b23028.25db7","type":"outcomeTrue","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":1500.1314392089844,"y":2605.298038482666,"z":"18bab70b.485059","wires":[["36cb5ee3.07d222"]]},{"id":"d40ac253.f8c87","type":"outcomeFalse","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1506.7976531982422,"y":2262.4409923553467,"z":"18bab70b.485059","wires":[["d9d5a0ca.540d9"]]},{"id":"4f8196dd.da2ac8","type":"set","name":"set param[].value","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$vt-index].value' \n\tvalue='`$vtResp.output[$oidx].resource-value`' />\n","comments":"","x":2097.1545639038086,"y":2264.7978496551514,"z":"18bab70b.485059","wires":[]},{"id":"8d16c621.8bce48","type":"for","name":"for oidx in vtResp.output_length","xml":"<for silentFailure='true' index=\"oidx\" start=\"0\" end=\"`$vtResp.output_length`\">","comments":"","outputs":1,"x":984.7975368499756,"y":2020.9404919147491,"z":"18bab70b.485059","wires":[["ed42d5f5.7bb7e8"]]},{"id":"3ea4540b.98db0c","type":"switchNode","name":"switch: resource-name = param[].name","xml":"<switch test='`$vtResp.output[$oidx].resource-name == $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$vt-index].name`'>\n","comments":"","outputs":1,"x":1588.7975387573242,"y":2073.4404888153076,"z":"18bab70b.485059","wires":[["2096c67.8fa4b3a"]]},{"id":"2096c67.8fa4b3a","type":"outcomeFalse","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1835.5475387573242,"y":2073.4404888153076,"z":"18bab70b.485059","wires":[["5e6c14c9.1866fc"]]},{"id":"3e079b08.0374c4","type":"set","name":"set vt-index","xml":"<set>\n<parameter name='vt-index' value='`$ss.vt.param[$vtidx].index`' />\n","comments":"","x":1505.0475387573242,"y":2020.9404888153076,"z":"18bab70b.485059","wires":[]},{"id":"d9d5a0ca.540d9","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1876.904525756836,"y":2264.7978229522705,"z":"18bab70b.485059","wires":[["4f8196dd.da2ac8","3f724396.103f9c","4ea576ac.864a98"]]},{"id":"ac0615e9.657588","type":"for","name":"for sidx in stored-elements_length","xml":"<for silentFailure='true' index=\"sidx\" start=\"0\" end=\"`$vtResp.output[$oidx].stored-elements_length`\">","comments":"","outputs":1,"x":2869.4406204223633,"y":2525.4406089782715,"z":"18bab70b.485059","wires":[["5ceae0f7.00dd7"]]},{"id":"2dfd3dc1.031cc2","type":"set","name":"set vnfc-network-data[$idx].vnfc-network-role","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$vtidx].vnfc-network-role' \n\tvalue='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$vt-index].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":2901.4407501220703,"y":2429.440608024597,"z":"18bab70b.485059","wires":[]},{"id":"3dc5de79.fddbd2","type":"switchNode","name":"switch: resource-key[].name","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$vt-index].resource-resolution-data.resource-key[$kidx].name`'>\n","comments":"","outputs":1,"x":2422.2262420654297,"y":2359.654755592346,"z":"18bab70b.485059","wires":[["2952f1a9.ebdc1e"]]},{"id":"3f724396.103f9c","type":"for","name":"for kidx in resource-key_length","xml":"<for silentFailure='true' index=\"kidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$vt-index].resource-resolution-data.resource-key_length`\">","comments":"","outputs":1,"x":2143.08731842041,"y":2359.515866279602,"z":"18bab70b.485059","wires":[["3dc5de79.fddbd2"]]},{"id":"2952f1a9.ebdc1e","type":"outcome","name":"vnfc-network-role","xml":"<outcome value='vnfc-network-role'>\n","comments":"","outputs":1,"x":2669.4205017089844,"y":2359.154667854309,"z":"18bab70b.485059","wires":[["5dcb1bf1.af9ca4"]]},{"id":"5ceae0f7.00dd7","type":"set","name":"set vlan-data[]","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$vtidx].connection-point.connection-point-id' \n\tvalue='`$tmp.return.generate-cp-instance-id.id`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$vtidx].connection-point.vlan-data[$sidx].vlan-uuid' \n\tvalue='`$vtResp.output[$oidx].stored-elements[$sidx].vlan-uuid`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$vtidx].connection-point.vlan-data[$sidx].vlan-tag-id' \n\tvalue='`$vtResp.output[$oidx].stored-elements[$sidx].vlantag-value`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$vtidx].connection-point.vlan-data[$sidx].vlan-tag-description' \n\tvalue='`$vtResp.output[$oidx].stored-elements[$sidx].vlantag-name`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$vtidx].connection-point.vlan-data[$sidx].vlan-role' \n\tvalue='`$vtResp.output[$oidx].stored-elements[$sidx].element-vlan-role`' />\n","comments":"","x":3128.190715789795,"y":2525.4408235549927,"z":"18bab70b.485059","wires":[]},{"id":"2622e5a6.a4f91a","type":"outcome","name":"vlan-type","xml":"<outcome value='vlan-type'>\n","comments":"","outputs":1,"x":1957.9523611068726,"y":820.0237946510315,"z":"18bab70b.485059","wires":[["b1bf2c95.f0e6a"]]},{"id":"b1bf2c95.f0e6a","type":"set","name":"set vt.request[].vlan-type","xml":"<set>\n<parameter name='vt.request[$qidx].vlan-type' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":2275.9523611068726,"y":819.7737946510315,"z":"18bab70b.485059","wires":[]},{"id":"cfabc16e.d22c9","type":"execute","name":"resource-key[$sidx].value contains $","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='contains' emitsOutcome='true' >\n    <parameter name='source' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n    <parameter name='target' value='$' />\n","comments":"","outputs":1,"x":2234.7023277282715,"y":861.5238199234009,"z":"18bab70b.485059","wires":[["5efdc67e.fe3a88","251c2759.c4b528"]]},{"id":"5efdc67e.fe3a88","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":2470.059539794922,"y":860.8094797134399,"z":"18bab70b.485059","wires":[["5c9fdcb3.974444"]]},{"id":"251c2759.c4b528","type":"outcomeFalse","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2470.9522972106934,"y":902.5238046646118,"z":"18bab70b.485059","wires":[["f901b2e3.5fb1c"]]},{"id":"f901b2e3.5fb1c","type":"set","name":"set vt.request[].resource-value = NULL","xml":"<set>\n<parameter name='vt.request[$qidx].resource-value' value='' />\n","comments":"","x":2705.4522972106934,"y":902.7738046646118,"z":"18bab70b.485059","wires":[]},{"id":"813436c.51287c8","type":"comment","name":"Manually ASSIGNED","info":"","comments":"","x":2670.9522972106934,"y":823.7738046646118,"z":"18bab70b.485059","wires":[]},{"id":"bd2b8255.e75cf","type":"outcome","name":"unassign","xml":"<outcome value='unassign'>","comments":"","outputs":1,"x":620.2380638122559,"y":2710.666443824768,"z":"18bab70b.485059","wires":[["536d64c5.36366c"]]},{"id":"99154e42.537fc","type":"set","name":"set tmp.ss.param.capability-name","xml":"<set>\n<parameter name='tmp.ss.param.capability-name' \n\tvalue='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.capability-name`' />\n","comments":"","x":1322.0753326416016,"y":2762.603106021881,"z":"18bab70b.485059","wires":[]},{"id":"fd9f4c5c.f9e52","type":"for","name":"for pidx in param_length","xml":"<for silentFailure='true' index=\"pidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param_length`\">","comments":"","outputs":1,"x":1032.2895584106445,"y":2762.674576282501,"z":"18bab70b.485059","wires":[["a999e575.1c2928","99154e42.537fc"]]},{"id":"a999e575.1c2928","type":"switchNode","name":"switch: capability-name - ss vs param","xml":"<switch test='`$tmp.ss.param.capability-name == $ss.capability-name`'>\n","comments":"","outputs":1,"x":1334.0395584106445,"y":2806.1745800971985,"z":"18bab70b.485059","wires":[["23dc02d3.6fa67e"]]},{"id":"23dc02d3.6fa67e","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1575.6467208862305,"y":2805.4960112571716,"z":"18bab70b.485059","wires":[["60d51524.06b0bc"]]},{"id":"536d64c5.36366c","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":792.6546974182129,"y":2710.916615486145,"z":"18bab70b.485059","wires":[["fd9f4c5c.f9e52","56baec5a.1b0854","462d21f2.1c665","77250b2a.b25dc4"]]},{"id":"56baec5a.1b0854","type":"set","name":"set qidx = 0, ss.vt. = null","xml":"<set>\n<parameter name='qidx' value='0' />\n<parameter name='ss.vt.' value='' />\n","comments":"","x":1032.9403915405273,"y":2711.8570618629456,"z":"18bab70b.485059","wires":[]},{"id":"3a8e387d.63afb8","type":"switchNode","name":"switch: resource-key[].name","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].name`'>\n","comments":"","outputs":1,"x":1733.57133102417,"y":2979.666699409485,"z":"18bab70b.485059","wires":[["59a2bef6.09fc4","84d61383.95d1d","1760ce25.f69a32"]]},{"id":"59a2bef6.09fc4","type":"outcome","name":"vlan-tag-key","xml":"<outcome value='vlan-tag-key'>\n","comments":"","outputs":1,"x":1994.4721984863281,"y":3060.527895927429,"z":"18bab70b.485059","wires":[["88817bcf.c0a158"]]},{"id":"88817bcf.c0a158","type":"set","name":"set vt.request[].vlan-tag-key","xml":"<set>\n<parameter name='vt.request[$qidx].vlan-tag-key' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":2286.472198486328,"y":3060.277895927429,"z":"18bab70b.485059","wires":[]},{"id":"cd2882bd.da515","type":"for","name":"for kidx in resource-key_length","xml":"<for silentFailure='true' index=\"kidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key_length`\">","comments":"","outputs":1,"x":1454.4324073791504,"y":2979.5278100967407,"z":"18bab70b.485059","wires":[["3a8e387d.63afb8"]]},{"id":"1760ce25.f69a32","type":"outcome","name":"policy-instance-name","xml":"<outcome value='policy-instance-name'>\n","comments":"","outputs":1,"x":2020.7655906677246,"y":2979.1666116714478,"z":"18bab70b.485059","wires":[["e774df4a.eaec3"]]},{"id":"e774df4a.eaec3","type":"set","name":"set vt.request[].policy-instance-name","xml":"<set>\n<parameter name='vt.request[$qidx].policy-instance-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":2313.1265449523926,"y":2979.277723312378,"z":"18bab70b.485059","wires":[]},{"id":"60d51524.06b0bc","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1216.3130340576172,"y":2936.0674452781677,"z":"18bab70b.485059","wires":[["cd2882bd.da515","aebaf5e.b6d2708","91308e15.022ac","97a4853.acb1778","c481fe57.0e5fa"]]},{"id":"aebaf5e.b6d2708","type":"set","name":"qidx++","xml":"<set>\n<parameter name='qidx' value='`$qidx + 1`' />\n","comments":"","x":1377.9203758239746,"y":3139.0079622268677,"z":"18bab70b.485059","wires":[]},{"id":"91308e15.022ac","type":"set","name":"set vt.request_length = qidx","xml":"<set>\n<parameter name='vt.request_length' value='`$qidx`' />\n","comments":"","x":1442.9203071594238,"y":3186.0080085396767,"z":"18bab70b.485059","wires":[]},{"id":"c481fe57.0e5fa","type":"set","name":"set ss.vt.param[].index","xml":"<set>\n<parameter name='ss.vt.param[$qidx].index' value='`$pidx`' />\n","comments":"","x":1429.1702880859375,"y":2936.353166103363,"z":"18bab70b.485059","wires":[]},{"id":"97a4853.acb1778","type":"set","name":"set ss.vt.param_length = qidx","xml":"<set>\n<parameter name='ss.vt.param_length' value='`$qidx`' />\n","comments":"","x":1450.9679374694824,"y":3229.960410118103,"z":"18bab70b.485059","wires":[]},{"id":"84d61383.95d1d","type":"outcome","name":"vlan-type","xml":"<outcome value='vlan-type'>\n","comments":"","outputs":1,"x":1982.8845520019531,"y":3019.805567741394,"z":"18bab70b.485059","wires":[["f252d523.3cc3a8"]]},{"id":"f252d523.3cc3a8","type":"set","name":"set vt.request[].vlan-type","xml":"<set>\n<parameter name='vt.request[$qidx].vlan-type' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":2276.884552001953,"y":3019.555567741394,"z":"18bab70b.485059","wires":[]},{"id":"30b32779.df0378","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"Failed to get vlan-tag assisgnment from mS\" />\n","comments":"","x":1684.8092002868652,"y":3419.666482925415,"z":"18bab70b.485059","wires":[]},{"id":"462d21f2.1c665","type":"execute","name":"execute RestApiCallNode","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ss.mS.vlan.tag.unassign.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $prop.restapi.ss-mS-vlan-tag-assign`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='POST' />\n    <parameter name=\"responsePrefix\" value=\"vtResp\" />\n\n","comments":"","outputs":1,"x":1043.0476188659668,"y":3414.623510360718,"z":"18bab70b.485059","wires":[["8f1cc4ea.d8c3f8","68438a46.bcac94","59bbb103.2c354"]]},{"id":"8f1cc4ea.d8c3f8","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1291.069694519043,"y":3414.6217498779297,"z":"18bab70b.485059","wires":[["b6feb5ca.7c49b8"]]},{"id":"68438a46.bcac94","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1282.06978225708,"y":3327.407500267029,"z":"18bab70b.485059","wires":[["b6feb5ca.7c49b8"]]},{"id":"59bbb103.2c354","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1287.2484321594238,"y":3515.193067550659,"z":"18bab70b.485059","wires":[["2d4d7f91.b7a1"]]},{"id":"b6feb5ca.7c49b8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1481.7735557556152,"y":3327.0516986846924,"z":"18bab70b.485059","wires":[["30b32779.df0378","edfa51a0.5047d"]]},{"id":"78e365ab.5d123c","type":"set","name":"set resource-resolution-data.status = FAILED","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$vt-index].resource-resolution-data.status' \n\tvalue='FAILED' />\n","comments":"","x":2146.6311073303223,"y":3370.952248573303,"z":"18bab70b.485059","wires":[]},{"id":"edfa51a0.5047d","type":"for","name":"for i in ss.vt.param_length","xml":"<for index=\"i\" start=\"0\" end=\"`$ss.vt.param_length`\">","comments":"","outputs":1,"x":1773.7024574279785,"y":3326.7024459838867,"z":"18bab70b.485059","wires":[["78e365ab.5d123c","4973f586.14705c"]]},{"id":"2d4d7f91.b7a1","type":"switchNode","name":"switch: vtResp.error-code","xml":"<switch test='`$vtResp.error-code`'>\n","comments":"","outputs":1,"x":1491.9286003112793,"y":3514.69015789032,"z":"18bab70b.485059","wires":[["1d848ac5.5bffc5","e02a10a3.08af2"]]},{"id":"1d848ac5.5bffc5","type":"outcomeTrue","name":"500","xml":"<outcome value='500'>\n","comments":"","outputs":1,"x":1704.178596496582,"y":3514.44015789032,"z":"18bab70b.485059","wires":[["ebf60cda.01468"]]},{"id":"e02a10a3.08af2","type":"outcomeTrue","name":"200","xml":"<outcome value='200'>\n","comments":"","outputs":1,"x":1705.6786003112793,"y":3557.19015789032,"z":"18bab70b.485059","wires":[["89aba429.6c5b08"]]},{"id":"15cba858.25ec08","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500'/>\n<parameter name='error-message' value=\"`'Encountered error from mS-vlan-tag-assign with error-code = ' + $vtResp.error-code + ' and error-message = ' + $vtResp.error-message`\" />\n","comments":"","x":2041.0951881408691,"y":3513.856824874878,"z":"18bab70b.485059","wires":[]},{"id":"4973f586.14705c","type":"set","name":"set vt-index","xml":"<set>\n<parameter name='vt-index' value='`$ss.vt.param[$i].index`' />\n","comments":"","x":2042.0952186584473,"y":3325.773657798767,"z":"18bab70b.485059","wires":[]},{"id":"eb72df67.db143","type":"for","name":"for i in ss.vt.param_length","xml":"<for silentFailure='true' index=\"i\" start=\"0\" end=\"`$ss.vt.param_length`\">","comments":"","outputs":1,"x":2145.369260787964,"y":3557.118952512741,"z":"18bab70b.485059","wires":[["a52673f3.1fbae","2b132c6a.ce4694"]]},{"id":"89aba429.6c5b08","type":"for","name":"for oidx in output_length","xml":"<for silentFailure='true' index=\"oidx\" start=\"0\" end=\"`$vtResp.output_length`\">","comments":"","outputs":1,"x":1894.9047889709473,"y":3557.3330698013306,"z":"18bab70b.485059","wires":[["eb72df67.db143"]]},{"id":"a52673f3.1fbae","type":"set","name":"set vt-index","xml":"<set>\n<parameter name='vt-index' value='`$ss.vt.param[$i]-index`' />\n","comments":"","x":2376.154790878296,"y":3557.333066701889,"z":"18bab70b.485059","wires":[]},{"id":"2b132c6a.ce4694","type":"set","name":"set resource-resolution-data.status = DELETED","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$vt-index].resource-resolution-data.status' \n\tvalue='DELETED' />\n","comments":"","x":2481.5713996887207,"y":3611.9995889663696,"z":"18bab70b.485059","wires":[]},{"id":"ebf60cda.01468","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1863.5712699890137,"y":3514.333176612854,"z":"18bab70b.485059","wires":[["15cba858.25ec08","78e365ab.5d123c"]]},{"id":"400b190a.ad3658","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":680.2380752563477,"y":93.0000057220459,"z":"18bab70b.485059","wires":[["794c3bd7.52c604","4a7eb9fd.2690f8"]]},{"id":"5dcb1bf1.af9ca4","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2600.7739639282227,"y":2430.2738285064697,"z":"18bab70b.485059","wires":[["2dfd3dc1.031cc2","ac0615e9.657588","98a42b2e.eb9288"]]},{"id":"89615294.66cdb","type":"set","name":"set Test vtResp","xml":"<set>\n<parameter name='vtResp.output_length' value='2' />\n<parameter name='vtResp.output[0].resource-name' value='vlan-tag-1' />\n<parameter name='vtResp.output[0].resource-value' value='[3553]' />\n<parameter name='vtResp.output[0].resource-vlan-role' value='outer-tag' />\n<parameter name='vtResp.output[0].stored-elements_length' value='1' />\n<parameter name='vtResp.output[0].stored-elements[0].vlan-uuid' value='vlan-uuid-0' />\n<parameter name='vtResp.output[0].stored-elements[0].vlantag-name' value='VPE-Cust' />\n<parameter name='vtResp.output[0].stored-elements[0].vlantag-value' value='3553' />\n<parameter name='vtResp.output[0].stored-elements[0].element-vlan-role' value='' />\n\n<parameter name='vtResp.output[1].resource-name' value='vlan-tag-2' />\n<parameter name='vtResp.output[1].resource-value' value='[  3503, 4001, 4002 ]' />\n<parameter name='vtResp.output[1].resource-vlan-role' value='' />\n<parameter name='vtResp.output[1].stored-elements_length' value='3' />\n<parameter name='vtResp.output[1].stored-elements[0].vlan-uuid' value='vlan-uuid-1' />\n<parameter name='vtResp.output[1].stored-elements[0].vlantag-name' value='VPE-Cust-Outer' />\n<parameter name='vtResp.output[1].stored-elements[0].vlantag-value' value='3503' />\n<parameter name='vtResp.output[1].stored-elements[0].element-vlan-role' value='outer-tag' />\n<parameter name='vtResp.output[1].stored-elements[1].vlan-uuid' value='vlan-uuid-2' />\n<parameter name='vtResp.output[1].stored-elements[1].vlantag-name' value='VPE-Core1' />\n<parameter name='vtResp.output[1].stored-elements[1].vlantag-value' value='4001' />\n<parameter name='vtResp.output[1].stored-elements[1].element-vlan-role' value='outer-tag' />\n<parameter name='vtResp.output[1].stored-elements[2].vlan-uuid' value='vlan-uuid-3' />\n<parameter name='vtResp.output[1].stored-elements[2].vlantag-name' value='VPE-Core2' />\n<parameter name='vtResp.output[1].stored-elements[2].vlantag-value' value='4002' />\n<parameter name='vtResp.output[1].stored-elements[2].element-vlan-role' value='outer-tag' />\n<parameter name='vtResp.error-code' value='200' />\n<parameter name='vtResp.error-message' value='Success' />","comments":"","x":1018.5713958740234,"y":154.6666488647461,"z":"18bab70b.485059","wires":[]},{"id":"4ea576ac.864a98","type":"set","name":"set status = SUCCESS","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$vt-index].resource-resolution-data.status' \n\tvalue='SUCCESS' />\n","comments":"","x":2116.6667861938477,"y":2308.953077316284,"z":"18bab70b.485059","wires":[]},{"id":"36cb5ee3.07d222","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1665.7144088745117,"y":2606.095492362976,"z":"18bab70b.485059","wires":[["f6adfc0f.4da25","d9d5a0ca.540d9"]]},{"id":"7f2ac8f5.b14ab8","type":"set","name":"set vf-module-assignments.vms.vm[0]","xml":"<set>\n<parameter name = 'service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-type' value = '`$ss.param.vm-type`' />\n<parameter name = 'service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].onap-model-information.model-invariant-uuid' value = '`$ss.param.vnfc-model-invariant-uuid`' />\n<parameter name = 'service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].onap-model-information.model-customization-uuid' value = '`$ss.param.vnfc-model-customization-uuid`' />\n<parameter name = 'service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].onap-model-information.model-version' value = '`$ss.param.vnfc-model-version`' />\n<parameter name = 'service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-name' value = '`$ss.param.vnfc-name`' />\n","comments":"","x":1002.6195297241211,"y":1908.4757766723633,"z":"18bab70b.485059","wires":[]},{"id":"40f8a21b.55c32c","type":"switchNode","name":"switch: param[].name","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].name`'>\n","comments":"","outputs":1,"x":1192.6191749572754,"y":1430.047266960144,"z":"18bab70b.485059","wires":[["1e26a553.851dbb","873a1e7f.54941","6727a465.553d3c","d0b31b1f.5def08","7e326156.e1aa3","4d7f7e2a.2956b","ef3cf31.e52ee1"]]},{"id":"1e26a553.851dbb","type":"outcome","name":"nfc-function","xml":"<outcome value='nfc-function'>\n","comments":"","outputs":1,"x":1428.3691749572754,"y":1430.297266960144,"z":"18bab70b.485059","wires":[["df016e0b.7adcd"]]},{"id":"df016e0b.7adcd","type":"set","name":"set ss.param.nfc-function, index","xml":"<set>\n<parameter name='ss.param.nfc-function' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].value`' />\n<parameter name='ss.param.nfc-function-index' value='`$pidx`' />\n","comments":"","x":1670.61918258667,"y":1430.5472354888916,"z":"18bab70b.485059","wires":[]},{"id":"873a1e7f.54941","type":"outcome","name":"nfc-naming-code","xml":"<outcome value='nfc-naming-code'>\n","comments":"","outputs":1,"x":1445.8691749572754,"y":1473.0472660064697,"z":"18bab70b.485059","wires":[["380568d9.a753b8"]]},{"id":"380568d9.a753b8","type":"set","name":"set ss.param.nfc-naming-code, index","xml":"<set>\n<parameter name='ss.param.nfc-naming-code' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].value`' />\n<parameter name='ss.param.nfc-naming-code-index' value='`$pidx`' />\n","comments":"","x":1733.1191139221191,"y":1473.047233581543,"z":"18bab70b.485059","wires":[]},{"id":"6727a465.553d3c","type":"outcome","name":"vnfc-model-customization-uuid","xml":"<outcome value='vnfc-model-customization-uuid'>\n","comments":"","outputs":1,"x":1489.61918258667,"y":1513.047266960144,"z":"18bab70b.485059","wires":[["4b4855e5.e71dbc"]]},{"id":"4b4855e5.e71dbc","type":"set","name":"set ss.param.vnfc-model-customization-uuid, index","xml":"<set>\n<parameter name='ss.param.vnfc-model-customization-uuid' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].value`' />\n<parameter name='ss.param.vnfc-model-customization-uuid-index' value='`$pidx`' />\n","comments":"","x":1843.8691215515137,"y":1513.0472345352173,"z":"18bab70b.485059","wires":[]},{"id":"d0b31b1f.5def08","type":"outcome","name":"vnfc-model-invariant-uuid","xml":"<outcome value='vnfc-model-invariant-uuid'>\n","comments":"","outputs":1,"x":1474.6191749572754,"y":1554.2972679138184,"z":"18bab70b.485059","wires":[["fe3372ce.8fc2d"]]},{"id":"fe3372ce.8fc2d","type":"set","name":"set ss.param.vnfc-model-invariant-uuid, index","xml":"<set>\n<parameter name='ss.param.vnfc-model-invariant-uuid' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].value`' />\n<parameter name='ss.param.vnfc-model-invariant-uuid-index' value='`$pidx`' />\n","comments":"","x":1792.8691139221191,"y":1554.2972354888916,"z":"18bab70b.485059","wires":[]},{"id":"7e326156.e1aa3","type":"outcome","name":"vnfc-model-version","xml":"<outcome value='vnfc-model-version'>\n","comments":"","outputs":1,"x":1457.1191749572754,"y":1596.7972688674927,"z":"18bab70b.485059","wires":[["db9ea743.984528"]]},{"id":"db9ea743.984528","type":"set","name":"set ss.param.vnfc-model-version, index","xml":"<set>\n<parameter name='ss.param.vnfc-model-version' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].value`' />\n<parameter name='ss.param.vnfc-model-version-index' value='`$pidx`' />\n","comments":"","x":1775.3691139221191,"y":1596.797236442566,"z":"18bab70b.485059","wires":[]},{"id":"4d7f7e2a.2956b","type":"outcome","name":"vm-type","xml":"<outcome value='vm-type'>\n","comments":"","outputs":1,"x":1425.8691749572754,"y":1639.2972688674927,"z":"18bab70b.485059","wires":[["fe2fb327.98e5"]]},{"id":"fe2fb327.98e5","type":"set","name":"set ss.param.vm-type, index","xml":"<set>\n<parameter name='ss.param.vm-type' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].value`' />\n<parameter name='ss.param.vm-type-index' value='`$pidx`' />\n","comments":"","x":1668.11918258667,"y":1639.5472373962402,"z":"18bab70b.485059","wires":[]},{"id":"a086481f.d85a58","type":"for","name":"for pidx in param_length","xml":"<for silentFailure='true' index=\"pidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param_length`\">","comments":"","outputs":1,"x":963.8968772888184,"y":1430.3291292190552,"z":"18bab70b.485059","wires":[["40f8a21b.55c32c"]]},{"id":"ef3cf31.e52ee1","type":"outcome","name":"vnfc-name","xml":"<outcome value='vnfc-name'>\n","comments":"","outputs":1,"x":1432.6193161010742,"y":1684.1899585723877,"z":"18bab70b.485059","wires":[["f86260c2.177e2"]]},{"id":"3e5e9da0.cfebc2","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":723.7141952514648,"y":1430.1427745819092,"z":"18bab70b.485059","wires":[["a086481f.d85a58","7f2ac8f5.b14ab8","8d16c621.8bce48","c976c592.6bd708","d26dd0a7.d0427","819091da.5a883"]]},{"id":"ae02cee3.d0816","type":"switchNode","name":"switch: param[].name == ss.param.vnfc-name-unresolved-value","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$x].name == $ss.param.vnfc-name-unresolved-value`'>\n","comments":"","outputs":1,"x":2377.1428985595703,"y":1868.2856531143188,"z":"18bab70b.485059","wires":[["b490bc9c.d9675"]]},{"id":"1afd223.7f2abde","type":"for","name":"for x in param_length","xml":"<for silentFailure='true' index=\"x\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param_length`\">","comments":"","outputs":1,"x":2018.4206008911133,"y":1868.56751537323,"z":"18bab70b.485059","wires":[["ae02cee3.d0816"]]},{"id":"f86260c2.177e2","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1625.1428298950195,"y":1684.1429386138916,"z":"18bab70b.485059","wires":[["56061d3b.bae174","5a98edf9.ee2974","db0713cf.ddb5b","62e89f18.96e0f","49f1bd8.cda8344","5f092097.5409d"]]},{"id":"56061d3b.bae174","type":"execute","name":"replace ${ with \"\"","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$ss.param.vnfc-name-unresolved-value`\" />\n\t<parameter name=\"target\" value=\"${\"/>\n\t<parameter name=\"replacement\" value=\"\"/>\n\t<parameter name=\"outputPath\" value=\"ss.param.vnfc-name-unresolved-value\"/>\n","comments":"","outputs":1,"x":1842.8571853637695,"y":1729.142873764038,"z":"18bab70b.485059","wires":[[]]},{"id":"5a98edf9.ee2974","type":"set","name":"set ss.param.vnfc-name-unresolved-value","xml":"<set>\n<parameter name='ss.param.vnfc-name-unresolved-value' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].value`' />\n","comments":"","x":1918.5714950561523,"y":1683.8570909500122,"z":"18bab70b.485059","wires":[]},{"id":"db0713cf.ddb5b","type":"execute","name":"replace } with \"\"","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$ss.param.vnfc-name-unresolved-value`\" />\n\t<parameter name=\"target\" value=\"}\"/>\n\t<parameter name=\"replacement\" value=\"\"/>\n\t<parameter name=\"outputPath\" value=\"ss.param.vnfc-name-unresolved-value\"/>\n","comments":"","outputs":1,"x":1841.4286499023438,"y":1774.428674697876,"z":"18bab70b.485059","wires":[[]]},{"id":"b490bc9c.d9675","type":"outcomeFalse","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2688.5713119506836,"y":1868.4285612106323,"z":"18bab70b.485059","wires":[["cdd94088.95b23"]]},{"id":"62e89f18.96e0f","type":"record","name":"record ss.param.vnfc-name-unresolved-value","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"`'ss.param.vnfc-name-unresolved-value = ' + $ss.param.vnfc-name-unresolved-value`\"/>","comments":"","outputs":1,"x":1935.7142868041992,"y":1823.0000667572021,"z":"18bab70b.485059","wires":[[]]},{"id":"49f1bd8.cda8344","type":"switchNode","name":"switch: ss.param.vnfc-name","xml":"<switch test='`$ss.param.vnfc-name`'>\n","comments":"","outputs":1,"x":1882.8570175170898,"y":1975.8570461273193,"z":"18bab70b.485059","wires":[["2955d2ee.f7a4ae"]]},{"id":"2955d2ee.f7a4ae","type":"outcomeFalse","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":2092.8570709228516,"y":1976.2856159210205,"z":"18bab70b.485059","wires":[["dce6c066.5fa53"]]},{"id":"dce6c066.5fa53","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value='Unable to resolve vnfc-name' />\n","comments":"","x":2260.5236053466797,"y":1975.9999151229858,"z":"18bab70b.485059","wires":[]},{"id":"e4a31c9b.e10fe","type":"set","name":"set ss.param.vnfc-name, index","xml":"<set>\n<parameter name='ss.param.vnfc-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$x].value`' />\n<parameter name='ss.param.vnfc-name-index' value='`$x`' />\n","comments":"","x":3096.285690307617,"y":1867.9045991897583,"z":"18bab70b.485059","wires":[]},{"id":"cdd94088.95b23","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2836.607147216797,"y":1868.0361166000366,"z":"18bab70b.485059","wires":[["e4a31c9b.e10fe","28c202ba.b4543e"]]},{"id":"e04ad205.115a6","type":"execute","name":"generate vlan-tag url, replace action","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.ss-mS-vlan-tag-assign`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ss-vlan-tag-url\"/>\n    <parameter name=\"target\" value=\"{action}\"/>\n    <parameter name=\"replacement\" value=\"`$ss.capability-action`\"/>\n","comments":"","outputs":1,"x":1075.476203918457,"y":1002.9999732971191,"z":"18bab70b.485059","wires":[[]]},{"id":"77250b2a.b25dc4","type":"execute","name":"generate vlan-tag url, replace action","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.ss-mS-vlan-tag-assign`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ss-vlan-tag-url\"/>\n    <parameter name=\"target\" value=\"{action}\"/>\n    <parameter name=\"replacement\" value=\"`$ss.capability-action`\"/>\n","comments":"","outputs":1,"x":1073.571418762207,"y":3264.666498184204,"z":"18bab70b.485059","wires":[[]]},{"id":"5f092097.5409d","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1817.8571548461914,"y":1868.5239009857178,"z":"18bab70b.485059","wires":[["1afd223.7f2abde","a9dff780.281f48"]]},{"id":"a9dff780.281f48","type":"returnSuccess","name":"CATCH BREAK","xml":"<return status='success'>\n","comments":"","x":1975.0000457763672,"y":1915.2380981445312,"z":"18bab70b.485059","wires":[]},{"id":"28c202ba.b4543e","type":"returnFailure","name":"BREAK","xml":"<return status='failure'>","comments":"","x":3023.9999389648438,"y":1909.523759841919,"z":"18bab70b.485059","wires":[]},{"id":"c976c592.6bd708","type":"set","name":"set vm_length, vnfc-names_length = 1","xml":"<set>\n<parameter name = 'service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm_length' value = '1' />\n<parameter name = 'service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names_length' value = '1' />\n","comments":"","x":1004.1429061889648,"y":1955.238166809082,"z":"18bab70b.485059","wires":[]},{"id":"d26dd0a7.d0427","type":"set","name":"set vnfc-network-data_length","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data_length' \n\tvalue='`$ss.vt.param_length`' />\n","comments":"","x":973.5715370178223,"y":2379.5239448547363,"z":"18bab70b.485059","wires":[]},{"id":"819091da.5a883","type":"set","name":"set vlan-data_length","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-assignments.vms.vm[0].vm-names.vnfc-names[0].vnfc-networks.vnfc-network-data[$vtidx].connection-point.vlan-data_length' \n\tvalue='`$vtResp.output[$oidx].stored-elements_length`' />\n","comments":"","x":947.4285125732422,"y":2428.095299720764,"z":"18bab70b.485059","wires":[]}]