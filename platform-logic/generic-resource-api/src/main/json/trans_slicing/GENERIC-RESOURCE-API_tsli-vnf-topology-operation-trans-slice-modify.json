[
    {
        "id": "ac624e71.e83e6",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 171,
        "y": 64,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "64be4f08.6aea"
            ]
        ]
    },
    {
        "id": "64be4f08.6aea",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 396.2856903076172,
        "y": 138.23810863494873,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "f27e10ce.472c98"
            ]
        ]
    },
    {
        "id": "f27e10ce.472c98",
        "type": "method",
        "name": "method tsli-vnf-topology-operation-trans-slice-modify",
        "xml": "<method rpc='tsli-vnf-topology-operation-trans-slice-modify' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 402.42860412597656,
        "y": 223.00003051757812,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "816a022.ba1e5"
            ]
        ]
    },
    {
        "id": "816a022.ba1e5",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 772.238037109375,
        "y": 247.66668701171875,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "7291ffac.f47d98",
                "5b16d7f3.f39658",
                "984b7b53.1aa03"
            ]
        ]
    },
    {
        "id": "7291ffac.f47d98",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1027.571533203125,
        "y": 401.59698486328125,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "5b16d7f3.f39658",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
        "comments": "",
        "outputs": 1,
        "x": 1095,
        "y": 221,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "8db3edad.5b6268",
                "958fc136.3797b8",
                "401f18c4.3af048"
            ]
        ]
    },
    {
        "id": "8db3edad.5b6268",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1320,
        "y": 79,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "8cab1f9e.65c1d"
            ]
        ]
    },
    {
        "id": "958fc136.3797b8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1315.490966796875,
        "y": 148.57403564453125,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "cfcd4dd6.dea03"
            ]
        ]
    },
    {
        "id": "401f18c4.3af048",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1304,
        "y": 195,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "d5a10454.2e80c"
            ]
        ]
    },
    {
        "id": "8cab1f9e.65c1d",
        "type": "switchNode",
        "name": "switch allotted-resources_length != 0",
        "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1559,
        "y": 76,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "70da458e.fda3bc",
                "6f3a2217.99f894"
            ]
        ]
    },
    {
        "id": "cfcd4dd6.dea03",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1469.0623779296875,
        "y": 151.85977172851562,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "d5a10454.2e80c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1473,
        "y": 196,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "70da458e.fda3bc",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1772,
        "y": 100,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "bd2fd8a5.f00818"
            ]
        ]
    },
    {
        "id": "6f3a2217.99f894",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1774,
        "y": 40,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "37ce0108.16d956",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 1074,
        "y": 109,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "bd2fd8a5.f00818",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1757,
        "y": 188,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "ec9312e3.eb3ca",
                "9b47cb2b.81e09",
                "adac8296.d1b27",
                "77439122.61f0b"
            ]
        ]
    },
    {
        "id": "e730d63c.e66e38",
        "type": "set",
        "name": "set network-route-A",
        "xml": "<set>\n<parameter name='network-route-A' value=\"`$tmp.aai.logical-link.link-name`\" />\n<!--<parameter name='network-route-A' value=\"`$tmp.aai.logical-link.link-id`\" />-->\n\n\n",
        "comments": "",
        "x": 4286,
        "y": 789,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "c64bfbc6.879f7",
        "type": "set",
        "name": "set network-route-B",
        "xml": "<set>\n<parameter name='network-route-B' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
        "comments": "",
        "x": 4287,
        "y": 844,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "ff867076.ee06e",
        "type": "save",
        "name": "get allotted-resource from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2243,
        "y": 239,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "5403527b.88731c",
                "8f1044d7.262e1",
                "fca4f411.30d608"
            ]
        ]
    },
    {
        "id": "5403527b.88731c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2459,
        "y": 306,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "c2edf5fc.e5137"
            ]
        ]
    },
    {
        "id": "8f1044d7.262e1",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2459.490966796875,
        "y": 205.573974609375,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "3217fee.d348a02"
            ]
        ]
    },
    {
        "id": "fca4f411.30d608",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2455,
        "y": 255,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "f1099938.4bc92"
            ]
        ]
    },
    {
        "id": "3217fee.d348a02",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2637.0625,
        "y": 205.8597412109375,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "f1099938.4bc92",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2637,
        "y": 255,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "f5428168.15427",
        "type": "save",
        "name": "get logical-link from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
        "comments": "",
        "outputs": 1,
        "x": 3512,
        "y": 760,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "1fed7fd6.0c4fe",
                "f8799fe1.4abef8",
                "d188d9ec.71606"
            ]
        ]
    },
    {
        "id": "1fed7fd6.0c4fe",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3803.490966796875,
        "y": 738.573974609375,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "ffec4368.f8ba48"
            ]
        ]
    },
    {
        "id": "f8799fe1.4abef8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3792,
        "y": 783,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "151cf988.8ad956"
            ]
        ]
    },
    {
        "id": "ffec4368.f8ba48",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3952.0625,
        "y": 738.8597412109375,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "151cf988.8ad956",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3951,
        "y": 783,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "d188d9ec.71606",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3798,
        "y": 830,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "8fff13f1.763be8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3952,
        "y": 869,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "e730d63c.e66e38",
                "c64bfbc6.879f7",
                "c69cbeca.4faa",
                "2b820704.044208",
                "beecbbd2.7ea1a8",
                "a8912b98.c24c78",
                "9445731f.f1b8",
                "beaf21fd.396d98",
                "2829cd3e.73ff62",
                "7826fce9.171054",
                "b9213dab.6d883"
            ]
        ]
    },
    {
        "id": "c69cbeca.4faa",
        "type": "save",
        "name": "get network-route-A from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-A'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-A\">",
        "comments": "",
        "outputs": 1,
        "x": 4299,
        "y": 912,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "d9da27fc.f85c4",
                "3045193c.0d7bae",
                "76f3dd2f.3c28d4"
            ]
        ]
    },
    {
        "id": "2b820704.044208",
        "type": "save",
        "name": "get network-route-B from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-B'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-B\">",
        "comments": "",
        "outputs": 1,
        "x": 4278,
        "y": 1513.9998779296875,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "25feaffc.acded8",
                "26743549.dc4b22",
                "ff50bd0e.ddbd08"
            ]
        ]
    },
    {
        "id": "d9da27fc.f85c4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4500,
        "y": 796,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "ba59ec84.99ac68"
            ]
        ]
    },
    {
        "id": "3045193c.0d7bae",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4495.509033203125,
        "y": 845.426025390625,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "ad41c558.00f2a8"
            ]
        ]
    },
    {
        "id": "76f3dd2f.3c28d4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4499.509033203125,
        "y": 896.426025390625,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "ebc4d333.c786a8"
            ]
        ]
    },
    {
        "id": "ba59ec84.99ac68",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4648.571533203125,
        "y": 795.2857666015625,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "ad41c558.00f2a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4638.509033203125,
        "y": 845.426025390625,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "25feaffc.acded8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4501,
        "y": 1483.9998779296875,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "2bc46d17.93cc82"
            ]
        ]
    },
    {
        "id": "26743549.dc4b22",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4496.509033203125,
        "y": 1533.4259033203125,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "a64784dd.690338"
            ]
        ]
    },
    {
        "id": "ff50bd0e.ddbd08",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4500.509033203125,
        "y": 1584.4259033203125,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "931306d1.d3283"
            ]
        ]
    },
    {
        "id": "2bc46d17.93cc82",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4649.571533203125,
        "y": 1483.28564453125,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "a64784dd.690338",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4639.509033203125,
        "y": 1533.4259033203125,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "1aed53b.116f82c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5313.66650390625,
        "y": 940,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "619a05cb.adfe5c",
                "5b58ea0d.24a54c",
                "905e3d50.55dc98",
                "dd052d48.cba96",
                "b7a8cd0a.a295c8"
            ]
        ]
    },
    {
        "id": "ea57ed7c.15442",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5141,
        "y": 941,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "1aed53b.116f82c"
            ]
        ]
    },
    {
        "id": "8edf59fc.a82d48",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5150.490966796875,
        "y": 983.5740356445312,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "570ecccd.bd6704"
            ]
        ]
    },
    {
        "id": "e1f5e0a7.fbe22",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5139,
        "y": 1030,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "255c623d.471bfe"
            ]
        ]
    },
    {
        "id": "570ecccd.bd6704",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 5304.0623779296875,
        "y": 986.8597717285156,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "255c623d.471bfe",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 5308,
        "y": 1031,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "ebc4d333.c786a8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4661,
        "y": 898,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "ea10d538.727c98",
                "4657b647.55f63"
            ]
        ]
    },
    {
        "id": "931306d1.d3283",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4651,
        "y": 1585.9998779296875,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "43662fc0.4ec678",
                "e3b7ca54.9f27e"
            ]
        ]
    },
    {
        "id": "2f410c53.a9f8cc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5281.66650390625,
        "y": 1776,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "70aaa8b7.fc83",
                "935d2e0c.b95b5",
                "a91261bc.f4013",
                "f0d8d3fe.456d88",
                "4a4ba10e.425478"
            ]
        ]
    },
    {
        "id": "c5b9dba7.8bb408",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5109,
        "y": 1777,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "2f410c53.a9f8cc"
            ]
        ]
    },
    {
        "id": "6fce8e3b.c6c098",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5118.490966796875,
        "y": 1819.5740356445312,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "67bae243.7edff4"
            ]
        ]
    },
    {
        "id": "f5f65108.ccf83",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5107,
        "y": 1866,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "ec2da4a6.84f478"
            ]
        ]
    },
    {
        "id": "67bae243.7edff4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 5272.0623779296875,
        "y": 1822.8597717285156,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "ec2da4a6.84f478",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 5276,
        "y": 1867,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "619a05cb.adfe5c",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5578,
        "y": 924,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "5ef97752.07d688",
                "c9edb813.b2e9a8"
            ]
        ]
    },
    {
        "id": "c9edb813.b2e9a8",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5801,
        "y": 879,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "c390e3ab.84675"
            ]
        ]
    },
    {
        "id": "5ef97752.07d688",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5803,
        "y": 943,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "32a44f9b.55b96"
            ]
        ]
    },
    {
        "id": "c9427e8e.5d7928",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
        "comments": "",
        "x": 6136,
        "y": 834,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "32a44f9b.55b96",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 5965,
        "y": 939,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "c390e3ab.84675",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5966,
        "y": 876,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "bdd6ab52.9ce23",
                "c9427e8e.5d7928"
            ]
        ]
    },
    {
        "id": "bdd6ab52.9ce23",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
        "comments": "",
        "x": 6137,
        "y": 942,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "23e97c61.f4450c",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 6138,
        "y": 891,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "905e3d50.55dc98",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 5580,
        "y": 1083,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "5b58ea0d.24a54c",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainA",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 5625,
        "y": 993,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "b5028671.057418",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[?] all together\nin order to assemble the correct values for provider-id, \ntopology-id, node-id, etc.",
        "comments": "",
        "x": 5514,
        "y": 1034,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "70aaa8b7.fc83",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5568,
        "y": 1780.0001220703125,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "2f13a37c.a92d4c",
                "1f784ca.d54b3b3"
            ]
        ]
    },
    {
        "id": "1f784ca.d54b3b3",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5791,
        "y": 1735.0001220703125,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "e1b624d9.9bbf38"
            ]
        ]
    },
    {
        "id": "2f13a37c.a92d4c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5793,
        "y": 1799.0001220703125,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "4e43e07a.4a4518"
            ]
        ]
    },
    {
        "id": "c9a078dc.2502f",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
        "comments": "",
        "x": 6126,
        "y": 1693.0001220703125,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "4e43e07a.4a4518",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 5952,
        "y": 1818.0001220703125,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "e1b624d9.9bbf38",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5956,
        "y": 1732.0001220703125,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "c9a078dc.2502f",
                "99d11d48.4d4eb"
            ]
        ]
    },
    {
        "id": "99d11d48.4d4eb",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
        "comments": "",
        "x": 6127,
        "y": 1798.0001220703125,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "9eaecf4d.e4667",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 6122,
        "y": 1747.0001220703125,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "a91261bc.f4013",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 5570,
        "y": 1939.0001220703125,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "935d2e0c.b95b5",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainB",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 5615,
        "y": 1849.0001220703125,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "469c34a1.af89cc",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[?] all together\nin order to assemble the correct values for provider-id, \ntopology-id, node-id, etc.",
        "comments": "",
        "x": 5504,
        "y": 1887.0001220703125,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "beecbbd2.7ea1a8",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4498,
        "y": 2243,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "a8912b98.c24c78",
        "type": "set",
        "name": "set attachment_param",
        "xml": "<set>\n<parameter name='prop.connection-attachment.access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='prop.connection-attachment.access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='prop.connection-attachment.access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='prop.connection-attachment.access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='prop.connection-attachment.access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n\n<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='prop.remote.connection-attachment.access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='prop.remote.connection-attachment.access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n\n<!--<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$oof.vpn.access-provider-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-client-id' value='`$oof.vpn.access-client-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$oof.vpn.access-topology-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-node-id' value='`$oof.vpn.access-node-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />-->\n",
        "comments": "",
        "x": 4292,
        "y": 2144,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "af47af84.110af8",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "put proper values for src topology-id, node-id, ltp-id, etc (in domain A)\nand dst topology-id, node-id, ltp-id, etc (in domain B)",
        "comments": "",
        "x": 4266,
        "y": 2097,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "dd052d48.cba96",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 5708,
        "y": 1131,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "f0d8d3fe.456d88",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 5697,
        "y": 2004.0001220703125,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "ae94a833.e2ef38",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 6752,
        "y": 651,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "c451b700.662738",
                "ee68b795.c2a168",
                "ace90efd.77ffe"
            ]
        ]
    },
    {
        "id": "c2edf5fc.e5137",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2639,
        "y": 306,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "1ff347ef.e7b2e8"
            ]
        ]
    },
    {
        "id": "7a5b73c3.f0d28c",
        "type": "outcome",
        "name": "logical-link",
        "xml": "<outcome value='logical-link'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1036.0001220703125,
        "y": 701.0001220703125,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "ccbf1140.19585"
            ]
        ]
    },
    {
        "id": "b1e2d1e5.6e9708",
        "type": "switchNode",
        "name": "switch allotted-resource.relationship-list not empty",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2202,
        "y": 400,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "7c767dcf.19dfdc",
                "d51662bd.168b2"
            ]
        ]
    },
    {
        "id": "d51662bd.168b2",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2523,
        "y": 382,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "7c767dcf.19dfdc",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2505,
        "y": 480,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "8418b8d3.470188"
            ]
        ]
    },
    {
        "id": "44cccb98.9e0bdc",
        "type": "set",
        "name": "set the current logical-link-name",
        "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n<parameter name='currLinkIsFound' value=\"false\" />\n\n\n",
        "comments": "",
        "x": 1459,
        "y": 604,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "ccbf1140.19585",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1213,
        "y": 694,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "44cccb98.9e0bdc",
                "320f3490.61a614",
                "32833f1a.e66008"
            ]
        ]
    },
    {
        "id": "98d74c6b.7ea498",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 4841,
        "y": 903,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "ea10d538.727c98",
        "type": "save",
        "name": "get p-interface-src from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4884,
        "y": 968,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "ea57ed7c.15442",
                "8edf59fc.a82d48",
                "e1f5e0a7.fbe22"
            ]
        ]
    },
    {
        "id": "43662fc0.4ec678",
        "type": "save",
        "name": "get p-interface-dst from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4881,
        "y": 1812,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "c5b9dba7.8bb408",
                "6fce8e3b.c6c098",
                "f5f65108.ccf83"
            ]
        ]
    },
    {
        "id": "c2ae8d1a.02bb38",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 4842,
        "y": 1756,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "1ff347ef.e7b2e8",
        "type": "save",
        "name": "get allotted-resource relationship from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2932,
        "y": 253,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "71f13357.4b37e4",
                "12669306.d1641d",
                "413b010a.53c048"
            ]
        ]
    },
    {
        "id": "12669306.d1641d",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3205.490966796875,
        "y": 145.573974609375,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "d85757cb.be9398"
            ]
        ]
    },
    {
        "id": "d85757cb.be9398",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3383.0625,
        "y": 145.8597412109375,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "413b010a.53c048",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3201,
        "y": 195,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "5076f4c7.aca6dc"
            ]
        ]
    },
    {
        "id": "5076f4c7.aca6dc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3383,
        "y": 195,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "71f13357.4b37e4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3205,
        "y": 246,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "bf1d01a6.50c2b8"
            ]
        ]
    },
    {
        "id": "bf1d01a6.50c2b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3385,
        "y": 246,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "b1e2d1e5.6e9708"
            ]
        ]
    },
    {
        "id": "23de1461.f7fad4",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 811,
        "y": 630,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "93fa809a.f8471"
            ]
        ]
    },
    {
        "id": "93fa809a.f8471",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1082,
        "y": 626,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "7a5b73c3.f0d28c"
            ]
        ]
    },
    {
        "id": "9f0e5f06.ee06a8",
        "type": "outcome",
        "name": "network-policy",
        "xml": "<outcome value='network-policy'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3361,
        "y": 444,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "b98b1343.e21bb8"
            ]
        ]
    },
    {
        "id": "b98b1343.e21bb8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3537.9998779296875,
        "y": 436.9998779296875,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "9e9361de.0c104",
                "8294dd76.04b2e8"
            ]
        ]
    },
    {
        "id": "9e9361de.0c104",
        "type": "set",
        "name": "set the 1st network-policy-id",
        "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 3780.9998779296875,
        "y": 393.9998779296875,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "8294dd76.04b2e8",
        "type": "save",
        "name": "get network-policy from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
        "comments": "",
        "outputs": 1,
        "x": 3769.9998779296875,
        "y": 448.9998779296875,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "95cd2e3f.fb2aa8",
                "693c717a.beef58",
                "f0a71170.4750e"
            ]
        ]
    },
    {
        "id": "f0a71170.4750e",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4023,
        "y": 335,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "db1f3e72.2f054"
            ]
        ]
    },
    {
        "id": "db1f3e72.2f054",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4171.571533203125,
        "y": 335.2857666015625,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "7ea2a2fb.50ff6c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4170.509033203125,
        "y": 379.426025390625,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "693c717a.beef58",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4011.509033203125,
        "y": 379.426025390625,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "7ea2a2fb.50ff6c"
            ]
        ]
    },
    {
        "id": "95cd2e3f.fb2aa8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4018.509033203125,
        "y": 458.426025390625,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "bd36bdff.e88188"
            ]
        ]
    },
    {
        "id": "bd36bdff.e88188",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4157.509033203125,
        "y": 458.426025390625,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "643f567.bba5728",
                "283fdbf8.9648a4"
            ]
        ]
    },
    {
        "id": "643f567.bba5728",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 4363,
        "y": 456,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "4657b647.55f63",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4885,
        "y": 638,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "6871172e.d637a",
                "b2977d1.b21a28"
            ]
        ]
    },
    {
        "id": "b2977d1.b21a28",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5108,
        "y": 624,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "825034c4.107dc"
            ]
        ]
    },
    {
        "id": "6871172e.d637a",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5110,
        "y": 657,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "82e08e87.8dd7f"
            ]
        ]
    },
    {
        "id": "82e08e87.8dd7f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 5253,
        "y": 654,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "825034c4.107dc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5256,
        "y": 617,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "c1e0b1e8.e0a1e",
                "d9b3786f.e4ed38"
            ]
        ]
    },
    {
        "id": "c1e0b1e8.e0a1e",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
        "comments": "",
        "x": 5418,
        "y": 612,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "e3b7ca54.9f27e",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4899,
        "y": 1474.9998779296875,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "f845da67.b2281",
                "e9edfbfb.6ae668"
            ]
        ]
    },
    {
        "id": "e9edfbfb.6ae668",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5122,
        "y": 1460.9998779296875,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "be966044.873a98"
            ]
        ]
    },
    {
        "id": "f845da67.b2281",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5124,
        "y": 1493.9998779296875,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "11abed66.7180bb"
            ]
        ]
    },
    {
        "id": "11abed66.7180bb",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 5267,
        "y": 1490.9998779296875,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "be966044.873a98",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5270,
        "y": 1453.9998779296875,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "79f40934.57e7e8",
                "cf727f02.7a65a"
            ]
        ]
    },
    {
        "id": "79f40934.57e7e8",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
        "comments": "",
        "x": 5464,
        "y": 1457,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "984b7b53.1aa03",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 1062,
        "y": 161,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "b7a8cd0a.a295c8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5532,
        "y": 1208,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "e798551d.3d9488"
            ]
        ]
    },
    {
        "id": "e798551d.3d9488",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5738,
        "y": 1208,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "ac96ab38.3de338"
            ]
        ]
    },
    {
        "id": "ac96ab38.3de338",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5953.28564453125,
        "y": 1207.82177734375,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "5414c400.9dc3ac"
            ]
        ]
    },
    {
        "id": "5414c400.9dc3ac",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6160.1171875,
        "y": 1208.34033203125,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "81a82367.d6151",
                "2f9bf799.a13628",
                "18b69352.36c53d"
            ]
        ]
    },
    {
        "id": "81a82367.d6151",
        "type": "set",
        "name": "set source ttp-id",
        "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6375.1171875,
        "y": 1170.34033203125,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "2f9bf799.a13628",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 6372.1171875,
        "y": 1209.34033203125,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "ab674828.77dd8"
            ]
        ]
    },
    {
        "id": "18b69352.36c53d",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 6327.6171875,
        "y": 1251.34033203125,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "ab674828.77dd8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6552.6171875,
        "y": 1208.34033203125,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "2908f068.502838"
            ]
        ]
    },
    {
        "id": "2908f068.502838",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6710.6171875,
        "y": 1208.34033203125,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "81bd3643.b73a3"
            ]
        ]
    },
    {
        "id": "81bd3643.b73a3",
        "type": "set",
        "name": "set source tunnel tp ip",
        "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 6917.6171875,
        "y": 1208.34033203125,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "4a4ba10e.425478",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5529,
        "y": 2077.0001220703125,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "a847aa00.dd7a08"
            ]
        ]
    },
    {
        "id": "a847aa00.dd7a08",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5735,
        "y": 2077.0001220703125,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "49e71e1.8d9866"
            ]
        ]
    },
    {
        "id": "49e71e1.8d9866",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5950.28564453125,
        "y": 2076.8218994140625,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "5b5e6199.c314a"
            ]
        ]
    },
    {
        "id": "5b5e6199.c314a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6157.1171875,
        "y": 2077.3404541015625,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "278051a2.c31a16",
                "9a637a3a.0233e8",
                "2850c206.2136fe"
            ]
        ]
    },
    {
        "id": "278051a2.c31a16",
        "type": "set",
        "name": "set destination ttp-id",
        "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6372.1171875,
        "y": 2039.3404541015625,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "9a637a3a.0233e8",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 6369.1171875,
        "y": 2078.3404541015625,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "ac430b92.d43478"
            ]
        ]
    },
    {
        "id": "2850c206.2136fe",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 6324.6171875,
        "y": 2120.3404541015625,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "ac430b92.d43478",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6549.6171875,
        "y": 2077.3404541015625,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "8753e537.7fd47"
            ]
        ]
    },
    {
        "id": "8753e537.7fd47",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6707.6171875,
        "y": 2077.3404541015625,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "24ab912c.86e4be"
            ]
        ]
    },
    {
        "id": "24ab912c.86e4be",
        "type": "set",
        "name": "set destination tunnel tp ip",
        "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 6914.6171875,
        "y": 2077.3404541015625,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "d9b3786f.e4ed38",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 5445,
        "y": 684,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "8b5e8581.37f4d8",
                "8910508f.b898c",
                "40d489be.0b4bf"
            ]
        ]
    },
    {
        "id": "8b5e8581.37f4d8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5640.5001220703125,
        "y": 636,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "687e1d5.e5b1be4"
            ]
        ]
    },
    {
        "id": "8910508f.b898c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5632.5001220703125,
        "y": 691,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "cb7280d2.6c252"
            ]
        ]
    },
    {
        "id": "40d489be.0b4bf",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5637.5001220703125,
        "y": 748,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "ed16936d.de3ee8"
            ]
        ]
    },
    {
        "id": "ed16936d.de3ee8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5789.5001220703125,
        "y": 749,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "cb7280d2.6c252",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5800.5001220703125,
        "y": 694,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "687e1d5.e5b1be4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5784.8824462890625,
        "y": 633.6556701660156,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "38f57278.43482e"
            ]
        ]
    },
    {
        "id": "a206cef4.960698",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6367,
        "y": 652,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "7575a6f9.99a6d8"
            ]
        ]
    },
    {
        "id": "7575a6f9.99a6d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6544,
        "y": 644,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "54e418fd.7d6af",
                "ae94a833.e2ef38"
            ]
        ]
    },
    {
        "id": "38f57278.43482e",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5969,
        "y": 648,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "465a8b8c.5405ac"
            ]
        ]
    },
    {
        "id": "465a8b8c.5405ac",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6164,
        "y": 648,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "a206cef4.960698",
                "59e7f171.2fe93"
            ]
        ]
    },
    {
        "id": "54e418fd.7d6af",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainA id",
        "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6782,
        "y": 599,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "c451b700.662738",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6962,
        "y": 642,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "b48ed50b.bbbc98"
            ]
        ]
    },
    {
        "id": "ee68b795.c2a168",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6954,
        "y": 697,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "4b320cb9.f09b9c"
            ]
        ]
    },
    {
        "id": "ace90efd.77ffe",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6959,
        "y": 754,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "7a2345cb.238a24"
            ]
        ]
    },
    {
        "id": "7a2345cb.238a24",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7111,
        "y": 755,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "4b320cb9.f09b9c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7122,
        "y": 700,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "b48ed50b.bbbc98",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 7106.38232421875,
        "y": 639.6556701660156,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "fd510eb.0c6ebf"
            ]
        ]
    },
    {
        "id": "fd510eb.0c6ebf",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 7321,
        "y": 636,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "cf727f02.7a65a",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 5486,
        "y": 1525,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "e6203203.c9d8",
                "a4f2c6e3.35c098",
                "b06c15b4.6714f8"
            ]
        ]
    },
    {
        "id": "e6203203.c9d8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5681.5001220703125,
        "y": 1477,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "3120e335.92d50c"
            ]
        ]
    },
    {
        "id": "a4f2c6e3.35c098",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5673.5001220703125,
        "y": 1532,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "2b2ce729.3eb29"
            ]
        ]
    },
    {
        "id": "b06c15b4.6714f8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5678.5001220703125,
        "y": 1589,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "372a7e76.6eb402"
            ]
        ]
    },
    {
        "id": "372a7e76.6eb402",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5830.5001220703125,
        "y": 1590,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "2b2ce729.3eb29",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5841.5001220703125,
        "y": 1535,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "3120e335.92d50c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5825.8824462890625,
        "y": 1474.6556701660156,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "4dd7dbd3.a1fbd4"
            ]
        ]
    },
    {
        "id": "92a891f6.14f2f8",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6408,
        "y": 1493,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "e81d0130.9f5398"
            ]
        ]
    },
    {
        "id": "e81d0130.9f5398",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6585,
        "y": 1485,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "43e58e9.258b1f",
                "f320f01a.c0cb68"
            ]
        ]
    },
    {
        "id": "4dd7dbd3.a1fbd4",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 6010,
        "y": 1489,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "ef34bdf9.86d6a"
            ]
        ]
    },
    {
        "id": "ef34bdf9.86d6a",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6205,
        "y": 1489,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "92a891f6.14f2f8",
                "15f68679.004ff2"
            ]
        ]
    },
    {
        "id": "f320f01a.c0cb68",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 6793,
        "y": 1492,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "21d26d09.bf8d42",
                "e79de436.351eb",
                "42168163.8f503"
            ]
        ]
    },
    {
        "id": "43e58e9.258b1f",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainB id",
        "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6823,
        "y": 1440,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "21d26d09.bf8d42",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 7003,
        "y": 1483,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "8f151e48.516da8"
            ]
        ]
    },
    {
        "id": "e79de436.351eb",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6995,
        "y": 1538,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "43ccb9c7.d7ad"
            ]
        ]
    },
    {
        "id": "42168163.8f503",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 7000,
        "y": 1595,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "d86c14ab.73faf8"
            ]
        ]
    },
    {
        "id": "d86c14ab.73faf8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7152,
        "y": 1596,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "43ccb9c7.d7ad",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7163,
        "y": 1541,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "8f151e48.516da8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 7147.38232421875,
        "y": 1480.6556701660156,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "48915602.68268"
            ]
        ]
    },
    {
        "id": "48915602.68268",
        "type": "set",
        "name": "set controller domainB data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 7362,
        "y": 1477,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "8418b8d3.470188",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 359,
        "y": 606,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "3e42f499.a0a45c",
                "23de1461.f7fad4"
            ]
        ]
    },
    {
        "id": "3e42f499.a0a45c",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 805,
        "y": 465,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "61c833be.b9761c"
            ]
        ]
    },
    {
        "id": "61c833be.b9761c",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3170,
        "y": 447,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "9f0e5f06.ee06a8"
            ]
        ]
    },
    {
        "id": "59e7f171.2fe93",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 6370,
        "y": 726,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "db4451ce.036298"
            ]
        ]
    },
    {
        "id": "db4451ce.036298",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6547,
        "y": 718,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "3b56e152.cb5dfe"
            ]
        ]
    },
    {
        "id": "3b56e152.cb5dfe",
        "type": "set",
        "name": "set domainA ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6782,
        "y": 842,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "8d9dc5d1.6f53b",
        "type": "set",
        "name": "set domainB ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6822,
        "y": 1682,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "b9cc1a89.57ad48",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6587,
        "y": 1558,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "8d9dc5d1.6f53b"
            ]
        ]
    },
    {
        "id": "15f68679.004ff2",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 6410,
        "y": 1566,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "b9cc1a89.57ad48"
            ]
        ]
    },
    {
        "id": "283fdbf8.9648a4",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 4362,
        "y": 502,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "53d902b0.393754",
        "type": "execute",
        "name": "execute UUID generator for ethernet-service-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4384,
        "y": 637,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "2829cd3e.73ff62",
        "type": "execute",
        "name": "execute UUID generator for otn-tunnel-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4365,
        "y": 687,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "ec9312e3.eb3ca",
        "type": "for",
        "name": "for each allotted-resource",
        "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1956,
        "y": 188,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "f47a653.ec6e298",
                "ff867076.ee06e"
            ]
        ]
    },
    {
        "id": "f47a653.ec6e298",
        "type": "set",
        "name": "set the current allotted-resource-id",
        "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
        "comments": "",
        "x": 2240,
        "y": 158,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "9445731f.f1b8",
        "type": "set",
        "name": "set query_param",
        "xml": "<set>\n<parameter name='prop.ethsrvType' value='`$network-route-A`' />\n\n",
        "comments": "",
        "x": 4281,
        "y": 2196,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "beaf21fd.396d98",
        "type": "set",
        "name": "unset parameters",
        "xml": "<set>\n<parameter name='domain-A.tunnel-tp-id' value='' />\n<parameter name='domain-A.node-id' value='' />\n<parameter name='domain-A.network-id' value=\"\" />\n<parameter name='domain-A.provider-id' value=\"\" />\n<parameter name='domain-A.client-id' value=\"\" />\n<parameter name='domain-A.te-topo-id' value=\"\" />\n<parameter name='domain-A.network-type' value=\"\" />\n<parameter name='domain-A.ltpId' value=\"\" />\n<parameter name='tmp.domain-A.network-id' value=\"\" />\n<parameter name='tmp.domain-A.ttp-id' value=\"\" />\n<parameter name='network-route-A' value=\"\" />\n<!--<parameter name='domain-A.' value=\"\" />-->\n\n<parameter name='request-id' value='' />\n<parameter name='otn-source-node' value='' />\n<parameter name='otn-dest-node' value='' />\n<parameter name='bw-odu' value=\"\" />\n<parameter name='src-ttp-id' value='' />\n<parameter name='dst-ttp-id' value='' />\n\n<parameter name='domain-B.tunnel-tp-id' value='' />\n<parameter name='domain-B.node-id' value='' />\n<parameter name='domain-B.network-id' value=\"\" />\n<parameter name='domain-B.provider-id' value=\"\" />\n<parameter name='domain-B.client-id' value=\"\" />\n<parameter name='domain-B.te-topo-id' value=\"\" />\n<parameter name='domain-B.network-type' value=\"\" />\n<parameter name='domain-B.ltpId' value=\"\" />\n<parameter name='tmp.domain-B.network-id' value=\"\" />\n<parameter name='tmp.domain-B.ttp-id' value=\"\" />\n<parameter name='network-route-B' value=\"\" />\n<!--<parameter name='domain-B.' value=\"\" />-->\n\n\n\n\n\n",
        "comments": "",
        "x": 4265,
        "y": 3895,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "7826fce9.171054",
        "type": "set",
        "name": "set new ethernet-service-name",
        "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
        "comments": "",
        "x": 4322,
        "y": 732,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "b9213dab.6d883",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='otnidx' start='0' end='`$tmp.otninfo_length`' >",
        "comments": "",
        "outputs": 1,
        "x": 4316,
        "y": 2316,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "20d68f86.366a48"
            ]
        ]
    },
    {
        "id": "d817cc51.57c43",
        "type": "save",
        "name": "save vpn-binding otnIdx resource (aka. OTN) in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' >\n<parameter name='vpn-id' value='`$prop.vpn-binding-otnidx-uuid`' />\n<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />\n<parameter name='customer-vpn-id' value='`($idx + 1) * 10`' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<parameter name='access-provider-id' value='`$tmp.access-provider-id`' />\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<parameter name='access-client-id' value='`$tmp.access-client-id`' />\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<parameter name='access-topology-id' value='`$tmp.access-topology-id`' />\n<!--<parameter name='src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<parameter name='src-access-node-id' value='`$tmp.domainG-src-access-node-id`' />\n<parameter name='src-access-ltp-id' value='`$tmp.otninfo[$otnidx].srcPort.src-tunnel-tp-id`' />\n<!--<parameter name='dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />-->\n<parameter name='dst-access-node-id' value='`$tmp.domainG-dst-access-node-id`' />\n<parameter name='dst-access-ltp-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-tunnel-tp-id`' />\n<parameter name='route-distinguisher' value='`$gfp`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n\n\n<parameter name='vpn-region' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.url`' />\n<parameter name='vpn-description' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.user`' />\n<parameter name='vpn-platform' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.password`' />\n\n<!-- The following line is in lieu of vpn-binding.slice-id (new attribute in latest AAI) -->\n<parameter name='ops-note' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5439,
        "y": 2884,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "19683517.67ac63"
            ]
        ]
    },
    {
        "id": "ca454382.6438b8",
        "type": "save",
        "name": "save connectivity-A relationship to vpn-binding-A, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 6011.5,
        "y": 2988,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "19683517.67ac63",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5745,
        "y": 2883,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "7b5a7467.79786c"
            ]
        ]
    },
    {
        "id": "7b5a7467.79786c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5954.5,
        "y": 2883.25390625,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "d5f9f3e8.876da8"
            ]
        ]
    },
    {
        "id": "cfeb42d5.8f30e",
        "type": "execute",
        "name": "execute UUID generator for vpn-binding $otnidx",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.vpn-binding-otnidx-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 5475,
        "y": 2348,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "80314abc.ea1038",
        "type": "switchNode",
        "name": "switch otnidx == 0",
        "xml": "<switch test='`$otnidx == 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5348,
        "y": 3001,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "42510192.4150d",
                "e04d6920.7d592"
            ]
        ]
    },
    {
        "id": "42510192.4150d",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5531,
        "y": 3001,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "c6dc5f2e.5970a8"
            ]
        ]
    },
    {
        "id": "e04d6920.7d592",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5356,
        "y": 3148,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "e39528c5.00341"
            ]
        ]
    },
    {
        "id": "d4bb1111.25cff",
        "type": "switchNode",
        "name": "switch otnidx == last",
        "xml": "<switch test='`$otnidx == $tmp.otninfo_length - 1`'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5697,
        "y": 3229,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "63cb7082.8783",
                "18ee91c9.b3e6fe"
            ]
        ]
    },
    {
        "id": "63cb7082.8783",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5882,
        "y": 3230,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "629d009e.881158"
            ]
        ]
    },
    {
        "id": "18ee91c9.b3e6fe",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5901,
        "y": 3496,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "78cc4d6b.9a20e4"
            ]
        ]
    },
    {
        "id": "72b6f676.a7eaa",
        "type": "save",
        "name": "save connectivity-B relationship to vpn-binding-B, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 6312,
        "y": 3231,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "2d690add.7eb056",
        "type": "execute",
        "name": "execute UUID generator for connectivity domain otnidx",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-otnidx-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 6386,
        "y": 3529,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "7eb9bec5.6b496",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-otnidx-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-otnidx-uuid`' />\n<!--<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />-->\n<parameter name='operational-status' value='Created' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<!--<parameter name='access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<!--<parameter name='access-ltp-id' value='``' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='dummy' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<!--<parameter name='CBS' value='`$prop.sotn.cbs`' />-->\n<!--<parameter name='EBS' value='`$prop.sotn.ebs`' />-->\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 6322,
        "y": 3580,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "e4bf0eff.3ff878",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-otnidx-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-otnidx-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 6451,
        "y": 3630,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "44296fc3.86d838",
        "type": "comment",
        "name": "connectivity has not been created for middle domains, so we have to create one",
        "info": "",
        "comments": "",
        "x": 6461,
        "y": 3473,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "dde77510.01e358",
        "type": "save",
        "name": "save connectivity-otnidx relationship to vpn-binding-otnidx, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-otnidx-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-otnidx-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 6419,
        "y": 3689,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "78cc4d6b.9a20e4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 6058,
        "y": 3497,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "2d690add.7eb056",
                "7eb9bec5.6b496",
                "e4bf0eff.3ff878",
                "dde77510.01e358",
                "cf8ac1fc.c141"
            ]
        ]
    },
    {
        "id": "20d68f86.366a48",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4568,
        "y": 2377,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "cfeb42d5.8f30e",
                "d817cc51.57c43",
                "80314abc.ea1038",
                "7c37f4eb.58f484",
                "c24bf6c5.fa73c8",
                "1dbe2057.a5e62",
                "94fd6991.78fda"
            ]
        ]
    },
    {
        "id": "72da75b4.4b328c",
        "type": "set",
        "name": "set attachment_param domain A",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n\n\n",
        "comments": "",
        "x": 5936,
        "y": 3045,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "9684161c.06ddd",
        "type": "execute",
        "name": "execute RestApiCallNode domainA UNI Coloring",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-coloring-uni-port.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-network:networks/network=' + $tmp.domainA.eth-network-id + '/node=' + $tmp.src.pnf-name + '/ietf-network-topology:termination-point=' + $tmp.src.ltpId + '/ietf-te-topology:te' `\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 5989,
        "y": 3089,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "efb749b0.733a",
                "783ce4ab.fbf424"
            ]
        ]
    },
    {
        "id": "783ce4ab.fbf424",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6260,
        "y": 3074,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "ddad2f88.846408"
            ]
        ]
    },
    {
        "id": "efb749b0.733a",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6258.000213623047,
        "y": 3131.99990940094,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "d912d706.5a251"
            ]
        ]
    },
    {
        "id": "ddad2f88.846408",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing UNI Coloring for domain A\" />\n",
        "comments": "",
        "x": 6400.000247955322,
        "y": 3074.0000009536743,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "d912d706.5a251",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6406.02725982666,
        "y": 3122.745394706726,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "c6dc5f2e.5970a8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5672,
        "y": 2991,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "ca454382.6438b8",
                "9684161c.06ddd",
                "72da75b4.4b328c"
            ]
        ]
    },
    {
        "id": "629d009e.881158",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6016,
        "y": 3231,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "72b6f676.a7eaa",
                "14aebcc4.f7f7cb",
                "46bbee51.f68868"
            ]
        ]
    },
    {
        "id": "46bbee51.f68868",
        "type": "set",
        "name": "set attachment_param domain B",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n\n",
        "comments": "",
        "x": 6236,
        "y": 3275,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "14aebcc4.f7f7cb",
        "type": "execute",
        "name": "execute RestApiCallNode domainB UNI Coloring",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-coloring-uni-port.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-network:networks/network=' + $tmp.domainB.eth-network-id + '/node=' + $tmp.dst.pnf-name + '/ietf-network-topology:termination-point=' + $tmp.dst.ltpId + '/ietf-te-topology:te' `\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 6287,
        "y": 3319,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "2a75572.a50f028",
                "b6918e5c.ab31"
            ]
        ]
    },
    {
        "id": "b6918e5c.ab31",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6550,
        "y": 3299,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "18902915.6118d7"
            ]
        ]
    },
    {
        "id": "2a75572.a50f028",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6551.000213623047,
        "y": 3349.99990940094,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "6d64d1d4.bfd958"
            ]
        ]
    },
    {
        "id": "18902915.6118d7",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing UNI coloring for domain B\" />\n",
        "comments": "",
        "x": 6690.000247955322,
        "y": 3299.0000009536743,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "6d64d1d4.bfd958",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6696.02725982666,
        "y": 3347.745394706726,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "cf8ac1fc.c141",
        "type": "set",
        "name": "set attachment_param domain otnidx",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n",
        "comments": "",
        "x": 6333,
        "y": 3749,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "77439122.61f0b",
        "type": "save",
        "name": "get all-vpn-bindings from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v21/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 3652,
        "y": 4096,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "a916ce6e.3a2dd8",
                "8ea0214a.83c",
                "1e283443.a11834"
            ]
        ]
    },
    {
        "id": "a916ce6e.3a2dd8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3840,
        "y": 4109,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "34b3b115.5888ce"
            ]
        ]
    },
    {
        "id": "8ea0214a.83c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3840.490966796875,
        "y": 4154.574035644531,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "389d2b9f.8874d4"
            ]
        ]
    },
    {
        "id": "1e283443.a11834",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3838,
        "y": 4198,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "8afc42fa.281da"
            ]
        ]
    },
    {
        "id": "34b3b115.5888ce",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4013,
        "y": 4107,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "9cfe8596.af4768"
            ]
        ]
    },
    {
        "id": "389d2b9f.8874d4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4003.0623779296875,
        "y": 4154.859771728516,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "8afc42fa.281da",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4005,
        "y": 4197,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "adac8296.d1b27",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='dmnsidx' start='0' end='`$otn-tunnel-slice_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3641,
        "y": 4287,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "a0b78348.a09218"
            ]
        ]
    },
    {
        "id": "a5b6bb26.da9ec8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4451,
        "y": 4287,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "45429cd9.5d7224"
            ]
        ]
    },
    {
        "id": "d9387db0.98ab68",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='stunidx' start='0' end='`$otn-tunnel-slice[$dmnsidx].list_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4223,
        "y": 4287,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "a5b6bb26.da9ec8"
            ]
        ]
    },
    {
        "id": "e7eee5b6.16e978",
        "type": "set",
        "name": "set providerValue",
        "xml": "<set>\n<parameter name='providerValue' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].access-provider-id`' />\n<parameter name='found' value='false' />\n\n\n",
        "comments": "",
        "x": 5343,
        "y": 4054,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "e4dd1d5b.f089e8",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='testingvalue' value='$tmp.otninfo_length -1' />\n",
        "comments": "",
        "x": 5645,
        "y": 3180,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "e39528c5.00341",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5480,
        "y": 3155,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "e4dd1d5b.f089e8",
                "d4bb1111.25cff"
            ]
        ]
    },
    {
        "id": "9b47cb2b.81e09",
        "type": "set",
        "name": "set tmp.arr",
        "xml": "<set>\n<parameter name='tmp.arr' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='tmp.arr_length' value='0' />\n\n<parameter name='otn-tunnel-slice' value='' />\n<parameter name='otn-tunnel-slice_length' value='0' />\n\n<parameter name='tmp.slicevpns' value='' />\n<parameter name='tmp.slicevpns_length' value='0' />\n\n<parameter name='tmp.slicevpnuuids' value='' />\n<parameter name='tmp.slicevpnuuids.' value='' />\n\n<parameter name='bwModified' value='false' />\n\n\n",
        "comments": "",
        "x": 1938,
        "y": 134,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "9cfe8596.af4768",
        "type": "for",
        "name": "for vpnidx in all-vpn-bindings",
        "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4242,
        "y": 4108,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "9ba3a7c0.b0cb88"
            ]
        ]
    },
    {
        "id": "9ba3a7c0.b0cb88",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4457,
        "y": 4109,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "45048a47.3aa5fc"
            ]
        ]
    },
    {
        "id": "30ee7ab9.1c084e",
        "type": "for",
        "name": "for arridx in tmp.arr",
        "xml": "<for index='arridx' start='0' end='`$tmp.arr_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5910,
        "y": 4029,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "53d8a5a4.d4c3ac"
            ]
        ]
    },
    {
        "id": "b5b6b6e5.2bc768",
        "type": "switchNode",
        "name": "switch $tmp.arr_length != 0",
        "xml": "<switch test='`$tmp.arr_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5376,
        "y": 4109,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "1acbae51.13627a",
                "b78197f0.7f231"
            ]
        ]
    },
    {
        "id": "1acbae51.13627a",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5572,
        "y": 4079,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "4305d70.41fb128"
            ]
        ]
    },
    {
        "id": "b78197f0.7f231",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5573,
        "y": 4150,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "513cbe42.5f9f78"
            ]
        ]
    },
    {
        "id": "4305d70.41fb128",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5723,
        "y": 4077,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "30ee7ab9.1c084e",
                "2ee86607.39702a"
            ]
        ]
    },
    {
        "id": "53d8a5a4.d4c3ac",
        "type": "switchNode",
        "name": "switch tmp.arr[$arridx] == $providerValue",
        "xml": "<switch test='`$tmp.arr[$arridx] == $providerValue`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6201,
        "y": 4029,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "f8741b2b.9feaa8",
                "d4cbae1e.f8339"
            ]
        ]
    },
    {
        "id": "f8741b2b.9feaa8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6476,
        "y": 3998,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "8f2d4eac.99e5f8"
            ]
        ]
    },
    {
        "id": "d4cbae1e.f8339",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6477,
        "y": 4069,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "5e18e353.3a05ac"
            ]
        ]
    },
    {
        "id": "8f2d4eac.99e5f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 6627,
        "y": 3996,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "8b8a8ce1.3ddff",
                "9358083a.54b3b8",
                "842d4e41.428d6",
                "c78fe39c.41c76",
                "78c705fa.24e9dc"
            ]
        ]
    },
    {
        "id": "8b8a8ce1.3ddff",
        "type": "set",
        "name": "set found to true",
        "xml": "<set>\n<parameter name='found' value='true' />\n\n\n",
        "comments": "",
        "x": 6815,
        "y": 3956,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "9358083a.54b3b8",
        "type": "save",
        "name": "store $arridx somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='`$arridx`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 6887,
        "y": 4001,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "78c705fa.24e9dc",
        "type": "set",
        "name": "set twoD arr",
        "xml": "<set>\n\n<!--<parameter name='`tmp.arr[$arridx + 1]`' value='`$providerValue`' />-->\n<!--<parameter name='tmp.arr_length' value='`$tmp.arr_length + 1`' />-->\n\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<!--<parameter name='otn-tunnel-slice_length' value='`$arridx + 2`' />-->\n<parameter name='`otn-tunnel-slice[$arridx].list_length`' value='`$sizeOfSliceList + 1`' />\n\n",
        "comments": "",
        "x": 6802,
        "y": 4128,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "c78fe39c.41c76",
        "type": "set",
        "name": "set sizeOfSliceList",
        "xml": "<set>\n<parameter name='sizeOfSliceList' value='`$otn-tunnel-slice[$arridx].list_length`' />\n\n\n",
        "comments": "",
        "x": 6823,
        "y": 4064,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "513cbe42.5f9f78",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5725,
        "y": 4150,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "56c68e45.b909e",
                "62724f29.35ed9"
            ]
        ]
    },
    {
        "id": "56c68e45.b909e",
        "type": "save",
        "name": "store $arridx somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='0' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5980,
        "y": 4143,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "62724f29.35ed9",
        "type": "set",
        "name": "set twoD array",
        "xml": "<set>\n<parameter name='tmp.arr[0]' value='`$providerValue`' />\n<parameter name='tmp.arr_length' value='1' />\n\n<parameter name='`otn-tunnel-slice[0].list[0].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[0].list[0].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[0].list[0].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[0].list[0].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[0].list[0].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<parameter name='otn-tunnel-slice_length' value='1' />\n<parameter name='otn-tunnel-slice[0].list_length' value='1' />\n\n",
        "comments": "",
        "x": 5908,
        "y": 4190,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "2ee86607.39702a",
        "type": "switchNode",
        "name": "switch found?",
        "xml": "<switch test='`$found`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5901,
        "y": 4074,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "57630af9.c71c94",
                "27468ceb.58bbcc"
            ]
        ]
    },
    {
        "id": "57630af9.c71c94",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6061,
        "y": 4066,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "55618a59.0218f4"
            ]
        ]
    },
    {
        "id": "27468ceb.58bbcc",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6059,
        "y": 4103,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "dbf50489.ec13e"
            ]
        ]
    },
    {
        "id": "55618a59.0218f4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6186,
        "y": 4066,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "54fbb2b4.70fc04",
        "type": "save",
        "name": "store $arridx+1 somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='`$arridx + 1`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 6493,
        "y": 4124,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "dbf50489.ec13e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 6219,
        "y": 4111,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "54fbb2b4.70fc04",
                "7e39f539.ebf16c"
            ]
        ]
    },
    {
        "id": "7e39f539.ebf16c",
        "type": "set",
        "name": "set twoD array",
        "xml": "<set>\n<parameter name='`tmp.arr[$arridx + 1]`' value='`$providerValue`' />\n<parameter name='tmp.arr_length' value='`$tmp.arr_length + 1`' />\n\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<parameter name='otn-tunnel-slice_length' value='`$arridx + 2`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list_length`' value='1' />\n\n",
        "comments": "",
        "x": 6410,
        "y": 4170,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "5e18e353.3a05ac",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6610,
        "y": 4068,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "842d4e41.428d6",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 6781,
        "y": 4195,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "7c37f4eb.58f484",
        "type": "switchNode",
        "name": "switch dstPort == NULL",
        "xml": "<switch test=\"`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id == ''`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5178,
        "y": 2407,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "16caf8de.d229e7",
                "54697afc.bd57bc"
            ]
        ]
    },
    {
        "id": "16caf8de.d229e7",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5567,
        "y": 2385,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "6d8c7c43.cb932c"
            ]
        ]
    },
    {
        "id": "54697afc.bd57bc",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5568,
        "y": 2431,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "92ed67c7.8c7a"
            ]
        ]
    },
    {
        "id": "6d8c7c43.cb932c",
        "type": "set",
        "name": "set access-provider-id and client-id",
        "xml": "<set>\n<parameter name='tmp.access-provider-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-provider-id`' />\n<parameter name='tmp.access-client-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-client-id`' />\n<parameter name='tmp.access-topology-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-topology-id`' />\n<parameter name='tmp.srcdstpnf-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n",
        "comments": "",
        "x": 5781,
        "y": 2384,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "92ed67c7.8c7a",
        "type": "set",
        "name": "set access-provider-id and client-id",
        "xml": "<set>\n<parameter name='tmp.access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />\n<parameter name='tmp.access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />\n<parameter name='tmp.access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />\n<parameter name='tmp.srcdstpnf-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />\n",
        "comments": "",
        "x": 5779,
        "y": 2429,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "45429cd9.5d7224",
        "type": "set",
        "name": "set attachment_param sliceG",
        "xml": "<set>\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].request-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].request-id`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].otn-source-node`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].otn-source-node`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].otn-dest-node`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].otn-dest-node`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].bw-odu`' value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].bw-odu`\" />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].src-ttp-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].src-ttp-id`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].dst-ttp-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].dst-ttp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='otn-tunnel-sliceG-list_length' value='`$stunidx + 1`' />\n\n\n<parameter name=\"tmp.domainG.restapiUrl\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainurl`\" />\n<parameter name=\"tmp.domainG.restapiUser\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainuser`\" />\n<parameter name=\"tmp.domainG.restapiPassword\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainpassword`\" />",
        "comments": "",
        "x": 4704,
        "y": 4285,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "8c979de9.c09378",
        "type": "execute",
        "name": "execute RestApiCallNode sliceG creation domainG",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.transport-sliceG-list-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$tmp.domainG.restapiUrl + '/restconf/operations/ietf-optical-slice:create-optical-slice'`\" />\n<parameter name=\"restapiUser\" value=\"`$tmp.domainG.restapiUser`\" />\n<parameter name=\"restapiPassword\" value=\"`tmp.domainG.restapiPassword`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 4289,
        "y": 4393,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "e196ec28.ce397",
                "9ae42505.217cf8"
            ]
        ]
    },
    {
        "id": "9ae42505.217cf8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4572,
        "y": 4373,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "bf5b9f50.921198"
            ]
        ]
    },
    {
        "id": "e196ec28.ce397",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4573.000213623047,
        "y": 4423.99990940094,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "ca17658e.a8462"
            ]
        ]
    },
    {
        "id": "bf5b9f50.921198",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing slice creation api for domain A\" />\n",
        "comments": "",
        "x": 4712.000247955322,
        "y": 4373.000000953674,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "ca17658e.a8462",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4718.02725982666,
        "y": 4421.745394706726,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "c24bf6c5.fa73c8",
        "type": "set",
        "name": "set srcdstpnf-name",
        "xml": "<set>\n<parameter name='tmp.srcdstpnf-name' value=\"`'networkId-providerId-' + \n                                             $tmp.access-provider-id + '-clientId-' +\n                                             $tmp.access-client-id + '-topologyId-' + \n                                             $tmp.access-topology-id + '-nodeId-' + \n                                             $tmp.srcdstpnf-id`\" />\n\n",
        "comments": "",
        "x": 5362,
        "y": 2527,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "1dbe2057.a5e62",
        "type": "get-resource",
        "name": "get-resource tmp.srcdstpnf-name",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.srcdstpnf-name\"\n        pfx='tmp.aai.srcdst-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 5406,
        "y": 2575,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "b817832b.d2bf5",
                "fd3a55f8.c9d638",
                "b887d27c.b753c8"
            ]
        ]
    },
    {
        "id": "b817832b.d2bf5",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5618.5,
        "y": 2522,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "ad57831e.648c8"
            ]
        ]
    },
    {
        "id": "fd3a55f8.c9d638",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5630.5,
        "y": 2572,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "b93496a6.69adc"
            ]
        ]
    },
    {
        "id": "b887d27c.b753c8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5621.5,
        "y": 2627,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "b15272b2.6a6078"
            ]
        ]
    },
    {
        "id": "b15272b2.6a6078",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5766.5,
        "y": 2626,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "b93496a6.69adc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5777.5,
        "y": 2569,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "ad57831e.648c8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5743.8824462890625,
        "y": 2515.6556701660156,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "de6a0737.bde95"
            ]
        ]
    },
    {
        "id": "8779930e.acaac",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6303,
        "y": 2534,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "eb5cb5f4.6dd96"
            ]
        ]
    },
    {
        "id": "eb5cb5f4.6dd96",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6480,
        "y": 2526,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "c49affc6.c8c2f",
                "d02c8535.9950a"
            ]
        ]
    },
    {
        "id": "de6a0737.bde95",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.srcdst-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5905,
        "y": 2530,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "38bf0267.963d4e"
            ]
        ]
    },
    {
        "id": "38bf0267.963d4e",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.srcdst-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6100,
        "y": 2530,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "8779930e.acaac"
            ]
        ]
    },
    {
        "id": "d02c8535.9950a",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainG.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainG.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 6688,
        "y": 2533,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "cdad79e0.120d78",
                "28e812c3.6536fe",
                "4be09c5b.0037ec"
            ]
        ]
    },
    {
        "id": "c49affc6.c8c2f",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainG id",
        "xml": "<set>\n<parameter name='tmp.domainG.esr-thirdparty-id' value=\"`$tmp.aai.srcdst-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6718,
        "y": 2481,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "cdad79e0.120d78",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6898,
        "y": 2524,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "131587f4.87c8f8"
            ]
        ]
    },
    {
        "id": "28e812c3.6536fe",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6890,
        "y": 2579,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "f025d314.592c4"
            ]
        ]
    },
    {
        "id": "4be09c5b.0037ec",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6895,
        "y": 2636,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "ca734be9.796a3"
            ]
        ]
    },
    {
        "id": "ca734be9.796a3",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7047,
        "y": 2637,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "f025d314.592c4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7058,
        "y": 2582,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "131587f4.87c8f8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 7042.38232421875,
        "y": 2521.6556701660156,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "b10b1934.5f3698"
            ]
        ]
    },
    {
        "id": "b10b1934.5f3698",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.url' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.user' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.password' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 7257,
        "y": 2518,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "a0b78348.a09218",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3873,
        "y": 4285,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "d9387db0.98ab68",
                "8c979de9.c09378"
            ]
        ]
    },
    {
        "id": "94fd6991.78fda",
        "type": "switchNode",
        "name": "switch dmnsidx == 0 (domainA)",
        "xml": "<switch test='`$otnidx == 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5376,
        "y": 2744,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "a8dd9104.b00cc8",
                "a5fa454e.c7391"
            ]
        ]
    },
    {
        "id": "a8dd9104.b00cc8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5577,
        "y": 2742,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "bde911bd.4178d"
            ]
        ]
    },
    {
        "id": "bde911bd.4178d",
        "type": "set",
        "name": "set attachment_param domain A",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />",
        "comments": "",
        "x": 5791,
        "y": 2744,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "99bcb408.94c238",
        "type": "switchNode",
        "name": "switch dmnsidx == last (domainB)",
        "xml": "<switch test='`$otnidx == $tmp.otninfo_length - 1`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5794,
        "y": 2793,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "ba84b2ac.820f48",
                "f2bc6a9d.359a1"
            ]
        ]
    },
    {
        "id": "ba84b2ac.820f48",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6024,
        "y": 2789,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "7b7412c.2c058ec"
            ]
        ]
    },
    {
        "id": "7b7412c.2c058ec",
        "type": "set",
        "name": "set attachment_param domain B",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />",
        "comments": "",
        "x": 6238,
        "y": 2792,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "a5fa454e.c7391",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5577,
        "y": 2791,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "99bcb408.94c238"
            ]
        ]
    },
    {
        "id": "f2bc6a9d.359a1",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6025,
        "y": 2835,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "97f6382c.08a66"
            ]
        ]
    },
    {
        "id": "97f6382c.08a66",
        "type": "set",
        "name": "set attachment_param domain G",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />",
        "comments": "",
        "x": 6239,
        "y": 2835,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "d5f9f3e8.876da8",
        "type": "set",
        "name": "set tmp.slicevpns",
        "xml": "<set>\n<parameter name='`tmp.slicevpns[$tmp.slicevpns_length]`' value=\"`$prop.vpn-binding-otnidx-uuid`\" />\n<parameter name='tmp.slicevpns_length' value=\"`$tmp.slicevpns_length + 1`\" />\n\n<parameter name='`tmp.slicevpnuuids[$prop.vpn-binding-otnidx-uuid]`' value=\"`$prop.vpn-binding-otnidx-uuid`\" />\n\n",
        "comments": "",
        "x": 6137,
        "y": 2884,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "45048a47.3aa5fc",
        "type": "switchNode",
        "name": "switch vpnuuid is for this slice",
        "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n    \n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.aai.service-instance.service-instance-id `\">\n",
        "comments": "",
        "outputs": 1,
        "x": 4701,
        "y": 4108,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "34a9fd7.c9a0402",
                "a146c972.fd19c"
            ]
        ]
    },
    {
        "id": "34a9fd7.c9a0402",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4918,
        "y": 4087,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "7c5ab1e1.aaf1f8"
            ]
        ]
    },
    {
        "id": "a146c972.fd19c",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4918,
        "y": 4136,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "7c5ab1e1.aaf1f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5086,
        "y": 4087,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "e7eee5b6.16e978",
                "b5b6b6e5.2bc768"
            ]
        ]
    },
    {
        "id": "320f3490.61a614",
        "type": "save",
        "name": "get logical-link from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
        "comments": "",
        "outputs": 1,
        "x": 1426,
        "y": 718,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "653e0797.1d827",
                "db86f5c5.803548",
                "a788197d.0ee218"
            ]
        ]
    },
    {
        "id": "653e0797.1d827",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1638.490966796875,
        "y": 684.573974609375,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "a3fdac41.0f5208"
            ]
        ]
    },
    {
        "id": "db86f5c5.803548",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1627,
        "y": 729,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "6b3d987f.3963e8"
            ]
        ]
    },
    {
        "id": "a3fdac41.0f5208",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1787.0625,
        "y": 684.8597412109375,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "6b3d987f.3963e8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1786,
        "y": 729,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "a788197d.0ee218",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1632,
        "y": 772,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "6f79cb60.ba682c"
            ]
        ]
    },
    {
        "id": "6f79cb60.ba682c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 778,
        "y": 1111,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "b6c5466.cef2ab8"
            ]
        ]
    },
    {
        "id": "b6c5466.cef2ab8",
        "type": "for",
        "name": "for each svc-instance relationship",
        "xml": "<for index='rel-index' start='0' end='`$tmp.aai.service-instance.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1052,
        "y": 1111,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "db0349a.25c5f38"
            ]
        ]
    },
    {
        "id": "db0349a.25c5f38",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.service-instance.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1287.33349609375,
        "y": 1112,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "e2db5406.ea53a8"
            ]
        ]
    },
    {
        "id": "e2db5406.ea53a8",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 571.000244140625,
        "y": 1265,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "4dfa6aad.834ec4"
            ]
        ]
    },
    {
        "id": "a29cb5bb.c12f3",
        "type": "save",
        "name": "get connectivity from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 960,
        "y": 1270,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "c355a2e8.7aaf9",
                "bfa7f0cb.443038",
                "86dae01c.e8a7d8"
            ]
        ]
    },
    {
        "id": "c355a2e8.7aaf9",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1156,
        "y": 1235,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "1f5a660e.de0452"
            ]
        ]
    },
    {
        "id": "bfa7f0cb.443038",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1156.490966796875,
        "y": 1280.5740356445312,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "f567d172.d846a8"
            ]
        ]
    },
    {
        "id": "86dae01c.e8a7d8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1121,
        "y": 1326,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "3f353c11.763704"
            ]
        ]
    },
    {
        "id": "f567d172.d846a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1316.0625,
        "y": 1277.8597412109375,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "3f353c11.763704",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1274,
        "y": 1328,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "11174c12.9e5084",
        "type": "switchNode",
        "name": "switch loglink-id exists in conn",
        "xml": "<switch test='`$tmp.aai.logical-link.link-id == $tmp.aai.connectivity.etht-svc-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1549,
        "y": 1218,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "b3297b62.15a2f",
                "5b8a7e9c.a8c0b8"
            ]
        ]
    },
    {
        "id": "b3297b62.15a2f",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1760,
        "y": 1183,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "1488db49.ce832d"
            ]
        ]
    },
    {
        "id": "5b8a7e9c.a8c0b8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1757,
        "y": 1244,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "3dd67f85.457d6",
        "type": "set",
        "name": "set currLinkIsFound",
        "xml": "<set>\n<parameter name='currLinkIsFound' value=\"true\" />\n\n\n",
        "comments": "",
        "x": 2098,
        "y": 1156,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "1488db49.ce832d",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1912,
        "y": 1184,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "3dd67f85.457d6"
            ]
        ]
    },
    {
        "id": "17fda0a8.543d27",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2065,
        "y": 1212,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "9e795c2b.8794b8",
        "type": "comment",
        "name": "currLinkIsFound. Go to the next logical-link",
        "info": "",
        "comments": "",
        "x": 2070,
        "y": 1106,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "32833f1a.e66008",
        "type": "switchNode",
        "name": "switch currLinkIsFound",
        "xml": "<switch test='`$currLinkIsFound`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1352,
        "y": 836,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "89a54b3d.dce24",
                "e0be93c4.ec1bf"
            ]
        ]
    },
    {
        "id": "89a54b3d.dce24",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1538,
        "y": 815,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "73540b39.f320f4"
            ]
        ]
    },
    {
        "id": "e0be93c4.ec1bf",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1535,
        "y": 951,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "8fff13f1.763be8"
            ]
        ]
    },
    {
        "id": "73540b39.f320f4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1780,
        "y": 810,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "71783690.9edfa",
        "type": "comment",
        "name": "A new logical-link has been found: modify process should be triggered",
        "info": "",
        "comments": "",
        "x": 1726,
        "y": 914,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "1f5a660e.de0452",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1320,
        "y": 1219,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "11174c12.9e5084",
                "28a678cf.73375"
            ]
        ]
    },
    {
        "id": "28a678cf.73375",
        "type": "switchNode",
        "name": "switch connectivityBW == gfp",
        "xml": "<switch test='`$tmp.aai.connectivity.bandwidth-profile-name == $gfp`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1550,
        "y": 1309,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "7593ee23.7a5fc8",
                "f472c4e4.19eb4"
            ]
        ]
    },
    {
        "id": "7593ee23.7a5fc8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1755,
        "y": 1305,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "f472c4e4.19eb4",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1757,
        "y": 1355,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "a1ad62a5.377c38"
            ]
        ]
    },
    {
        "id": "dbf4dd89.edfbf8",
        "type": "set",
        "name": "set bwModified",
        "xml": "<set>\n<parameter name='bwModified' value=\"true\" />\n\n\n",
        "comments": "",
        "x": 2106,
        "y": 1333,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "a1ad62a5.377c38",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1911,
        "y": 1354,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "dbf4dd89.edfbf8",
                "8b32fc44.9a74b"
            ]
        ]
    },
    {
        "id": "8b32fc44.9a74b",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 931,
        "y": 1559,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "3a2b0e4e.390f2a"
            ]
        ]
    },
    {
        "id": "3a2b0e4e.390f2a",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1136,
        "y": 1559,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "8cc489a8.1663e8"
            ]
        ]
    },
    {
        "id": "8cc489a8.1663e8",
        "type": "outcome",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1302,
        "y": 1559,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "39440cdd.73e4a4"
            ]
        ]
    },
    {
        "id": "39440cdd.73e4a4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1465,
        "y": 1559,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "e3ceb0b1.0227c",
                "837372e0.8cfe9"
            ]
        ]
    },
    {
        "id": "837372e0.8cfe9",
        "type": "set",
        "name": "unset tmp.aai.vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value='' />\n",
        "comments": "",
        "x": 1694,
        "y": 1499,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "e3ceb0b1.0227c",
        "type": "save",
        "name": "get vpn-binding from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1203,
        "y": 1653,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "53bbab14.df656c",
                "656ddda.68726a4",
                "3942f2bd.5b5c6e"
            ]
        ]
    },
    {
        "id": "ee3fab4d.b900c8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1587,
        "y": 1653,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "27f47760.daaf38",
                "8574ddfc.4f71a8"
            ]
        ]
    },
    {
        "id": "53bbab14.df656c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1414,
        "y": 1655,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "ee3fab4d.b900c8"
            ]
        ]
    },
    {
        "id": "656ddda.68726a4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1414.490966796875,
        "y": 1700.5740356445312,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "a14bcd53.80dad"
            ]
        ]
    },
    {
        "id": "3942f2bd.5b5c6e",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1412,
        "y": 1744,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "3d036bfb.d96184"
            ]
        ]
    },
    {
        "id": "3d036bfb.d96184",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1579,
        "y": 1761,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "a14bcd53.80dad",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1577.0623779296875,
        "y": 1700.8597717285156,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "4dfa6aad.834ec4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 743,
        "y": 1265,
        "z": "df5c2cef.29f798",
        "wires": [
            [
                "a29cb5bb.c12f3",
                "ff2edf17.9b8f3"
            ]
        ]
    },
    {
        "id": "ff2edf17.9b8f3",
        "type": "set",
        "name": "unset tmp.aai.connectivity",
        "xml": "<set>\n<parameter name='tmp.aai.connectivity.' value='' />\n",
        "comments": "",
        "x": 963,
        "y": 1213,
        "z": "df5c2cef.29f798",
        "wires": []
    },
    {
        "id": "27f47760.daaf38",
        "type": "save",
        "name": "update vpn-binding A resource (aka. OTN domainA) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='route-distinguisher' value='`$gfp`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1937.5,
        "y": 1648,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    },
    {
        "id": "8574ddfc.4f71a8",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1864.5,
        "y": 1712,
        "z": "df5c2cef.29f798",
        "wires": [
            []
        ]
    }
]