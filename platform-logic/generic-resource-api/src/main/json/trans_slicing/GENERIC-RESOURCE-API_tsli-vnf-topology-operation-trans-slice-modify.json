[
    {
        "id": "874ff500.a76198",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 129,
        "y": 77,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "d5019c0d.28df28"
            ]
        ]
    },
    {
        "id": "d5019c0d.28df28",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 354.2856903076172,
        "y": 151.23810863494873,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "cf3663ab.d505b8"
            ]
        ]
    },
    {
        "id": "cf3663ab.d505b8",
        "type": "method",
        "name": "method tsli-vnf-topology-operation-trans-slice-modify",
        "xml": "<method rpc='tsli-vnf-topology-operation-trans-slice-modify' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 360.42860412597656,
        "y": 236.00003051757812,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "13ea815e.0d1c3f"
            ]
        ]
    },
    {
        "id": "13ea815e.0d1c3f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 730.238037109375,
        "y": 260.66668701171875,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "5ce9625d.05d25c",
                "98411814.65c58",
                "48043489.9f26f4"
            ]
        ]
    },
    {
        "id": "5ce9625d.05d25c",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 985.571533203125,
        "y": 414.59698486328125,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "98411814.65c58",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
        "comments": "",
        "outputs": 1,
        "x": 1053,
        "y": 234,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "899f7de0.012718",
                "bf5ca541.5b386",
                "44585e79.6d35d"
            ]
        ]
    },
    {
        "id": "899f7de0.012718",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1278,
        "y": 92,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "63a35dfa.733074"
            ]
        ]
    },
    {
        "id": "bf5ca541.5b386",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1273.490966796875,
        "y": 161.57403564453125,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "5ca7f827.5517"
            ]
        ]
    },
    {
        "id": "44585e79.6d35d",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1262,
        "y": 208,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "f51f087e.0d87d8"
            ]
        ]
    },
    {
        "id": "63a35dfa.733074",
        "type": "switchNode",
        "name": "switch allotted-resources_length != 0",
        "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1517,
        "y": 89,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "8b5f7eec.f199b",
                "d7dba561.3c951"
            ]
        ]
    },
    {
        "id": "5ca7f827.5517",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1427.0623779296875,
        "y": 164.85977172851562,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "f51f087e.0d87d8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1431,
        "y": 209,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "8b5f7eec.f199b",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1730,
        "y": 113,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "8ecf6cbb.a31c18"
            ]
        ]
    },
    {
        "id": "d7dba561.3c951",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1732,
        "y": 53,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "b7af42d7.d75c5",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 1032,
        "y": 122,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "8ecf6cbb.a31c18",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1715,
        "y": 201,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "8f80cd4e.6bb588",
                "1ad0a363.7d61cd",
                "2ea54daa.f8c89a",
                "19fc5975.9c891f"
            ]
        ]
    },
    {
        "id": "4de4347b.ee4a6c",
        "type": "set",
        "name": "set network-route-A",
        "xml": "<set>\n<parameter name='network-route-A' value=\"`$tmp.aai.logical-link.link-name`\" />\n<!--<parameter name='network-route-A' value=\"`$tmp.aai.logical-link.link-id`\" />-->\n\n\n",
        "comments": "",
        "x": 4244,
        "y": 802,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "195d5c42.a96a64",
        "type": "set",
        "name": "set network-route-B",
        "xml": "<set>\n<parameter name='network-route-B' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
        "comments": "",
        "x": 4245,
        "y": 857,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "8f1217ff.70176",
        "type": "save",
        "name": "get allotted-resource from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2201,
        "y": 252,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "56c46d50.0cfc0c",
                "c740637e.1508b",
                "d63f588b.18e9"
            ]
        ]
    },
    {
        "id": "56c46d50.0cfc0c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2417,
        "y": 319,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "576d8604.8f2d9"
            ]
        ]
    },
    {
        "id": "c740637e.1508b",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2417.490966796875,
        "y": 218.573974609375,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "4e6f8b98.289464"
            ]
        ]
    },
    {
        "id": "d63f588b.18e9",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2413,
        "y": 268,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "cf03fd08.161968"
            ]
        ]
    },
    {
        "id": "4e6f8b98.289464",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2595.0625,
        "y": 218.8597412109375,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "cf03fd08.161968",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2595,
        "y": 268,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "520d2541.742f3c",
        "type": "save",
        "name": "get logical-link from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
        "comments": "",
        "outputs": 1,
        "x": 3470,
        "y": 773,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "862d85b.a4a94f8",
                "1732a1e5.237d0e",
                "20df7142.af18a6"
            ]
        ]
    },
    {
        "id": "862d85b.a4a94f8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3761.490966796875,
        "y": 751.573974609375,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "b900c0cd.a71608"
            ]
        ]
    },
    {
        "id": "1732a1e5.237d0e",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3750,
        "y": 796,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "b39978ef.c4e1"
            ]
        ]
    },
    {
        "id": "b900c0cd.a71608",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3910.0625,
        "y": 751.8597412109375,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "b39978ef.c4e1",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3909,
        "y": 796,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "20df7142.af18a6",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3756,
        "y": 843,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "b394b52b.88d4f8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3910,
        "y": 882,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "4de4347b.ee4a6c",
                "195d5c42.a96a64",
                "f201f9ee.69f46",
                "922f6ba7.94fc9",
                "5c94cc42.b4c6e4",
                "898ec19e.6e281",
                "f986e215.6b3c08",
                "4e189d8f.8297c4",
                "c6ccb3e9.91ea18",
                "6963f6fb.4a135",
                "40ae5836.eda238"
            ]
        ]
    },
    {
        "id": "f201f9ee.69f46",
        "type": "save",
        "name": "get network-route-A from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-A'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-A\">",
        "comments": "",
        "outputs": 1,
        "x": 4257,
        "y": 925,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "84f44b11.dfd248",
                "cde6943a.45f4c",
                "c0c26e2b.b056f"
            ]
        ]
    },
    {
        "id": "922f6ba7.94fc9",
        "type": "save",
        "name": "get network-route-B from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-B'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-B\">",
        "comments": "",
        "outputs": 1,
        "x": 4236,
        "y": 1526.9998779296875,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "13feb8ce.6f8f6f",
                "6f75f930.e4c9a8",
                "f4b40172.6e734"
            ]
        ]
    },
    {
        "id": "84f44b11.dfd248",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4458,
        "y": 809,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "d5ccfec3.15cf68"
            ]
        ]
    },
    {
        "id": "cde6943a.45f4c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4453.509033203125,
        "y": 858.426025390625,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "83e64e5.e0d02b"
            ]
        ]
    },
    {
        "id": "c0c26e2b.b056f",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4457.509033203125,
        "y": 909.426025390625,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "fb264c22.bb1ad8"
            ]
        ]
    },
    {
        "id": "d5ccfec3.15cf68",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4606.571533203125,
        "y": 808.2857666015625,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "83e64e5.e0d02b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4596.509033203125,
        "y": 858.426025390625,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "13feb8ce.6f8f6f",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4459,
        "y": 1496.9998779296875,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "ff077827.d85f38"
            ]
        ]
    },
    {
        "id": "6f75f930.e4c9a8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4454.509033203125,
        "y": 1546.4259033203125,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "509006fc.9b56c"
            ]
        ]
    },
    {
        "id": "f4b40172.6e734",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4458.509033203125,
        "y": 1597.4259033203125,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "43958ec8.7b7b1"
            ]
        ]
    },
    {
        "id": "ff077827.d85f38",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4607.571533203125,
        "y": 1496.28564453125,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "509006fc.9b56c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4597.509033203125,
        "y": 1546.4259033203125,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "5e4b48a2.ecf978",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5271.66650390625,
        "y": 953,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "3d7f3635.a666da",
                "5948d066.6a7168",
                "363286ce.e60c2a",
                "92d55b48.2c361",
                "60b689f0.bdfe6"
            ]
        ]
    },
    {
        "id": "8fdbb83e.80931",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5099,
        "y": 954,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "5e4b48a2.ecf978"
            ]
        ]
    },
    {
        "id": "c2d11145.5c5cb",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5108.490966796875,
        "y": 996.5740356445312,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "f49eb8b9.2e621"
            ]
        ]
    },
    {
        "id": "15000269.771dce",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5097,
        "y": 1043,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "941ca63b.315eb8"
            ]
        ]
    },
    {
        "id": "f49eb8b9.2e621",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 5262.0623779296875,
        "y": 999.8597717285156,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "941ca63b.315eb8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 5266,
        "y": 1044,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "fb264c22.bb1ad8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4619,
        "y": 911,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "eb451f8e.4fb418",
                "bf3f1942.662798"
            ]
        ]
    },
    {
        "id": "43958ec8.7b7b1",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4609,
        "y": 1598.9998779296875,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "e17370f4.daf058",
                "42ee84a0.63aa24"
            ]
        ]
    },
    {
        "id": "9695016a.9d52a8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5239.66650390625,
        "y": 1789,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "798301ec.6e9398",
                "e16e0955.66caa8",
                "7dce5f2e.284a1",
                "ff4b33a5.59c68",
                "6468f05e.9836a8"
            ]
        ]
    },
    {
        "id": "ae7e9c7a.b5cf4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5067,
        "y": 1790,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "9695016a.9d52a8"
            ]
        ]
    },
    {
        "id": "ff1945a1.5b3fb8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5076.490966796875,
        "y": 1832.5740356445312,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "1d67971d.5148d9"
            ]
        ]
    },
    {
        "id": "11aaad7f.ae123b",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5065,
        "y": 1879,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "cd2d5016.41656"
            ]
        ]
    },
    {
        "id": "1d67971d.5148d9",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 5230.0623779296875,
        "y": 1835.8597717285156,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "cd2d5016.41656",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 5234,
        "y": 1880,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "3d7f3635.a666da",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5536,
        "y": 937,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "3cfd3bad.5a9524",
                "5da469b2.dc3e8"
            ]
        ]
    },
    {
        "id": "5da469b2.dc3e8",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5759,
        "y": 892,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "688536c6.06de6"
            ]
        ]
    },
    {
        "id": "3cfd3bad.5a9524",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5761,
        "y": 956,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "d7550296.6875"
            ]
        ]
    },
    {
        "id": "8343d32.4aa5eb",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
        "comments": "",
        "x": 6094,
        "y": 847,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "d7550296.6875",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 5923,
        "y": 952,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "688536c6.06de6",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5924,
        "y": 889,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "643d5e30.3c83d8",
                "8343d32.4aa5eb"
            ]
        ]
    },
    {
        "id": "643d5e30.3c83d8",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
        "comments": "",
        "x": 6095,
        "y": 955,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "d03d942d.9c94e8",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 6096,
        "y": 904,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "363286ce.e60c2a",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 5538,
        "y": 1096,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "5948d066.6a7168",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainA",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 5583,
        "y": 1006,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "270e5bf.d3c68a4",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[?] all together\nin order to assemble the correct values for provider-id, \ntopology-id, node-id, etc.",
        "comments": "",
        "x": 5472,
        "y": 1047,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "798301ec.6e9398",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5526,
        "y": 1793.0001220703125,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "17eb4057.5c41d8",
                "986119ae.163bd"
            ]
        ]
    },
    {
        "id": "986119ae.163bd",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5749,
        "y": 1748.0001220703125,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "554f229b.2ed824"
            ]
        ]
    },
    {
        "id": "17eb4057.5c41d8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5751,
        "y": 1812.0001220703125,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "e5820266.08c2b"
            ]
        ]
    },
    {
        "id": "59292690.4b166",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
        "comments": "",
        "x": 6084,
        "y": 1706.0001220703125,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "e5820266.08c2b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 5910,
        "y": 1831.0001220703125,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "554f229b.2ed824",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5914,
        "y": 1745.0001220703125,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "59292690.4b166",
                "a60da831.30b3f"
            ]
        ]
    },
    {
        "id": "a60da831.30b3f",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
        "comments": "",
        "x": 6085,
        "y": 1811.0001220703125,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "bb10fbc2.a10ec8",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 6080,
        "y": 1760.0001220703125,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "7dce5f2e.284a1",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 5528,
        "y": 1952.0001220703125,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "e16e0955.66caa8",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainB",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 5573,
        "y": 1862.0001220703125,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "a786769.ba9bd08",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[?] all together\nin order to assemble the correct values for provider-id, \ntopology-id, node-id, etc.",
        "comments": "",
        "x": 5462,
        "y": 1900.0001220703125,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "5c94cc42.b4c6e4",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4456,
        "y": 2256,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "898ec19e.6e281",
        "type": "set",
        "name": "set attachment_param",
        "xml": "<set>\n<parameter name='prop.connection-attachment.access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='prop.connection-attachment.access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='prop.connection-attachment.access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='prop.connection-attachment.access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='prop.connection-attachment.access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n\n<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='prop.remote.connection-attachment.access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='prop.remote.connection-attachment.access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n\n<!--<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$oof.vpn.access-provider-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-client-id' value='`$oof.vpn.access-client-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$oof.vpn.access-topology-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-node-id' value='`$oof.vpn.access-node-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />-->\n",
        "comments": "",
        "x": 4250,
        "y": 2157,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "4cbb6f6d.e8bed",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "put proper values for src topology-id, node-id, ltp-id, etc (in domain A)\nand dst topology-id, node-id, ltp-id, etc (in domain B)",
        "comments": "",
        "x": 4224,
        "y": 2110,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "92d55b48.2c361",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 5666,
        "y": 1144,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "ff4b33a5.59c68",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 5655,
        "y": 2017.0001220703125,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "c675da0b.5461c8",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 6710,
        "y": 664,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "bb4a9deb.45b028",
                "7bfedf54.b55d88",
                "d4dc18e1.4b9fa8"
            ]
        ]
    },
    {
        "id": "576d8604.8f2d9",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2597,
        "y": 319,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "8047c637.b43eb"
            ]
        ]
    },
    {
        "id": "bcb352a5.999038",
        "type": "outcome",
        "name": "logical-link",
        "xml": "<outcome value='logical-link'>\n",
        "comments": "",
        "outputs": 1,
        "x": 994.0001220703125,
        "y": 714.0001220703125,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "77e7cd5a.50c41c"
            ]
        ]
    },
    {
        "id": "64e2c5c1.d42b2c",
        "type": "switchNode",
        "name": "switch allotted-resource.relationship-list not empty",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2160,
        "y": 413,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "550b6611.97dc",
                "d80de88d.6f84f"
            ]
        ]
    },
    {
        "id": "d80de88d.6f84f",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2481,
        "y": 395,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "550b6611.97dc",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2463,
        "y": 493,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "bcacdfd4.14c6d"
            ]
        ]
    },
    {
        "id": "c443600d.94faa8",
        "type": "set",
        "name": "set the current logical-link-name",
        "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n<parameter name='currLinkIsFound' value=\"false\" />\n\n\n",
        "comments": "",
        "x": 1417,
        "y": 617,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "77e7cd5a.50c41c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1171,
        "y": 707,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "c443600d.94faa8",
                "adcb7aad.70c0d",
                "7947ec90.0b2fbc"
            ]
        ]
    },
    {
        "id": "b29eb633.564108",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 4799,
        "y": 916,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "eb451f8e.4fb418",
        "type": "save",
        "name": "get p-interface-src from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4842,
        "y": 981,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "8fdbb83e.80931",
                "c2d11145.5c5cb",
                "15000269.771dce"
            ]
        ]
    },
    {
        "id": "e17370f4.daf058",
        "type": "save",
        "name": "get p-interface-dst from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4839,
        "y": 1825,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "ae7e9c7a.b5cf4",
                "ff1945a1.5b3fb8",
                "11aaad7f.ae123b"
            ]
        ]
    },
    {
        "id": "dcd9fb09.ef46f8",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 4800,
        "y": 1769,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "8047c637.b43eb",
        "type": "save",
        "name": "get allotted-resource relationship from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2890,
        "y": 266,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "d1511c62.9f2f08",
                "1f77347e.42dfe4",
                "64ec23f4.ba3244"
            ]
        ]
    },
    {
        "id": "1f77347e.42dfe4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3163.490966796875,
        "y": 158.573974609375,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "45b306de.298a5"
            ]
        ]
    },
    {
        "id": "45b306de.298a5",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3341.0625,
        "y": 158.8597412109375,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "64ec23f4.ba3244",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3159,
        "y": 208,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "fd23c3a.05df04"
            ]
        ]
    },
    {
        "id": "fd23c3a.05df04",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3341,
        "y": 208,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "d1511c62.9f2f08",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3163,
        "y": 259,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "a1083b0f.8f91b8"
            ]
        ]
    },
    {
        "id": "a1083b0f.8f91b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3343,
        "y": 259,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "64e2c5c1.d42b2c"
            ]
        ]
    },
    {
        "id": "1a6f80e4.595e77",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 769,
        "y": 643,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "3a09f79.98a6388"
            ]
        ]
    },
    {
        "id": "3a09f79.98a6388",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1040,
        "y": 639,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "bcb352a5.999038"
            ]
        ]
    },
    {
        "id": "77ab35ed.5d2284",
        "type": "outcome",
        "name": "network-policy",
        "xml": "<outcome value='network-policy'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3319,
        "y": 457,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "b58a3427.b81d38"
            ]
        ]
    },
    {
        "id": "b58a3427.b81d38",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3495.9998779296875,
        "y": 449.9998779296875,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "362b1182.0bd166",
                "6c82d6c3.fedf4"
            ]
        ]
    },
    {
        "id": "362b1182.0bd166",
        "type": "set",
        "name": "set the 1st network-policy-id",
        "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 3738.9998779296875,
        "y": 406.9998779296875,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "6c82d6c3.fedf4",
        "type": "save",
        "name": "get network-policy from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
        "comments": "",
        "outputs": 1,
        "x": 3727.9998779296875,
        "y": 461.9998779296875,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "1ff2fa25.6c9396",
                "e4e601c1.f5d79",
                "758d093f.dcc028"
            ]
        ]
    },
    {
        "id": "758d093f.dcc028",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3981,
        "y": 348,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "a8089973.873718"
            ]
        ]
    },
    {
        "id": "a8089973.873718",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4129.571533203125,
        "y": 348.2857666015625,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "d2216009.d4e938",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4128.509033203125,
        "y": 392.426025390625,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "e4e601c1.f5d79",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3969.509033203125,
        "y": 392.426025390625,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "d2216009.d4e938"
            ]
        ]
    },
    {
        "id": "1ff2fa25.6c9396",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3976.509033203125,
        "y": 471.426025390625,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "9a187669.a984"
            ]
        ]
    },
    {
        "id": "9a187669.a984",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4115.509033203125,
        "y": 471.426025390625,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "83c9fbd0.4ea53",
                "9b904bff.ec9058"
            ]
        ]
    },
    {
        "id": "83c9fbd0.4ea53",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 4321,
        "y": 469,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "bf3f1942.662798",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4843,
        "y": 651,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "47a119b0.eb6fa8",
                "52820edd.aa4a2"
            ]
        ]
    },
    {
        "id": "52820edd.aa4a2",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5066,
        "y": 637,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "7649e490.475914"
            ]
        ]
    },
    {
        "id": "47a119b0.eb6fa8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5068,
        "y": 670,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "86cbcc23.726e88"
            ]
        ]
    },
    {
        "id": "86cbcc23.726e88",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 5211,
        "y": 667,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "7649e490.475914",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5214,
        "y": 630,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "ff121e57.29292",
                "450151c8.427488"
            ]
        ]
    },
    {
        "id": "ff121e57.29292",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
        "comments": "",
        "x": 5376,
        "y": 625,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "42ee84a0.63aa24",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4857,
        "y": 1487.9998779296875,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "1ca058bb.f36a17",
                "11f9a295.aa46bd"
            ]
        ]
    },
    {
        "id": "11f9a295.aa46bd",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5080,
        "y": 1473.9998779296875,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "49fa7605.34063"
            ]
        ]
    },
    {
        "id": "1ca058bb.f36a17",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5082,
        "y": 1506.9998779296875,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "45cb9702.942408"
            ]
        ]
    },
    {
        "id": "45cb9702.942408",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 5225,
        "y": 1503.9998779296875,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "49fa7605.34063",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5228,
        "y": 1466.9998779296875,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "875267c0.cfa878",
                "15dbb018.1ec0a8"
            ]
        ]
    },
    {
        "id": "875267c0.cfa878",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
        "comments": "",
        "x": 5422,
        "y": 1470,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "48043489.9f26f4",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 1020,
        "y": 174,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "60b689f0.bdfe6",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5490,
        "y": 1221,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "d6de59ef.b305d8"
            ]
        ]
    },
    {
        "id": "d6de59ef.b305d8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5696,
        "y": 1221,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "8fe7cd4d.34b2f"
            ]
        ]
    },
    {
        "id": "8fe7cd4d.34b2f",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5911.28564453125,
        "y": 1220.82177734375,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "a0e0dfef.59beb"
            ]
        ]
    },
    {
        "id": "a0e0dfef.59beb",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6118.1171875,
        "y": 1221.34033203125,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "2cceafd0.237718",
                "c79a44fd.7a419",
                "b0ce172f.4e793"
            ]
        ]
    },
    {
        "id": "2cceafd0.237718",
        "type": "set",
        "name": "set source ttp-id",
        "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6333.1171875,
        "y": 1183.34033203125,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "c79a44fd.7a419",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 6330.1171875,
        "y": 1222.34033203125,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "6b7d00f0.0adfa"
            ]
        ]
    },
    {
        "id": "b0ce172f.4e793",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 6285.6171875,
        "y": 1264.34033203125,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "6b7d00f0.0adfa",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6510.6171875,
        "y": 1221.34033203125,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "646cdf92.8cc9e8"
            ]
        ]
    },
    {
        "id": "646cdf92.8cc9e8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6668.6171875,
        "y": 1221.34033203125,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "6ef1cda7.04969c"
            ]
        ]
    },
    {
        "id": "6ef1cda7.04969c",
        "type": "set",
        "name": "set source tunnel tp ip",
        "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 6875.6171875,
        "y": 1221.34033203125,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "6468f05e.9836a8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5487,
        "y": 2090.0001220703125,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "592b262a.d8a79"
            ]
        ]
    },
    {
        "id": "592b262a.d8a79",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5693,
        "y": 2090.0001220703125,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "24f444c6.f34f94"
            ]
        ]
    },
    {
        "id": "24f444c6.f34f94",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5908.28564453125,
        "y": 2089.8218994140625,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "82538773.d9e69"
            ]
        ]
    },
    {
        "id": "82538773.d9e69",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6115.1171875,
        "y": 2090.3404541015625,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "f8555c72.503248",
                "ccee56e4.07c16",
                "c641b1.139d865"
            ]
        ]
    },
    {
        "id": "f8555c72.503248",
        "type": "set",
        "name": "set destination ttp-id",
        "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6330.1171875,
        "y": 2052.3404541015625,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "ccee56e4.07c16",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 6327.1171875,
        "y": 2091.3404541015625,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "c03544bc.a4758"
            ]
        ]
    },
    {
        "id": "c641b1.139d865",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 6282.6171875,
        "y": 2133.3404541015625,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "c03544bc.a4758",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6507.6171875,
        "y": 2090.3404541015625,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "e9ccbcc0.192618"
            ]
        ]
    },
    {
        "id": "e9ccbcc0.192618",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6665.6171875,
        "y": 2090.3404541015625,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "8cb4312f.1b7fd"
            ]
        ]
    },
    {
        "id": "8cb4312f.1b7fd",
        "type": "set",
        "name": "set destination tunnel tp ip",
        "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 6872.6171875,
        "y": 2090.3404541015625,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "450151c8.427488",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 5403,
        "y": 697,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "a23d1a8f.c26b88",
                "378c450d.9f83ea",
                "dfbd70ce.dcae1"
            ]
        ]
    },
    {
        "id": "a23d1a8f.c26b88",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5598.5001220703125,
        "y": 649,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "47f12a0.7fd7dd8"
            ]
        ]
    },
    {
        "id": "378c450d.9f83ea",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5590.5001220703125,
        "y": 704,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "aa90c931.1acf78"
            ]
        ]
    },
    {
        "id": "dfbd70ce.dcae1",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5595.5001220703125,
        "y": 761,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "23762cf6.ae956c"
            ]
        ]
    },
    {
        "id": "23762cf6.ae956c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5747.5001220703125,
        "y": 762,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "aa90c931.1acf78",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5758.5001220703125,
        "y": 707,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "47f12a0.7fd7dd8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5742.8824462890625,
        "y": 646.6556701660156,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "7098fc9f.d79a4c"
            ]
        ]
    },
    {
        "id": "afa8e9ca.a2ff88",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6325,
        "y": 665,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "fcbb91a5.b44ad8"
            ]
        ]
    },
    {
        "id": "fcbb91a5.b44ad8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6502,
        "y": 657,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "81752885.eb63a8",
                "c675da0b.5461c8"
            ]
        ]
    },
    {
        "id": "7098fc9f.d79a4c",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5927,
        "y": 661,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "4474e908.078af8"
            ]
        ]
    },
    {
        "id": "4474e908.078af8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6122,
        "y": 661,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "afa8e9ca.a2ff88",
                "82783d37.d452a8"
            ]
        ]
    },
    {
        "id": "81752885.eb63a8",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainA id",
        "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6740,
        "y": 612,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "bb4a9deb.45b028",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6920,
        "y": 655,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "afb3d4f9.ba93a"
            ]
        ]
    },
    {
        "id": "7bfedf54.b55d88",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6912,
        "y": 710,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "4c9ef7f7.e20878"
            ]
        ]
    },
    {
        "id": "d4dc18e1.4b9fa8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6917,
        "y": 767,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "af0e4e29.c0c348"
            ]
        ]
    },
    {
        "id": "af0e4e29.c0c348",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7069,
        "y": 768,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "4c9ef7f7.e20878",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7080,
        "y": 713,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "afb3d4f9.ba93a",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 7064.38232421875,
        "y": 652.6556701660156,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "48d857d6.23bcb8"
            ]
        ]
    },
    {
        "id": "48d857d6.23bcb8",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 7279,
        "y": 649,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "15dbb018.1ec0a8",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 5444,
        "y": 1538,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "ddbec5c8.9e7b8",
                "79a0af8f.4ef61",
                "7e842000.99ad5"
            ]
        ]
    },
    {
        "id": "ddbec5c8.9e7b8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5639.5001220703125,
        "y": 1490,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "dd9e895a.d361b8"
            ]
        ]
    },
    {
        "id": "79a0af8f.4ef61",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5631.5001220703125,
        "y": 1545,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "bac9dfa5.acb0b8"
            ]
        ]
    },
    {
        "id": "7e842000.99ad5",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5636.5001220703125,
        "y": 1602,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "39141e3c.f5c4ba"
            ]
        ]
    },
    {
        "id": "39141e3c.f5c4ba",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5788.5001220703125,
        "y": 1603,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "bac9dfa5.acb0b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5799.5001220703125,
        "y": 1548,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "dd9e895a.d361b8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5783.8824462890625,
        "y": 1487.6556701660156,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "73633cf3.366dcc"
            ]
        ]
    },
    {
        "id": "f9e8a04.0c1b9e",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6366,
        "y": 1506,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "858146ac.41a8b8"
            ]
        ]
    },
    {
        "id": "858146ac.41a8b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6543,
        "y": 1498,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "b9f112f1.16fa48",
                "8777efed.45e25"
            ]
        ]
    },
    {
        "id": "73633cf3.366dcc",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5968,
        "y": 1502,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "84157579.d2bb08"
            ]
        ]
    },
    {
        "id": "84157579.d2bb08",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6163,
        "y": 1502,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "f9e8a04.0c1b9e",
                "bf377915.b45748"
            ]
        ]
    },
    {
        "id": "8777efed.45e25",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 6751,
        "y": 1505,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "2ab532d7.7f1fb6",
                "e8de40ac.67f83",
                "24548740.4d9e68"
            ]
        ]
    },
    {
        "id": "b9f112f1.16fa48",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainB id",
        "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6781,
        "y": 1453,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "2ab532d7.7f1fb6",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6961,
        "y": 1496,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "feff3b5.5e8b948"
            ]
        ]
    },
    {
        "id": "e8de40ac.67f83",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6953,
        "y": 1551,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "8e635e5c.8adab"
            ]
        ]
    },
    {
        "id": "24548740.4d9e68",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6958,
        "y": 1608,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "13ac8b5c.0cfaed"
            ]
        ]
    },
    {
        "id": "13ac8b5c.0cfaed",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7110,
        "y": 1609,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "8e635e5c.8adab",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7121,
        "y": 1554,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "feff3b5.5e8b948",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 7105.38232421875,
        "y": 1493.6556701660156,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "953167d4.139688"
            ]
        ]
    },
    {
        "id": "953167d4.139688",
        "type": "set",
        "name": "set controller domainB data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 7320,
        "y": 1490,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "bcacdfd4.14c6d",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 317,
        "y": 619,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "403b2da3.dcfec4",
                "1a6f80e4.595e77"
            ]
        ]
    },
    {
        "id": "403b2da3.dcfec4",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 763,
        "y": 478,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "9653f59e.977668"
            ]
        ]
    },
    {
        "id": "9653f59e.977668",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3128,
        "y": 460,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "77ab35ed.5d2284"
            ]
        ]
    },
    {
        "id": "82783d37.d452a8",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 6328,
        "y": 739,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "3ce4b168.0164de"
            ]
        ]
    },
    {
        "id": "3ce4b168.0164de",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6505,
        "y": 731,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "963d2fd4.6da64"
            ]
        ]
    },
    {
        "id": "963d2fd4.6da64",
        "type": "set",
        "name": "set domainA ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6740,
        "y": 855,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "8e0afe4a.b34a6",
        "type": "set",
        "name": "set domainB ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6780,
        "y": 1695,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "249ec401.31a03c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6545,
        "y": 1571,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "8e0afe4a.b34a6"
            ]
        ]
    },
    {
        "id": "bf377915.b45748",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 6368,
        "y": 1579,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "249ec401.31a03c"
            ]
        ]
    },
    {
        "id": "9b904bff.ec9058",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 4320,
        "y": 515,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "64d793c7.441b84",
        "type": "execute",
        "name": "execute UUID generator for ethernet-service-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4342,
        "y": 650,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "c6ccb3e9.91ea18",
        "type": "execute",
        "name": "execute UUID generator for otn-tunnel-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4323,
        "y": 700,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "8f80cd4e.6bb588",
        "type": "for",
        "name": "for each allotted-resource",
        "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1914,
        "y": 201,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "f465bd8c.ba2628",
                "8f1217ff.70176"
            ]
        ]
    },
    {
        "id": "f465bd8c.ba2628",
        "type": "set",
        "name": "set the current allotted-resource-id",
        "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
        "comments": "",
        "x": 2198,
        "y": 171,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "f986e215.6b3c08",
        "type": "set",
        "name": "set query_param",
        "xml": "<set>\n<parameter name='prop.ethsrvType' value='`$network-route-A`' />\n\n",
        "comments": "",
        "x": 4239,
        "y": 2209,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "4e189d8f.8297c4",
        "type": "set",
        "name": "unset parameters",
        "xml": "<set>\n<parameter name='domain-A.tunnel-tp-id' value='' />\n<parameter name='domain-A.node-id' value='' />\n<parameter name='domain-A.network-id' value=\"\" />\n<parameter name='domain-A.provider-id' value=\"\" />\n<parameter name='domain-A.client-id' value=\"\" />\n<parameter name='domain-A.te-topo-id' value=\"\" />\n<parameter name='domain-A.network-type' value=\"\" />\n<parameter name='domain-A.ltpId' value=\"\" />\n<parameter name='tmp.domain-A.network-id' value=\"\" />\n<parameter name='tmp.domain-A.ttp-id' value=\"\" />\n<parameter name='network-route-A' value=\"\" />\n<!--<parameter name='domain-A.' value=\"\" />-->\n\n<parameter name='request-id' value='' />\n<parameter name='otn-source-node' value='' />\n<parameter name='otn-dest-node' value='' />\n<parameter name='bw-odu' value=\"\" />\n<parameter name='src-ttp-id' value='' />\n<parameter name='dst-ttp-id' value='' />\n\n<parameter name='domain-B.tunnel-tp-id' value='' />\n<parameter name='domain-B.node-id' value='' />\n<parameter name='domain-B.network-id' value=\"\" />\n<parameter name='domain-B.provider-id' value=\"\" />\n<parameter name='domain-B.client-id' value=\"\" />\n<parameter name='domain-B.te-topo-id' value=\"\" />\n<parameter name='domain-B.network-type' value=\"\" />\n<parameter name='domain-B.ltpId' value=\"\" />\n<parameter name='tmp.domain-B.network-id' value=\"\" />\n<parameter name='tmp.domain-B.ttp-id' value=\"\" />\n<parameter name='network-route-B' value=\"\" />\n<!--<parameter name='domain-B.' value=\"\" />-->\n\n\n\n\n\n",
        "comments": "",
        "x": 4223,
        "y": 3908,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "6963f6fb.4a135",
        "type": "set",
        "name": "set new ethernet-service-name",
        "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
        "comments": "",
        "x": 4280,
        "y": 745,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "40ae5836.eda238",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='otnidx' start='0' end='`$tmp.otninfo_length`' >",
        "comments": "",
        "outputs": 1,
        "x": 4274,
        "y": 2329,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "2e490e87.e61d42"
            ]
        ]
    },
    {
        "id": "5b2c57a6.c56358",
        "type": "save",
        "name": "save vpn-binding otnIdx resource (aka. OTN) in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' >\n<parameter name='vpn-id' value='`$prop.vpn-binding-otnidx-uuid`' />\n<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />\n<parameter name='customer-vpn-id' value='`($idx + 1) * 10`' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<parameter name='access-provider-id' value='`$tmp.access-provider-id`' />\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<parameter name='access-client-id' value='`$tmp.access-client-id`' />\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<parameter name='access-topology-id' value='`$tmp.access-topology-id`' />\n<!--<parameter name='src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<parameter name='src-access-node-id' value='`$tmp.domainG-src-access-node-id`' />\n<parameter name='src-access-ltp-id' value='`$tmp.otninfo[$otnidx].srcPort.src-tunnel-tp-id`' />\n<!--<parameter name='dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />-->\n<parameter name='dst-access-node-id' value='`$tmp.domainG-dst-access-node-id`' />\n<parameter name='dst-access-ltp-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-tunnel-tp-id`' />\n<parameter name='route-distinguisher' value='`$gfp`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n\n\n<parameter name='vpn-region' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.url`' />\n<parameter name='vpn-description' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.user`' />\n<parameter name='vpn-platform' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.password`' />\n\n<!-- The following line is in lieu of vpn-binding.slice-id (new attribute in latest AAI) -->\n<parameter name='ops-note' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5397,
        "y": 2897,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "9802e598.7a08e"
            ]
        ]
    },
    {
        "id": "457942f4.bfb36c",
        "type": "save",
        "name": "save connectivity-A relationship to vpn-binding-A, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 5969.5,
        "y": 3001,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "9802e598.7a08e",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5703,
        "y": 2896,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "c8f4f504.510ca8"
            ]
        ]
    },
    {
        "id": "c8f4f504.510ca8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5912.5,
        "y": 2896.25390625,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "20917868.85ed"
            ]
        ]
    },
    {
        "id": "dc51f3dc.862168",
        "type": "execute",
        "name": "execute UUID generator for vpn-binding $otnidx",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.vpn-binding-otnidx-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 5433,
        "y": 2361,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "8f203418.5717c8",
        "type": "switchNode",
        "name": "switch otnidx == 0",
        "xml": "<switch test='`$otnidx == 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5306,
        "y": 3014,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "22c6b3cb.e79214",
                "862cb9a5.5437d"
            ]
        ]
    },
    {
        "id": "22c6b3cb.e79214",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5489,
        "y": 3014,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "2ad37e70.de6eda"
            ]
        ]
    },
    {
        "id": "862cb9a5.5437d",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5314,
        "y": 3161,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "6c8b8ef6.d3a3"
            ]
        ]
    },
    {
        "id": "886d3de7.c041d",
        "type": "switchNode",
        "name": "switch otnidx == last",
        "xml": "<switch test='`$otnidx == $tmp.otninfo_length - 1`'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5655,
        "y": 3242,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "521941d1.ae6f7",
                "6f826e7d.af0fc8"
            ]
        ]
    },
    {
        "id": "521941d1.ae6f7",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5840,
        "y": 3243,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "7726ccce.f0f08c"
            ]
        ]
    },
    {
        "id": "6f826e7d.af0fc8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5859,
        "y": 3509,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "49c1c5c0.4e8b8c"
            ]
        ]
    },
    {
        "id": "905b732c.f0ad98",
        "type": "save",
        "name": "save connectivity-B relationship to vpn-binding-B, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 6270,
        "y": 3244,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "dd09a90e.7899b",
        "type": "execute",
        "name": "execute UUID generator for connectivity domain otnidx",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-otnidx-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 6344,
        "y": 3542,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "fc11577c.3662e8",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-otnidx-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-otnidx-uuid`' />\n<!--<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />-->\n<parameter name='operational-status' value='Created' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<!--<parameter name='access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<!--<parameter name='access-ltp-id' value='``' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='dummy' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<!--<parameter name='CBS' value='`$prop.sotn.cbs`' />-->\n<!--<parameter name='EBS' value='`$prop.sotn.ebs`' />-->\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 6280,
        "y": 3593,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "a3be8dfb.ebcf2",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-otnidx-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-otnidx-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 6409,
        "y": 3643,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "28e97ea9.3189d2",
        "type": "comment",
        "name": "connectivity has not been created for middle domains, so we have to create one",
        "info": "",
        "comments": "",
        "x": 6419,
        "y": 3486,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "3c225fc2.333288",
        "type": "save",
        "name": "save connectivity-otnidx relationship to vpn-binding-otnidx, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-otnidx-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-otnidx-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 6377,
        "y": 3702,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "49c1c5c0.4e8b8c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 6016,
        "y": 3510,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "dd09a90e.7899b",
                "fc11577c.3662e8",
                "a3be8dfb.ebcf2",
                "3c225fc2.333288",
                "6f9b661d.d75948"
            ]
        ]
    },
    {
        "id": "2e490e87.e61d42",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4526,
        "y": 2390,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "dc51f3dc.862168",
                "5b2c57a6.c56358",
                "8f203418.5717c8",
                "c3673769.ff0828",
                "3b94d9a7.b824be",
                "e2ccb618.b8a8d",
                "77665e36.902488"
            ]
        ]
    },
    {
        "id": "c5c2060f.16d9c8",
        "type": "set",
        "name": "set attachment_param domain A",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n\n\n",
        "comments": "",
        "x": 5894,
        "y": 3058,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "db559808.bd4158",
        "type": "execute",
        "name": "execute RestApiCallNode domainA UNI Coloring",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-coloring-uni-port.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-network:networks/network=' + $tmp.domainA.eth-network-id + '/node=' + $tmp.src.pnf-name + '/ietf-network-topology:termination-point=' + $tmp.src.ltpId + '/ietf-te-topology:te' `\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 5947,
        "y": 3102,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "3a25adfa.fa5c4a",
                "1deeb503.94e2fb"
            ]
        ]
    },
    {
        "id": "1deeb503.94e2fb",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6218,
        "y": 3087,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "9df348c2.491e88"
            ]
        ]
    },
    {
        "id": "3a25adfa.fa5c4a",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6216.000213623047,
        "y": 3144.99990940094,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "6842e2ab.cc6dcc"
            ]
        ]
    },
    {
        "id": "9df348c2.491e88",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing UNI Coloring for domain A\" />\n",
        "comments": "",
        "x": 6358.000247955322,
        "y": 3087.0000009536743,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "6842e2ab.cc6dcc",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6364.02725982666,
        "y": 3135.745394706726,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "2ad37e70.de6eda",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5630,
        "y": 3004,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "457942f4.bfb36c",
                "db559808.bd4158",
                "c5c2060f.16d9c8"
            ]
        ]
    },
    {
        "id": "7726ccce.f0f08c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5974,
        "y": 3244,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "905b732c.f0ad98",
                "7d99b03d.258298",
                "45df9551.f0104c"
            ]
        ]
    },
    {
        "id": "45df9551.f0104c",
        "type": "set",
        "name": "set attachment_param domain B",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n\n",
        "comments": "",
        "x": 6194,
        "y": 3288,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "7d99b03d.258298",
        "type": "execute",
        "name": "execute RestApiCallNode domainB UNI Coloring",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-coloring-uni-port.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-network:networks/network=' + $tmp.domainB.eth-network-id + '/node=' + $tmp.dst.pnf-name + '/ietf-network-topology:termination-point=' + $tmp.dst.ltpId + '/ietf-te-topology:te' `\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 6245,
        "y": 3332,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "bd0a7a36.9d20c8",
                "dca7fdc6.a617b"
            ]
        ]
    },
    {
        "id": "dca7fdc6.a617b",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6508,
        "y": 3312,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "fccd3cd5.48582"
            ]
        ]
    },
    {
        "id": "bd0a7a36.9d20c8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6509.000213623047,
        "y": 3362.99990940094,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "21901264.638a9e"
            ]
        ]
    },
    {
        "id": "fccd3cd5.48582",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing UNI coloring for domain B\" />\n",
        "comments": "",
        "x": 6648.000247955322,
        "y": 3312.0000009536743,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "21901264.638a9e",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6654.02725982666,
        "y": 3360.745394706726,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "6f9b661d.d75948",
        "type": "set",
        "name": "set attachment_param domain otnidx",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n",
        "comments": "",
        "x": 6291,
        "y": 3762,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "19fc5975.9c891f",
        "type": "save",
        "name": "get all-vpn-bindings from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v21/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 3610,
        "y": 4109,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "3b17ad03.4221a2",
                "d69cd907.6aa748",
                "2274d619.b436c2"
            ]
        ]
    },
    {
        "id": "3b17ad03.4221a2",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3798,
        "y": 4122,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "c84d9923.4faed"
            ]
        ]
    },
    {
        "id": "d69cd907.6aa748",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3798.490966796875,
        "y": 4167.574035644531,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "ab55f6d5.77c7d"
            ]
        ]
    },
    {
        "id": "2274d619.b436c2",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3796,
        "y": 4211,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "7380e8da.afb22"
            ]
        ]
    },
    {
        "id": "c84d9923.4faed",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3971,
        "y": 4120,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "4f7659f.9cf48a8"
            ]
        ]
    },
    {
        "id": "ab55f6d5.77c7d",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3961.0623779296875,
        "y": 4167.859771728516,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "7380e8da.afb22",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3963,
        "y": 4210,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "2ea54daa.f8c89a",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='dmnsidx' start='0' end='`$otn-tunnel-slice_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3599,
        "y": 4300,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "1b14a9d6.5d5776"
            ]
        ]
    },
    {
        "id": "ae6235d1.274b2",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4409,
        "y": 4300,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "b2a4c6eb.8f6fb8"
            ]
        ]
    },
    {
        "id": "c8a00103.c44878",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='stunidx' start='0' end='`$otn-tunnel-slice[$dmnsidx].list_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4181,
        "y": 4300,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "ae6235d1.274b2"
            ]
        ]
    },
    {
        "id": "315b6688.54502a",
        "type": "set",
        "name": "set providerValue",
        "xml": "<set>\n<parameter name='providerValue' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].access-provider-id`' />\n<parameter name='found' value='false' />\n\n\n",
        "comments": "",
        "x": 5301,
        "y": 4067,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "ea932ad5.e0e7e8",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='testingvalue' value='$tmp.otninfo_length -1' />\n",
        "comments": "",
        "x": 5603,
        "y": 3193,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "6c8b8ef6.d3a3",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5438,
        "y": 3168,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "ea932ad5.e0e7e8",
                "886d3de7.c041d"
            ]
        ]
    },
    {
        "id": "1ad0a363.7d61cd",
        "type": "set",
        "name": "set tmp.arr",
        "xml": "<set>\n<parameter name='tmp.arr' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='tmp.arr_length' value='0' />\n\n<parameter name='otn-tunnel-slice' value='' />\n<parameter name='otn-tunnel-slice_length' value='0' />\n\n<parameter name='tmp.slicevpns' value='' />\n<parameter name='tmp.slicevpns_length' value='0' />\n\n<parameter name='tmp.slicevpnuuids' value='' />\n<parameter name='tmp.slicevpnuuids.' value='' />\n\n<parameter name='bwModified' value='false' />\n\n\n",
        "comments": "",
        "x": 1896,
        "y": 147,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "4f7659f.9cf48a8",
        "type": "for",
        "name": "for vpnidx in all-vpn-bindings",
        "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4200,
        "y": 4121,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "39723735.013e2"
            ]
        ]
    },
    {
        "id": "39723735.013e2",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4415,
        "y": 4122,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "a85f98e7.7e0e3"
            ]
        ]
    },
    {
        "id": "45b1bc5.a80fac4",
        "type": "for",
        "name": "for arridx in tmp.arr",
        "xml": "<for index='arridx' start='0' end='`$tmp.arr_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5868,
        "y": 4042,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "6b77cda7.20313c"
            ]
        ]
    },
    {
        "id": "2e1bb3dd.371e44",
        "type": "switchNode",
        "name": "switch $tmp.arr_length != 0",
        "xml": "<switch test='`$tmp.arr_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5334,
        "y": 4122,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "24502626.aaa1ba",
                "5f3af9a.344a808"
            ]
        ]
    },
    {
        "id": "24502626.aaa1ba",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5530,
        "y": 4092,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "d529614e.bbdc5"
            ]
        ]
    },
    {
        "id": "5f3af9a.344a808",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5531,
        "y": 4163,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "ec475a9a.8eb8b8"
            ]
        ]
    },
    {
        "id": "d529614e.bbdc5",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5681,
        "y": 4090,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "45b1bc5.a80fac4",
                "c40fb6f1.31454"
            ]
        ]
    },
    {
        "id": "6b77cda7.20313c",
        "type": "switchNode",
        "name": "switch tmp.arr[$arridx] == $providerValue",
        "xml": "<switch test='`$tmp.arr[$arridx] == $providerValue`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6159,
        "y": 4042,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "de5fc252.aa8c8",
                "5ea06666.14b488"
            ]
        ]
    },
    {
        "id": "de5fc252.aa8c8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6434,
        "y": 4011,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "171b52be.079295"
            ]
        ]
    },
    {
        "id": "5ea06666.14b488",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6435,
        "y": 4082,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "9281ca71.e773a"
            ]
        ]
    },
    {
        "id": "171b52be.079295",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 6585,
        "y": 4009,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "e713eb27.04e0e8",
                "321eb6fe.b414b2",
                "2f73393e.94f68e",
                "3f07f766.243a2",
                "ef925dc2.f8f9f"
            ]
        ]
    },
    {
        "id": "e713eb27.04e0e8",
        "type": "set",
        "name": "set found to true",
        "xml": "<set>\n<parameter name='found' value='true' />\n\n\n",
        "comments": "",
        "x": 6773,
        "y": 3969,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "321eb6fe.b414b2",
        "type": "save",
        "name": "store $arridx somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='`$arridx`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 6845,
        "y": 4014,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "ef925dc2.f8f9f",
        "type": "set",
        "name": "set twoD arr",
        "xml": "<set>\n\n<!--<parameter name='`tmp.arr[$arridx + 1]`' value='`$providerValue`' />-->\n<!--<parameter name='tmp.arr_length' value='`$tmp.arr_length + 1`' />-->\n\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<!--<parameter name='otn-tunnel-slice_length' value='`$arridx + 2`' />-->\n<parameter name='`otn-tunnel-slice[$arridx].list_length`' value='`$sizeOfSliceList + 1`' />\n\n",
        "comments": "",
        "x": 6760,
        "y": 4141,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "3f07f766.243a2",
        "type": "set",
        "name": "set sizeOfSliceList",
        "xml": "<set>\n<parameter name='sizeOfSliceList' value='`$otn-tunnel-slice[$arridx].list_length`' />\n\n\n",
        "comments": "",
        "x": 6781,
        "y": 4077,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "ec475a9a.8eb8b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5683,
        "y": 4163,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "1e5d0b07.cb12bd",
                "6806bbfa.adddec"
            ]
        ]
    },
    {
        "id": "1e5d0b07.cb12bd",
        "type": "save",
        "name": "store $arridx somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='0' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5938,
        "y": 4156,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "6806bbfa.adddec",
        "type": "set",
        "name": "set twoD array",
        "xml": "<set>\n<parameter name='tmp.arr[0]' value='`$providerValue`' />\n<parameter name='tmp.arr_length' value='1' />\n\n<parameter name='`otn-tunnel-slice[0].list[0].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[0].list[0].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[0].list[0].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[0].list[0].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[0].list[0].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<parameter name='otn-tunnel-slice_length' value='1' />\n<parameter name='otn-tunnel-slice[0].list_length' value='1' />\n\n",
        "comments": "",
        "x": 5866,
        "y": 4203,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "c40fb6f1.31454",
        "type": "switchNode",
        "name": "switch found?",
        "xml": "<switch test='`$found`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5859,
        "y": 4087,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "58a78c2e.66d86c",
                "d7b2b4c.94059c8"
            ]
        ]
    },
    {
        "id": "58a78c2e.66d86c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6019,
        "y": 4079,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "cde5de2c.7d36b8"
            ]
        ]
    },
    {
        "id": "d7b2b4c.94059c8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6017,
        "y": 4116,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "74309960.8d777"
            ]
        ]
    },
    {
        "id": "cde5de2c.7d36b8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6144,
        "y": 4079,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "6b083096.f77d9",
        "type": "save",
        "name": "store $arridx+1 somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='`$arridx + 1`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 6451,
        "y": 4137,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "74309960.8d777",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 6177,
        "y": 4124,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "6b083096.f77d9",
                "b4ddb8c9.5ca64"
            ]
        ]
    },
    {
        "id": "b4ddb8c9.5ca64",
        "type": "set",
        "name": "set twoD array",
        "xml": "<set>\n<parameter name='`tmp.arr[$arridx + 1]`' value='`$providerValue`' />\n<parameter name='tmp.arr_length' value='`$tmp.arr_length + 1`' />\n\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<parameter name='otn-tunnel-slice_length' value='`$arridx + 2`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list_length`' value='1' />\n\n",
        "comments": "",
        "x": 6368,
        "y": 4183,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "9281ca71.e773a",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6568,
        "y": 4081,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "2f73393e.94f68e",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 6739,
        "y": 4208,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "c3673769.ff0828",
        "type": "switchNode",
        "name": "switch dstPort == NULL",
        "xml": "<switch test=\"`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id == ''`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5136,
        "y": 2420,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "354051ca.f807c6",
                "2ad9a102.280abe"
            ]
        ]
    },
    {
        "id": "354051ca.f807c6",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5525,
        "y": 2398,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "dcf8c46b.cd2d9"
            ]
        ]
    },
    {
        "id": "2ad9a102.280abe",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5526,
        "y": 2444,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "d548eb8f.ae0418"
            ]
        ]
    },
    {
        "id": "dcf8c46b.cd2d9",
        "type": "set",
        "name": "set access-provider-id and client-id",
        "xml": "<set>\n<parameter name='tmp.access-provider-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-provider-id`' />\n<parameter name='tmp.access-client-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-client-id`' />\n<parameter name='tmp.access-topology-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-topology-id`' />\n<parameter name='tmp.srcdstpnf-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n",
        "comments": "",
        "x": 5739,
        "y": 2397,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "d548eb8f.ae0418",
        "type": "set",
        "name": "set access-provider-id and client-id",
        "xml": "<set>\n<parameter name='tmp.access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />\n<parameter name='tmp.access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />\n<parameter name='tmp.access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />\n<parameter name='tmp.srcdstpnf-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />\n",
        "comments": "",
        "x": 5737,
        "y": 2442,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "b2a4c6eb.8f6fb8",
        "type": "set",
        "name": "set attachment_param sliceG",
        "xml": "<set>\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].request-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].request-id`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].otn-source-node`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].otn-source-node`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].otn-dest-node`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].otn-dest-node`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].bw-odu`' value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].bw-odu`\" />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].src-ttp-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].src-ttp-id`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].dst-ttp-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].dst-ttp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='otn-tunnel-sliceG-list_length' value='`$stunidx + 1`' />\n\n\n<parameter name=\"tmp.domainG.restapiUrl\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainurl`\" />\n<parameter name=\"tmp.domainG.restapiUser\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainuser`\" />\n<parameter name=\"tmp.domainG.restapiPassword\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainpassword`\" />",
        "comments": "",
        "x": 4662,
        "y": 4298,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "83baeacb.444588",
        "type": "execute",
        "name": "execute RestApiCallNode sliceG creation domainG",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.transport-sliceG-list-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$tmp.domainG.restapiUrl + '/restconf/operations/ietf-optical-slice:create-optical-slice'`\" />\n<parameter name=\"restapiUser\" value=\"`$tmp.domainG.restapiUser`\" />\n<parameter name=\"restapiPassword\" value=\"`tmp.domainG.restapiPassword`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 4247,
        "y": 4406,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "27e27e6a.f2ce82",
                "450c3617.7079e"
            ]
        ]
    },
    {
        "id": "450c3617.7079e",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4530,
        "y": 4386,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "2c8d1c7a.f387cc"
            ]
        ]
    },
    {
        "id": "27e27e6a.f2ce82",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4531.000213623047,
        "y": 4436.99990940094,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "2b775544.0b0442"
            ]
        ]
    },
    {
        "id": "2c8d1c7a.f387cc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing slice creation api for domain A\" />\n",
        "comments": "",
        "x": 4670.000247955322,
        "y": 4386.000000953674,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "2b775544.0b0442",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4676.02725982666,
        "y": 4434.745394706726,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "3b94d9a7.b824be",
        "type": "set",
        "name": "set srcdstpnf-name",
        "xml": "<set>\n<parameter name='tmp.srcdstpnf-name' value=\"`'networkId-providerId-' + \n                                             $tmp.access-provider-id + '-clientId-' +\n                                             $tmp.access-client-id + '-topologyId-' + \n                                             $tmp.access-topology-id + '-nodeId-' + \n                                             $tmp.srcdstpnf-id`\" />\n\n",
        "comments": "",
        "x": 5320,
        "y": 2540,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "e2ccb618.b8a8d",
        "type": "get-resource",
        "name": "get-resource tmp.srcdstpnf-name",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.srcdstpnf-name\"\n        pfx='tmp.aai.srcdst-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 5364,
        "y": 2588,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "7cc0ff8d.947d5",
                "847ae6cc.cd8548",
                "514e2f17.0688a8"
            ]
        ]
    },
    {
        "id": "7cc0ff8d.947d5",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5576.5,
        "y": 2535,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "3cc1d272.0b4856"
            ]
        ]
    },
    {
        "id": "847ae6cc.cd8548",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5588.5,
        "y": 2585,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "3fb63137.b62f46"
            ]
        ]
    },
    {
        "id": "514e2f17.0688a8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5579.5,
        "y": 2640,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "e6964c37.0e1d08"
            ]
        ]
    },
    {
        "id": "e6964c37.0e1d08",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5724.5,
        "y": 2639,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "3fb63137.b62f46",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5735.5,
        "y": 2582,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "3cc1d272.0b4856",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5701.8824462890625,
        "y": 2528.6556701660156,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "597135e9.9cf8dc"
            ]
        ]
    },
    {
        "id": "641197e8.a0857",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6261,
        "y": 2547,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "ec2f2380.dc3938"
            ]
        ]
    },
    {
        "id": "ec2f2380.dc3938",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6438,
        "y": 2539,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "f9283f20.fcecb",
                "5f7551a8.c48a"
            ]
        ]
    },
    {
        "id": "597135e9.9cf8dc",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.srcdst-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5863,
        "y": 2543,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "af459c6d.98172"
            ]
        ]
    },
    {
        "id": "af459c6d.98172",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.srcdst-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6058,
        "y": 2543,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "641197e8.a0857"
            ]
        ]
    },
    {
        "id": "5f7551a8.c48a",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainG.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainG.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 6646,
        "y": 2546,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "64071614.e531b8",
                "1c3ac340.54b235",
                "e738e604.11d738"
            ]
        ]
    },
    {
        "id": "f9283f20.fcecb",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainG id",
        "xml": "<set>\n<parameter name='tmp.domainG.esr-thirdparty-id' value=\"`$tmp.aai.srcdst-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6676,
        "y": 2494,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "64071614.e531b8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6856,
        "y": 2537,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "68b02952.bfbd08"
            ]
        ]
    },
    {
        "id": "1c3ac340.54b235",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6848,
        "y": 2592,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "84e50897.107018"
            ]
        ]
    },
    {
        "id": "e738e604.11d738",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6853,
        "y": 2649,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "69a8c55f.4a217c"
            ]
        ]
    },
    {
        "id": "69a8c55f.4a217c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7005,
        "y": 2650,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "84e50897.107018",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7016,
        "y": 2595,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "68b02952.bfbd08",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 7000.38232421875,
        "y": 2534.6556701660156,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "ca909332.9badd"
            ]
        ]
    },
    {
        "id": "ca909332.9badd",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.url' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.user' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.password' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 7215,
        "y": 2531,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "1b14a9d6.5d5776",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3831,
        "y": 4298,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "c8a00103.c44878",
                "83baeacb.444588"
            ]
        ]
    },
    {
        "id": "77665e36.902488",
        "type": "switchNode",
        "name": "switch dmnsidx == 0 (domainA)",
        "xml": "<switch test='`$otnidx == 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5334,
        "y": 2757,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "84137cfa.8c833",
                "67fc26bd.7160b"
            ]
        ]
    },
    {
        "id": "84137cfa.8c833",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5535,
        "y": 2755,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "f473c0e8.32ced8"
            ]
        ]
    },
    {
        "id": "f473c0e8.32ced8",
        "type": "set",
        "name": "set attachment_param domain A",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />",
        "comments": "",
        "x": 5749,
        "y": 2757,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "fc82d42d.acc69",
        "type": "switchNode",
        "name": "switch dmnsidx == last (domainB)",
        "xml": "<switch test='`$otnidx == $tmp.otninfo_length - 1`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5752,
        "y": 2806,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "7c791386.dabd3c",
                "9bcb702f.f45c28"
            ]
        ]
    },
    {
        "id": "7c791386.dabd3c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5982,
        "y": 2802,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "982b0489.27b268"
            ]
        ]
    },
    {
        "id": "982b0489.27b268",
        "type": "set",
        "name": "set attachment_param domain B",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />",
        "comments": "",
        "x": 6196,
        "y": 2805,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "67fc26bd.7160b",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5535,
        "y": 2804,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "fc82d42d.acc69"
            ]
        ]
    },
    {
        "id": "9bcb702f.f45c28",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5983,
        "y": 2848,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "95308046.cfa4"
            ]
        ]
    },
    {
        "id": "95308046.cfa4",
        "type": "set",
        "name": "set attachment_param domain G",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />",
        "comments": "",
        "x": 6197,
        "y": 2848,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "20917868.85ed",
        "type": "set",
        "name": "set tmp.slicevpns",
        "xml": "<set>\n<parameter name='`tmp.slicevpns[$tmp.slicevpns_length]`' value=\"`$prop.vpn-binding-otnidx-uuid`\" />\n<parameter name='tmp.slicevpns_length' value=\"`$tmp.slicevpns_length + 1`\" />\n\n<parameter name='`tmp.slicevpnuuids[$prop.vpn-binding-otnidx-uuid]`' value=\"`$prop.vpn-binding-otnidx-uuid`\" />\n\n",
        "comments": "",
        "x": 6095,
        "y": 2897,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "a85f98e7.7e0e3",
        "type": "switchNode",
        "name": "switch vpnuuid is for this slice",
        "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n    \n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.aai.service-instance.service-instance-id `\">\n",
        "comments": "",
        "outputs": 1,
        "x": 4659,
        "y": 4121,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "c594891a.4ece58",
                "9fcde7ff.ff63c8"
            ]
        ]
    },
    {
        "id": "c594891a.4ece58",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4876,
        "y": 4100,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "4b2347b3.08fa3"
            ]
        ]
    },
    {
        "id": "9fcde7ff.ff63c8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4876,
        "y": 4149,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "4b2347b3.08fa3",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5044,
        "y": 4100,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "315b6688.54502a",
                "2e1bb3dd.371e44"
            ]
        ]
    },
    {
        "id": "adcb7aad.70c0d",
        "type": "save",
        "name": "get logical-link from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
        "comments": "",
        "outputs": 1,
        "x": 1384,
        "y": 731,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "89022850.9f967",
                "75f048cb.75fe2",
                "d7d4823f.55128"
            ]
        ]
    },
    {
        "id": "89022850.9f967",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1596.490966796875,
        "y": 697.573974609375,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "278a0fef.2766a8"
            ]
        ]
    },
    {
        "id": "75f048cb.75fe2",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1585,
        "y": 742,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "93e6204d.139fe"
            ]
        ]
    },
    {
        "id": "278a0fef.2766a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1745.0625,
        "y": 697.8597412109375,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "93e6204d.139fe",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1744,
        "y": 742,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "d7d4823f.55128",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1590,
        "y": 785,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "6c086bfb.a0d044"
            ]
        ]
    },
    {
        "id": "6c086bfb.a0d044",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 736,
        "y": 1124,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "b122eb38.341668"
            ]
        ]
    },
    {
        "id": "b122eb38.341668",
        "type": "for",
        "name": "for each svc-instance relationship",
        "xml": "<for index='rel-index' start='0' end='`$tmp.aai.service-instance.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1010,
        "y": 1124,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "428eb2b6.4c43ec"
            ]
        ]
    },
    {
        "id": "428eb2b6.4c43ec",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.service-instance.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1245.33349609375,
        "y": 1125,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "6c08ceaa.3d7e3"
            ]
        ]
    },
    {
        "id": "6c08ceaa.3d7e3",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 529.000244140625,
        "y": 1278,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "42fb5b21.64c794"
            ]
        ]
    },
    {
        "id": "c24bb232.38015",
        "type": "save",
        "name": "get connectivity from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 918,
        "y": 1283,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "a881a6a4.94a7c8",
                "2e732415.a6ca64",
                "10e50fbd.fcc5a"
            ]
        ]
    },
    {
        "id": "a881a6a4.94a7c8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1114,
        "y": 1248,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "2f6cf4f3.693c54"
            ]
        ]
    },
    {
        "id": "2e732415.a6ca64",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1114.490966796875,
        "y": 1293.5740356445312,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "75b4d03c.1b0488"
            ]
        ]
    },
    {
        "id": "10e50fbd.fcc5a",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1079,
        "y": 1339,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "83cefb63.3d3958"
            ]
        ]
    },
    {
        "id": "75b4d03c.1b0488",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1274.0625,
        "y": 1290.8597412109375,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "83cefb63.3d3958",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1232,
        "y": 1341,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "f0221f2b.2ca488",
        "type": "switchNode",
        "name": "switch loglink-id exists in conn",
        "xml": "<switch test='`$tmp.aai.logical-link.link-id == $tmp.aai.connectivity.etht-svc-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1507,
        "y": 1231,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "1f27bf84.77001",
                "e05aac94.264e2"
            ]
        ]
    },
    {
        "id": "1f27bf84.77001",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1718,
        "y": 1196,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "5241d9c1.c5a"
            ]
        ]
    },
    {
        "id": "e05aac94.264e2",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1715,
        "y": 1257,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "7d1ab491.7a47ec",
        "type": "set",
        "name": "set currLinkIsFound",
        "xml": "<set>\n<parameter name='currLinkIsFound' value=\"true\" />\n\n\n",
        "comments": "",
        "x": 2056,
        "y": 1169,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "5241d9c1.c5a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1870,
        "y": 1197,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "7d1ab491.7a47ec"
            ]
        ]
    },
    {
        "id": "ac3d3bcb.07c358",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2023,
        "y": 1225,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "3aa19f56.483778",
        "type": "comment",
        "name": "currLinkIsFound. Go to the next logical-link",
        "info": "",
        "comments": "",
        "x": 2028,
        "y": 1119,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "7947ec90.0b2fbc",
        "type": "switchNode",
        "name": "switch currLinkIsFound",
        "xml": "<switch test='`$currLinkIsFound`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1310,
        "y": 849,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "69298f6c.9e2dd",
                "bb557fd5.52031"
            ]
        ]
    },
    {
        "id": "69298f6c.9e2dd",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1496,
        "y": 828,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "cab96485.7156b"
            ]
        ]
    },
    {
        "id": "bb557fd5.52031",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1493,
        "y": 964,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "b394b52b.88d4f8"
            ]
        ]
    },
    {
        "id": "cab96485.7156b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1738,
        "y": 823,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "b4a6c43d.bfc078",
        "type": "comment",
        "name": "A new logical-link has been found: modify process should be triggered",
        "info": "",
        "comments": "",
        "x": 1684,
        "y": 927,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "2f6cf4f3.693c54",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1278,
        "y": 1232,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "f0221f2b.2ca488",
                "9c07de97.8ce1e8"
            ]
        ]
    },
    {
        "id": "9c07de97.8ce1e8",
        "type": "switchNode",
        "name": "switch connectivityBW == gfp",
        "xml": "<switch test='`$tmp.aai.connectivity.bandwidth-profile-name == $gfp`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1508,
        "y": 1322,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "e92f497c.306ff",
                "202f30a4.8a9778"
            ]
        ]
    },
    {
        "id": "e92f497c.306ff",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1713,
        "y": 1318,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "202f30a4.8a9778",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1715,
        "y": 1368,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "aabbec3c.d5f948"
            ]
        ]
    },
    {
        "id": "79a3430c.be3b14",
        "type": "set",
        "name": "set bwModified",
        "xml": "<set>\n<parameter name='bwModified' value=\"true\" />\n\n\n",
        "comments": "",
        "x": 2064,
        "y": 1346,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "aabbec3c.d5f948",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1869,
        "y": 1367,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "79a3430c.be3b14",
                "b3b4a039.5c091"
            ]
        ]
    },
    {
        "id": "b3b4a039.5c091",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 889,
        "y": 1572,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "74886cc5.56820c"
            ]
        ]
    },
    {
        "id": "74886cc5.56820c",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1094,
        "y": 1572,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "ab7d3bd9.5a0118"
            ]
        ]
    },
    {
        "id": "ab7d3bd9.5a0118",
        "type": "outcome",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1260,
        "y": 1572,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "9ac61acb.25a0c8"
            ]
        ]
    },
    {
        "id": "9ac61acb.25a0c8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1423,
        "y": 1572,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "2370c115.ac8fd6",
                "1b61e8de.a73647"
            ]
        ]
    },
    {
        "id": "1b61e8de.a73647",
        "type": "set",
        "name": "unset tmp.aai.vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value='' />\n",
        "comments": "",
        "x": 1652,
        "y": 1512,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "2370c115.ac8fd6",
        "type": "save",
        "name": "get vpn-binding from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1161,
        "y": 1666,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "28298f17.ccf108",
                "b6883dde.6b7bf8",
                "744baf90.7b9cd8"
            ]
        ]
    },
    {
        "id": "98131352.4a889",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1545,
        "y": 1666,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "1b2b6a88.49f2b5",
                "43c66f34.653488"
            ]
        ]
    },
    {
        "id": "28298f17.ccf108",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1372,
        "y": 1668,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "98131352.4a889"
            ]
        ]
    },
    {
        "id": "b6883dde.6b7bf8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1372.490966796875,
        "y": 1713.5740356445312,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "15cd27be.d92658"
            ]
        ]
    },
    {
        "id": "744baf90.7b9cd8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1370,
        "y": 1757,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "d3584005.2bd19"
            ]
        ]
    },
    {
        "id": "d3584005.2bd19",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1537,
        "y": 1774,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "15cd27be.d92658",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1535.0623779296875,
        "y": 1713.8597717285156,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "42fb5b21.64c794",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 701,
        "y": 1278,
        "z": "a1c94a24.22ed9",
        "wires": [
            [
                "c24bb232.38015",
                "cd433210.9124b"
            ]
        ]
    },
    {
        "id": "cd433210.9124b",
        "type": "set",
        "name": "unset tmp.aai.connectivity",
        "xml": "<set>\n<parameter name='tmp.aai.connectivity.' value='' />\n",
        "comments": "",
        "x": 921,
        "y": 1226,
        "z": "a1c94a24.22ed9",
        "wires": []
    },
    {
        "id": "1b2b6a88.49f2b5",
        "type": "save",
        "name": "update vpn-binding A resource (aka. OTN domainA) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='route-distinguisher' value='`$gfp`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1895.5,
        "y": 1661,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    },
    {
        "id": "43c66f34.653488",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1822.5,
        "y": 1725,
        "z": "a1c94a24.22ed9",
        "wires": [
            []
        ]
    }
]