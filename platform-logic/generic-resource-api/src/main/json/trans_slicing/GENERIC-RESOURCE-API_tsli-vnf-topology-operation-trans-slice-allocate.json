[
    {
        "id": "df3491bc.625428",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 128,
        "y": 113,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "f93a4fe6.087538"
            ]
        ]
    },
    {
        "id": "f93a4fe6.087538",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 412.2856903076172,
        "y": 174.23810863494873,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "3a78d95d.5e3c5e"
            ]
        ]
    },
    {
        "id": "3a78d95d.5e3c5e",
        "type": "method",
        "name": "method tsli-vnf-topology-operation-trans-slice-allocate",
        "xml": "<method rpc='tsli-vnf-topology-operation-trans-slice-allocate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 418.42860412597656,
        "y": 259.0000305175781,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "35ecb5b7.3f1b02"
            ]
        ]
    },
    {
        "id": "35ecb5b7.3f1b02",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 788.238037109375,
        "y": 283.66668701171875,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "a99ea7b2.f5e618",
                "183025fe.418fa2",
                "d352d101.d008a8"
            ]
        ]
    },
    {
        "id": "a99ea7b2.f5e618",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1089.571533203125,
        "y": 554.5969848632812,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "183025fe.418fa2",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
        "comments": "",
        "outputs": 1,
        "x": 1111,
        "y": 257,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "47f816cc.c0286",
                "318d2442.efdd34",
                "4265fd48.9eb024"
            ]
        ]
    },
    {
        "id": "47f816cc.c0286",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1336,
        "y": 115,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "6fd78e9c.961b2"
            ]
        ]
    },
    {
        "id": "318d2442.efdd34",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1331.490966796875,
        "y": 184.57403564453125,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "aa8b68cf.4936c"
            ]
        ]
    },
    {
        "id": "4265fd48.9eb024",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1320,
        "y": 231,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "ea9381a6.8a9938"
            ]
        ]
    },
    {
        "id": "6fd78e9c.961b2",
        "type": "switchNode",
        "name": "switch allotted-resources_length != 0",
        "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1575,
        "y": 112,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "a9515923.c68db8",
                "3b6a0136.f8dee6"
            ]
        ]
    },
    {
        "id": "aa8b68cf.4936c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1485.0623779296875,
        "y": 187.85977172851562,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "ea9381a6.8a9938",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1489,
        "y": 232,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "a9515923.c68db8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1788,
        "y": 136,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "8d77a4c9.47348"
            ]
        ]
    },
    {
        "id": "3b6a0136.f8dee6",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1790,
        "y": 76,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "2b9472b2.e91dbe",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 1090,
        "y": 145,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "8d77a4c9.47348",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1773,
        "y": 224,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "2dfd81e1.a251ae",
                "d0adb7e4.435f98",
                "bf30e0be.23b998",
                "bc1d9c19.8a817"
            ]
        ]
    },
    {
        "id": "4b515bec.7b07fc",
        "type": "set",
        "name": "set network-route-A",
        "xml": "<set>\n<!--<parameter name='network-route-A' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='network-route-A' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
        "comments": "",
        "x": 2636,
        "y": 824,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "1fb3da4d.f9823e",
        "type": "set",
        "name": "set network-route-B",
        "xml": "<set>\n<parameter name='network-route-B' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
        "comments": "",
        "x": 2637,
        "y": 879,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "1fed210d.6adb97",
        "type": "save",
        "name": "get allotted-resource from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2259,
        "y": 275,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "1d390c60.f37264",
                "828d1344.2eeb18",
                "35c0fff4.63034"
            ]
        ]
    },
    {
        "id": "1d390c60.f37264",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2475,
        "y": 342,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "1dfc0585.305702"
            ]
        ]
    },
    {
        "id": "828d1344.2eeb18",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2475.490966796875,
        "y": 241.573974609375,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "899f4256.fc61"
            ]
        ]
    },
    {
        "id": "35c0fff4.63034",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2471,
        "y": 291,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "5b10d117.cfe6d8"
            ]
        ]
    },
    {
        "id": "899f4256.fc61",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2653.0625,
        "y": 241.8597412109375,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "5b10d117.cfe6d8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2653,
        "y": 291,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "e459bf6d.9da9d8",
        "type": "save",
        "name": "get logical-link from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
        "comments": "",
        "outputs": 1,
        "x": 1994,
        "y": 764,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "f5d3816e.ab2828",
                "4956f23f.0bb47c",
                "fe0f59f6.d97868"
            ]
        ]
    },
    {
        "id": "f5d3816e.ab2828",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2285.490966796875,
        "y": 742.573974609375,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "9822556a.f611a"
            ]
        ]
    },
    {
        "id": "4956f23f.0bb47c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2274,
        "y": 787,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "6c100a4d.9d821c"
            ]
        ]
    },
    {
        "id": "9822556a.f611a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2434.0625,
        "y": 742.8597412109375,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "6c100a4d.9d821c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2433,
        "y": 787,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "fe0f59f6.d97868",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2281,
        "y": 866,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "6d1afb47.ab3814"
            ]
        ]
    },
    {
        "id": "6d1afb47.ab3814",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2420,
        "y": 866,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "4b515bec.7b07fc",
                "1fb3da4d.f9823e",
                "97eccb48.84f6c",
                "c57ab47a.d333d8",
                "10cbf4f3.49fe3b",
                "49d3005f.62282",
                "1f03402a.5db7",
                "56710693.e24068",
                "84b0870f.4db1e",
                "3323f682.f60c3a",
                "13ac3dbd.1f366a"
            ]
        ]
    },
    {
        "id": "97eccb48.84f6c",
        "type": "save",
        "name": "get network-route-A from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-A'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-A\">",
        "comments": "",
        "outputs": 1,
        "x": 2649,
        "y": 947,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "8c8a4891.ac867",
                "8506ad3d.b7e4c",
                "a3b6635c.c539f8"
            ]
        ]
    },
    {
        "id": "c57ab47a.d333d8",
        "type": "save",
        "name": "get network-route-B from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-B'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-B\">",
        "comments": "",
        "outputs": 1,
        "x": 2628,
        "y": 1548.9998779296875,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "506562cd.b8f74c",
                "8d73f82f.8988f8",
                "24728d1d.df92ba"
            ]
        ]
    },
    {
        "id": "8c8a4891.ac867",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2850,
        "y": 831,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "40f9d3c1.86e1ec"
            ]
        ]
    },
    {
        "id": "8506ad3d.b7e4c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2845.509033203125,
        "y": 880.426025390625,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "6f975963.47cb7"
            ]
        ]
    },
    {
        "id": "a3b6635c.c539f8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2849.509033203125,
        "y": 931.426025390625,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "61bb235e.2775f4"
            ]
        ]
    },
    {
        "id": "40f9d3c1.86e1ec",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2998.571533203125,
        "y": 830.2857666015625,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "6f975963.47cb7",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2988.509033203125,
        "y": 880.426025390625,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "506562cd.b8f74c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2851,
        "y": 1518.9998779296875,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "7f769faa.864248"
            ]
        ]
    },
    {
        "id": "8d73f82f.8988f8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2846.509033203125,
        "y": 1568.4259033203125,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "cc9ee8f2.77fda8"
            ]
        ]
    },
    {
        "id": "24728d1d.df92ba",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2850.509033203125,
        "y": 1619.4259033203125,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "8a29f509.d58fe8"
            ]
        ]
    },
    {
        "id": "7f769faa.864248",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2999.571533203125,
        "y": 1518.28564453125,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "cc9ee8f2.77fda8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2989.509033203125,
        "y": 1568.4259033203125,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "b720785b.7c7",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3663.66650390625,
        "y": 975,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "f3775fbc.163688",
                "77e2870c.e28a38",
                "ac8bf04e.ff247",
                "7c2c78d5.f4945",
                "bb95643a.1dafd8"
            ]
        ]
    },
    {
        "id": "669f51ab.4dcf7",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3491,
        "y": 976,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "b720785b.7c7"
            ]
        ]
    },
    {
        "id": "bfa60b88.954ac8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3500.490966796875,
        "y": 1018.5740356445312,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "f78f70ff.0f2c38"
            ]
        ]
    },
    {
        "id": "83a912b8.5c33b",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3489,
        "y": 1065,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "d7142401.9476c"
            ]
        ]
    },
    {
        "id": "f78f70ff.0f2c38",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3654.0623779296875,
        "y": 1021.8597717285156,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "d7142401.9476c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3658,
        "y": 1066,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "61bb235e.2775f4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3011,
        "y": 933,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "4914fb6.031ad84",
                "4835023e.e8e8cc"
            ]
        ]
    },
    {
        "id": "8a29f509.d58fe8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3001,
        "y": 1620.9998779296875,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "33a198b5.ec1ae",
                "684cf1ab.a79f48"
            ]
        ]
    },
    {
        "id": "d9ace0a0.b4a76",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3631.66650390625,
        "y": 1811,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "a2003991.03fd4",
                "52dfb8b2.652278",
                "22f952b9.882086",
                "eb4dde28.2b2138",
                "60f3b421.08732c"
            ]
        ]
    },
    {
        "id": "cc45c64e.73066",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3459,
        "y": 1812,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "d9ace0a0.b4a76"
            ]
        ]
    },
    {
        "id": "33759aa.996c566",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3468.490966796875,
        "y": 1854.5740356445312,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "28b2902a.f0c46"
            ]
        ]
    },
    {
        "id": "fff61c46.59cf58",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3457,
        "y": 1901,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "c4e6ae73.bdead"
            ]
        ]
    },
    {
        "id": "28b2902a.f0c46",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3622.0623779296875,
        "y": 1857.8597717285156,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "c4e6ae73.bdead",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3626,
        "y": 1902,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "f3775fbc.163688",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3928,
        "y": 959,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "17df8b10.734cad",
                "e9e72181.7c2d78"
            ]
        ]
    },
    {
        "id": "e9e72181.7c2d78",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4151,
        "y": 914,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "c8b8d5f9.b22ca8"
            ]
        ]
    },
    {
        "id": "17df8b10.734cad",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4153,
        "y": 978,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "59177303.95ce1c"
            ]
        ]
    },
    {
        "id": "e95ea736.29045",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
        "comments": "",
        "x": 4486,
        "y": 869,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "59177303.95ce1c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 4315,
        "y": 974,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "c8b8d5f9.b22ca8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4316,
        "y": 911,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "f09148e0.5a878",
                "e95ea736.29045"
            ]
        ]
    },
    {
        "id": "f09148e0.5a878",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
        "comments": "",
        "x": 4487,
        "y": 977,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "2c408fec.1a81a",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 4488,
        "y": 926,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "ac8bf04e.ff247",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<parameter name='bandwidth-profile-name' value='`$prop.sotn.etht-svc-name`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='CIR' value='`$prop.sotn.cir`' />\n<parameter name='EIR' value='`$prop.sotn.eir`' />\n<parameter name='CBS' value='`$prop.sotn.cbs`' />\n<parameter name='EBS' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3930,
        "y": 1118,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "77e2870c.e28a38",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainA",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3975,
        "y": 1028,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "936488c4.d6b8e",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[?] all together\nin order to assemble the correct values for provider-id, \ntopology-id, node-id, etc.",
        "comments": "",
        "x": 3864,
        "y": 1069,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "a2003991.03fd4",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3918,
        "y": 1815.0001220703125,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "f2d8cb03.1eed48",
                "6e32cf18.31944"
            ]
        ]
    },
    {
        "id": "6e32cf18.31944",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4141,
        "y": 1770.0001220703125,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "201ffc86.8db20c"
            ]
        ]
    },
    {
        "id": "f2d8cb03.1eed48",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4143,
        "y": 1834.0001220703125,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "b29b2d4c.c3046"
            ]
        ]
    },
    {
        "id": "2386e717.060b18",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
        "comments": "",
        "x": 4476,
        "y": 1728.0001220703125,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "b29b2d4c.c3046",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 4302,
        "y": 1853.0001220703125,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "201ffc86.8db20c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4306,
        "y": 1767.0001220703125,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "2386e717.060b18",
                "c71df80d.cfbb08"
            ]
        ]
    },
    {
        "id": "c71df80d.cfbb08",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
        "comments": "",
        "x": 4477,
        "y": 1833.0001220703125,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "e385afea.eec45",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 4472,
        "y": 1782.0001220703125,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "22f952b9.882086",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n\n\n<parameter name='bandwidth-profile-name' value='`$prop.sotn.etht-svc-name`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='CIR' value='`$prop.sotn.cir`' />\n<parameter name='EIR' value='`$prop.sotn.eir`' />\n<parameter name='CBS' value='`$prop.sotn.cbs`' />\n<parameter name='EBS' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3920,
        "y": 1974.0001220703125,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "52dfb8b2.652278",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainB",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3965,
        "y": 1884.0001220703125,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "4961c905.9d4bb",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[?] all together\nin order to assemble the correct values for provider-id, \ntopology-id, node-id, etc.",
        "comments": "",
        "x": 3854,
        "y": 1922.0001220703125,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "10cbf4f3.49fe3b",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2848,
        "y": 2278,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "49d3005f.62282",
        "type": "set",
        "name": "set attachment_param",
        "xml": "<set>\n<parameter name='prop.connection-attachment.access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='prop.connection-attachment.access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='prop.connection-attachment.access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='prop.connection-attachment.access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='prop.connection-attachment.access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n\n<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='prop.remote.connection-attachment.access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='prop.remote.connection-attachment.access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n\n<!--<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$oof.vpn.access-provider-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-client-id' value='`$oof.vpn.access-client-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$oof.vpn.access-topology-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-node-id' value='`$oof.vpn.access-node-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />-->\n",
        "comments": "",
        "x": 2642,
        "y": 2179,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "9f05df83.0d8378",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "put proper values for src topology-id, node-id, ltp-id, etc (in domain A)\nand dst topology-id, node-id, ltp-id, etc (in domain B)",
        "comments": "",
        "x": 2616,
        "y": 2132,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "7c2c78d5.f4945",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 4058,
        "y": 1166,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "eb4dde28.2b2138",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 4047,
        "y": 2039.0001220703125,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "2d08c6.2cc1e73a",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5102,
        "y": 686,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "fe7f5526.b757d",
                "ace94fc7.113e6",
                "42739782.dc6168"
            ]
        ]
    },
    {
        "id": "1dfc0585.305702",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2655,
        "y": 342,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "8622621b.5191"
            ]
        ]
    },
    {
        "id": "7de95d04.4c5e84",
        "type": "outcome",
        "name": "logical-link",
        "xml": "<outcome value='logical-link'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1585.0001220703125,
        "y": 759.0001220703125,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "38efe599.5c2462"
            ]
        ]
    },
    {
        "id": "a0ff94f7.a05cd8",
        "type": "switchNode",
        "name": "switch allotted-resource.relationship-list not empty",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2323,
        "y": 465,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "8055d128.93cf8",
                "a4e55956.340f1"
            ]
        ]
    },
    {
        "id": "a4e55956.340f1",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2633,
        "y": 472,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "8055d128.93cf8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2632,
        "y": 526,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "33bd7ebe.34c502"
            ]
        ]
    },
    {
        "id": "2ecd1033.1e79d8",
        "type": "set",
        "name": "set the current logical-link-name",
        "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 2005,
        "y": 709,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "38efe599.5c2462",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1762,
        "y": 752,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "2ecd1033.1e79d8",
                "e459bf6d.9da9d8"
            ]
        ]
    },
    {
        "id": "f61b9c.2378ec68",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 3191,
        "y": 938,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "4914fb6.031ad84",
        "type": "save",
        "name": "get p-interface-src from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3234,
        "y": 1003,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "669f51ab.4dcf7",
                "bfa60b88.954ac8",
                "83a912b8.5c33b"
            ]
        ]
    },
    {
        "id": "33a198b5.ec1ae",
        "type": "save",
        "name": "get p-interface-dst from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3231,
        "y": 1847,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "cc45c64e.73066",
                "33759aa.996c566",
                "fff61c46.59cf58"
            ]
        ]
    },
    {
        "id": "13eb2671.9e12f2",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 3192,
        "y": 1791,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "8622621b.5191",
        "type": "save",
        "name": "get allotted-resource relationship from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2948,
        "y": 289,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "774c27b3.d5b958",
                "314f18ee.d0e28",
                "177a6858.e45f48"
            ]
        ]
    },
    {
        "id": "314f18ee.d0e28",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3221.490966796875,
        "y": 181.573974609375,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "bf0d979c.0d6a2"
            ]
        ]
    },
    {
        "id": "bf0d979c.0d6a2",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3399.0625,
        "y": 181.8597412109375,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "177a6858.e45f48",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3217,
        "y": 231,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "69e0c103.73f7e"
            ]
        ]
    },
    {
        "id": "69e0c103.73f7e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3399,
        "y": 231,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "774c27b3.d5b958",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3221,
        "y": 282,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "8d4f11e6.7da04"
            ]
        ]
    },
    {
        "id": "8d4f11e6.7da04",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3401,
        "y": 282,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "a0ff94f7.a05cd8"
            ]
        ]
    },
    {
        "id": "fe8ff063.6863b8",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2892,
        "y": 506,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "7f3884a8.055b2c"
            ]
        ]
    },
    {
        "id": "7f3884a8.055b2c",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3172,
        "y": 506,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "7de95d04.4c5e84"
            ]
        ]
    },
    {
        "id": "5050eb58.e00ed4",
        "type": "outcome",
        "name": "network-policy",
        "xml": "<outcome value='network-policy'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3377,
        "y": 480,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "9ce29b77.ad6fe8"
            ]
        ]
    },
    {
        "id": "9ce29b77.ad6fe8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3553.9998779296875,
        "y": 472.9998779296875,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "e7ee0b09.87c5d8",
                "7fe89152.e612e8"
            ]
        ]
    },
    {
        "id": "e7ee0b09.87c5d8",
        "type": "set",
        "name": "set the 1st network-policy-id",
        "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 3796.9998779296875,
        "y": 429.9998779296875,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "7fe89152.e612e8",
        "type": "save",
        "name": "get network-policy from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
        "comments": "",
        "outputs": 1,
        "x": 3785.9998779296875,
        "y": 484.9998779296875,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "64fb2208.a0a974",
                "c3b9f4d3.aab1b8",
                "f6aa84f.18621f8"
            ]
        ]
    },
    {
        "id": "f6aa84f.18621f8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4039,
        "y": 371,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "c20366f5.78311"
            ]
        ]
    },
    {
        "id": "c20366f5.78311",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4187.571533203125,
        "y": 371.2857666015625,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "a9aadb9.f22de28",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4186.509033203125,
        "y": 415.426025390625,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "c3b9f4d3.aab1b8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4027.509033203125,
        "y": 415.426025390625,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "a9aadb9.f22de28"
            ]
        ]
    },
    {
        "id": "64fb2208.a0a974",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4034.509033203125,
        "y": 494.426025390625,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "7a83723d.cc96f4"
            ]
        ]
    },
    {
        "id": "7a83723d.cc96f4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4173.509033203125,
        "y": 494.426025390625,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "1f8d33e3.a771dc",
                "420f3616.2f701"
            ]
        ]
    },
    {
        "id": "1f8d33e3.a771dc",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 4379,
        "y": 492,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "4835023e.e8e8cc",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3235,
        "y": 673,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "eafc912d.cb0fe",
                "14b2df73.02d4e1"
            ]
        ]
    },
    {
        "id": "14b2df73.02d4e1",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3458,
        "y": 659,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "bb352d17.34137"
            ]
        ]
    },
    {
        "id": "eafc912d.cb0fe",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3460,
        "y": 692,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "4040c9e2.8e3008"
            ]
        ]
    },
    {
        "id": "4040c9e2.8e3008",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 3603,
        "y": 689,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "bb352d17.34137",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3606,
        "y": 652,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "8f0d5ee9.6635d",
                "300f312a.b253d6"
            ]
        ]
    },
    {
        "id": "8f0d5ee9.6635d",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
        "comments": "",
        "x": 3768,
        "y": 647,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "684cf1ab.a79f48",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3249,
        "y": 1509.9998779296875,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "10ff0da4.16d4ea",
                "55c5195b.3875c8"
            ]
        ]
    },
    {
        "id": "55c5195b.3875c8",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3472,
        "y": 1495.9998779296875,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "7202d26b.6dffec"
            ]
        ]
    },
    {
        "id": "10ff0da4.16d4ea",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3474,
        "y": 1528.9998779296875,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "30474e74.e5639a"
            ]
        ]
    },
    {
        "id": "30474e74.e5639a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 3617,
        "y": 1525.9998779296875,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "7202d26b.6dffec",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3620,
        "y": 1488.9998779296875,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "885f2609.7cba58",
                "e1d06713.adb0c8"
            ]
        ]
    },
    {
        "id": "885f2609.7cba58",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
        "comments": "",
        "x": 3814,
        "y": 1492,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "d352d101.d008a8",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 1078,
        "y": 197,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "bb95643a.1dafd8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3882,
        "y": 1243,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "232e8f32.739b48"
            ]
        ]
    },
    {
        "id": "232e8f32.739b48",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4088,
        "y": 1243,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "8bbe738e.7fafb"
            ]
        ]
    },
    {
        "id": "8bbe738e.7fafb",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4303.28564453125,
        "y": 1242.82177734375,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "c3ad3464.e3237"
            ]
        ]
    },
    {
        "id": "c3ad3464.e3237",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4510.1171875,
        "y": 1243.34033203125,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "f0158859.e44c4",
                "1be7b379.0a0a35",
                "bee0e07a.660808"
            ]
        ]
    },
    {
        "id": "f0158859.e44c4",
        "type": "set",
        "name": "set source ttp-id",
        "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4725.1171875,
        "y": 1205.34033203125,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "1be7b379.0a0a35",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4722.1171875,
        "y": 1244.34033203125,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "5d7ec3ca.e9fe2c"
            ]
        ]
    },
    {
        "id": "bee0e07a.660808",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4677.6171875,
        "y": 1286.34033203125,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "5d7ec3ca.e9fe2c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4902.6171875,
        "y": 1243.34033203125,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "5c631dd4.8f5fbc"
            ]
        ]
    },
    {
        "id": "5c631dd4.8f5fbc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5060.6171875,
        "y": 1243.34033203125,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "d5d5e908.7a8eb8"
            ]
        ]
    },
    {
        "id": "d5d5e908.7a8eb8",
        "type": "set",
        "name": "set source tunnel tp ip",
        "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 5267.6171875,
        "y": 1243.34033203125,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "60f3b421.08732c",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3879,
        "y": 2112.0001220703125,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "715a89d.cfea178"
            ]
        ]
    },
    {
        "id": "715a89d.cfea178",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4085,
        "y": 2112.0001220703125,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "977e3712.429b18"
            ]
        ]
    },
    {
        "id": "977e3712.429b18",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4300.28564453125,
        "y": 2111.8218994140625,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "2113d9ff.cdd31e"
            ]
        ]
    },
    {
        "id": "2113d9ff.cdd31e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4507.1171875,
        "y": 2112.3404541015625,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "3c92c59b.613ca2",
                "193b4238.409d8e",
                "b71c718.f135e1"
            ]
        ]
    },
    {
        "id": "3c92c59b.613ca2",
        "type": "set",
        "name": "set destination ttp-id",
        "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4722.1171875,
        "y": 2074.3404541015625,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "193b4238.409d8e",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4719.1171875,
        "y": 2113.3404541015625,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "df85928.81de67"
            ]
        ]
    },
    {
        "id": "b71c718.f135e1",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4674.6171875,
        "y": 2155.3404541015625,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "df85928.81de67",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4899.6171875,
        "y": 2112.3404541015625,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "8b1f9fde.337d98"
            ]
        ]
    },
    {
        "id": "8b1f9fde.337d98",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5057.6171875,
        "y": 2112.3404541015625,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "20d9b129.b72206"
            ]
        ]
    },
    {
        "id": "20d9b129.b72206",
        "type": "set",
        "name": "set destination tunnel tp ip",
        "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 5264.6171875,
        "y": 2112.3404541015625,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "300f312a.b253d6",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3795,
        "y": 719,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "1c354309.a76ffd",
                "950deba8.cc3e4",
                "c2c16051.a906d8"
            ]
        ]
    },
    {
        "id": "1c354309.a76ffd",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3990.5001220703125,
        "y": 671,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "d41af0c3.594838"
            ]
        ]
    },
    {
        "id": "950deba8.cc3e4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3982.5001220703125,
        "y": 726,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "3d15fff1.053cf"
            ]
        ]
    },
    {
        "id": "c2c16051.a906d8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3987.5001220703125,
        "y": 783,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "d7ef8f23.d036"
            ]
        ]
    },
    {
        "id": "d7ef8f23.d036",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4139.5001220703125,
        "y": 784,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "3d15fff1.053cf",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4150.5001220703125,
        "y": 729,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "d41af0c3.594838",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4134.8824462890625,
        "y": 668.6556701660156,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "b45d0128.680c8"
            ]
        ]
    },
    {
        "id": "7cb8afd4.8d20b8",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4717,
        "y": 687,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "47edc84c.808f88"
            ]
        ]
    },
    {
        "id": "47edc84c.808f88",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4894,
        "y": 679,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "266ac25a.ea33a6",
                "2d08c6.2cc1e73a"
            ]
        ]
    },
    {
        "id": "b45d0128.680c8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4319,
        "y": 683,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "4f9ef890.59c338"
            ]
        ]
    },
    {
        "id": "4f9ef890.59c338",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4514,
        "y": 683,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "7cb8afd4.8d20b8",
                "212f425.c6d5fbe"
            ]
        ]
    },
    {
        "id": "266ac25a.ea33a6",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainA id",
        "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5132,
        "y": 634,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "fe7f5526.b757d",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5312,
        "y": 677,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "c4631195.e5511"
            ]
        ]
    },
    {
        "id": "ace94fc7.113e6",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5304,
        "y": 732,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "af8bf071.82c85"
            ]
        ]
    },
    {
        "id": "42739782.dc6168",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5309,
        "y": 789,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "b1e33e76.6db9b"
            ]
        ]
    },
    {
        "id": "b1e33e76.6db9b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5461,
        "y": 790,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "af8bf071.82c85",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5472,
        "y": 735,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "c4631195.e5511",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5456.38232421875,
        "y": 674.6556701660156,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "4dcc9c46.887914"
            ]
        ]
    },
    {
        "id": "4dcc9c46.887914",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5671,
        "y": 671,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "e1d06713.adb0c8",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3836,
        "y": 1560,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "34f7d7e6.e7fa8",
                "cb710953.72942",
                "4c788e8d.e93588"
            ]
        ]
    },
    {
        "id": "34f7d7e6.e7fa8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4031.5001220703125,
        "y": 1512,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "fd0d1ee5.65b0f"
            ]
        ]
    },
    {
        "id": "cb710953.72942",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4023.5001220703125,
        "y": 1567,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "68639fde.fb4de8"
            ]
        ]
    },
    {
        "id": "4c788e8d.e93588",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4028.5001220703125,
        "y": 1624,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "ed57c904.1da5b"
            ]
        ]
    },
    {
        "id": "ed57c904.1da5b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4180.5001220703125,
        "y": 1625,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "68639fde.fb4de8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4191.5001220703125,
        "y": 1570,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "fd0d1ee5.65b0f",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4175.8824462890625,
        "y": 1509.6556701660156,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "2c890085.25e4f8"
            ]
        ]
    },
    {
        "id": "b16b2c11.a7e9e",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4758,
        "y": 1528,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "e2c7b2a2.534808"
            ]
        ]
    },
    {
        "id": "e2c7b2a2.534808",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4935,
        "y": 1520,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "8256d13e.acb508",
                "e33af2d.2ed629"
            ]
        ]
    },
    {
        "id": "2c890085.25e4f8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4360,
        "y": 1524,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "7ad873b6.5b0624"
            ]
        ]
    },
    {
        "id": "7ad873b6.5b0624",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4555,
        "y": 1524,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "b16b2c11.a7e9e",
                "ba30acec.499f9"
            ]
        ]
    },
    {
        "id": "e33af2d.2ed629",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5143,
        "y": 1527,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "dd2f9c6b.57f548",
                "3b879379.c9bf84",
                "13b1398c.3c465e"
            ]
        ]
    },
    {
        "id": "8256d13e.acb508",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainB id",
        "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5173,
        "y": 1475,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "dd2f9c6b.57f548",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5353,
        "y": 1518,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "56d2c260.edc91c"
            ]
        ]
    },
    {
        "id": "3b879379.c9bf84",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5345,
        "y": 1573,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "7449bea.eaa7fc"
            ]
        ]
    },
    {
        "id": "13b1398c.3c465e",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5350,
        "y": 1630,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "232c7315.841b1c"
            ]
        ]
    },
    {
        "id": "232c7315.841b1c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5502,
        "y": 1631,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "7449bea.eaa7fc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5513,
        "y": 1576,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "56d2c260.edc91c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5497.38232421875,
        "y": 1515.6556701660156,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "49d0cb53.31a39c"
            ]
        ]
    },
    {
        "id": "49d0cb53.31a39c",
        "type": "set",
        "name": "set controller domainB data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5712,
        "y": 1512,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "33bd7ebe.34c502",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2796,
        "y": 452,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "fe8ff063.6863b8",
                "4e85bccf.c8cf0c"
            ]
        ]
    },
    {
        "id": "4e85bccf.c8cf0c",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3077,
        "y": 408,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "badd7dbd.ce16"
            ]
        ]
    },
    {
        "id": "badd7dbd.ce16",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3339,
        "y": 408,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "5050eb58.e00ed4"
            ]
        ]
    },
    {
        "id": "212f425.c6d5fbe",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 4720,
        "y": 761,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "656d86d7.e1bb3"
            ]
        ]
    },
    {
        "id": "656d86d7.e1bb3",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4897,
        "y": 753,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "4f5b4545.d432fc"
            ]
        ]
    },
    {
        "id": "4f5b4545.d432fc",
        "type": "set",
        "name": "set domainA ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5132,
        "y": 877,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "5e5727f6.ce94f",
        "type": "set",
        "name": "set domainB ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5172,
        "y": 1717,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "33761656.d7dc5a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4937,
        "y": 1593,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "5e5727f6.ce94f"
            ]
        ]
    },
    {
        "id": "ba30acec.499f9",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 4760,
        "y": 1601,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "33761656.d7dc5a"
            ]
        ]
    },
    {
        "id": "420f3616.2f701",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 4378,
        "y": 538,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "b1349530.c53cc",
        "type": "execute",
        "name": "execute UUID generator for ethernet-service-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2734,
        "y": 672,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "84b0870f.4db1e",
        "type": "execute",
        "name": "execute UUID generator for otn-tunnel-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2715,
        "y": 722,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "2dfd81e1.a251ae",
        "type": "for",
        "name": "for each allotted-resource",
        "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1972,
        "y": 224,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "3ffb610e.7895d6",
                "1fed210d.6adb97"
            ]
        ]
    },
    {
        "id": "3ffb610e.7895d6",
        "type": "set",
        "name": "set the current allotted-resource-id",
        "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
        "comments": "",
        "x": 2256,
        "y": 194,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "1f03402a.5db7",
        "type": "set",
        "name": "set query_param",
        "xml": "<set>\n<parameter name='prop.ethsrvType' value='`$network-route-A`' />\n\n",
        "comments": "",
        "x": 2631,
        "y": 2231,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "56710693.e24068",
        "type": "set",
        "name": "unset parameters",
        "xml": "<set>\n<parameter name='domain-A.tunnel-tp-id' value='' />\n<parameter name='domain-A.node-id' value='' />\n<parameter name='domain-A.network-id' value=\"\" />\n<parameter name='domain-A.provider-id' value=\"\" />\n<parameter name='domain-A.client-id' value=\"\" />\n<parameter name='domain-A.te-topo-id' value=\"\" />\n<parameter name='domain-A.network-type' value=\"\" />\n<parameter name='domain-A.ltpId' value=\"\" />\n<parameter name='tmp.domain-A.network-id' value=\"\" />\n<parameter name='tmp.domain-A.ttp-id' value=\"\" />\n<parameter name='network-route-A' value=\"\" />\n<!--<parameter name='domain-A.' value=\"\" />-->\n\n<parameter name='request-id' value='' />\n<parameter name='otn-source-node' value='' />\n<parameter name='otn-dest-node' value='' />\n<parameter name='bw-odu' value=\"\" />\n<parameter name='src-ttp-id' value='' />\n<parameter name='dst-ttp-id' value='' />\n\n<parameter name='domain-B.tunnel-tp-id' value='' />\n<parameter name='domain-B.node-id' value='' />\n<parameter name='domain-B.network-id' value=\"\" />\n<parameter name='domain-B.provider-id' value=\"\" />\n<parameter name='domain-B.client-id' value=\"\" />\n<parameter name='domain-B.te-topo-id' value=\"\" />\n<parameter name='domain-B.network-type' value=\"\" />\n<parameter name='domain-B.ltpId' value=\"\" />\n<parameter name='tmp.domain-B.network-id' value=\"\" />\n<parameter name='tmp.domain-B.ttp-id' value=\"\" />\n<parameter name='network-route-B' value=\"\" />\n<!--<parameter name='domain-B.' value=\"\" />-->\n\n\n\n\n\n",
        "comments": "",
        "x": 2615,
        "y": 3930,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "3323f682.f60c3a",
        "type": "set",
        "name": "set new ethernet-service-name",
        "xml": "<set>\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />\n\n\n",
        "comments": "",
        "x": 2672,
        "y": 767,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "13ac3dbd.1f366a",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='otnidx' start='0' end='`$tmp.otninfo_length`' >",
        "comments": "",
        "outputs": 1,
        "x": 2666,
        "y": 2351,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "f2924301.397558"
            ]
        ]
    },
    {
        "id": "647d2436.140504",
        "type": "save",
        "name": "save vpn-binding otnIdx resource (aka. OTN) in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' >\n<parameter name='vpn-id' value='`$prop.vpn-binding-otnidx-uuid`' />\n<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />\n<parameter name='customer-vpn-id' value='`($idx + 1) * 10`' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<parameter name='access-provider-id' value='`$tmp.access-provider-id`' />\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<parameter name='access-client-id' value='`$tmp.access-client-id`' />\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<parameter name='access-topology-id' value='`$tmp.access-topology-id`' />\n<!--<parameter name='src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<parameter name='src-access-node-id' value='`$tmp.domainG-src-access-node-id`' />\n<parameter name='src-access-ltp-id' value='`$tmp.otninfo[$otnidx].srcPort.src-tunnel-tp-id`' />\n<!--<parameter name='dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />-->\n<parameter name='dst-access-node-id' value='`$tmp.domainG-dst-access-node-id`' />\n<parameter name='dst-access-ltp-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-tunnel-tp-id`' />\n<parameter name='route-distinguisher' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.global.sotn.vpnType`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n\n\n<parameter name='vpn-region' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.url`' />\n<parameter name='vpn-description' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.user`' />\n<parameter name='vpn-platform' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.password`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 3789,
        "y": 2919,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "810630b1.0e1b6"
            ]
        ]
    },
    {
        "id": "fdfa6fb7.1a35f",
        "type": "save",
        "name": "save connectivity-A relationship to vpn-binding-A, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4361.5,
        "y": 3023,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "810630b1.0e1b6",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4095,
        "y": 2918,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "a594830d.53acd8"
            ]
        ]
    },
    {
        "id": "a594830d.53acd8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4304.5,
        "y": 2918.25390625,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "b41cf773.b97ef"
            ]
        ]
    },
    {
        "id": "4c295920.4b5da",
        "type": "execute",
        "name": "execute UUID generator for vpn-binding $otnidx",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.vpn-binding-otnidx-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3825,
        "y": 2383,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "19452741.32e4c1",
        "type": "switchNode",
        "name": "switch otnidx == 0",
        "xml": "<switch test='`$otnidx == 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3698,
        "y": 3036,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "9c40fb98.e1f61",
                "20acba8d.85a5f6"
            ]
        ]
    },
    {
        "id": "9c40fb98.e1f61",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3881,
        "y": 3036,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "a42fc89d.d0c4a"
            ]
        ]
    },
    {
        "id": "20acba8d.85a5f6",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3706,
        "y": 3183,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "332942c6.7f663e"
            ]
        ]
    },
    {
        "id": "f5749296.6a691",
        "type": "switchNode",
        "name": "switch otnidx == last",
        "xml": "<switch test='`$otnidx == $tmp.otninfo_length - 1`'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4047,
        "y": 3264,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "2103be8f.1fc842",
                "1554c822.b8c828"
            ]
        ]
    },
    {
        "id": "2103be8f.1fc842",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4232,
        "y": 3265,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "a1250da6.1c6"
            ]
        ]
    },
    {
        "id": "1554c822.b8c828",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4251,
        "y": 3531,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "99adbaff.3e741"
            ]
        ]
    },
    {
        "id": "f416ea28.cb6ab",
        "type": "save",
        "name": "save connectivity-B relationship to vpn-binding-B, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4662,
        "y": 3266,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "e6548b2c.2addd8",
        "type": "execute",
        "name": "execute UUID generator for connectivity domain otnidx",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-otnidx-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4736,
        "y": 3564,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "ddd52155.f542e8",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-otnidx-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-otnidx-uuid`' />\n<!--<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />-->\n<parameter name='operational-status' value='Created' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<!--<parameter name='access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<!--<parameter name='access-ltp-id' value='``' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->\n\n<parameter name='bandwidth-profile-name' value='`$prop.sotn.etht-svc-name`' />\n<parameter name='vpn-type' value='dummy' />\n<!--<parameter name='CIR' value='`$prop.sotn.cir`' />-->\n<!--<parameter name='EIR' value='`$prop.sotn.eir`' />-->\n<!--<parameter name='CBS' value='`$prop.sotn.cbs`' />-->\n<!--<parameter name='EBS' value='`$prop.sotn.ebs`' />-->\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 4672,
        "y": 3615,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "a14f6e93.1adaf8",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-otnidx-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-otnidx-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 4801,
        "y": 3665,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "16a831c0.877516",
        "type": "comment",
        "name": "connectivity has not been created for middle domains, so we have to create one",
        "info": "",
        "comments": "",
        "x": 4811,
        "y": 3508,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "2e301756.38a228",
        "type": "save",
        "name": "save connectivity-otnidx relationship to vpn-binding-otnidx, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-otnidx-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-otnidx-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4769,
        "y": 3724,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "99adbaff.3e741",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4408,
        "y": 3532,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "e6548b2c.2addd8",
                "ddd52155.f542e8",
                "a14f6e93.1adaf8",
                "2e301756.38a228",
                "ebae712b.9f6bf8"
            ]
        ]
    },
    {
        "id": "f2924301.397558",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2918,
        "y": 2412,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "4c295920.4b5da",
                "647d2436.140504",
                "19452741.32e4c1",
                "1d59f70d.1ee6c9",
                "b15a67ed.f1cb18",
                "e4fb52b5.f04798",
                "f5263d8c.0dd66"
            ]
        ]
    },
    {
        "id": "2e1edee2.ee8112",
        "type": "set",
        "name": "set attachment_param domain A",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n\n\n",
        "comments": "",
        "x": 4286,
        "y": 3080,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "ba046748.bfe1b",
        "type": "execute",
        "name": "execute RestApiCallNode domainA UNI Coloring",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-coloring-uni-port.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-network:networks/network=' + $tmp.domainA.eth-network-id + '/node=' + $tmp.src.pnf-name + '/ietf-network-topology:termination-point=' + $tmp.src.ltpId + '/ietf-te-topology:te' `\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4339,
        "y": 3124,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "b63ee960.cee2c",
                "1b1f60e5.7a7c9f"
            ]
        ]
    },
    {
        "id": "1b1f60e5.7a7c9f",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4610,
        "y": 3109,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "e9f5d50.e9a0928"
            ]
        ]
    },
    {
        "id": "b63ee960.cee2c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4608.000213623047,
        "y": 3166.99990940094,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "c9e53751.966bb8"
            ]
        ]
    },
    {
        "id": "e9f5d50.e9a0928",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing UNI Coloring for domain A\" />\n",
        "comments": "",
        "x": 4750.000247955322,
        "y": 3109.0000009536743,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "c9e53751.966bb8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4756.02725982666,
        "y": 3157.745394706726,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "a42fc89d.d0c4a",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4022,
        "y": 3026,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "fdfa6fb7.1a35f",
                "ba046748.bfe1b",
                "2e1edee2.ee8112"
            ]
        ]
    },
    {
        "id": "a1250da6.1c6",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4366,
        "y": 3266,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "f416ea28.cb6ab",
                "6f1cb48c.6026e4",
                "1cf9708b.795d07"
            ]
        ]
    },
    {
        "id": "1cf9708b.795d07",
        "type": "set",
        "name": "set attachment_param domain B",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n\n",
        "comments": "",
        "x": 4586,
        "y": 3310,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "6f1cb48c.6026e4",
        "type": "execute",
        "name": "execute RestApiCallNode domainB UNI Coloring",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-coloring-uni-port.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-network:networks/network=' + $tmp.domainB.eth-network-id + '/node=' + $tmp.dst.pnf-name + '/ietf-network-topology:termination-point=' + $tmp.dst.ltpId + '/ietf-te-topology:te' `\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4637,
        "y": 3354,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "6e1323b5.c04ce4",
                "1555b51f.0ca46b"
            ]
        ]
    },
    {
        "id": "1555b51f.0ca46b",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4900,
        "y": 3334,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "7a3f18c.e7bf268"
            ]
        ]
    },
    {
        "id": "6e1323b5.c04ce4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4901.000213623047,
        "y": 3384.99990940094,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "c1d2c5de.5e2688"
            ]
        ]
    },
    {
        "id": "7a3f18c.e7bf268",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing UNI coloring for domain B\" />\n",
        "comments": "",
        "x": 5040.000247955322,
        "y": 3334.0000009536743,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "c1d2c5de.5e2688",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5046.02725982666,
        "y": 3382.745394706726,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "ebae712b.9f6bf8",
        "type": "set",
        "name": "set attachment_param domain otnidx",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n",
        "comments": "",
        "x": 4683,
        "y": 3784,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "bc1d9c19.8a817",
        "type": "save",
        "name": "get all-vpn-bindings from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v21/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2002,
        "y": 4131,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "3b12d36f.6d8234",
                "89a53740.4d3c98",
                "a61d86b5.6c70f"
            ]
        ]
    },
    {
        "id": "3b12d36f.6d8234",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2190,
        "y": 4144,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "3ced61cb.b2d7fe"
            ]
        ]
    },
    {
        "id": "89a53740.4d3c98",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2190.490966796875,
        "y": 4189.574035644531,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "3eafcbaf.f2f56c"
            ]
        ]
    },
    {
        "id": "a61d86b5.6c70f",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2188,
        "y": 4233,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "170e04a2.1b39fb"
            ]
        ]
    },
    {
        "id": "3ced61cb.b2d7fe",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2363,
        "y": 4142,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "ef9d0591.fefb08"
            ]
        ]
    },
    {
        "id": "3eafcbaf.f2f56c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2353.0623779296875,
        "y": 4189.859771728516,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "170e04a2.1b39fb",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2355,
        "y": 4232,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "bf30e0be.23b998",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='dmnsidx' start='0' end='`$otn-tunnel-slice_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1991,
        "y": 4322,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "557999e1.77dcb"
            ]
        ]
    },
    {
        "id": "d613988a.0c40c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2801,
        "y": 4322,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "e4afc290.74f038"
            ]
        ]
    },
    {
        "id": "f7f46916.4f1ee",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='stunidx' start='0' end='`$otn-tunnel-slice[$dmnsidx].list_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2573,
        "y": 4322,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "d613988a.0c40c"
            ]
        ]
    },
    {
        "id": "ce29a297.cf1cb8",
        "type": "set",
        "name": "set providerValue",
        "xml": "<set>\n<parameter name='providerValue' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].access-provider-id`' />\n<parameter name='found' value='false' />\n\n\n",
        "comments": "",
        "x": 3693,
        "y": 4089,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "90828ea.8f9357",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='testingvalue' value='$tmp.otninfo_length -1' />\n",
        "comments": "",
        "x": 3995,
        "y": 3215,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "332942c6.7f663e",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3830,
        "y": 3190,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "90828ea.8f9357",
                "f5749296.6a691"
            ]
        ]
    },
    {
        "id": "d0adb7e4.435f98",
        "type": "set",
        "name": "set tmp.arr",
        "xml": "<set>\n<parameter name='tmp.arr' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='tmp.arr_length' value='0' />\n\n<parameter name='otn-tunnel-slice' value='' />\n<parameter name='otn-tunnel-slice_length' value='0' />\n\n<parameter name='tmp.slicevpns' value='' />\n<parameter name='tmp.slicevpns_length' value='0' />\n\n<parameter name='tmp.slicevpnuuids' value='' />\n<parameter name='tmp.slicevpnuuids.' value='' />\n\n\n",
        "comments": "",
        "x": 1954,
        "y": 170,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "ef9d0591.fefb08",
        "type": "for",
        "name": "for vpnidx in all-vpn-bindings",
        "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2592,
        "y": 4143,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "2fbee9b.ff76316"
            ]
        ]
    },
    {
        "id": "2fbee9b.ff76316",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2807,
        "y": 4144,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "9baaaca4.d54a4"
            ]
        ]
    },
    {
        "id": "49f4d5cd.eba3ac",
        "type": "for",
        "name": "for arridx in tmp.arr",
        "xml": "<for index='arridx' start='0' end='`$tmp.arr_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4260,
        "y": 4064,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "a296aaec.6a9f7"
            ]
        ]
    },
    {
        "id": "72392f69.a40338",
        "type": "switchNode",
        "name": "switch $tmp.arr_length != 0",
        "xml": "<switch test='`$tmp.arr_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3726,
        "y": 4144,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "1e30cbc6.5b29c4",
                "73a572c0.fcdcfc"
            ]
        ]
    },
    {
        "id": "1e30cbc6.5b29c4",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3922,
        "y": 4114,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "79192fda.22a8a8"
            ]
        ]
    },
    {
        "id": "73a572c0.fcdcfc",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3923,
        "y": 4185,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "e5b5d449.e95738"
            ]
        ]
    },
    {
        "id": "79192fda.22a8a8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4073,
        "y": 4112,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "49f4d5cd.eba3ac",
                "ee34549a.68661"
            ]
        ]
    },
    {
        "id": "a296aaec.6a9f7",
        "type": "switchNode",
        "name": "switch tmp.arr[$arridx] == $providerValue",
        "xml": "<switch test='`$tmp.arr[$arridx] == $providerValue`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4551,
        "y": 4064,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "f6a570fa.8c3e18",
                "f096fdfa.51af18"
            ]
        ]
    },
    {
        "id": "f6a570fa.8c3e18",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4826,
        "y": 4033,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "7e64bb9a.5c5954"
            ]
        ]
    },
    {
        "id": "f096fdfa.51af18",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4827,
        "y": 4104,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "2ae9b410.b8e274"
            ]
        ]
    },
    {
        "id": "7e64bb9a.5c5954",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4977,
        "y": 4031,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "883ad39b.46747",
                "3d5cad7b.78211a",
                "ac8bc417.7b82a",
                "6ea95490.220544",
                "6a39b9a6.2592"
            ]
        ]
    },
    {
        "id": "883ad39b.46747",
        "type": "set",
        "name": "set found to true",
        "xml": "<set>\n<parameter name='found' value='true' />\n\n\n",
        "comments": "",
        "x": 5165,
        "y": 3991,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "3d5cad7b.78211a",
        "type": "save",
        "name": "store $arridx somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='`$arridx`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5237,
        "y": 4036,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "6a39b9a6.2592",
        "type": "set",
        "name": "set twoD arr",
        "xml": "<set>\n\n<!--<parameter name='`tmp.arr[$arridx + 1]`' value='`$providerValue`' />-->\n<!--<parameter name='tmp.arr_length' value='`$tmp.arr_length + 1`' />-->\n\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<!--<parameter name='otn-tunnel-slice_length' value='`$arridx + 2`' />-->\n<parameter name='`otn-tunnel-slice[$arridx].list_length`' value='`$sizeOfSliceList + 1`' />\n\n",
        "comments": "",
        "x": 5152,
        "y": 4163,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "6ea95490.220544",
        "type": "set",
        "name": "set sizeOfSliceList",
        "xml": "<set>\n<parameter name='sizeOfSliceList' value='`$otn-tunnel-slice[$arridx].list_length`' />\n\n\n",
        "comments": "",
        "x": 5173,
        "y": 4099,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "e5b5d449.e95738",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4075,
        "y": 4185,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "b867d047.fac",
                "3788e630.590d72"
            ]
        ]
    },
    {
        "id": "b867d047.fac",
        "type": "save",
        "name": "store $arridx somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='0' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4330,
        "y": 4178,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "3788e630.590d72",
        "type": "set",
        "name": "set twoD array",
        "xml": "<set>\n<parameter name='tmp.arr[0]' value='`$providerValue`' />\n<parameter name='tmp.arr_length' value='1' />\n\n<parameter name='`otn-tunnel-slice[0].list[0].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[0].list[0].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[0].list[0].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[0].list[0].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[0].list[0].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<parameter name='otn-tunnel-slice_length' value='1' />\n<parameter name='otn-tunnel-slice[0].list_length' value='1' />\n\n",
        "comments": "",
        "x": 4258,
        "y": 4225,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "ee34549a.68661",
        "type": "switchNode",
        "name": "switch found?",
        "xml": "<switch test='`$found`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4251,
        "y": 4109,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "d1f76975.e11b9",
                "3421ae07.ec9d62"
            ]
        ]
    },
    {
        "id": "d1f76975.e11b9",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4411,
        "y": 4101,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "2d9d0080.4d96d"
            ]
        ]
    },
    {
        "id": "3421ae07.ec9d62",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4409,
        "y": 4138,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "91314308.ab84d"
            ]
        ]
    },
    {
        "id": "2d9d0080.4d96d",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4536,
        "y": 4101,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "fd3f24a6.bbbfb8",
        "type": "save",
        "name": "store $arridx+1 somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='`$arridx + 1`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4843,
        "y": 4159,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "91314308.ab84d",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4569,
        "y": 4146,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "fd3f24a6.bbbfb8",
                "3fbaf181.1ff88e"
            ]
        ]
    },
    {
        "id": "3fbaf181.1ff88e",
        "type": "set",
        "name": "set twoD array",
        "xml": "<set>\n<parameter name='`tmp.arr[$arridx + 1]`' value='`$providerValue`' />\n<parameter name='tmp.arr_length' value='`$tmp.arr_length + 1`' />\n\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<parameter name='otn-tunnel-slice_length' value='`$arridx + 2`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list_length`' value='1' />\n\n",
        "comments": "",
        "x": 4760,
        "y": 4205,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "2ae9b410.b8e274",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4960,
        "y": 4103,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "ac8bc417.7b82a",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 5131,
        "y": 4230,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "1d59f70d.1ee6c9",
        "type": "switchNode",
        "name": "switch dstPort == NULL",
        "xml": "<switch test=\"`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id == ''`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3528,
        "y": 2442,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "13d01e4b.11cf72",
                "f41dda2a.86b79"
            ]
        ]
    },
    {
        "id": "13d01e4b.11cf72",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3917,
        "y": 2420,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "a63400f9.70b798"
            ]
        ]
    },
    {
        "id": "f41dda2a.86b79",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3918,
        "y": 2466,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "201cd4b0.391f6c"
            ]
        ]
    },
    {
        "id": "a63400f9.70b798",
        "type": "set",
        "name": "set access-provider-id and client-id",
        "xml": "<set>\n<parameter name='tmp.access-provider-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-provider-id`' />\n<parameter name='tmp.access-client-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-client-id`' />\n<parameter name='tmp.access-topology-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-topology-id`' />\n<parameter name='tmp.srcdstpnf-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n",
        "comments": "",
        "x": 4131,
        "y": 2419,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "201cd4b0.391f6c",
        "type": "set",
        "name": "set access-provider-id and client-id",
        "xml": "<set>\n<parameter name='tmp.access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />\n<parameter name='tmp.access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />\n<parameter name='tmp.access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />\n<parameter name='tmp.srcdstpnf-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />\n",
        "comments": "",
        "x": 4129,
        "y": 2464,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "e4afc290.74f038",
        "type": "set",
        "name": "set attachment_param sliceG",
        "xml": "<set>\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].request-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].request-id`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].otn-source-node`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].otn-source-node`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].otn-dest-node`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].otn-dest-node`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].bw-odu`' value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].bw-odu`\" />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].src-ttp-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].src-ttp-id`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].dst-ttp-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].dst-ttp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='otn-tunnel-sliceG-list_length' value='`$stunidx + 1`' />\n\n\n<parameter name=\"tmp.domainG.restapiUrl\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainurl`\" />\n<parameter name=\"tmp.domainG.restapiUser\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainuser`\" />\n<parameter name=\"tmp.domainG.restapiPassword\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainpassword`\" />",
        "comments": "",
        "x": 3054,
        "y": 4320,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "5a129ea2.020ec",
        "type": "execute",
        "name": "execute RestApiCallNode sliceG creation domainG",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.transport-sliceG-list-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$tmp.domainG.restapiUrl + '/restconf/operations/ietf-optical-slice:create-optical-slice'`\" />\n<parameter name=\"restapiUser\" value=\"`$tmp.domainG.restapiUser`\" />\n<parameter name=\"restapiPassword\" value=\"`tmp.domainG.restapiPassword`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2639,
        "y": 4428,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "235df5b8.967b5a",
                "2fcb7bfa.e794ec"
            ]
        ]
    },
    {
        "id": "2fcb7bfa.e794ec",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2922,
        "y": 4408,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "ec27b172.f3b03"
            ]
        ]
    },
    {
        "id": "235df5b8.967b5a",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2923.000213623047,
        "y": 4458.99990940094,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "afac7d54.5ea3c8"
            ]
        ]
    },
    {
        "id": "ec27b172.f3b03",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing slice creation api for domain A\" />\n",
        "comments": "",
        "x": 3062.0002479553223,
        "y": 4408.000000953674,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "afac7d54.5ea3c8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3068.02725982666,
        "y": 4456.745394706726,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "b15a67ed.f1cb18",
        "type": "set",
        "name": "set srcdstpnf-name",
        "xml": "<set>\n<parameter name='tmp.srcdstpnf-name' value=\"`'networkId-providerId-' + \n                                             $tmp.access-provider-id + '-clientId-' +\n                                             $tmp.access-client-id + '-topologyId-' + \n                                             $tmp.access-topology-id + '-nodeId-' + \n                                             $tmp.srcdstpnf-id`\" />\n\n",
        "comments": "",
        "x": 3712,
        "y": 2562,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "e4fb52b5.f04798",
        "type": "get-resource",
        "name": "get-resource tmp.srcdstpnf-name",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.srcdstpnf-name\"\n        pfx='tmp.aai.srcdst-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3756,
        "y": 2610,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "38280842.8f481",
                "762394a6.8c9edc",
                "bf6967d.9863518"
            ]
        ]
    },
    {
        "id": "38280842.8f481",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3968.5,
        "y": 2557,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "7c3bab6c.40727c"
            ]
        ]
    },
    {
        "id": "762394a6.8c9edc",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3980.5,
        "y": 2607,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "9fa14d44.80429"
            ]
        ]
    },
    {
        "id": "bf6967d.9863518",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3971.5,
        "y": 2662,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "e6f16a7e.5e034"
            ]
        ]
    },
    {
        "id": "e6f16a7e.5e034",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4116.5,
        "y": 2661,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "9fa14d44.80429",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4127.5,
        "y": 2604,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "7c3bab6c.40727c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4093.8824462890625,
        "y": 2550.6556701660156,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "3ada39cb.077d7e"
            ]
        ]
    },
    {
        "id": "79f49c03.b31834",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4653,
        "y": 2569,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "b38ec96c.50bcb"
            ]
        ]
    },
    {
        "id": "b38ec96c.50bcb",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4830,
        "y": 2561,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "b25407c2.fe4e9",
                "76abd2d6.8cf2bc"
            ]
        ]
    },
    {
        "id": "3ada39cb.077d7e",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.srcdst-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4255,
        "y": 2565,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "631c6ac2.9b4684"
            ]
        ]
    },
    {
        "id": "631c6ac2.9b4684",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.srcdst-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4450,
        "y": 2565,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "79f49c03.b31834"
            ]
        ]
    },
    {
        "id": "76abd2d6.8cf2bc",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainG.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainG.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5038,
        "y": 2568,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "b500a3b6.711188",
                "e4ff3e60.96d148",
                "ef9c5a3.20232a8"
            ]
        ]
    },
    {
        "id": "b25407c2.fe4e9",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainG id",
        "xml": "<set>\n<parameter name='tmp.domainG.esr-thirdparty-id' value=\"`$tmp.aai.srcdst-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5068,
        "y": 2516,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "b500a3b6.711188",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5248,
        "y": 2559,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "8c9a0f1.a2e9b7"
            ]
        ]
    },
    {
        "id": "e4ff3e60.96d148",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5240,
        "y": 2614,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "7d5ba752.0bac28"
            ]
        ]
    },
    {
        "id": "ef9c5a3.20232a8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5245,
        "y": 2671,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "5979580a.e6b1f8"
            ]
        ]
    },
    {
        "id": "5979580a.e6b1f8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5397,
        "y": 2672,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "7d5ba752.0bac28",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5408,
        "y": 2617,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "8c9a0f1.a2e9b7",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5392.38232421875,
        "y": 2556.6556701660156,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "b4fe40f1.fee308"
            ]
        ]
    },
    {
        "id": "b4fe40f1.fee308",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.url' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.user' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.password' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5607,
        "y": 2553,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "557999e1.77dcb",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2223,
        "y": 4320,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "f7f46916.4f1ee",
                "5a129ea2.020ec"
            ]
        ]
    },
    {
        "id": "f5263d8c.0dd66",
        "type": "switchNode",
        "name": "switch dmnsidx == 0 (domainA)",
        "xml": "<switch test='`$otnidx == 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3726,
        "y": 2779,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "cb45f40e.c4e9f",
                "686c2e71.b364f8"
            ]
        ]
    },
    {
        "id": "cb45f40e.c4e9f",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3927,
        "y": 2777,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "906b7761.ec3cf"
            ]
        ]
    },
    {
        "id": "906b7761.ec3cf",
        "type": "set",
        "name": "set attachment_param domain A",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />",
        "comments": "",
        "x": 4141,
        "y": 2779,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "bb50949c.2c4e68",
        "type": "switchNode",
        "name": "switch dmnsidx == last (domainB)",
        "xml": "<switch test='`$otnidx == $tmp.otninfo_length - 1`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4144,
        "y": 2828,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "f9f184f6.8f0c58",
                "b1eb5cf.84b33a"
            ]
        ]
    },
    {
        "id": "f9f184f6.8f0c58",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4374,
        "y": 2824,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "ea46128e.0ba028"
            ]
        ]
    },
    {
        "id": "ea46128e.0ba028",
        "type": "set",
        "name": "set attachment_param domain B",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />",
        "comments": "",
        "x": 4588,
        "y": 2827,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "686c2e71.b364f8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3927,
        "y": 2826,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "bb50949c.2c4e68"
            ]
        ]
    },
    {
        "id": "b1eb5cf.84b33a",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4375,
        "y": 2870,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "591dd2d5.72937c"
            ]
        ]
    },
    {
        "id": "591dd2d5.72937c",
        "type": "set",
        "name": "set attachment_param domain G",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />",
        "comments": "",
        "x": 4589,
        "y": 2870,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "b41cf773.b97ef",
        "type": "set",
        "name": "set tmp.slicevpns",
        "xml": "<set>\n<parameter name='`tmp.slicevpns[$tmp.slicevpns_length]`' value=\"`$prop.vpn-binding-otnidx-uuid`\" />\n<parameter name='tmp.slicevpns_length' value=\"`$tmp.slicevpns_length + 1`\" />\n\n<parameter name='`tmp.slicevpnuuids[$prop.vpn-binding-otnidx-uuid]`' value=\"`$prop.vpn-binding-otnidx-uuid`\" />\n\n",
        "comments": "",
        "x": 4487,
        "y": 2919,
        "z": "b31344e1.6b9228",
        "wires": []
    },
    {
        "id": "9baaaca4.d54a4",
        "type": "switchNode",
        "name": "switch vpnuuid is for this slice",
        "xml": "<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">\n",
        "comments": "",
        "outputs": 1,
        "x": 3051,
        "y": 4143,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "cb64ffb8.43ead",
                "d4b6930e.5ef778"
            ]
        ]
    },
    {
        "id": "cb64ffb8.43ead",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3268,
        "y": 4122,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "2504214d.099dbe"
            ]
        ]
    },
    {
        "id": "d4b6930e.5ef778",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3268,
        "y": 4171,
        "z": "b31344e1.6b9228",
        "wires": [
            []
        ]
    },
    {
        "id": "2504214d.099dbe",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3436,
        "y": 4122,
        "z": "b31344e1.6b9228",
        "wires": [
            [
                "ce29a297.cf1cb8",
                "72392f69.a40338"
            ]
        ]
    }
]