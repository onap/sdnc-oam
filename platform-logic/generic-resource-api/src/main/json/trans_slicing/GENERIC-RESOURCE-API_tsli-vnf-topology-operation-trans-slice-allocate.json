[
    {
        "id": "6fd18371.ab4fc4",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 138.56666564941406,
        "y": 144.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            [
                "f71dc579.359058"
            ]
        ]
    },
    {
        "id": "f71dc579.359058",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 422.85235595703125,
        "y": 205.8047742843628,
        "z": "9256178d.211a68",
        "wires": [
            [
                "c0146243.1b894"
            ]
        ]
    },
    {
        "id": "c0146243.1b894",
        "type": "method",
        "name": "method tsli-vnf-topology-operation-trans-slice-allocate",
        "xml": "<method rpc='tsli-vnf-topology-operation-trans-slice-allocate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 428.9952697753906,
        "y": 290.5666961669922,
        "z": "9256178d.211a68",
        "wires": [
            [
                "8f2a1d48.4d5c1"
            ]
        ]
    },
    {
        "id": "8f2a1d48.4d5c1",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 798.8047027587891,
        "y": 315.2333526611328,
        "z": "9256178d.211a68",
        "wires": [
            [
                "aba9a33d.b56118",
                "b34cfae3.a993d8",
                "195092e3.943c55"
            ]
        ]
    },
    {
        "id": "aba9a33d.b56118",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1100.138198852539,
        "y": 586.1636505126953,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "b34cfae3.a993d8",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
        "comments": "",
        "outputs": 1,
        "x": 1121.566665649414,
        "y": 288.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            [
                "689fbe64.b269",
                "60b4e331.4ab1b4",
                "69c448c.334a3b8"
            ]
        ]
    },
    {
        "id": "689fbe64.b269",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1346.566665649414,
        "y": 146.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            [
                "fead0819.21d2e8"
            ]
        ]
    },
    {
        "id": "60b4e331.4ab1b4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1342.057632446289,
        "y": 216.1407012939453,
        "z": "9256178d.211a68",
        "wires": [
            [
                "ad666133.38332"
            ]
        ]
    },
    {
        "id": "69c448c.334a3b8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1330.566665649414,
        "y": 262.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            [
                "be5632ce.888008"
            ]
        ]
    },
    {
        "id": "fead0819.21d2e8",
        "type": "switchNode",
        "name": "switch allotted-resources_length != 0",
        "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1585.566665649414,
        "y": 143.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            [
                "79e1f5a9.abc0fc",
                "628b0c00.38066c"
            ]
        ]
    },
    {
        "id": "ad666133.38332",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1495.6290435791016,
        "y": 219.4264373779297,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "be5632ce.888008",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1499.566665649414,
        "y": 263.56666564941406,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "79e1f5a9.abc0fc",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1798.566665649414,
        "y": 167.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            [
                "affa73a3.ee8208"
            ]
        ]
    },
    {
        "id": "628b0c00.38066c",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1800.566665649414,
        "y": 107.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "13f096c3.155339",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 1100.566665649414,
        "y": 176.56666564941406,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "affa73a3.ee8208",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1783.566665649414,
        "y": 255.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            [
                "48ff46b8.d3629",
                "782b021e.0fd0fc",
                "bb7c148d.8dd4d8",
                "6e431d76.be632c",
                "29e9cbd2.ce75c4",
                "d12bfd13.8bf75"
            ]
        ]
    },
    {
        "id": "bc7152e2.d9d418",
        "type": "set",
        "name": "set network-route-A",
        "xml": "<set>\n<parameter name='network-route-A' value=\"`$tmp.aai.logical-link.link-name`\" />\n<!--<parameter name='network-route-A' value=\"`$tmp.aai.logical-link.link-id`\" />-->\n\n\n",
        "comments": "",
        "x": 2646.566665649414,
        "y": 855.5666656494141,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "c38cb4ff.6bd5e",
        "type": "set",
        "name": "set network-route-B",
        "xml": "<set>\n<parameter name='network-route-B' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
        "comments": "",
        "x": 2647.566665649414,
        "y": 910.5666656494141,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "91e3d9ca.33dbb",
        "type": "save",
        "name": "get allotted-resource from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2269.566665649414,
        "y": 306.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            [
                "5160a5be.66b9fc",
                "bc755c97.0130a8",
                "8c53c9d8.1845d8"
            ]
        ]
    },
    {
        "id": "5160a5be.66b9fc",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2485.566665649414,
        "y": 373.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            [
                "d72f2b29.b29698"
            ]
        ]
    },
    {
        "id": "bc755c97.0130a8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2486.057632446289,
        "y": 273.14064025878906,
        "z": "9256178d.211a68",
        "wires": [
            [
                "9c5f6654.ebe11"
            ]
        ]
    },
    {
        "id": "8c53c9d8.1845d8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2481.566665649414,
        "y": 322.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            [
                "3ae07ef4.fec912"
            ]
        ]
    },
    {
        "id": "9c5f6654.ebe11",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2663.629165649414,
        "y": 273.42640686035156,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "3ae07ef4.fec912",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2663.566665649414,
        "y": 322.56666564941406,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "cb7d8033.d10ca8",
        "type": "save",
        "name": "get logical-link from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
        "comments": "",
        "outputs": 1,
        "x": 2004.566665649414,
        "y": 795.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "2b85dd7e.f02352",
                "1b3631c4.5fdf36",
                "233346f1.01fed2"
            ]
        ]
    },
    {
        "id": "2b85dd7e.f02352",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2296.057632446289,
        "y": 774.1406402587891,
        "z": "9256178d.211a68",
        "wires": [
            [
                "2de91143.9e84c6"
            ]
        ]
    },
    {
        "id": "1b3631c4.5fdf36",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2284.566665649414,
        "y": 818.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "f3744c4d.35627"
            ]
        ]
    },
    {
        "id": "2de91143.9e84c6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2444.629165649414,
        "y": 774.4264068603516,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "f3744c4d.35627",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2443.566665649414,
        "y": 818.5666656494141,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "233346f1.01fed2",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2291.566665649414,
        "y": 897.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "14e4e24b.240d3e"
            ]
        ]
    },
    {
        "id": "14e4e24b.240d3e",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2430.566665649414,
        "y": 897.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "bc7152e2.d9d418",
                "c38cb4ff.6bd5e",
                "6b90e6dc.1a4938",
                "f826c02e.b2d98",
                "d4510409.d18f8",
                "f73397ef.aaf4c",
                "f8f7fd3.b9ae18",
                "eb24a93a.96e538",
                "5ea4cfd5.51261",
                "e11f1e73.f567a8",
                "9c7b5506.97a75",
                "3add3536.bf190a",
                "33633691.1ec92a"
            ]
        ]
    },
    {
        "id": "6b90e6dc.1a4938",
        "type": "save",
        "name": "get network-route-A from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-A'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-A\">",
        "comments": "",
        "outputs": 1,
        "x": 2659.566665649414,
        "y": 978.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "1d7d57d5.4b528",
                "d18df8cc.ecc03",
                "cbd2b797.9f07e8"
            ]
        ]
    },
    {
        "id": "f826c02e.b2d98",
        "type": "save",
        "name": "get network-route-B from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-B'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-B\">",
        "comments": "",
        "outputs": 1,
        "x": 2638.566665649414,
        "y": 1580.5665435791016,
        "z": "9256178d.211a68",
        "wires": [
            [
                "6cc847e1.0c4c8",
                "9bc40e0b.3e66b8",
                "4130e8fa.6dc708"
            ]
        ]
    },
    {
        "id": "1d7d57d5.4b528",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2860.566665649414,
        "y": 862.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "9adb7053.6193c"
            ]
        ]
    },
    {
        "id": "d18df8cc.ecc03",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2856.075698852539,
        "y": 911.9926910400391,
        "z": "9256178d.211a68",
        "wires": [
            [
                "bc31bdd5.70d25"
            ]
        ]
    },
    {
        "id": "cbd2b797.9f07e8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2860.075698852539,
        "y": 962.9926910400391,
        "z": "9256178d.211a68",
        "wires": [
            [
                "fa5d0125.b00d78"
            ]
        ]
    },
    {
        "id": "9adb7053.6193c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3009.138198852539,
        "y": 861.8524322509766,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "bc31bdd5.70d25",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2999.075698852539,
        "y": 911.9926910400391,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "6cc847e1.0c4c8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2861.566665649414,
        "y": 1550.5665435791016,
        "z": "9256178d.211a68",
        "wires": [
            [
                "9ebfd12f.98fe08"
            ]
        ]
    },
    {
        "id": "9bc40e0b.3e66b8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2857.075698852539,
        "y": 1599.9925689697266,
        "z": "9256178d.211a68",
        "wires": [
            [
                "e2a53907.ab9ce8"
            ]
        ]
    },
    {
        "id": "4130e8fa.6dc708",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2861.075698852539,
        "y": 1650.9925689697266,
        "z": "9256178d.211a68",
        "wires": [
            [
                "dd04bd6b.572858"
            ]
        ]
    },
    {
        "id": "9ebfd12f.98fe08",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3010.138198852539,
        "y": 1549.852310180664,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "e2a53907.ab9ce8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3000.075698852539,
        "y": 1599.9925689697266,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "eabcf699.92546",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3674.233169555664,
        "y": 1006.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "ff0400bb.e98958",
                "2638e2e.143761e",
                "1c74c2ea.33d395",
                "3078ca2b.4c72c6",
                "81305781.090ed8"
            ]
        ]
    },
    {
        "id": "89cd3be0.fed2e8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3501.566665649414,
        "y": 1007.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "eabcf699.92546"
            ]
        ]
    },
    {
        "id": "6ce22fa5.148738",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3511.057632446289,
        "y": 1050.1407012939453,
        "z": "9256178d.211a68",
        "wires": [
            [
                "6f858024.73295"
            ]
        ]
    },
    {
        "id": "316c237c.fde964",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3499.566665649414,
        "y": 1096.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "7e23353f.01fac4"
            ]
        ]
    },
    {
        "id": "6f858024.73295",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3664.6290435791016,
        "y": 1053.4264373779297,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "7e23353f.01fac4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3668.566665649414,
        "y": 1097.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "fa5d0125.b00d78",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3021.566665649414,
        "y": 964.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "670222f1.9217fc",
                "82e83a40.d9e3c"
            ]
        ]
    },
    {
        "id": "dd04bd6b.572858",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3011.566665649414,
        "y": 1652.5665435791016,
        "z": "9256178d.211a68",
        "wires": [
            [
                "b42a18a6.f5c9c",
                "ccfa8314.375c3"
            ]
        ]
    },
    {
        "id": "9231955e.3e12f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3642.233169555664,
        "y": 1842.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "834482bc.da8c9",
                "713b2333.204aec",
                "359ab66.2c0144a",
                "2cc88657.e87afa",
                "5952bd35.50a834"
            ]
        ]
    },
    {
        "id": "e0e6a71d.ebb61",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3469.566665649414,
        "y": 1843.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "9231955e.3e12f8"
            ]
        ]
    },
    {
        "id": "20818b75.1274cc",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3479.057632446289,
        "y": 1886.1407012939453,
        "z": "9256178d.211a68",
        "wires": [
            [
                "729c480a.b2455"
            ]
        ]
    },
    {
        "id": "ef5e9023.0ffb1",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3467.566665649414,
        "y": 1932.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "76e8a026.d94a18"
            ]
        ]
    },
    {
        "id": "729c480a.b2455",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3632.6290435791016,
        "y": 1889.4264373779297,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "76e8a026.d94a18",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3636.566665649414,
        "y": 1933.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "ff0400bb.e98958",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3938.566665649414,
        "y": 990.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "1b7a2eba.962ee9",
                "7716f28b.4501a4"
            ]
        ]
    },
    {
        "id": "7716f28b.4501a4",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4161.566665649414,
        "y": 945.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "22cc4911.ba723e"
            ]
        ]
    },
    {
        "id": "1b7a2eba.962ee9",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4163.566665649414,
        "y": 1009.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "b1d0addd.f89fe8"
            ]
        ]
    },
    {
        "id": "690a2492.cfb0bc",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
        "comments": "",
        "x": 4496.566665649414,
        "y": 900.5666656494141,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "b1d0addd.f89fe8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 4325.566665649414,
        "y": 1005.5666656494141,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "22cc4911.ba723e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4326.566665649414,
        "y": 942.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "86327d08.aa9fb8",
                "690a2492.cfb0bc"
            ]
        ]
    },
    {
        "id": "86327d08.aa9fb8",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
        "comments": "",
        "x": 4497.566665649414,
        "y": 1008.5666656494141,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "cde2aa0c.c7d71",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 4498.566665649414,
        "y": 957.5666656494141,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "1c74c2ea.33d395",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3940.566665649414,
        "y": 1149.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "2638e2e.143761e",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainA",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3985.566665649414,
        "y": 1059.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "5d159096.a0e35",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[?] all together\nin order to assemble the correct values for provider-id, \ntopology-id, node-id, etc.",
        "comments": "",
        "x": 3874.566665649414,
        "y": 1100.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "834482bc.da8c9",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3928.566665649414,
        "y": 1846.5667877197266,
        "z": "9256178d.211a68",
        "wires": [
            [
                "78906c54.263be4",
                "da17cabc.510218"
            ]
        ]
    },
    {
        "id": "da17cabc.510218",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4151.566665649414,
        "y": 1801.5667877197266,
        "z": "9256178d.211a68",
        "wires": [
            [
                "4c8e2849.b6ab18"
            ]
        ]
    },
    {
        "id": "78906c54.263be4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4153.566665649414,
        "y": 1865.5667877197266,
        "z": "9256178d.211a68",
        "wires": [
            [
                "dfe47f7c.d37a1"
            ]
        ]
    },
    {
        "id": "7e4bfbaf.bbef8c",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
        "comments": "",
        "x": 4486.566665649414,
        "y": 1759.5667877197266,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "dfe47f7c.d37a1",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 4312.566665649414,
        "y": 1884.5667877197266,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "4c8e2849.b6ab18",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4316.566665649414,
        "y": 1798.5667877197266,
        "z": "9256178d.211a68",
        "wires": [
            [
                "7e4bfbaf.bbef8c",
                "26579dba.f3fbba"
            ]
        ]
    },
    {
        "id": "26579dba.f3fbba",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
        "comments": "",
        "x": 4487.566665649414,
        "y": 1864.5667877197266,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "8836114.dcb937",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 4482.566665649414,
        "y": 1813.5667877197266,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "359ab66.2c0144a",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3930.566665649414,
        "y": 2005.5667877197266,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "713b2333.204aec",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainB",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3975.566665649414,
        "y": 1915.5667877197266,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "9f1fac8a.3f574",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[?] all together\nin order to assemble the correct values for provider-id, \ntopology-id, node-id, etc.",
        "comments": "",
        "x": 3864.566665649414,
        "y": 1953.5667877197266,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "d4510409.d18f8",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2860.566665649414,
        "y": 2349.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "f73397ef.aaf4c",
        "type": "set",
        "name": "set attachment_param",
        "xml": "<set>\n<parameter name='prop.connection-attachment.access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='prop.connection-attachment.access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='prop.connection-attachment.access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='prop.connection-attachment.access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='prop.connection-attachment.access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n\n<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='prop.remote.connection-attachment.access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='prop.remote.connection-attachment.access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n\n<!--<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$oof.vpn.access-provider-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-client-id' value='`$oof.vpn.access-client-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$oof.vpn.access-topology-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-node-id' value='`$oof.vpn.access-node-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />-->\n",
        "comments": "",
        "x": 2658.566665649414,
        "y": 2228.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "200f044c.0142e4",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "put proper values for src topology-id, node-id, ltp-id, etc (in domain A)\nand dst topology-id, node-id, ltp-id, etc (in domain B)",
        "comments": "",
        "x": 2624.566665649414,
        "y": 2162.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "3078ca2b.4c72c6",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 4068.566665649414,
        "y": 1197.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "2cc88657.e87afa",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 4057.566665649414,
        "y": 2070.5667877197266,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "117cb756.a2a2d9",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5112.566665649414,
        "y": 717.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "3866efd7.2177",
                "72d35790.07a0a8",
                "261ed4c9.21b32c"
            ]
        ]
    },
    {
        "id": "d72f2b29.b29698",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2665.566665649414,
        "y": 373.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            [
                "a21b0826.040f68"
            ]
        ]
    },
    {
        "id": "ba7cd715.7b1848",
        "type": "outcome",
        "name": "logical-link",
        "xml": "<outcome value='logical-link'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1595.5667877197266,
        "y": 790.5667877197266,
        "z": "9256178d.211a68",
        "wires": [
            [
                "5a4e861b.fe333"
            ]
        ]
    },
    {
        "id": "7935e728.7a6cd8",
        "type": "switchNode",
        "name": "switch allotted-resource.relationship-list not empty",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2333.566665649414,
        "y": 496.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            [
                "c03e1705.5e117",
                "443647ac.996ce8"
            ]
        ]
    },
    {
        "id": "443647ac.996ce8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2643.566665649414,
        "y": 503.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "c03e1705.5e117",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2642.566665649414,
        "y": 557.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "f30f322a.ce56f8"
            ]
        ]
    },
    {
        "id": "a7413863.fffc18",
        "type": "set",
        "name": "set the current logical-link-name",
        "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 2015.566665649414,
        "y": 740.5666656494141,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "5a4e861b.fe333",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1772.566665649414,
        "y": 783.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "a7413863.fffc18",
                "cb7d8033.d10ca8"
            ]
        ]
    },
    {
        "id": "ef7f5983.624538",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 3201.566665649414,
        "y": 969.5666656494141,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "670222f1.9217fc",
        "type": "save",
        "name": "get p-interface-src from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3244.566665649414,
        "y": 1034.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "89cd3be0.fed2e8",
                "6ce22fa5.148738",
                "316c237c.fde964"
            ]
        ]
    },
    {
        "id": "b42a18a6.f5c9c",
        "type": "save",
        "name": "get p-interface-dst from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3241.566665649414,
        "y": 1878.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "e0e6a71d.ebb61",
                "20818b75.1274cc",
                "ef5e9023.0ffb1"
            ]
        ]
    },
    {
        "id": "c8a39fd5.26e7b",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 3202.566665649414,
        "y": 1822.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "a21b0826.040f68",
        "type": "save",
        "name": "get allotted-resource relationship from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2958.566665649414,
        "y": 320.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            [
                "4aea984e.525588",
                "b162701f.2122e",
                "62d5ee30.6cb7d8"
            ]
        ]
    },
    {
        "id": "b162701f.2122e",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3232.057632446289,
        "y": 213.14064025878906,
        "z": "9256178d.211a68",
        "wires": [
            [
                "1f5782e1.732415"
            ]
        ]
    },
    {
        "id": "1f5782e1.732415",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3409.629165649414,
        "y": 213.42640686035156,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "62d5ee30.6cb7d8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3227.566665649414,
        "y": 262.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            [
                "95458c8d.84809"
            ]
        ]
    },
    {
        "id": "95458c8d.84809",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3409.566665649414,
        "y": 262.56666564941406,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "4aea984e.525588",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3231.566665649414,
        "y": 313.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            [
                "f1c741f5.f9107"
            ]
        ]
    },
    {
        "id": "f1c741f5.f9107",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3411.566665649414,
        "y": 313.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            [
                "7935e728.7a6cd8"
            ]
        ]
    },
    {
        "id": "c6653aca.b9464",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2902.566665649414,
        "y": 537.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "f3ed889.142a978"
            ]
        ]
    },
    {
        "id": "f3ed889.142a978",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3182.566665649414,
        "y": 537.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "ba7cd715.7b1848"
            ]
        ]
    },
    {
        "id": "dba40877.5798e",
        "type": "outcome",
        "name": "network-policy",
        "xml": "<outcome value='network-policy'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3387.566665649414,
        "y": 511.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            [
                "196e356.b3ce64b"
            ]
        ]
    },
    {
        "id": "196e356.b3ce64b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3564.5665435791016,
        "y": 504.56654357910156,
        "z": "9256178d.211a68",
        "wires": [
            [
                "e3e6b765.4d9878",
                "b8269eb.7fee5e"
            ]
        ]
    },
    {
        "id": "e3e6b765.4d9878",
        "type": "set",
        "name": "set the 1st network-policy-id",
        "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 3807.5665435791016,
        "y": 461.56654357910156,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "b8269eb.7fee5e",
        "type": "save",
        "name": "get network-policy from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
        "comments": "",
        "outputs": 1,
        "x": 3796.5665435791016,
        "y": 516.5665435791016,
        "z": "9256178d.211a68",
        "wires": [
            [
                "52707298.644854",
                "73e07a10.53585c",
                "cc16ab53.2ad86"
            ]
        ]
    },
    {
        "id": "cc16ab53.2ad86",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4049.566665649414,
        "y": 402.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            [
                "a488a64d.fae9f"
            ]
        ]
    },
    {
        "id": "a488a64d.fae9f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4198.138198852539,
        "y": 402.85243225097656,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "3e172036.3dfe9",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4197.075698852539,
        "y": 446.99269104003906,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "73e07a10.53585c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4038.075698852539,
        "y": 446.99269104003906,
        "z": "9256178d.211a68",
        "wires": [
            [
                "3e172036.3dfe9"
            ]
        ]
    },
    {
        "id": "52707298.644854",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4045.075698852539,
        "y": 525.9926910400391,
        "z": "9256178d.211a68",
        "wires": [
            [
                "f6f5e0ef.37ff18"
            ]
        ]
    },
    {
        "id": "f6f5e0ef.37ff18",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4184.075698852539,
        "y": 525.9926910400391,
        "z": "9256178d.211a68",
        "wires": [
            [
                "f1f16ad9.ab6c1",
                "43bfbebe.764f5"
            ]
        ]
    },
    {
        "id": "f1f16ad9.ab6c1",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 4389.566665649414,
        "y": 523.5666656494141,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "82e83a40.d9e3c",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3245.566665649414,
        "y": 704.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "bc26e44c.af9fc",
                "1d377ef3.0119d9"
            ]
        ]
    },
    {
        "id": "1d377ef3.0119d9",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3468.566665649414,
        "y": 690.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "2e20e3ac.843a84"
            ]
        ]
    },
    {
        "id": "bc26e44c.af9fc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3470.566665649414,
        "y": 723.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "26e72470.d1e50c"
            ]
        ]
    },
    {
        "id": "26e72470.d1e50c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 3613.566665649414,
        "y": 720.5666656494141,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "2e20e3ac.843a84",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3616.566665649414,
        "y": 683.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "d1ca7e66.d6d25",
                "8b886e18.72a2f"
            ]
        ]
    },
    {
        "id": "d1ca7e66.d6d25",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
        "comments": "",
        "x": 3778.566665649414,
        "y": 678.5666656494141,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "ccfa8314.375c3",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3259.566665649414,
        "y": 1541.5665435791016,
        "z": "9256178d.211a68",
        "wires": [
            [
                "fb9d05a4.702cb",
                "2e323a70.856296"
            ]
        ]
    },
    {
        "id": "2e323a70.856296",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3482.566665649414,
        "y": 1527.5665435791016,
        "z": "9256178d.211a68",
        "wires": [
            [
                "ac71b291.7c3e"
            ]
        ]
    },
    {
        "id": "fb9d05a4.702cb",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3484.566665649414,
        "y": 1560.5665435791016,
        "z": "9256178d.211a68",
        "wires": [
            [
                "96d94f89.40a6f8"
            ]
        ]
    },
    {
        "id": "96d94f89.40a6f8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 3627.566665649414,
        "y": 1557.5665435791016,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "ac71b291.7c3e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3630.566665649414,
        "y": 1520.5665435791016,
        "z": "9256178d.211a68",
        "wires": [
            [
                "eab11739.c2283",
                "dc956cf0.69a068"
            ]
        ]
    },
    {
        "id": "eab11739.c2283",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
        "comments": "",
        "x": 3824.566665649414,
        "y": 1523.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "195092e3.943c55",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 1088.566665649414,
        "y": 228.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "81305781.090ed8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3892.566665649414,
        "y": 1274.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "f76721b5.8461d"
            ]
        ]
    },
    {
        "id": "f76721b5.8461d",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4098.566665649414,
        "y": 1274.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "b969fa1c.797cc8"
            ]
        ]
    },
    {
        "id": "b969fa1c.797cc8",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4313.852310180664,
        "y": 1274.388442993164,
        "z": "9256178d.211a68",
        "wires": [
            [
                "53dab03f.fc20f"
            ]
        ]
    },
    {
        "id": "53dab03f.fc20f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4520.683853149414,
        "y": 1274.906997680664,
        "z": "9256178d.211a68",
        "wires": [
            [
                "c8f50b30.1a1a",
                "5524147a.4f670c",
                "e21dfbfb.d70ee"
            ]
        ]
    },
    {
        "id": "c8f50b30.1a1a",
        "type": "set",
        "name": "set source ttp-id",
        "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4735.683853149414,
        "y": 1236.906997680664,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "5524147a.4f670c",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4732.683853149414,
        "y": 1275.906997680664,
        "z": "9256178d.211a68",
        "wires": [
            [
                "468c57ff.e87bd"
            ]
        ]
    },
    {
        "id": "e21dfbfb.d70ee",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4688.183853149414,
        "y": 1317.906997680664,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "468c57ff.e87bd",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4913.183853149414,
        "y": 1274.906997680664,
        "z": "9256178d.211a68",
        "wires": [
            [
                "674f9840.48c03"
            ]
        ]
    },
    {
        "id": "674f9840.48c03",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5071.183853149414,
        "y": 1274.906997680664,
        "z": "9256178d.211a68",
        "wires": [
            [
                "202acc61.848adc"
            ]
        ]
    },
    {
        "id": "202acc61.848adc",
        "type": "set",
        "name": "set source tunnel tp ip",
        "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 5278.183853149414,
        "y": 1274.906997680664,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "5952bd35.50a834",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3889.566665649414,
        "y": 2143.5667877197266,
        "z": "9256178d.211a68",
        "wires": [
            [
                "6a89a776.9e1148"
            ]
        ]
    },
    {
        "id": "6a89a776.9e1148",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4095.566665649414,
        "y": 2143.5667877197266,
        "z": "9256178d.211a68",
        "wires": [
            [
                "c422bc84.9ff58"
            ]
        ]
    },
    {
        "id": "c422bc84.9ff58",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4310.852310180664,
        "y": 2143.3885650634766,
        "z": "9256178d.211a68",
        "wires": [
            [
                "35ec76d0.e92ad2"
            ]
        ]
    },
    {
        "id": "35ec76d0.e92ad2",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4517.683853149414,
        "y": 2143.9071197509766,
        "z": "9256178d.211a68",
        "wires": [
            [
                "2da8c0eb.ef8a5",
                "ed9d3d70.991958",
                "4afbd03e.c78838"
            ]
        ]
    },
    {
        "id": "2da8c0eb.ef8a5",
        "type": "set",
        "name": "set destination ttp-id",
        "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4732.683853149414,
        "y": 2105.9071197509766,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "ed9d3d70.991958",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4729.683853149414,
        "y": 2144.9071197509766,
        "z": "9256178d.211a68",
        "wires": [
            [
                "12a67fc9.3eabd"
            ]
        ]
    },
    {
        "id": "4afbd03e.c78838",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4685.183853149414,
        "y": 2186.9071197509766,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "12a67fc9.3eabd",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4910.183853149414,
        "y": 2143.9071197509766,
        "z": "9256178d.211a68",
        "wires": [
            [
                "e5260f19.3624e"
            ]
        ]
    },
    {
        "id": "e5260f19.3624e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5068.183853149414,
        "y": 2143.9071197509766,
        "z": "9256178d.211a68",
        "wires": [
            [
                "fea1a0aa.e8456"
            ]
        ]
    },
    {
        "id": "fea1a0aa.e8456",
        "type": "set",
        "name": "set destination tunnel tp ip",
        "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 5275.183853149414,
        "y": 2143.9071197509766,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "8b886e18.72a2f",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3805.566665649414,
        "y": 750.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "230a01ea.26a66e",
                "548c580d.50378",
                "266b6d86.22640a"
            ]
        ]
    },
    {
        "id": "230a01ea.26a66e",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4001.0667877197266,
        "y": 702.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "8a1e2c2.231ae5"
            ]
        ]
    },
    {
        "id": "548c580d.50378",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3993.0667877197266,
        "y": 757.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "f0a74837.6bf648"
            ]
        ]
    },
    {
        "id": "266b6d86.22640a",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3998.0667877197266,
        "y": 814.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "c89ea643.5fb658"
            ]
        ]
    },
    {
        "id": "c89ea643.5fb658",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4150.066787719727,
        "y": 815.5666656494141,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "f0a74837.6bf648",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4161.066787719727,
        "y": 760.5666656494141,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "8a1e2c2.231ae5",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4145.449111938477,
        "y": 700.2223358154297,
        "z": "9256178d.211a68",
        "wires": [
            [
                "5c25cba9.41b2b4"
            ]
        ]
    },
    {
        "id": "f1310713.19e1c",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4727.566665649414,
        "y": 718.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "cbcc3226.5de568"
            ]
        ]
    },
    {
        "id": "cbcc3226.5de568",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4904.566665649414,
        "y": 710.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "9672ea99.0655d",
                "117cb756.a2a2d9"
            ]
        ]
    },
    {
        "id": "5c25cba9.41b2b4",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4329.566665649414,
        "y": 714.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "c4bf834f.523618"
            ]
        ]
    },
    {
        "id": "c4bf834f.523618",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4524.566665649414,
        "y": 714.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "f1310713.19e1c",
                "88191017.73b938"
            ]
        ]
    },
    {
        "id": "9672ea99.0655d",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainA id",
        "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5142.566665649414,
        "y": 665.5666656494141,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "3866efd7.2177",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5322.566665649414,
        "y": 708.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "fe38d110.6015b8"
            ]
        ]
    },
    {
        "id": "72d35790.07a0a8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5314.566665649414,
        "y": 763.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "7783383e.51854"
            ]
        ]
    },
    {
        "id": "261ed4c9.21b32c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5319.566665649414,
        "y": 820.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "fa12b901.242fd8"
            ]
        ]
    },
    {
        "id": "fa12b901.242fd8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5471.566665649414,
        "y": 821.5666656494141,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "7783383e.51854",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5482.566665649414,
        "y": 766.5666656494141,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "fe38d110.6015b8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5466.948989868164,
        "y": 706.2223358154297,
        "z": "9256178d.211a68",
        "wires": [
            [
                "60bc3d89.a08324"
            ]
        ]
    },
    {
        "id": "60bc3d89.a08324",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5681.566665649414,
        "y": 702.5666656494141,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "dc956cf0.69a068",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3846.566665649414,
        "y": 1591.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "bf4fb85e.9c3948",
                "6a7367e2.bb2c9",
                "ddd9af1d.15854"
            ]
        ]
    },
    {
        "id": "bf4fb85e.9c3948",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4042.0667877197266,
        "y": 1543.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "350a8536.22a84a"
            ]
        ]
    },
    {
        "id": "6a7367e2.bb2c9",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4034.0667877197266,
        "y": 1598.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "145991d9.a47ef6"
            ]
        ]
    },
    {
        "id": "ddd9af1d.15854",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4039.0667877197266,
        "y": 1655.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "820f34bd.964968"
            ]
        ]
    },
    {
        "id": "820f34bd.964968",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4191.066787719727,
        "y": 1656.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "145991d9.a47ef6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4202.066787719727,
        "y": 1601.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "350a8536.22a84a",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4186.449111938477,
        "y": 1541.2223358154297,
        "z": "9256178d.211a68",
        "wires": [
            [
                "6f232f80.17fde"
            ]
        ]
    },
    {
        "id": "df02e92.6642a98",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4768.566665649414,
        "y": 1559.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "360786c5.7cab22"
            ]
        ]
    },
    {
        "id": "360786c5.7cab22",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4945.566665649414,
        "y": 1551.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "41cd01ea.c63f78",
                "aaeef3c0.eb5678"
            ]
        ]
    },
    {
        "id": "6f232f80.17fde",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4370.566665649414,
        "y": 1555.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "d99ab523.6da018"
            ]
        ]
    },
    {
        "id": "d99ab523.6da018",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4565.566665649414,
        "y": 1555.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "df02e92.6642a98",
                "c50f0505.bf6c28"
            ]
        ]
    },
    {
        "id": "aaeef3c0.eb5678",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5153.566665649414,
        "y": 1558.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "3618e547.e0a40a",
                "eed6fd7.fbf15",
                "3313cec2.2b8cca"
            ]
        ]
    },
    {
        "id": "41cd01ea.c63f78",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainB id",
        "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5183.566665649414,
        "y": 1506.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "3618e547.e0a40a",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5363.566665649414,
        "y": 1549.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "b22ebd12.40a81"
            ]
        ]
    },
    {
        "id": "eed6fd7.fbf15",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5355.566665649414,
        "y": 1604.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "7d8acc36.091ccc"
            ]
        ]
    },
    {
        "id": "3313cec2.2b8cca",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5360.566665649414,
        "y": 1661.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "112ac18e.80256e"
            ]
        ]
    },
    {
        "id": "112ac18e.80256e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5512.566665649414,
        "y": 1662.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "7d8acc36.091ccc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5523.566665649414,
        "y": 1607.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "b22ebd12.40a81",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5507.948989868164,
        "y": 1547.2223358154297,
        "z": "9256178d.211a68",
        "wires": [
            [
                "1c9d9642.f84cba"
            ]
        ]
    },
    {
        "id": "1c9d9642.f84cba",
        "type": "set",
        "name": "set controller domainB data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5722.566665649414,
        "y": 1543.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "f30f322a.ce56f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2806.566665649414,
        "y": 483.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            [
                "c6653aca.b9464",
                "b73a30ff.3793c"
            ]
        ]
    },
    {
        "id": "b73a30ff.3793c",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3087.566665649414,
        "y": 439.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            [
                "be2994c5.6111e8"
            ]
        ]
    },
    {
        "id": "be2994c5.6111e8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3349.566665649414,
        "y": 439.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            [
                "dba40877.5798e"
            ]
        ]
    },
    {
        "id": "88191017.73b938",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 4730.566665649414,
        "y": 792.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "65c2e1c9.1b56d8"
            ]
        ]
    },
    {
        "id": "65c2e1c9.1b56d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4907.566665649414,
        "y": 784.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            [
                "e785d4f0.4913e8"
            ]
        ]
    },
    {
        "id": "e785d4f0.4913e8",
        "type": "set",
        "name": "set domainA ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5142.566665649414,
        "y": 908.5666656494141,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "5f8b1fbc.6dcf18",
        "type": "set",
        "name": "set domainB ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5182.566665649414,
        "y": 1748.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "1932705.17f659",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4947.566665649414,
        "y": 1624.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "5f8b1fbc.6dcf18"
            ]
        ]
    },
    {
        "id": "c50f0505.bf6c28",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 4770.566665649414,
        "y": 1632.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "1932705.17f659"
            ]
        ]
    },
    {
        "id": "43bfbebe.764f5",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 4388.566665649414,
        "y": 569.5666656494141,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "3a026a1.c8b1f96",
        "type": "execute",
        "name": "execute UUID generator for ethernet-service-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2744.566665649414,
        "y": 703.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "5ea4cfd5.51261",
        "type": "execute",
        "name": "execute UUID generator for otn-tunnel-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2725.566665649414,
        "y": 753.5666656494141,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "48ff46b8.d3629",
        "type": "for",
        "name": "for each allotted-resource",
        "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1986.566665649414,
        "y": 287.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            [
                "84ff5346.d202e8",
                "91e3d9ca.33dbb"
            ]
        ]
    },
    {
        "id": "84ff5346.d202e8",
        "type": "set",
        "name": "set the current allotted-resource-id",
        "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
        "comments": "",
        "x": 2266.566665649414,
        "y": 225.56666564941406,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "f8f7fd3.b9ae18",
        "type": "set",
        "name": "set query_param",
        "xml": "<set>\n<parameter name='prop.ethsrvType' value='`$network-route-A`' />\n\n",
        "comments": "",
        "x": 2639.566665649414,
        "y": 2281.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "eb24a93a.96e538",
        "type": "set",
        "name": "unset parameters",
        "xml": "<set>\n<parameter name='domain-A.tunnel-tp-id' value='' />\n<parameter name='domain-A.node-id' value='' />\n<parameter name='domain-A.network-id' value=\"\" />\n<parameter name='domain-A.provider-id' value=\"\" />\n<parameter name='domain-A.client-id' value=\"\" />\n<parameter name='domain-A.te-topo-id' value=\"\" />\n<parameter name='domain-A.network-type' value=\"\" />\n<parameter name='domain-A.ltpId' value=\"\" />\n<parameter name='tmp.domain-A.network-id' value=\"\" />\n<parameter name='tmp.domain-A.ttp-id' value=\"\" />\n<parameter name='network-route-A' value=\"\" />\n<!--<parameter name='domain-A.' value=\"\" />-->\n\n<parameter name='request-id' value='' />\n<parameter name='otn-source-node' value='' />\n<parameter name='otn-dest-node' value='' />\n<parameter name='bw-odu' value=\"\" />\n<parameter name='src-ttp-id' value='' />\n<parameter name='dst-ttp-id' value='' />\n\n<parameter name='domain-B.tunnel-tp-id' value='' />\n<parameter name='domain-B.node-id' value='' />\n<parameter name='domain-B.network-id' value=\"\" />\n<parameter name='domain-B.provider-id' value=\"\" />\n<parameter name='domain-B.client-id' value=\"\" />\n<parameter name='domain-B.te-topo-id' value=\"\" />\n<parameter name='domain-B.network-type' value=\"\" />\n<parameter name='domain-B.ltpId' value=\"\" />\n<parameter name='tmp.domain-B.network-id' value=\"\" />\n<parameter name='tmp.domain-B.ttp-id' value=\"\" />\n<parameter name='network-route-B' value=\"\" />\n<!--<parameter name='domain-B.' value=\"\" />-->\n\n\n\n\n\n",
        "comments": "",
        "x": 2625.566665649414,
        "y": 3961.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "e11f1e73.f567a8",
        "type": "set",
        "name": "set new ethernet-service-name",
        "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
        "comments": "",
        "x": 2682.566665649414,
        "y": 798.5666656494141,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "9c7b5506.97a75",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='otnidx' start='0' end='`$tmp.otninfo_length`' >",
        "comments": "",
        "outputs": 1,
        "x": 2670.566665649414,
        "y": 2528.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "9ffd0093.8105f8"
            ]
        ]
    },
    {
        "id": "85036bc9.25f0a",
        "type": "save",
        "name": "save vpn-binding otnIdx resource (aka. OTN) in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' >\n<parameter name='vpn-id' value='`$prop.vpn-binding-otnidx-uuid`' />\n<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />\n<!--<parameter name='customer-vpn-id' value='`($idx + 1) * 10`' />-->\n<parameter name='customer-vpn-id' value='`($maxtpn + $gfp)`' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<parameter name='access-provider-id' value='`$tmp.access-provider-id`' />\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<parameter name='access-client-id' value='`$tmp.access-client-id`' />\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<parameter name='access-topology-id' value='`$tmp.access-topology-id`' />\n<!--<parameter name='src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<parameter name='src-access-node-id' value='`$tmp.domainG-src-access-node-id`' />\n<parameter name='src-access-ltp-id' value='`$tmp.otninfo[$otnidx].srcPort.src-tunnel-tp-id`' />\n<!--<parameter name='dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />-->\n<parameter name='dst-access-node-id' value='`$tmp.domainG-dst-access-node-id`' />\n<parameter name='dst-access-ltp-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-tunnel-tp-id`' />\n<parameter name='route-distinguisher' value='`$gfp`' />\n<parameter name='operational-status' value='Created' />\n<!--<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />-->\n\n\n<parameter name='vpn-region' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.url`' />\n<parameter name='vpn-description' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.user`' />\n<parameter name='vpn-platform' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.password`' />\n\n<!-- The following line is in lieu of vpn-binding.slice-id (new attribute in latest AAI) -->\n<parameter name='ops-note' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3799.566665649414,
        "y": 2950.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "bd2b4caa.40f07"
            ]
        ]
    },
    {
        "id": "4d0fe394.a0f5c4",
        "type": "save",
        "name": "save connectivity-A relationship to vpn-binding-A, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4372.066665649414,
        "y": 3054.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "bd2b4caa.40f07",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4105.566665649414,
        "y": 2949.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "28d033b7.b1a7b4"
            ]
        ]
    },
    {
        "id": "28d033b7.b1a7b4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4315.066665649414,
        "y": 2949.820571899414,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "da384da9.50fad",
        "type": "execute",
        "name": "execute UUID generator for vpn-binding $otnidx",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.vpn-binding-otnidx-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3832.566665649414,
        "y": 2429.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "458c9236.fc09c4",
        "type": "switchNode",
        "name": "switch otnidx == 0",
        "xml": "<switch test='`$otnidx == 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3708.566665649414,
        "y": 3067.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "20b3c9fb.2f7a1e",
                "2b2bcdf.9a75432"
            ]
        ]
    },
    {
        "id": "20b3c9fb.2f7a1e",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3891.566665649414,
        "y": 3067.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "85853f45.184448"
            ]
        ]
    },
    {
        "id": "2b2bcdf.9a75432",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3716.566665649414,
        "y": 3214.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "69e93af2.71c7f4"
            ]
        ]
    },
    {
        "id": "dec16147.315f48",
        "type": "switchNode",
        "name": "switch otnidx == last",
        "xml": "<switch test='`$otnidx == $tmp.otninfo_length - 1`'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4057.566665649414,
        "y": 3295.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "6e1ea31a.8dc254",
                "3327fa99.59aede"
            ]
        ]
    },
    {
        "id": "6e1ea31a.8dc254",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4242.566665649414,
        "y": 3296.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "35e519f9.462626"
            ]
        ]
    },
    {
        "id": "3327fa99.59aede",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4261.566665649414,
        "y": 3562.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "234eca18.b570de"
            ]
        ]
    },
    {
        "id": "3a9f4476.809074",
        "type": "save",
        "name": "save connectivity-B relationship to vpn-binding-B, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4672.566665649414,
        "y": 3297.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "4efd8bac.69de6c",
        "type": "execute",
        "name": "execute UUID generator for connectivity domain otnidx",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-otnidx-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4746.566665649414,
        "y": 3595.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "401e45e3.6933bc",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-otnidx-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-otnidx-uuid`' />\n<!--<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />-->\n<parameter name='operational-status' value='Created' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<!--<parameter name='access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<!--<parameter name='access-ltp-id' value='``' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->\n\n<!--<parameter name='bandwidth-profile-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='dummy' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<!--<parameter name='cbs' value='`$prop.sotn.cbs`' />-->\n<!--<parameter name='ebs' value='`$prop.sotn.ebs`' />-->\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 4682.566665649414,
        "y": 3646.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "9a88afee.ea2358",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-otnidx-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-otnidx-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 4811.566665649414,
        "y": 3696.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "303e66ea.a0468a",
        "type": "comment",
        "name": "connectivity has not been created for middle domains, so we have to create one",
        "info": "",
        "comments": "",
        "x": 4821.566665649414,
        "y": 3539.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "bd97ab87.4b8898",
        "type": "save",
        "name": "save connectivity-otnidx relationship to vpn-binding-otnidx, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-otnidx-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-otnidx-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4779.566665649414,
        "y": 3755.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "234eca18.b570de",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4418.566665649414,
        "y": 3563.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "4efd8bac.69de6c",
                "401e45e3.6933bc",
                "9a88afee.ea2358",
                "bd97ab87.4b8898",
                "2cb520a2.c67d5"
            ]
        ]
    },
    {
        "id": "9ffd0093.8105f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2939.566665649414,
        "y": 2528.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "da384da9.50fad",
                "85036bc9.25f0a",
                "458c9236.fc09c4",
                "afb7d963.d1d2e",
                "b5c03e87.4a3d2",
                "5fbd4527.08216c",
                "580438cc.a39858"
            ]
        ]
    },
    {
        "id": "7371bc78.68f23c",
        "type": "set",
        "name": "set attachment_param domain A",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n\n\n",
        "comments": "",
        "x": 4296.566665649414,
        "y": 3111.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "9da935b4.011d78",
        "type": "execute",
        "name": "execute RestApiCallNode domainA UNI Coloring",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-coloring-uni-port.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-network:networks/network=' + $tmp.domainA.eth-network-id + '/node=' + $tmp.src.pnf-name + '/ietf-network-topology:termination-point=' + $tmp.src.ltpId + '/ietf-te-topology:te' `\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4349.566665649414,
        "y": 3155.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "a38d117f.617d1",
                "64ad5e9f.cde688"
            ]
        ]
    },
    {
        "id": "64ad5e9f.cde688",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4620.566665649414,
        "y": 3140.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "ae1e714f.21e89"
            ]
        ]
    },
    {
        "id": "a38d117f.617d1",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4618.566879272461,
        "y": 3198.566575050354,
        "z": "9256178d.211a68",
        "wires": [
            [
                "cc46ab1d.b8d358"
            ]
        ]
    },
    {
        "id": "ae1e714f.21e89",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing UNI Coloring for domain A\" />\n",
        "comments": "",
        "x": 4760.566913604736,
        "y": 3140.5666666030884,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "cc46ab1d.b8d358",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4766.593925476074,
        "y": 3189.31206035614,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "85853f45.184448",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4032.566665649414,
        "y": 3057.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "4d0fe394.a0f5c4",
                "9da935b4.011d78",
                "7371bc78.68f23c"
            ]
        ]
    },
    {
        "id": "35e519f9.462626",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4376.566665649414,
        "y": 3297.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "3a9f4476.809074",
                "6085ae42.a24518",
                "92ddf8d8.c0a7e"
            ]
        ]
    },
    {
        "id": "92ddf8d8.c0a7e",
        "type": "set",
        "name": "set attachment_param domain B",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n\n",
        "comments": "",
        "x": 4596.566665649414,
        "y": 3341.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "6085ae42.a24518",
        "type": "execute",
        "name": "execute RestApiCallNode domainB UNI Coloring",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-coloring-uni-port.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-network:networks/network=' + $tmp.domainB.eth-network-id + '/node=' + $tmp.dst.pnf-name + '/ietf-network-topology:termination-point=' + $tmp.dst.ltpId + '/ietf-te-topology:te' `\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4647.566665649414,
        "y": 3385.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "e3b13fd7.7163e8",
                "22b24822.5449d"
            ]
        ]
    },
    {
        "id": "22b24822.5449d",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4910.566665649414,
        "y": 3365.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "f1d0e9c2.a4fe58"
            ]
        ]
    },
    {
        "id": "e3b13fd7.7163e8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4911.566879272461,
        "y": 3416.566575050354,
        "z": "9256178d.211a68",
        "wires": [
            [
                "117ef1f.6c1660e"
            ]
        ]
    },
    {
        "id": "f1d0e9c2.a4fe58",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing UNI coloring for domain B\" />\n",
        "comments": "",
        "x": 5050.566913604736,
        "y": 3365.5666666030884,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "117ef1f.6c1660e",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5056.593925476074,
        "y": 3414.31206035614,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "2cb520a2.c67d5",
        "type": "set",
        "name": "set attachment_param domain otnidx",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n",
        "comments": "",
        "x": 4693.566665649414,
        "y": 3815.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "bb7c148d.8dd4d8",
        "type": "save",
        "name": "get all-vpn-bindings from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v21/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2012.566665649414,
        "y": 4162.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "bfb40bbb.94779",
                "3cbbde56.b4a31a",
                "1a8f636f.24e13d"
            ]
        ]
    },
    {
        "id": "bfb40bbb.94779",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2200.566665649414,
        "y": 4175.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "eaca1bd7.371c7"
            ]
        ]
    },
    {
        "id": "3cbbde56.b4a31a",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2201.057632446289,
        "y": 4221.140701293945,
        "z": "9256178d.211a68",
        "wires": [
            [
                "38f81285.85b9a6"
            ]
        ]
    },
    {
        "id": "1a8f636f.24e13d",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2198.566665649414,
        "y": 4264.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "f0bf5dd6.fd17a"
            ]
        ]
    },
    {
        "id": "eaca1bd7.371c7",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2373.566665649414,
        "y": 4173.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "8ebcdd79.0a28b"
            ]
        ]
    },
    {
        "id": "38f81285.85b9a6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2363.6290435791016,
        "y": 4221.42643737793,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "f0bf5dd6.fd17a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2365.566665649414,
        "y": 4263.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "782b021e.0fd0fc",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='dmnsidx' start='0' end='`$otn-tunnel-slice_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2001.566665649414,
        "y": 4353.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "80466868.45553"
            ]
        ]
    },
    {
        "id": "6f32f968.2f76b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2811.566665649414,
        "y": 4353.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "5534fc3.85d0104"
            ]
        ]
    },
    {
        "id": "be092ed.4a93b5",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='stunidx' start='0' end='`$otn-tunnel-slice[$dmnsidx].list_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2583.566665649414,
        "y": 4353.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "6f32f968.2f76b8"
            ]
        ]
    },
    {
        "id": "114fcf9e.f212a8",
        "type": "set",
        "name": "set providerValue",
        "xml": "<set>\n<parameter name='providerValue' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].access-provider-id`' />\n<parameter name='found' value='false' />\n\n\n",
        "comments": "",
        "x": 3703.566665649414,
        "y": 4120.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "aaeb5226.81f7d",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='testingvalue' value='$tmp.otninfo_length -1' />\n",
        "comments": "",
        "x": 4005.566665649414,
        "y": 3246.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "69e93af2.71c7f4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3840.566665649414,
        "y": 3221.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "aaeb5226.81f7d",
                "dec16147.315f48"
            ]
        ]
    },
    {
        "id": "d12bfd13.8bf75",
        "type": "set",
        "name": "set tmp.arr",
        "xml": "<set>\n<parameter name='tmp.arr' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='tmp.arr_length' value='0' />\n\n<parameter name='otn-tunnel-slice' value='' />\n<parameter name='otn-tunnel-slice_length' value='0' />\n\n<!--<parameter name='tmp.slicevpns' value='' />-->\n<!--<parameter name='tmp.slicevpns_length' value='0' />-->\n\n<!--<parameter name='tmp.slicevpnuuids' value='' />-->\n<!--<parameter name='tmp.slicevpnuuids.' value='' />-->\n\n\n",
        "comments": "",
        "x": 1960.566665649414,
        "y": 237.56666564941406,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "8ebcdd79.0a28b",
        "type": "for",
        "name": "for vpnidx in all-vpn-bindings",
        "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2602.566665649414,
        "y": 4174.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "3567bff3.8ebcd8"
            ]
        ]
    },
    {
        "id": "3567bff3.8ebcd8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2817.566665649414,
        "y": 4175.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "473c1519.d01eb4"
            ]
        ]
    },
    {
        "id": "809d3147.ec0f3",
        "type": "for",
        "name": "for arridx in tmp.arr",
        "xml": "<for index='arridx' start='0' end='`$tmp.arr_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4270.566665649414,
        "y": 4095.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "aa9ab401.5fa778"
            ]
        ]
    },
    {
        "id": "5596317e.9b3628",
        "type": "switchNode",
        "name": "switch $tmp.arr_length != 0",
        "xml": "<switch test='`$tmp.arr_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3736.566665649414,
        "y": 4175.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "a957484e.5a6ff",
                "94a2b6d3.766e58"
            ]
        ]
    },
    {
        "id": "a957484e.5a6ff",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3932.566665649414,
        "y": 4145.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "b3c10703.b98f2"
            ]
        ]
    },
    {
        "id": "94a2b6d3.766e58",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3933.566665649414,
        "y": 4216.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "60df48e3.d4564"
            ]
        ]
    },
    {
        "id": "b3c10703.b98f2",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4083.566665649414,
        "y": 4143.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "809d3147.ec0f3",
                "5065f5c6.173234"
            ]
        ]
    },
    {
        "id": "aa9ab401.5fa778",
        "type": "switchNode",
        "name": "switch tmp.arr[$arridx] == $providerValue",
        "xml": "<switch test='`$tmp.arr[$arridx] == $providerValue`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4561.566665649414,
        "y": 4095.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "6d737171.e1452",
                "b5a839dc.7835"
            ]
        ]
    },
    {
        "id": "6d737171.e1452",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4836.566665649414,
        "y": 4064.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "397594e.7aa86ec"
            ]
        ]
    },
    {
        "id": "b5a839dc.7835",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4837.566665649414,
        "y": 4135.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "49c3abd.61fa054"
            ]
        ]
    },
    {
        "id": "397594e.7aa86ec",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4987.566665649414,
        "y": 4062.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "412bffc9.1c0e28",
                "1704d5ec.8e1b6a",
                "12f4e6d8.82a019",
                "d12115f5.e77c3",
                "eb231f11.de562"
            ]
        ]
    },
    {
        "id": "412bffc9.1c0e28",
        "type": "set",
        "name": "set found to true",
        "xml": "<set>\n<parameter name='found' value='true' />\n\n\n",
        "comments": "",
        "x": 5175.566665649414,
        "y": 4022.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "1704d5ec.8e1b6a",
        "type": "save",
        "name": "store $arridx somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='`$arridx`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5247.566665649414,
        "y": 4067.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "eb231f11.de562",
        "type": "set",
        "name": "set twoD arr",
        "xml": "<set>\n\n<!--<parameter name='`tmp.arr[$arridx + 1]`' value='`$providerValue`' />-->\n<!--<parameter name='tmp.arr_length' value='`$tmp.arr_length + 1`' />-->\n\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<!--<parameter name='otn-tunnel-slice_length' value='`$arridx + 2`' />-->\n<parameter name='`otn-tunnel-slice[$arridx].list_length`' value='`$sizeOfSliceList + 1`' />\n\n",
        "comments": "",
        "x": 5162.566665649414,
        "y": 4194.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "d12115f5.e77c3",
        "type": "set",
        "name": "set sizeOfSliceList",
        "xml": "<set>\n<parameter name='sizeOfSliceList' value='`$otn-tunnel-slice[$arridx].list_length`' />\n\n\n",
        "comments": "",
        "x": 5183.566665649414,
        "y": 4130.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "60df48e3.d4564",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4085.566665649414,
        "y": 4216.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "974dbcc3.cf34c8",
                "ca9f0d65.bbf04"
            ]
        ]
    },
    {
        "id": "974dbcc3.cf34c8",
        "type": "save",
        "name": "store $arridx somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='0' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4340.566665649414,
        "y": 4209.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "ca9f0d65.bbf04",
        "type": "set",
        "name": "set twoD array",
        "xml": "<set>\n<parameter name='tmp.arr[0]' value='`$providerValue`' />\n<parameter name='tmp.arr_length' value='1' />\n\n<parameter name='`otn-tunnel-slice[0].list[0].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[0].list[0].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[0].list[0].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[0].list[0].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[0].list[0].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<parameter name='otn-tunnel-slice_length' value='1' />\n<parameter name='otn-tunnel-slice[0].list_length' value='1' />\n\n",
        "comments": "",
        "x": 4268.566665649414,
        "y": 4256.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "5065f5c6.173234",
        "type": "switchNode",
        "name": "switch found?",
        "xml": "<switch test='`$found`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4261.566665649414,
        "y": 4140.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "f595c5ce.d138f8",
                "a27215c.554f2e8"
            ]
        ]
    },
    {
        "id": "f595c5ce.d138f8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4421.566665649414,
        "y": 4132.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "3c70617c.e2885e"
            ]
        ]
    },
    {
        "id": "a27215c.554f2e8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4419.566665649414,
        "y": 4169.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "27b0e714.f2ecf8"
            ]
        ]
    },
    {
        "id": "3c70617c.e2885e",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4546.566665649414,
        "y": 4132.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "a0581441.562ff8",
        "type": "save",
        "name": "store $arridx+1 somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='`$arridx + 1`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4853.566665649414,
        "y": 4190.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "27b0e714.f2ecf8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4579.566665649414,
        "y": 4177.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "a0581441.562ff8",
                "a72a86e5.09979"
            ]
        ]
    },
    {
        "id": "a72a86e5.09979",
        "type": "set",
        "name": "set twoD array",
        "xml": "<set>\n<parameter name='`tmp.arr[$arridx + 1]`' value='`$providerValue`' />\n<parameter name='tmp.arr_length' value='`$tmp.arr_length + 1`' />\n\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<parameter name='otn-tunnel-slice_length' value='`$arridx + 2`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list_length`' value='1' />\n\n",
        "comments": "",
        "x": 4770.566665649414,
        "y": 4236.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "49c3abd.61fa054",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4970.566665649414,
        "y": 4134.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "12f4e6d8.82a019",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 5141.566665649414,
        "y": 4261.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "afb7d963.d1d2e",
        "type": "switchNode",
        "name": "switch dstPort == NULL",
        "xml": "<switch test=\"`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id == ''`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3546.566665649414,
        "y": 2519.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "2a68f8d8.e1dda",
                "4b46d94e.68d61"
            ]
        ]
    },
    {
        "id": "2a68f8d8.e1dda",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3912.566665649414,
        "y": 2480.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "9cc98ff4.caf3c"
            ]
        ]
    },
    {
        "id": "4b46d94e.68d61",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3913.566665649414,
        "y": 2526.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "a85d4c51.ca6c38"
            ]
        ]
    },
    {
        "id": "9cc98ff4.caf3c",
        "type": "set",
        "name": "set access-provider-id and client-id",
        "xml": "<set>\n<parameter name='tmp.access-provider-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-provider-id`' />\n<parameter name='tmp.access-client-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-client-id`' />\n<parameter name='tmp.access-topology-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-topology-id`' />\n<parameter name='tmp.srcdstpnf-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n",
        "comments": "",
        "x": 4126.566665649414,
        "y": 2479.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "a85d4c51.ca6c38",
        "type": "set",
        "name": "set access-provider-id and client-id",
        "xml": "<set>\n<parameter name='tmp.access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />\n<parameter name='tmp.access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />\n<parameter name='tmp.access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />\n<parameter name='tmp.srcdstpnf-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />\n",
        "comments": "",
        "x": 4124.566665649414,
        "y": 2524.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "5534fc3.85d0104",
        "type": "set",
        "name": "set attachment_param sliceG",
        "xml": "<set>\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].request-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].request-id`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].otn-source-node`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].otn-source-node`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].otn-dest-node`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].otn-dest-node`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].bw-odu`' value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].bw-odu`\" />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].src-ttp-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].src-ttp-id`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].dst-ttp-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].dst-ttp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='otn-tunnel-sliceG-list_length' value='`$stunidx + 1`' />\n\n\n<parameter name=\"tmp.domainG.restapiUrl\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainurl`\" />\n<parameter name=\"tmp.domainG.restapiUser\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainuser`\" />\n<parameter name=\"tmp.domainG.restapiPassword\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainpassword`\" />",
        "comments": "",
        "x": 3064.566665649414,
        "y": 4351.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "42aa6078.f937c",
        "type": "execute",
        "name": "execute RestApiCallNode sliceG creation domainG",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.transport-sliceG-list-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$tmp.domainG.restapiUrl + '/restconf/operations/ietf-optical-slice:create-optical-slice'`\" />\n<parameter name=\"restapiUser\" value=\"`$tmp.domainG.restapiUser`\" />\n<parameter name=\"restapiPassword\" value=\"`tmp.domainG.restapiPassword`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2649.566665649414,
        "y": 4459.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "51d7fa89.689264",
                "5ac90edf.1e939"
            ]
        ]
    },
    {
        "id": "5ac90edf.1e939",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2932.566665649414,
        "y": 4439.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "86bbe7aa.1bf2"
            ]
        ]
    },
    {
        "id": "51d7fa89.689264",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2933.566879272461,
        "y": 4490.566575050354,
        "z": "9256178d.211a68",
        "wires": [
            [
                "f017812e.0e0548"
            ]
        ]
    },
    {
        "id": "86bbe7aa.1bf2",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing slice creation api for domain A\" />\n",
        "comments": "",
        "x": 3072.5669136047363,
        "y": 4439.566666603088,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "f017812e.0e0548",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3078.593925476074,
        "y": 4488.31206035614,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "b5c03e87.4a3d2",
        "type": "set",
        "name": "set srcdstpnf-name",
        "xml": "<set>\n<parameter name='tmp.srcdstpnf-name' value=\"`'networkId-providerId-' + \n                                             $tmp.access-provider-id + '-clientId-' +\n                                             $tmp.access-client-id + '-topologyId-' + \n                                             $tmp.access-topology-id + '-nodeId-' + \n                                             $tmp.srcdstpnf-id`\" />\n\n",
        "comments": "",
        "x": 3722.566665649414,
        "y": 2593.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "5fbd4527.08216c",
        "type": "get-resource",
        "name": "get-resource tmp.srcdstpnf-name",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.srcdstpnf-name\"\n        pfx='tmp.aai.srcdst-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3766.566665649414,
        "y": 2641.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "1efdee28.f91a52",
                "64406c95.e8d00c",
                "d9f7dd8f.9ba66"
            ]
        ]
    },
    {
        "id": "1efdee28.f91a52",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3979.066665649414,
        "y": 2588.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "2ed8b0a7.4efac8"
            ]
        ]
    },
    {
        "id": "64406c95.e8d00c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3991.066665649414,
        "y": 2638.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "51fd5363.368514"
            ]
        ]
    },
    {
        "id": "d9f7dd8f.9ba66",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3982.066665649414,
        "y": 2693.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "e38f0d80.1c1bb"
            ]
        ]
    },
    {
        "id": "e38f0d80.1c1bb",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4127.066665649414,
        "y": 2692.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "51fd5363.368514",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4138.066665649414,
        "y": 2635.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "2ed8b0a7.4efac8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4104.449111938477,
        "y": 2582.2223358154297,
        "z": "9256178d.211a68",
        "wires": [
            [
                "6b9e1826.ee6da8"
            ]
        ]
    },
    {
        "id": "138f1f2d.7207a9",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4663.566665649414,
        "y": 2600.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "d1f83019.79c9b"
            ]
        ]
    },
    {
        "id": "d1f83019.79c9b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4840.566665649414,
        "y": 2592.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "7ed11e.38da0ee4",
                "162cc00f.d817a8"
            ]
        ]
    },
    {
        "id": "6b9e1826.ee6da8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.srcdst-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4265.566665649414,
        "y": 2596.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "86ec64e1.e780c"
            ]
        ]
    },
    {
        "id": "86ec64e1.e780c",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.srcdst-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4460.566665649414,
        "y": 2596.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "138f1f2d.7207a9"
            ]
        ]
    },
    {
        "id": "162cc00f.d817a8",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainG.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainG.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5048.566665649414,
        "y": 2599.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "e0385378.198358",
                "503d9090.68b5e8",
                "17aba33b.4460b5"
            ]
        ]
    },
    {
        "id": "7ed11e.38da0ee4",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainG id",
        "xml": "<set>\n<parameter name='tmp.domainG.esr-thirdparty-id' value=\"`$tmp.aai.srcdst-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5078.566665649414,
        "y": 2547.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "e0385378.198358",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5258.566665649414,
        "y": 2590.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "2933c6cc.a68082"
            ]
        ]
    },
    {
        "id": "503d9090.68b5e8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5250.566665649414,
        "y": 2645.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "d5a44647.f1fdd8"
            ]
        ]
    },
    {
        "id": "17aba33b.4460b5",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5255.566665649414,
        "y": 2702.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "8e808d45.23fde8"
            ]
        ]
    },
    {
        "id": "8e808d45.23fde8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5407.566665649414,
        "y": 2703.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "d5a44647.f1fdd8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5418.566665649414,
        "y": 2648.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "2933c6cc.a68082",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5402.948989868164,
        "y": 2588.2223358154297,
        "z": "9256178d.211a68",
        "wires": [
            [
                "ee8d6c6a.1b65b8"
            ]
        ]
    },
    {
        "id": "ee8d6c6a.1b65b8",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.url' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.user' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.password' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5617.566665649414,
        "y": 2584.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "80466868.45553",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2233.566665649414,
        "y": 4351.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "be092ed.4a93b5",
                "42aa6078.f937c"
            ]
        ]
    },
    {
        "id": "580438cc.a39858",
        "type": "switchNode",
        "name": "switch dmnsidx == 0 (domainA)",
        "xml": "<switch test='`$otnidx == 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3736.566665649414,
        "y": 2810.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "253b733.7c34c8c",
                "ac577a23.1df5c8"
            ]
        ]
    },
    {
        "id": "253b733.7c34c8c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3937.566665649414,
        "y": 2808.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "489357ce.d601e8"
            ]
        ]
    },
    {
        "id": "4ffee2dc.bf60cc",
        "type": "set",
        "name": "set pce-src-node",
        "xml": "<set>\n<parameter name='tmp.pce-src-node' value='`$tmp.srcdstpnf-name`' />",
        "comments": "",
        "x": 4218.566665649414,
        "y": 2758.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "f4366d42.1a2168",
        "type": "switchNode",
        "name": "switch dmnsidx == last (domainB)",
        "xml": "<switch test='`$otnidx == $tmp.otninfo_length - 1`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4154.566665649414,
        "y": 2859.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "ed86bff.8de464",
                "8d9d80f9.3a4208"
            ]
        ]
    },
    {
        "id": "ed86bff.8de464",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4384.566665649414,
        "y": 2855.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "7e911b6f.cd69e4"
            ]
        ]
    },
    {
        "id": "b90e6234.50db9",
        "type": "set",
        "name": "set attachment_param domain B",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />",
        "comments": "",
        "x": 4721.566665649414,
        "y": 2799.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "ac577a23.1df5c8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3937.566665649414,
        "y": 2857.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "f4366d42.1a2168"
            ]
        ]
    },
    {
        "id": "8d9d80f9.3a4208",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4385.566665649414,
        "y": 2901.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "c46aeca7.68602"
            ]
        ]
    },
    {
        "id": "c46aeca7.68602",
        "type": "set",
        "name": "set attachment_param domain G",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />",
        "comments": "",
        "x": 4599.566665649414,
        "y": 2901.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "b5fed2d4.4f9558",
        "type": "set",
        "name": "set tmp.slicevpns",
        "xml": "<set>\n<parameter name='`tmp.slicevpns[$tmp.slicevpns_length]`' value=\"`$prop.vpn-binding-otnidx-uuid`\" />\n<parameter name='tmp.slicevpns_length' value=\"`$tmp.slicevpns_length + 1`\" />\n\n<parameter name='`tmp.slicevpnuuids[$prop.vpn-binding-otnidx-uuid]`' value=\"`$prop.vpn-binding-otnidx-uuid`\" />\n\n",
        "comments": "",
        "x": 4497.566665649414,
        "y": 2950.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "473c1519.d01eb4",
        "type": "switchNode",
        "name": "switch vpnuuid is for this slice",
        "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n\n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.aai.service-instance.service-instance-id `\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3061.566665649414,
        "y": 4174.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "1fb0ccb2.86983b",
                "44883739.f6f7d8"
            ]
        ]
    },
    {
        "id": "1fb0ccb2.86983b",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3278.566665649414,
        "y": 4153.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "7e38fab1.3b9244"
            ]
        ]
    },
    {
        "id": "44883739.f6f7d8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3278.566665649414,
        "y": 4202.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "7e38fab1.3b9244",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3446.566665649414,
        "y": 4153.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "114fcf9e.f212a8",
                "5596317e.9b3628"
            ]
        ]
    },
    {
        "id": "a0f26d15.101368",
        "type": "set",
        "name": "set attachment_param domain A",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />",
        "comments": "",
        "x": 4273.566665649414,
        "y": 2805.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "489357ce.d601e8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4061.566665649414,
        "y": 2799.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "a0f26d15.101368"
            ]
        ]
    },
    {
        "id": "3c67b199.38de76",
        "type": "set",
        "name": "set pce-src-node",
        "xml": "<set>\n<parameter name='tmp.pce-dst-node' value='`$tmp.srcdstpnf-name`' />",
        "comments": "",
        "x": 4673.566665649414,
        "y": 2847.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "7e911b6f.cd69e4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4517.566665649414,
        "y": 2831.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            [
                "b90e6234.50db9"
            ]
        ]
    },
    {
        "id": "6e431d76.be632c",
        "type": "get-resource",
        "name": "get-resource pnfs-list",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"pnfs\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v25/network/pnfs?depth=0' depth = 0\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopopnfs\" >",
        "comments": "",
        "outputs": 1,
        "x": 2003.566665649414,
        "y": 96.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "29e9cbd2.ce75c4",
        "type": "get-resource",
        "name": "get-resource logical-links",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-links\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v25/network/logical-links?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopologicalLinks\" >",
        "comments": "",
        "outputs": 1,
        "x": 2015.566665649414,
        "y": 137.56666564941406,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "7f3d74ad.534c3c",
        "type": "comment",
        "name": "The following two nodes are for PCE",
        "info": "",
        "comments": "",
        "x": 2039.566665649414,
        "y": 59.56666564941406,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "6d8a85f2.9b51f4",
        "type": "set",
        "name": "set tmp.arr",
        "xml": "<set>\n<parameter name='tmp.arr.' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='otn-tunnel-slice.' value='' />\n\n\n",
        "comments": "",
        "x": 1960.566665649414,
        "y": 183.56666564941406,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "3add3536.bf190a",
        "type": "execute",
        "name": "execute printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n    <parameter name=\"filename\" value=\"`$filenamemm`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2650.566665649414,
        "y": 2395.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    },
    {
        "id": "d33e8b85.64336",
        "type": "set",
        "name": "set maxtpn",
        "xml": "<set>\n<parameter name='maxtpn' value='`($maxtpn + $gfp)`' />",
        "comments": "",
        "x": 3677.566665649414,
        "y": 2998.566665649414,
        "z": "9256178d.211a68",
        "wires": []
    },
    {
        "id": "33633691.1ec92a",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:tsli-vnf-topology-operation-find-maximum-used-tpn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='tsli-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2843.566665649414,
        "y": 2459.566665649414,
        "z": "9256178d.211a68",
        "wires": [
            []
        ]
    }
]