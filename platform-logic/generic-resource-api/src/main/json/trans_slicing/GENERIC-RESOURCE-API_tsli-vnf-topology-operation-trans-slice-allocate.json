[
    {
        "id": "187a8cd0.b6793b",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 144,
        "y": 132,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "5ea5ad17.ee4964"
            ]
        ]
    },
    {
        "id": "5ea5ad17.ee4964",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 428.2856903076172,
        "y": 193.23810863494873,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "9dad8fbc.f24f98"
            ]
        ]
    },
    {
        "id": "9dad8fbc.f24f98",
        "type": "method",
        "name": "method tsli-vnf-topology-operation-trans-slice-allocate",
        "xml": "<method rpc='tsli-vnf-topology-operation-trans-slice-allocate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 434.42860412597656,
        "y": 278.0000305175781,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "ca46cddf.f67038"
            ]
        ]
    },
    {
        "id": "ca46cddf.f67038",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 804.238037109375,
        "y": 302.66668701171875,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "506e7f5c.19244",
                "7c740453.8a159c",
                "ac58016f.1c2c1"
            ]
        ]
    },
    {
        "id": "506e7f5c.19244",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1105.571533203125,
        "y": 573.5969848632812,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "7c740453.8a159c",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
        "comments": "",
        "outputs": 1,
        "x": 1127,
        "y": 276,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "78f50d5a.2a0cec",
                "c34c58a5.11a148",
                "f82c0a42.39fea8"
            ]
        ]
    },
    {
        "id": "78f50d5a.2a0cec",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1352,
        "y": 134,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "dfc9a5db.996c4"
            ]
        ]
    },
    {
        "id": "c34c58a5.11a148",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1347.490966796875,
        "y": 203.57403564453125,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "5383933.3cbeeec"
            ]
        ]
    },
    {
        "id": "f82c0a42.39fea8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1336,
        "y": 250,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "3912b121.be04f6"
            ]
        ]
    },
    {
        "id": "dfc9a5db.996c4",
        "type": "switchNode",
        "name": "switch allotted-resources_length != 0",
        "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1591,
        "y": 131,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "fea7170c.7030f8",
                "8bbb818c.845db"
            ]
        ]
    },
    {
        "id": "5383933.3cbeeec",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1501.0623779296875,
        "y": 206.85977172851562,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "3912b121.be04f6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1505,
        "y": 251,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "fea7170c.7030f8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1804,
        "y": 155,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "bf993d83.a36c8"
            ]
        ]
    },
    {
        "id": "8bbb818c.845db",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1806,
        "y": 95,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "f5ddac6.6343fd",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 1106,
        "y": 164,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "bf993d83.a36c8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1789,
        "y": 243,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "23c06925.0d2eb6",
                "a5814717.4b953",
                "39b144a2.fc3a7c"
            ]
        ]
    },
    {
        "id": "50cd8b4c.3fbe34",
        "type": "set",
        "name": "set network-route-A",
        "xml": "<set>\n<!--<parameter name='network-route-A' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='network-route-A' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
        "comments": "",
        "x": 2652,
        "y": 843,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "4f854478.eff1a4",
        "type": "set",
        "name": "set network-route-B",
        "xml": "<set>\n<parameter name='network-route-B' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
        "comments": "",
        "x": 2653,
        "y": 898,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "78e29884.225c08",
        "type": "save",
        "name": "get allotted-resource from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2275,
        "y": 294,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "e80669a1.e9e15",
                "2a720603.9816ea",
                "13ab43c3.0c3b8c"
            ]
        ]
    },
    {
        "id": "e80669a1.e9e15",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2491,
        "y": 361,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "14dca185.e1b46e"
            ]
        ]
    },
    {
        "id": "2a720603.9816ea",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2491.490966796875,
        "y": 260.573974609375,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "e741b978.cc2c38"
            ]
        ]
    },
    {
        "id": "13ab43c3.0c3b8c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2487,
        "y": 310,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "b16bf403.baad58"
            ]
        ]
    },
    {
        "id": "e741b978.cc2c38",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2669.0625,
        "y": 260.8597412109375,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "b16bf403.baad58",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2669,
        "y": 310,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "6e843ab.3582ec4",
        "type": "save",
        "name": "get logical-link from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
        "comments": "",
        "outputs": 1,
        "x": 2010,
        "y": 783,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "4070a4d0.4176d4",
                "60c71e39.2f942",
                "a6a55952.b90f"
            ]
        ]
    },
    {
        "id": "4070a4d0.4176d4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2301.490966796875,
        "y": 761.573974609375,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "77c211be.bc11e8"
            ]
        ]
    },
    {
        "id": "60c71e39.2f942",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2290,
        "y": 806,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "fbd7810f.a3734"
            ]
        ]
    },
    {
        "id": "77c211be.bc11e8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2450.0625,
        "y": 761.8597412109375,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "fbd7810f.a3734",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2449,
        "y": 806,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "a6a55952.b90f",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2297,
        "y": 885,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "22d259e0.d6e2e6"
            ]
        ]
    },
    {
        "id": "22d259e0.d6e2e6",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2436,
        "y": 885,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "50cd8b4c.3fbe34",
                "4f854478.eff1a4",
                "14a4c097.be654f",
                "644a5f8e.b0774",
                "79e86730.1965c8",
                "4f1b84d7.aafb5c",
                "7ca2c5af.473d34",
                "28a40435.4178ec",
                "b46ca414.99697",
                "57fdafb2.9eec08",
                "260f00b5.585908",
                "134248ca.e0fa77",
                "fc2a7bf0.e878b",
                "84749d0f.3038c8",
                "21292318.735edc",
                "ce066c5d.e7734",
                "e927f664.5c872",
                "29397b6c.248454",
                "c19c2198.0de5c",
                "488403ee.0379ac"
            ]
        ]
    },
    {
        "id": "14a4c097.be654f",
        "type": "save",
        "name": "get network-route-A from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-A'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-A\">",
        "comments": "",
        "outputs": 1,
        "x": 2665,
        "y": 966,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "7df96ca0.99ecc4",
                "50b0a0cb.3236a8",
                "a3437ac7.e0ee1"
            ]
        ]
    },
    {
        "id": "644a5f8e.b0774",
        "type": "save",
        "name": "get network-route-B from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-B'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-B\">",
        "comments": "",
        "outputs": 1,
        "x": 2644,
        "y": 1567.9998779296875,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "ece670c3.4f34a8",
                "263c76fe.5b3242",
                "97139121.0331f8"
            ]
        ]
    },
    {
        "id": "7df96ca0.99ecc4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2866,
        "y": 850,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "a6fc1138.23945"
            ]
        ]
    },
    {
        "id": "50b0a0cb.3236a8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2861.509033203125,
        "y": 899.426025390625,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "6e6d0210.60f404"
            ]
        ]
    },
    {
        "id": "a3437ac7.e0ee1",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2865.509033203125,
        "y": 950.426025390625,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "d860cdb2.412c48"
            ]
        ]
    },
    {
        "id": "a6fc1138.23945",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3014.571533203125,
        "y": 849.2857666015625,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "6e6d0210.60f404",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3004.509033203125,
        "y": 899.426025390625,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "ece670c3.4f34a8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2867,
        "y": 1537.9998779296875,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "f4c07ea8.414868"
            ]
        ]
    },
    {
        "id": "263c76fe.5b3242",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2862.509033203125,
        "y": 1587.4259033203125,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "ce13d349.caf3b8"
            ]
        ]
    },
    {
        "id": "97139121.0331f8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2866.509033203125,
        "y": 1638.4259033203125,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "d30e3d8d.09cef8"
            ]
        ]
    },
    {
        "id": "f4c07ea8.414868",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3015.571533203125,
        "y": 1537.28564453125,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "ce13d349.caf3b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3005.509033203125,
        "y": 1587.4259033203125,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "e31af50c.926d2",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3679.66650390625,
        "y": 994,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "c203b1ea.86f6c",
                "d4cb3bd3.a349c8",
                "5d25d92f.6f798",
                "a5aee8f6.ab5e58",
                "c830d981.aee038"
            ]
        ]
    },
    {
        "id": "b7824d8a.d2e4f8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3507,
        "y": 995,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "e31af50c.926d2"
            ]
        ]
    },
    {
        "id": "5d5b9681.b7598",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3516.490966796875,
        "y": 1037.5740356445312,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "4fc1bcc7.eeb784"
            ]
        ]
    },
    {
        "id": "6e8be76c.59d528",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3505,
        "y": 1084,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "ac4a57cf.bef8e8"
            ]
        ]
    },
    {
        "id": "4fc1bcc7.eeb784",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3670.0623779296875,
        "y": 1040.8597717285156,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "ac4a57cf.bef8e8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3674,
        "y": 1085,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "d860cdb2.412c48",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3027,
        "y": 952,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "62113903.77ec78",
                "c9fe9947.c06348"
            ]
        ]
    },
    {
        "id": "d30e3d8d.09cef8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3017,
        "y": 1639.9998779296875,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "4ecc6dae.def654",
                "669a0eda.d8f578"
            ]
        ]
    },
    {
        "id": "a1006da4.a872e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3647.66650390625,
        "y": 1830,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "a3aca2eb.21f5a8",
                "d3723bfd.d9b168",
                "d3c0c42f.4b437",
                "2512774e.7c83b8",
                "d281a70f.336618"
            ]
        ]
    },
    {
        "id": "c9dbe459.2e8d58",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3475,
        "y": 1831,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "a1006da4.a872e"
            ]
        ]
    },
    {
        "id": "dab2f9a8.cea26",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3484.490966796875,
        "y": 1873.5740356445312,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "6f793776.f883f"
            ]
        ]
    },
    {
        "id": "f5d094cc.fe5d68",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3473,
        "y": 1920,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "f383fe68.3b83"
            ]
        ]
    },
    {
        "id": "6f793776.f883f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3638.0623779296875,
        "y": 1876.8597717285156,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "f383fe68.3b83",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3642,
        "y": 1921,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "c203b1ea.86f6c",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3944,
        "y": 978,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "6fb08f41.de4d4",
                "183e3f66.48a0d1"
            ]
        ]
    },
    {
        "id": "183e3f66.48a0d1",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4167,
        "y": 933,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "e55834d1.3ca1b8"
            ]
        ]
    },
    {
        "id": "6fb08f41.de4d4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4169,
        "y": 997,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "f45e344f.88a748"
            ]
        ]
    },
    {
        "id": "5bf466f.7bcdb98",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
        "comments": "",
        "x": 4502,
        "y": 888,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "f45e344f.88a748",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 4331,
        "y": 993,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "e55834d1.3ca1b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4332,
        "y": 930,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "194d0d3d.11557b",
                "5bf466f.7bcdb98"
            ]
        ]
    },
    {
        "id": "194d0d3d.11557b",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
        "comments": "",
        "x": 4503,
        "y": 996,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "dd1a9ea9.6d631",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 4504,
        "y": 945,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "5d25d92f.6f798",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<parameter name='bandwidth-profile-name' value='`$prop.sotn.etht-svc-name`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='CIR' value='`$prop.sotn.cir`' />\n<parameter name='EIR' value='`$prop.sotn.eir`' />\n<parameter name='CBS' value='`$prop.sotn.cbs`' />\n<parameter name='EBS' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3946,
        "y": 1137,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "d4cb3bd3.a349c8",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainA",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3991,
        "y": 1047,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "6324b9d6.c58fe",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[?] all together\nin order to assemble the correct values for provider-id, \ntopology-id, node-id, etc.",
        "comments": "",
        "x": 3880,
        "y": 1088,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "a3aca2eb.21f5a8",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3934,
        "y": 1834.0001220703125,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "37186f70.3d57",
                "4ffb9846.2cd768"
            ]
        ]
    },
    {
        "id": "4ffb9846.2cd768",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4157,
        "y": 1789.0001220703125,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "17371f4a.955d61"
            ]
        ]
    },
    {
        "id": "37186f70.3d57",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4159,
        "y": 1853.0001220703125,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "1981566c.49d212"
            ]
        ]
    },
    {
        "id": "17f707eb.a2a908",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
        "comments": "",
        "x": 4492,
        "y": 1747.0001220703125,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "1981566c.49d212",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 4318,
        "y": 1872.0001220703125,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "17371f4a.955d61",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4322,
        "y": 1786.0001220703125,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "17f707eb.a2a908",
                "ca2d1022.cf4e88"
            ]
        ]
    },
    {
        "id": "ca2d1022.cf4e88",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
        "comments": "",
        "x": 4493,
        "y": 1852.0001220703125,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "8cfd8f17.95a8e",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 4488,
        "y": 1801.0001220703125,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "d3c0c42f.4b437",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n\n\n<parameter name='bandwidth-profile-name' value='`$prop.sotn.etht-svc-name`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='CIR' value='`$prop.sotn.cir`' />\n<parameter name='EIR' value='`$prop.sotn.eir`' />\n<parameter name='CBS' value='`$prop.sotn.cbs`' />\n<parameter name='EBS' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3936,
        "y": 1993.0001220703125,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "d3723bfd.d9b168",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainB",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3981,
        "y": 1903.0001220703125,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "1765f0ec.e922ff",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[?] all together\nin order to assemble the correct values for provider-id, \ntopology-id, node-id, etc.",
        "comments": "",
        "x": 3870,
        "y": 1941.0001220703125,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "79e86730.1965c8",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2845,
        "y": 2068,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "4f1b84d7.aafb5c",
        "type": "set",
        "name": "set attachment_param",
        "xml": "<set>\n<parameter name='prop.connection-attachment.access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='prop.connection-attachment.access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='prop.connection-attachment.access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='prop.connection-attachment.access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='prop.connection-attachment.access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n\n<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='prop.remote.connection-attachment.access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='prop.remote.connection-attachment.access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n\n<!--<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$oof.vpn.access-provider-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-client-id' value='`$oof.vpn.access-client-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$oof.vpn.access-topology-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-node-id' value='`$oof.vpn.access-node-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />-->\n",
        "comments": "",
        "x": 2639,
        "y": 1969,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "3db83432.384b6c",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "put proper values for src topology-id, node-id, ltp-id, etc (in domain A)\nand dst topology-id, node-id, ltp-id, etc (in domain B)",
        "comments": "",
        "x": 2613,
        "y": 1922,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "7ca2c5af.473d34",
        "type": "save",
        "name": "save vpn-binding A resource (aka. OTN domainA) in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-domainA-uuid' >\n<parameter name='vpn-id' value='`$prop.vpn-binding-domainA-uuid`' />\n<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />\n<parameter name='customer-vpn-id' value='`($idx + 1) * 10`' />\n<parameter name='access-provider-id' value='`$domain-A.provider-id`' />\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<parameter name='access-client-id' value='`$domain-A.client-id`' />\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<parameter name='access-topology-id' value='`$domain-A.te-topo-id`' />\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<parameter name='src-access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<!--<parameter name='src-access-ltp-id' value='`$source.tunnel-tp-id`' />-->\n<parameter name='src-access-ltp-id' value='' />\n<parameter name='dst-access-node-id' value='`$domain-A.node-id`' />\n<parameter name='dst-access-ltp-id' value='`$domain-A.tunnel-tp-id`' />\n<parameter name='route-distinguisher' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.global.sotn.vpnType`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2721,
        "y": 2227,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "57191dce.959cfc"
            ]
        ]
    },
    {
        "id": "28a40435.4178ec",
        "type": "save",
        "name": "save connectivity-A relationship to vpn-binding-A, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2724.5,
        "y": 2297,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "82428356.c63018",
        "type": "save",
        "name": "save srcLTP relationship in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $oof.vpn.access-node-id + '/p-interfaces/p-interface/' + $src-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$src-ltpId`\" />\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3372.5,
        "y": 2216,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "356966b3.03f20a",
        "type": "save",
        "name": "save dstLTP relationship in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $oof.vpn.access-node-id + '/p-interfaces/p-interface/' + $dst-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$dst-ltpId`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3374.5,
        "y": 2255,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "a5aee8f6.ab5e58",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 4074,
        "y": 1185,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "2512774e.7c83b8",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 4063,
        "y": 2058.0001220703125,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "57191dce.959cfc",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3021,
        "y": 2234,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "dcb72301.82c018"
            ]
        ]
    },
    {
        "id": "dcb72301.82c018",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3161.500244140625,
        "y": 2235.25390625,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "6975c99d.325498",
        "type": "comment",
        "name": "TODO: FIXME: do we need this relationship?",
        "info": "",
        "comments": "",
        "x": 3409,
        "y": 2175,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "e85b69e.5211998",
        "type": "comment",
        "name": "TODO: FIXME: put proper values",
        "info": "",
        "comments": "",
        "x": 2688,
        "y": 2187,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "b46ca414.99697",
        "type": "save",
        "name": "save vpn-binding B resource (aka. OTN domainB) in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-domainB-uuid' >\n<parameter name='vpn-id' value='`$prop.vpn-binding-domainB-uuid`' />\n<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />\n<parameter name='customer-vpn-id' value='`($idx + 1) * 10`' />\n<parameter name='access-provider-id' value='`$domain-B.provider-id`' />\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />-->\n<parameter name='access-client-id' value='`$domain-B.client-id`' />\n<!--<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />-->\n<parameter name='access-topology-id' value='`$domain-B.te-topo-id`' />\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />-->\n<parameter name='src-access-node-id' value='`$domain-B.node-id`' />\n<parameter name='src-access-ltp-id' value='`$domain-B.tunnel-tp-id`' />\n<parameter name='dst-access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<!--<parameter name='dst-access-ltp-id' value='`$destination.tunnel-tp-id`' />-->\n<parameter name='dst-access-ltp-id' value='' />\n<parameter name='route-distinguisher' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.global.sotn.vpnType`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2724,
        "y": 2515,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "e64b3d38.e980a"
            ]
        ]
    },
    {
        "id": "58f4ff2f.89d75",
        "type": "comment",
        "name": "TODO: FIXME: do we need this relationship?",
        "info": "",
        "comments": "",
        "x": 3412,
        "y": 2455,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "cad39d05.aea5f",
        "type": "save",
        "name": "save srcLTP relationship in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $oof.vpn.access-node-id + '/p-interfaces/p-interface/' + $src-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$src-ltpId`\" />\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3375.5,
        "y": 2496,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "489163b9.d640b4",
        "type": "save",
        "name": "save dstLTP relationship in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $oof.vpn.access-node-id + '/p-interfaces/p-interface/' + $dst-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$dst-ltpId`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3377.5,
        "y": 2535,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "d0ea482.a9901b8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3164.500244140625,
        "y": 2515.25390625,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "e64b3d38.e980a",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3024,
        "y": 2514,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "d0ea482.a9901b8"
            ]
        ]
    },
    {
        "id": "9cd3d1db.fb7ce8",
        "type": "comment",
        "name": "TODO: FIXME: put proper values",
        "info": "",
        "comments": "",
        "x": 2704,
        "y": 2475,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "57fdafb2.9eec08",
        "type": "save",
        "name": "save connectivity-B relationship to vpn-binding-B, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-domainB-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2722.5,
        "y": 2555,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "aa4b663b.c9d06",
        "type": "comment",
        "name": "TODO: FIXME:",
        "info": "set attachment param and send request to NCE-T\nfor bandwidth matrix\nmay require a new template for JSON body",
        "comments": "",
        "x": 2596,
        "y": 2638,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "fc2a7bf0.e878b",
        "type": "set",
        "name": "set attachment_param domain A",
        "xml": "<set>\n<!--<parameter name='request-id' value='`$prop.vpn-binding-domainA-uuid`' />-->\n<!--<parameter name='otn-source-node' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='otn-dest-node' value='`$domain-A.node-id`' />-->\n<!--<parameter name='bw-odu' value=\"`'0,' + $gfp`\" />-->\n<!--<parameter name='dst-ttp-id' value='`$domain-A.tunnel-tp-id`' />-->\n<!--<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />-->\n\n\n\n<parameter name='`otn-tunnel-sliceA-list[$idx].request-id`' value='`$prop.vpn-binding-domainA-uuid`' />\n<parameter name='`otn-tunnel-sliceA-list[$idx].otn-source-node`' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='`otn-tunnel-sliceA-list[$idx].otn-dest-node`' value='`$domain-A.node-id`' />\n<parameter name='`otn-tunnel-sliceA-list[$idx].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-sliceA-list[$idx].src-ttp-id`' value='' />\n<parameter name='`otn-tunnel-sliceA-list[$idx].dst-ttp-id`' value='`$domain-A.tunnel-tp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-sliceA-list_length`' value='`$idx + 1`' />\n\n<!--otn-tunnel-slice-list[$idx]-->\n\n",
        "comments": "",
        "x": 2661,
        "y": 2683,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "2c916faf.da498",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5118,
        "y": 705,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "883ac008.74f89",
                "6cf958ca.c3e4a8",
                "e70b241a.97d7e8"
            ]
        ]
    },
    {
        "id": "14dca185.e1b46e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2671,
        "y": 361,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "8a257359.8a7208"
            ]
        ]
    },
    {
        "id": "e1ac55d9.d865b8",
        "type": "outcome",
        "name": "logical-link",
        "xml": "<outcome value='logical-link'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1601.0001220703125,
        "y": 778.0001220703125,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "f6ec4c40.65362"
            ]
        ]
    },
    {
        "id": "14b8fde.fcc1702",
        "type": "switchNode",
        "name": "switch allotted-resource.relationship-list not empty",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2339,
        "y": 484,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "e65ebebd.579d6",
                "32fc4868.fa2b8"
            ]
        ]
    },
    {
        "id": "32fc4868.fa2b8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2649,
        "y": 491,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "e65ebebd.579d6",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2648,
        "y": 545,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "c14b8719.903d8"
            ]
        ]
    },
    {
        "id": "badc6972.d68008",
        "type": "set",
        "name": "set the current logical-link-name",
        "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 2021,
        "y": 728,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "f6ec4c40.65362",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1778,
        "y": 771,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "badc6972.d68008",
                "6e843ab.3582ec4"
            ]
        ]
    },
    {
        "id": "76aa64b6.332a54",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 3207,
        "y": 957,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "62113903.77ec78",
        "type": "save",
        "name": "get p-interface-src from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3250,
        "y": 1022,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "b7824d8a.d2e4f8",
                "5d5b9681.b7598",
                "6e8be76c.59d528"
            ]
        ]
    },
    {
        "id": "4ecc6dae.def654",
        "type": "save",
        "name": "get p-interface-dst from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3247,
        "y": 1866,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "c9dbe459.2e8d58",
                "dab2f9a8.cea26",
                "f5d094cc.fe5d68"
            ]
        ]
    },
    {
        "id": "6f6e53ed.b087ec",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 3208,
        "y": 1810,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "8a257359.8a7208",
        "type": "save",
        "name": "get allotted-resource relationship from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2964,
        "y": 308,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "8ea1434f.746858",
                "f2d8ff7.3c8d5",
                "a6d32e01.02e81"
            ]
        ]
    },
    {
        "id": "f2d8ff7.3c8d5",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3237.490966796875,
        "y": 200.573974609375,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "b85ff289.1649f"
            ]
        ]
    },
    {
        "id": "b85ff289.1649f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3415.0625,
        "y": 200.8597412109375,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "a6d32e01.02e81",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3233,
        "y": 250,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "381f7f5a.80d3f8"
            ]
        ]
    },
    {
        "id": "381f7f5a.80d3f8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3415,
        "y": 250,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "8ea1434f.746858",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3237,
        "y": 301,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "6ca45b0b.848dec"
            ]
        ]
    },
    {
        "id": "6ca45b0b.848dec",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3417,
        "y": 301,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "14b8fde.fcc1702"
            ]
        ]
    },
    {
        "id": "40603cb7.607bc4",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2908,
        "y": 525,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "4e667cbe.69222c"
            ]
        ]
    },
    {
        "id": "4e667cbe.69222c",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3188,
        "y": 525,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "e1ac55d9.d865b8"
            ]
        ]
    },
    {
        "id": "13452ae4.22e4ad",
        "type": "outcome",
        "name": "network-policy",
        "xml": "<outcome value='network-policy'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3393,
        "y": 499,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "245f45af.4ae9da"
            ]
        ]
    },
    {
        "id": "245f45af.4ae9da",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3569.9998779296875,
        "y": 491.9998779296875,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "868607a4.e796b",
                "3bdb9c7c.d6977c"
            ]
        ]
    },
    {
        "id": "868607a4.e796b",
        "type": "set",
        "name": "set the 1st network-policy-id",
        "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 3812.9998779296875,
        "y": 448.9998779296875,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "3bdb9c7c.d6977c",
        "type": "save",
        "name": "get network-policy from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
        "comments": "",
        "outputs": 1,
        "x": 3801.9998779296875,
        "y": 503.9998779296875,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "11d90691.38b7b1",
                "e5aaddec.aca59",
                "6698da7a.77b3bc"
            ]
        ]
    },
    {
        "id": "6698da7a.77b3bc",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4055,
        "y": 390,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "e904e6fc.1061a"
            ]
        ]
    },
    {
        "id": "e904e6fc.1061a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4203.571533203125,
        "y": 390.2857666015625,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "4975bc8f.93ecdc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4202.509033203125,
        "y": 434.426025390625,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "e5aaddec.aca59",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4043.509033203125,
        "y": 434.426025390625,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "4975bc8f.93ecdc"
            ]
        ]
    },
    {
        "id": "11d90691.38b7b1",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4050.509033203125,
        "y": 513.426025390625,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "3b14af19.ae1128"
            ]
        ]
    },
    {
        "id": "3b14af19.ae1128",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4189.509033203125,
        "y": 513.426025390625,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "70ed97b5.dc1c9",
                "c2e43483.a12bd"
            ]
        ]
    },
    {
        "id": "70ed97b5.dc1c9",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 4395,
        "y": 511,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "c9fe9947.c06348",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3251,
        "y": 692,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "78baed3e.c501f4",
                "120f1ac.ca76ae5"
            ]
        ]
    },
    {
        "id": "120f1ac.ca76ae5",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3474,
        "y": 678,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "40ab4c81.445cd4"
            ]
        ]
    },
    {
        "id": "78baed3e.c501f4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3476,
        "y": 711,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "9d068c67.4598d"
            ]
        ]
    },
    {
        "id": "9d068c67.4598d",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 3619,
        "y": 708,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "40ab4c81.445cd4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3622,
        "y": 671,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "e718de2c.ab002",
                "68fbd6c1.ad0448"
            ]
        ]
    },
    {
        "id": "e718de2c.ab002",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
        "comments": "",
        "x": 3784,
        "y": 666,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "669a0eda.d8f578",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3265,
        "y": 1528.9998779296875,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "3eeffc60.cab244",
                "163d6add.444455"
            ]
        ]
    },
    {
        "id": "163d6add.444455",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3488,
        "y": 1514.9998779296875,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "2e1531f5.2b244e"
            ]
        ]
    },
    {
        "id": "3eeffc60.cab244",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3490,
        "y": 1547.9998779296875,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "bb0d91d9.020e4"
            ]
        ]
    },
    {
        "id": "bb0d91d9.020e4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 3633,
        "y": 1544.9998779296875,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "2e1531f5.2b244e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3636,
        "y": 1507.9998779296875,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "dd9519ef.d4213",
                "54817df4.67d484"
            ]
        ]
    },
    {
        "id": "dd9519ef.d4213",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
        "comments": "",
        "x": 3830,
        "y": 1511,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "ac58016f.1c2c1",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 1094,
        "y": 216,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "260f00b5.585908",
        "type": "execute",
        "name": "execute UUID generator for vpn-binding domainA",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.vpn-binding-domainA-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2727,
        "y": 2149,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "134248ca.e0fa77",
        "type": "execute",
        "name": "execute UUID generator for vpn-binding domainB",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.vpn-binding-domainB-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2725,
        "y": 2437,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "c830d981.aee038",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3898,
        "y": 1262,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "4f78d00a.39ba68"
            ]
        ]
    },
    {
        "id": "4f78d00a.39ba68",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4104,
        "y": 1262,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "489cbbcb.77186c"
            ]
        ]
    },
    {
        "id": "489cbbcb.77186c",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4319.28564453125,
        "y": 1261.82177734375,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "3bbad5a.8ec85aa"
            ]
        ]
    },
    {
        "id": "3bbad5a.8ec85aa",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4526.1171875,
        "y": 1262.34033203125,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "cf0eeee3.8d6188",
                "80da6c7c.bf9bc",
                "4327bba4.ea16c4"
            ]
        ]
    },
    {
        "id": "cf0eeee3.8d6188",
        "type": "set",
        "name": "set source ttp-id",
        "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4741.1171875,
        "y": 1224.34033203125,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "80da6c7c.bf9bc",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4738.1171875,
        "y": 1263.34033203125,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "54d57ef.0aa16"
            ]
        ]
    },
    {
        "id": "4327bba4.ea16c4",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4693.6171875,
        "y": 1305.34033203125,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "54d57ef.0aa16",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4918.6171875,
        "y": 1262.34033203125,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "136083ca.f8ed24"
            ]
        ]
    },
    {
        "id": "136083ca.f8ed24",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5076.6171875,
        "y": 1262.34033203125,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "43a5fa3.d0c2504"
            ]
        ]
    },
    {
        "id": "43a5fa3.d0c2504",
        "type": "set",
        "name": "set source tunnel tp ip",
        "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 5283.6171875,
        "y": 1262.34033203125,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "d281a70f.336618",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3895,
        "y": 2131.0001220703125,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "21553f06.14bad"
            ]
        ]
    },
    {
        "id": "21553f06.14bad",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4101,
        "y": 2131.0001220703125,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "d5a45fe2.8cbaf"
            ]
        ]
    },
    {
        "id": "d5a45fe2.8cbaf",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4316.28564453125,
        "y": 2130.8218994140625,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "3432450f.73fd1a"
            ]
        ]
    },
    {
        "id": "3432450f.73fd1a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4523.1171875,
        "y": 2131.3404541015625,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "4d1b045c.8befb4",
                "ff4bcdcd.b592",
                "82369db7.8fbd4"
            ]
        ]
    },
    {
        "id": "4d1b045c.8befb4",
        "type": "set",
        "name": "set destination ttp-id",
        "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4738.1171875,
        "y": 2093.3404541015625,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "ff4bcdcd.b592",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4735.1171875,
        "y": 2132.3404541015625,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "a8f23d1f.d221e8"
            ]
        ]
    },
    {
        "id": "82369db7.8fbd4",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4690.6171875,
        "y": 2174.3404541015625,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "a8f23d1f.d221e8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4915.6171875,
        "y": 2131.3404541015625,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "403d184.8f53468"
            ]
        ]
    },
    {
        "id": "403d184.8f53468",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5073.6171875,
        "y": 2131.3404541015625,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "c7d0f697.2aea68"
            ]
        ]
    },
    {
        "id": "c7d0f697.2aea68",
        "type": "set",
        "name": "set destination tunnel tp ip",
        "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 5280.6171875,
        "y": 2131.3404541015625,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "84749d0f.3038c8",
        "type": "set",
        "name": "set attachment_param domain B",
        "xml": "<set>\n<!--<parameter name='request-id' value='`$prop.vpn-binding-domainB-uuid`' />-->\n<!--<parameter name='otn-source-node' value='`$domain-B.node-id`' />-->\n<!--<parameter name='otn-dest-node' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />-->\n<!--<parameter name='bw-odu' value=\"`'0,' + $gfp`\" />-->\n<!--<parameter name='src-ttp-id' value='`$domain-B.tunnel-tp-id`' />-->\n<!--<parameter name='dst-ttp-id' value='' />-->\n<!--<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />-->\n\n\n<parameter name='`otn-tunnel-sliceB-list[$idx].request-id`' value='`$prop.vpn-binding-domainB-uuid`' />\n<parameter name='`otn-tunnel-sliceB-list[$idx].otn-source-node`' value='`$domain-B.node-id`' />\n<parameter name='`otn-tunnel-sliceB-list[$idx].otn-dest-node`' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='`otn-tunnel-sliceB-list[$idx].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-sliceB-list[$idx].src-ttp-id`' value='`$domain-B.tunnel-tp-id`' />\n<parameter name='`otn-tunnel-sliceB-list[$idx].dst-ttp-id`' value='' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-sliceB-list_length`' value='`$idx + 1`' />\n",
        "comments": "",
        "x": 2656,
        "y": 3058,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "68fbd6c1.ad0448",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3811,
        "y": 738,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "69417d44.afb3fc",
                "a15ac77e.798db8",
                "3a89038d.704134"
            ]
        ]
    },
    {
        "id": "69417d44.afb3fc",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4006.5001220703125,
        "y": 690,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "138b37c3.968d8"
            ]
        ]
    },
    {
        "id": "a15ac77e.798db8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3998.5001220703125,
        "y": 745,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "5742f10e.dadab8"
            ]
        ]
    },
    {
        "id": "3a89038d.704134",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4003.5001220703125,
        "y": 802,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "56dfcb3e.f8e3ac"
            ]
        ]
    },
    {
        "id": "56dfcb3e.f8e3ac",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4155.5001220703125,
        "y": 803,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "5742f10e.dadab8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4166.5001220703125,
        "y": 748,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "138b37c3.968d8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4150.8824462890625,
        "y": 687.6556701660156,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "b4d80ee.d93167"
            ]
        ]
    },
    {
        "id": "40dc3d01.0cfddc",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4733,
        "y": 706,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "ce5ec787.25a25"
            ]
        ]
    },
    {
        "id": "ce5ec787.25a25",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4910,
        "y": 698,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "deda36.39eb45c8",
                "2c916faf.da498"
            ]
        ]
    },
    {
        "id": "b4d80ee.d93167",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4335,
        "y": 702,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "83a731e6.aee9d8"
            ]
        ]
    },
    {
        "id": "83a731e6.aee9d8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4530,
        "y": 702,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "40dc3d01.0cfddc",
                "556c2535.2cf6f4"
            ]
        ]
    },
    {
        "id": "deda36.39eb45c8",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainA id",
        "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5148,
        "y": 653,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "883ac008.74f89",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5328,
        "y": 696,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "5bb6445.b0cb1bc"
            ]
        ]
    },
    {
        "id": "6cf958ca.c3e4a8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5320,
        "y": 751,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "f6420bc8.c6108"
            ]
        ]
    },
    {
        "id": "e70b241a.97d7e8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5325,
        "y": 808,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "e90b6e53.2dc61"
            ]
        ]
    },
    {
        "id": "e90b6e53.2dc61",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5477,
        "y": 809,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "f6420bc8.c6108",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5488,
        "y": 754,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "5bb6445.b0cb1bc",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5472.38232421875,
        "y": 693.6556701660156,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "36dcfa67.508606"
            ]
        ]
    },
    {
        "id": "36dcfa67.508606",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5687,
        "y": 690,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "54817df4.67d484",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3852,
        "y": 1579,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "12332a8b.1f458d",
                "e70d4463.7fed78",
                "9e28dd86.32b368"
            ]
        ]
    },
    {
        "id": "12332a8b.1f458d",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4047.5001220703125,
        "y": 1531,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "97851436.c0f798"
            ]
        ]
    },
    {
        "id": "e70d4463.7fed78",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4039.5001220703125,
        "y": 1586,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "9865196d.c10828"
            ]
        ]
    },
    {
        "id": "9e28dd86.32b368",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4044.5001220703125,
        "y": 1643,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "1636bf8.c7b9e41"
            ]
        ]
    },
    {
        "id": "1636bf8.c7b9e41",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4196.5001220703125,
        "y": 1644,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "9865196d.c10828",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4207.5001220703125,
        "y": 1589,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "97851436.c0f798",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4191.8824462890625,
        "y": 1528.6556701660156,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "601870d2.2269c8"
            ]
        ]
    },
    {
        "id": "358b8a93.9adabe",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4774,
        "y": 1547,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "f1454db6.8dcaf8"
            ]
        ]
    },
    {
        "id": "f1454db6.8dcaf8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4951,
        "y": 1539,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "1806e2c2.14485d",
                "8cb20d6f.760bf"
            ]
        ]
    },
    {
        "id": "601870d2.2269c8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4376,
        "y": 1543,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "4732f224.c95254"
            ]
        ]
    },
    {
        "id": "4732f224.c95254",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4571,
        "y": 1543,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "358b8a93.9adabe",
                "3beefc43.434434"
            ]
        ]
    },
    {
        "id": "8cb20d6f.760bf",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5159,
        "y": 1546,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "c4071110.82806",
                "ce108d7.ad4977",
                "c040099f.13bbf8"
            ]
        ]
    },
    {
        "id": "1806e2c2.14485d",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainB id",
        "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5189,
        "y": 1494,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "c4071110.82806",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5369,
        "y": 1537,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "c3f3513e.3d36c"
            ]
        ]
    },
    {
        "id": "ce108d7.ad4977",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5361,
        "y": 1592,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "98979539.818688"
            ]
        ]
    },
    {
        "id": "c040099f.13bbf8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5366,
        "y": 1649,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "45d3d695.c0cf2"
            ]
        ]
    },
    {
        "id": "45d3d695.c0cf2",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5518,
        "y": 1650,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "98979539.818688",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5529,
        "y": 1595,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "c3f3513e.3d36c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5513.38232421875,
        "y": 1534.6556701660156,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "90464df.06ab9b"
            ]
        ]
    },
    {
        "id": "90464df.06ab9b",
        "type": "set",
        "name": "set controller domainB data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5728,
        "y": 1531,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "a5814717.4b953",
        "type": "execute",
        "name": "execute RestApiCallNode slice creation domainA",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.transport-sliceA-list-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/operations/ietf-optical-slice:create-optical-slice'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1959,
        "y": 2744,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "2242c3cc.13b1dc",
                "2c8586d6.b70122"
            ]
        ]
    },
    {
        "id": "2c8586d6.b70122",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2242,
        "y": 2724,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "8e14b997.54e1b8"
            ]
        ]
    },
    {
        "id": "2242c3cc.13b1dc",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2243.000213623047,
        "y": 2774.99990940094,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "72bda37b.1b4f84"
            ]
        ]
    },
    {
        "id": "8e14b997.54e1b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing slice creation api for domain A\" />\n",
        "comments": "",
        "x": 2382.0002479553223,
        "y": 2724.0000009536743,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "72bda37b.1b4f84",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2388.02725982666,
        "y": 2772.745394706726,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "39b144a2.fc3a7c",
        "type": "execute",
        "name": "execute RestApiCallNode slice creation domainB",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.transport-sliceB-list-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/operations/ietf-optical-slice:create-optical-slice'`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1959,
        "y": 3110,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "23f4f16e.f2ab6e",
                "8c667512.e5492"
            ]
        ]
    },
    {
        "id": "8c667512.e5492",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2233,
        "y": 3090,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "1089012f.df48c7"
            ]
        ]
    },
    {
        "id": "23f4f16e.f2ab6e",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2234.000213623047,
        "y": 3140.99990940094,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "199cfc4b.ed097c"
            ]
        ]
    },
    {
        "id": "1089012f.df48c7",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing slice creation api for domain B\" />\n",
        "comments": "",
        "x": 2373.0002479553223,
        "y": 3090.0000009536743,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "199cfc4b.ed097c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2379.02725982666,
        "y": 3138.745394706726,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "c14b8719.903d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2812,
        "y": 471,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "40603cb7.607bc4",
                "7f3f76ad.e04ac8"
            ]
        ]
    },
    {
        "id": "7f3f76ad.e04ac8",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3093,
        "y": 427,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "31eeaed6.c9c2d2"
            ]
        ]
    },
    {
        "id": "31eeaed6.c9c2d2",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3355,
        "y": 427,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "13452ae4.22e4ad"
            ]
        ]
    },
    {
        "id": "556c2535.2cf6f4",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 4736,
        "y": 780,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "8b677154.0c28b8"
            ]
        ]
    },
    {
        "id": "8b677154.0c28b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4913,
        "y": 772,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "dbe05c47.574588"
            ]
        ]
    },
    {
        "id": "dbe05c47.574588",
        "type": "set",
        "name": "set domainA ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5148,
        "y": 896,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "e5346606.e9d9f",
        "type": "set",
        "name": "set domainB ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5188,
        "y": 1736,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "279e5fe1.a8b868",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4953,
        "y": 1612,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "e5346606.e9d9f"
            ]
        ]
    },
    {
        "id": "3beefc43.434434",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 4776,
        "y": 1620,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "279e5fe1.a8b868"
            ]
        ]
    },
    {
        "id": "21292318.735edc",
        "type": "execute",
        "name": "execute RestApiCallNode domainA UNI Coloring",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-coloring-uni-port.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-network:networks/network=' + $tmp.domainA.eth-network-id + '/node=' + $tmp.src.pnf-name + '/ietf-network-topology:termination-point=' + $tmp.src.ltpId + '/ietf-te-topology:te' `\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2721,
        "y": 2870,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "aa98c0a5.978718",
                "47316c0a.b315dc"
            ]
        ]
    },
    {
        "id": "47316c0a.b315dc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2987,
        "y": 2850,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "a7504bbe.eb60e"
            ]
        ]
    },
    {
        "id": "aa98c0a5.978718",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2988.000213623047,
        "y": 2900.99990940094,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "98c604c1.7b11b8"
            ]
        ]
    },
    {
        "id": "a7504bbe.eb60e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing UNI Coloring for domain A\" />\n",
        "comments": "",
        "x": 3127.0002479553223,
        "y": 2850.0000009536743,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "98c604c1.7b11b8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3133.02725982666,
        "y": 2898.745394706726,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "ce066c5d.e7734",
        "type": "execute",
        "name": "execute RestApiCallNode domainB UNI Coloring",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-coloring-uni-port.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-network:networks/network=' + $tmp.domainB.eth-network-id + '/node=' + $tmp.dst.pnf-name + '/ietf-network-topology:termination-point=' + $tmp.dst.ltpId + '/ietf-te-topology:te' `\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2721,
        "y": 3236,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "77909c9d.223f24",
                "d69f9ea8.7be4"
            ]
        ]
    },
    {
        "id": "d69f9ea8.7be4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2987,
        "y": 3216,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "f7f9f969.a37708"
            ]
        ]
    },
    {
        "id": "77909c9d.223f24",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2988.000213623047,
        "y": 3266.99990940094,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "cf24be41.03bc48"
            ]
        ]
    },
    {
        "id": "f7f9f969.a37708",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing UNI coloring for domain B\" />\n",
        "comments": "",
        "x": 3127.0002479553223,
        "y": 3216.0000009536743,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "cf24be41.03bc48",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3133.02725982666,
        "y": 3264.745394706726,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "c2e43483.a12bd",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 4394,
        "y": 557,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "303c5717.c426f",
        "type": "execute",
        "name": "execute UUID generator for ethernet-service-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2750,
        "y": 691,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "c19c2198.0de5c",
        "type": "execute",
        "name": "execute UUID generator for otn-tunnel-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2731,
        "y": 741,
        "z": "4d37a11.42c136",
        "wires": [
            []
        ]
    },
    {
        "id": "23c06925.0d2eb6",
        "type": "for",
        "name": "for each allotted-resource",
        "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1988,
        "y": 243,
        "z": "4d37a11.42c136",
        "wires": [
            [
                "f805b6b.c60f548",
                "78e29884.225c08"
            ]
        ]
    },
    {
        "id": "f805b6b.c60f548",
        "type": "set",
        "name": "set the current allotted-resource-id",
        "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
        "comments": "",
        "x": 2272,
        "y": 213,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "e927f664.5c872",
        "type": "set",
        "name": "set query_param",
        "xml": "<set>\n<parameter name='prop.ethsrvType' value='`$network-route-A`' />\n\n",
        "comments": "",
        "x": 2628,
        "y": 2021,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "29397b6c.248454",
        "type": "set",
        "name": "unset parameters",
        "xml": "<set>\n<parameter name='domain-A.tunnel-tp-id' value='' />\n<parameter name='domain-A.node-id' value='' />\n<parameter name='domain-A.network-id' value=\"\" />\n<parameter name='domain-A.provider-id' value=\"\" />\n<parameter name='domain-A.client-id' value=\"\" />\n<parameter name='domain-A.te-topo-id' value=\"\" />\n<parameter name='domain-A.network-type' value=\"\" />\n<parameter name='domain-A.ltpId' value=\"\" />\n<parameter name='tmp.domain-A.network-id' value=\"\" />\n<parameter name='tmp.domain-A.ttp-id' value=\"\" />\n<parameter name='network-route-A' value=\"\" />\n<!--<parameter name='domain-A.' value=\"\" />-->\n\n<parameter name='request-id' value='' />\n<parameter name='otn-source-node' value='' />\n<parameter name='otn-dest-node' value='' />\n<parameter name='bw-odu' value=\"\" />\n<parameter name='src-ttp-id' value='' />\n<parameter name='dst-ttp-id' value='' />\n\n<parameter name='domain-B.tunnel-tp-id' value='' />\n<parameter name='domain-B.node-id' value='' />\n<parameter name='domain-B.network-id' value=\"\" />\n<parameter name='domain-B.provider-id' value=\"\" />\n<parameter name='domain-B.client-id' value=\"\" />\n<parameter name='domain-B.te-topo-id' value=\"\" />\n<parameter name='domain-B.network-type' value=\"\" />\n<parameter name='domain-B.ltpId' value=\"\" />\n<parameter name='tmp.domain-B.network-id' value=\"\" />\n<parameter name='tmp.domain-B.ttp-id' value=\"\" />\n<parameter name='network-route-B' value=\"\" />\n<!--<parameter name='domain-B.' value=\"\" />-->\n\n\n\n\n\n",
        "comments": "",
        "x": 2618,
        "y": 3327,
        "z": "4d37a11.42c136",
        "wires": []
    },
    {
        "id": "488403ee.0379ac",
        "type": "set",
        "name": "set new ethernet-service-name",
        "xml": "<set>\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />\n\n\n",
        "comments": "",
        "x": 2688,
        "y": 786,
        "z": "4d37a11.42c136",
        "wires": []
    }
]