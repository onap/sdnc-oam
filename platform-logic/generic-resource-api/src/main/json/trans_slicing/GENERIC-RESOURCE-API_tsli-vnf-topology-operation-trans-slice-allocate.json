[
    {
        "id": "a3297c66.2e7f5",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 142,
        "y": 86,
        "z": "a52db008.999ba",
        "wires": [
            [
                "48923819.f8ff98"
            ]
        ]
    },
    {
        "id": "48923819.f8ff98",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 426.2856903076172,
        "y": 147.23810863494873,
        "z": "a52db008.999ba",
        "wires": [
            [
                "e1ba1fcc.8dbf6"
            ]
        ]
    },
    {
        "id": "e1ba1fcc.8dbf6",
        "type": "method",
        "name": "method tsli-vnf-topology-operation-trans-slice-allocate",
        "xml": "<method rpc='tsli-vnf-topology-operation-trans-slice-allocate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 432.42860412597656,
        "y": 232.00003051757812,
        "z": "a52db008.999ba",
        "wires": [
            [
                "8bc33ebc.b214a8"
            ]
        ]
    },
    {
        "id": "8bc33ebc.b214a8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 802.238037109375,
        "y": 256.66668701171875,
        "z": "a52db008.999ba",
        "wires": [
            [
                "e456a6e6.bd0f",
                "de4cd097.718578",
                "7ac4d896.f266b8"
            ]
        ]
    },
    {
        "id": "e456a6e6.bd0f",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1103.571533203125,
        "y": 527.5969848632812,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "de4cd097.718578",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
        "comments": "",
        "outputs": 1,
        "x": 1125,
        "y": 230,
        "z": "a52db008.999ba",
        "wires": [
            [
                "2bb44cf2.b576bc",
                "23a4fd03.4dc0a2",
                "7fe07366.1d3c84"
            ]
        ]
    },
    {
        "id": "2bb44cf2.b576bc",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1350,
        "y": 88,
        "z": "a52db008.999ba",
        "wires": [
            [
                "de3469e6.1a5318"
            ]
        ]
    },
    {
        "id": "23a4fd03.4dc0a2",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1359.490966796875,
        "y": 130.57403564453125,
        "z": "a52db008.999ba",
        "wires": [
            [
                "abc9c45c.0486d"
            ]
        ]
    },
    {
        "id": "7fe07366.1d3c84",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1348,
        "y": 177,
        "z": "a52db008.999ba",
        "wires": [
            [
                "bf6c9630.da1718"
            ]
        ]
    },
    {
        "id": "de3469e6.1a5318",
        "type": "switchNode",
        "name": "switch allotted-resources_length != 0",
        "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1589,
        "y": 85,
        "z": "a52db008.999ba",
        "wires": [
            [
                "3fe961c5.f65bb6",
                "9b0ccc32.5daa98"
            ]
        ]
    },
    {
        "id": "abc9c45c.0486d",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1513.0623779296875,
        "y": 133.85977172851562,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "bf6c9630.da1718",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1517,
        "y": 178,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "e72a9478.9558f",
        "type": "set",
        "name": "set the 1st allotted-resource-id",
        "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[0].id`\" />\n\n\n",
        "comments": "",
        "x": 1988,
        "y": 152,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "3fe961c5.f65bb6",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1802,
        "y": 109,
        "z": "a52db008.999ba",
        "wires": [
            [
                "7db53ef.cfaf2c"
            ]
        ]
    },
    {
        "id": "9b0ccc32.5daa98",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1804,
        "y": 49,
        "z": "a52db008.999ba",
        "wires": [
            []
        ]
    },
    {
        "id": "3b9d4f7a.e5b418",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 1104,
        "y": 118,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "7db53ef.cfaf2c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1787,
        "y": 197,
        "z": "a52db008.999ba",
        "wires": [
            [
                "e72a9478.9558f",
                "f1da2bc3.8935b"
            ]
        ]
    },
    {
        "id": "fd1e5e1b.83e83",
        "type": "set",
        "name": "set network-route-A",
        "xml": "<set>\n<parameter name='network-route-A' value=\"`$tmp.aai.logical-link.link-name`\" />\n\n\n",
        "comments": "",
        "x": 2349,
        "y": 795,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "ff342d97.b64c78",
        "type": "set",
        "name": "set network-route-B",
        "xml": "<set>\n<parameter name='network-route-B' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
        "comments": "",
        "x": 2351,
        "y": 846,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "f1da2bc3.8935b",
        "type": "save",
        "name": "get allotted-resource from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1991,
        "y": 227,
        "z": "a52db008.999ba",
        "wires": [
            [
                "24443c7d.51e17c",
                "5466a6b1.99c71",
                "6dbbe1dd.c8d2"
            ]
        ]
    },
    {
        "id": "24443c7d.51e17c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2207,
        "y": 294,
        "z": "a52db008.999ba",
        "wires": [
            [
                "381969a5.e5019e"
            ]
        ]
    },
    {
        "id": "5466a6b1.99c71",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2207.490966796875,
        "y": 193.573974609375,
        "z": "a52db008.999ba",
        "wires": [
            [
                "5f41762b.9fae3"
            ]
        ]
    },
    {
        "id": "6dbbe1dd.c8d2",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2203,
        "y": 243,
        "z": "a52db008.999ba",
        "wires": [
            [
                "35df5bd.60d91a4"
            ]
        ]
    },
    {
        "id": "5f41762b.9fae3",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2385.0625,
        "y": 193.8597412109375,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "35df5bd.60d91a4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2385,
        "y": 243,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "8c284458.c08ae8",
        "type": "save",
        "name": "get logical-link from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
        "comments": "",
        "outputs": 1,
        "x": 1726,
        "y": 716,
        "z": "a52db008.999ba",
        "wires": [
            [
                "2b62ab10.ff50ec",
                "a72426b1.68469",
                "f1a9c962.2a68a8"
            ]
        ]
    },
    {
        "id": "a72426b1.68469",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2017.490966796875,
        "y": 694.573974609375,
        "z": "a52db008.999ba",
        "wires": [
            [
                "b15724ee.fb934"
            ]
        ]
    },
    {
        "id": "f1a9c962.2a68a8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2006,
        "y": 739,
        "z": "a52db008.999ba",
        "wires": [
            [
                "71027f5f.6dfd2"
            ]
        ]
    },
    {
        "id": "b15724ee.fb934",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2166.0625,
        "y": 694.8597412109375,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "71027f5f.6dfd2",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2165,
        "y": 739,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "2b62ab10.ff50ec",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2013,
        "y": 818,
        "z": "a52db008.999ba",
        "wires": [
            [
                "68ca5242.42eadc"
            ]
        ]
    },
    {
        "id": "68ca5242.42eadc",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2152,
        "y": 818,
        "z": "a52db008.999ba",
        "wires": [
            [
                "fd1e5e1b.83e83",
                "ff342d97.b64c78",
                "c6e4c4bb.cde228",
                "beeca149.096358",
                "b3a21500.4dc258",
                "4a385582.c0497c",
                "8ecd4f21.958f3",
                "87e71c84.c17b98",
                "b0430b3.4eee0f8",
                "9e9e0741.eed478",
                "41475eff.deafd",
                "171af565.db9233",
                "a0a45fd6.c31fe",
                "fdbb72c5.61c228",
                "62bd6081.059d7",
                "3f4df906.b67d7e",
                "fad5035b.7ee3a8",
                "d037b0c3.f093c"
            ]
        ]
    },
    {
        "id": "c6e4c4bb.cde228",
        "type": "save",
        "name": "get network-route-A from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-A'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-A\">",
        "comments": "",
        "outputs": 1,
        "x": 2381,
        "y": 899,
        "z": "a52db008.999ba",
        "wires": [
            [
                "99527920.d104f",
                "471613.ac9f61ec",
                "d7106a2a.e2e008"
            ]
        ]
    },
    {
        "id": "beeca149.096358",
        "type": "save",
        "name": "get network-route-B from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-B'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-B\">",
        "comments": "",
        "outputs": 1,
        "x": 2360,
        "y": 1500.9998779296875,
        "z": "a52db008.999ba",
        "wires": [
            [
                "f5b57d2.711fb8",
                "ee69c7ed.d244a",
                "b86b9154.d8271"
            ]
        ]
    },
    {
        "id": "99527920.d104f",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2582,
        "y": 783,
        "z": "a52db008.999ba",
        "wires": [
            [
                "dee03a78.25dd08"
            ]
        ]
    },
    {
        "id": "471613.ac9f61ec",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2577.509033203125,
        "y": 832.426025390625,
        "z": "a52db008.999ba",
        "wires": [
            [
                "afb5fd1c.14f968"
            ]
        ]
    },
    {
        "id": "d7106a2a.e2e008",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2581.509033203125,
        "y": 883.426025390625,
        "z": "a52db008.999ba",
        "wires": [
            [
                "b1e48bbc.9418f8"
            ]
        ]
    },
    {
        "id": "dee03a78.25dd08",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2730.571533203125,
        "y": 782.2857666015625,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "afb5fd1c.14f968",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2720.509033203125,
        "y": 832.426025390625,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "f5b57d2.711fb8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2583,
        "y": 1470.9998779296875,
        "z": "a52db008.999ba",
        "wires": [
            [
                "e4bc5398.587c9"
            ]
        ]
    },
    {
        "id": "ee69c7ed.d244a",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2578.509033203125,
        "y": 1520.4259033203125,
        "z": "a52db008.999ba",
        "wires": [
            [
                "7a22de95.f8d34"
            ]
        ]
    },
    {
        "id": "b86b9154.d8271",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2582.509033203125,
        "y": 1571.4259033203125,
        "z": "a52db008.999ba",
        "wires": [
            [
                "706786f4.1c86"
            ]
        ]
    },
    {
        "id": "e4bc5398.587c9",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2731.571533203125,
        "y": 1470.28564453125,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "7a22de95.f8d34",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2721.509033203125,
        "y": 1520.4259033203125,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "6a5608a5.7646c8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3395.66650390625,
        "y": 927,
        "z": "a52db008.999ba",
        "wires": [
            [
                "e59ae0d9.0b3bb8",
                "b65b8a91.4e15",
                "600bf3e5.b14284",
                "af7a5358.49a49",
                "a8e7dd16.944608"
            ]
        ]
    },
    {
        "id": "b8369203.6c1e7",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3223,
        "y": 928,
        "z": "a52db008.999ba",
        "wires": [
            [
                "6a5608a5.7646c8"
            ]
        ]
    },
    {
        "id": "9feeef15.8800c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3232.490966796875,
        "y": 970.5740356445312,
        "z": "a52db008.999ba",
        "wires": [
            [
                "cbf27e14.644ef8"
            ]
        ]
    },
    {
        "id": "e8e1bd1d.029dd",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3221,
        "y": 1017,
        "z": "a52db008.999ba",
        "wires": [
            [
                "7478805e.d0dee8"
            ]
        ]
    },
    {
        "id": "cbf27e14.644ef8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3386.0623779296875,
        "y": 973.8597717285156,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "7478805e.d0dee8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3390,
        "y": 1018,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "b1e48bbc.9418f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2743,
        "y": 885,
        "z": "a52db008.999ba",
        "wires": [
            [
                "b8e4ab1b.5f9428",
                "7b409cff.da197c"
            ]
        ]
    },
    {
        "id": "706786f4.1c86",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2733,
        "y": 1572.9998779296875,
        "z": "a52db008.999ba",
        "wires": [
            [
                "6545b277.ec5df4",
                "e04c02f4.2f63f8"
            ]
        ]
    },
    {
        "id": "a1cc2eec.aa7708",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3363.66650390625,
        "y": 1763,
        "z": "a52db008.999ba",
        "wires": [
            [
                "69afc187.c0c28",
                "9c8c62ca.8659",
                "72280e7f.000388",
                "5d487f8.16a5d",
                "34f70001.b13958"
            ]
        ]
    },
    {
        "id": "a9223749.8519e8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3191,
        "y": 1764,
        "z": "a52db008.999ba",
        "wires": [
            [
                "a1cc2eec.aa7708"
            ]
        ]
    },
    {
        "id": "8aac19ac.984638",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3200.490966796875,
        "y": 1806.5740356445312,
        "z": "a52db008.999ba",
        "wires": [
            [
                "e01c6b8b.6173d8"
            ]
        ]
    },
    {
        "id": "15568030.09492",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3189,
        "y": 1853,
        "z": "a52db008.999ba",
        "wires": [
            [
                "f17ea401.42a54"
            ]
        ]
    },
    {
        "id": "e01c6b8b.6173d8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3354.0623779296875,
        "y": 1809.8597717285156,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "f17ea401.42a54",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3358,
        "y": 1854,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "e59ae0d9.0b3bb8",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3660,
        "y": 911,
        "z": "a52db008.999ba",
        "wires": [
            [
                "b90f8b2c.3443f8",
                "f2af84b7.f19e7"
            ]
        ]
    },
    {
        "id": "f2af84b7.f19e7",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3883,
        "y": 866,
        "z": "a52db008.999ba",
        "wires": [
            [
                "af749f90.aea73"
            ]
        ]
    },
    {
        "id": "b90f8b2c.3443f8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3885,
        "y": 930,
        "z": "a52db008.999ba",
        "wires": [
            [
                "37b87470.480804"
            ]
        ]
    },
    {
        "id": "58adc121.da62b8",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
        "comments": "",
        "x": 4218,
        "y": 824,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "37b87470.480804",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 4047,
        "y": 926,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "af749f90.aea73",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4048,
        "y": 863,
        "z": "a52db008.999ba",
        "wires": [
            [
                "a0d3646d.84d22",
                "58adc121.da62b8"
            ]
        ]
    },
    {
        "id": "a0d3646d.84d22",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
        "comments": "",
        "x": 4219,
        "y": 929,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "b948285d.fc6638",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 4220,
        "y": 878,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "600bf3e5.b14284",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='' />\n\n<parameter name='bandwidth-profile-name' value='`$prop.sotn.etht-svc-name`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='CIR' value='`$prop.sotn.cir`' />\n<parameter name='EIR' value='`$prop.sotn.eir`' />\n<parameter name='CBS' value='`$prop.sotn.cbs`' />\n<parameter name='EBS' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3662,
        "y": 1070,
        "z": "a52db008.999ba",
        "wires": [
            []
        ]
    },
    {
        "id": "b65b8a91.4e15",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainA",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3707,
        "y": 980,
        "z": "a52db008.999ba",
        "wires": [
            []
        ]
    },
    {
        "id": "584061d2.7f676",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[?] all together\nin order to assemble the correct values for provider-id, \ntopology-id, node-id, etc.",
        "comments": "",
        "x": 3596,
        "y": 1021,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "69afc187.c0c28",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3650,
        "y": 1767.0001220703125,
        "z": "a52db008.999ba",
        "wires": [
            [
                "73786f45.91fbd",
                "a8286fc.413fb9"
            ]
        ]
    },
    {
        "id": "a8286fc.413fb9",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3873,
        "y": 1722.0001220703125,
        "z": "a52db008.999ba",
        "wires": [
            [
                "6edaf2ce.ba97ac"
            ]
        ]
    },
    {
        "id": "73786f45.91fbd",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3875,
        "y": 1786.0001220703125,
        "z": "a52db008.999ba",
        "wires": [
            [
                "fcba834.c469f8"
            ]
        ]
    },
    {
        "id": "e5ecf778.a4711",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
        "comments": "",
        "x": 4208,
        "y": 1680.0001220703125,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "fcba834.c469f8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 4034,
        "y": 1805.0001220703125,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "6edaf2ce.ba97ac",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4038,
        "y": 1719.0001220703125,
        "z": "a52db008.999ba",
        "wires": [
            [
                "e5ecf778.a4711",
                "865f8e50.82a5c"
            ]
        ]
    },
    {
        "id": "865f8e50.82a5c",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
        "comments": "",
        "x": 4209,
        "y": 1785.0001220703125,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "9e10e06d.c116e8",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 4204,
        "y": 1734.0001220703125,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "72280e7f.000388",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='' />\n\n\n<parameter name='bandwidth-profile-name' value='`$prop.sotn.etht-svc-name`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='CIR' value='`$prop.sotn.cir`' />\n<parameter name='EIR' value='`$prop.sotn.eir`' />\n<parameter name='CBS' value='`$prop.sotn.cbs`' />\n<parameter name='EBS' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3652,
        "y": 1926.0001220703125,
        "z": "a52db008.999ba",
        "wires": [
            []
        ]
    },
    {
        "id": "9c8c62ca.8659",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainB",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3697,
        "y": 1836.0001220703125,
        "z": "a52db008.999ba",
        "wires": [
            []
        ]
    },
    {
        "id": "eb2e4b08.8488e",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[?] all together\nin order to assemble the correct values for provider-id, \ntopology-id, node-id, etc.",
        "comments": "",
        "x": 3586,
        "y": 1874.0001220703125,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "b3a21500.4dc258",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2561,
        "y": 2001,
        "z": "a52db008.999ba",
        "wires": [
            []
        ]
    },
    {
        "id": "4a385582.c0497c",
        "type": "set",
        "name": "set attachment_param",
        "xml": "<set>\n<parameter name='prop.connection-attachment.access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='prop.connection-attachment.access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='prop.connection-attachment.access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='prop.connection-attachment.access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='prop.connection-attachment.access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n\n<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='prop.remote.connection-attachment.access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='prop.remote.connection-attachment.access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n\n<!--<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$oof.vpn.access-provider-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-client-id' value='`$oof.vpn.access-client-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$oof.vpn.access-topology-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-node-id' value='`$oof.vpn.access-node-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />-->\n",
        "comments": "",
        "x": 2355,
        "y": 1941,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "1846dda4.ce84b2",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "put proper values for src topology-id, node-id, ltp-id, etc (in domain A)\nand dst topology-id, node-id, ltp-id, etc (in domain B)",
        "comments": "",
        "x": 2329,
        "y": 1894,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "8ecd4f21.958f3",
        "type": "save",
        "name": "save vpn-binding A resource (aka. OTN domainA) in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-domainA-uuid' >\n<parameter name='vpn-id' value='`$prop.vpn-binding-domainA-uuid`' />\n<parameter name='vpn-name' value='`$prop.vpn-binding-domainA-uuid`' />\n<parameter name='access-provider-id' value='`$domain-A.provider-id`' />\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<parameter name='access-client-id' value='`$domain-A.client-id`' />\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<parameter name='access-topology-id' value='`$domain-A.te-topo-id`' />\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<parameter name='src-access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<!--<parameter name='src-access-ltp-id' value='`$source.tunnel-tp-id`' />-->\n<parameter name='src-access-ltp-id' value='' />\n<parameter name='dst-access-node-id' value='`$domain-A.node-id`' />\n<parameter name='dst-access-ltp-id' value='`$domain-A.tunnel-tp-id`' />\n<parameter name='vpn-type' value='`$prop.global.sotn.vpnType`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2437,
        "y": 2160,
        "z": "a52db008.999ba",
        "wires": [
            [
                "9a891a89.705e9"
            ]
        ]
    },
    {
        "id": "87e71c84.c17b98",
        "type": "save",
        "name": "save connectivity-A relationship to vpn-binding-A, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2440.5,
        "y": 2230,
        "z": "a52db008.999ba",
        "wires": [
            []
        ]
    },
    {
        "id": "65814f19.31d048",
        "type": "save",
        "name": "save srcLTP relationship in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $oof.vpn.access-node-id + '/p-interfaces/p-interface/' + $src-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$src-ltpId`\" />\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3088.5,
        "y": 2149,
        "z": "a52db008.999ba",
        "wires": [
            []
        ]
    },
    {
        "id": "9a488056.fd463",
        "type": "save",
        "name": "save dstLTP relationship in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $oof.vpn.access-node-id + '/p-interfaces/p-interface/' + $dst-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$dst-ltpId`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3090.5,
        "y": 2188,
        "z": "a52db008.999ba",
        "wires": [
            []
        ]
    },
    {
        "id": "af7a5358.49a49",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 3790,
        "y": 1118,
        "z": "a52db008.999ba",
        "wires": [
            []
        ]
    },
    {
        "id": "5d487f8.16a5d",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 3779,
        "y": 1991.0001220703125,
        "z": "a52db008.999ba",
        "wires": [
            []
        ]
    },
    {
        "id": "9a891a89.705e9",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2737,
        "y": 2167,
        "z": "a52db008.999ba",
        "wires": [
            [
                "a2095f6a.84829"
            ]
        ]
    },
    {
        "id": "a2095f6a.84829",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2877.500244140625,
        "y": 2168.25390625,
        "z": "a52db008.999ba",
        "wires": [
            []
        ]
    },
    {
        "id": "421e8d3c.2d000c",
        "type": "comment",
        "name": "TODO: FIXME: do we need this relationship?",
        "info": "",
        "comments": "",
        "x": 3125,
        "y": 2108,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "ec5e7e31.de7c9",
        "type": "comment",
        "name": "TODO: FIXME: put proper values",
        "info": "",
        "comments": "",
        "x": 2404,
        "y": 2120,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "b0430b3.4eee0f8",
        "type": "save",
        "name": "save vpn-binding B resource (aka. OTN domainB) in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-domainB-uuid' >\n<parameter name='vpn-id' value='`$prop.vpn-binding-domainB-uuid`' />\n<parameter name='vpn-name' value='`$prop.vpn-binding-domainB-uuid`' />\n<parameter name='access-provider-id' value='`$domain-B.provider-id`' />\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />-->\n<parameter name='access-client-id' value='`$domain-B.client-id`' />\n<!--<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />-->\n<parameter name='access-topology-id' value='`$domain-B.te-topo-id`' />\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />-->\n<parameter name='src-access-node-id' value='`$domain-B.node-id`' />\n<parameter name='src-access-ltp-id' value='`$domain-B.tunnel-tp-id`' />\n<parameter name='dst-access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<!--<parameter name='dst-access-ltp-id' value='`$destination.tunnel-tp-id`' />-->\n<parameter name='dst-access-ltp-id' value='' />\n<parameter name='vpn-type' value='`$prop.global.sotn.vpnType`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2440,
        "y": 2448,
        "z": "a52db008.999ba",
        "wires": [
            [
                "ceffa653.90d39"
            ]
        ]
    },
    {
        "id": "3a1d826b.1f953e",
        "type": "comment",
        "name": "TODO: FIXME: do we need this relationship?",
        "info": "",
        "comments": "",
        "x": 3128,
        "y": 2388,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "4a53aeab.a2778",
        "type": "save",
        "name": "save srcLTP relationship in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $oof.vpn.access-node-id + '/p-interfaces/p-interface/' + $src-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$src-ltpId`\" />\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3091.5,
        "y": 2429,
        "z": "a52db008.999ba",
        "wires": [
            []
        ]
    },
    {
        "id": "36a3debe.6aad72",
        "type": "save",
        "name": "save dstLTP relationship in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $oof.vpn.access-node-id + '/p-interfaces/p-interface/' + $dst-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$dst-ltpId`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3093.5,
        "y": 2468,
        "z": "a52db008.999ba",
        "wires": [
            []
        ]
    },
    {
        "id": "a45d9658.764968",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2880.500244140625,
        "y": 2448.25390625,
        "z": "a52db008.999ba",
        "wires": [
            []
        ]
    },
    {
        "id": "ceffa653.90d39",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2740,
        "y": 2447,
        "z": "a52db008.999ba",
        "wires": [
            [
                "a45d9658.764968"
            ]
        ]
    },
    {
        "id": "7449a31b.49a87c",
        "type": "comment",
        "name": "TODO: FIXME: put proper values",
        "info": "",
        "comments": "",
        "x": 2420,
        "y": 2408,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "9e9e0741.eed478",
        "type": "save",
        "name": "save connectivity-B relationship to vpn-binding-B, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-domainB-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2438.5,
        "y": 2488,
        "z": "a52db008.999ba",
        "wires": [
            []
        ]
    },
    {
        "id": "a04f201b.1fb08",
        "type": "comment",
        "name": "TODO: FIXME:",
        "info": "set attachment param and send request to NCE-T\nfor bandwidth matrix\nmay require a new template for JSON body",
        "comments": "",
        "x": 2312,
        "y": 2571,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "a0a45fd6.c31fe",
        "type": "set",
        "name": "set attachment_param domain A",
        "xml": "<set>\n<parameter name='request-id' value='`$prop.vpn-binding-domainA-uuid`' />\n<parameter name='otn-source-node' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='otn-dest-node' value='`$domain-A.node-id`' />\n<parameter name='bw-odu' value=\"`'0,' + $maximum-bandwidth /1000 *2 /3 `\" />\n<!--<parameter name='src-ttp-id' value='`$source.tunnel-tp-id`' />-->\n<parameter name='dst-ttp-id' value='`$domain-A.tunnel-tp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n",
        "comments": "",
        "x": 2377,
        "y": 2616,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "32eb8024.15dcc8",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 4834,
        "y": 638,
        "z": "a52db008.999ba",
        "wires": [
            [
                "73d2c0a6.ca0098",
                "2f388561.aeb472",
                "c9248b9c.994ac"
            ]
        ]
    },
    {
        "id": "381969a5.e5019e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2387,
        "y": 294,
        "z": "a52db008.999ba",
        "wires": [
            [
                "2fa39853.fd6f7"
            ]
        ]
    },
    {
        "id": "93b21596.ec10e8",
        "type": "outcome",
        "name": "logical-link",
        "xml": "<outcome value='logical-link'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1317.0001220703125,
        "y": 711.0001220703125,
        "z": "a52db008.999ba",
        "wires": [
            [
                "993cc770.3c90b"
            ]
        ]
    },
    {
        "id": "8fdb5adc.4040d",
        "type": "switchNode",
        "name": "switch allotted-resource.relationship-list not empty",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2055,
        "y": 417,
        "z": "a52db008.999ba",
        "wires": [
            [
                "332b207c.0fec28",
                "310fb819.3e915"
            ]
        ]
    },
    {
        "id": "310fb819.3e915",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2365,
        "y": 424,
        "z": "a52db008.999ba",
        "wires": [
            []
        ]
    },
    {
        "id": "332b207c.0fec28",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2364,
        "y": 478,
        "z": "a52db008.999ba",
        "wires": [
            [
                "b6e0228b.bc6398"
            ]
        ]
    },
    {
        "id": "d9c8107.cbe1d7",
        "type": "set",
        "name": "set the 1st logical-link-name",
        "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 1737,
        "y": 661,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "993cc770.3c90b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1494,
        "y": 704,
        "z": "a52db008.999ba",
        "wires": [
            [
                "d9c8107.cbe1d7",
                "8c284458.c08ae8"
            ]
        ]
    },
    {
        "id": "d4f8497.5d30938",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 2923,
        "y": 890,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "b8e4ab1b.5f9428",
        "type": "save",
        "name": "get p-interface-src from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 2966,
        "y": 955,
        "z": "a52db008.999ba",
        "wires": [
            [
                "b8369203.6c1e7",
                "9feeef15.8800c",
                "e8e1bd1d.029dd"
            ]
        ]
    },
    {
        "id": "6545b277.ec5df4",
        "type": "save",
        "name": "get p-interface-dst from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 2963,
        "y": 1799,
        "z": "a52db008.999ba",
        "wires": [
            [
                "a9223749.8519e8",
                "8aac19ac.984638",
                "15568030.09492"
            ]
        ]
    },
    {
        "id": "4f7449aa.1cee1",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 2924,
        "y": 1743,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "2fa39853.fd6f7",
        "type": "save",
        "name": "get allotted-resource relationship from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2680,
        "y": 241,
        "z": "a52db008.999ba",
        "wires": [
            [
                "e187deec.568f28",
                "ca2e6451.404f78",
                "42b58dd4.7191cc"
            ]
        ]
    },
    {
        "id": "ca2e6451.404f78",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2953.490966796875,
        "y": 133.573974609375,
        "z": "a52db008.999ba",
        "wires": [
            [
                "e5b0a6e5.509578"
            ]
        ]
    },
    {
        "id": "e5b0a6e5.509578",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3131.0625,
        "y": 133.8597412109375,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "42b58dd4.7191cc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2949,
        "y": 183,
        "z": "a52db008.999ba",
        "wires": [
            [
                "ecd1ffcd.8fafe8"
            ]
        ]
    },
    {
        "id": "ecd1ffcd.8fafe8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3131,
        "y": 183,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "e187deec.568f28",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2953,
        "y": 234,
        "z": "a52db008.999ba",
        "wires": [
            [
                "d246d860.a6b138"
            ]
        ]
    },
    {
        "id": "d246d860.a6b138",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3133,
        "y": 234,
        "z": "a52db008.999ba",
        "wires": [
            [
                "8fdb5adc.4040d"
            ]
        ]
    },
    {
        "id": "65e46dcd.9c5144",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2624,
        "y": 458,
        "z": "a52db008.999ba",
        "wires": [
            [
                "dd606d5c.9d70f"
            ]
        ]
    },
    {
        "id": "dd606d5c.9d70f",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2904,
        "y": 458,
        "z": "a52db008.999ba",
        "wires": [
            [
                "93b21596.ec10e8"
            ]
        ]
    },
    {
        "id": "da58235b.ecd51",
        "type": "outcome",
        "name": "network-policy",
        "xml": "<outcome value='network-policy'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3109,
        "y": 432,
        "z": "a52db008.999ba",
        "wires": [
            [
                "bae40be2.1a0898"
            ]
        ]
    },
    {
        "id": "bae40be2.1a0898",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3285.9998779296875,
        "y": 424.9998779296875,
        "z": "a52db008.999ba",
        "wires": [
            [
                "26610962.4550fe",
                "1b905535.187f13"
            ]
        ]
    },
    {
        "id": "26610962.4550fe",
        "type": "set",
        "name": "set the 1st network-policy-id",
        "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 3528.9998779296875,
        "y": 381.9998779296875,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "1b905535.187f13",
        "type": "save",
        "name": "get network-policy from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
        "comments": "",
        "outputs": 1,
        "x": 3517.9998779296875,
        "y": 436.9998779296875,
        "z": "a52db008.999ba",
        "wires": [
            [
                "690d79a7.ec256",
                "33a9cbc4.26d4ec",
                "93a52247.c17dd8"
            ]
        ]
    },
    {
        "id": "93a52247.c17dd8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3771,
        "y": 323,
        "z": "a52db008.999ba",
        "wires": [
            [
                "2900fde3.f79c7a"
            ]
        ]
    },
    {
        "id": "2900fde3.f79c7a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3919.571533203125,
        "y": 323.2857666015625,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "6f314ac7.786434",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3918.509033203125,
        "y": 367.426025390625,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "33a9cbc4.26d4ec",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3759.509033203125,
        "y": 367.426025390625,
        "z": "a52db008.999ba",
        "wires": [
            [
                "6f314ac7.786434"
            ]
        ]
    },
    {
        "id": "690d79a7.ec256",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3766.509033203125,
        "y": 446.426025390625,
        "z": "a52db008.999ba",
        "wires": [
            [
                "13407089.aa8267"
            ]
        ]
    },
    {
        "id": "13407089.aa8267",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3905.509033203125,
        "y": 446.426025390625,
        "z": "a52db008.999ba",
        "wires": [
            [
                "d0bc6aa5.e1fca8"
            ]
        ]
    },
    {
        "id": "d0bc6aa5.e1fca8",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n\n\n",
        "comments": "",
        "x": 4111,
        "y": 444,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "7b409cff.da197c",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2967,
        "y": 625,
        "z": "a52db008.999ba",
        "wires": [
            [
                "6c1cd175.73bac",
                "685f5c8c.4102b4"
            ]
        ]
    },
    {
        "id": "685f5c8c.4102b4",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3190,
        "y": 611,
        "z": "a52db008.999ba",
        "wires": [
            [
                "1331c07a.407898"
            ]
        ]
    },
    {
        "id": "6c1cd175.73bac",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3192,
        "y": 644,
        "z": "a52db008.999ba",
        "wires": [
            [
                "c779d61e.1b8528"
            ]
        ]
    },
    {
        "id": "c779d61e.1b8528",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 3335,
        "y": 641,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "1331c07a.407898",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3338,
        "y": 604,
        "z": "a52db008.999ba",
        "wires": [
            [
                "59393385.2a7954",
                "5055791b.75c5d"
            ]
        ]
    },
    {
        "id": "59393385.2a7954",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
        "comments": "",
        "x": 3500,
        "y": 599,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "e04c02f4.2f63f8",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2981,
        "y": 1461.9998779296875,
        "z": "a52db008.999ba",
        "wires": [
            [
                "250eb2ce.721286",
                "7ff4092b.9f4c3"
            ]
        ]
    },
    {
        "id": "7ff4092b.9f4c3",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3204,
        "y": 1447.9998779296875,
        "z": "a52db008.999ba",
        "wires": [
            [
                "4e15b8c4.ecfe8"
            ]
        ]
    },
    {
        "id": "250eb2ce.721286",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3206,
        "y": 1480.9998779296875,
        "z": "a52db008.999ba",
        "wires": [
            [
                "d740a9b4.496fa"
            ]
        ]
    },
    {
        "id": "d740a9b4.496fa",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 3349,
        "y": 1477.9998779296875,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "4e15b8c4.ecfe8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3352,
        "y": 1440.9998779296875,
        "z": "a52db008.999ba",
        "wires": [
            [
                "a09d9728.0836a8",
                "a9ef3bf.dca6748"
            ]
        ]
    },
    {
        "id": "a09d9728.0836a8",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
        "comments": "",
        "x": 3546,
        "y": 1444,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "7ac4d896.f266b8",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 1092,
        "y": 170,
        "z": "a52db008.999ba",
        "wires": [
            []
        ]
    },
    {
        "id": "41475eff.deafd",
        "type": "execute",
        "name": "execute UUID generator for vpn-binding domainA",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.vpn-binding-domainA-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2443,
        "y": 2082,
        "z": "a52db008.999ba",
        "wires": [
            []
        ]
    },
    {
        "id": "171af565.db9233",
        "type": "execute",
        "name": "execute UUID generator for vpn-binding domainB",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.vpn-binding-domainB-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2441,
        "y": 2370,
        "z": "a52db008.999ba",
        "wires": [
            []
        ]
    },
    {
        "id": "a8e7dd16.944608",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3614,
        "y": 1195,
        "z": "a52db008.999ba",
        "wires": [
            [
                "58871d7.533a164"
            ]
        ]
    },
    {
        "id": "58871d7.533a164",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3820,
        "y": 1195,
        "z": "a52db008.999ba",
        "wires": [
            [
                "e6111c32.d5195"
            ]
        ]
    },
    {
        "id": "e6111c32.d5195",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4035.28564453125,
        "y": 1194.82177734375,
        "z": "a52db008.999ba",
        "wires": [
            [
                "4a0a1881.22b0b"
            ]
        ]
    },
    {
        "id": "4a0a1881.22b0b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4242.1171875,
        "y": 1195.34033203125,
        "z": "a52db008.999ba",
        "wires": [
            [
                "5e5dd832.1a8688",
                "54bc0e63.9b6c2",
                "21213693.b01ef2"
            ]
        ]
    },
    {
        "id": "5e5dd832.1a8688",
        "type": "set",
        "name": "set source ttp-id",
        "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4457.1171875,
        "y": 1157.34033203125,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "54bc0e63.9b6c2",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4454.1171875,
        "y": 1196.34033203125,
        "z": "a52db008.999ba",
        "wires": [
            [
                "de5f8f91.d806"
            ]
        ]
    },
    {
        "id": "21213693.b01ef2",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4409.6171875,
        "y": 1238.34033203125,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "de5f8f91.d806",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4634.6171875,
        "y": 1195.34033203125,
        "z": "a52db008.999ba",
        "wires": [
            [
                "f282b1a5.b5514"
            ]
        ]
    },
    {
        "id": "f282b1a5.b5514",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4792.6171875,
        "y": 1195.34033203125,
        "z": "a52db008.999ba",
        "wires": [
            [
                "5cf873ba.a6923c"
            ]
        ]
    },
    {
        "id": "5cf873ba.a6923c",
        "type": "set",
        "name": "set source tunnel tp ip",
        "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 4999.6171875,
        "y": 1195.34033203125,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "34f70001.b13958",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3611,
        "y": 2064.0001220703125,
        "z": "a52db008.999ba",
        "wires": [
            [
                "a071673c.fc9a28"
            ]
        ]
    },
    {
        "id": "a071673c.fc9a28",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3817,
        "y": 2064.0001220703125,
        "z": "a52db008.999ba",
        "wires": [
            [
                "6adf0421.fc4f54"
            ]
        ]
    },
    {
        "id": "6adf0421.fc4f54",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4032.28564453125,
        "y": 2063.8218994140625,
        "z": "a52db008.999ba",
        "wires": [
            [
                "2bb1f1c3.65f2c6"
            ]
        ]
    },
    {
        "id": "2bb1f1c3.65f2c6",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4239.1171875,
        "y": 2064.3404541015625,
        "z": "a52db008.999ba",
        "wires": [
            [
                "11642463.fe6e2c",
                "c588c96b.efcac",
                "4df609a.395b578"
            ]
        ]
    },
    {
        "id": "11642463.fe6e2c",
        "type": "set",
        "name": "set destination ttp-id",
        "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4454.1171875,
        "y": 2026.3404541015625,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "c588c96b.efcac",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4451.1171875,
        "y": 2065.3404541015625,
        "z": "a52db008.999ba",
        "wires": [
            [
                "946398a2.3fdd3"
            ]
        ]
    },
    {
        "id": "4df609a.395b578",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4406.6171875,
        "y": 2107.3404541015625,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "946398a2.3fdd3",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4631.6171875,
        "y": 2064.3404541015625,
        "z": "a52db008.999ba",
        "wires": [
            [
                "4ada9462.92f41c"
            ]
        ]
    },
    {
        "id": "4ada9462.92f41c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4789.6171875,
        "y": 2064.3404541015625,
        "z": "a52db008.999ba",
        "wires": [
            [
                "85bbe5c.988a398"
            ]
        ]
    },
    {
        "id": "85bbe5c.988a398",
        "type": "set",
        "name": "set destination tunnel tp ip",
        "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 4996.6171875,
        "y": 2064.3404541015625,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "62bd6081.059d7",
        "type": "set",
        "name": "set attachment_param domain B",
        "xml": "<set>\n<parameter name='request-id' value='`$prop.vpn-binding-domainB-uuid`' />\n<parameter name='otn-source-node' value='`$domain-B.node-id`' />\n<parameter name='otn-dest-node' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<!--<parameter name='bw-odu' value='`$maximum-bandwidth /10`' />-->\n<parameter name='bw-odu' value=\"`'0,' + $maximum-bandwidth /1000 *2 /3 `\" />\n<parameter name='src-ttp-id' value='`$domain-B.tunnel-tp-id`' />\n<!--<parameter name='dst-ttp-id' value='`$destination.tunnel-tp-id`' />-->\n<parameter name='dst-ttp-id' value='' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n",
        "comments": "",
        "x": 2372,
        "y": 2991,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "5055791b.75c5d",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3527,
        "y": 671,
        "z": "a52db008.999ba",
        "wires": [
            [
                "b37ffca0.5536d8",
                "f29e8ee3.6f68c8",
                "12ff2066.526398"
            ]
        ]
    },
    {
        "id": "b37ffca0.5536d8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3722.5001220703125,
        "y": 623,
        "z": "a52db008.999ba",
        "wires": [
            [
                "8d70b5c4.7732f8"
            ]
        ]
    },
    {
        "id": "f29e8ee3.6f68c8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3714.5001220703125,
        "y": 678,
        "z": "a52db008.999ba",
        "wires": [
            [
                "aea102ae.c04f58"
            ]
        ]
    },
    {
        "id": "12ff2066.526398",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3719.5001220703125,
        "y": 735,
        "z": "a52db008.999ba",
        "wires": [
            [
                "d2755963.27f41"
            ]
        ]
    },
    {
        "id": "d2755963.27f41",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3871.5001220703125,
        "y": 736,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "aea102ae.c04f58",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3882.5001220703125,
        "y": 681,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "8d70b5c4.7732f8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3866.8824462890625,
        "y": 620.6556701660156,
        "z": "a52db008.999ba",
        "wires": [
            [
                "bbf0aa7e.e2119"
            ]
        ]
    },
    {
        "id": "f4395a66.200ea",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4449,
        "y": 639,
        "z": "a52db008.999ba",
        "wires": [
            [
                "89965e9d.5bf73"
            ]
        ]
    },
    {
        "id": "89965e9d.5bf73",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4626,
        "y": 631,
        "z": "a52db008.999ba",
        "wires": [
            [
                "cf2b04e9.c7ece",
                "32eb8024.15dcc8"
            ]
        ]
    },
    {
        "id": "bbf0aa7e.e2119",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4051,
        "y": 635,
        "z": "a52db008.999ba",
        "wires": [
            [
                "5e8a47e5.344b2"
            ]
        ]
    },
    {
        "id": "5e8a47e5.344b2",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4246,
        "y": 635,
        "z": "a52db008.999ba",
        "wires": [
            [
                "f4395a66.200ea",
                "cfe936cc.62cbd8"
            ]
        ]
    },
    {
        "id": "cf2b04e9.c7ece",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainA id",
        "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4864,
        "y": 586,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "73d2c0a6.ca0098",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5044,
        "y": 629,
        "z": "a52db008.999ba",
        "wires": [
            [
                "c43ff31d.81e548"
            ]
        ]
    },
    {
        "id": "2f388561.aeb472",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5036,
        "y": 684,
        "z": "a52db008.999ba",
        "wires": [
            [
                "d2cf9090.58e4c8"
            ]
        ]
    },
    {
        "id": "c9248b9c.994ac",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5041,
        "y": 741,
        "z": "a52db008.999ba",
        "wires": [
            [
                "c9c36e85.c10ae8"
            ]
        ]
    },
    {
        "id": "c9c36e85.c10ae8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5193,
        "y": 742,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "d2cf9090.58e4c8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5204,
        "y": 687,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "c43ff31d.81e548",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5188.38232421875,
        "y": 626.6556701660156,
        "z": "a52db008.999ba",
        "wires": [
            [
                "2aa1f89d.d99288"
            ]
        ]
    },
    {
        "id": "2aa1f89d.d99288",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5403,
        "y": 623,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "a9ef3bf.dca6748",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3568,
        "y": 1512,
        "z": "a52db008.999ba",
        "wires": [
            [
                "4ce90a1d.60092c",
                "60723c85.f84054",
                "343ac8c.8b51638"
            ]
        ]
    },
    {
        "id": "4ce90a1d.60092c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3763.5001220703125,
        "y": 1464,
        "z": "a52db008.999ba",
        "wires": [
            [
                "ce24a29a.e4d57"
            ]
        ]
    },
    {
        "id": "60723c85.f84054",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3755.5001220703125,
        "y": 1519,
        "z": "a52db008.999ba",
        "wires": [
            [
                "e9f57737.1a79b8"
            ]
        ]
    },
    {
        "id": "343ac8c.8b51638",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3760.5001220703125,
        "y": 1576,
        "z": "a52db008.999ba",
        "wires": [
            [
                "67449715.5406e8"
            ]
        ]
    },
    {
        "id": "67449715.5406e8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3912.5001220703125,
        "y": 1577,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "e9f57737.1a79b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3923.5001220703125,
        "y": 1522,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "ce24a29a.e4d57",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3907.8824462890625,
        "y": 1461.6556701660156,
        "z": "a52db008.999ba",
        "wires": [
            [
                "ed40a410.dc6fe8"
            ]
        ]
    },
    {
        "id": "857c3216.12f558",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4490,
        "y": 1480,
        "z": "a52db008.999ba",
        "wires": [
            [
                "6bbf97a7.ebebb8"
            ]
        ]
    },
    {
        "id": "6bbf97a7.ebebb8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4667,
        "y": 1472,
        "z": "a52db008.999ba",
        "wires": [
            [
                "ee554955.44691",
                "1c8432c4.e13b6d"
            ]
        ]
    },
    {
        "id": "ed40a410.dc6fe8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4092,
        "y": 1476,
        "z": "a52db008.999ba",
        "wires": [
            [
                "70b35483.a830f4"
            ]
        ]
    },
    {
        "id": "70b35483.a830f4",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4287,
        "y": 1476,
        "z": "a52db008.999ba",
        "wires": [
            [
                "857c3216.12f558",
                "dc8e8812.fdd648"
            ]
        ]
    },
    {
        "id": "1c8432c4.e13b6d",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 4875,
        "y": 1479,
        "z": "a52db008.999ba",
        "wires": [
            [
                "6cc22b96.ba67f4",
                "b08dfdd6.0852f8",
                "4f7e6e24.1a4"
            ]
        ]
    },
    {
        "id": "ee554955.44691",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainB id",
        "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4905,
        "y": 1427,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "6cc22b96.ba67f4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5085,
        "y": 1470,
        "z": "a52db008.999ba",
        "wires": [
            [
                "19f4c2b.fd2d63d"
            ]
        ]
    },
    {
        "id": "b08dfdd6.0852f8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5077,
        "y": 1525,
        "z": "a52db008.999ba",
        "wires": [
            [
                "4d7c2f7b.855e48"
            ]
        ]
    },
    {
        "id": "4f7e6e24.1a4",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5082,
        "y": 1582,
        "z": "a52db008.999ba",
        "wires": [
            [
                "92c87883.16eab"
            ]
        ]
    },
    {
        "id": "92c87883.16eab",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5234,
        "y": 1583,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "4d7c2f7b.855e48",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5245,
        "y": 1528,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "19f4c2b.fd2d63d",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5229.38232421875,
        "y": 1467.6556701660156,
        "z": "a52db008.999ba",
        "wires": [
            [
                "f5fd6d7b.ccf568"
            ]
        ]
    },
    {
        "id": "f5fd6d7b.ccf568",
        "type": "set",
        "name": "set controller domainB data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5444,
        "y": 1464,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "fdbb72c5.61c228",
        "type": "execute",
        "name": "execute RestApiCallNode slice creation domainA",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.transport-slice-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/operations/ietf-optical-slice:create-optical-slice'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2423,
        "y": 2674,
        "z": "a52db008.999ba",
        "wires": [
            [
                "b62b791e.5db38",
                "47c9af20.002648"
            ]
        ]
    },
    {
        "id": "47c9af20.002648",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2689,
        "y": 2654,
        "z": "a52db008.999ba",
        "wires": [
            [
                "e173211c.50ca1"
            ]
        ]
    },
    {
        "id": "b62b791e.5db38",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2690.000213623047,
        "y": 2704.99990940094,
        "z": "a52db008.999ba",
        "wires": [
            [
                "9a481111.191d4"
            ]
        ]
    },
    {
        "id": "e173211c.50ca1",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing OOF api\" />\n",
        "comments": "",
        "x": 2829.0002479553223,
        "y": 2654.0000009536743,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "9a481111.191d4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2835.02725982666,
        "y": 2702.745394706726,
        "z": "a52db008.999ba",
        "wires": [
            []
        ]
    },
    {
        "id": "3f4df906.b67d7e",
        "type": "execute",
        "name": "execute RestApiCallNode slice creation domainB",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.transport-slice-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/operations/ietf-optical-slice:create-optical-slice'`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2423,
        "y": 3046,
        "z": "a52db008.999ba",
        "wires": [
            [
                "e8fdf08e.e8b0f8",
                "a8718b8a.f404c8"
            ]
        ]
    },
    {
        "id": "a8718b8a.f404c8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2689,
        "y": 3026,
        "z": "a52db008.999ba",
        "wires": [
            [
                "fcecbd56.8e1ac"
            ]
        ]
    },
    {
        "id": "e8fdf08e.e8b0f8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2690.000213623047,
        "y": 3076.99990940094,
        "z": "a52db008.999ba",
        "wires": [
            [
                "ccb1984d.b4313"
            ]
        ]
    },
    {
        "id": "fcecbd56.8e1ac",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing OOF api\" />\n",
        "comments": "",
        "x": 2829.0002479553223,
        "y": 3026.0000009536743,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "ccb1984d.b4313",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2835.02725982666,
        "y": 3074.745394706726,
        "z": "a52db008.999ba",
        "wires": [
            []
        ]
    },
    {
        "id": "b6e0228b.bc6398",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2528,
        "y": 404,
        "z": "a52db008.999ba",
        "wires": [
            [
                "65e46dcd.9c5144",
                "bb6c8a2e.a61878"
            ]
        ]
    },
    {
        "id": "bb6c8a2e.a61878",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2809,
        "y": 360,
        "z": "a52db008.999ba",
        "wires": [
            [
                "475f2872.5fafd"
            ]
        ]
    },
    {
        "id": "475f2872.5fafd",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3071,
        "y": 360,
        "z": "a52db008.999ba",
        "wires": [
            [
                "da58235b.ecd51"
            ]
        ]
    },
    {
        "id": "cfe936cc.62cbd8",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 4452,
        "y": 713,
        "z": "a52db008.999ba",
        "wires": [
            [
                "29038cb1.b59084"
            ]
        ]
    },
    {
        "id": "29038cb1.b59084",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4629,
        "y": 705,
        "z": "a52db008.999ba",
        "wires": [
            [
                "c25692cd.684ce8"
            ]
        ]
    },
    {
        "id": "c25692cd.684ce8",
        "type": "set",
        "name": "set domainA ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4864,
        "y": 829,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "68f808b3.66b5",
        "type": "set",
        "name": "set domainB ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4904,
        "y": 1669,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "ad76d9b4.88b908",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4669,
        "y": 1545,
        "z": "a52db008.999ba",
        "wires": [
            [
                "68f808b3.66b5"
            ]
        ]
    },
    {
        "id": "dc8e8812.fdd648",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 4492,
        "y": 1553,
        "z": "a52db008.999ba",
        "wires": [
            [
                "ad76d9b4.88b908"
            ]
        ]
    },
    {
        "id": "fad5035b.7ee3a8",
        "type": "execute",
        "name": "execute RestApiCallNode domainA UNI Coloring",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-coloring-uni-port.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-network:networks/network=' + $tmp.domainA.eth-network-id + '/node=' + $tmp.src.pnf-name + '/ietf-network-topology:termination-point=' + $tmp.src.ltpId + '/ietf-te-topology:te/ietf-optical-slice:tp-slice-id' `\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2425,
        "y": 2807,
        "z": "a52db008.999ba",
        "wires": [
            [
                "bc31fb8e.e87f08",
                "8c5d2dc9.bdb42"
            ]
        ]
    },
    {
        "id": "8c5d2dc9.bdb42",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2691,
        "y": 2787,
        "z": "a52db008.999ba",
        "wires": [
            [
                "536d6d82.f4f124"
            ]
        ]
    },
    {
        "id": "bc31fb8e.e87f08",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2692.000213623047,
        "y": 2837.99990940094,
        "z": "a52db008.999ba",
        "wires": [
            [
                "509489f1.58fe18"
            ]
        ]
    },
    {
        "id": "536d6d82.f4f124",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing OOF api\" />\n",
        "comments": "",
        "x": 2831.0002479553223,
        "y": 2787.0000009536743,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "509489f1.58fe18",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2837.02725982666,
        "y": 2835.745394706726,
        "z": "a52db008.999ba",
        "wires": [
            []
        ]
    },
    {
        "id": "d037b0c3.f093c",
        "type": "execute",
        "name": "execute RestApiCallNode domainB UNI Coloring",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-coloring-uni-port.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-network:networks/network=' + $tmp.domainB.eth-network-id + '/node=' + $tmp.dst.pnf-name + '/ietf-network-topology:termination-point=' + $tmp.dst.ltpId + '/ietf-te-topology:te/ietf-optical-slice:tp-slice-id' `\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2425,
        "y": 3173,
        "z": "a52db008.999ba",
        "wires": [
            [
                "8c8a801.d7272",
                "b835a972.f48b7"
            ]
        ]
    },
    {
        "id": "b835a972.f48b7",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2691,
        "y": 3153,
        "z": "a52db008.999ba",
        "wires": [
            [
                "88a6a85e.9ed23"
            ]
        ]
    },
    {
        "id": "8c8a801.d7272",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2692.000213623047,
        "y": 3203.99990940094,
        "z": "a52db008.999ba",
        "wires": [
            [
                "7de5bd62.f4f62c"
            ]
        ]
    },
    {
        "id": "88a6a85e.9ed23",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing OOF api\" />\n",
        "comments": "",
        "x": 2831.0002479553223,
        "y": 3153.0000009536743,
        "z": "a52db008.999ba",
        "wires": []
    },
    {
        "id": "7de5bd62.f4f62c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2837.02725982666,
        "y": 3201.745394706726,
        "z": "a52db008.999ba",
        "wires": [
            []
        ]
    }
]