[
    {
        "id": "c7ab28db.5fa9f8",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 108,
        "y": 69,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "b4f2bafa.fe95a"
            ]
        ]
    },
    {
        "id": "b4f2bafa.fe95a",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 392.2856903076172,
        "y": 130.23810863494873,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "5dd33274.e7d4cc"
            ]
        ]
    },
    {
        "id": "5dd33274.e7d4cc",
        "type": "method",
        "name": "method tsli-vnf-topology-operation-trans-slice-allocate",
        "xml": "<method rpc='tsli-vnf-topology-operation-trans-slice-allocate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 398.42860412597656,
        "y": 215.00003051757812,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "28d22516.fc87aa"
            ]
        ]
    },
    {
        "id": "28d22516.fc87aa",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 768.238037109375,
        "y": 239.66668701171875,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "7c0b6069.496758",
                "11269eb9.b73d59",
                "b98a68a9.509cb8",
                "18445def.73c80a",
                "703f0f3.2526ff",
                "d4cb43.708284c",
                "9006694b.0db0e8",
                "e3c7ee55.46e6f8",
                "efeb4f56.d9cc7",
                "4948ae3d.2fb728",
                "e0ae06d.cc68bf8",
                "fd6957d.13c0a28",
                "8c69784a.6fe62",
                "e181a758.620248"
            ]
        ]
    },
    {
        "id": "11269eb9.b73d59",
        "type": "set",
        "name": "set vnf-level-oper-status to Created",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.order-status' value='Created' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.last-rpc-action' value='`$vnf-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.last-action' value='`$vnf-topology-operation-input.request-information.request-action`' />\n",
        "comments": "",
        "x": 1190.3848495483398,
        "y": 603.6706197531894,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "7c0b6069.496758",
        "type": "set",
        "name": "copy input data to service data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-id' value='`$prop.vnf-id`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.sdnc-request-header.' value='$vnf-topology-operation-input.sdnc-request-header.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.request-information.' value='$vnf-topology-operation-input.request-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.' value='$vnf-topology-operation-input.service-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-information.' value='$vnf-topology-operation-input.vnf-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-request-input.' value='$vnf-topology-operation-input.vnf-request-input.' />\n\n",
        "comments": "",
        "x": 1182.238037109375,
        "y": 498.6668718131259,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "703f0f3.2526ff",
        "type": "execute",
        "name": "execute generate-vnf-index",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.vnf-id\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1170.5715408325195,
        "y": 448.3334558280185,
        "z": "5b68e0d.bd97b2",
        "wires": [
            []
        ]
    },
    {
        "id": "4948ae3d.2fb728",
        "type": "set",
        "name": "set vnf-index to service data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-information.vnf-id' value='`$prop.vnf-id`' />\n",
        "comments": "",
        "x": 1181.5716171264648,
        "y": 555.3334596427158,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "b98a68a9.509cb8",
        "type": "switchNode",
        "name": "switch service-data.vnfs.vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1197.5713577270508,
        "y": 118.33337858039886,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "45cce5a8.451aac",
                "48e9b931.dabab8"
            ]
        ]
    },
    {
        "id": "45cce5a8.451aac",
        "type": "other",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1432.285743713379,
        "y": 113.47619893867522,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "6299edd9.775e24"
            ]
        ]
    },
    {
        "id": "6299edd9.775e24",
        "type": "set",
        "name": "set vnf-index=0",
        "xml": "<set>\n<parameter name='vnf-index' value='0' />\n",
        "comments": "",
        "x": 1592.5714492797852,
        "y": 113.4762904914096,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "48e9b931.dabab8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1428.714282989502,
        "y": 146.76203039009124,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "777ae1e9.6bbca"
            ]
        ]
    },
    {
        "id": "6abef48d.2c4e6c",
        "type": "set",
        "name": "set vnf-index = vnf_length",
        "xml": "<set>\n<parameter name='vnf-index' value='`$service-data.vnfs.vnf_length`' />\n",
        "comments": "",
        "x": 1821.5715255737305,
        "y": 125.04775598365813,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "8a52abb7.25d258",
        "type": "for",
        "name": "for each existing VNF",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1810.000144958496,
        "y": 160.0477278502658,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "1ea03c6.7395dc4"
            ]
        ]
    },
    {
        "id": "777ae1e9.6bbca",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1563.428565979004,
        "y": 148.76199987251312,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "6abef48d.2c4e6c",
                "8a52abb7.25d258"
            ]
        ]
    },
    {
        "id": "1ea03c6.7395dc4",
        "type": "switchNode",
        "name": "switch vnf-information.vnf-id == service-data.vnfs.vnf[].vnf-id",
        "xml": "<switch test='`$vnf-topology-operation-input.vnf-information.vnf-id == $service-data.vnfs.vnf[$idx].vnf-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2203.2858810424805,
        "y": 160.6192119391635,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "95d50976.54cf58"
            ]
        ]
    },
    {
        "id": "95d50976.54cf58",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2484.5715827941895,
        "y": 159.1906173499301,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "19c5d87f.a3e7b"
            ]
        ]
    },
    {
        "id": "78e378bf.79cf5",
        "type": "comment",
        "name": "make sure this vnf-id doesn't exist already",
        "info": "",
        "comments": "",
        "x": 2172.428497314453,
        "y": 124.19060399848968,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "18445def.73c80a",
        "type": "set",
        "name": "set new vnf_length",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf_length' value='`$vnf-index + 1`' />\n",
        "comments": "",
        "x": 1128.571533203125,
        "y": 396.33343505859375,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "d4cb43.708284c",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1124.571533203125,
        "y": 1344.5969848632812,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "efeb4f56.d9cc7",
        "type": "save",
        "name": "save service relationship in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id\n         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id \n         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"generic-vnf\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/generic-vnfs/generic-vnf/' + $prop.vnf-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"generic-vnf.vnf-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.vnf-id`\" />\n\n\n<!--key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--key='service-instance.service-instance-id = $service-data.service-instance-id -->\n",
        "comments": "",
        "outputs": 1,
        "x": 1162.2382736206055,
        "y": 815.5968644889072,
        "z": "5b68e0d.bd97b2",
        "wires": [
            []
        ]
    },
    {
        "id": "9006694b.0db0e8",
        "type": "set",
        "name": "set vnf-index and vnf-object-path",
        "xml": "<set>\n<parameter name='vnfId' value='`$prop.vnf-id`' />\n<parameter name=\"vnf-object-path\" value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/vnfs/vnf/'  + $prop.vnf-id  + '/vnf-data/'` \" />",
        "comments": "",
        "x": 1183.571533203125,
        "y": 644.5968902381137,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "19c5d87f.a3e7b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VNF id ' + $service-data.vnfs.vnf[$idx].vnf-id\n      + ' already exists, and has order status ' + $service-data.vnfs.vnf[$idx].vnf-data.vnf-level-oper-status.order-status`\" />\n",
        "comments": "",
        "x": 2613.142951965332,
        "y": 210.19063165504485,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "e3c7ee55.46e6f8",
        "type": "save",
        "name": "save AnAI - vnf-instance.orchestration-status",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"generic-vnf\"   \n\t\tkey='generic-vnf.vnf-id = $prop.vnf-id' >\n<parameter name=\"orchestration-status\" value=\"Created\" />\n<parameter name=\"in-maint\" value = \"true\" />\n<parameter name=\"vnf-type\" value='`$prop.vnfName`' />\n<parameter name=\"vnf-name\" value = \"`$prop.vnfName`\"/>\n<parameter name=\"model-invariant-id\" value = \"`$vnf-topology-operation-input.vnf-information.onap-model-information.model-invariant-uuid`\"/>\n<parameter name=\"model-version-id\" value = \"`$vnf-topology-operation-input.vnf-information.onap-model-information.model-uuid`\"/>\n<parameter name=\"model-customization-id\" value = \"`$vnf-topology-operation-input.vnf-information.onap-model-information.model-customization-uuid`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1238.5458374023438,
        "y": 754.2471072943881,
        "z": "5b68e0d.bd97b2",
        "wires": [
            []
        ]
    },
    {
        "id": "8b2c577f.aa706",
        "type": "comment",
        "name": "TODO: change AAI models",
        "info": "",
        "comments": "",
        "x": 1172.1820983886719,
        "y": 713.9743230612949,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "d58f334a.ba5338",
        "type": "execute",
        "name": "execute split parameterName",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$vnf-topology-operation-input.vnf-request-input.vnf-input-parameters.param[$idx].name`'/>\n<parameter name=\"regex\" value=\"_\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1598.7395858764648,
        "y": 207.75002291519195,
        "z": "5b68e0d.bd97b2",
        "wires": [
            []
        ]
    },
    {
        "id": "889ccd2d.4a8fe8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1402.483383178711,
        "y": 212.00189593154937,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "d58f334a.ba5338",
                "e9083033.2291c8"
            ]
        ]
    },
    {
        "id": "e0ae06d.cc68bf8",
        "type": "for",
        "name": "for loop idx - VNF input parameters",
        "xml": "<for index=\"idx\" start=\"0\" end=\"`$vnf-topology-operation-input.vnf-request-input.vnf-input-parameters.param_length`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1187.7050399780273,
        "y": 214.44631197769195,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "889ccd2d.4a8fe8"
            ]
        ]
    },
    {
        "id": "fd6957d.13c0a28",
        "type": "set",
        "name": "set vnf-request-input.",
        "xml": "<set>\n<parameter name='vnf-request-input.' value='`$vnf-topology-operation-input.vnf-request-input.`' />\n",
        "comments": "",
        "x": 1144.7046737670898,
        "y": 284.77101900894195,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "e9083033.2291c8",
        "type": "set",
        "name": "set parameterName",
        "xml": "<set>\n<parameter name=\"`vnf-topology-operation-input.vnf-request-input.vnf-input-parameters.param[$idx].name`\" value='`$param-prefix[$param-prefix_length -1]`'/>\n",
        "comments": "",
        "x": 1575.7395858764648,
        "y": 253.75002291519195,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "8c69784a.6fe62",
        "type": "for",
        "name": "for each sdwan-get-request-input-param",
        "xml": "<for index=\"idx\" start=\"0\" end=\"`$vnf-topology-operation-input.vnf-request-input.vnf-input-parameters.param_length`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1200.7395858764648,
        "y": 336.75002291519195,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "ab7df566.3e05d"
            ]
        ]
    },
    {
        "id": "ab7df566.3e05d",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1426.9722518920898,
        "y": 335.09377291519195,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "352dca87.707f0e"
            ]
        ]
    },
    {
        "id": "352dca87.707f0e",
        "type": "switchNode",
        "name": "switch vnf name",
        "xml": "<switch test=\"`$vnf-topology-operation-input.vnf-request-input.vnf-input-parameters.param[$idx].name == 'name'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1583.4722518920898,
        "y": 333.0938339503482,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "590b3579.cf8c54"
            ]
        ]
    },
    {
        "id": "590b3579.cf8c54",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1744.4726181030273,
        "y": 333.09389498550445,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "63083064.a23a18"
            ]
        ]
    },
    {
        "id": "63083064.a23a18",
        "type": "set",
        "name": "set vnf name",
        "xml": "<set>\n<parameter name='prop.vnfName' value='`$vnf-topology-operation-input.vnf-request-input.vnf-input-parameters.param[$idx].value`' />\n",
        "comments": "",
        "x": 1902.4727401733398,
        "y": 331.6939316065982,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "e181a758.620248",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id\n         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id \n         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">",
        "comments": "",
        "outputs": 1,
        "x": 1155,
        "y": 940,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "5d430eb5.2b236",
                "4db06806.f53418",
                "95ae5b5a.c22a4"
            ]
        ]
    },
    {
        "id": "5d430eb5.2b236",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1371,
        "y": 905,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "53896828.686ee8"
            ]
        ]
    },
    {
        "id": "4db06806.f53418",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1380.490966796875,
        "y": 947.5740356445312,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "2be30b71.aee02c"
            ]
        ]
    },
    {
        "id": "95ae5b5a.c22a4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1369,
        "y": 994,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "ecad310e.0677"
            ]
        ]
    },
    {
        "id": "53896828.686ee8",
        "type": "switchNode",
        "name": "switch allotted-resources_length != 0",
        "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1610,
        "y": 902,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "a4b1136f.62ed08",
                "46b85697.e69b9"
            ]
        ]
    },
    {
        "id": "2be30b71.aee02c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1534.0623779296875,
        "y": 950.8597717285156,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "ecad310e.0677",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1538,
        "y": 995,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "a019135.4f8ccf",
        "type": "set",
        "name": "set the 1st allotted-resource-id",
        "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources[0]`\" />\n\n\n",
        "comments": "",
        "x": 2009,
        "y": 969,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "a4b1136f.62ed08",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1823,
        "y": 926,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "cb1b8f06.47ef2"
            ]
        ]
    },
    {
        "id": "46b85697.e69b9",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1825,
        "y": 866,
        "z": "5b68e0d.bd97b2",
        "wires": [
            []
        ]
    },
    {
        "id": "67d7c08a.0b2928",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 1144,
        "y": 890,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "457beb03.a98104",
        "type": "switchNode",
        "name": "switch logical-links_length != 0",
        "xml": "<switch test='`$tmp.aai.allotted-resource.logical-links_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1270,
        "y": 1266,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "643d2cea.4605b4",
                "7caeb522.7a961c"
            ]
        ]
    },
    {
        "id": "643d2cea.4605b4",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1464,
        "y": 1400,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "152d2d7d.5e3893"
            ]
        ]
    },
    {
        "id": "7caeb522.7a961c",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1467,
        "y": 1354,
        "z": "5b68e0d.bd97b2",
        "wires": [
            []
        ]
    },
    {
        "id": "814386d7.12d29",
        "type": "set",
        "name": "set the 1st logical-link-name",
        "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.logical-links[0]`\" />\n\n\n",
        "comments": "",
        "x": 1804,
        "y": 1372,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "cb1b8f06.47ef2",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1808,
        "y": 1014,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "a019135.4f8ccf",
                "e575462e.50d5b"
            ]
        ]
    },
    {
        "id": "152d2d7d.5e3893",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1595,
        "y": 1405,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "814386d7.12d29",
                "fecafec9.0d1c5"
            ]
        ]
    },
    {
        "id": "67195ddd.58b94c",
        "type": "set",
        "name": "set EndpointA",
        "xml": "<set>\n<parameter name='endpointA' value=\"`$tmp.aai.logical-link.name`\" />\n\n\n",
        "comments": "",
        "x": 2350,
        "y": 1468,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "3cb07e0e.1a73c2",
        "type": "set",
        "name": "set EndpointB",
        "xml": "<set>\n<parameter name='endpointB' value=\"`$tmp.aai.logical-link.name2`\" />\n\n\n",
        "comments": "",
        "x": 2351,
        "y": 1515,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "e575462e.50d5b",
        "type": "save",
        "name": "get allotted-resource from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">",
        "comments": "",
        "outputs": 1,
        "x": 2012,
        "y": 1044,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "9038c1c3.67b67",
                "d5fe3cc1.f1ab58",
                "3a3c5476.f230dc"
            ]
        ]
    },
    {
        "id": "9038c1c3.67b67",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2228,
        "y": 1111,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "457beb03.a98104"
            ]
        ]
    },
    {
        "id": "d5fe3cc1.f1ab58",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2228.490966796875,
        "y": 1010.573974609375,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "d1ddfc7b.e8b11"
            ]
        ]
    },
    {
        "id": "3a3c5476.f230dc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2224,
        "y": 1060,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "5d76fda0.b3386c"
            ]
        ]
    },
    {
        "id": "d1ddfc7b.e8b11",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2377.0625,
        "y": 1009.8597412109375,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "5d76fda0.b3386c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2367,
        "y": 1060,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "9b0fc370.e7b168",
        "type": "comment",
        "name": "Question?",
        "info": "Can we assume ....logical-links[0] would have \nthe whole object or it is only a pointer to \nlogical-link name in AAI?\nIf only name, then we have to retrieve it from \nAAI",
        "comments": "",
        "x": 1837,
        "y": 1325,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "fecafec9.0d1c5",
        "type": "save",
        "name": "get logical-link from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
        "comments": "",
        "outputs": 1,
        "x": 1791,
        "y": 1444,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "c3decf76.de238",
                "cbe9f0d3.03cae",
                "f1d67d6b.7b18f8"
            ]
        ]
    },
    {
        "id": "cbe9f0d3.03cae",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2056.490966796875,
        "y": 1366.573974609375,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "df9ad0cd.393e9"
            ]
        ]
    },
    {
        "id": "f1d67d6b.7b18f8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2045,
        "y": 1411,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "387801a6.c55046"
            ]
        ]
    },
    {
        "id": "df9ad0cd.393e9",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2205.0625,
        "y": 1366.8597412109375,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "387801a6.c55046",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2204,
        "y": 1411,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "c3decf76.de238",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2052,
        "y": 1490,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "85643202.66a9f8"
            ]
        ]
    },
    {
        "id": "85643202.66a9f8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2191,
        "y": 1490,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "67195ddd.58b94c",
                "3cb07e0e.1a73c2",
                "e13bd0db.73d81",
                "44095776.64c828",
                "3eb8bee0.c23c0a",
                "e199c2c7.64ce48",
                "4e9e1552.e1012c",
                "879bdb34.60c748",
                "ccc984ea.946438",
                "3824458b.0c70c2"
            ]
        ]
    },
    {
        "id": "e13bd0db.73d81",
        "type": "save",
        "name": "get EndpointA from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"endpoint\"\n\tkey='endpoint.endpoint-id = $endpointA'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.endpointA\">",
        "comments": "",
        "outputs": 1,
        "x": 2399,
        "y": 1573,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "6b7f9293.5e4b3c",
                "271678cd.b7a718",
                "fda0cd5e.c574c8"
            ]
        ]
    },
    {
        "id": "44095776.64c828",
        "type": "save",
        "name": "get EndpointB from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"endpoint\"\n\tkey='endpoint.endpoint-id = $endpointB'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.endpointB\">",
        "comments": "",
        "outputs": 1,
        "x": 2413,
        "y": 1845,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "cac7dfa0.02314",
                "cd4a18c4.24c5e8",
                "b2a92c1e.f10cd8"
            ]
        ]
    },
    {
        "id": "6b7f9293.5e4b3c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2621,
        "y": 1455,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "6df2f8ce.f4df28"
            ]
        ]
    },
    {
        "id": "271678cd.b7a718",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2616.509033203125,
        "y": 1504.426025390625,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "a0e96fb5.85588"
            ]
        ]
    },
    {
        "id": "fda0cd5e.c574c8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2620.509033203125,
        "y": 1555.426025390625,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "57154704.0e805"
            ]
        ]
    },
    {
        "id": "6df2f8ce.f4df28",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2769.571533203125,
        "y": 1454.2857666015625,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "a0e96fb5.85588",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2759.509033203125,
        "y": 1504.426025390625,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "cac7dfa0.02314",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2636,
        "y": 1815,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "857e5bf7.e021b"
            ]
        ]
    },
    {
        "id": "cd4a18c4.24c5e8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2631.509033203125,
        "y": 1864.426025390625,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "68a88270.f542bc"
            ]
        ]
    },
    {
        "id": "b2a92c1e.f10cd8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2635.509033203125,
        "y": 1915.426025390625,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "4220b72.dbed048"
            ]
        ]
    },
    {
        "id": "857e5bf7.e021b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2784.571533203125,
        "y": 1814.2857666015625,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "68a88270.f542bc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2774.509033203125,
        "y": 1864.426025390625,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "404469ae.c8a71",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for index='rel-index' start='0' end='`$tmp.aai.endpointA.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2993,
        "y": 1556,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "ca5e0e2a.2b9fd8"
            ]
        ]
    },
    {
        "id": "ca5e0e2a.2b9fd8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.endpointA.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3206.3334426879883,
        "y": 1555.9999389648438,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "20488961.beb436"
            ]
        ]
    },
    {
        "id": "20488961.beb436",
        "type": "outcome",
        "name": "p-interface",
        "xml": "<outcome value='p-interface'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3378.0000801086426,
        "y": 1556.000020980835,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "3536184f.ec7b9"
            ]
        ]
    },
    {
        "id": "6bc94704.d03de",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4040.66650390625,
        "y": 1548,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "b0648d5.a5c8bf",
                "502adfb6.94aa38",
                "6f6a8b61.fa1ffc",
                "24d9a7fc.8cd3f8"
            ]
        ]
    },
    {
        "id": "3536184f.ec7b9",
        "type": "save",
        "name": "get p-interface-src from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3625,
        "y": 1554,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "d439294.8fb6358",
                "5c59ee09.9262d",
                "f82521c.310fee"
            ]
        ]
    },
    {
        "id": "d439294.8fb6358",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3868,
        "y": 1549,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "6bc94704.d03de"
            ]
        ]
    },
    {
        "id": "f82521c.310fee",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3877.490966796875,
        "y": 1591.5740356445312,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "da7fc859.beff18"
            ]
        ]
    },
    {
        "id": "5c59ee09.9262d",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3866,
        "y": 1638,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "872414be.4b5f28"
            ]
        ]
    },
    {
        "id": "da7fc859.beff18",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4031.0623779296875,
        "y": 1594.8597717285156,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "872414be.4b5f28",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4035,
        "y": 1639,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "57154704.0e805",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2782,
        "y": 1557,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "404469ae.c8a71"
            ]
        ]
    },
    {
        "id": "85084de0.cfb7d",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 3568,
        "y": 1507,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "4220b72.dbed048",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2786,
        "y": 1917,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "8dfc41f6.4f4f"
            ]
        ]
    },
    {
        "id": "8dfc41f6.4f4f",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for index='rel-index' start='0' end='`$tmp.aai.endpointB.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2997,
        "y": 1916,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "5452c2da.11d5dc"
            ]
        ]
    },
    {
        "id": "5452c2da.11d5dc",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.endpointB.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3210.3334426879883,
        "y": 1915.9999389648438,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "cb7a504b.d626a"
            ]
        ]
    },
    {
        "id": "cb7a504b.d626a",
        "type": "outcome",
        "name": "p-interface",
        "xml": "<outcome value='p-interface'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3382.0000801086426,
        "y": 1916.000020980835,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "8fa1d382.ebbb3"
            ]
        ]
    },
    {
        "id": "825ff590.84496",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4044.66650390625,
        "y": 1908,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "674b1eb0.174b2",
                "f4b1b11a.276db8",
                "485a23dc.9461bc",
                "a54100e4.bdfd8"
            ]
        ]
    },
    {
        "id": "8fa1d382.ebbb3",
        "type": "save",
        "name": "get p-interface-dst from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"p-interface.interface-name = $tmp.aai.endpointB.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.endpointB.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointB.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointB.p-interface-dst\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3629,
        "y": 1914,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "e30b52f2.d3bd18",
                "2a8a7b32.c6c034",
                "95395b70.5ce658"
            ]
        ]
    },
    {
        "id": "e30b52f2.d3bd18",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3872,
        "y": 1909,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "825ff590.84496"
            ]
        ]
    },
    {
        "id": "95395b70.5ce658",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3881.490966796875,
        "y": 1951.5740356445312,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "ec0be134.e7e7f8"
            ]
        ]
    },
    {
        "id": "2a8a7b32.c6c034",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3870,
        "y": 1998,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "5f44beb8.f571"
            ]
        ]
    },
    {
        "id": "ec0be134.e7e7f8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4035.0623779296875,
        "y": 1954.8597717285156,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "5f44beb8.f571",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4039,
        "y": 1999,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "18f16001.6c653",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 3572,
        "y": 1867,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "b0648d5.a5c8bf",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.endpointA.p-interface-src`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[^-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4301,
        "y": 1546,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "6bf39cd9.c078dc",
                "1f241f8d.ded588"
            ]
        ]
    },
    {
        "id": "1f241f8d.ded588",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4524,
        "y": 1501,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "711e2d50.cbfec4"
            ]
        ]
    },
    {
        "id": "6bf39cd9.c078dc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4526,
        "y": 1565,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "d87f8a80.c2edb8"
            ]
        ]
    },
    {
        "id": "8f149145.0a9d38",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
        "comments": "",
        "x": 4859,
        "y": 1459,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "d87f8a80.c2edb8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 4685,
        "y": 1584,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "711e2d50.cbfec4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4689,
        "y": 1498,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "8f149145.0a9d38",
                "ed673da0.d5043"
            ]
        ]
    },
    {
        "id": "ed673da0.d5043",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
        "comments": "",
        "x": 4860,
        "y": 1564,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "5bd7fa96.a6e064",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 4859,
        "y": 1525,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "6f6a8b61.fa1ffc",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainA-uuid`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='' />\n<parameter name='access-client-id' value='' />\n<parameter name='access-topology-id' value='' />\n<parameter name='access-node-id' value='' />\n<parameter name='access-ltp-id' value='' />\n<parameter name='cvlan' value='' />\n\n<parameter name='bandwidth-profile-name' value='`$prop.sotn.etht-svc-name`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='CIR' value='`$prop.sotn.cir`' />\n<parameter name='EIR' value='`$prop.sotn.eir`' />\n<parameter name='CBS' value='`$prop.sotn.cbs`' />\n<parameter name='EBS' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 4303,
        "y": 1705,
        "z": "5b68e0d.bd97b2",
        "wires": [
            []
        ]
    },
    {
        "id": "502adfb6.94aa38",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainA",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainA-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4348,
        "y": 1615,
        "z": "5b68e0d.bd97b2",
        "wires": [
            []
        ]
    },
    {
        "id": "2f48d78c.e343f8",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[?] all together\nin order to assemble the correct values for provider-id, \ntopology-id, node-id, etc.",
        "comments": "",
        "x": 4238,
        "y": 1671,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "674b1eb0.174b2",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.endpointB.p-interface-dst`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[^-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4299,
        "y": 1904,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "bf4f2038.8bcc6",
                "816a3f3d.c967d"
            ]
        ]
    },
    {
        "id": "816a3f3d.c967d",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4522,
        "y": 1859,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "bbb7eb1.f117918"
            ]
        ]
    },
    {
        "id": "bf4f2038.8bcc6",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4524,
        "y": 1923,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "3fe77c2.445af04"
            ]
        ]
    },
    {
        "id": "2024c7b6.3996d",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
        "comments": "",
        "x": 4857,
        "y": 1817,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "3fe77c2.445af04",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 4683,
        "y": 1942,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "bbb7eb1.f117918",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4687,
        "y": 1856,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "2024c7b6.3996d",
                "e7f53e76.5ddf"
            ]
        ]
    },
    {
        "id": "e7f53e76.5ddf",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
        "comments": "",
        "x": 4858,
        "y": 1922,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "71ef13be.57065c",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 4857,
        "y": 1883,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "485a23dc.9461bc",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='' />\n<parameter name='access-client-id' value='' />\n<parameter name='access-topology-id' value='' />\n<parameter name='access-node-id' value='' />\n<parameter name='access-ltp-id' value='' />\n<parameter name='cvlan' value='' />\n\n\n<parameter name='bandwidth-profile-name' value='`$prop.sotn.etht-svc-name`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='CIR' value='`$prop.sotn.cir`' />\n<parameter name='EIR' value='`$prop.sotn.eir`' />\n<parameter name='CBS' value='`$prop.sotn.cbs`' />\n<parameter name='EBS' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 4301,
        "y": 2063,
        "z": "5b68e0d.bd97b2",
        "wires": [
            []
        ]
    },
    {
        "id": "f4b1b11a.276db8",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainB",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4346,
        "y": 1973,
        "z": "5b68e0d.bd97b2",
        "wires": [
            []
        ]
    },
    {
        "id": "985d1e1b.82a998",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[?] all together\nin order to assemble the correct values for provider-id, \ntopology-id, node-id, etc.",
        "comments": "",
        "x": 4236,
        "y": 2029,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "3eb8bee0.c23c0a",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:sotn-get-otn-tunnel-path-from-oof",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sotn-get-otn-tunnel-path-from-oof' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2518,
        "y": 2064,
        "z": "5b68e0d.bd97b2",
        "wires": [
            []
        ]
    },
    {
        "id": "e199c2c7.64ce48",
        "type": "set",
        "name": "set attachment_param",
        "xml": "<set>\n<parameter name='prop.connection-attachment.access-provider-id' value='`$oof.vpn.access-provider-id`' />\n<parameter name='prop.connection-attachment.access-client-id' value='`$oof.vpn.access-client-id`' />\n<parameter name='prop.connection-attachment.access-topology-id' value='`$oof.vpn.access-topology-id`' />\n<parameter name='prop.connection-attachment.access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='prop.connection-attachment.access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />\n\n<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$oof.vpn.access-provider-id`' />\n<parameter name='prop.remote.connection-attachment.access-client-id' value='`$oof.vpn.access-client-id`' />\n<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$oof.vpn.access-topology-id`' />\n<parameter name='prop.remote.connection-attachment.access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />\n",
        "comments": "",
        "x": 2381,
        "y": 2024,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "50e758b0.2c60a",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "put proper values for src topology-id, node-id, ltp-id, etc (in domain A)\nand dst topology-id, node-id, ltp-id, etc (in domain B)",
        "comments": "",
        "x": 2353,
        "y": 1988,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "4e9e1552.e1012c",
        "type": "save",
        "name": "save vpn-binding A resource (aka. OTN domainA) in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.vpnName' >\n<parameter name='vpn-id' value='`$tmp.vpnName`' />\n<parameter name='vpn-name' value='`$tmp.vpnName`' />\n<parameter name='access-provider-id' value='`$oof.vpn.access-provider-id`' />\n<parameter name='access-client-id' value='`$oof.vpn.access-client-id`' />\n<parameter name='access-topology-id' value='`$oof.vpn.access-topology-id`' />\n<parameter name='src-access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='src-access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />\n<parameter name='dst-access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='dst-access-ltp-id' value='`$oof.vpn.dst-access-ltp-id`' />\n<parameter name='vpn-type' value='`$prop.global.sotn.vpnType`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />",
        "comments": "",
        "outputs": 1,
        "x": 2483,
        "y": 2168,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "eee018f4.9abed"
            ]
        ]
    },
    {
        "id": "879bdb34.60c748",
        "type": "save",
        "name": "save connectivity-A relationship to vpn-binding-A, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $mdsal-psd.service-data.networks.network[0].network-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$mdsal-psd.service-data.networks.network[0].network-id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2481.5,
        "y": 2211,
        "z": "5b68e0d.bd97b2",
        "wires": [
            []
        ]
    },
    {
        "id": "5ac2c26e.60f274",
        "type": "save",
        "name": "save srcLTP relationship in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $oof.vpn.access-node-id + '/p-interfaces/p-interface/' + $src-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$src-ltpId`\" />\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3134.5,
        "y": 2149,
        "z": "5b68e0d.bd97b2",
        "wires": [
            []
        ]
    },
    {
        "id": "481b1bdc.29fad4",
        "type": "save",
        "name": "save dstLTP relationship in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $oof.vpn.access-node-id + '/p-interfaces/p-interface/' + $dst-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$dst-ltpId`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3136.5,
        "y": 2188,
        "z": "5b68e0d.bd97b2",
        "wires": [
            []
        ]
    },
    {
        "id": "24d9a7fc.8cd3f8",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id\n         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id \n         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 4431,
        "y": 1753,
        "z": "5b68e0d.bd97b2",
        "wires": [
            []
        ]
    },
    {
        "id": "a54100e4.bdfd8",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id\n         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id \n         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 4428,
        "y": 2128,
        "z": "5b68e0d.bd97b2",
        "wires": [
            []
        ]
    },
    {
        "id": "eee018f4.9abed",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2783,
        "y": 2167,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "60c98c50.d9d324"
            ]
        ]
    },
    {
        "id": "60c98c50.d9d324",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2923.500244140625,
        "y": 2168.25390625,
        "z": "5b68e0d.bd97b2",
        "wires": [
            []
        ]
    },
    {
        "id": "99e923c8.5700b8",
        "type": "comment",
        "name": "TODO: FIXME: do we need this relationship?",
        "info": "",
        "comments": "",
        "x": 3171,
        "y": 2108,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "debe7c1a.c25a08",
        "type": "comment",
        "name": "TODO: FIXME: put proper values",
        "info": "",
        "comments": "",
        "x": 2409,
        "y": 2130,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "ccc984ea.946438",
        "type": "save",
        "name": "save vpn-binding B resource (aka. OTN domainB) in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.vpnName' >\n<parameter name='vpn-id' value='`$tmp.vpnName`' />\n<parameter name='vpn-name' value='`$tmp.vpnName`' />\n<parameter name='access-provider-id' value='`$oof.vpn.access-provider-id`' />\n<parameter name='access-client-id' value='`$oof.vpn.access-client-id`' />\n<parameter name='access-topology-id' value='`$oof.vpn.access-topology-id`' />\n<parameter name='src-access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='src-access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />\n<parameter name='dst-access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='dst-access-ltp-id' value='`$oof.vpn.dst-access-ltp-id`' />\n<parameter name='vpn-type' value='`$prop.global.sotn.vpnType`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />",
        "comments": "",
        "outputs": 1,
        "x": 2465,
        "y": 2348,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "de2c330e.390d88"
            ]
        ]
    },
    {
        "id": "ff4306de.40969",
        "type": "comment",
        "name": "TODO: FIXME: do we need this relationship?",
        "info": "",
        "comments": "",
        "x": 3153,
        "y": 2288,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "bddb99db.4eee1",
        "type": "save",
        "name": "save srcLTP relationship in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $oof.vpn.access-node-id + '/p-interfaces/p-interface/' + $src-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$src-ltpId`\" />\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3116.5,
        "y": 2329,
        "z": "5b68e0d.bd97b2",
        "wires": [
            []
        ]
    },
    {
        "id": "4e5e60ab.6592a8",
        "type": "save",
        "name": "save dstLTP relationship in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $oof.vpn.access-node-id + '/p-interfaces/p-interface/' + $dst-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$dst-ltpId`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3118.5,
        "y": 2368,
        "z": "5b68e0d.bd97b2",
        "wires": [
            []
        ]
    },
    {
        "id": "82297458.0d3c48",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2905.500244140625,
        "y": 2348.25390625,
        "z": "5b68e0d.bd97b2",
        "wires": [
            []
        ]
    },
    {
        "id": "de2c330e.390d88",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2765,
        "y": 2347,
        "z": "5b68e0d.bd97b2",
        "wires": [
            [
                "82297458.0d3c48"
            ]
        ]
    },
    {
        "id": "8b5978da.cf55b8",
        "type": "comment",
        "name": "TODO: FIXME: put proper values",
        "info": "",
        "comments": "",
        "x": 2386,
        "y": 2308,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "3824458b.0c70c2",
        "type": "save",
        "name": "save connectivity-B relationship to vpn-binding-B, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $mdsal-psd.service-data.networks.network[0].network-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$mdsal-psd.service-data.networks.network[0].network-id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2463.5,
        "y": 2388,
        "z": "5b68e0d.bd97b2",
        "wires": [
            []
        ]
    },
    {
        "id": "ed749360.08754",
        "type": "comment",
        "name": "TODO: FIXME:",
        "info": "set attachment param and send request to NCE-T\nfor bandwidth matrix\nmay require a new template for JSON body",
        "comments": "",
        "x": 2337,
        "y": 2471,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "97832dc3.63313",
        "type": "set",
        "name": "set attachment_param",
        "xml": "<set>\n<parameter name='prop.connection-attachment.access-provider-id' value='`$oof.vpn.access-provider-id`' />\n<parameter name='prop.connection-attachment.access-client-id' value='`$oof.vpn.access-client-id`' />\n<parameter name='prop.connection-attachment.access-topology-id' value='`$oof.vpn.access-topology-id`' />\n<parameter name='prop.connection-attachment.access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='prop.connection-attachment.access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />\n\n<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$oof.vpn.access-provider-id`' />\n<parameter name='prop.remote.connection-attachment.access-client-id' value='`$oof.vpn.access-client-id`' />\n<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$oof.vpn.access-topology-id`' />\n<parameter name='prop.remote.connection-attachment.access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />\n",
        "comments": "",
        "x": 2360,
        "y": 2511,
        "z": "5b68e0d.bd97b2",
        "wires": []
    },
    {
        "id": "f27e6517.ff7968",
        "type": "execute",
        "name": "get parent-service-data tmp.ar-url-psd",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"/restconf/config/GENERIC-RESOURCE-API:services/service/{service-instance-id}/service-data\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url-psd\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.parent-service-instance-id`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 5071,
        "y": 1523,
        "z": "5b68e0d.bd97b2",
        "wires": [
            []
        ]
    }
]