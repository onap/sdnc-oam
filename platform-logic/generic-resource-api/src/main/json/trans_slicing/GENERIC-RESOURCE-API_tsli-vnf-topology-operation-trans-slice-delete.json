[
    {
        "id": "bf5e551e.2a4d68",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 150,
        "y": 61,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "536d861a.099138"
            ]
        ]
    },
    {
        "id": "536d861a.099138",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 281.2856903076172,
        "y": 110.23810863494873,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "6541c50d.7a4ee4"
            ]
        ]
    },
    {
        "id": "6541c50d.7a4ee4",
        "type": "method",
        "name": "method tsli-vnf-topology-operation-trans-slice-delete",
        "xml": "<method rpc='tsli-vnf-topology-operation-trans-slice-delete' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 284.4286193847656,
        "y": 195.00003242492676,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "b890e0d.be3caa"
            ]
        ]
    },
    {
        "id": "b890e0d.be3caa",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 434.238037109375,
        "y": 324.6666564941406,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "2c42b5ac.a1886a",
                "a9ded91f.36ccb8",
                "783cf92b.26682"
            ]
        ]
    },
    {
        "id": "2c42b5ac.a1886a",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 730.5716552734375,
        "y": 601.59716796875,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "231b56c7.bc5152",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 762,
        "y": 276,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "a9ded91f.36ccb8",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n    \n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--vnf-topology-operation-input.service-information.service-instance-id-->",
        "comments": "",
        "outputs": 1,
        "x": 782,
        "y": 372,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "ebd2852a.6b8948",
                "6eeb6239.832acc",
                "accd90f7.832538"
            ]
        ]
    },
    {
        "id": "ebd2852a.6b8948",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1001,
        "y": 310,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "cd7dc6c0.b4fb9"
            ]
        ]
    },
    {
        "id": "6eeb6239.832acc",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1010.490966796875,
        "y": 352.57403564453125,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "63941e02.5fb4"
            ]
        ]
    },
    {
        "id": "accd90f7.832538",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 999,
        "y": 399,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "331acfad.087d3"
            ]
        ]
    },
    {
        "id": "63941e02.5fb4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1164.0623779296875,
        "y": 355.8597717285156,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "331acfad.087d3",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1168,
        "y": 400,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "cd7dc6c0.b4fb9",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for index='rel-index' start='0' end='`$tmp.aai.service-instance.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1198,
        "y": 306,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "71a5e1a5.fba1e8"
            ]
        ]
    },
    {
        "id": "71a5e1a5.fba1e8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.service-instance.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1421.33349609375,
        "y": 305.99993896484375,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "45ab176d.29b28"
            ]
        ]
    },
    {
        "id": "45ab176d.29b28",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1622.0001335144043,
        "y": 307.00002098083496,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "8b30afaa.f156f"
            ]
        ]
    },
    {
        "id": "783cf92b.26682",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 748,
        "y": 320,
        "z": "e001b214.9c4f88",
        "wires": [
            []
        ]
    },
    {
        "id": "8b30afaa.f156f",
        "type": "save",
        "name": "get connectivity from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1860,
        "y": 309,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "a8a15026.50a8d",
                "c9ce2298.2cf6b",
                "be682b6.40831d8"
            ]
        ]
    },
    {
        "id": "a8a15026.50a8d",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2068,
        "y": 273,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "d739426f.d36bb8"
            ]
        ]
    },
    {
        "id": "c9ce2298.2cf6b",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2068.490966796875,
        "y": 318.57403564453125,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "21e5c859.ccd51"
            ]
        ]
    },
    {
        "id": "be682b6.40831d8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2066,
        "y": 362,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "fbd36b9c.f4a15"
            ]
        ]
    },
    {
        "id": "21e5c859.ccd51",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2231.0623779296875,
        "y": 318.8597717285156,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "fbd36b9c.f4a15",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2235,
        "y": 363,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "a46cc38.98dbb4",
        "type": "save",
        "name": "get vpn-binding from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2541,
        "y": 362,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "9e895711.9515a",
                "45b51772.60fd7",
                "90f1dd00.339a68"
            ]
        ]
    },
    {
        "id": "41605fb3.ac785",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2925,
        "y": 362,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "315634a1.892b34",
                "34cfba69.4d51e6",
                "58dd3cb5.26ee4c",
                "e4194069.37887",
                "e5415b2a.1b069",
                "af105f82.f24",
                "bfb53be2.1d7798"
            ]
        ]
    },
    {
        "id": "9e895711.9515a",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2752,
        "y": 364,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "41605fb3.ac785"
            ]
        ]
    },
    {
        "id": "45b51772.60fd7",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2752.490966796875,
        "y": 409.57403564453125,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "80ebbe87.b5f13"
            ]
        ]
    },
    {
        "id": "90f1dd00.339a68",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2750,
        "y": 453,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "928e602f.f7958"
            ]
        ]
    },
    {
        "id": "928e602f.f7958",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2917,
        "y": 452,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "80ebbe87.b5f13",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2915.0623779296875,
        "y": 409.8597717285156,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "d739426f.d36bb8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2269,
        "y": 268,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "953eda1a.4d542"
            ]
        ]
    },
    {
        "id": "953eda1a.4d542",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2474,
        "y": 268,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "75a62157.0a968"
            ]
        ]
    },
    {
        "id": "75a62157.0a968",
        "type": "outcome",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2640,
        "y": 268,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "d166d1d9.165cd8"
            ]
        ]
    },
    {
        "id": "d166d1d9.165cd8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2803,
        "y": 268,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "a46cc38.98dbb4"
            ]
        ]
    },
    {
        "id": "315634a1.892b34",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-binding.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-binding.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-binding.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-binding.src-access-node-id`\" />\n",
        "comments": "",
        "x": 3140,
        "y": 72,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "34cfba69.4d51e6",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3166,
        "y": 189,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "b3f1fbc8.de108",
                "b343cfff.aa8d4",
                "284e02e7.51cff6"
            ]
        ]
    },
    {
        "id": "b3f1fbc8.de108",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3361.5001220703125,
        "y": 141,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "81f23c52.9a8b3"
            ]
        ]
    },
    {
        "id": "b343cfff.aa8d4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3353.5001220703125,
        "y": 196,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "f8c3b27d.bb7ca8"
            ]
        ]
    },
    {
        "id": "81f23c52.9a8b3",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3505.8824462890625,
        "y": 140.65567016601562,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "cf4fab4f.ff26f8"
            ]
        ]
    },
    {
        "id": "cf4fab4f.ff26f8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3690,
        "y": 139,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "e5bf62b8.3c949"
            ]
        ]
    },
    {
        "id": "e5bf62b8.3c949",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3885,
        "y": 139,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "8f16d6f1.620958"
            ]
        ]
    },
    {
        "id": "284e02e7.51cff6",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3358.5001220703125,
        "y": 253,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "a632f8eb.4977a"
            ]
        ]
    },
    {
        "id": "a632f8eb.4977a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3510.5001220703125,
        "y": 254,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "f8c3b27d.bb7ca8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3521.5001220703125,
        "y": 197,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "c808ab3d.c57d7",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 4473,
        "y": 156,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "2713e757.2f3d8",
                "638dc84.73ac0b8",
                "4816e676.e50758"
            ]
        ]
    },
    {
        "id": "c8c24e1.d1c68b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4267,
        "y": 143,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "e331349b.029ff",
                "c808ab3d.c57d7",
                "3516a6c6.78d90a"
            ]
        ]
    },
    {
        "id": "e331349b.029ff",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4503,
        "y": 104,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "2713e757.2f3d8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4683,
        "y": 147,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "f914c736.a35ec"
            ]
        ]
    },
    {
        "id": "638dc84.73ac0b8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4675,
        "y": 202,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "ff1a96b1.1ab44"
            ]
        ]
    },
    {
        "id": "4816e676.e50758",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4680,
        "y": 259,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "81b24b13.ecc93"
            ]
        ]
    },
    {
        "id": "81b24b13.ecc93",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4832,
        "y": 260,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "ff1a96b1.1ab44",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4843,
        "y": 205,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "f914c736.a35ec",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4827.38232421875,
        "y": 144.65567016601562,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "3dce9a6f.ca54ee"
            ]
        ]
    },
    {
        "id": "8f16d6f1.620958",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4088,
        "y": 143,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "c8c24e1.d1c68b"
            ]
        ]
    },
    {
        "id": "3dce9a6f.ca54ee",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5042,
        "y": 141,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "3516a6c6.78d90a",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4423,
        "y": 220,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "af105f82.f24",
        "type": "execute",
        "name": "execute RestApiCallNode Delete transport slice without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.transport-slice-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url +  '/restconf/operations/ietf-optical-slice:deallocate-optical-slice'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3290,
        "y": 487,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "58523c50.a8358c",
                "666e388c.437238"
            ]
        ]
    },
    {
        "id": "58523c50.a8358c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3633.5,
        "y": 482,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "3480dc80.ce39a4"
            ]
        ]
    },
    {
        "id": "666e388c.437238",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3637.5,
        "y": 522,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "f77842b2.9897b"
            ]
        ]
    },
    {
        "id": "f77842b2.9897b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3795,
        "y": 522,
        "z": "e001b214.9c4f88",
        "wires": [
            []
        ]
    },
    {
        "id": "3480dc80.ce39a4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing deallocate transport slice rest api\" />\n",
        "comments": "",
        "x": 3791.5,
        "y": 482,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "58dd3cb5.26ee4c",
        "type": "set",
        "name": "set attachment_param for TN NSSSI deleteion in PNC",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n",
        "comments": "",
        "x": 3266,
        "y": 362,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "e4194069.37887",
        "type": "save",
        "name": "delete connectivity resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivity.connectivity-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3196,
        "y": 797,
        "z": "e001b214.9c4f88",
        "wires": [
            []
        ]
    },
    {
        "id": "e5415b2a.1b069",
        "type": "save",
        "name": "delete vpn-binding resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3192,
        "y": 841,
        "z": "e001b214.9c4f88",
        "wires": [
            []
        ]
    },
    {
        "id": "bfb53be2.1d7798",
        "type": "execute",
        "name": "execute RestApiCallNode domain UNI deColoring",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-coloring-uni-port.templatefile`\" />-->\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-network:networks/network=networkId-providerId-' + $tmp.aai.connectivity.access-provider-id + '-clientId-' + $tmp.aai.connectivity.access-client-id + '-topologyId-' + $tmp.aai.connectivity.access-topology-id +  '/node=' + $tmp.aai.connectivity.access-node-id + '/ietf-network-topology:termination-point=' + $tmp.aai.connectivity.access-ltp-id + '/ietf-te-topology:te/ietf-optical-slice:tp-slice-id' `\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3253,
        "y": 660,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "9751ec98.3e8be8",
                "4652cbec.507204"
            ]
        ]
    },
    {
        "id": "4652cbec.507204",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3519,
        "y": 640,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "45199d8e.7e5fdc"
            ]
        ]
    },
    {
        "id": "9751ec98.3e8be8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3520.000213623047,
        "y": 690.9999094009399,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "ebd36513.cafc88"
            ]
        ]
    },
    {
        "id": "45199d8e.7e5fdc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing decoloring UNI rest api\" />\n",
        "comments": "",
        "x": 3659.0002479553223,
        "y": 640.0000009536743,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "ebd36513.cafc88",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3665.02725982666,
        "y": 688.7453947067261,
        "z": "e001b214.9c4f88",
        "wires": [
            []
        ]
    }
]