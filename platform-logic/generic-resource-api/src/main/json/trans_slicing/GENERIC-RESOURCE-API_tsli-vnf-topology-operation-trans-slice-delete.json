[
    {
        "id": "2b0ca809.8b9448",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 190,
        "y": 84,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "d6cca48a.4b98c"
            ]
        ]
    },
    {
        "id": "d6cca48a.4b98c",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 321.2856903076172,
        "y": 133.23810863494873,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "d504a218.d5b0f"
            ]
        ]
    },
    {
        "id": "d504a218.d5b0f",
        "type": "method",
        "name": "method tsli-vnf-topology-operation-trans-slice-delete",
        "xml": "<method rpc='tsli-vnf-topology-operation-trans-slice-delete' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 324.4286193847656,
        "y": 218.00003242492676,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "6927f12e.f495a8"
            ]
        ]
    },
    {
        "id": "6927f12e.f495a8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 474.238037109375,
        "y": 347.6666564941406,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "a03a6652.95082",
                "5448151c.b0ab3c",
                "926eb1f8.ec5de8"
            ]
        ]
    },
    {
        "id": "a03a6652.95082",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 770.5716552734375,
        "y": 624.59716796875,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "de37ea5b.6e73f8",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 802,
        "y": 299,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "5448151c.b0ab3c",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n    \n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--vnf-topology-operation-input.service-information.service-instance-id-->",
        "comments": "",
        "outputs": 1,
        "x": 822,
        "y": 395,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "84d63f33.5d595",
                "bc6def6f.91b498",
                "9f25bb22.1bcb28"
            ]
        ]
    },
    {
        "id": "84d63f33.5d595",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1041,
        "y": 333,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "454b8601.544a2"
            ]
        ]
    },
    {
        "id": "bc6def6f.91b498",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1050.490966796875,
        "y": 375.57403564453125,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "6ae2b2ea.c01e64"
            ]
        ]
    },
    {
        "id": "9f25bb22.1bcb28",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1039,
        "y": 422,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "5abda4b4.ada70c"
            ]
        ]
    },
    {
        "id": "6ae2b2ea.c01e64",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1204.0623779296875,
        "y": 378.8597717285156,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "5abda4b4.ada70c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1208,
        "y": 423,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "454b8601.544a2",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for index='rel-index' start='0' end='`$tmp.aai.service-instance.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1238,
        "y": 329,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "126fb5a4.b7562a"
            ]
        ]
    },
    {
        "id": "126fb5a4.b7562a",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.service-instance.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1461.33349609375,
        "y": 328.99993896484375,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "ceb59f97.b5ebc"
            ]
        ]
    },
    {
        "id": "ceb59f97.b5ebc",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1662.0001335144043,
        "y": 330.00002098083496,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "7a55fd6d.840e7c"
            ]
        ]
    },
    {
        "id": "926eb1f8.ec5de8",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 788,
        "y": 343,
        "z": "e001b214.9c4f88",
        "wires": [
            []
        ]
    },
    {
        "id": "7a55fd6d.840e7c",
        "type": "save",
        "name": "get connectivity from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1900,
        "y": 332,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "ffc75917.89fb6",
                "cc16da88.4c197",
                "59e9aa76.56f554"
            ]
        ]
    },
    {
        "id": "ffc75917.89fb6",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2108,
        "y": 296,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "f17f297f.55ca2"
            ]
        ]
    },
    {
        "id": "cc16da88.4c197",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2108.490966796875,
        "y": 341.57403564453125,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "43ce3007.4fa548"
            ]
        ]
    },
    {
        "id": "59e9aa76.56f554",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2106,
        "y": 385,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "24973dde.e7929a"
            ]
        ]
    },
    {
        "id": "43ce3007.4fa548",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2271.0623779296875,
        "y": 341.8597717285156,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "24973dde.e7929a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2275,
        "y": 386,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "e4afb06c.970a38",
        "type": "save",
        "name": "get vpn-binding from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2581,
        "y": 385,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "70a3d3e9.7bf864",
                "4cd17047.fe16a",
                "c79d571c.0d07f8"
            ]
        ]
    },
    {
        "id": "8e239cd5.1b82f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2965,
        "y": 385,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "4fff45e1.354a6c",
                "7b5f3a76.40dbac",
                "daa0af8a.c7da5",
                "1aa21051.71e3e8",
                "3724be1f.92f8ea",
                "f7cc948a.349f48",
                "41f2a122.089c2"
            ]
        ]
    },
    {
        "id": "70a3d3e9.7bf864",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2792,
        "y": 387,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "8e239cd5.1b82f8"
            ]
        ]
    },
    {
        "id": "4cd17047.fe16a",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2792.490966796875,
        "y": 432.57403564453125,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "cc11f54d.5be868"
            ]
        ]
    },
    {
        "id": "c79d571c.0d07f8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2790,
        "y": 476,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "24a1d14c.bade0e"
            ]
        ]
    },
    {
        "id": "24a1d14c.bade0e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2957,
        "y": 475,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "cc11f54d.5be868",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2955.0623779296875,
        "y": 432.8597717285156,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "f17f297f.55ca2",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2309,
        "y": 291,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "9cf4adfb.1d5c9"
            ]
        ]
    },
    {
        "id": "9cf4adfb.1d5c9",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2514,
        "y": 291,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "6e0c0661.962a2"
            ]
        ]
    },
    {
        "id": "6e0c0661.962a2",
        "type": "outcome",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2680,
        "y": 291,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "cbe3f419.c9636"
            ]
        ]
    },
    {
        "id": "cbe3f419.c9636",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2843,
        "y": 291,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "e4afb06c.970a38"
            ]
        ]
    },
    {
        "id": "4fff45e1.354a6c",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-binding.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-binding.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-binding.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-binding.src-access-node-id`\" />\n",
        "comments": "",
        "x": 3180,
        "y": 95,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "7b5f3a76.40dbac",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3206,
        "y": 212,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "38e8f6ad.20b942",
                "30508f3.2b24cf",
                "db6a4b33.6458e"
            ]
        ]
    },
    {
        "id": "38e8f6ad.20b942",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3401.5001220703125,
        "y": 164,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "740719b1.df8a7"
            ]
        ]
    },
    {
        "id": "30508f3.2b24cf",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3393.5001220703125,
        "y": 219,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "dcbcbf80.f3d53"
            ]
        ]
    },
    {
        "id": "740719b1.df8a7",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3545.8824462890625,
        "y": 163.65567016601562,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "1c636e54.f15ca2"
            ]
        ]
    },
    {
        "id": "1c636e54.f15ca2",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3730,
        "y": 162,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "5fbdc63d.dd85c8"
            ]
        ]
    },
    {
        "id": "5fbdc63d.dd85c8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3925,
        "y": 162,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "ea1a11a0.595418"
            ]
        ]
    },
    {
        "id": "db6a4b33.6458e",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3398.5001220703125,
        "y": 276,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "1b105dc6.7eab4a"
            ]
        ]
    },
    {
        "id": "1b105dc6.7eab4a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3550.5001220703125,
        "y": 277,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "dcbcbf80.f3d53",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3561.5001220703125,
        "y": 220,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "96600252.0c8c48",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 4513,
        "y": 179,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "a696df4c.ceae58",
                "fe810a19.c34a78",
                "bbf2a8b1.f6a27"
            ]
        ]
    },
    {
        "id": "792a96dd.b5714",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4307,
        "y": 166,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "ae074209.8ac108",
                "96600252.0c8c48",
                "17402644.74336a"
            ]
        ]
    },
    {
        "id": "ae074209.8ac108",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4543,
        "y": 127,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "a696df4c.ceae58",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4723,
        "y": 170,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "b9171802.93433"
            ]
        ]
    },
    {
        "id": "fe810a19.c34a78",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4715,
        "y": 225,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "4798e972.a0e21"
            ]
        ]
    },
    {
        "id": "bbf2a8b1.f6a27",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4720,
        "y": 282,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "c94f16ac.1ba968"
            ]
        ]
    },
    {
        "id": "c94f16ac.1ba968",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4872,
        "y": 283,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "4798e972.a0e21",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4883,
        "y": 228,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "b9171802.93433",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4867.38232421875,
        "y": 167.65567016601562,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "300135e0.73329a"
            ]
        ]
    },
    {
        "id": "ea1a11a0.595418",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4128,
        "y": 166,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "792a96dd.b5714"
            ]
        ]
    },
    {
        "id": "300135e0.73329a",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5082,
        "y": 164,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "17402644.74336a",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4463,
        "y": 243,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "f7cc948a.349f48",
        "type": "execute",
        "name": "execute RestApiCallNode Delete transport slice without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.transport-slice-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url +  '/restconf/operations/ietf-optical-slice:deallocate-optical-slice'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3330,
        "y": 510,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "c1188623.deee1",
                "470e64d.379031c"
            ]
        ]
    },
    {
        "id": "c1188623.deee1",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3673.5,
        "y": 505,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "d4cf9dc2.d5afd8"
            ]
        ]
    },
    {
        "id": "470e64d.379031c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3677.5,
        "y": 545,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "3364bc79.06d9e4"
            ]
        ]
    },
    {
        "id": "3364bc79.06d9e4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3835,
        "y": 545,
        "z": "e001b214.9c4f88",
        "wires": [
            []
        ]
    },
    {
        "id": "d4cf9dc2.d5afd8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing deallocate transport slice rest api\" />\n",
        "comments": "",
        "x": 3831.5,
        "y": 505,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "daa0af8a.c7da5",
        "type": "set",
        "name": "set attachment_param for TN NSSSI deleteion in PNC",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n",
        "comments": "",
        "x": 3306,
        "y": 385,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "1aa21051.71e3e8",
        "type": "save",
        "name": "delete connectivity resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivity.connectivity-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3236,
        "y": 820,
        "z": "e001b214.9c4f88",
        "wires": [
            []
        ]
    },
    {
        "id": "3724be1f.92f8ea",
        "type": "save",
        "name": "delete vpn-binding resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3232,
        "y": 864,
        "z": "e001b214.9c4f88",
        "wires": [
            []
        ]
    },
    {
        "id": "41f2a122.089c2",
        "type": "execute",
        "name": "execute RestApiCallNode domain UNI deColoring",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-coloring-uni-port.templatefile`\" />-->\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-network:networks/network=networkId-providerId-' + $tmp.aai.connectivity.access-provider-id + '-clientId-' + $tmp.aai.connectivity.access-client-id + '-topologyId-' + $tmp.aai.connectivity.access-topology-id +  '/node=' + $tmp.aai.connectivity.access-node-id + '/ietf-network-topology:termination-point=' + $tmp.aai.connectivity.access-ltp-id + '/ietf-te-topology:te/ietf-optical-slice:slice-id-list=' + $slice-instance-id `\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3293,
        "y": 683,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "293d42c2.e74426",
                "f9376496.43cea8"
            ]
        ]
    },
    {
        "id": "f9376496.43cea8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3559,
        "y": 663,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "7b775591.92e164"
            ]
        ]
    },
    {
        "id": "293d42c2.e74426",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3560.000213623047,
        "y": 713.9999094009399,
        "z": "e001b214.9c4f88",
        "wires": [
            [
                "f17d1b1f.2fc66"
            ]
        ]
    },
    {
        "id": "7b775591.92e164",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing decoloring UNI rest api\" />\n",
        "comments": "",
        "x": 3699.0002479553223,
        "y": 663.0000009536743,
        "z": "e001b214.9c4f88",
        "wires": []
    },
    {
        "id": "f17d1b1f.2fc66",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3705.02725982666,
        "y": 711.7453947067261,
        "z": "e001b214.9c4f88",
        "wires": [
            []
        ]
    }
]