[
    {
        "id": "fa505d09.c9298",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 106,
        "y": 62,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "96d975d7.ae7b9"
            ]
        ]
    },
    {
        "id": "96d975d7.ae7b9",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 390.2856903076172,
        "y": 123.23810863494873,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "197a98e4.ad38d7"
            ]
        ]
    },
    {
        "id": "197a98e4.ad38d7",
        "type": "method",
        "name": "method tsli-vnf-topology-operation-trans-slice-delete",
        "xml": "<method rpc='tsli-vnf-topology-operation-trans-slice-delete' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 396.42860412597656,
        "y": 208.00003051757812,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "eeba2d4.aaa3b5"
            ]
        ]
    },
    {
        "id": "9e471fb5.d24a9",
        "type": "comment",
        "name": "site-vnf-topology-operation-delete",
        "info": "",
        "comments": "",
        "x": 968.9162979125977,
        "y": 129.58639907836914,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "eeba2d4.aaa3b5",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 596.2380447387695,
        "y": 357.6666717529297,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "cdad3ccf.c778c8",
                "ddca427c.b6135",
                "16b5196b.e4f74f",
                "72550323.add05c",
                "bcb30576.c5395",
                "1ee10a8.e75cb76",
                "2400813d.b23cfe",
                "466b59d1.1f9ec8",
                "8fb031c0.32361",
                "4290869b.c0e258",
                "12c0646.e45499c"
            ]
        ]
    },
    {
        "id": "72550323.add05c",
        "type": "switchNode",
        "name": "switch service-data.vnfs.vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1048.6660919189453,
        "y": 275.2611792087555,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "f1600d0.d3bcd7",
                "5da847de.3e7bd8"
            ]
        ]
    },
    {
        "id": "f1600d0.d3bcd7",
        "type": "other",
        "name": "outcome Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1313.3884048461914,
        "y": 257.81680130958557,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "2758e1f4.65c7de"
            ]
        ]
    },
    {
        "id": "2758e1f4.65c7de",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 1494.3882751464844,
        "y": 252.81667923927307,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "5da847de.3e7bd8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1298.8884048461914,
        "y": 309.81676411628723,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "3d795ab1.0cafb6"
            ]
        ]
    },
    {
        "id": "3d795ab1.0cafb6",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1470.888111114502,
        "y": 309.8167622089386,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "ed865e4c.fb2fe",
                "ef77d3e7.8772d"
            ]
        ]
    },
    {
        "id": "ef77d3e7.8772d",
        "type": "switchNode",
        "name": "switch tmp.nidx ",
        "xml": "<switch test=\"`$tmp.nidx`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1645.888282775879,
        "y": 328.81668400764465,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "e8dd060b.17e57"
            ]
        ]
    },
    {
        "id": "16b5196b.e4f74f",
        "type": "switchNode",
        "name": "switch vnf-level-oper-status",
        "xml": "<switch test='`$service-data.vnfs.vnf[$tmp.nidx].vnf-data.vnf-level-oper-status.order-status`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1019.0550918579102,
        "y": 349.7056429386139,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "284f50fc.866d8",
                "cdf83757.65b4b8"
            ]
        ]
    },
    {
        "id": "284f50fc.866d8",
        "type": "outcome",
        "name": "outcome PendingDelete",
        "xml": "<outcome value='PendingDelete'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1295.8884353637695,
        "y": 352.8167426586151,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "e9cca7ec.303c7"
            ]
        ]
    },
    {
        "id": "cdf83757.65b4b8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1256.8884201049805,
        "y": 398.8167917728424,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "28762357.a03f74"
            ]
        ]
    },
    {
        "id": "28762357.a03f74",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VNF is not in appropriate state for activate. Current state is ' + $service-data.vnfs.vnf[$tmp.nidx].vnf-data.vnf-level-oper-status.order-status`\" />",
        "comments": "",
        "x": 1405.3881340026855,
        "y": 397.81677174568176,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "bcb30576.c5395",
        "type": "execute",
        "name": "execute requiredParameters",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='requiredParameters' >\n<parameter name=\"vnf-topology-operation-input.vnf-information.vnf-id\" value=\"$vnf-topology-operation-input.vnf-information.vnf-id\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1035.388427734375,
        "y": 218.8167588710785,
        "z": "b189bed1.bef5e8",
        "wires": [
            []
        ]
    },
    {
        "id": "ed865e4c.fb2fe",
        "type": "for",
        "name": "for nidx..service-data.vnfs.vnf[]",
        "xml": "<for index='nidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1706.3882865905762,
        "y": 264.8166801929474,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "5b03bf9c.f15f28"
            ]
        ]
    },
    {
        "id": "5b03bf9c.f15f28",
        "type": "switchNode",
        "name": "switch vnf-id found",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$nidx].vnf-id == $vnf-topology-operation-input.vnf-information.vnf-id`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1962.3883056640625,
        "y": 264.8166801929474,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "b0289fb.f82296"
            ]
        ]
    },
    {
        "id": "b0289fb.f82296",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2138.888359069824,
        "y": 267.8166801929474,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "772109f8.0b899"
            ]
        ]
    },
    {
        "id": "772109f8.0b899",
        "type": "set",
        "name": "set tmp.nidx and ctx.vnf-data",
        "xml": "<set>\n<parameter name='tmp.nidx' value='`$nidx`' />\n<parameter name='ctx.vnf-data.' value='`$service-data.vnfs.vnf[$nidx].vnf-data.`' />\n",
        "comments": "",
        "x": 2305.8883743286133,
        "y": 328.8166801929474,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "68963ea5.a81b48",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 1951.388298034668,
        "y": 328.81668400764465,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "e8dd060b.17e57",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1813.888298034668,
        "y": 328.81668400764465,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "68963ea5.a81b48"
            ]
        ]
    },
    {
        "id": "cdad3ccf.c778c8",
        "type": "set",
        "name": "set vnfId and vnf-object-path",
        "xml": "<set>\n<parameter name='vnfId' value='`$vnf-topology-operation-input.vnf-information.vnf-id`' />\n<parameter name='vnf-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vnf-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'` \" />",
        "comments": "",
        "x": 1005.9051132202148,
        "y": 564.3336856365204,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "ddca427c.b6135",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 906.0162353515625,
        "y": 1435.88916015625,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "e9cca7ec.303c7",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1491.1947937011719,
        "y": 360.14194798469543,
        "z": "b189bed1.bef5e8",
        "wires": [
            []
        ]
    },
    {
        "id": "1ee10a8.e75cb76",
        "type": "set",
        "name": "set prop.vnfNewidx",
        "xml": "<set>\n<parameter name='prop.vnfidxLen' value='`0`' />\n",
        "comments": "",
        "x": 988.0000839233398,
        "y": 400.00007796287537,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "2400813d.b23cfe",
        "type": "for",
        "name": "for lidx..service-data.vnfs.vnf[]",
        "xml": "<for index='lidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1012.0000686645508,
        "y": 442.0000765323639,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "572dbcf2.896d3c"
            ]
        ]
    },
    {
        "id": "572dbcf2.896d3c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1273.000144958496,
        "y": 446.00011134147644,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "53356e5d.7d71c"
            ]
        ]
    },
    {
        "id": "53356e5d.7d71c",
        "type": "switchNode",
        "name": "switch vnf-id found",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$lidx].vnf-id == $vnf-topology-operation-input.vnf-information.vnf-id`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1465.0000915527344,
        "y": 455.00015568733215,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "82733dd2.3a7d"
            ]
        ]
    },
    {
        "id": "82733dd2.3a7d",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1651.0001068115234,
        "y": 439.0000422000885,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "d7f72ca.5dc4ed"
            ]
        ]
    },
    {
        "id": "d7f72ca.5dc4ed",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1802.0000305175781,
        "y": 440.0000784397125,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "920da24f.169358",
                "953950.d86c6eb"
            ]
        ]
    },
    {
        "id": "920da24f.169358",
        "type": "set",
        "name": "set  vnf data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$prop.vnfidxLen].vnf-id' value='`$service-data.vnfs.vnf[$lidx].vnf-id`' />\n<parameter name='service-data.vnfs.vnf[$prop.vnfidxLen].vnf-data.' value='`$service-data.vnfs.vnf[$lidx].vnf-data.`' />\n",
        "comments": "",
        "x": 1969.0001983642578,
        "y": 414.00026202201843,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "953950.d86c6eb",
        "type": "set",
        "name": "set prop.vnfNewidx",
        "xml": "<set>\n<parameter name='prop.vnfidxLen' value='`$prop.vnfidxLen + 1`' />\n",
        "comments": "",
        "x": 1989.0001258850098,
        "y": 471.0001976490021,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "466b59d1.1f9ec8",
        "type": "set",
        "name": "set new vnf length",
        "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf_length\" value='`$prop.vnfidxLen`'/>\n\n\t\n",
        "comments": "",
        "x": 980.1014823913574,
        "y": 485.804429769516,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "8fb031c0.32361",
        "type": "set",
        "name": "Remove vnf from ServiceData",
        "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf[$prop.vnfidxLen].\" value=\"\"/>\n\n",
        "comments": "",
        "x": 1010.0002517700195,
        "y": 524.0002129077911,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "4290869b.c0e258",
        "type": "save",
        "name": "delete AnAI - vnf-instance.orchestration-status",
        "xml": "<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"generic-vnf\"   \n\t\tkey=\"generic-vnf.vnf-id = $vnfId\" >\n<parameter name=\"orchestration-status\" value=\"PendingDelete\" />\n<parameter name=\"vnf-type\" value=\"some vnf-type\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1067.0066452026367,
        "y": 601.0106251239777,
        "z": "b189bed1.bef5e8",
        "wires": [
            []
        ]
    },
    {
        "id": "740c712e.7b0a18",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 1001,
        "y": 735,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "12c0646.e45499c",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id\n         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id \n         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">",
        "comments": "",
        "outputs": 1,
        "x": 1012,
        "y": 785,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "f9064279.1b4f8",
                "17f4eefe.af8569",
                "e0ea0e9c.c1ac38"
            ]
        ]
    },
    {
        "id": "f9064279.1b4f8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1228,
        "y": 750,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "7baaa7aa.36e958"
            ]
        ]
    },
    {
        "id": "17f4eefe.af8569",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1237.490966796875,
        "y": 792.5740356445312,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "48a0edde.3f94f4"
            ]
        ]
    },
    {
        "id": "e0ea0e9c.c1ac38",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1226,
        "y": 839,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "b71eb698.9367c8"
            ]
        ]
    },
    {
        "id": "48a0edde.3f94f4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1391.0623779296875,
        "y": 795.8597717285156,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "b71eb698.9367c8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1395,
        "y": 840,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "7baaa7aa.36e958",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for index='rel-index' start='0' end='`$tmp.aai.service-instance.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1425,
        "y": 746,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "7f9e9a3e.4de224"
            ]
        ]
    },
    {
        "id": "7f9e9a3e.4de224",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.service-instance.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1648.33349609375,
        "y": 745.9999389648438,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "316daf9e.190dc"
            ]
        ]
    },
    {
        "id": "316daf9e.190dc",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1844,
        "y": 748,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "d510feb6.348d7"
            ]
        ]
    },
    {
        "id": "d510feb6.348d7",
        "type": "switchNode",
        "name": "switch $rel-index == 0",
        "xml": "<switch test=\"`$rel-index == 0`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2031.9998664855957,
        "y": 745.999979019165,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "71f2cf8d.3a35e",
                "264b9f2.1aba9e"
            ]
        ]
    },
    {
        "id": "71f2cf8d.3a35e",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2254.9998664855957,
        "y": 635.999979019165,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "c924f778.a2b848"
            ]
        ]
    },
    {
        "id": "264b9f2.1aba9e",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2225.999755859375,
        "y": 1062,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "beac7966.aff0e"
            ]
        ]
    },
    {
        "id": "c924f778.a2b848",
        "type": "save",
        "name": "get connectivityA from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[0].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivityA\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2448.9998664855957,
        "y": 635.999979019165,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "b8d26364.3207e8",
                "ce782cd0.462e9",
                "c0db2841.2c9108"
            ]
        ]
    },
    {
        "id": "beac7966.aff0e",
        "type": "save",
        "name": "get connectivityB from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[1].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivityB\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2421.999755859375,
        "y": 1062,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "e783575a.ee3408",
                "f2d51460.33b19",
                "7c2969db.4e66a"
            ]
        ]
    },
    {
        "id": "b8d26364.3207e8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2654.9998664855957,
        "y": 595.999979019165,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "888a4917.61b98"
            ]
        ]
    },
    {
        "id": "ce782cd0.462e9",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2655.4908332824707,
        "y": 641.5740146636963,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "a71edbbe.5f5c18"
            ]
        ]
    },
    {
        "id": "c0db2841.2c9108",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2652.9998664855957,
        "y": 684.999979019165,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "a3da676a.d60b68"
            ]
        ]
    },
    {
        "id": "888a4917.61b98",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2827.6663703918457,
        "y": 594.999979019165,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "e61d24fe.b9f57"
            ]
        ]
    },
    {
        "id": "a71edbbe.5f5c18",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2818.062244415283,
        "y": 641.8597507476807,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "a3da676a.d60b68",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2821.9998664855957,
        "y": 685.999979019165,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "e783575a.ee3408",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2641.999755859375,
        "y": 1033,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "589b1078.8544c"
            ]
        ]
    },
    {
        "id": "f2d51460.33b19",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2643.49072265625,
        "y": 1078.5740356445312,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "41e63be3.fadc5c"
            ]
        ]
    },
    {
        "id": "7c2969db.4e66a",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2639.999755859375,
        "y": 1124,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "2d54d7a1.ac5068"
            ]
        ]
    },
    {
        "id": "589b1078.8544c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2814.666259765625,
        "y": 1034,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "be4e9140.d69b68"
            ]
        ]
    },
    {
        "id": "41e63be3.fadc5c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2805.0621337890625,
        "y": 1080.8597717285156,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "2d54d7a1.ac5068",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2808.999755859375,
        "y": 1125,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "e61d24fe.b9f57",
        "type": "save",
        "name": "get vpn-binding-A from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivityA.relationship-list.relationship[0].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-bindingA\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 3047,
        "y": 579,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "2b60392e.ff6d9e",
                "49846022.e395b8",
                "b35a5936.c908e8"
            ]
        ]
    },
    {
        "id": "abc0c7ad.b5acd8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3431,
        "y": 579,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "4263af43.fa9c48",
                "196f2286.5bda85",
                "e474491b.fe4e98",
                "f4710eb9.81bb",
                "4d26fd5b.dd7194"
            ]
        ]
    },
    {
        "id": "4263af43.fa9c48",
        "type": "set",
        "name": "set attachment_param for TN NSSSI deleteion in PNC A",
        "xml": "<set>\n<parameter name='ietf-te_te.tunnels.tunnel[0].source' value='`$tmp.aai.vpn-bindingA.access-node-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].destination' value='`$tmp.aai.vpn-bindingA.dst-access-node-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].dst-ttp-id' value='`$tmp.aai.vpn-bindingA.dst-access-ltp-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].ietf-otn-tunnel_dst-tpn' value='' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].te-topology-identifier.client-id' value='`$tmp.aai.vpn-bindingA.access-client-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].te-topology-identifier.provider-id' value='`$tmp.aai.vpn-bindingA.access-provider-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].te-topology-identifier.topology-id' value='`$tmp.aai.vpn-bindingA.access-topology-id`' />\n\n<parameter name='ietf-te_te.tunnels.tunnel[1].source' value='`$tmp.aai.vpn-bindingA.access-node-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].destination' value='`$tmp.aai.vpn-bindingA.dst-access-node-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].name' value='tptunnel-22' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].dependency-tunnels.dependency-tunnel[0].name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n\n<parameter name='ietf-te_te.tunnels.tunnel[1].te-topology-identifier.client-id' value='`$tmp.aai.vpn-bindingA.access-client-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].te-topology-identifier.provider-id' value='`$tmp.aai.vpn-bindingA.access-provider-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].te-topology-identifier.topology-id' value='`$tmp.aai.vpn-bindingA.access-topology-id`' />\n\n",
        "comments": "",
        "x": 3783,
        "y": 572,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "2b60392e.ff6d9e",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3258,
        "y": 581,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "abc0c7ad.b5acd8"
            ]
        ]
    },
    {
        "id": "49846022.e395b8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3258.490966796875,
        "y": 626.5740356445312,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "df7bab95.4da49"
            ]
        ]
    },
    {
        "id": "b35a5936.c908e8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3256,
        "y": 670,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "2e3ee94d.2c9d76"
            ]
        ]
    },
    {
        "id": "2e3ee94d.2c9d76",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3423,
        "y": 669,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "df7bab95.4da49",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3421.0623779296875,
        "y": 626.8597717285156,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "4d26fd5b.dd7194",
        "type": "execute",
        "name": "execute RestApiCallNode Delete TN NSSI",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-otn-tunnel-service.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<!--<parameter name='dirPath' value=\"/opt/sdnc/restapi/yang\" />-->\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3739,
        "y": 623,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "1605b46c.2a0984",
                "49599f6.eb505e"
            ]
        ]
    },
    {
        "id": "1605b46c.2a0984",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4086.5,
        "y": 593,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "c35b0230.a333b8"
            ]
        ]
    },
    {
        "id": "49599f6.eb505e",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4101.5,
        "y": 658,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "c575a6f8.585bd8"
            ]
        ]
    },
    {
        "id": "c35b0230.a333b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
        "comments": "",
        "x": 4270.5,
        "y": 589,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "c575a6f8.585bd8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4296,
        "y": 651,
        "z": "b189bed1.bef5e8",
        "wires": [
            []
        ]
    },
    {
        "id": "196f2286.5bda85",
        "type": "get-resource",
        "name": "get-resource esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $prop.sdncRestApi.thirdpartySdnc.id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3734,
        "y": 444,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "1da34d03.94651b",
                "c42b64ae.aaab8",
                "25d5725f.b07fee"
            ]
        ]
    },
    {
        "id": "1da34d03.94651b",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3980,
        "y": 404,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "6e678297.9224ac"
            ]
        ]
    },
    {
        "id": "c42b64ae.aaab8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3984,
        "y": 444,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "96b16b61.297a58"
            ]
        ]
    },
    {
        "id": "25d5725f.b07fee",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3976,
        "y": 484,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "8951a2c3.b71c18"
            ]
        ]
    },
    {
        "id": "8951a2c3.b71c18",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 4134,
        "y": 484,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "96b16b61.297a58",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 4134,
        "y": 444,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "6e678297.9224ac",
        "type": "set",
        "name": "set controller data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 4150,
        "y": 404,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "7ef0083.0af5478",
        "type": "comment",
        "name": "Get controller info and send request",
        "info": "",
        "comments": "",
        "x": 3742,
        "y": 404,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "3d0f709d.f526f8",
        "type": "comment",
        "name": "TODO: FIXME:",
        "info": "How to know which domain's (A or B) controller is bein retrieved?",
        "comments": "",
        "x": 3674,
        "y": 364,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "744d9a2e.8e773c",
        "type": "comment",
        "name": "TODO: FIXME:",
        "info": "Set proper values to generate a good JSON body to be sent to PNC A for TN NSSI deletion.",
        "comments": "",
        "x": 3654,
        "y": 528,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "e474491b.fe4e98",
        "type": "save",
        "name": "delete connectivity resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivityA.connectivity-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3711,
        "y": 715,
        "z": "b189bed1.bef5e8",
        "wires": [
            []
        ]
    },
    {
        "id": "47618fca.ed7b18",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[?] all together\nin order to assemble the correct values for provider-id, \ntopology-id, node-id, etc.",
        "comments": "",
        "x": 3646,
        "y": 681,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "f4710eb9.81bb",
        "type": "save",
        "name": "delete vpn-binding resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='tmp.aai.vpn-bindingA = $tmp.aai.vpn-bindingA'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3707,
        "y": 759,
        "z": "b189bed1.bef5e8",
        "wires": [
            []
        ]
    },
    {
        "id": "be4e9140.d69b68",
        "type": "save",
        "name": "get vpn-binding-B from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivityB.relationship-list.relationship[0].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-bindingB\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 3079,
        "y": 1027,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "ef723c11.8ecf08",
                "d24eb3b1.82784",
                "d82f4ae7.ff1938"
            ]
        ]
    },
    {
        "id": "ef723c11.8ecf08",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3286,
        "y": 1030,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "db88eddf.0d68b8"
            ]
        ]
    },
    {
        "id": "d24eb3b1.82784",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3286.490966796875,
        "y": 1075.5740356445312,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "b2d386a0.34fcc8"
            ]
        ]
    },
    {
        "id": "d82f4ae7.ff1938",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3284,
        "y": 1119,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "fced2850.46c338"
            ]
        ]
    },
    {
        "id": "fced2850.46c338",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3453,
        "y": 1120,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "b2d386a0.34fcc8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3449.0623779296875,
        "y": 1075.8597717285156,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "db88eddf.0d68b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3455,
        "y": 1030,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "968b60ca.b919a8",
                "4bf2b1b3.14be6",
                "474863fb.23ac14",
                "13714ee3.ae8141",
                "408a0c32.404a4c"
            ]
        ]
    },
    {
        "id": "968b60ca.b919a8",
        "type": "set",
        "name": "set attachment_param for TN NSSSI deleteion in PNC B",
        "xml": "<set>\n<parameter name='ietf-te_te.tunnels.tunnel[0].source' value='`$tmp.aai.vpn-bindingB.access-node-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].destination' value='`$tmp.aai.vpn-bindingB.dst-access-node-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].dst-ttp-id' value='`$tmp.aai.vpn-bindingB.dst-access-ltp-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].ietf-otn-tunnel_dst-tpn' value='' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].te-topology-identifier.client-id' value='`$tmp.aai.vpn-bindingB.access-client-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].te-topology-identifier.provider-id' value='`$tmp.aai.vpn-bindingB.access-provider-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].te-topology-identifier.topology-id' value='`$tmp.aai.vpn-bindingB.access-topology-id`' />\n\n<parameter name='ietf-te_te.tunnels.tunnel[1].source' value='`$tmp.aai.vpn-bindingB.access-node-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].destination' value='`$tmp.aai.vpn-bindingB.dst-access-node-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].name' value='tptunnel-22' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].dependency-tunnels.dependency-tunnel[0].name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n\n<parameter name='ietf-te_te.tunnels.tunnel[1].te-topology-identifier.client-id' value='`$tmp.aai.vpn-bindingB.access-client-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].te-topology-identifier.provider-id' value='`$tmp.aai.vpn-bindingB.access-provider-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].te-topology-identifier.topology-id' value='`$tmp.aai.vpn-bindingB.access-topology-id`' />\n\n",
        "comments": "",
        "x": 3816,
        "y": 1131,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "cb725e7f.5dd5b",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4075,
        "y": 1158,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "8ff601d0.110ad8"
            ]
        ]
    },
    {
        "id": "9cd7bc00.01b8a8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4090,
        "y": 1223,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "f31755df.8bf058"
            ]
        ]
    },
    {
        "id": "8ff601d0.110ad8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
        "comments": "",
        "x": 4259,
        "y": 1154,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "f31755df.8bf058",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4257.5,
        "y": 1217,
        "z": "b189bed1.bef5e8",
        "wires": [
            []
        ]
    },
    {
        "id": "4bf2b1b3.14be6",
        "type": "execute",
        "name": "execute RestApiCallNode Delete TN NSSI",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-otn-tunnel-service.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<!--<parameter name='dirPath' value=\"/opt/sdnc/restapi/yang\" />-->\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3775.5,
        "y": 1181,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "cb725e7f.5dd5b",
                "9cd7bc00.01b8a8"
            ]
        ]
    },
    {
        "id": "474863fb.23ac14",
        "type": "get-resource",
        "name": "get-resource esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $prop.sdncRestApi.thirdpartySdnc.id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3743,
        "y": 1016,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "d06c3921.6cace",
                "88d90a9f.091b3",
                "12a460ba.ca9617"
            ]
        ]
    },
    {
        "id": "d06c3921.6cace",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3989,
        "y": 976,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "21d11018.7e29f8"
            ]
        ]
    },
    {
        "id": "88d90a9f.091b3",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3993,
        "y": 1016,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "863d5ed9.b49e18"
            ]
        ]
    },
    {
        "id": "12a460ba.ca9617",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3985,
        "y": 1056,
        "z": "b189bed1.bef5e8",
        "wires": [
            [
                "1cdaf293.72e3fd"
            ]
        ]
    },
    {
        "id": "1cdaf293.72e3fd",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 4143,
        "y": 1056,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "863d5ed9.b49e18",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 4143,
        "y": 1016,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "21d11018.7e29f8",
        "type": "set",
        "name": "set controller data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 4159,
        "y": 976,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "ef8c4420.4b2328",
        "type": "comment",
        "name": "Get controller info and send request",
        "info": "",
        "comments": "",
        "x": 3751,
        "y": 976,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "e3821d69.5cd46",
        "type": "comment",
        "name": "TODO: FIXME:",
        "info": "How to know which domain's (A or B) controller is bein retrieved?",
        "comments": "",
        "x": 3685.5,
        "y": 936,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "e565282f.4ac74",
        "type": "comment",
        "name": "TODO: FIXME:",
        "info": "Set proper values to generate a good JSON body to be sent to PNC A for TN NSSI deletion.",
        "comments": "",
        "x": 3682,
        "y": 1080,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "13714ee3.ae8141",
        "type": "save",
        "name": "delete connectivity resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivityB.connectivity-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3733,
        "y": 1273,
        "z": "b189bed1.bef5e8",
        "wires": [
            []
        ]
    },
    {
        "id": "36d49abc.7de96e",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[?] all together\nin order to assemble the correct values for provider-id, \ntopology-id, node-id, etc.",
        "comments": "",
        "x": 3668,
        "y": 1239,
        "z": "b189bed1.bef5e8",
        "wires": []
    },
    {
        "id": "408a0c32.404a4c",
        "type": "save",
        "name": "delete vpn-binding resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='tmp.aai.vpn-bindingB = $tmp.aai.vpn-bindingB'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3729,
        "y": 1317,
        "z": "b189bed1.bef5e8",
        "wires": [
            []
        ]
    }
]