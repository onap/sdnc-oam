[
    {
        "id": "5a4a886b.6438b8",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 118,
        "y": 82,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "2fc91b3e.7646fc"
            ]
        ]
    },
    {
        "id": "2fc91b3e.7646fc",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 249.2856903076172,
        "y": 131.23810863494873,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "1c977ea2.89d1e9"
            ]
        ]
    },
    {
        "id": "1c977ea2.89d1e9",
        "type": "method",
        "name": "method tsli-vnf-topology-operation-trans-slice-delete",
        "xml": "<method rpc='tsli-vnf-topology-operation-trans-slice-delete' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 252.42861938476562,
        "y": 216.00003242492676,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "8ce10b59.587f08"
            ]
        ]
    },
    {
        "id": "8ce10b59.587f08",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 402.238037109375,
        "y": 345.6666564941406,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "c14a5da1.726bc8",
                "f7f11593.991128",
                "fbeb2897.5d3ca"
            ]
        ]
    },
    {
        "id": "c14a5da1.726bc8",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 698.5716552734375,
        "y": 622.59716796875,
        "z": "d544e90d.c47ab8",
        "wires": []
    },
    {
        "id": "86779e76.e7bc38",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 730,
        "y": 297,
        "z": "d544e90d.c47ab8",
        "wires": []
    },
    {
        "id": "f7f11593.991128",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n    \n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--vnf-topology-operation-input.service-information.service-instance-id-->",
        "comments": "",
        "outputs": 1,
        "x": 750,
        "y": 393,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "6ad861a9.030e08",
                "37e2fd06.c6c79a",
                "2beeb8ca.34f3f"
            ]
        ]
    },
    {
        "id": "6ad861a9.030e08",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 969,
        "y": 331,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "c860abc6.0b576"
            ]
        ]
    },
    {
        "id": "37e2fd06.c6c79a",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 978.490966796875,
        "y": 373.57403564453125,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "7a133195.09b68"
            ]
        ]
    },
    {
        "id": "2beeb8ca.34f3f",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 967,
        "y": 420,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "f9d75edb.c19d18"
            ]
        ]
    },
    {
        "id": "7a133195.09b68",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1132.0623779296875,
        "y": 376.8597717285156,
        "z": "d544e90d.c47ab8",
        "wires": []
    },
    {
        "id": "f9d75edb.c19d18",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1136,
        "y": 421,
        "z": "d544e90d.c47ab8",
        "wires": []
    },
    {
        "id": "c860abc6.0b576",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for index='rel-index' start='0' end='`$tmp.aai.service-instance.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1166,
        "y": 327,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "f376992c.11dc58"
            ]
        ]
    },
    {
        "id": "f376992c.11dc58",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.service-instance.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1389.33349609375,
        "y": 326.99993896484375,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "8db70c24.1a1f5"
            ]
        ]
    },
    {
        "id": "8db70c24.1a1f5",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1590.0001335144043,
        "y": 328.00002098083496,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "5dc8f559.ac7c5c"
            ]
        ]
    },
    {
        "id": "fbeb2897.5d3ca",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 716,
        "y": 341,
        "z": "d544e90d.c47ab8",
        "wires": [
            []
        ]
    },
    {
        "id": "5dc8f559.ac7c5c",
        "type": "save",
        "name": "get connectivity from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1828,
        "y": 330,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "17e90170.66a2cf",
                "46c095c4.314d14",
                "64e3b5e2.26b114"
            ]
        ]
    },
    {
        "id": "17e90170.66a2cf",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2036,
        "y": 294,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "c90d8c84.a14a1"
            ]
        ]
    },
    {
        "id": "46c095c4.314d14",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2036.490966796875,
        "y": 339.57403564453125,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "3f9ff972.5c8816"
            ]
        ]
    },
    {
        "id": "64e3b5e2.26b114",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2034,
        "y": 383,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "6b417e35.8fa86"
            ]
        ]
    },
    {
        "id": "3f9ff972.5c8816",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2199.0623779296875,
        "y": 339.8597717285156,
        "z": "d544e90d.c47ab8",
        "wires": []
    },
    {
        "id": "6b417e35.8fa86",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2203,
        "y": 384,
        "z": "d544e90d.c47ab8",
        "wires": []
    },
    {
        "id": "62f4640b.361d2c",
        "type": "save",
        "name": "get vpn-binding from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2509,
        "y": 383,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "41f800bd.97bbd8",
                "3588ab7d.ccee3c",
                "5014f1b1.a66d2"
            ]
        ]
    },
    {
        "id": "9b1454f6.71587",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2893,
        "y": 383,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "3ec88632.a3afda",
                "ef2eaf52.5162b",
                "74648c00.009a34",
                "176c3740.91c4e1",
                "a43ffa2e.f43268",
                "b74320f6.969fd8",
                "2043f8a6.e6867"
            ]
        ]
    },
    {
        "id": "41f800bd.97bbd8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2720,
        "y": 385,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "9b1454f6.71587"
            ]
        ]
    },
    {
        "id": "3588ab7d.ccee3c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2720.490966796875,
        "y": 430.57403564453125,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "f5b7e34a.e6a3a"
            ]
        ]
    },
    {
        "id": "5014f1b1.a66d2",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2718,
        "y": 474,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "dad8e49f.e5f9b8"
            ]
        ]
    },
    {
        "id": "dad8e49f.e5f9b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2885,
        "y": 473,
        "z": "d544e90d.c47ab8",
        "wires": []
    },
    {
        "id": "f5b7e34a.e6a3a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2883.0623779296875,
        "y": 430.8597717285156,
        "z": "d544e90d.c47ab8",
        "wires": []
    },
    {
        "id": "c90d8c84.a14a1",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2237,
        "y": 289,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "304af23b.91e62e"
            ]
        ]
    },
    {
        "id": "304af23b.91e62e",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2442,
        "y": 289,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "a73bd099.6c0378"
            ]
        ]
    },
    {
        "id": "a73bd099.6c0378",
        "type": "outcome",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2608,
        "y": 289,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "98e41266.eb692"
            ]
        ]
    },
    {
        "id": "98e41266.eb692",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2771,
        "y": 289,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "62f4640b.361d2c"
            ]
        ]
    },
    {
        "id": "3ec88632.a3afda",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-binding.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-binding.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-binding.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-binding.src-access-node-id`\" />\n",
        "comments": "",
        "x": 3108,
        "y": 93,
        "z": "d544e90d.c47ab8",
        "wires": []
    },
    {
        "id": "ef2eaf52.5162b",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3134,
        "y": 210,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "d4d69c61.a67388",
                "cc6ec5bd.14d058",
                "7b98c47b.75268c"
            ]
        ]
    },
    {
        "id": "d4d69c61.a67388",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3329.5001220703125,
        "y": 162,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "6766d137.85bc78"
            ]
        ]
    },
    {
        "id": "cc6ec5bd.14d058",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3321.5001220703125,
        "y": 217,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "e5b8c6a7.d0685"
            ]
        ]
    },
    {
        "id": "6766d137.85bc78",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3473.8824462890625,
        "y": 161.65567016601562,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "6ec2253c.e8e2fc"
            ]
        ]
    },
    {
        "id": "6ec2253c.e8e2fc",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3658,
        "y": 160,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "8bfd549d.ff7578"
            ]
        ]
    },
    {
        "id": "8bfd549d.ff7578",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3853,
        "y": 160,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "e0432128.bf189"
            ]
        ]
    },
    {
        "id": "7b98c47b.75268c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3326.5001220703125,
        "y": 274,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "a0edf332.814bd"
            ]
        ]
    },
    {
        "id": "a0edf332.814bd",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3478.5001220703125,
        "y": 275,
        "z": "d544e90d.c47ab8",
        "wires": []
    },
    {
        "id": "e5b8c6a7.d0685",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3489.5001220703125,
        "y": 218,
        "z": "d544e90d.c47ab8",
        "wires": []
    },
    {
        "id": "e1454ec0.76085",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 4441,
        "y": 177,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "d8d8f637.323998",
                "a47d1ee9.cdd92",
                "e6ec849b.7b7268"
            ]
        ]
    },
    {
        "id": "682b00ad.3f22e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4235,
        "y": 164,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "e9dde318.2ce9c8",
                "e1454ec0.76085",
                "d1046ced.fbcef8"
            ]
        ]
    },
    {
        "id": "e9dde318.2ce9c8",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4471,
        "y": 125,
        "z": "d544e90d.c47ab8",
        "wires": []
    },
    {
        "id": "d8d8f637.323998",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4651,
        "y": 168,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "d20b8026.ed11d"
            ]
        ]
    },
    {
        "id": "a47d1ee9.cdd92",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4643,
        "y": 223,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "8f556dc3.062b5"
            ]
        ]
    },
    {
        "id": "e6ec849b.7b7268",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4648,
        "y": 280,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "c00b4c05.8ab27"
            ]
        ]
    },
    {
        "id": "c00b4c05.8ab27",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4800,
        "y": 281,
        "z": "d544e90d.c47ab8",
        "wires": []
    },
    {
        "id": "8f556dc3.062b5",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4811,
        "y": 226,
        "z": "d544e90d.c47ab8",
        "wires": []
    },
    {
        "id": "d20b8026.ed11d",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4795.38232421875,
        "y": 165.65567016601562,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "3c8da8b7.eb2a3"
            ]
        ]
    },
    {
        "id": "e0432128.bf189",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4056,
        "y": 164,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "682b00ad.3f22e"
            ]
        ]
    },
    {
        "id": "3c8da8b7.eb2a3",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5010,
        "y": 162,
        "z": "d544e90d.c47ab8",
        "wires": []
    },
    {
        "id": "d1046ced.fbcef8",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4391,
        "y": 241,
        "z": "d544e90d.c47ab8",
        "wires": []
    },
    {
        "id": "b74320f6.969fd8",
        "type": "execute",
        "name": "execute RestApiCallNode Delete transport slice without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.transport-slice-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url +  '/restconf/operations/ietf-optical-slice:deallocate-optical-slice'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3258,
        "y": 508,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "5f11d071.d597d8",
                "2c04f9a8.8e1bee"
            ]
        ]
    },
    {
        "id": "5f11d071.d597d8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3601.5,
        "y": 503,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "bc1a033f.a0f87"
            ]
        ]
    },
    {
        "id": "2c04f9a8.8e1bee",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3605.5,
        "y": 543,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "14490b55.121775"
            ]
        ]
    },
    {
        "id": "14490b55.121775",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3763,
        "y": 543,
        "z": "d544e90d.c47ab8",
        "wires": [
            []
        ]
    },
    {
        "id": "bc1a033f.a0f87",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing deallocate transport slice rest api\" />\n",
        "comments": "",
        "x": 3759.5,
        "y": 503,
        "z": "d544e90d.c47ab8",
        "wires": []
    },
    {
        "id": "74648c00.009a34",
        "type": "set",
        "name": "set attachment_param for TN NSSSI deleteion in PNC",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n",
        "comments": "",
        "x": 3234,
        "y": 383,
        "z": "d544e90d.c47ab8",
        "wires": []
    },
    {
        "id": "176c3740.91c4e1",
        "type": "save",
        "name": "delete connectivity resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivity.connectivity-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3164,
        "y": 818,
        "z": "d544e90d.c47ab8",
        "wires": [
            []
        ]
    },
    {
        "id": "a43ffa2e.f43268",
        "type": "save",
        "name": "delete vpn-binding resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3160,
        "y": 862,
        "z": "d544e90d.c47ab8",
        "wires": [
            []
        ]
    },
    {
        "id": "2ee33a01.a56356",
        "type": "execute",
        "name": "execute RestApiCallNode domain UNI deColoring",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-coloring-uni-port.templatefile`\" />-->\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-network:networks/network=networkId-providerId-' + $tmp.aai.connectivity.access-provider-id + '-clientId-' + $tmp.aai.connectivity.access-client-id + '-topologyId-' + $tmp.aai.connectivity.access-topology-id +  '/node=' + $tmp.aai.connectivity.access-node-id + '/ietf-network-topology:termination-point=' + $tmp.aai.connectivity.access-ltp-id + '/ietf-te-topology:te/ietf-optical-slice:slice-id-list=' + $slice-instance-id `\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3744,
        "y": 682,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "708d25c4.9f039c",
                "9fd83c73.a107c"
            ]
        ]
    },
    {
        "id": "9fd83c73.a107c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4010,
        "y": 662,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "a8d157b0.ef0838"
            ]
        ]
    },
    {
        "id": "708d25c4.9f039c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4011.000213623047,
        "y": 712.9999094009399,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "aa9d5dd.46a2da"
            ]
        ]
    },
    {
        "id": "a8d157b0.ef0838",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing decoloring UNI rest api\" />\n",
        "comments": "",
        "x": 4150.000247955322,
        "y": 662.0000009536743,
        "z": "d544e90d.c47ab8",
        "wires": []
    },
    {
        "id": "aa9d5dd.46a2da",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4156.02725982666,
        "y": 710.7453947067261,
        "z": "d544e90d.c47ab8",
        "wires": [
            []
        ]
    },
    {
        "id": "2043f8a6.e6867",
        "type": "switchNode",
        "name": "switch connectivity has ethernet service",
        "xml": "<switch test='`$tmp.aai.connectivity.etht-svc-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3193,
        "y": 699,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "f28924af.d151d",
                "b67c4790.638238"
            ]
        ]
    },
    {
        "id": "b67c4790.638238",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3431,
        "y": 682,
        "z": "d544e90d.c47ab8",
        "wires": [
            [
                "2ee33a01.a56356"
            ]
        ]
    },
    {
        "id": "f28924af.d151d",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 3443,
        "y": 749,
        "z": "d544e90d.c47ab8",
        "wires": [
            []
        ]
    }
]