[
    {
        "id": "9067dc50.e26888",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 130,
        "y": 78,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "51326c57.b5118c"
            ]
        ]
    },
    {
        "id": "51326c57.b5118c",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 261.2856903076172,
        "y": 127.23810863494873,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "1a80b7c8.5e20d"
            ]
        ]
    },
    {
        "id": "1a80b7c8.5e20d",
        "type": "method",
        "name": "method tsli-vnf-topology-operation-trans-slice-delete",
        "xml": "<method rpc='tsli-vnf-topology-operation-trans-slice-delete' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 264.4286193847656,
        "y": 212.00003242492676,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "727ca303.e92f14"
            ]
        ]
    },
    {
        "id": "727ca303.e92f14",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 414.238037109375,
        "y": 341.6666564941406,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "7a804d58.243934",
                "89ce3405.afdad8",
                "62c8e46b.c3a464",
                "d658c517.bf92",
                "32ed9697.982832",
                "f34628af.971e58",
                "662b7b8b.c02da4"
            ]
        ]
    },
    {
        "id": "7a804d58.243934",
        "type": "set",
        "name": "set vnf-level-oper-status to Active",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.order-status' value='Active' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.last-rpc-action' value='`$vnf-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.last-action' value='`$vnf-topology-operation-input.request-information.request-action`' />",
        "comments": "",
        "x": 757.3849563598633,
        "y": 578.6705458434299,
        "z": "65374df1.8a48d4",
        "wires": []
    },
    {
        "id": "89ce3405.afdad8",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 679.5716552734375,
        "y": 1025.59716796875,
        "z": "65374df1.8a48d4",
        "wires": []
    },
    {
        "id": "62c8e46b.c3a464",
        "type": "set",
        "name": "set vnf-index and vnf-object-path",
        "xml": "<set>\n<parameter name='vnfId' value='`$vnf-topology-operation-input.vnf-information.vnf-id`' />\n<parameter name=\"vnf-object-path\" value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/vnfs/vnf/'  + $vnf-topology-operation-input.vnf-information.vnf-id  + '/vnf-data/'` \" />",
        "comments": "",
        "x": 763.5716018676758,
        "y": 526.5968001158908,
        "z": "65374df1.8a48d4",
        "wires": []
    },
    {
        "id": "d658c517.bf92",
        "type": "switchNode",
        "name": "switch service-data.vnfs.vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 772,
        "y": 281,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "b5276154.6a1ed",
                "eacb5958.171438",
                "3df8065e.7de83a"
            ]
        ]
    },
    {
        "id": "3df8065e.7de83a",
        "type": "outcome",
        "name": "0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1164.968994140625,
        "y": 246.96875,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "b67a6b39.9c3b28"
            ]
        ]
    },
    {
        "id": "b67a6b39.9c3b28",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 1319.7778816223145,
        "y": 265.889018535614,
        "z": "65374df1.8a48d4",
        "wires": []
    },
    {
        "id": "b5276154.6a1ed",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1158.0001335144043,
        "y": 286.00007152557373,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "b67a6b39.9c3b28"
            ]
        ]
    },
    {
        "id": "eacb5958.171438",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1151.0005416870117,
        "y": 319.000075340271,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "c234cff7.7ef258"
            ]
        ]
    },
    {
        "id": "c234cff7.7ef258",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1298.2700843811035,
        "y": 319.5547204017639,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "b32cc934.bd9fc"
            ]
        ]
    },
    {
        "id": "b32cc934.bd9fc",
        "type": "for",
        "name": "for vidx..service-data.vnfs.vnf_length[]",
        "xml": "<for index='vnfidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1544.2862014770508,
        "y": 326.42864084243774,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "fda99788.acde08"
            ]
        ]
    },
    {
        "id": "fda99788.acde08",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1763.6358337402344,
        "y": 325.96872091293335,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "a4d47aae.7e8878"
            ]
        ]
    },
    {
        "id": "a4d47aae.7e8878",
        "type": "switchNode",
        "name": "switch vnfid found",
        "xml": "<!--<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-id == $vnf-topology-operation-input.vnf-information.vnf-id`\">-->\n<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.service-information.service-instance-id == $vnf-topology-operation-input.service-information.service-instance-id`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1917.715431213379,
        "y": 325.67880296707153,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "6b59c5d7.3646fc"
            ]
        ]
    },
    {
        "id": "6b59c5d7.3646fc",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2128.6675758361816,
        "y": 328.571494102478,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "20b758d3.38f058"
            ]
        ]
    },
    {
        "id": "20b758d3.38f058",
        "type": "set",
        "name": "set tmp.vidx and ctx.vnf-data",
        "xml": "<set>\n<parameter name='tmp.vidx' value='`$vnfidx`' />\n<parameter name='ctx.vnf-data.' value='`$service-data.vnfs.vnf[$vnfidx].`' />\n",
        "comments": "",
        "x": 2338.199951171875,
        "y": 330.32159423828125,
        "z": "65374df1.8a48d4",
        "wires": []
    },
    {
        "id": "ca853429.36725",
        "type": "save",
        "name": "update AnAI - vnf-instance.orchestration-status",
        "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"generic-vnf\"   \n\t\tkey=\"generic-vnf.vnf-id = $vnfId\" >\n<parameter name=\"orchestration-status\" value=\"Active\" />\n<parameter name=\"vnf-type\" value=\"some vnf-type\" />",
        "comments": "",
        "outputs": 1,
        "x": 782.9999618530273,
        "y": 645.0103714736179,
        "z": "65374df1.8a48d4",
        "wires": [
            []
        ]
    },
    {
        "id": "32ed9697.982832",
        "type": "set",
        "name": "copy input data to service data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.sdnc-request-header.' value='$vnf-topology-operation-input.sdnc-request-header.' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.request-information.' value='$vnf-topology-operation-input.request-information.' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.' value='$vnf-topology-operation-input.service-information.' />",
        "comments": "",
        "x": 762.0000762939453,
        "y": 476.01033284980804,
        "z": "65374df1.8a48d4",
        "wires": []
    },
    {
        "id": "f60bad8b.0f9fe",
        "type": "switchNode",
        "name": "switch vnf-level-oper-status",
        "xml": "<switch test='`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.order-status`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 748.7499389648438,
        "y": 381.00390270072967,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "905eba6e.20a5f8",
                "564fa242.aa164c"
            ]
        ]
    },
    {
        "id": "905eba6e.20a5f8",
        "type": "outcome",
        "name": "outcome Created",
        "xml": "<outcome value='Created'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1128.5833320617676,
        "y": 386.1149909766391,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "fc62a92f.efa5d8"
            ]
        ]
    },
    {
        "id": "564fa242.aa164c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1106.583351135254,
        "y": 436.1150024207309,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "720bda17.0ec4ec"
            ]
        ]
    },
    {
        "id": "720bda17.0ec4ec",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VNF is not in appropriate state for activate. Current state is ' + $service-data.vnfs.vnf[$tmp.nidx].vnf-data.vnf-level-oper-status.order-status`\" />",
        "comments": "",
        "x": 1266.0831184387207,
        "y": 439.1150014670566,
        "z": "65374df1.8a48d4",
        "wires": []
    },
    {
        "id": "fc62a92f.efa5d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1338.889705657959,
        "y": 397.44016626197845,
        "z": "65374df1.8a48d4",
        "wires": [
            []
        ]
    },
    {
        "id": "7661af19.3745a8",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 711,
        "y": 700,
        "z": "65374df1.8a48d4",
        "wires": []
    },
    {
        "id": "f34628af.971e58",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.service-instance-id\n         AND customer.global-customer-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.global-customer-id \n         AND service-subscription.service-type = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--vnf-topology-operation-input.service-information.service-instance-id-->",
        "comments": "",
        "outputs": 1,
        "x": 731,
        "y": 796,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "f2d7e1a3.9c55b8",
                "893eca26.41fe2",
                "67ceb9a8.a14aa8"
            ]
        ]
    },
    {
        "id": "f2d7e1a3.9c55b8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 950,
        "y": 734,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "6a81e2af.afefb4"
            ]
        ]
    },
    {
        "id": "893eca26.41fe2",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 959.490966796875,
        "y": 776.5740356445312,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "adcdedad.e4cfa8"
            ]
        ]
    },
    {
        "id": "67ceb9a8.a14aa8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 948,
        "y": 823,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "51f8ebc0.b96fdc"
            ]
        ]
    },
    {
        "id": "adcdedad.e4cfa8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1113.0623779296875,
        "y": 779.8597717285156,
        "z": "65374df1.8a48d4",
        "wires": []
    },
    {
        "id": "51f8ebc0.b96fdc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1117,
        "y": 824,
        "z": "65374df1.8a48d4",
        "wires": []
    },
    {
        "id": "6a81e2af.afefb4",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for index='rel-index' start='0' end='`$tmp.aai.service-instance.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1147,
        "y": 730,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "37d91278.b2e28e"
            ]
        ]
    },
    {
        "id": "37d91278.b2e28e",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.service-instance.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1370.33349609375,
        "y": 729.9999389648438,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "63dc2a73.eea004"
            ]
        ]
    },
    {
        "id": "63dc2a73.eea004",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1571.0001335144043,
        "y": 731.000020980835,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "3bc5d31f.4eff1c"
            ]
        ]
    },
    {
        "id": "662b7b8b.c02da4",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 697,
        "y": 744,
        "z": "65374df1.8a48d4",
        "wires": [
            []
        ]
    },
    {
        "id": "3bc5d31f.4eff1c",
        "type": "save",
        "name": "get connectivity from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1809,
        "y": 733,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "f9ddca30.13fc18",
                "2e83e20a.a4c64e",
                "bbb85f3b.347968"
            ]
        ]
    },
    {
        "id": "f9ddca30.13fc18",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2017,
        "y": 697,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "7f6304c6.68b434"
            ]
        ]
    },
    {
        "id": "2e83e20a.a4c64e",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2017.490966796875,
        "y": 742.5740356445312,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "848ced52.aed45"
            ]
        ]
    },
    {
        "id": "bbb85f3b.347968",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2015,
        "y": 786,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "67746d9a.bb8fac"
            ]
        ]
    },
    {
        "id": "848ced52.aed45",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2180.0623779296875,
        "y": 742.8597717285156,
        "z": "65374df1.8a48d4",
        "wires": []
    },
    {
        "id": "67746d9a.bb8fac",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2184,
        "y": 787,
        "z": "65374df1.8a48d4",
        "wires": []
    },
    {
        "id": "a1788c2.5cbcc7",
        "type": "save",
        "name": "get vpn-binding from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2490,
        "y": 786,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "ff5b5708.803718",
                "2b7ab4e7.4996c4",
                "8f3a9f9c.feba08"
            ]
        ]
    },
    {
        "id": "66c494d6.d131ec",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2874,
        "y": 786,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "4df4ccfd.828a9c",
                "cc810976.1e78e",
                "6804b3fb.447a5c",
                "1114cd30.8fbe33",
                "77014142.ee291",
                "eea604e.273be78"
            ]
        ]
    },
    {
        "id": "ff5b5708.803718",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2701,
        "y": 788,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "66c494d6.d131ec"
            ]
        ]
    },
    {
        "id": "2b7ab4e7.4996c4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2701.490966796875,
        "y": 833.5740356445312,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "71b7f260.a02afc"
            ]
        ]
    },
    {
        "id": "8f3a9f9c.feba08",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2699,
        "y": 877,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "f1455dfe.4b515"
            ]
        ]
    },
    {
        "id": "f1455dfe.4b515",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2866,
        "y": 876,
        "z": "65374df1.8a48d4",
        "wires": []
    },
    {
        "id": "71b7f260.a02afc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2864.0623779296875,
        "y": 833.8597717285156,
        "z": "65374df1.8a48d4",
        "wires": []
    },
    {
        "id": "7f6304c6.68b434",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2218,
        "y": 692,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "df01a5ae.6dc3e8"
            ]
        ]
    },
    {
        "id": "df01a5ae.6dc3e8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2423,
        "y": 692,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "3c18e8d0.67c0b"
            ]
        ]
    },
    {
        "id": "3c18e8d0.67c0b",
        "type": "outcome",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2589,
        "y": 692,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "2564f00.0bbdd9"
            ]
        ]
    },
    {
        "id": "2564f00.0bbdd9",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2752,
        "y": 692,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "a1788c2.5cbcc7"
            ]
        ]
    },
    {
        "id": "4df4ccfd.828a9c",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-binding.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-binding.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-binding.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-binding.src-access-node-id`\" />\n",
        "comments": "",
        "x": 3089,
        "y": 496,
        "z": "65374df1.8a48d4",
        "wires": []
    },
    {
        "id": "cc810976.1e78e",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3115,
        "y": 613,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "fbb5125b.955718",
                "693af83c.f3ea18",
                "2473f4a.835008c"
            ]
        ]
    },
    {
        "id": "fbb5125b.955718",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3310.5001220703125,
        "y": 565,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "9a9b433a.0ee84"
            ]
        ]
    },
    {
        "id": "693af83c.f3ea18",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3302.5001220703125,
        "y": 620,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "3249d5d1.aac972"
            ]
        ]
    },
    {
        "id": "9a9b433a.0ee84",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3454.8824462890625,
        "y": 564.6556701660156,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "4c1ac004.69f11"
            ]
        ]
    },
    {
        "id": "4c1ac004.69f11",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3639,
        "y": 563,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "4cdbe422.34f9d4"
            ]
        ]
    },
    {
        "id": "4cdbe422.34f9d4",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3834,
        "y": 563,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "9761202f.b6a0b"
            ]
        ]
    },
    {
        "id": "2473f4a.835008c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3307.5001220703125,
        "y": 677,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "aacead6d.fefcb8"
            ]
        ]
    },
    {
        "id": "aacead6d.fefcb8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3459.5001220703125,
        "y": 678,
        "z": "65374df1.8a48d4",
        "wires": []
    },
    {
        "id": "3249d5d1.aac972",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3470.5001220703125,
        "y": 621,
        "z": "65374df1.8a48d4",
        "wires": []
    },
    {
        "id": "4c67262e.3701a8",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 4422,
        "y": 580,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "906ef06e.7739a8",
                "cb4dc0cc.5ae2c",
                "8ceaa5d5.dc9b88"
            ]
        ]
    },
    {
        "id": "12825971.5566ff",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4216,
        "y": 567,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "dddd5795.4cbcd",
                "4c67262e.3701a8",
                "459c85bd.d88044"
            ]
        ]
    },
    {
        "id": "dddd5795.4cbcd",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4452,
        "y": 528,
        "z": "65374df1.8a48d4",
        "wires": []
    },
    {
        "id": "906ef06e.7739a8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4632,
        "y": 571,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "97b50ccf.b69cd8"
            ]
        ]
    },
    {
        "id": "cb4dc0cc.5ae2c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4624,
        "y": 626,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "34cf9d59.f69aea"
            ]
        ]
    },
    {
        "id": "8ceaa5d5.dc9b88",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4629,
        "y": 683,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "6573a76f.8f9128"
            ]
        ]
    },
    {
        "id": "6573a76f.8f9128",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4781,
        "y": 684,
        "z": "65374df1.8a48d4",
        "wires": []
    },
    {
        "id": "34cf9d59.f69aea",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4792,
        "y": 629,
        "z": "65374df1.8a48d4",
        "wires": []
    },
    {
        "id": "97b50ccf.b69cd8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4776.38232421875,
        "y": 568.6556701660156,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "e66f9d95.0b353"
            ]
        ]
    },
    {
        "id": "9761202f.b6a0b",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4037,
        "y": 567,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "12825971.5566ff"
            ]
        ]
    },
    {
        "id": "e66f9d95.0b353",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 4991,
        "y": 565,
        "z": "65374df1.8a48d4",
        "wires": []
    },
    {
        "id": "459c85bd.d88044",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4372,
        "y": 644,
        "z": "65374df1.8a48d4",
        "wires": []
    },
    {
        "id": "1114cd30.8fbe33",
        "type": "execute",
        "name": "execute RestApiCallNode Delete transport slice without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.transport-slice-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain +  '/restconf/operations/ietf-optical-slice:deallocate-optical-slice'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3239,
        "y": 911,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "aa415b48.c51fe8",
                "f0d3a65b.427ad8"
            ]
        ]
    },
    {
        "id": "aa415b48.c51fe8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3582.5,
        "y": 906,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "c60de7c9.d4f7f8"
            ]
        ]
    },
    {
        "id": "f0d3a65b.427ad8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3586.5,
        "y": 946,
        "z": "65374df1.8a48d4",
        "wires": [
            [
                "a329dc5b.ef894"
            ]
        ]
    },
    {
        "id": "a329dc5b.ef894",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3744,
        "y": 946,
        "z": "65374df1.8a48d4",
        "wires": [
            []
        ]
    },
    {
        "id": "c60de7c9.d4f7f8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
        "comments": "",
        "x": 3740.5,
        "y": 906,
        "z": "65374df1.8a48d4",
        "wires": []
    },
    {
        "id": "6804b3fb.447a5c",
        "type": "set",
        "name": "set attachment_param for TN NSSSI deleteion in PNC",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n",
        "comments": "",
        "x": 3215,
        "y": 786,
        "z": "65374df1.8a48d4",
        "wires": []
    },
    {
        "id": "77014142.ee291",
        "type": "save",
        "name": "delete connectivity resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivity.connectivity-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3151,
        "y": 1011,
        "z": "65374df1.8a48d4",
        "wires": [
            []
        ]
    },
    {
        "id": "eea604e.273be78",
        "type": "save",
        "name": "delete vpn-binding resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='tmp.aai.vpn-binding = $tmp.aai.vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3147,
        "y": 1055,
        "z": "65374df1.8a48d4",
        "wires": [
            []
        ]
    }
]