[
    {
        "id": "eb07fd3d.499fe",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 142,
        "y": 92,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "39c5ac20.45e1d4"
            ]
        ]
    },
    {
        "id": "39c5ac20.45e1d4",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 273.2856903076172,
        "y": 141.23810863494873,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "2ea16900.365168"
            ]
        ]
    },
    {
        "id": "2ea16900.365168",
        "type": "method",
        "name": "method tsli-vnf-topology-operation-trans-slice-activate",
        "xml": "<method rpc='tsli-vnf-topology-operation-trans-slice-activate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 276.4286193847656,
        "y": 226.00003242492676,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "65a4788.f116c88"
            ]
        ]
    },
    {
        "id": "65a4788.f116c88",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 426.238037109375,
        "y": 355.6666564941406,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "57f656d8.02c09",
                "6ee54bdc.2fdd5c",
                "4cf7ab90.c1f3ec"
            ]
        ]
    },
    {
        "id": "57f656d8.02c09",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 694.5716552734375,
        "y": 742.59716796875,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "d36cebd.8be9418",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 726,
        "y": 417,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "6ee54bdc.2fdd5c",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--$vnf-topology-operation-input.service-information.service-instance-id-->",
        "comments": "",
        "outputs": 1,
        "x": 746,
        "y": 513,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "4321e029.b0b21",
                "df857197.b37508",
                "caa9bf62.bc7768"
            ]
        ]
    },
    {
        "id": "4321e029.b0b21",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 965,
        "y": 451,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "1399e348.49a41d"
            ]
        ]
    },
    {
        "id": "df857197.b37508",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 974.490966796875,
        "y": 493.57403564453125,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "9c66f3b5.ba5a"
            ]
        ]
    },
    {
        "id": "caa9bf62.bc7768",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 963,
        "y": 540,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "83f89a00.0c0e7"
            ]
        ]
    },
    {
        "id": "9c66f3b5.ba5a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1128.0623779296875,
        "y": 496.8597717285156,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "83f89a00.0c0e7",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1132,
        "y": 541,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "1399e348.49a41d",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for index='rel-index' start='0' end='`$tmp.aai.service-instance.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1162,
        "y": 447,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "8c655e36.efa51"
            ]
        ]
    },
    {
        "id": "8c655e36.efa51",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.service-instance.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1385.33349609375,
        "y": 446.99993896484375,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "dae7ff66.9b9c6"
            ]
        ]
    },
    {
        "id": "dae7ff66.9b9c6",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1586.0001335144043,
        "y": 448.00002098083496,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "5afc15bc.b14b2c"
            ]
        ]
    },
    {
        "id": "73d91f0d.979448",
        "type": "set",
        "name": "set attachment_param for OTN A",
        "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingA.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingA.dst-access-node-id`' />\n<!--<parameter name='dst-tpn-id' value='1' />-->\n<parameter name='dst-tpn-id' value='`$tmp.aai.vpn-bindingA.customer-vpn-id`' />\n<parameter name='dst-ttp-id' value='`$tmp.aai.vpn-bindingA.dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-src-domain' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingA.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingA.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingA.access-topology-id`' />\n",
        "comments": "",
        "x": 4405,
        "y": 164,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "53d5aef.e4ebbd",
        "type": "execute",
        "name": "execute RestApiCallNode Create OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-otn-src-domain-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4486,
        "y": 479,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "ecc00da.2c7107",
                "8ec5d396.327df"
            ]
        ]
    },
    {
        "id": "ecc00da.2c7107",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4795.5,
        "y": 448,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "30cb0de4.d526fa"
            ]
        ]
    },
    {
        "id": "8ec5d396.327df",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4800.5,
        "y": 513,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "d98d92f9.c81fa"
            ]
        ]
    },
    {
        "id": "30cb0de4.d526fa",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 4971.5,
        "y": 448,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "d98d92f9.c81fa",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4967,
        "y": 513,
        "z": "f351885d.7dcd3",
        "wires": [
            []
        ]
    },
    {
        "id": "b72def38.869578",
        "type": "set",
        "name": "set sotn_value",
        "xml": "<set>\n<!--<parameter name='eth-service-name' value='`$tmp.aai.connectivityA.connectivity-id`' />-->\n<parameter name='eth-service-name' value='`$tmp.aai.connectivityA.etht-svc-name`' />\n<parameter name='slice-id' value='`$vnf-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='provider-id' value='`$tmp.aai.connectivityA.access-provider-id`' />\n<parameter name='client-id' value='`$tmp.aai.connectivityA.access-client-id`' />\n<parameter name='topology-id' value='`$tmp.aai.connectivityA.access-topology-id`' />\n<parameter name='otn-tunnel-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n<parameter name='ethernet-end-point-name' value='`$tmp.aai.connectivityA.connectivity-id`' />\n<parameter name='index-number' value='0' />\n<parameter name='eth-node-id' value='`$tmp.aai.connectivityA.access-node-id`' />\n<parameter name='eth-node-tp-id' value='`$tmp.aai.connectivityA.access-ltp-id`' />\n<parameter name='CIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />\n<parameter name='EIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />\n<parameter name='cvlan' value='`$tmp.aai.connectivityA.cvlan`' />\n",
        "comments": "",
        "x": 4352.5,
        "y": 667,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "61d206ce.c84cc",
        "type": "execute",
        "name": "execute RestApiCallNode Create ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-ethernet-service.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4506.5,
        "y": 715,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "4c218232.9ff344",
                "70cfc429.d9d73c"
            ]
        ]
    },
    {
        "id": "4c218232.9ff344",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4852,
        "y": 696,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "508ab9bd.6f59b"
            ]
        ]
    },
    {
        "id": "70cfc429.d9d73c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4856,
        "y": 736,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "4484b215.bd52a4"
            ]
        ]
    },
    {
        "id": "508ab9bd.6f59b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create ethernet service rest api\" />\n",
        "comments": "",
        "x": 5010,
        "y": 696,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "4484b215.bd52a4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5013.5,
        "y": 736,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "d5eb1314.bae0c8",
                "10b6b358.4dd2d5"
            ]
        ]
    },
    {
        "id": "1158b528.feaadb",
        "type": "comment",
        "name": "TODO: FIXME:",
        "info": "put proper values based on connectivity resource retrieved from AAI",
        "comments": "",
        "x": 4350,
        "y": 623,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "d5eb1314.bae0c8",
        "type": "save",
        "name": "update vpn-binding A resource (aka. OTN domainA) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingA.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingA.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 5344,
        "y": 701,
        "z": "f351885d.7dcd3",
        "wires": [
            []
        ]
    },
    {
        "id": "4e452bee.48e2ac",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "use proper vpn-binding id and connectivity id\n\nAlso, does CCSDK support \"update\" operation for vpn-binding and connectivity?",
        "comments": "",
        "x": 5208,
        "y": 660,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "10b6b358.4dd2d5",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivityA.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivityA.connectivity-id`' />\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 5271,
        "y": 747,
        "z": "f351885d.7dcd3",
        "wires": [
            []
        ]
    },
    {
        "id": "cdb19fe7.3fcc18",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingA.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingA.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingA.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingA.src-access-node-id`\" />\n",
        "comments": "",
        "x": 4343,
        "y": 212,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "83225463.070fc",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4369,
        "y": 329,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "c77a135e.0cf11",
                "733c4b21.b0276c",
                "dfbdc2b7.10d7d"
            ]
        ]
    },
    {
        "id": "c77a135e.0cf11",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4564.5001220703125,
        "y": 281,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "fc1575d4.07ce9"
            ]
        ]
    },
    {
        "id": "733c4b21.b0276c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4556.5001220703125,
        "y": 336,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "2d634f91.a839c8"
            ]
        ]
    },
    {
        "id": "fc1575d4.07ce9",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4708.8824462890625,
        "y": 280.6556701660156,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "26c3005d.c41c58"
            ]
        ]
    },
    {
        "id": "fb614f2c.314568",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5291,
        "y": 283,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "5511aade.71874c"
            ]
        ]
    },
    {
        "id": "26c3005d.c41c58",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4893,
        "y": 279,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "d1afc9f2.3db068"
            ]
        ]
    },
    {
        "id": "d1afc9f2.3db068",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5088,
        "y": 279,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "fb614f2c.314568"
            ]
        ]
    },
    {
        "id": "dfbdc2b7.10d7d",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4561.5001220703125,
        "y": 393,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "1874b649.d37aaa"
            ]
        ]
    },
    {
        "id": "1874b649.d37aaa",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4713.5001220703125,
        "y": 394,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "2d634f91.a839c8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4724.5001220703125,
        "y": 337,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "37df0014.a385b",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5676,
        "y": 296,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "43de30da.db75e8",
                "e5ad5cbe.572928",
                "12e2c219.e2a25e"
            ]
        ]
    },
    {
        "id": "5511aade.71874c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5470,
        "y": 283,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "29681795.e63f18",
                "37df0014.a385b"
            ]
        ]
    },
    {
        "id": "29681795.e63f18",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainA id",
        "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5706,
        "y": 244,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "43de30da.db75e8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5886,
        "y": 287,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "9fb5e37f.eaa9f"
            ]
        ]
    },
    {
        "id": "e5ad5cbe.572928",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5878,
        "y": 342,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "24f5f29e.218576"
            ]
        ]
    },
    {
        "id": "12e2c219.e2a25e",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5883,
        "y": 399,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "cd568772.16e428"
            ]
        ]
    },
    {
        "id": "cd568772.16e428",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 6035,
        "y": 400,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "24f5f29e.218576",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 6046,
        "y": 345,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "9fb5e37f.eaa9f",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6030.38232421875,
        "y": 284.6556701660156,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "2b11e0ba.ac6cd8"
            ]
        ]
    },
    {
        "id": "2b11e0ba.ac6cd8",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 6245,
        "y": 281,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "4cf7ab90.c1f3ec",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 712,
        "y": 461,
        "z": "f351885d.7dcd3",
        "wires": [
            []
        ]
    },
    {
        "id": "fec1365a.907b4",
        "type": "set",
        "name": "set attachment_param for OTN B",
        "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingB.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingB.dst-access-node-id`' />\n<!--<parameter name='src-tpn-id' value='1' />-->\n<parameter name='src-tpn-id' value='`$tmp.aai.vpn-bindingB.customer-vpn-id`' />\n<parameter name='src-ttp-id' value='`$tmp.aai.vpn-bindingB.src-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-dst-domain' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingB.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingB.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingB.access-topology-id`' />\n",
        "comments": "",
        "x": 3812,
        "y": 1621,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "eb21cc8f.003df8",
        "type": "execute",
        "name": "execute RestApiCallNode Create OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-otn-dst-domain-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3875,
        "y": 1950,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "fc655ff.669232",
                "dfbdc395.b4aa"
            ]
        ]
    },
    {
        "id": "fc655ff.669232",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4170.5,
        "y": 1917,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "d2ad58a1.dbb57"
            ]
        ]
    },
    {
        "id": "dfbdc395.b4aa",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4175.5,
        "y": 1982,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "43fba27a.3e8bd4"
            ]
        ]
    },
    {
        "id": "d2ad58a1.dbb57",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 4338.5,
        "y": 1917,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "43fba27a.3e8bd4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4349,
        "y": 1982,
        "z": "f351885d.7dcd3",
        "wires": [
            []
        ]
    },
    {
        "id": "a7e92939.08a52",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingB.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingB.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingB.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingB.dst-access-node-id`\" />\n",
        "comments": "",
        "x": 3751,
        "y": 1678,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "25024bed.781cdc",
        "type": "get-resource",
        "name": "get-resource dst pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3771,
        "y": 1775,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "17a289eb.8378c6",
                "4e86abed.341d6c",
                "9944c222.7ecb4"
            ]
        ]
    },
    {
        "id": "17a289eb.8378c6",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3973.5001220703125,
        "y": 1728,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "2250bf3f.3fcd88"
            ]
        ]
    },
    {
        "id": "4e86abed.341d6c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3965.5001220703125,
        "y": 1783,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "7fe7998e.7db16"
            ]
        ]
    },
    {
        "id": "2250bf3f.3fcd88",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4117.8824462890625,
        "y": 1725.6556701660156,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "19367b54.5d4395"
            ]
        ]
    },
    {
        "id": "19367b54.5d4395",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4302,
        "y": 1740,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "e137d17b.53afd"
            ]
        ]
    },
    {
        "id": "9944c222.7ecb4",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3970.5001220703125,
        "y": 1840,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "c7e8bb41.e69fc8"
            ]
        ]
    },
    {
        "id": "c7e8bb41.e69fc8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4122.5001220703125,
        "y": 1841,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "7fe7998e.7db16",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4133.5001220703125,
        "y": 1786,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "18a3ba34.8443fe",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4700,
        "y": 1744,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "cca686b1.a86b48"
            ]
        ]
    },
    {
        "id": "e137d17b.53afd",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4497,
        "y": 1740,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "18a3ba34.8443fe"
            ]
        ]
    },
    {
        "id": "ec259c93.12e46",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5085,
        "y": 1743,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "cf9d2f3.18e805",
                "1901d45c.9387cc",
                "86a361e1.5f9008"
            ]
        ]
    },
    {
        "id": "cca686b1.a86b48",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4877,
        "y": 1736,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "2d219530.71913a",
                "ec259c93.12e46"
            ]
        ]
    },
    {
        "id": "2d219530.71913a",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainB id",
        "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5115,
        "y": 1691,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "bb17bcb1.afece8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5444,
        "y": 1847,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "e71302c9.0e3fc8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5455,
        "y": 1792,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "c367d2df.137348",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5439.38232421875,
        "y": 1731.6556701660156,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "bfc16252.e05aa"
            ]
        ]
    },
    {
        "id": "bfc16252.e05aa",
        "type": "set",
        "name": "set controller domainB data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5654,
        "y": 1728,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "cf9d2f3.18e805",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5295,
        "y": 1734,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "c367d2df.137348"
            ]
        ]
    },
    {
        "id": "1901d45c.9387cc",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5287,
        "y": 1789,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "e71302c9.0e3fc8"
            ]
        ]
    },
    {
        "id": "86a361e1.5f9008",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5292,
        "y": 1846,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "bb17bcb1.afece8"
            ]
        ]
    },
    {
        "id": "5afc15bc.b14b2c",
        "type": "save",
        "name": "get connectivity from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1824,
        "y": 450,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "c4ea2f12.0682f8",
                "89ba984f.fbff08",
                "4c31ddac.b140a4"
            ]
        ]
    },
    {
        "id": "c4ea2f12.0682f8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2032,
        "y": 414,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "207f18a3.1780c8"
            ]
        ]
    },
    {
        "id": "89ba984f.fbff08",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2032.490966796875,
        "y": 459.57403564453125,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "db0bb70b.5af75"
            ]
        ]
    },
    {
        "id": "4c31ddac.b140a4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2030,
        "y": 503,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "34efc961.392a36"
            ]
        ]
    },
    {
        "id": "db0bb70b.5af75",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2195.0623779296875,
        "y": 459.8597717285156,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "34efc961.392a36",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2199,
        "y": 504,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "da2f8124.076ab8",
        "type": "save",
        "name": "get vpn-binding from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2505,
        "y": 503,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "28f88824.b7c4b8",
                "d6ad8583.7ca128",
                "c9e967f5.e899f8"
            ]
        ]
    },
    {
        "id": "f459c148.932bf8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2885,
        "y": 591,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "1c6e3351.8ccb0d"
            ]
        ]
    },
    {
        "id": "28f88824.b7c4b8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2716,
        "y": 592,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "f459c148.932bf8"
            ]
        ]
    },
    {
        "id": "d6ad8583.7ca128",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2718.490966796875,
        "y": 487.57403564453125,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "ef5820a6.09d9d"
            ]
        ]
    },
    {
        "id": "c9e967f5.e899f8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2714,
        "y": 532,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "bd9d5fad.2d262"
            ]
        ]
    },
    {
        "id": "bd9d5fad.2d262",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2882,
        "y": 532,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "ef5820a6.09d9d",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2881.0625,
        "y": 486.8597412109375,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "207f18a3.1780c8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2233,
        "y": 409,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "208bed02.1187fa"
            ]
        ]
    },
    {
        "id": "208bed02.1187fa",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2438,
        "y": 409,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "f005e0a8.cc7dc8"
            ]
        ]
    },
    {
        "id": "f005e0a8.cc7dc8",
        "type": "outcome",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2604,
        "y": 409,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "51d187ad.ad3078"
            ]
        ]
    },
    {
        "id": "51d187ad.ad3078",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2767,
        "y": 409,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "da2f8124.076ab8",
                "1e447cc1.915cb3"
            ]
        ]
    },
    {
        "id": "aecb0c53.70b3e8",
        "type": "switchNode",
        "name": "switch vpn-binding has dst-access-ltp",
        "xml": "<switch test='`$tmp.aai.vpn-binding.dst-access-ltp-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3326,
        "y": 692,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "45f40514.0a111c",
                "e5457af4.842818"
            ]
        ]
    },
    {
        "id": "45f40514.0a111c",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 3540,
        "y": 729,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "4c5d5e83.4b55d8"
            ]
        ]
    },
    {
        "id": "e5457af4.842818",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3542,
        "y": 667,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "d204a9f5.cb1f"
            ]
        ]
    },
    {
        "id": "4c5d5e83.4b55d8",
        "type": "switchNode",
        "name": "switch vpn-binding has src-access-ltp",
        "xml": "<switch test='`$tmp.aai.vpn-binding.src-access-ltp-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3120,
        "y": 1972,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "e25a0aae.dc3b6",
                "5811aab2.c9cdb4"
            ]
        ]
    },
    {
        "id": "e25a0aae.dc3b6",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 3373,
        "y": 2006,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "e2283676.c05cf8"
            ]
        ]
    },
    {
        "id": "5811aab2.c9cdb4",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3373,
        "y": 1950,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "5f1f11a6.4b622"
            ]
        ]
    },
    {
        "id": "e2283676.c05cf8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3524,
        "y": 2006,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "ef6002a3.a9265",
        "type": "set",
        "name": "set vpn-bindingA and connectivityA",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingA.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityA.' value=\"`$tmp.aai.connectivity.`\" />\n",
        "comments": "",
        "x": 4400,
        "y": 104,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "d11d0786.01d8c8",
        "type": "set",
        "name": "set vpn-bindingB and connectivityB",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingB.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityB.' value=\"`$tmp.aai.connectivity.`\" />\n\n",
        "comments": "",
        "x": 3808,
        "y": 1563,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "4923e79.d3d2a98",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4091,
        "y": 361,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "ef6002a3.a9265",
                "73d91f0d.979448",
                "cdb19fe7.3fcc18",
                "83225463.070fc",
                "b72def38.869578",
                "61d206ce.c84cc",
                "53d5aef.e4ebbd"
            ]
        ]
    },
    {
        "id": "5f1f11a6.4b622",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3524,
        "y": 1949,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "d11d0786.01d8c8",
                "fec1365a.907b4",
                "a7e92939.08a52",
                "25024bed.781cdc",
                "eb21cc8f.003df8",
                "1be8ac25.0620fc",
                "6fb79d87.420834"
            ]
        ]
    },
    {
        "id": "1be8ac25.0620fc",
        "type": "set",
        "name": "set sotn_value",
        "xml": "<set>\n<!--<parameter name='eth-service-name' value='`$tmp.aai.connectivityB.connectivity-id`' />-->\n<parameter name='eth-service-name' value='`$tmp.aai.connectivityB.etht-svc-name`' />\n<parameter name='slice-id' value='`$vnf-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='provider-id' value='`$tmp.aai.connectivityB.access-provider-id`' />\n<parameter name='client-id' value='`$tmp.aai.connectivityB.access-client-id`' />\n<parameter name='topology-id' value='`$tmp.aai.connectivityB.access-topology-id`' />\n<parameter name='otn-tunnel-name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n<parameter name='ethernet-end-point-name' value='`$tmp.aai.connectivityB.connectivity-id`' />\n<parameter name='index-number' value='0' />\n<parameter name='eth-node-id' value='`$tmp.aai.connectivityB.access-node-id`' />\n<parameter name='eth-node-tp-id' value='`$tmp.aai.connectivityB.access-ltp-id`' />\n<parameter name='CIR' value='`$tmp.aai.vpn-bindingB.route-distinguisher *1000000`' />\n<parameter name='EIR' value='`$tmp.aai.vpn-bindingB.route-distinguisher *1000000`' />\n<parameter name='cvlan' value='`$tmp.aai.connectivityB.cvlan`' />\n\n",
        "comments": "",
        "x": 3753,
        "y": 2092,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "6fb79d87.420834",
        "type": "execute",
        "name": "execute RestApiCallNode Create ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-ethernet-service.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3907,
        "y": 2140,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "6175c964.8889d",
                "add709ae.0740f"
            ]
        ]
    },
    {
        "id": "6175c964.8889d",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4252.5,
        "y": 2121,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "7caa2ba7.6bf4dc"
            ]
        ]
    },
    {
        "id": "add709ae.0740f",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4256.5,
        "y": 2161,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "43eb2ee.41b33d"
            ]
        ]
    },
    {
        "id": "7caa2ba7.6bf4dc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create ethernet service rest api\" />\n",
        "comments": "",
        "x": 4410.5,
        "y": 2121,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "43eb2ee.41b33d",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4414,
        "y": 2161,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "30f33337.055d14",
                "948532eb.e6c7c"
            ]
        ]
    },
    {
        "id": "bc6f9b2b.7321f",
        "type": "comment",
        "name": "TODO: FIXME:",
        "info": "put proper values based on connectivity resource retrieved from AAI",
        "comments": "",
        "x": 3750.5,
        "y": 2048,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "30f33337.055d14",
        "type": "save",
        "name": "update vpn-binding B resource (aka. OTN domainB) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingB.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingB.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4754,
        "y": 2160,
        "z": "f351885d.7dcd3",
        "wires": [
            []
        ]
    },
    {
        "id": "227afae6.b4c94e",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "use proper vpn-binding id and connectivity\n\nAlso, does CCSDK support \"update\" operation for vpn-binding and connectivity?",
        "comments": "",
        "x": 4612,
        "y": 2118,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "948532eb.e6c7c",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivityB.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivityB.connectivity-id`' />\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4683,
        "y": 2209,
        "z": "f351885d.7dcd3",
        "wires": [
            []
        ]
    },
    {
        "id": "55624da8.df976c",
        "type": "set",
        "name": "set attachment_param (gfp-n) for OTN",
        "xml": "<set>\n<parameter name='gfp-n' value='`$tmp.aai.vpn-binding.route-distinguisher`' />\n",
        "comments": "",
        "x": 3317,
        "y": 632,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "1e447cc1.915cb3",
        "type": "set",
        "name": "unset tmp.aai.vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value='' />\n",
        "comments": "",
        "x": 2951,
        "y": 280,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "f396e52b.35559",
        "type": "comment",
        "name": "only dst ttp exists. No src",
        "info": "",
        "comments": "",
        "x": 3912,
        "y": 318,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "72b06eec.578eb8",
        "type": "comment",
        "name": "only src ttp exists. No dst",
        "info": "",
        "comments": "",
        "x": 3469,
        "y": 1896,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "d204a9f5.cb1f",
        "type": "switchNode",
        "name": "switch vpn-binding has src-access-ltp",
        "xml": "<switch test='`$tmp.aai.vpn-binding.src-access-ltp-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3648,
        "y": 480,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "7da55af.10937a4",
                "d30ba4e8.997a68"
            ]
        ]
    },
    {
        "id": "d30ba4e8.997a68",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3890,
        "y": 1069,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "b0909b7a.d37638"
            ]
        ]
    },
    {
        "id": "7da55af.10937a4",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 3884,
        "y": 360,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "4923e79.d3d2a98"
            ]
        ]
    },
    {
        "id": "b0909b7a.d37638",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4048,
        "y": 1068,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "aadf2b5c.a1838",
                "8fb5b52a.4e2ae",
                "a006da1c.c23038",
                "7e67d000.77abb",
                "23d1e7d8.976258"
            ]
        ]
    },
    {
        "id": "8fb5b52a.4e2ae",
        "type": "set",
        "name": "set attachment_param for OTN G",
        "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingG.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingG.dst-access-node-id`' />\n<!--<parameter name='dst-tpn-id' value='1' />-->\n<parameter name='src-tpn-id' value='`$tmp.aai.vpn-bindingG.customer-vpn-id`' />\n<parameter name='dst-tpn-id' value='`$tmp.aai.vpn-bindingG.customer-vpn-id`' />\n<parameter name='src-ttp-id' value='`$tmp.aai.vpn-bindingG.src-access-ltp-id`' />\n<parameter name='dst-ttp-id' value='`$tmp.aai.vpn-bindingG.dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-domainG' value='`$tmp.aai.vpn-bindingG.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingG.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingG.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingG.access-topology-id`' />\n",
        "comments": "",
        "x": 4312,
        "y": 951,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "23d1e7d8.976258",
        "type": "execute",
        "name": "execute RestApiCallNode Create OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-otn-domainG-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainG.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainG.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainG.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4393,
        "y": 1266,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "c8d598bd.cbc8e",
                "c93ae11e.1c54c8"
            ]
        ]
    },
    {
        "id": "c8d598bd.cbc8e",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4702.5,
        "y": 1235,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "a086276f.4222f8"
            ]
        ]
    },
    {
        "id": "c93ae11e.1c54c8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4707.5,
        "y": 1300,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "51323b7.caecec4"
            ]
        ]
    },
    {
        "id": "a086276f.4222f8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 4878.5,
        "y": 1235,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "51323b7.caecec4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4874,
        "y": 1300,
        "z": "f351885d.7dcd3",
        "wires": [
            []
        ]
    },
    {
        "id": "a006da1c.c23038",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domainG.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingG.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingG.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingG.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingG.src-access-node-id`\" />\n",
        "comments": "",
        "x": 4250,
        "y": 999,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "7e67d000.77abb",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domainG.pnf-name\"\n        pfx='tmp.aai.domainG-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4276,
        "y": 1116,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "ec2bb2c1.50dad",
                "6fe2c398.ccd7b4",
                "2cf209f9.a94e2e"
            ]
        ]
    },
    {
        "id": "ec2bb2c1.50dad",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4471.5001220703125,
        "y": 1068,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "e5c84b9e.98975"
            ]
        ]
    },
    {
        "id": "6fe2c398.ccd7b4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4463.5001220703125,
        "y": 1123,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "be59a3.0881066"
            ]
        ]
    },
    {
        "id": "e5c84b9e.98975",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4615.8824462890625,
        "y": 1067.6556701660156,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "40635ccb.0881a4"
            ]
        ]
    },
    {
        "id": "40635ccb.0881a4",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.domainG-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4800,
        "y": 1066,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "ff02a9b.ff8ffd8"
            ]
        ]
    },
    {
        "id": "ff02a9b.ff8ffd8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.domainG-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4995,
        "y": 1066,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "d3d180f4.36fa68"
            ]
        ]
    },
    {
        "id": "2cf209f9.a94e2e",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4468.5001220703125,
        "y": 1180,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "2b5a1252.216fe6"
            ]
        ]
    },
    {
        "id": "2b5a1252.216fe6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4620.5001220703125,
        "y": 1181,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "be59a3.0881066",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4631.5001220703125,
        "y": 1124,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "aadf2b5c.a1838",
        "type": "set",
        "name": "set vpn-bindingG and connectivityG",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingG.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityG.' value=\"`$tmp.aai.connectivity.`\" />\n",
        "comments": "",
        "x": 4307,
        "y": 891,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "d3d180f4.36fa68",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5198,
        "y": 1070,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "8355bb98.2142e8"
            ]
        ]
    },
    {
        "id": "d998285a.8338c",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainG.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainG.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5583,
        "y": 1083,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "38daac86.dbf464",
                "21dc6947.7d9bae",
                "a47aca30.5160e"
            ]
        ]
    },
    {
        "id": "8355bb98.2142e8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5377,
        "y": 1070,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "583e9682.750428",
                "d998285a.8338c"
            ]
        ]
    },
    {
        "id": "583e9682.750428",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainG id",
        "xml": "<set>\n<parameter name='tmp.domainG.esr-thirdparty-id' value=\"`$tmp.aai.domainG-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5613,
        "y": 1031,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "38daac86.dbf464",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5793,
        "y": 1074,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "10b34ad5.e58d9d"
            ]
        ]
    },
    {
        "id": "21dc6947.7d9bae",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5785,
        "y": 1129,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "6ce9bc65.05009c"
            ]
        ]
    },
    {
        "id": "a47aca30.5160e",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5790,
        "y": 1186,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "18239e9b.852729"
            ]
        ]
    },
    {
        "id": "18239e9b.852729",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5942,
        "y": 1187,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "6ce9bc65.05009c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5953,
        "y": 1132,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "10b34ad5.e58d9d",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5937.38232421875,
        "y": 1071.6556701660156,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "d4058b68.bd8818"
            ]
        ]
    },
    {
        "id": "d4058b68.bd8818",
        "type": "set",
        "name": "set controller domainG data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.url' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.user' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.password' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 6152,
        "y": 1068,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "3a09f359.556f04",
        "type": "comment",
        "name": "both src and dst exist",
        "info": "",
        "comments": "",
        "x": 3926,
        "y": 1009,
        "z": "f351885d.7dcd3",
        "wires": []
    },
    {
        "id": "1c6e3351.8ccb0d",
        "type": "switchNode",
        "name": "switch vpn-binding is not already Activated (i.e. is either Created or Modified)",
        "xml": "<switch test=\"`$tmp.aai.vpn-binding.operational-status != 'Activated' `\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2488,
        "y": 736,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "91c41639.2357b",
                "5aa31f25.4b2718"
            ]
        ]
    },
    {
        "id": "5aa31f25.4b2718",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2895,
        "y": 754,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "49ef7599.6e682c"
            ]
        ]
    },
    {
        "id": "91c41639.2357b",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2895,
        "y": 699,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "c7ffb45b.775578"
            ]
        ]
    },
    {
        "id": "c7ffb45b.775578",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3051,
        "y": 697,
        "z": "f351885d.7dcd3",
        "wires": [
            [
                "55624da8.df976c",
                "aecb0c53.70b3e8"
            ]
        ]
    },
    {
        "id": "49ef7599.6e682c",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3028,
        "y": 755,
        "z": "f351885d.7dcd3",
        "wires": [
            []
        ]
    }
]