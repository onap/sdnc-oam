[
    {
        "id": "acf9e544.d632d8",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 130,
        "y": 80,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "ca913714.8e299"
            ]
        ]
    },
    {
        "id": "ca913714.8e299",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 261.2856903076172,
        "y": 129.23810863494873,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "fb417168.600308"
            ]
        ]
    },
    {
        "id": "fb417168.600308",
        "type": "method",
        "name": "method tsli-vnf-topology-operation-trans-slice-activate",
        "xml": "<method rpc='tsli-vnf-topology-operation-trans-slice-activate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 264.4286193847656,
        "y": 214.00003242492676,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "b8f0421e.565ff8"
            ]
        ]
    },
    {
        "id": "b8f0421e.565ff8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 414.238037109375,
        "y": 343.6666564941406,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "77ab8d82.d7040c",
                "161b3712.e40a99",
                "441438f3.47d108"
            ]
        ]
    },
    {
        "id": "77ab8d82.d7040c",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 682.5716552734375,
        "y": 730.59716796875,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "cd3b0e66.721858",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 714,
        "y": 405,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "161b3712.e40a99",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--$vnf-topology-operation-input.service-information.service-instance-id-->",
        "comments": "",
        "outputs": 1,
        "x": 734,
        "y": 501,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "a50bfd24.6ac44",
                "3bd3a68e.896b3a",
                "320764b6.9fa15c"
            ]
        ]
    },
    {
        "id": "a50bfd24.6ac44",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 953,
        "y": 439,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "b122e042.5ab94"
            ]
        ]
    },
    {
        "id": "3bd3a68e.896b3a",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 962.490966796875,
        "y": 481.57403564453125,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "4e666373.42b6cc"
            ]
        ]
    },
    {
        "id": "320764b6.9fa15c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 951,
        "y": 528,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "422b64b3.e06004"
            ]
        ]
    },
    {
        "id": "4e666373.42b6cc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1116.0623779296875,
        "y": 484.8597717285156,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "422b64b3.e06004",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1120,
        "y": 529,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "b122e042.5ab94",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for index='rel-index' start='0' end='`$tmp.aai.service-instance.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1150,
        "y": 435,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "111942fe.354315"
            ]
        ]
    },
    {
        "id": "111942fe.354315",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.service-instance.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1373.33349609375,
        "y": 434.99993896484375,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "ff15f851.7a7528"
            ]
        ]
    },
    {
        "id": "ff15f851.7a7528",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1574.0001335144043,
        "y": 436.00002098083496,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "cf901b65.835fc8"
            ]
        ]
    },
    {
        "id": "72376cd1.cdcaec",
        "type": "set",
        "name": "set attachment_param for OTN A",
        "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingA.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingA.dst-access-node-id`' />\n<!--<parameter name='dst-tpn-id' value='1' />-->\n<parameter name='dst-tpn-id' value='`$tmp.aai.vpn-bindingA.customer-vpn-id`' />\n<parameter name='dst-ttp-id' value='`$tmp.aai.vpn-bindingA.dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-src-domain' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingA.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingA.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingA.access-topology-id`' />\n",
        "comments": "",
        "x": 4393,
        "y": 152,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "2a89aa53.8890b6",
        "type": "execute",
        "name": "execute RestApiCallNode Create OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-otn-src-domain-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4474,
        "y": 467,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "40316706.17eb48",
                "6c473f1b.946a08"
            ]
        ]
    },
    {
        "id": "40316706.17eb48",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4783.5,
        "y": 436,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "aea69973.33e85"
            ]
        ]
    },
    {
        "id": "6c473f1b.946a08",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4788.5,
        "y": 501,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "d21a082d.2cad68"
            ]
        ]
    },
    {
        "id": "aea69973.33e85",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 4959.5,
        "y": 436,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "d21a082d.2cad68",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4955,
        "y": 501,
        "z": "4996e636.3ea08",
        "wires": [
            []
        ]
    },
    {
        "id": "de94f6d4.eda0e",
        "type": "set",
        "name": "set sotn_value",
        "xml": "<set>\n<!--<parameter name='eth-service-name' value='`$tmp.aai.connectivityA.connectivity-id`' />-->\n<parameter name='eth-service-name' value='`$tmp.aai.connectivityA.etht-svc-name`' />\n<parameter name='slice-id' value='`$vnf-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='provider-id' value='`$tmp.aai.connectivityA.access-provider-id`' />\n<parameter name='client-id' value='`$tmp.aai.connectivityA.access-client-id`' />\n<parameter name='topology-id' value='`$tmp.aai.connectivityA.access-topology-id`' />\n<parameter name='otn-tunnel-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n<parameter name='ethernet-end-point-name' value='`$tmp.aai.connectivityA.connectivity-id`' />\n<parameter name='index-number' value='0' />\n<parameter name='eth-node-id' value='`$tmp.aai.connectivityA.access-node-id`' />\n<parameter name='eth-node-tp-id' value='`$tmp.aai.connectivityA.access-ltp-id`' />\n<parameter name='CIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />\n<parameter name='EIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />\n<parameter name='cvlan' value='`$tmp.aai.connectivityA.cvlan`' />\n",
        "comments": "",
        "x": 4340.5,
        "y": 655,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "342bfbf3.ee642c",
        "type": "execute",
        "name": "execute RestApiCallNode Create ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-ethernet-service.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4494.5,
        "y": 703,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "8236b8ec.5fd17",
                "51c5e2c3.871744"
            ]
        ]
    },
    {
        "id": "8236b8ec.5fd17",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4840,
        "y": 684,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "b89e8953.c6ac88"
            ]
        ]
    },
    {
        "id": "51c5e2c3.871744",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4844,
        "y": 724,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "933ba47e.14e65"
            ]
        ]
    },
    {
        "id": "b89e8953.c6ac88",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create ethernet service rest api\" />\n",
        "comments": "",
        "x": 4998,
        "y": 684,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "933ba47e.14e65",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5001.5,
        "y": 724,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "363131ab.be28b6",
                "fcee3485.dea4a"
            ]
        ]
    },
    {
        "id": "776cbd7.844f0c4",
        "type": "comment",
        "name": "TODO: FIXME:",
        "info": "put proper values based on connectivity resource retrieved from AAI",
        "comments": "",
        "x": 4338,
        "y": 611,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "363131ab.be28b6",
        "type": "save",
        "name": "update vpn-binding A resource (aka. OTN domainA) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingA.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingA.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 5332,
        "y": 689,
        "z": "4996e636.3ea08",
        "wires": [
            []
        ]
    },
    {
        "id": "d8ba5ee6.a5736",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "use proper vpn-binding id and connectivity id\n\nAlso, does CCSDK support \"update\" operation for vpn-binding and connectivity?",
        "comments": "",
        "x": 5196,
        "y": 648,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "fcee3485.dea4a",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivityA.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivityA.connectivity-id`' />\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 5259,
        "y": 735,
        "z": "4996e636.3ea08",
        "wires": [
            []
        ]
    },
    {
        "id": "9b9c3cba.716c78",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingA.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingA.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingA.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingA.src-access-node-id`\" />\n",
        "comments": "",
        "x": 4331,
        "y": 200,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "5f8cf8c6.3002c8",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4357,
        "y": 317,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "33823e1a.9269c2",
                "b38b9e38.f8c8a8",
                "9f21383a.68cb9"
            ]
        ]
    },
    {
        "id": "33823e1a.9269c2",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4552.5001220703125,
        "y": 269,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "755b5bf3.347744"
            ]
        ]
    },
    {
        "id": "b38b9e38.f8c8a8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4544.5001220703125,
        "y": 324,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "5d1291bc.3b9d5"
            ]
        ]
    },
    {
        "id": "755b5bf3.347744",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4696.8824462890625,
        "y": 268.6556701660156,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "5007d6bb.a571d"
            ]
        ]
    },
    {
        "id": "c0da9575.eb2c6",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5279,
        "y": 271,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "1053f3a3.2846c4"
            ]
        ]
    },
    {
        "id": "5007d6bb.a571d",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4881,
        "y": 267,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "33b94d0d.c61ee2"
            ]
        ]
    },
    {
        "id": "33b94d0d.c61ee2",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5076,
        "y": 267,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "c0da9575.eb2c6"
            ]
        ]
    },
    {
        "id": "9f21383a.68cb9",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4549.5001220703125,
        "y": 381,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "e621d08a.7d07a8"
            ]
        ]
    },
    {
        "id": "e621d08a.7d07a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4701.5001220703125,
        "y": 382,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "5d1291bc.3b9d5",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4712.5001220703125,
        "y": 325,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "bace4f35.dcb4f",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5664,
        "y": 284,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "41428f.b99c7d7",
                "92b16ebc.198be8",
                "47593c0a.609b2c"
            ]
        ]
    },
    {
        "id": "1053f3a3.2846c4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5458,
        "y": 271,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "db2fdd1f.f44e1",
                "bace4f35.dcb4f"
            ]
        ]
    },
    {
        "id": "db2fdd1f.f44e1",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainA id",
        "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5694,
        "y": 232,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "41428f.b99c7d7",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5874,
        "y": 275,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "d8c57966.bba2b8"
            ]
        ]
    },
    {
        "id": "92b16ebc.198be8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5866,
        "y": 330,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "bbecf65b.0991f"
            ]
        ]
    },
    {
        "id": "47593c0a.609b2c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5871,
        "y": 387,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "17aa566c.ce27ba"
            ]
        ]
    },
    {
        "id": "17aa566c.ce27ba",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 6023,
        "y": 388,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "bbecf65b.0991f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 6034,
        "y": 333,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "d8c57966.bba2b8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6018.38232421875,
        "y": 272.6556701660156,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "eeaaed9f.46288"
            ]
        ]
    },
    {
        "id": "eeaaed9f.46288",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 6233,
        "y": 269,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "441438f3.47d108",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 700,
        "y": 449,
        "z": "4996e636.3ea08",
        "wires": [
            []
        ]
    },
    {
        "id": "48e88b1.fd2c9f4",
        "type": "set",
        "name": "set attachment_param for OTN B",
        "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingB.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingB.dst-access-node-id`' />\n<!--<parameter name='src-tpn-id' value='1' />-->\n<parameter name='src-tpn-id' value='`$tmp.aai.vpn-bindingB.customer-vpn-id`' />\n<parameter name='src-ttp-id' value='`$tmp.aai.vpn-bindingB.src-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-dst-domain' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingB.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingB.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingB.access-topology-id`' />\n",
        "comments": "",
        "x": 3800,
        "y": 1609,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "46863424.f49acc",
        "type": "execute",
        "name": "execute RestApiCallNode Create OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-otn-dst-domain-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3863,
        "y": 1938,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "dcc57379.86dfe8",
                "c898077c.fa069"
            ]
        ]
    },
    {
        "id": "dcc57379.86dfe8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4158.5,
        "y": 1905,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "abcd166d.ac4418"
            ]
        ]
    },
    {
        "id": "c898077c.fa069",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4163.5,
        "y": 1970,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "a337c775.425078"
            ]
        ]
    },
    {
        "id": "abcd166d.ac4418",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 4326.5,
        "y": 1905,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "a337c775.425078",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4337,
        "y": 1970,
        "z": "4996e636.3ea08",
        "wires": [
            []
        ]
    },
    {
        "id": "402d5da7.084ecc",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingB.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingB.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingB.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingB.dst-access-node-id`\" />\n",
        "comments": "",
        "x": 3739,
        "y": 1666,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "600572d7.37f4f4",
        "type": "get-resource",
        "name": "get-resource dst pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3759,
        "y": 1763,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "a75ca9d.3439f58",
                "399b40eb.8cb2c",
                "c23ae6cb.c49a18"
            ]
        ]
    },
    {
        "id": "a75ca9d.3439f58",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3961.5001220703125,
        "y": 1716,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "7c251cdc.702f24"
            ]
        ]
    },
    {
        "id": "399b40eb.8cb2c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3953.5001220703125,
        "y": 1771,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "9ad884c8.666098"
            ]
        ]
    },
    {
        "id": "7c251cdc.702f24",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4105.8824462890625,
        "y": 1713.6556701660156,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "cb9eeb5b.e8a49"
            ]
        ]
    },
    {
        "id": "cb9eeb5b.e8a49",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4290,
        "y": 1728,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "3d062c6c.6ff5d4"
            ]
        ]
    },
    {
        "id": "c23ae6cb.c49a18",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3958.5001220703125,
        "y": 1828,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "c325aab2.4755e"
            ]
        ]
    },
    {
        "id": "c325aab2.4755e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4110.5001220703125,
        "y": 1829,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "9ad884c8.666098",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4121.5001220703125,
        "y": 1774,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "34bca75e.e09988",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4688,
        "y": 1732,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "edc0cd69.586d38"
            ]
        ]
    },
    {
        "id": "3d062c6c.6ff5d4",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4485,
        "y": 1728,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "34bca75e.e09988"
            ]
        ]
    },
    {
        "id": "f5373d88.e0f4c",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5073,
        "y": 1731,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "efe05c93.e4bd48",
                "c004c915.8de7",
                "8875f4b.bcb6f88"
            ]
        ]
    },
    {
        "id": "edc0cd69.586d38",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4865,
        "y": 1724,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "bd388c7d.2a51e",
                "f5373d88.e0f4c"
            ]
        ]
    },
    {
        "id": "bd388c7d.2a51e",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainB id",
        "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5103,
        "y": 1679,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "c54d67f1.3a38c8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5432,
        "y": 1835,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "56448bab.caa82c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5443,
        "y": 1780,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "97f3ba34.f2dc7",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5427.38232421875,
        "y": 1719.6556701660156,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "5b487de9.7c9484"
            ]
        ]
    },
    {
        "id": "5b487de9.7c9484",
        "type": "set",
        "name": "set controller domainB data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5642,
        "y": 1716,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "efe05c93.e4bd48",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5283,
        "y": 1722,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "97f3ba34.f2dc7"
            ]
        ]
    },
    {
        "id": "c004c915.8de7",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5275,
        "y": 1777,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "56448bab.caa82c"
            ]
        ]
    },
    {
        "id": "8875f4b.bcb6f88",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5280,
        "y": 1834,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "c54d67f1.3a38c8"
            ]
        ]
    },
    {
        "id": "cf901b65.835fc8",
        "type": "save",
        "name": "get connectivity from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1812,
        "y": 438,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "a3e158df.aec638",
                "28bc0271.0f9e9e",
                "12a8a0b5.4084c7"
            ]
        ]
    },
    {
        "id": "a3e158df.aec638",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2020,
        "y": 402,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "8651df9.9efa52"
            ]
        ]
    },
    {
        "id": "28bc0271.0f9e9e",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2020.490966796875,
        "y": 447.57403564453125,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "b3859ee9.a63778"
            ]
        ]
    },
    {
        "id": "12a8a0b5.4084c7",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2018,
        "y": 491,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "b1a3023.979458"
            ]
        ]
    },
    {
        "id": "b3859ee9.a63778",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2183.0623779296875,
        "y": 447.8597717285156,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "b1a3023.979458",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2187,
        "y": 492,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "e921a3d6.75f8b8",
        "type": "save",
        "name": "get vpn-binding from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2493,
        "y": 491,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "19de242e.79b56c",
                "e1533c2.9fadc4",
                "da41548.4c59da8"
            ]
        ]
    },
    {
        "id": "108df7f5.f0405",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2873,
        "y": 579,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "19520422.b45d4c"
            ]
        ]
    },
    {
        "id": "19de242e.79b56c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2704,
        "y": 580,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "108df7f5.f0405"
            ]
        ]
    },
    {
        "id": "e1533c2.9fadc4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2706.490966796875,
        "y": 475.57403564453125,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "efbdd7a3.5958d8"
            ]
        ]
    },
    {
        "id": "da41548.4c59da8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2702,
        "y": 520,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "e03f3a11.4be118"
            ]
        ]
    },
    {
        "id": "e03f3a11.4be118",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2870,
        "y": 520,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "efbdd7a3.5958d8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2869.0625,
        "y": 474.8597412109375,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "8651df9.9efa52",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2221,
        "y": 397,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "6856373e.df8d5"
            ]
        ]
    },
    {
        "id": "6856373e.df8d5",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2426,
        "y": 397,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "61b4f44b.e9282c"
            ]
        ]
    },
    {
        "id": "61b4f44b.e9282c",
        "type": "outcome",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2592,
        "y": 397,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "9aa1bdef.a85148"
            ]
        ]
    },
    {
        "id": "9aa1bdef.a85148",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2755,
        "y": 397,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "e921a3d6.75f8b8",
                "8b7a547c.5a78f8"
            ]
        ]
    },
    {
        "id": "61cd75bc.541bfc",
        "type": "switchNode",
        "name": "switch vpn-binding has dst-access-ltp",
        "xml": "<switch test='`$tmp.aai.vpn-binding.dst-access-ltp-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3314,
        "y": 680,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "ce7e100e.65e8d8",
                "978d0324.53a218"
            ]
        ]
    },
    {
        "id": "ce7e100e.65e8d8",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 3528,
        "y": 717,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "d3a9cf8b.6d8898"
            ]
        ]
    },
    {
        "id": "978d0324.53a218",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3530,
        "y": 655,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "eacef09.695731"
            ]
        ]
    },
    {
        "id": "d3a9cf8b.6d8898",
        "type": "switchNode",
        "name": "switch vpn-binding has src-access-ltp",
        "xml": "<switch test='`$tmp.aai.vpn-binding.src-access-ltp-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3108,
        "y": 1960,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "a298a9c0.8f44e8",
                "ca55eca6.1cb808"
            ]
        ]
    },
    {
        "id": "a298a9c0.8f44e8",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 3361,
        "y": 1994,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "c785caf0.121d"
            ]
        ]
    },
    {
        "id": "ca55eca6.1cb808",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3361,
        "y": 1938,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "6d0b6c95.2359f4"
            ]
        ]
    },
    {
        "id": "c785caf0.121d",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3512,
        "y": 1994,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "2abfc3f7.2295e4",
        "type": "set",
        "name": "set vpn-bindingA and connectivityA",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingA.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityA.' value=\"`$tmp.aai.connectivity.`\" />\n",
        "comments": "",
        "x": 4388,
        "y": 92,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "ebb770b7.bb1a4",
        "type": "set",
        "name": "set vpn-bindingB and connectivityB",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingB.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityB.' value=\"`$tmp.aai.connectivity.`\" />\n\n",
        "comments": "",
        "x": 3796,
        "y": 1551,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "bcb6d938.081b58",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4079,
        "y": 349,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "2abfc3f7.2295e4",
                "72376cd1.cdcaec",
                "9b9c3cba.716c78",
                "5f8cf8c6.3002c8",
                "de94f6d4.eda0e",
                "342bfbf3.ee642c",
                "2a89aa53.8890b6"
            ]
        ]
    },
    {
        "id": "6d0b6c95.2359f4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3512,
        "y": 1937,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "ebb770b7.bb1a4",
                "48e88b1.fd2c9f4",
                "402d5da7.084ecc",
                "600572d7.37f4f4",
                "46863424.f49acc",
                "4aa8bc15.43053c",
                "295ad948.4ab50e"
            ]
        ]
    },
    {
        "id": "4aa8bc15.43053c",
        "type": "set",
        "name": "set sotn_value",
        "xml": "<set>\n<!--<parameter name='eth-service-name' value='`$tmp.aai.connectivityB.connectivity-id`' />-->\n<parameter name='eth-service-name' value='`$tmp.aai.connectivityB.etht-svc-name`' />\n<parameter name='slice-id' value='`$vnf-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='provider-id' value='`$tmp.aai.connectivityB.access-provider-id`' />\n<parameter name='client-id' value='`$tmp.aai.connectivityB.access-client-id`' />\n<parameter name='topology-id' value='`$tmp.aai.connectivityB.access-topology-id`' />\n<parameter name='otn-tunnel-name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n<parameter name='ethernet-end-point-name' value='`$tmp.aai.connectivityB.connectivity-id`' />\n<parameter name='index-number' value='0' />\n<parameter name='eth-node-id' value='`$tmp.aai.connectivityB.access-node-id`' />\n<parameter name='eth-node-tp-id' value='`$tmp.aai.connectivityB.access-ltp-id`' />\n<parameter name='CIR' value='`$tmp.aai.vpn-bindingB.route-distinguisher *1000000`' />\n<parameter name='EIR' value='`$tmp.aai.vpn-bindingB.route-distinguisher *1000000`' />\n<parameter name='cvlan' value='`$tmp.aai.connectivityB.cvlan`' />\n\n",
        "comments": "",
        "x": 3741,
        "y": 2080,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "295ad948.4ab50e",
        "type": "execute",
        "name": "execute RestApiCallNode Create ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-ethernet-service.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3895,
        "y": 2128,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "ec9bb97a.fa7b4",
                "d7a86063.21272"
            ]
        ]
    },
    {
        "id": "ec9bb97a.fa7b4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4240.5,
        "y": 2109,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "23e4ab97.fe6f5c"
            ]
        ]
    },
    {
        "id": "d7a86063.21272",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4244.5,
        "y": 2149,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "3d3a171d.cfa4"
            ]
        ]
    },
    {
        "id": "23e4ab97.fe6f5c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create ethernet service rest api\" />\n",
        "comments": "",
        "x": 4398.5,
        "y": 2109,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "3d3a171d.cfa4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4402,
        "y": 2149,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "5d084d8a.b2f23c",
                "44dbf2a2.960644"
            ]
        ]
    },
    {
        "id": "ce171a50.073f6",
        "type": "comment",
        "name": "TODO: FIXME:",
        "info": "put proper values based on connectivity resource retrieved from AAI",
        "comments": "",
        "x": 3738.5,
        "y": 2036,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "5d084d8a.b2f23c",
        "type": "save",
        "name": "update vpn-binding B resource (aka. OTN domainB) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingB.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingB.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4742,
        "y": 2148,
        "z": "4996e636.3ea08",
        "wires": [
            []
        ]
    },
    {
        "id": "e7b454fe.3b5cb",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "use proper vpn-binding id and connectivity\n\nAlso, does CCSDK support \"update\" operation for vpn-binding and connectivity?",
        "comments": "",
        "x": 4600,
        "y": 2106,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "44dbf2a2.960644",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivityB.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivityB.connectivity-id`' />\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4671,
        "y": 2197,
        "z": "4996e636.3ea08",
        "wires": [
            []
        ]
    },
    {
        "id": "dcf1d309.aad128",
        "type": "set",
        "name": "set attachment_param (gfp-n) for OTN",
        "xml": "<set>\n<parameter name='gfp-n' value='`$tmp.aai.vpn-binding.route-distinguisher`' />\n",
        "comments": "",
        "x": 3305,
        "y": 620,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "8b7a547c.5a78f8",
        "type": "set",
        "name": "unset tmp.aai.vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value='' />\n",
        "comments": "",
        "x": 2939,
        "y": 268,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "29539dcf.178a92",
        "type": "comment",
        "name": "only dst ttp exists. No src",
        "info": "",
        "comments": "",
        "x": 3900,
        "y": 306,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "5f3074d9.b389cc",
        "type": "comment",
        "name": "only src ttp exists. No dst",
        "info": "",
        "comments": "",
        "x": 3457,
        "y": 1884,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "eacef09.695731",
        "type": "switchNode",
        "name": "switch vpn-binding has src-access-ltp",
        "xml": "<switch test='`$tmp.aai.vpn-binding.src-access-ltp-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3636,
        "y": 468,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "f62c1164.a0b8",
                "81b54f08.97d86"
            ]
        ]
    },
    {
        "id": "81b54f08.97d86",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3878,
        "y": 1057,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "efc62266.57c198"
            ]
        ]
    },
    {
        "id": "f62c1164.a0b8",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 3872,
        "y": 348,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "bcb6d938.081b58"
            ]
        ]
    },
    {
        "id": "efc62266.57c198",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4036,
        "y": 1056,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "cb6a953c.fa71e8",
                "263d4572.ce34fa",
                "2e78dd82.d5612a",
                "c61e9a44.c762a8",
                "8ae64ab7.a00a7"
            ]
        ]
    },
    {
        "id": "263d4572.ce34fa",
        "type": "set",
        "name": "set attachment_param for OTN G",
        "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingG.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingG.dst-access-node-id`' />\n<!--<parameter name='dst-tpn-id' value='1' />-->\n<parameter name='src-tpn-id' value='`$tmp.aai.vpn-bindingG.customer-vpn-id`' />\n<parameter name='dst-tpn-id' value='`$tmp.aai.vpn-bindingG.customer-vpn-id`' />\n<parameter name='src-ttp-id' value='`$tmp.aai.vpn-bindingG.src-access-ltp-id`' />\n<parameter name='dst-ttp-id' value='`$tmp.aai.vpn-bindingG.dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-domainG' value='`$tmp.aai.vpn-bindingG.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingG.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingG.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingG.access-topology-id`' />\n",
        "comments": "",
        "x": 4300,
        "y": 939,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "8ae64ab7.a00a7",
        "type": "execute",
        "name": "execute RestApiCallNode Create OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-otn-domainG-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainG.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainG.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainG.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4381,
        "y": 1254,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "bd008f9d.f02308",
                "91d1e4e0.3cbb38"
            ]
        ]
    },
    {
        "id": "bd008f9d.f02308",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4690.5,
        "y": 1223,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "270fab9f.26c71c"
            ]
        ]
    },
    {
        "id": "91d1e4e0.3cbb38",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4695.5,
        "y": 1288,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "49e9447.128b63c"
            ]
        ]
    },
    {
        "id": "270fab9f.26c71c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 4866.5,
        "y": 1223,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "49e9447.128b63c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4862,
        "y": 1288,
        "z": "4996e636.3ea08",
        "wires": [
            []
        ]
    },
    {
        "id": "2e78dd82.d5612a",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domainG.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingG.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingG.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingG.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingG.src-access-node-id`\" />\n",
        "comments": "",
        "x": 4238,
        "y": 987,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "c61e9a44.c762a8",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domainG.pnf-name\"\n        pfx='tmp.aai.domainG-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4264,
        "y": 1104,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "58640478.1eeefc",
                "b15b9e00.631398",
                "c5141964.109468"
            ]
        ]
    },
    {
        "id": "58640478.1eeefc",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4459.5001220703125,
        "y": 1056,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "9ec63af5.4a1a88"
            ]
        ]
    },
    {
        "id": "b15b9e00.631398",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4451.5001220703125,
        "y": 1111,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "a4b9d6d5.39a2c8"
            ]
        ]
    },
    {
        "id": "9ec63af5.4a1a88",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4603.8824462890625,
        "y": 1055.6556701660156,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "f086ebfd.c8405"
            ]
        ]
    },
    {
        "id": "f086ebfd.c8405",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.domainG-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4788,
        "y": 1054,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "b709cf8e.43e148"
            ]
        ]
    },
    {
        "id": "b709cf8e.43e148",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.domainG-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4983,
        "y": 1054,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "ad439d36.0ced9"
            ]
        ]
    },
    {
        "id": "c5141964.109468",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4456.5001220703125,
        "y": 1168,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "56d134ff.8e34ec"
            ]
        ]
    },
    {
        "id": "56d134ff.8e34ec",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4608.5001220703125,
        "y": 1169,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "a4b9d6d5.39a2c8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4619.5001220703125,
        "y": 1112,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "cb6a953c.fa71e8",
        "type": "set",
        "name": "set vpn-bindingG and connectivityG",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingG.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityG.' value=\"`$tmp.aai.connectivity.`\" />\n",
        "comments": "",
        "x": 4295,
        "y": 879,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "ad439d36.0ced9",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5186,
        "y": 1058,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "cb537ad7.8928d8"
            ]
        ]
    },
    {
        "id": "e839cea.58e4f3",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainG.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainG.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5571,
        "y": 1071,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "9673ee8e.826088",
                "87202e49.7cf198",
                "ad5371c2.88c47"
            ]
        ]
    },
    {
        "id": "cb537ad7.8928d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5365,
        "y": 1058,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "2fa33243.987c8e",
                "e839cea.58e4f3"
            ]
        ]
    },
    {
        "id": "2fa33243.987c8e",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainG id",
        "xml": "<set>\n<parameter name='tmp.domainG.esr-thirdparty-id' value=\"`$tmp.aai.domainG-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5601,
        "y": 1019,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "9673ee8e.826088",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5781,
        "y": 1062,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "3788c181.11c43e"
            ]
        ]
    },
    {
        "id": "87202e49.7cf198",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5773,
        "y": 1117,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "3691dbb8.1b2bf4"
            ]
        ]
    },
    {
        "id": "ad5371c2.88c47",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5778,
        "y": 1174,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "c7f3058f.182658"
            ]
        ]
    },
    {
        "id": "c7f3058f.182658",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5930,
        "y": 1175,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "3691dbb8.1b2bf4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5941,
        "y": 1120,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "3788c181.11c43e",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5925.38232421875,
        "y": 1059.6556701660156,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "a3c8eb2b.95af8"
            ]
        ]
    },
    {
        "id": "a3c8eb2b.95af8",
        "type": "set",
        "name": "set controller domainG data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.url' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.user' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.password' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 6140,
        "y": 1056,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "2ac9f039.bfa9a8",
        "type": "comment",
        "name": "both src and dst exist",
        "info": "",
        "comments": "",
        "x": 3914,
        "y": 997,
        "z": "4996e636.3ea08",
        "wires": []
    },
    {
        "id": "19520422.b45d4c",
        "type": "switchNode",
        "name": "switch vpn-binding is not already Activated (i.e. is either Created or Modified)",
        "xml": "<switch test=\"`$tmp.aai.vpn-binding.operational-status != 'Activated' `\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2476,
        "y": 724,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "fc6dfa43.dee44",
                "90381d7.56caa6"
            ]
        ]
    },
    {
        "id": "90381d7.56caa6",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2883,
        "y": 742,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "d486bdc8.981f98"
            ]
        ]
    },
    {
        "id": "fc6dfa43.dee44",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2883,
        "y": 687,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "7563c99.56d39b8"
            ]
        ]
    },
    {
        "id": "7563c99.56d39b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3039,
        "y": 685,
        "z": "4996e636.3ea08",
        "wires": [
            [
                "dcf1d309.aad128",
                "61cd75bc.541bfc"
            ]
        ]
    },
    {
        "id": "d486bdc8.981f98",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3016,
        "y": 743,
        "z": "4996e636.3ea08",
        "wires": [
            []
        ]
    }
]