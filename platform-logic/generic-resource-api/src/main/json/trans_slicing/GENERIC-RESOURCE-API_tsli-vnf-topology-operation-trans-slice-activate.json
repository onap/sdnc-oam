[
    {
        "id": "c170e1ed.7b781",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 137,
        "y": 82,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "9970ac63.cab4e"
            ]
        ]
    },
    {
        "id": "9970ac63.cab4e",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 268.2856903076172,
        "y": 131.23810863494873,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "d984e08f.709ec8"
            ]
        ]
    },
    {
        "id": "d984e08f.709ec8",
        "type": "method",
        "name": "method tsli-vnf-topology-operation-trans-slice-activate",
        "xml": "<method rpc='tsli-vnf-topology-operation-trans-slice-activate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 271.4286193847656,
        "y": 216.00003242492676,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "8e4db78f.c5ff38"
            ]
        ]
    },
    {
        "id": "8e4db78f.c5ff38",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 421.238037109375,
        "y": 345.6666564941406,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "6bde1442.84f93c",
                "d81cbe5a.85cea",
                "2a368168.cab60e"
            ]
        ]
    },
    {
        "id": "6bde1442.84f93c",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 689.5716552734375,
        "y": 732.59716796875,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "233d87e5.a24f7",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 721,
        "y": 407,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "d81cbe5a.85cea",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--$vnf-topology-operation-input.service-information.service-instance-id-->",
        "comments": "",
        "outputs": 1,
        "x": 741,
        "y": 503,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "b0036e6b.1878c8",
                "7901c2f.e699b3c",
                "120c06e4.dff209"
            ]
        ]
    },
    {
        "id": "b0036e6b.1878c8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 960,
        "y": 441,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "9167ffc3.5d91a"
            ]
        ]
    },
    {
        "id": "7901c2f.e699b3c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 969.490966796875,
        "y": 483.57403564453125,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "fe34f5d.3d31308"
            ]
        ]
    },
    {
        "id": "120c06e4.dff209",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 958,
        "y": 530,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "6d39868f.7f25c8"
            ]
        ]
    },
    {
        "id": "fe34f5d.3d31308",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1123.0623779296875,
        "y": 486.8597717285156,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "6d39868f.7f25c8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1127,
        "y": 531,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "9167ffc3.5d91a",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for index='rel-index' start='0' end='`$tmp.aai.service-instance.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1157,
        "y": 437,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "5c1ddd56.ddffa4"
            ]
        ]
    },
    {
        "id": "5c1ddd56.ddffa4",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.service-instance.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1380.33349609375,
        "y": 436.99993896484375,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "aeacbf90.6ab9e"
            ]
        ]
    },
    {
        "id": "aeacbf90.6ab9e",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1581.0001335144043,
        "y": 438.00002098083496,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "7ea091c4.73eb6"
            ]
        ]
    },
    {
        "id": "fd4d27b6.bd205",
        "type": "set",
        "name": "set attachment_param for OTN A",
        "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingA.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingA.dst-access-node-id`' />\n<!--<parameter name='dst-tpn-id' value='1' />-->\n<parameter name='dst-tpn-id' value='`$tmp.aai.vpn-bindingA.customer-vpn-id`' />\n<parameter name='dst-ttp-id' value='`$tmp.aai.vpn-bindingA.dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-src-domain' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingA.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingA.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingA.access-topology-id`' />\n",
        "comments": "",
        "x": 4400,
        "y": 154,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "7648091a.a03898",
        "type": "execute",
        "name": "execute RestApiCallNode Create OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-otn-src-domain-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4481,
        "y": 469,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "9edc273d.67b87",
                "9c60eb24.47f378"
            ]
        ]
    },
    {
        "id": "9edc273d.67b87",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4790.5,
        "y": 438,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "9905c30a.05be"
            ]
        ]
    },
    {
        "id": "9c60eb24.47f378",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4795.5,
        "y": 503,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "8e92f9d2.75f4a8"
            ]
        ]
    },
    {
        "id": "9905c30a.05be",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 4966.5,
        "y": 438,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "8e92f9d2.75f4a8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4962,
        "y": 503,
        "z": "bc289cb4.31b288",
        "wires": [
            []
        ]
    },
    {
        "id": "7974f996.7603f8",
        "type": "set",
        "name": "set sotn_value",
        "xml": "<set>\n<!--<parameter name='eth-service-name' value='`$tmp.aai.connectivityA.connectivity-id`' />-->\n<parameter name='eth-service-name' value='`$tmp.aai.connectivityA.etht-svc-name`' />\n<parameter name='slice-id' value='`$vnf-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='provider-id' value='`$tmp.aai.connectivityA.access-provider-id`' />\n<parameter name='client-id' value='`$tmp.aai.connectivityA.access-client-id`' />\n<parameter name='topology-id' value='`$tmp.aai.connectivityA.access-topology-id`' />\n<parameter name='otn-tunnel-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n<parameter name='ethernet-end-point-name' value='`$tmp.aai.connectivityA.connectivity-id`' />\n<parameter name='index-number' value='0' />\n<parameter name='eth-node-id' value='`$tmp.aai.connectivityA.access-node-id`' />\n<parameter name='eth-node-tp-id' value='`$tmp.aai.connectivityA.access-ltp-id`' />\n<parameter name='CIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />\n<parameter name='EIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />\n<parameter name='cvlan' value='`$tmp.aai.connectivityA.cvlan`' />\n",
        "comments": "",
        "x": 4347.5,
        "y": 657,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "1460b865.7cff48",
        "type": "execute",
        "name": "execute RestApiCallNode Create ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-ethernet-service.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4501.5,
        "y": 705,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "d6a6995b.244f78",
                "3058a60d.1382f2"
            ]
        ]
    },
    {
        "id": "d6a6995b.244f78",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4847,
        "y": 686,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "9008a0fb.361338"
            ]
        ]
    },
    {
        "id": "3058a60d.1382f2",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4851,
        "y": 726,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "5c04d202.902b9c"
            ]
        ]
    },
    {
        "id": "9008a0fb.361338",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create ethernet service rest api\" />\n",
        "comments": "",
        "x": 5005,
        "y": 686,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "5c04d202.902b9c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5008.5,
        "y": 726,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "ec17d55b.a0804",
                "144849a3.b4133e"
            ]
        ]
    },
    {
        "id": "471d2a77.3a42ac",
        "type": "comment",
        "name": "TODO: FIXME:",
        "info": "put proper values based on connectivity resource retrieved from AAI",
        "comments": "",
        "x": 4345,
        "y": 613,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "ec17d55b.a0804",
        "type": "save",
        "name": "update vpn-binding A resource (aka. OTN domainA) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingA.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingA.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 5339,
        "y": 691,
        "z": "bc289cb4.31b288",
        "wires": [
            []
        ]
    },
    {
        "id": "4e9eb117.9357d",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "use proper vpn-binding id and connectivity id\n\nAlso, does CCSDK support \"update\" operation for vpn-binding and connectivity?",
        "comments": "",
        "x": 5203,
        "y": 650,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "144849a3.b4133e",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivityA.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivityA.connectivity-id`' />\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 5266,
        "y": 737,
        "z": "bc289cb4.31b288",
        "wires": [
            []
        ]
    },
    {
        "id": "4f40e2d1.4262ec",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingA.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingA.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingA.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingA.src-access-node-id`\" />\n",
        "comments": "",
        "x": 4338,
        "y": 202,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "8abcb98.e721cc8",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4364,
        "y": 319,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "3115ae28.00936a",
                "34440f82.2778b8",
                "5e322ae1.288484"
            ]
        ]
    },
    {
        "id": "3115ae28.00936a",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4559.5001220703125,
        "y": 271,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "5640c3a4.e53454"
            ]
        ]
    },
    {
        "id": "34440f82.2778b8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4551.5001220703125,
        "y": 326,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "b5a71ca6.0ed8a"
            ]
        ]
    },
    {
        "id": "5640c3a4.e53454",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4703.8824462890625,
        "y": 270.6556701660156,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "4125afdc.dc7c38"
            ]
        ]
    },
    {
        "id": "e2a3abe6.94632",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5286,
        "y": 273,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "e7a85e47.2ddf5"
            ]
        ]
    },
    {
        "id": "4125afdc.dc7c38",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4888,
        "y": 269,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "7289fd85.50ab7c"
            ]
        ]
    },
    {
        "id": "7289fd85.50ab7c",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5083,
        "y": 269,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "e2a3abe6.94632"
            ]
        ]
    },
    {
        "id": "5e322ae1.288484",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4556.5001220703125,
        "y": 383,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "a5591b6a.a340a8"
            ]
        ]
    },
    {
        "id": "a5591b6a.a340a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4708.5001220703125,
        "y": 384,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "b5a71ca6.0ed8a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4719.5001220703125,
        "y": 327,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "ca9f1df7.d822c",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5671,
        "y": 286,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "d6fa81cb.78d2d",
                "bcf1b063.c95248",
                "109a3661.2bbbd2"
            ]
        ]
    },
    {
        "id": "e7a85e47.2ddf5",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5465,
        "y": 273,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "211b93a9.ce5f0c",
                "ca9f1df7.d822c"
            ]
        ]
    },
    {
        "id": "211b93a9.ce5f0c",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainA id",
        "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5701,
        "y": 234,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "d6fa81cb.78d2d",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5881,
        "y": 277,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "bf2e4f3b.81ed8"
            ]
        ]
    },
    {
        "id": "bcf1b063.c95248",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5873,
        "y": 332,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "bfa4b512.849248"
            ]
        ]
    },
    {
        "id": "109a3661.2bbbd2",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5878,
        "y": 389,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "76f805.e622cffc"
            ]
        ]
    },
    {
        "id": "76f805.e622cffc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 6030,
        "y": 390,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "bfa4b512.849248",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 6041,
        "y": 335,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "bf2e4f3b.81ed8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6025.38232421875,
        "y": 274.6556701660156,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "76b40334.8bd094"
            ]
        ]
    },
    {
        "id": "76b40334.8bd094",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 6240,
        "y": 271,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "2a368168.cab60e",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 707,
        "y": 451,
        "z": "bc289cb4.31b288",
        "wires": [
            []
        ]
    },
    {
        "id": "3bea0429.f0ebac",
        "type": "set",
        "name": "set attachment_param for OTN B",
        "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingB.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingB.dst-access-node-id`' />\n<!--<parameter name='src-tpn-id' value='1' />-->\n<parameter name='src-tpn-id' value='`$tmp.aai.vpn-bindingB.customer-vpn-id`' />\n<parameter name='src-ttp-id' value='`$tmp.aai.vpn-bindingB.src-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-dst-domain' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingB.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingB.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingB.access-topology-id`' />\n",
        "comments": "",
        "x": 3807,
        "y": 1611,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "d501f859.eecd18",
        "type": "execute",
        "name": "execute RestApiCallNode Create OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-otn-dst-domain-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3870,
        "y": 1940,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "8a516999.f983f8",
                "e1e3477c.cb45b"
            ]
        ]
    },
    {
        "id": "8a516999.f983f8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4165.5,
        "y": 1907,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "1f32cbd.2007fb4"
            ]
        ]
    },
    {
        "id": "e1e3477c.cb45b",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4170.5,
        "y": 1972,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "5be15aea.63aa2c"
            ]
        ]
    },
    {
        "id": "1f32cbd.2007fb4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 4333.5,
        "y": 1907,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "5be15aea.63aa2c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4344,
        "y": 1972,
        "z": "bc289cb4.31b288",
        "wires": [
            []
        ]
    },
    {
        "id": "32f45e6c.4d0bea",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingB.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingB.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingB.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingB.dst-access-node-id`\" />\n",
        "comments": "",
        "x": 3746,
        "y": 1668,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "e8ca7925.e0f8c",
        "type": "get-resource",
        "name": "get-resource dst pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3766,
        "y": 1765,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "9bb092a5.d05b48",
                "221dd2f3.9ac236",
                "26d51b0f.5d004c"
            ]
        ]
    },
    {
        "id": "9bb092a5.d05b48",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3968.5001220703125,
        "y": 1718,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "b690bac2.55724"
            ]
        ]
    },
    {
        "id": "221dd2f3.9ac236",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3960.5001220703125,
        "y": 1773,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "b19648bb.51984"
            ]
        ]
    },
    {
        "id": "b690bac2.55724",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4112.8824462890625,
        "y": 1715.6556701660156,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "bc889fde.13a798"
            ]
        ]
    },
    {
        "id": "bc889fde.13a798",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4297,
        "y": 1730,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "6cdbe20d.6924d4"
            ]
        ]
    },
    {
        "id": "26d51b0f.5d004c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3965.5001220703125,
        "y": 1830,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "5f4cb2c4.11fb94"
            ]
        ]
    },
    {
        "id": "5f4cb2c4.11fb94",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4117.5001220703125,
        "y": 1831,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "b19648bb.51984",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4128.5001220703125,
        "y": 1776,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "73a1b393.2e09c4",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4695,
        "y": 1734,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "ab9ee354.2292b"
            ]
        ]
    },
    {
        "id": "6cdbe20d.6924d4",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4492,
        "y": 1730,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "73a1b393.2e09c4"
            ]
        ]
    },
    {
        "id": "1f5d9d19.39869b",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5080,
        "y": 1733,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "9355225.5c1536",
                "66c76394.d1fea4",
                "2e8b8501.9ee95a"
            ]
        ]
    },
    {
        "id": "ab9ee354.2292b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4872,
        "y": 1726,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "28e5278d.3f4238",
                "1f5d9d19.39869b"
            ]
        ]
    },
    {
        "id": "28e5278d.3f4238",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainB id",
        "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5110,
        "y": 1681,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "8616ea00.2e5968",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5439,
        "y": 1837,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "8ef11dae.da91",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5450,
        "y": 1782,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "d4ab39c.829a8c8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5434.38232421875,
        "y": 1721.6556701660156,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "4d0c934c.0c9114"
            ]
        ]
    },
    {
        "id": "4d0c934c.0c9114",
        "type": "set",
        "name": "set controller domainB data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5649,
        "y": 1718,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "9355225.5c1536",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5290,
        "y": 1724,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "d4ab39c.829a8c8"
            ]
        ]
    },
    {
        "id": "66c76394.d1fea4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5282,
        "y": 1779,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "8ef11dae.da91"
            ]
        ]
    },
    {
        "id": "2e8b8501.9ee95a",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5287,
        "y": 1836,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "8616ea00.2e5968"
            ]
        ]
    },
    {
        "id": "7ea091c4.73eb6",
        "type": "save",
        "name": "get connectivity from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1819,
        "y": 440,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "cf96a339.12fc08",
                "ebf1abf2.c0a2b8",
                "a6813928.711c6"
            ]
        ]
    },
    {
        "id": "cf96a339.12fc08",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2027,
        "y": 404,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "7e9b774d.9e8c28"
            ]
        ]
    },
    {
        "id": "ebf1abf2.c0a2b8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2027.490966796875,
        "y": 449.57403564453125,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "b2e1099a.08fc3"
            ]
        ]
    },
    {
        "id": "a6813928.711c6",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2025,
        "y": 493,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "8f5ccf37.c152"
            ]
        ]
    },
    {
        "id": "b2e1099a.08fc3",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2190.0623779296875,
        "y": 449.8597717285156,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "8f5ccf37.c152",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2194,
        "y": 494,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "2f04c146.0a3af6",
        "type": "save",
        "name": "get vpn-binding from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2500,
        "y": 493,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "675654a6.d7ff34",
                "15ae8ffb.52d9c8",
                "5de62fdc.3f5a78"
            ]
        ]
    },
    {
        "id": "c4252359.e0b548",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2884,
        "y": 493,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "cf117e36.f49698",
                "9e15ad66.cb5638"
            ]
        ]
    },
    {
        "id": "675654a6.d7ff34",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2711,
        "y": 495,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "c4252359.e0b548"
            ]
        ]
    },
    {
        "id": "15ae8ffb.52d9c8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2711.490966796875,
        "y": 540.5740356445312,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "1c0c1f66.646011"
            ]
        ]
    },
    {
        "id": "5de62fdc.3f5a78",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2709,
        "y": 584,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "96b5913.ff6507"
            ]
        ]
    },
    {
        "id": "96b5913.ff6507",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2876,
        "y": 583,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "1c0c1f66.646011",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2874.0623779296875,
        "y": 540.8597717285156,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "7e9b774d.9e8c28",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2228,
        "y": 399,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "a33b5641.550dd8"
            ]
        ]
    },
    {
        "id": "a33b5641.550dd8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2433,
        "y": 399,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "dcc9c2f.bdc72c"
            ]
        ]
    },
    {
        "id": "dcc9c2f.bdc72c",
        "type": "outcome",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2599,
        "y": 399,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "b86471e.744979"
            ]
        ]
    },
    {
        "id": "b86471e.744979",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2762,
        "y": 399,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "2f04c146.0a3af6",
                "65e4f8bf.6cf8f"
            ]
        ]
    },
    {
        "id": "cf117e36.f49698",
        "type": "switchNode",
        "name": "switch vpn-binding has dst-access-ltp",
        "xml": "<switch test='`$tmp.aai.vpn-binding.dst-access-ltp-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3138,
        "y": 492,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "965ac3c2.a1d608",
                "6bf420f8.6129c8"
            ]
        ]
    },
    {
        "id": "965ac3c2.a1d608",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 3391,
        "y": 526,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "f82e8947.2d7ce8"
            ]
        ]
    },
    {
        "id": "6bf420f8.6129c8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3391,
        "y": 470,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "aacf39c3.b541a"
            ]
        ]
    },
    {
        "id": "f82e8947.2d7ce8",
        "type": "switchNode",
        "name": "switch vpn-binding has src-access-ltp",
        "xml": "<switch test='`$tmp.aai.vpn-binding.src-access-ltp-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3115,
        "y": 1962,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "10da65e0.f509ca",
                "73ba091f.6ce2a"
            ]
        ]
    },
    {
        "id": "10da65e0.f509ca",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 3368,
        "y": 1996,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "d3f311e2.47dc9"
            ]
        ]
    },
    {
        "id": "73ba091f.6ce2a",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3368,
        "y": 1940,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "4a6141b6.6b0c98"
            ]
        ]
    },
    {
        "id": "d3f311e2.47dc9",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3519,
        "y": 1996,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "fb92b32f.578d9",
        "type": "set",
        "name": "set vpn-bindingA and connectivityA",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingA.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityA.' value=\"`$tmp.aai.connectivity.`\" />\n",
        "comments": "",
        "x": 4395,
        "y": 94,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "16b6eb5a.c037cd",
        "type": "set",
        "name": "set vpn-bindingB and connectivityB",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingB.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityB.' value=\"`$tmp.aai.connectivity.`\" />\n\n",
        "comments": "",
        "x": 3803,
        "y": 1553,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "b5fbea6d.693118",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4086,
        "y": 351,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "fb92b32f.578d9",
                "fd4d27b6.bd205",
                "4f40e2d1.4262ec",
                "8abcb98.e721cc8",
                "7974f996.7603f8",
                "1460b865.7cff48",
                "7648091a.a03898"
            ]
        ]
    },
    {
        "id": "4a6141b6.6b0c98",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3519,
        "y": 1939,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "16b6eb5a.c037cd",
                "3bea0429.f0ebac",
                "32f45e6c.4d0bea",
                "e8ca7925.e0f8c",
                "d501f859.eecd18",
                "dfc89384.6f3b98",
                "7e08fa79.0c018c"
            ]
        ]
    },
    {
        "id": "dfc89384.6f3b98",
        "type": "set",
        "name": "set sotn_value",
        "xml": "<set>\n<!--<parameter name='eth-service-name' value='`$tmp.aai.connectivityB.connectivity-id`' />-->\n<parameter name='eth-service-name' value='`$tmp.aai.connectivityB.etht-svc-name`' />\n<parameter name='slice-id' value='`$vnf-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='provider-id' value='`$tmp.aai.connectivityB.access-provider-id`' />\n<parameter name='client-id' value='`$tmp.aai.connectivityB.access-client-id`' />\n<parameter name='topology-id' value='`$tmp.aai.connectivityB.access-topology-id`' />\n<parameter name='otn-tunnel-name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n<parameter name='ethernet-end-point-name' value='`$tmp.aai.connectivityB.connectivity-id`' />\n<parameter name='index-number' value='0' />\n<parameter name='eth-node-id' value='`$tmp.aai.connectivityB.access-node-id`' />\n<parameter name='eth-node-tp-id' value='`$tmp.aai.connectivityB.access-ltp-id`' />\n<parameter name='CIR' value='`$tmp.aai.vpn-bindingB.route-distinguisher *1000000`' />\n<parameter name='EIR' value='`$tmp.aai.vpn-bindingB.route-distinguisher *1000000`' />\n<parameter name='cvlan' value='`$tmp.aai.connectivityB.cvlan`' />\n\n",
        "comments": "",
        "x": 3748,
        "y": 2082,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "7e08fa79.0c018c",
        "type": "execute",
        "name": "execute RestApiCallNode Create ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-ethernet-service.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3902,
        "y": 2130,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "dd71fa1b.6e05f",
                "23079c35.06b53c"
            ]
        ]
    },
    {
        "id": "dd71fa1b.6e05f",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4247.5,
        "y": 2111,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "531e9904.6c0cf"
            ]
        ]
    },
    {
        "id": "23079c35.06b53c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4251.5,
        "y": 2151,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "ca751a91.a1fc5"
            ]
        ]
    },
    {
        "id": "531e9904.6c0cf",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create ethernet service rest api\" />\n",
        "comments": "",
        "x": 4405.5,
        "y": 2111,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "ca751a91.a1fc5",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4409,
        "y": 2151,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "acce8a06.32f9",
                "300cb80e.add27"
            ]
        ]
    },
    {
        "id": "ed3d8ab7.5da83",
        "type": "comment",
        "name": "TODO: FIXME:",
        "info": "put proper values based on connectivity resource retrieved from AAI",
        "comments": "",
        "x": 3745.5,
        "y": 2038,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "acce8a06.32f9",
        "type": "save",
        "name": "update vpn-binding B resource (aka. OTN domainB) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingB.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingB.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4749,
        "y": 2150,
        "z": "bc289cb4.31b288",
        "wires": [
            []
        ]
    },
    {
        "id": "dd0732a8.6dcd38",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "use proper vpn-binding id and connectivity\n\nAlso, does CCSDK support \"update\" operation for vpn-binding and connectivity?",
        "comments": "",
        "x": 4607,
        "y": 2108,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "300cb80e.add27",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivityB.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivityB.connectivity-id`' />\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4678,
        "y": 2199,
        "z": "bc289cb4.31b288",
        "wires": [
            []
        ]
    },
    {
        "id": "9e15ad66.cb5638",
        "type": "set",
        "name": "set attachment_param (gfp-n) for OTN",
        "xml": "<set>\n<parameter name='gfp-n' value='`$tmp.aai.vpn-binding.route-distinguisher`' />\n",
        "comments": "",
        "x": 3125,
        "y": 398,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "65e4f8bf.6cf8f",
        "type": "set",
        "name": "unset tmp.aai.vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value='' />\n",
        "comments": "",
        "x": 2946,
        "y": 270,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "198fcdf8.1e22c2",
        "type": "comment",
        "name": "only dst ttp exists. No src",
        "info": "",
        "comments": "",
        "x": 3907,
        "y": 308,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "ca0cd7a2.5ca728",
        "type": "comment",
        "name": "only src ttp exists. No dst",
        "info": "",
        "comments": "",
        "x": 3464,
        "y": 1886,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "aacf39c3.b541a",
        "type": "switchNode",
        "name": "switch vpn-binding has src-access-ltp",
        "xml": "<switch test='`$tmp.aai.vpn-binding.src-access-ltp-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3615,
        "y": 468,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "df2281b1.f49f38",
                "aea11bc2.879238"
            ]
        ]
    },
    {
        "id": "aea11bc2.879238",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3885,
        "y": 1059,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "f4291584.31d5f8"
            ]
        ]
    },
    {
        "id": "df2281b1.f49f38",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 3879,
        "y": 350,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "b5fbea6d.693118"
            ]
        ]
    },
    {
        "id": "f4291584.31d5f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4043,
        "y": 1058,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "507acb8a.026844",
                "328f5ebe.d2c3f2",
                "282b55f0.c4b452",
                "f1d5dfc2.902f38",
                "e32fad74.744d"
            ]
        ]
    },
    {
        "id": "328f5ebe.d2c3f2",
        "type": "set",
        "name": "set attachment_param for OTN G",
        "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingG.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingG.dst-access-node-id`' />\n<!--<parameter name='dst-tpn-id' value='1' />-->\n<parameter name='src-tpn-id' value='`$tmp.aai.vpn-bindingG.customer-vpn-id`' />\n<parameter name='dst-tpn-id' value='`$tmp.aai.vpn-bindingG.customer-vpn-id`' />\n<parameter name='src-ttp-id' value='`$tmp.aai.vpn-bindingG.src-access-ltp-id`' />\n<parameter name='dst-ttp-id' value='`$tmp.aai.vpn-bindingG.dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-domainG' value='`$tmp.aai.vpn-bindingG.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingG.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingG.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingG.access-topology-id`' />\n",
        "comments": "",
        "x": 4307,
        "y": 941,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "e32fad74.744d",
        "type": "execute",
        "name": "execute RestApiCallNode Create OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-otn-domainG-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainG.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainG.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainG.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4388,
        "y": 1256,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "4fa7d7bd.5a2ab",
                "f472be3.5d0074"
            ]
        ]
    },
    {
        "id": "4fa7d7bd.5a2ab",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4697.5,
        "y": 1225,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "1f127e35.6d237a"
            ]
        ]
    },
    {
        "id": "f472be3.5d0074",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4702.5,
        "y": 1290,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "5d6567d4.56edf"
            ]
        ]
    },
    {
        "id": "1f127e35.6d237a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 4873.5,
        "y": 1225,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "5d6567d4.56edf",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4869,
        "y": 1290,
        "z": "bc289cb4.31b288",
        "wires": [
            []
        ]
    },
    {
        "id": "282b55f0.c4b452",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domainG.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingG.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingG.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingG.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingG.src-access-node-id`\" />\n",
        "comments": "",
        "x": 4245,
        "y": 989,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "f1d5dfc2.902f38",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domainG.pnf-name\"\n        pfx='tmp.aai.domainG-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4271,
        "y": 1106,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "b1abc6d5.732f1",
                "5f6c0c85.ca44ac",
                "386d37a9.f48098"
            ]
        ]
    },
    {
        "id": "b1abc6d5.732f1",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4466.5001220703125,
        "y": 1058,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "7b990f0b.20c288"
            ]
        ]
    },
    {
        "id": "5f6c0c85.ca44ac",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4458.5001220703125,
        "y": 1113,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "315f8841.f40a1"
            ]
        ]
    },
    {
        "id": "7b990f0b.20c288",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4610.8824462890625,
        "y": 1057.6556701660156,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "c8fb728b.2dc648"
            ]
        ]
    },
    {
        "id": "c8fb728b.2dc648",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.domainG-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4795,
        "y": 1056,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "d59f0b39.d31cc8"
            ]
        ]
    },
    {
        "id": "d59f0b39.d31cc8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.domainG-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4990,
        "y": 1056,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "7e05c38e.6d5cbc"
            ]
        ]
    },
    {
        "id": "386d37a9.f48098",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4463.5001220703125,
        "y": 1170,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "46492ab4.cb6c04"
            ]
        ]
    },
    {
        "id": "46492ab4.cb6c04",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4615.5001220703125,
        "y": 1171,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "315f8841.f40a1",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4626.5001220703125,
        "y": 1114,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "507acb8a.026844",
        "type": "set",
        "name": "set vpn-bindingG and connectivityG",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingG.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityG.' value=\"`$tmp.aai.connectivity.`\" />\n",
        "comments": "",
        "x": 4302,
        "y": 881,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "7e05c38e.6d5cbc",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5193,
        "y": 1060,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "436389a3.57fb78"
            ]
        ]
    },
    {
        "id": "6a766cec.04fc1c",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainG.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainG.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5578,
        "y": 1073,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "985e5e77.801e6",
                "a10da0b1.afaa18",
                "4e466bf1.fc05c4"
            ]
        ]
    },
    {
        "id": "436389a3.57fb78",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5372,
        "y": 1060,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "507f9c6b.ef2c2c",
                "6a766cec.04fc1c"
            ]
        ]
    },
    {
        "id": "507f9c6b.ef2c2c",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainG id",
        "xml": "<set>\n<parameter name='tmp.domainG.esr-thirdparty-id' value=\"`$tmp.aai.domainG-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5608,
        "y": 1021,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "985e5e77.801e6",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5788,
        "y": 1064,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "37e160ea.8f86d8"
            ]
        ]
    },
    {
        "id": "a10da0b1.afaa18",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5780,
        "y": 1119,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "81ccddb5.3e1b1"
            ]
        ]
    },
    {
        "id": "4e466bf1.fc05c4",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5785,
        "y": 1176,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "c4f4a10b.e46a6"
            ]
        ]
    },
    {
        "id": "c4f4a10b.e46a6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5937,
        "y": 1177,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "81ccddb5.3e1b1",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5948,
        "y": 1122,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "37e160ea.8f86d8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5932.38232421875,
        "y": 1061.6556701660156,
        "z": "bc289cb4.31b288",
        "wires": [
            [
                "4cbb09e8.a29488"
            ]
        ]
    },
    {
        "id": "4cbb09e8.a29488",
        "type": "set",
        "name": "set controller domainG data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.url' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.user' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.password' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 6147,
        "y": 1058,
        "z": "bc289cb4.31b288",
        "wires": []
    },
    {
        "id": "28d376a3.473102",
        "type": "comment",
        "name": "both src and dst exist",
        "info": "",
        "comments": "",
        "x": 3921,
        "y": 999,
        "z": "bc289cb4.31b288",
        "wires": []
    }
]