[
    {
        "id": "c95751e3.8ae788",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 133,
        "y": 58,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "a120d0c2.d16848"
            ]
        ]
    },
    {
        "id": "a120d0c2.d16848",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 264.2856903076172,
        "y": 107.23810863494873,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "e3f08946.3b4f3"
            ]
        ]
    },
    {
        "id": "e3f08946.3b4f3",
        "type": "method",
        "name": "method tsli-vnf-topology-operation-trans-slice-activate",
        "xml": "<method rpc='tsli-vnf-topology-operation-trans-slice-activate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 267.4286193847656,
        "y": 192.00003242492676,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "da15bb94.f35d78"
            ]
        ]
    },
    {
        "id": "da15bb94.f35d78",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 417.238037109375,
        "y": 321.6666564941406,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "a0613c64.0d3d18",
                "bec74808.bd7fc8",
                "6e589ca9.47c63c",
                "a8ba9960.6cb65",
                "d40da373.f15598",
                "358d1f62.e4f2c8",
                "a739ea85.93c65",
                "19a0d774.67fb01"
            ]
        ]
    },
    {
        "id": "a0613c64.0d3d18",
        "type": "set",
        "name": "set vnf-level-oper-status to Active",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.order-status' value='Active' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.last-rpc-action' value='`$vnf-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.last-action' value='`$vnf-topology-operation-input.request-information.request-action`' />",
        "comments": "",
        "x": 760.3849563598633,
        "y": 558.6705458434299,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "bec74808.bd7fc8",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 687.5716552734375,
        "y": 1430.59716796875,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "6e589ca9.47c63c",
        "type": "set",
        "name": "set vnf-index and vnf-object-path",
        "xml": "<set>\n<parameter name='vnfId' value='`$vnf-topology-operation-input.vnf-information.vnf-id`' />\n<parameter name=\"vnf-object-path\" value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/vnfs/vnf/'  + $vnf-topology-operation-input.vnf-information.vnf-id  + '/vnf-data/'` \" />",
        "comments": "",
        "x": 766.5716018676758,
        "y": 506.5968001158908,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "a8ba9960.6cb65",
        "type": "switchNode",
        "name": "switch service-data.vnfs.vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 775,
        "y": 261,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "752da5f3.b4cc4c",
                "b945aefb.e762f",
                "8cef6bde.bc7818"
            ]
        ]
    },
    {
        "id": "8cef6bde.bc7818",
        "type": "outcome",
        "name": "0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1167.968994140625,
        "y": 226.96875,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "5417fb2d.edce0c"
            ]
        ]
    },
    {
        "id": "5417fb2d.edce0c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 1322.7778816223145,
        "y": 245.889018535614,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "752da5f3.b4cc4c",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1161.0001335144043,
        "y": 266.00007152557373,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "5417fb2d.edce0c"
            ]
        ]
    },
    {
        "id": "b945aefb.e762f",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1154.0005416870117,
        "y": 299.000075340271,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "39deabe9.dfa46c"
            ]
        ]
    },
    {
        "id": "39deabe9.dfa46c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1301.2700843811035,
        "y": 299.5547204017639,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "ffe0cb12.24663"
            ]
        ]
    },
    {
        "id": "ffe0cb12.24663",
        "type": "for",
        "name": "for vidx..service-data.vnfs.vnf_length[]",
        "xml": "<for index='vidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1547.2862014770508,
        "y": 306.42864084243774,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "d581e614.41ca28"
            ]
        ]
    },
    {
        "id": "d581e614.41ca28",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1766.6358337402344,
        "y": 305.96872091293335,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "6cb341ea.d215b"
            ]
        ]
    },
    {
        "id": "6cb341ea.d215b",
        "type": "switchNode",
        "name": "switch vnfid found",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-id == $vnf-topology-operation-input.vnf-information.vnf-id`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1920.715431213379,
        "y": 305.67880296707153,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "7e8f8e16.82297"
            ]
        ]
    },
    {
        "id": "7e8f8e16.82297",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2131.6675758361816,
        "y": 308.571494102478,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "1efc1703.0b69f1"
            ]
        ]
    },
    {
        "id": "1efc1703.0b69f1",
        "type": "set",
        "name": "set tmp.vidx and ctx.vnf-data",
        "xml": "<set>\n<parameter name='tmp.vidx' value='`$vidx`' />\n<parameter name='ctx.vnf-data.' value='`$service-data.vnfs.vnf[$vidx].`' />\n",
        "comments": "",
        "x": 2341.199951171875,
        "y": 310.32159423828125,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "d40da373.f15598",
        "type": "save",
        "name": "update AnAI - vnf-instance.orchestration-status",
        "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"generic-vnf\"   \n\t\tkey=\"generic-vnf.vnf-id = $vnfId\" >\n<parameter name=\"orchestration-status\" value=\"Active\" />\n<parameter name=\"vnf-type\" value=\"some vnf-type\" />",
        "comments": "",
        "outputs": 1,
        "x": 785.9999618530273,
        "y": 625.0103714736179,
        "z": "978d88fe.49f858",
        "wires": [
            []
        ]
    },
    {
        "id": "358d1f62.e4f2c8",
        "type": "set",
        "name": "copy input data to service data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.sdnc-request-header.' value='$vnf-topology-operation-input.sdnc-request-header.' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.request-information.' value='$vnf-topology-operation-input.request-information.' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.' value='$vnf-topology-operation-input.service-information.' />",
        "comments": "",
        "x": 765.0000762939453,
        "y": 456.01033284980804,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "a739ea85.93c65",
        "type": "switchNode",
        "name": "switch vnf-level-oper-status",
        "xml": "<switch test='`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.order-status`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 751.7499389648438,
        "y": 361.00390270072967,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "c40ac9fb.21106",
                "625ef5e9.0fa304"
            ]
        ]
    },
    {
        "id": "c40ac9fb.21106",
        "type": "outcome",
        "name": "outcome Created",
        "xml": "<outcome value='Created'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1131.5833320617676,
        "y": 366.1149909766391,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "50da061e.3d2a4"
            ]
        ]
    },
    {
        "id": "625ef5e9.0fa304",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1109.583351135254,
        "y": 416.1150024207309,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "9d9a6d0b.f63a18"
            ]
        ]
    },
    {
        "id": "9d9a6d0b.f63a18",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VNF is not in appropriate state for activate. Current state is ' + $service-data.vnfs.vnf[$tmp.nidx].vnf-data.vnf-level-oper-status.order-status`\" />",
        "comments": "",
        "x": 1269.0831184387207,
        "y": 419.1150014670566,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "50da061e.3d2a4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1341.889705657959,
        "y": 377.44016626197845,
        "z": "978d88fe.49f858",
        "wires": [
            []
        ]
    },
    {
        "id": "7a49c1a1.74cca",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 726,
        "y": 699,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "19a0d774.67fb01",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id\n         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id \n         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">",
        "comments": "",
        "outputs": 1,
        "x": 737,
        "y": 749,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "ef923a7d.6928a8",
                "981c314b.31ecb8",
                "65818037.104038"
            ]
        ]
    },
    {
        "id": "ef923a7d.6928a8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 953,
        "y": 714,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "c4da4ce2.e86fd"
            ]
        ]
    },
    {
        "id": "981c314b.31ecb8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 962.490966796875,
        "y": 756.5740356445312,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "2c51a746.8529b8"
            ]
        ]
    },
    {
        "id": "65818037.104038",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 951,
        "y": 803,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "11f3085c.6c3b58"
            ]
        ]
    },
    {
        "id": "2c51a746.8529b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1116.0623779296875,
        "y": 759.8597717285156,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "11f3085c.6c3b58",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1120,
        "y": 804,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "c4da4ce2.e86fd",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for index='rel-index' start='0' end='`$tmp.aai.service-instance.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1150,
        "y": 710,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "eb26c03f.cde3a"
            ]
        ]
    },
    {
        "id": "eb26c03f.cde3a",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.service-instance.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1373.33349609375,
        "y": 709.9999389648438,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "b65d7d38.16fc68"
            ]
        ]
    },
    {
        "id": "b65d7d38.16fc68",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1574.0001335144043,
        "y": 711.000020980835,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "fda5561b.cca698"
            ]
        ]
    },
    {
        "id": "edc6ee23.1891a",
        "type": "save",
        "name": "get connectivityA from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[0].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivityA\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2179,
        "y": 599,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "81d6e319.abfd8",
                "313c36d7.969d3a",
                "3d5cf6f2.953e9a"
            ]
        ]
    },
    {
        "id": "fda5561b.cca698",
        "type": "switchNode",
        "name": "switch $rel-index == 0",
        "xml": "<switch test=\"`$rel-index == 0`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1762,
        "y": 709,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "44bd1b.3cc782e4",
                "f85fb605.a76398"
            ]
        ]
    },
    {
        "id": "44bd1b.3cc782e4",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1985,
        "y": 599,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "edc6ee23.1891a"
            ]
        ]
    },
    {
        "id": "f85fb605.a76398",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1971,
        "y": 1156,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "7b60b790.bc4c4"
            ]
        ]
    },
    {
        "id": "7b60b790.bc4c4",
        "type": "save",
        "name": "get connectivityB from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[1].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivityB\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2167,
        "y": 1156,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "8b96b70e.2f635",
                "20f5c9d8.832b4e",
                "f513c25.b78554"
            ]
        ]
    },
    {
        "id": "81d6e319.abfd8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2385,
        "y": 559,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "98b1c0b9.f7f4b"
            ]
        ]
    },
    {
        "id": "313c36d7.969d3a",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2385.490966796875,
        "y": 604.5740356445312,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "d4d990d4.f7b0a8"
            ]
        ]
    },
    {
        "id": "3d5cf6f2.953e9a",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2383,
        "y": 648,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "97be5e5a.798428"
            ]
        ]
    },
    {
        "id": "98b1c0b9.f7f4b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2557.66650390625,
        "y": 558,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "2d415746.a7be9",
                "96d25665.97a75",
                "2f11d14a.7d5856",
                "d0c66bee.225358"
            ]
        ]
    },
    {
        "id": "d4d990d4.f7b0a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2548.0623779296875,
        "y": 604.8597717285156,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "97be5e5a.798428",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2552,
        "y": 649,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "8b96b70e.2f635",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2387,
        "y": 1127,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "aff8819.10cbe8"
            ]
        ]
    },
    {
        "id": "20f5c9d8.832b4e",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2388.490966796875,
        "y": 1172.5740356445312,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "cb55df0.f8980a"
            ]
        ]
    },
    {
        "id": "f513c25.b78554",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2385,
        "y": 1218,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "fd8e37a.cf27348"
            ]
        ]
    },
    {
        "id": "aff8819.10cbe8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2559.66650390625,
        "y": 1128,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "490cf25b.6f8bbc",
                "7192c89b.9fa8a",
                "83e10369.9e2a48",
                "8632824a.a7d1a"
            ]
        ]
    },
    {
        "id": "cb55df0.f8980a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2550.0623779296875,
        "y": 1174.8597717285156,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "fd8e37a.cf27348",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2554,
        "y": 1219,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "2d415746.a7be9",
        "type": "save",
        "name": "get vpn-binding-A from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivityA.relationship-list.relationship[0].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-bindingA\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2782,
        "y": 556,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "2054e000.51325",
                "24cb3e35.5919ba",
                "49ca8d9.cac6774"
            ]
        ]
    },
    {
        "id": "490cf25b.6f8bbc",
        "type": "save",
        "name": "get vpn-binding-B from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivityB.relationship-list.relationship[0].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-bindingB\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2786,
        "y": 1126,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "9697ed36.e16ad8",
                "1b825f20.68c389",
                "214845f.325e5ba"
            ]
        ]
    },
    {
        "id": "8505e692.6e58e8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3166,
        "y": 556,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "1e245d3c.a778db",
                "f09e2868.9a86c8"
            ]
        ]
    },
    {
        "id": "1e245d3c.a778db",
        "type": "set",
        "name": "set attachment_param for OTN A",
        "xml": "<set>\n<parameter name='ietf-te_te.tunnels.tunnel[0].source' value='`$tmp.aai.vpn-bindingA.access-node-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].destination' value='`$tmp.aai.vpn-bindingA.dst-access-node-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].dst-ttp-id' value='`$tmp.aai.vpn-bindingA.dst-access-ltp-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].ietf-otn-tunnel_dst-tpn' value='' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].te-topology-identifier.client-id' value='`$tmp.aai.vpn-bindingA.access-client-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].te-topology-identifier.provider-id' value='`$tmp.aai.vpn-bindingA.access-provider-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].te-topology-identifier.topology-id' value='`$tmp.aai.vpn-bindingA.access-topology-id`' />\n\n<parameter name='ietf-te_te.tunnels.tunnel[1].source' value='`$tmp.aai.vpn-bindingA.access-node-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].destination' value='`$tmp.aai.vpn-bindingA.dst-access-node-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].name' value='tptunnel-22' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].dependency-tunnels.dependency-tunnel[0].name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n\n<parameter name='ietf-te_te.tunnels.tunnel[1].te-topology-identifier.client-id' value='`$tmp.aai.vpn-bindingA.access-client-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].te-topology-identifier.provider-id' value='`$tmp.aai.vpn-bindingA.access-provider-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].te-topology-identifier.topology-id' value='`$tmp.aai.vpn-bindingA.access-topology-id`' />\n\n",
        "comments": "",
        "x": 3402,
        "y": 555,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "2054e000.51325",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2993,
        "y": 558,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "8505e692.6e58e8"
            ]
        ]
    },
    {
        "id": "24cb3e35.5919ba",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2993.490966796875,
        "y": 603.5740356445312,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "7b7e2f47.0a22b"
            ]
        ]
    },
    {
        "id": "49ca8d9.cac6774",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2991,
        "y": 647,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "f869989c.799108"
            ]
        ]
    },
    {
        "id": "f869989c.799108",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3158,
        "y": 646,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "7b7e2f47.0a22b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3156.0623779296875,
        "y": 603.8597717285156,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "9697ed36.e16ad8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2993,
        "y": 1129,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "d0988988.8d0a18"
            ]
        ]
    },
    {
        "id": "1b825f20.68c389",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2993.490966796875,
        "y": 1174.5740356445312,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "875a2548.0cfdc8"
            ]
        ]
    },
    {
        "id": "214845f.325e5ba",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2991,
        "y": 1218,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "5743b059.d8fee"
            ]
        ]
    },
    {
        "id": "5743b059.d8fee",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3160,
        "y": 1219,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "875a2548.0cfdc8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3156.0623779296875,
        "y": 1174.8597717285156,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "d0988988.8d0a18",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3162,
        "y": 1129,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "7dda745d.4071a4",
                "6468b39.c45bd4c"
            ]
        ]
    },
    {
        "id": "7dda745d.4071a4",
        "type": "set",
        "name": "set attachment_param for OTN B",
        "xml": "<set>\n<parameter name='ietf-te_te.tunnels.tunnel[0].source' value='`$tmp.aai.vpn-bindingB.access-node-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].destination' value='`$tmp.aai.vpn-bindingB.dst-access-node-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].dst-ttp-id' value='`$tmp.aai.vpn-bindingB.dst-access-ltp-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].ietf-otn-tunnel_dst-tpn' value='' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].te-topology-identifier.client-id' value='`$tmp.aai.vpn-bindingB.access-client-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].te-topology-identifier.provider-id' value='`$tmp.aai.vpn-bindingB.access-provider-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].te-topology-identifier.topology-id' value='`$tmp.aai.vpn-bindingB.access-topology-id`' />\n\n<parameter name='ietf-te_te.tunnels.tunnel[1].source' value='`$tmp.aai.vpn-bindingB.access-node-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].destination' value='`$tmp.aai.vpn-bindingB.dst-access-node-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].name' value='tptunnel-22' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].dependency-tunnels.dependency-tunnel[0].name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n\n<parameter name='ietf-te_te.tunnels.tunnel[1].te-topology-identifier.client-id' value='`$tmp.aai.vpn-bindingB.access-client-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].te-topology-identifier.provider-id' value='`$tmp.aai.vpn-bindingB.access-provider-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].te-topology-identifier.topology-id' value='`$tmp.aai.vpn-bindingB.access-topology-id`' />\n\n",
        "comments": "",
        "x": 3398,
        "y": 1128,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "f09e2868.9a86c8",
        "type": "execute",
        "name": "execute RestApiCallNode Create OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-otn-tunnel-service.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<!--<parameter name='dirPath' value=\"/opt/sdnc/restapi/yang\" />-->\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3480,
        "y": 601,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "a8d618e8.7c53c8",
                "84fddcaa.8b02a"
            ]
        ]
    },
    {
        "id": "a8d618e8.7c53c8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3790.5,
        "y": 568,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "6eacb8a7.7aa3d"
            ]
        ]
    },
    {
        "id": "84fddcaa.8b02a",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3805.5,
        "y": 633,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "b82bd962.cbba2"
            ]
        ]
    },
    {
        "id": "6eacb8a7.7aa3d",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
        "comments": "",
        "x": 3974.5,
        "y": 564,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "b82bd962.cbba2",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4000,
        "y": 626,
        "z": "978d88fe.49f858",
        "wires": [
            []
        ]
    },
    {
        "id": "74c1bd3a.398664",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3775,
        "y": 1150,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "fc791248.fc4648"
            ]
        ]
    },
    {
        "id": "fdc0c54.10c51b8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3790,
        "y": 1215,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "16f26dc2.3147e2"
            ]
        ]
    },
    {
        "id": "fc791248.fc4648",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
        "comments": "",
        "x": 3959,
        "y": 1146,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "16f26dc2.3147e2",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3984.5,
        "y": 1208,
        "z": "978d88fe.49f858",
        "wires": [
            []
        ]
    },
    {
        "id": "6468b39.c45bd4c",
        "type": "execute",
        "name": "execute RestApiCallNode Create OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-otn-tunnel-service.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<!--<parameter name='dirPath' value=\"/opt/sdnc/restapi/yang\" />-->\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3464.5,
        "y": 1183,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "74c1bd3a.398664",
                "fdc0c54.10c51b8"
            ]
        ]
    },
    {
        "id": "2f11d14a.7d5856",
        "type": "set",
        "name": "set sotn_value",
        "xml": "<set>\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].access-provider-id' value='`$oof.vpn.access-provider-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].access-client-id' value='`$oof.vpn.access-client-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].access-topology-id' value='`$oof.vpn.access-topology-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].access-ltp-id' value='`$oof.vpn.dst-access-ltp-id`' />\n\n<parameter name='ietf-eth-tran-service_etht-svc.globals.etht-svc-bandwidth-profiles[0].bandwidth-profile-type' value='ietf-eth-tran-types:mef-10-bwp' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-type' value='ietf-eth-tran-types:p2p-svc' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].admin-status' value='ietf-te-types:tunnel-state-up' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].access-port-id' value='0' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].service-classification-type' value='ietf-eth-tran-types:port-classification' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].access-port-id' value='1' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].service-classification-type' value='ietf-eth-tran-types:port-classification' />",
        "comments": "",
        "x": 2766.5,
        "y": 898,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "d0c66bee.225358",
        "type": "execute",
        "name": "execute RestApiCallNode Create ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 2920.5,
        "y": 946,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "3db41fa8.f38878",
                "fbb2729e.49853"
            ]
        ]
    },
    {
        "id": "3db41fa8.f38878",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3266,
        "y": 927,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "f346270d.843368"
            ]
        ]
    },
    {
        "id": "fbb2729e.49853",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3270,
        "y": 967,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "c716fb9b.f3ffc"
            ]
        ]
    },
    {
        "id": "f346270d.843368",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
        "comments": "",
        "x": 3424,
        "y": 927,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "c716fb9b.f3ffc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3427.5,
        "y": 967,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "3124f6f9.b8bd1a",
                "856ae03f.786118"
            ]
        ]
    },
    {
        "id": "4c34ee00.d0d39",
        "type": "comment",
        "name": "TODO: FIXME:",
        "info": "put proper values based on connectivity resource retrieved from AAI",
        "comments": "",
        "x": 2764,
        "y": 854,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "96d25665.97a75",
        "type": "get-resource",
        "name": "get-resource esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $prop.sdncRestApi.thirdpartySdnc.id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2816,
        "y": 780,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "4a3c4a39.62e724",
                "e52cd6a7.6aeb28",
                "bb40af56.1cbe7"
            ]
        ]
    },
    {
        "id": "4a3c4a39.62e724",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3062,
        "y": 740,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "9e28f8d9.f64138"
            ]
        ]
    },
    {
        "id": "e52cd6a7.6aeb28",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3066,
        "y": 780,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "916c7538.648ed"
            ]
        ]
    },
    {
        "id": "bb40af56.1cbe7",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3058,
        "y": 820,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "a678576a.20b77"
            ]
        ]
    },
    {
        "id": "a678576a.20b77",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 3216,
        "y": 820,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "916c7538.648ed",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 3216,
        "y": 780,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "9e28f8d9.f64138",
        "type": "set",
        "name": "set controller data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 3232,
        "y": 740,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "b0af8ca6.269818",
        "type": "comment",
        "name": "Get controller info and send request",
        "info": "",
        "comments": "",
        "x": 2824,
        "y": 740,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "83e10369.9e2a48",
        "type": "set",
        "name": "set sotn_value",
        "xml": "<set>\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].access-provider-id' value='`$oof.vpn.access-provider-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].access-client-id' value='`$oof.vpn.access-client-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].access-topology-id' value='`$oof.vpn.access-topology-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].access-ltp-id' value='`$oof.vpn.dst-access-ltp-id`' />\n\n<parameter name='ietf-eth-tran-service_etht-svc.globals.etht-svc-bandwidth-profiles[0].bandwidth-profile-type' value='ietf-eth-tran-types:mef-10-bwp' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-type' value='ietf-eth-tran-types:p2p-svc' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].admin-status' value='ietf-te-types:tunnel-state-up' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].access-port-id' value='0' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].service-classification-type' value='ietf-eth-tran-types:port-classification' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].access-port-id' value='1' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].service-classification-type' value='ietf-eth-tran-types:port-classification' />",
        "comments": "",
        "x": 2752,
        "y": 1454,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "8632824a.a7d1a",
        "type": "execute",
        "name": "execute RestApiCallNode Create ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 2906,
        "y": 1502,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "51ac9234.46b414",
                "a5f17af5.5d803"
            ]
        ]
    },
    {
        "id": "51ac9234.46b414",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3251.5,
        "y": 1483,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "6f72d542.94964c"
            ]
        ]
    },
    {
        "id": "a5f17af5.5d803",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3255.5,
        "y": 1523,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "2dab9f7d.db59d8"
            ]
        ]
    },
    {
        "id": "6f72d542.94964c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
        "comments": "",
        "x": 3409.5,
        "y": 1483,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "2dab9f7d.db59d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3413,
        "y": 1523,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "a1391891.c310f",
                "ccc1b1df.33721"
            ]
        ]
    },
    {
        "id": "5d06869f.f8bcb8",
        "type": "comment",
        "name": "TODO: FIXME:",
        "info": "put proper values based on connectivity resource retrieved from AAI",
        "comments": "",
        "x": 2749.5,
        "y": 1410,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "7192c89b.9fa8a",
        "type": "get-resource",
        "name": "get-resource esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $prop.sdncRestApi.thirdpartySdnc.id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2801.5,
        "y": 1336,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "e2e5c437.a11d5",
                "9dfaf98b.e80c9",
                "dcca7d62.830ee8"
            ]
        ]
    },
    {
        "id": "e2e5c437.a11d5",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3047.5,
        "y": 1296,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "427eefc5.61bc"
            ]
        ]
    },
    {
        "id": "9dfaf98b.e80c9",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3051.5,
        "y": 1336,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "8ac5fa96.75d4b"
            ]
        ]
    },
    {
        "id": "dcca7d62.830ee8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3043.5,
        "y": 1376,
        "z": "978d88fe.49f858",
        "wires": [
            [
                "39cf0825.d43ae"
            ]
        ]
    },
    {
        "id": "39cf0825.d43ae",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 3201.5,
        "y": 1376,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "8ac5fa96.75d4b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 3201.5,
        "y": 1336,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "427eefc5.61bc",
        "type": "set",
        "name": "set controller data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 3217.5,
        "y": 1296,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "74572637.f29d7",
        "type": "comment",
        "name": "Get controller info and send request",
        "info": "",
        "comments": "",
        "x": 2809.5,
        "y": 1296,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "135b0ed7.2faa91",
        "type": "comment",
        "name": "TODO: FIXME:",
        "info": "How to know which domain's (A or B) controller is bein retrieved?",
        "comments": "",
        "x": 2744,
        "y": 1256,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "a58ac83b.b037d",
        "type": "comment",
        "name": "TODO: FIXME:",
        "info": "How to know which domain's (A or B) controller is bein retrieved?",
        "comments": "",
        "x": 2756,
        "y": 700,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "3124f6f9.b8bd1a",
        "type": "save",
        "name": "update vpn-binding A resource (aka. OTN domainA) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.vpnName' >\n<parameter name='vpn-id' value='`$tmp.vpnName`' />\n<parameter name='vpn-name' value='`$tmp.vpnName`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 3756,
        "y": 967,
        "z": "978d88fe.49f858",
        "wires": [
            []
        ]
    },
    {
        "id": "554a4766.c457a",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "use proper vpn-binding id and connectivity id\n\nAlso, does CCSDK support \"update\" operation for vpn-binding and connectivity?",
        "comments": "",
        "x": 3620,
        "y": 926,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "a1391891.c310f",
        "type": "save",
        "name": "update vpn-binding B resource (aka. OTN domainB) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.vpnName' >\n<parameter name='vpn-id' value='`$tmp.vpnName`' />\n<parameter name='vpn-name' value='`$tmp.vpnName`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 3753,
        "y": 1522,
        "z": "978d88fe.49f858",
        "wires": [
            []
        ]
    },
    {
        "id": "90d3682d.e54348",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "use proper vpn-binding id and connectivity\n\nAlso, does CCSDK support \"update\" operation for vpn-binding and connectivity?",
        "comments": "",
        "x": 3611,
        "y": 1480,
        "z": "978d88fe.49f858",
        "wires": []
    },
    {
        "id": "856ae03f.786118",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainA-uuid`' />\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 3683,
        "y": 1013,
        "z": "978d88fe.49f858",
        "wires": [
            []
        ]
    },
    {
        "id": "ccc1b1df.33721",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainA-uuid`' />\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 3682,
        "y": 1571,
        "z": "978d88fe.49f858",
        "wires": [
            []
        ]
    }
]