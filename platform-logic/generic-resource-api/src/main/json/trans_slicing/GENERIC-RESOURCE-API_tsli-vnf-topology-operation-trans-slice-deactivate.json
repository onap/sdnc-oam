[
    {
        "id": "fed3eb51.781ac8",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 131,
        "y": 81,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "d2a4ea36.881b68"
            ]
        ]
    },
    {
        "id": "d2a4ea36.881b68",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 262.2856903076172,
        "y": 130.23810863494873,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "7b1236d6.83c2c"
            ]
        ]
    },
    {
        "id": "7b1236d6.83c2c",
        "type": "method",
        "name": "method tsli-vnf-topology-operation-trans-slice-deactivate",
        "xml": "<method rpc='tsli-vnf-topology-operation-trans-slice-deactivate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 265.4286193847656,
        "y": 215.00003242492676,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "8228a949.234f38"
            ]
        ]
    },
    {
        "id": "8228a949.234f38",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 415.238037109375,
        "y": 344.6666564941406,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "71825e05.a6c0d",
                "341b32a3.25428e",
                "bebaba0f.3b8cb",
                "bc03b14a.7399d",
                "f7d40c3f.b744c",
                "1a6e5da0.98eb02",
                "e5c8285b.2b695"
            ]
        ]
    },
    {
        "id": "71825e05.a6c0d",
        "type": "set",
        "name": "set vnf-level-oper-status to Active",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.order-status' value='Active' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.last-rpc-action' value='`$vnf-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.last-action' value='`$vnf-topology-operation-input.request-information.request-action`' />",
        "comments": "",
        "x": 758.3849563598633,
        "y": 581.6705458434299,
        "z": "fdc94a5e.7c86f8",
        "wires": []
    },
    {
        "id": "341b32a3.25428e",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 680.5716552734375,
        "y": 1028.59716796875,
        "z": "fdc94a5e.7c86f8",
        "wires": []
    },
    {
        "id": "bebaba0f.3b8cb",
        "type": "set",
        "name": "set vnf-index and vnf-object-path",
        "xml": "<set>\n<parameter name='vnfId' value='`$vnf-topology-operation-input.vnf-information.vnf-id`' />\n<parameter name=\"vnf-object-path\" value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/vnfs/vnf/'  + $vnf-topology-operation-input.vnf-information.vnf-id  + '/vnf-data/'` \" />",
        "comments": "",
        "x": 764.5716018676758,
        "y": 529.5968001158908,
        "z": "fdc94a5e.7c86f8",
        "wires": []
    },
    {
        "id": "bc03b14a.7399d",
        "type": "switchNode",
        "name": "switch service-data.vnfs.vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 773,
        "y": 284,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "dc7c2f8d.dd452",
                "77b6528c.021fa4",
                "6bffd68.1a47ca8"
            ]
        ]
    },
    {
        "id": "6bffd68.1a47ca8",
        "type": "outcome",
        "name": "0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1165.968994140625,
        "y": 249.96875,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "ab89f283.c7e1c8"
            ]
        ]
    },
    {
        "id": "ab89f283.c7e1c8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 1320.7778816223145,
        "y": 268.889018535614,
        "z": "fdc94a5e.7c86f8",
        "wires": []
    },
    {
        "id": "dc7c2f8d.dd452",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1159.0001335144043,
        "y": 289.00007152557373,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "ab89f283.c7e1c8"
            ]
        ]
    },
    {
        "id": "77b6528c.021fa4",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1152.0005416870117,
        "y": 322.000075340271,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "d35fa9db.6215b"
            ]
        ]
    },
    {
        "id": "d35fa9db.6215b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1299.2700843811035,
        "y": 322.5547204017639,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "1750e27f.0f2bd6"
            ]
        ]
    },
    {
        "id": "1750e27f.0f2bd6",
        "type": "for",
        "name": "for vidx..service-data.vnfs.vnf_length[]",
        "xml": "<for index='vnfidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1545.2862014770508,
        "y": 329.42864084243774,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "173486ce.cc9319"
            ]
        ]
    },
    {
        "id": "173486ce.cc9319",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1764.6358337402344,
        "y": 328.96872091293335,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "41e39532.27da3c"
            ]
        ]
    },
    {
        "id": "41e39532.27da3c",
        "type": "switchNode",
        "name": "switch vnfid found",
        "xml": "<!--<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-id == $vnf-topology-operation-input.vnf-information.vnf-id`\">-->\n<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.service-information.service-instance-id == $vnf-topology-operation-input.service-information.service-instance-id`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1918.715431213379,
        "y": 328.67880296707153,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "437d4e0e.844a3"
            ]
        ]
    },
    {
        "id": "437d4e0e.844a3",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2129.6675758361816,
        "y": 331.571494102478,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "6bd96873.4be66"
            ]
        ]
    },
    {
        "id": "6bd96873.4be66",
        "type": "set",
        "name": "set tmp.vidx and ctx.vnf-data",
        "xml": "<set>\n<parameter name='tmp.vidx' value='`$vnfidx`' />\n<parameter name='ctx.vnf-data.' value='`$service-data.vnfs.vnf[$vnfidx].`' />\n",
        "comments": "",
        "x": 2339.199951171875,
        "y": 333.32159423828125,
        "z": "fdc94a5e.7c86f8",
        "wires": []
    },
    {
        "id": "2b6f8b88.950764",
        "type": "save",
        "name": "update AnAI - vnf-instance.orchestration-status",
        "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"generic-vnf\"   \n\t\tkey=\"generic-vnf.vnf-id = $vnfId\" >\n<parameter name=\"orchestration-status\" value=\"Active\" />\n<parameter name=\"vnf-type\" value=\"some vnf-type\" />",
        "comments": "",
        "outputs": 1,
        "x": 783.9999618530273,
        "y": 648.0103714736179,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            []
        ]
    },
    {
        "id": "f7d40c3f.b744c",
        "type": "set",
        "name": "copy input data to service data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.sdnc-request-header.' value='$vnf-topology-operation-input.sdnc-request-header.' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.request-information.' value='$vnf-topology-operation-input.request-information.' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.' value='$vnf-topology-operation-input.service-information.' />",
        "comments": "",
        "x": 763.0000762939453,
        "y": 479.01033284980804,
        "z": "fdc94a5e.7c86f8",
        "wires": []
    },
    {
        "id": "fa82c3fd.e495a",
        "type": "switchNode",
        "name": "switch vnf-level-oper-status",
        "xml": "<switch test='`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.order-status`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 749.7499389648438,
        "y": 384.00390270072967,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "e06cb359.8acf78",
                "e7afd811.2575d8"
            ]
        ]
    },
    {
        "id": "e06cb359.8acf78",
        "type": "outcome",
        "name": "outcome Created",
        "xml": "<outcome value='Created'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1129.5833320617676,
        "y": 389.1149909766391,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "3d60713f.b774ce"
            ]
        ]
    },
    {
        "id": "e7afd811.2575d8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1107.583351135254,
        "y": 439.1150024207309,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "1e07382d.9fbb18"
            ]
        ]
    },
    {
        "id": "1e07382d.9fbb18",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VNF is not in appropriate state for activate. Current state is ' + $service-data.vnfs.vnf[$tmp.nidx].vnf-data.vnf-level-oper-status.order-status`\" />",
        "comments": "",
        "x": 1267.0831184387207,
        "y": 442.1150014670566,
        "z": "fdc94a5e.7c86f8",
        "wires": []
    },
    {
        "id": "3d60713f.b774ce",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1339.889705657959,
        "y": 400.44016626197845,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            []
        ]
    },
    {
        "id": "f743b3f1.72f9f",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 712,
        "y": 703,
        "z": "fdc94a5e.7c86f8",
        "wires": []
    },
    {
        "id": "1a6e5da0.98eb02",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.service-instance-id\n         AND customer.global-customer-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.global-customer-id \n         AND service-subscription.service-type = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--vnf-topology-operation-input.service-information.service-instance-id-->",
        "comments": "",
        "outputs": 1,
        "x": 732,
        "y": 799,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "2976ce78.f07a42",
                "de3912b8.6d67e",
                "77b5fc18.2082a4"
            ]
        ]
    },
    {
        "id": "2976ce78.f07a42",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 951,
        "y": 737,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "7ee13e19.7c1348"
            ]
        ]
    },
    {
        "id": "de3912b8.6d67e",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 960.490966796875,
        "y": 779.5740356445312,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "4a305009.90c32"
            ]
        ]
    },
    {
        "id": "77b5fc18.2082a4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 949,
        "y": 826,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "cd4775e4.2da96"
            ]
        ]
    },
    {
        "id": "4a305009.90c32",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1114.0623779296875,
        "y": 782.8597717285156,
        "z": "fdc94a5e.7c86f8",
        "wires": []
    },
    {
        "id": "cd4775e4.2da96",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1118,
        "y": 827,
        "z": "fdc94a5e.7c86f8",
        "wires": []
    },
    {
        "id": "7ee13e19.7c1348",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for index='rel-index' start='0' end='`$tmp.aai.service-instance.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1148,
        "y": 733,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "bc03982b.15ba78"
            ]
        ]
    },
    {
        "id": "bc03982b.15ba78",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.service-instance.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1371.33349609375,
        "y": 732.9999389648438,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "aca4b74a.cb3118"
            ]
        ]
    },
    {
        "id": "aca4b74a.cb3118",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1572.0001335144043,
        "y": 734.000020980835,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "2544f612.eeddca"
            ]
        ]
    },
    {
        "id": "e5c8285b.2b695",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 698,
        "y": 747,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            []
        ]
    },
    {
        "id": "2544f612.eeddca",
        "type": "save",
        "name": "get connectivity from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1810,
        "y": 736,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "75c7fde8.1d4a84",
                "563ee44e.bd096c",
                "bc425b5.1b1fba8"
            ]
        ]
    },
    {
        "id": "75c7fde8.1d4a84",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2018,
        "y": 700,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "e6a3b8f2.9e7b38"
            ]
        ]
    },
    {
        "id": "563ee44e.bd096c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2018.490966796875,
        "y": 745.5740356445312,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "ad15182e.154a8"
            ]
        ]
    },
    {
        "id": "bc425b5.1b1fba8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2016,
        "y": 789,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "8719a717.3cd9f8"
            ]
        ]
    },
    {
        "id": "ad15182e.154a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2181.0623779296875,
        "y": 745.8597717285156,
        "z": "fdc94a5e.7c86f8",
        "wires": []
    },
    {
        "id": "8719a717.3cd9f8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2185,
        "y": 790,
        "z": "fdc94a5e.7c86f8",
        "wires": []
    },
    {
        "id": "c776a79f.7f2db",
        "type": "save",
        "name": "get vpn-binding from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2491,
        "y": 789,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "b403a898.9fbc18",
                "5d1a47a8.0dfe7",
                "f3733135.d8a078"
            ]
        ]
    },
    {
        "id": "c765be65.0f488",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2875,
        "y": 789,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "e9922fb9.764098",
                "eef29d57.4c4228",
                "952ea8f1.7bda"
            ]
        ]
    },
    {
        "id": "b403a898.9fbc18",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2702,
        "y": 791,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "c765be65.0f488"
            ]
        ]
    },
    {
        "id": "5d1a47a8.0dfe7",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2702.490966796875,
        "y": 836.5740356445312,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "1295f1fa.69cac6"
            ]
        ]
    },
    {
        "id": "f3733135.d8a078",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2700,
        "y": 880,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "6ac7a77b.f5232"
            ]
        ]
    },
    {
        "id": "6ac7a77b.f5232",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2867,
        "y": 879,
        "z": "fdc94a5e.7c86f8",
        "wires": []
    },
    {
        "id": "1295f1fa.69cac6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2865.0623779296875,
        "y": 836.8597717285156,
        "z": "fdc94a5e.7c86f8",
        "wires": []
    },
    {
        "id": "e6a3b8f2.9e7b38",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2219,
        "y": 695,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "d8c7aa6c.9474d"
            ]
        ]
    },
    {
        "id": "d8c7aa6c.9474d",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2424,
        "y": 695,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "6afd9b1f.24ad3c"
            ]
        ]
    },
    {
        "id": "6afd9b1f.24ad3c",
        "type": "outcome",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2590,
        "y": 695,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "489d615f.74d2b8"
            ]
        ]
    },
    {
        "id": "489d615f.74d2b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2753,
        "y": 695,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "c776a79f.7f2db"
            ]
        ]
    },
    {
        "id": "e9922fb9.764098",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-binding.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-binding.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-binding.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-binding.src-access-node-id`\" />\n",
        "comments": "",
        "x": 3090,
        "y": 499,
        "z": "fdc94a5e.7c86f8",
        "wires": []
    },
    {
        "id": "eef29d57.4c4228",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3116,
        "y": 616,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "e1caf9b0.f16ef",
                "8ba822ff.3c855",
                "3e54396e.89bb66"
            ]
        ]
    },
    {
        "id": "e1caf9b0.f16ef",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3311.5001220703125,
        "y": 568,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "12b4a6a1.bdd529"
            ]
        ]
    },
    {
        "id": "8ba822ff.3c855",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3303.5001220703125,
        "y": 623,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "6aa3fcb.c3a6c84"
            ]
        ]
    },
    {
        "id": "12b4a6a1.bdd529",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3455.8824462890625,
        "y": 567.6556701660156,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "8559d2a.befa2b"
            ]
        ]
    },
    {
        "id": "8559d2a.befa2b",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3640,
        "y": 566,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "a2c1ad39.50b17"
            ]
        ]
    },
    {
        "id": "a2c1ad39.50b17",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3835,
        "y": 566,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "f7ee255a.8640e"
            ]
        ]
    },
    {
        "id": "3e54396e.89bb66",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3308.5001220703125,
        "y": 680,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "ff13ab9d.2deb7"
            ]
        ]
    },
    {
        "id": "ff13ab9d.2deb7",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3460.5001220703125,
        "y": 681,
        "z": "fdc94a5e.7c86f8",
        "wires": []
    },
    {
        "id": "6aa3fcb.c3a6c84",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3471.5001220703125,
        "y": 624,
        "z": "fdc94a5e.7c86f8",
        "wires": []
    },
    {
        "id": "d85cad49.e7fe3",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 4423,
        "y": 583,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "5b32aba.7fc39d4",
                "43d71291.c727fc",
                "6b05861c.156668"
            ]
        ]
    },
    {
        "id": "98badb93.a08c9",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4217,
        "y": 570,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "48966cee.55dba4",
                "d85cad49.e7fe3",
                "ee878ee.4f8847"
            ]
        ]
    },
    {
        "id": "48966cee.55dba4",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4453,
        "y": 531,
        "z": "fdc94a5e.7c86f8",
        "wires": []
    },
    {
        "id": "5b32aba.7fc39d4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4633,
        "y": 574,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "20fc8e76.a69222"
            ]
        ]
    },
    {
        "id": "43d71291.c727fc",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4625,
        "y": 629,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "51e97aab.2d7044"
            ]
        ]
    },
    {
        "id": "6b05861c.156668",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4630,
        "y": 686,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "ef0b1a78.fffea8"
            ]
        ]
    },
    {
        "id": "ef0b1a78.fffea8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4782,
        "y": 687,
        "z": "fdc94a5e.7c86f8",
        "wires": []
    },
    {
        "id": "51e97aab.2d7044",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4793,
        "y": 632,
        "z": "fdc94a5e.7c86f8",
        "wires": []
    },
    {
        "id": "20fc8e76.a69222",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4777.38232421875,
        "y": 571.6556701660156,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "a8dfc05f.e2f018"
            ]
        ]
    },
    {
        "id": "f7ee255a.8640e",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4038,
        "y": 570,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "98badb93.a08c9"
            ]
        ]
    },
    {
        "id": "a8dfc05f.e2f018",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 4992,
        "y": 568,
        "z": "fdc94a5e.7c86f8",
        "wires": []
    },
    {
        "id": "ee878ee.4f8847",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4373,
        "y": 647,
        "z": "fdc94a5e.7c86f8",
        "wires": []
    },
    {
        "id": "952ea8f1.7bda",
        "type": "execute",
        "name": "execute RestApiCallNode Delete ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/eth-svc-instances=' + $tmp.aai.connectivity.connectivity-id`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3251,
        "y": 789,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "d9dc02b.5b9308",
                "f01b6c55.209f38"
            ]
        ]
    },
    {
        "id": "d9dc02b.5b9308",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3597.5,
        "y": 782,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "174c3f65.a9f0e1"
            ]
        ]
    },
    {
        "id": "f01b6c55.209f38",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3601.5,
        "y": 822,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "de16161.028de68"
            ]
        ]
    },
    {
        "id": "de16161.028de68",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3759,
        "y": 822,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            [
                "1a3ebd6b.2a7953",
                "30c3e280.4d41f6"
            ]
        ]
    },
    {
        "id": "174c3f65.a9f0e1",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
        "comments": "",
        "x": 3755.5,
        "y": 782,
        "z": "fdc94a5e.7c86f8",
        "wires": []
    },
    {
        "id": "1a3ebd6b.2a7953",
        "type": "save",
        "name": "update vpn-binding A resource (aka. OTN domainA) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-id`' />\n\n<parameter name='operational-status' value='Deactivated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4087.5,
        "y": 822,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            []
        ]
    },
    {
        "id": "30c3e280.4d41f6",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Deactivated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4014.5,
        "y": 868,
        "z": "fdc94a5e.7c86f8",
        "wires": [
            []
        ]
    }
]