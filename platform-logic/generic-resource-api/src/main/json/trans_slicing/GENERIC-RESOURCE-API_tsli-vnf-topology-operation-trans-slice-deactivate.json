[
    {
        "id": "5242e55f.2660bc",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 165,
        "y": 89,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "a94d71b7.2c2048"
            ]
        ]
    },
    {
        "id": "a94d71b7.2c2048",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 296.2856903076172,
        "y": 138.23810863494873,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "aa153b53.66c418"
            ]
        ]
    },
    {
        "id": "aa153b53.66c418",
        "type": "method",
        "name": "method tsli-vnf-topology-operation-trans-slice-deactivate",
        "xml": "<method rpc='tsli-vnf-topology-operation-trans-slice-deactivate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 299.4286193847656,
        "y": 223.00003242492676,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "76657765.41a798"
            ]
        ]
    },
    {
        "id": "76657765.41a798",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 449.238037109375,
        "y": 352.6666564941406,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "72f9366e.3a99d8",
                "680f29c8.59cd3",
                "fc546f71.cb3e18"
            ]
        ]
    },
    {
        "id": "72f9366e.3a99d8",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 723.5716552734375,
        "y": 619.59716796875,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "af064a7b.44da3",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 755,
        "y": 294,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "680f29c8.59cd3",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--vnf-topology-operation-input.service-information.service-instance-id-->",
        "comments": "",
        "outputs": 1,
        "x": 775,
        "y": 390,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "ea580b2d.a2b9d",
                "677c974e.f259e8",
                "13083344.02e945"
            ]
        ]
    },
    {
        "id": "ea580b2d.a2b9d",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 994,
        "y": 328,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "a02387a9.ce5868"
            ]
        ]
    },
    {
        "id": "677c974e.f259e8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1003.490966796875,
        "y": 370.57403564453125,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "620a8e19.7969b8"
            ]
        ]
    },
    {
        "id": "13083344.02e945",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 992,
        "y": 417,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "ee25c1ac.70f318"
            ]
        ]
    },
    {
        "id": "620a8e19.7969b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1157.0623779296875,
        "y": 373.8597717285156,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "ee25c1ac.70f318",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1161,
        "y": 418,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "a02387a9.ce5868",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for index='rel-index' start='0' end='`$tmp.aai.service-instance.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1191,
        "y": 324,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "17bf0063.d6585"
            ]
        ]
    },
    {
        "id": "17bf0063.d6585",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.service-instance.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1414.33349609375,
        "y": 323.99993896484375,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "c3612b80.a84938"
            ]
        ]
    },
    {
        "id": "c3612b80.a84938",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1615.0001335144043,
        "y": 325.00002098083496,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "7884e617.49647"
            ]
        ]
    },
    {
        "id": "fc546f71.cb3e18",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 741,
        "y": 338,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            []
        ]
    },
    {
        "id": "7884e617.49647",
        "type": "save",
        "name": "get connectivity from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1853,
        "y": 327,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "d6ce182b.31b988",
                "aa98166f.4a5d48",
                "6c3ef06d.2c8af8"
            ]
        ]
    },
    {
        "id": "d6ce182b.31b988",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2061,
        "y": 291,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "f5ad0f9a.63e04"
            ]
        ]
    },
    {
        "id": "aa98166f.4a5d48",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2061.490966796875,
        "y": 336.57403564453125,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "8c465bb9.ef2cc8"
            ]
        ]
    },
    {
        "id": "6c3ef06d.2c8af8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2059,
        "y": 380,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "63631469.f6833c"
            ]
        ]
    },
    {
        "id": "8c465bb9.ef2cc8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2224.0623779296875,
        "y": 336.8597717285156,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "63631469.f6833c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2228,
        "y": 381,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "b3f0264f.4b3ab",
        "type": "save",
        "name": "get vpn-binding from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2534,
        "y": 380,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "b834bb7a.d792e",
                "1e7aae42.a3c8e2",
                "2a5354ed.3760dc"
            ]
        ]
    },
    {
        "id": "86694c65.1bab48",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2918,
        "y": 380,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "a6c81dc0.f9e978",
                "23f1ef20.aa22c8",
                "d80ddf6.5239ba",
                "a14e9d29.27087"
            ]
        ]
    },
    {
        "id": "b834bb7a.d792e",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2745,
        "y": 382,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "86694c65.1bab48"
            ]
        ]
    },
    {
        "id": "1e7aae42.a3c8e2",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2745.490966796875,
        "y": 427.57403564453125,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "6a176f0f.10d98"
            ]
        ]
    },
    {
        "id": "2a5354ed.3760dc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2743,
        "y": 471,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "2cad2870.f6f2f"
            ]
        ]
    },
    {
        "id": "2cad2870.f6f2f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2910,
        "y": 470,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "6a176f0f.10d98",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2908.0623779296875,
        "y": 427.8597717285156,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "f5ad0f9a.63e04",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2262,
        "y": 286,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "1569ccc.fe523b3"
            ]
        ]
    },
    {
        "id": "1569ccc.fe523b3",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2467,
        "y": 286,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "419949a6.57988"
            ]
        ]
    },
    {
        "id": "419949a6.57988",
        "type": "outcome",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2633,
        "y": 286,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "da248b6f.863148"
            ]
        ]
    },
    {
        "id": "da248b6f.863148",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2796,
        "y": 286,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "b3f0264f.4b3ab"
            ]
        ]
    },
    {
        "id": "a6c81dc0.f9e978",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-binding.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-binding.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-binding.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-binding.src-access-node-id`\" />\n",
        "comments": "",
        "x": 3133,
        "y": 90,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "23f1ef20.aa22c8",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3159,
        "y": 207,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "de4bc6aa.088c5",
                "2b53e15d.dd21ae",
                "ae35d78c.86b8"
            ]
        ]
    },
    {
        "id": "de4bc6aa.088c5",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3354.5001220703125,
        "y": 159,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "9db55161.c57488"
            ]
        ]
    },
    {
        "id": "2b53e15d.dd21ae",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3346.5001220703125,
        "y": 214,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "577df12f.4d35a8"
            ]
        ]
    },
    {
        "id": "9db55161.c57488",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3498.8824462890625,
        "y": 158.65567016601562,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "5d329fe.f531fe"
            ]
        ]
    },
    {
        "id": "5d329fe.f531fe",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3683,
        "y": 157,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "b71d5fcd.e9cea"
            ]
        ]
    },
    {
        "id": "b71d5fcd.e9cea",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3878,
        "y": 157,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "e408bf35.72655"
            ]
        ]
    },
    {
        "id": "ae35d78c.86b8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3351.5001220703125,
        "y": 271,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "ee316bbc.ab53b8"
            ]
        ]
    },
    {
        "id": "ee316bbc.ab53b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3503.5001220703125,
        "y": 272,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "577df12f.4d35a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3514.5001220703125,
        "y": 215,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "c9c3e28f.63609",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 4466,
        "y": 174,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "3dd076cd.5c231a",
                "c9f64ae8.35669",
                "7381c16f.b370e"
            ]
        ]
    },
    {
        "id": "e8fac782.8b4fb",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4260,
        "y": 161,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "66c06218.223abc",
                "c9c3e28f.63609",
                "8fb6a8ce.c9f538"
            ]
        ]
    },
    {
        "id": "66c06218.223abc",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4496,
        "y": 122,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "3dd076cd.5c231a",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4676,
        "y": 165,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "ffc56656.084b18"
            ]
        ]
    },
    {
        "id": "c9f64ae8.35669",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4668,
        "y": 220,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "df0df27a.a48ca"
            ]
        ]
    },
    {
        "id": "7381c16f.b370e",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4673,
        "y": 277,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "1cc1a486.bc1f73"
            ]
        ]
    },
    {
        "id": "1cc1a486.bc1f73",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4825,
        "y": 278,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "df0df27a.a48ca",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4836,
        "y": 223,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "ffc56656.084b18",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4820.38232421875,
        "y": 162.65567016601562,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "f9ba3b0e.b3dbd8"
            ]
        ]
    },
    {
        "id": "e408bf35.72655",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4081,
        "y": 161,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "e8fac782.8b4fb"
            ]
        ]
    },
    {
        "id": "f9ba3b0e.b3dbd8",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5035,
        "y": 159,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "8fb6a8ce.c9f538",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4416,
        "y": 238,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "d80ddf6.5239ba",
        "type": "execute",
        "name": "execute RestApiCallNode Delete ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.aai.connectivity.connectivity-id`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3289,
        "y": 602,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "56ef2c2f.bde334",
                "20356ae6.118a76"
            ]
        ]
    },
    {
        "id": "56ef2c2f.bde334",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3635.5,
        "y": 595,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "45e55581.afe784"
            ]
        ]
    },
    {
        "id": "20356ae6.118a76",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3639.5,
        "y": 635,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "b4e6443a.f1c248"
            ]
        ]
    },
    {
        "id": "b4e6443a.f1c248",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3797,
        "y": 635,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "f2316450.62431",
                "6c3e1e17.47ccd8"
            ]
        ]
    },
    {
        "id": "45e55581.afe784",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 3793.5,
        "y": 595,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "f2316450.62431",
        "type": "save",
        "name": "update vpn-binding A resource (aka. OTN domainA) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-id`' />\n\n<parameter name='operational-status' value='Deactivated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4125.5,
        "y": 635,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            []
        ]
    },
    {
        "id": "6c3e1e17.47ccd8",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Deactivated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4052.5,
        "y": 681,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            []
        ]
    },
    {
        "id": "a14e9d29.27087",
        "type": "execute",
        "name": "execute RestApiCallNode Delete OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-otn-src-domain-creation.templatefile`\" />-->\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-te:te/tunnels/tunnel=' + $tmp.aai.vpn-binding.vpn-id`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3262,
        "y": 474,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "692cf34e.ccecdc",
                "64e95b5b.03211c"
            ]
        ]
    },
    {
        "id": "692cf34e.ccecdc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3594.5,
        "y": 444,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "8f4d555e.2bf24"
            ]
        ]
    },
    {
        "id": "64e95b5b.03211c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3599.5,
        "y": 509,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "deb2a97d.a041c8"
            ]
        ]
    },
    {
        "id": "8f4d555e.2bf24",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 3770.5,
        "y": 444,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "deb2a97d.a041c8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3766,
        "y": 509,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            []
        ]
    }
]