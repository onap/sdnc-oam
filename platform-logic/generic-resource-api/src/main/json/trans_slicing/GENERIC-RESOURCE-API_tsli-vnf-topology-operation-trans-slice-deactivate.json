[
    {
        "id": "9eb0ec9b.ca633",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 136,
        "y": 74,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "a6f9d5f0.04d6"
            ]
        ]
    },
    {
        "id": "a6f9d5f0.04d6",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 267.2856903076172,
        "y": 123.23810863494873,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "3b0030c5.3e837"
            ]
        ]
    },
    {
        "id": "3b0030c5.3e837",
        "type": "method",
        "name": "method tsli-vnf-topology-operation-trans-slice-deactivate",
        "xml": "<method rpc='tsli-vnf-topology-operation-trans-slice-deactivate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 270.4286193847656,
        "y": 208.00003242492676,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "4b63b8a8.77bb4"
            ]
        ]
    },
    {
        "id": "4b63b8a8.77bb4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 420.238037109375,
        "y": 337.6666564941406,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "33834047.03c2f8",
                "eaadc174.02e71",
                "ce0777fc.b60f2"
            ]
        ]
    },
    {
        "id": "33834047.03c2f8",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 694.5716552734375,
        "y": 604.59716796875,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "39c1d7dd.5e2018",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 726,
        "y": 279,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "eaadc174.02e71",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--vnf-topology-operation-input.service-information.service-instance-id-->",
        "comments": "",
        "outputs": 1,
        "x": 746,
        "y": 375,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "def73660.f1599",
                "7ca16f67.a19498",
                "6d28513b.423be8"
            ]
        ]
    },
    {
        "id": "def73660.f1599",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 965,
        "y": 313,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "5c5bc497.c1130c"
            ]
        ]
    },
    {
        "id": "7ca16f67.a19498",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 974.490966796875,
        "y": 355.57403564453125,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "3202281d.474eb8"
            ]
        ]
    },
    {
        "id": "6d28513b.423be8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 963,
        "y": 402,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "a1d5aff9.d75b68"
            ]
        ]
    },
    {
        "id": "3202281d.474eb8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1128.0623779296875,
        "y": 358.8597717285156,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "a1d5aff9.d75b68",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1132,
        "y": 403,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "5c5bc497.c1130c",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for index='rel-index' start='0' end='`$tmp.aai.service-instance.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1162,
        "y": 309,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "b3c4b504.2321f"
            ]
        ]
    },
    {
        "id": "b3c4b504.2321f",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.service-instance.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1385.33349609375,
        "y": 308.99993896484375,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "2c61dbe.2d462a4"
            ]
        ]
    },
    {
        "id": "2c61dbe.2d462a4",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1586.0001335144043,
        "y": 310.00002098083496,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "8cb99e8e.6d2cc"
            ]
        ]
    },
    {
        "id": "ce0777fc.b60f2",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 712,
        "y": 323,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            []
        ]
    },
    {
        "id": "8cb99e8e.6d2cc",
        "type": "save",
        "name": "get connectivity from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1824,
        "y": 312,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "e48909d7.1167",
                "9d9cf2b9.138cc",
                "c57bdede.c607a8"
            ]
        ]
    },
    {
        "id": "e48909d7.1167",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2032,
        "y": 276,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "7447d3b7.3d9674"
            ]
        ]
    },
    {
        "id": "9d9cf2b9.138cc",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2032.490966796875,
        "y": 321.57403564453125,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "c3f91382.355d78"
            ]
        ]
    },
    {
        "id": "c57bdede.c607a8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2030,
        "y": 365,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "8f45128e.10469"
            ]
        ]
    },
    {
        "id": "c3f91382.355d78",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2195.0623779296875,
        "y": 321.8597717285156,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "8f45128e.10469",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2199,
        "y": 366,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "eaa455f.69afea8",
        "type": "save",
        "name": "get vpn-binding from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2505,
        "y": 365,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "754a3f5.4e5d3c",
                "563654a8.f8269c",
                "49966192.933e3"
            ]
        ]
    },
    {
        "id": "44a58adf.5965ac",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2889,
        "y": 365,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "c9dc240e.1f5cf8",
                "2f80a99a.2436ee",
                "eb52e479.fabdf8",
                "e64ba97a.ab16f8"
            ]
        ]
    },
    {
        "id": "754a3f5.4e5d3c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2716,
        "y": 367,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "44a58adf.5965ac"
            ]
        ]
    },
    {
        "id": "563654a8.f8269c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2716.490966796875,
        "y": 412.57403564453125,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "8ffd54c7.1ceb58"
            ]
        ]
    },
    {
        "id": "49966192.933e3",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2714,
        "y": 456,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "1dfb3bfc.f80f24"
            ]
        ]
    },
    {
        "id": "1dfb3bfc.f80f24",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2881,
        "y": 455,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "8ffd54c7.1ceb58",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2879.0623779296875,
        "y": 412.8597717285156,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "7447d3b7.3d9674",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2233,
        "y": 271,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "80b48506.a5c978"
            ]
        ]
    },
    {
        "id": "80b48506.a5c978",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2438,
        "y": 271,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "36fdb5a2.702cb2"
            ]
        ]
    },
    {
        "id": "36fdb5a2.702cb2",
        "type": "outcome",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2604,
        "y": 271,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "32e2ef12.2d28f8"
            ]
        ]
    },
    {
        "id": "32e2ef12.2d28f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2767,
        "y": 271,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "eaa455f.69afea8"
            ]
        ]
    },
    {
        "id": "c9dc240e.1f5cf8",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-binding.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-binding.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-binding.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-binding.src-access-node-id`\" />\n",
        "comments": "",
        "x": 3104,
        "y": 75,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "2f80a99a.2436ee",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3130,
        "y": 192,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "5dad328f.715b34",
                "e3a6748e.a712d",
                "e35e866f.df6d4"
            ]
        ]
    },
    {
        "id": "5dad328f.715b34",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3325.5001220703125,
        "y": 144,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "4d0c253f.a81e74"
            ]
        ]
    },
    {
        "id": "e3a6748e.a712d",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3317.5001220703125,
        "y": 199,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "b2cddf9.b286da"
            ]
        ]
    },
    {
        "id": "4d0c253f.a81e74",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3469.8824462890625,
        "y": 143.65567016601562,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "1f908e24.7ffb6a"
            ]
        ]
    },
    {
        "id": "1f908e24.7ffb6a",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3654,
        "y": 142,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "731e3134.cae0e8"
            ]
        ]
    },
    {
        "id": "731e3134.cae0e8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3849,
        "y": 142,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "924b0e47.33623"
            ]
        ]
    },
    {
        "id": "e35e866f.df6d4",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3322.5001220703125,
        "y": 256,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "96d892fb.bdb65"
            ]
        ]
    },
    {
        "id": "96d892fb.bdb65",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3474.5001220703125,
        "y": 257,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "b2cddf9.b286da",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3485.5001220703125,
        "y": 200,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "f5b1ba3f.53f16",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 4437,
        "y": 159,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "24a03be4.6f22dc",
                "9afded7b.e0fd88",
                "473aa7de.af209"
            ]
        ]
    },
    {
        "id": "e5beadfa.65d4b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4231,
        "y": 146,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "c8e5909.1b608f",
                "f5b1ba3f.53f16",
                "f37bd9fd.aaa8a8"
            ]
        ]
    },
    {
        "id": "c8e5909.1b608f",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4467,
        "y": 107,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "24a03be4.6f22dc",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4647,
        "y": 150,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "d0a9d6e9.c56f4"
            ]
        ]
    },
    {
        "id": "9afded7b.e0fd88",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4639,
        "y": 205,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "27cca76b.e2c508"
            ]
        ]
    },
    {
        "id": "473aa7de.af209",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4644,
        "y": 262,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "61a0060a.f22c2"
            ]
        ]
    },
    {
        "id": "61a0060a.f22c2",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4796,
        "y": 263,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "27cca76b.e2c508",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4807,
        "y": 208,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "d0a9d6e9.c56f4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4791.38232421875,
        "y": 147.65567016601562,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "67daf343.f6ee2c"
            ]
        ]
    },
    {
        "id": "924b0e47.33623",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4052,
        "y": 146,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "e5beadfa.65d4b"
            ]
        ]
    },
    {
        "id": "67daf343.f6ee2c",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5006,
        "y": 144,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "f37bd9fd.aaa8a8",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4387,
        "y": 223,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "eb52e479.fabdf8",
        "type": "execute",
        "name": "execute RestApiCallNode Delete ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.aai.connectivity.etht-svc-name`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3260,
        "y": 587,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "f7e1f7cd.472128",
                "cd5ebb71.771178"
            ]
        ]
    },
    {
        "id": "f7e1f7cd.472128",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3606.5,
        "y": 580,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "e8c999cc.b2fcc"
            ]
        ]
    },
    {
        "id": "cd5ebb71.771178",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3610.5,
        "y": 620,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "fe0f592f.73096"
            ]
        ]
    },
    {
        "id": "fe0f592f.73096",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3768,
        "y": 620,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "a35fbdc3.ba44d8",
                "25ddb449.839c14"
            ]
        ]
    },
    {
        "id": "e8c999cc.b2fcc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 3764.5,
        "y": 580,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "a35fbdc3.ba44d8",
        "type": "save",
        "name": "update vpn-binding resource (aka. OTN domainA) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-name`' />\n\n<parameter name='operational-status' value='Deactivated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4096.5,
        "y": 620,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            []
        ]
    },
    {
        "id": "25ddb449.839c14",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Deactivated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4023.5,
        "y": 666,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            []
        ]
    },
    {
        "id": "e64ba97a.ab16f8",
        "type": "execute",
        "name": "execute RestApiCallNode Delete OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-otn-src-domain-creation.templatefile`\" />-->\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-te:te/tunnels/tunnel=' + $tmp.aai.vpn-binding.vpn-name`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3233,
        "y": 459,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "e39876fb.5fed98",
                "bba7f7ba.20df2"
            ]
        ]
    },
    {
        "id": "e39876fb.5fed98",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3565.5,
        "y": 429,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "577f2ccc.95a23c"
            ]
        ]
    },
    {
        "id": "bba7f7ba.20df2",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3570.5,
        "y": 494,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            [
                "f956764e.d59e5"
            ]
        ]
    },
    {
        "id": "577f2ccc.95a23c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 3741.5,
        "y": 429,
        "z": "b39eb7ec.28f1a8",
        "wires": []
    },
    {
        "id": "f956764e.d59e5",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3737,
        "y": 494,
        "z": "b39eb7ec.28f1a8",
        "wires": [
            []
        ]
    }
]