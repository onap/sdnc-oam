[
  {
    "id": "2db23fe0.b16e38",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 100,
    "y": 152,
    "z": "e28e0974.bf7d98",
    "wires": [
      [
        "ef877c4e.31bde"
      ]
    ]
  },
  {
    "id": "ef877c4e.31bde",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.openecomp.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.openecomp.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 312.00000381469727,
    "y": 224.0000171661377,
    "z": "e28e0974.bf7d98",
    "wires": [
      [
        "b072980d.888498"
      ]
    ]
  },
  {
    "id": "b072980d.888498",
    "type": "method",
    "name": "method network-topology-operation-delete",
    "xml": "<method rpc='network-topology-operation-delete' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 300.0001220703125,
    "y": 312,
    "z": "e28e0974.bf7d98",
    "wires": [
      [
        "f8af1418.cc8ab"
      ]
    ]
  },
  {
    "id": "f8af1418.cc8ab",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 576.0000305175781,
    "y": 320.00001335144043,
    "z": "e28e0974.bf7d98",
    "wires": [
      [
        "17c4f39b.027bc4",
        "e45c0fc3.d713c",
        "627b018f.f2a78",
        "54181c1f.692d04",
        "8e12230b.25a0e"
      ]
    ]
  },
  {
    "id": "17c4f39b.027bc4",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:validate-network-input-parameters",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='validate-network-input-parameters' mode='sync' >\n",
    "comments": "",
    "outputs": 1,
    "x": 897,
    "y": 146,
    "z": "e28e0974.bf7d98",
    "wires": [
      []
    ]
  },
  {
    "id": "e45c0fc3.d713c",
    "type": "get-resource",
    "name": "get-resource esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.thirdparty-sdnc-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 854,
    "y": 446,
    "z": "e28e0974.bf7d98",
    "wires": [
      [
        "ae751a67.af5318",
        "286e1ce2.b1b734",
        "381203c2.6a9ed4"
      ]
    ]
  },
  {
    "id": "ae751a67.af5318",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1170,
    "y": 390,
    "z": "e28e0974.bf7d98",
    "wires": [
      [
        "1faac458.f1d3d4"
      ]
    ]
  },
  {
    "id": "286e1ce2.b1b734",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1173.490966796875,
    "y": 437.57403564453125,
    "z": "e28e0974.bf7d98",
    "wires": [
      [
        "9ef4deef.91afd8"
      ]
    ]
  },
  {
    "id": "381203c2.6a9ed4",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1168.823974609375,
    "y": 478.9073486328125,
    "z": "e28e0974.bf7d98",
    "wires": [
      [
        "44d4a0f0.d6bf98"
      ]
    ]
  },
  {
    "id": "9ef4deef.91afd8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Network model is_bound_to_vpn=true but no vpn_binding is present\" />\n\n",
    "comments": "",
    "x": 1350.0623779296875,
    "y": 425.8597717285156,
    "z": "e28e0974.bf7d98",
    "wires": []
  },
  {
    "id": "44d4a0f0.d6bf98",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Unexpected error retrieving vpn binding\" />\n\n",
    "comments": "",
    "x": 1356.5965309143066,
    "y": 474.3465414047241,
    "z": "e28e0974.bf7d98",
    "wires": []
  },
  {
    "id": "1faac458.f1d3d4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1348.205322265625,
    "y": 382.57403564453125,
    "z": "e28e0974.bf7d98",
    "wires": [
      []
    ]
  },
  {
    "id": "627b018f.f2a78",
    "type": "for",
    "name": "for each network-input-parameters",
    "xml": "<for index='idx' start='0' end='`$network-topology-operation-input.network-request-input.network-input-parameters.param_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 859,
    "y": 281,
    "z": "e28e0974.bf7d98",
    "wires": [
      [
        "55bd9517.8a2a3c"
      ]
    ]
  },
  {
    "id": "55bd9517.8a2a3c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1140.8333740234375,
    "y": 259.3333435058594,
    "z": "e28e0974.bf7d98",
    "wires": [
      [
        "aaca6566.847a28",
        "58c4c980.63f76"
      ]
    ]
  },
  {
    "id": "aaca6566.847a28",
    "type": "switchNode",
    "name": "switch name",
    "xml": "<switch test=\"`$network-topology-operation-input.network-request-input.network-input-parameters.param[$idx].name == 'name'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 1349,
    "y": 220,
    "z": "e28e0974.bf7d98",
    "wires": [
      [
        "e38f6b1e.d2dbc"
      ]
    ]
  },
  {
    "id": "e38f6b1e.d2dbc",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1536,
    "y": 220,
    "z": "e28e0974.bf7d98",
    "wires": [
      [
        "ce711958.0f3dd8"
      ]
    ]
  },
  {
    "id": "ce711958.0f3dd8",
    "type": "set",
    "name": "set name",
    "xml": "<set>\n<parameter name='prop.l3vpn.name' value='`$network-topology-operation-input.network-request-input.network-input-parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 1704,
    "y": 220.60000610351562,
    "z": "e28e0974.bf7d98",
    "wires": []
  },
  {
    "id": "58c4c980.63f76",
    "type": "switchNode",
    "name": "switch service-type",
    "xml": "<switch test=\"`$network-topology-operation-input.network-request-input.network-input-parameters.param[$idx].name == 'service-type'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 1352.9999389648438,
    "y": 281.5999755859375,
    "z": "e28e0974.bf7d98",
    "wires": [
      [
        "416447eb.c5c02"
      ]
    ]
  },
  {
    "id": "416447eb.c5c02",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1537.9999389648438,
    "y": 279.5999755859375,
    "z": "e28e0974.bf7d98",
    "wires": [
      [
        "a89b0168.c64988"
      ]
    ]
  },
  {
    "id": "a89b0168.c64988",
    "type": "set",
    "name": "set service-type",
    "xml": "<set>\n<parameter name='prop.l3vpn.service-type' value='`$network-topology-operation-input.network-request-input.network-input-parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 1706.9999389648438,
    "y": 277.5999755859375,
    "z": "e28e0974.bf7d98",
    "wires": []
  },
  {
    "id": "54181c1f.692d04",
    "type": "set",
    "name": "set controller data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list[0].esr-system-info.serviceUrl`\" />\n<parameter name='prop.sdncRestApi.templateDir' value='/opt/onap/sdnc/data' />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list[0].esr-system-info.user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list[0].esr-system-info.password`\" />\n",
    "comments": "",
    "x": 819,
    "y": 557,
    "z": "e28e0974.bf7d98",
    "wires": []
  },
  {
    "id": "cd353a.555cb2c8",
    "type": "execute",
    "name": "execute REST DELETE VPN",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"$prop.sdncRestApi.tempDir +'/l3smvpntemplate.json'\"/>\n<parameter name=\"restapiUrl\" value=\"$prop.sdncRestApi.thirdpartySdnc.url +'/restconf/data/huawei-ac-net-l3vpn-svc:l3vpn-svc-cfg/vpn-services/vpnservice='+$prop.l3vpn.name'\"/>\n<parameter name=\"restapiUser\" value=\"$prop.sdncRestApi.thirdpartySdnc.user\"/>\n<parameter name=\"restapiPassword\" value=\"$prop.sdncRestApi.thirdpartySdnc.password\"/>\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name=\"responsePrefix\" value=\"restapi-result\"/>",
    "comments": "",
    "outputs": 1,
    "x": 1330,
    "y": 634,
    "z": "e28e0974.bf7d98",
    "wires": [
      []
    ]
  },
  {
    "id": "8e12230b.25a0e",
    "type": "switchNode",
    "name": "switch service-type",
    "xml": "<switch test=\"`$prop.l3vpn.service-type`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 800,
    "y": 652,
    "z": "e28e0974.bf7d98",
    "wires": [
      [
        "ecc26c17.c6fc7"
      ]
    ]
  },
  {
    "id": "ecc26c17.c6fc7",
    "type": "outcomeTrue",
    "name": "l3vpn-ipwan",
    "xml": "<outcome value='l3vpn-ipwan'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1050,
    "y": 636,
    "z": "e28e0974.bf7d98",
    "wires": [
      [
        "cd353a.555cb2c8"
      ]
    ]
  }
]
