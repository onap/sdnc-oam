[
  {
    "id":"f7a51f5.fe86ce",
    "type":"dgstart",
    "name":"DGSTART",
    "outputs":1,
    "x":415,
    "y":350,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "ba9c043e.e07f58"
      ]
    ]
  },
  {
    "id":"ba9c043e.e07f58",
    "type":"service-logic",
    "name":"GENERIC-RESOURCE-API ${project.version}",
    "module":"GENERIC-RESOURCE-API",
    "version":"${project.version}",
    "comments":"",
    "xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs":1,
    "x":511.2380790710449,
    "y":410.95239067077637,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "249d942d.c245dc"
      ]
    ]
  },
  {
    "id":"249d942d.c245dc",
    "type":"method",
    "name":"tunnelxconn-topology-operation-assign",
    "xml":"<method rpc='tunnelxconn-topology-operation-assign' mode='sync'>\n",
    "comments":"",
    "outputs":1,
    "x":562.154857635498,
    "y":446.1904458999634,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "6d5b29f7.7a4718"
      ]
    ]
  },
  {
    "id":"6d5b29f7.7a4718",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "comments":"",
    "outputs":1,
    "x":465.47619247436523,
    "y":589.5237879753113,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "3003211a.e085be",
        "e75e77ea.b57f18",
        "f5d1d70b.ddc6f8",
        "338371c3.03166e",
        "bec51e2f.be8cc"
      ]
    ]
  },
  {
    "id":"d0d44753.44ba98",
    "type":"returnSuccess",
    "name":"return success",
    "xml":"<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments":"",
    "x":1308.6666564941406,
    "y":2516.5477046966553,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"8469024b.7a82b",
    "type":"set",
    "name":"set output to api handler",
    "xml":"<set>\n<parameter name='allotted-resource-id' value='`$tmp.ar.allotted-resource-id`' />\n<parameter name='tunnelxconn-object-path' value=\"`$tmp.ar.self-link`\"/>\n<parameter name='service-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $tunnelxconn-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n \n",
    "comments":"",
    "x":1345.7540550231934,
    "y":2395.432439804077,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"2132e3dd.5539fc",
    "type":"set",
    "name":"set allotted-resource-oper-status",
    "xml":"<set>\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-oper-status.order-status' value='PendingCreate' />\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$tunnelxconn-topology-operation-input.request-information.request-action`' />\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$tunnelxconn-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$tunnelxconn-topology-operation-input.sdnc-request-header.svc-request-id`' />\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-oper-status.create-timestamp' value='`$tmp.current-time`' />\n",
    "comments":"",
    "x":1417.468376159668,
    "y":1812.6228160858154,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"e75e77ea.b57f18",
    "type":"set",
    "name":"set tmp.ar.self-link",
    "xml":"<set>\n<parameter name='tmp.ar.self-link' value=\"`'restconf/config/GENERIC-RESOURCE-API:tunnelxconn-allotted-resources/tunnelxconn-allotted-resource/'\n + $tmp.ar.allotted-resource-id\n + '/allotted-resource-data/tunnelxconn-topology/'` \" />\n\n",
    "comments":"",
    "x":911.738037109375,
    "y":457.33331298828125,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"3003211a.e085be",
    "type":"set",
    "name":"set tmp.ar.allotted-resource-id,etc",
    "xml":"<set>\n<parameter name='tmp.ar.allotted-resource-id' value='`$tunnelxconn-topology-operation-input.allotted-resource-information.allotted-resource-id`' />\n<parameter name='tmp.ar.parent-service-instance-id' value='`$tunnelxconn-topology-operation-input.allotted-resource-information.parent-service-instance-id`' />\n\n\n",
    "comments":"",
    "x":959.997314453125,
    "y":413.59259033203125,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"eb1ff0c9.ef38e",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":1098.8148803710938,
    "y":629.2672729492188,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "c02bbcdf.bc013"
      ]
    ]
  },
  {
    "id":"4e2ca4b9.af9d2c",
    "type":"execute",
    "name":"execute RestApiCallNode - PUT AR by id",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.tx.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":1438.8626251220703,
    "y":2037.1008231639862,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "aff222bc.8e6d2",
        "d2e716e0.ea3f78",
        "52261953.a9dda8"
      ]
    ]
  },
  {
    "id":"aff222bc.8e6d2",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":1707.5040016174316,
    "y":2088.43223490566,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "39f6948c.62523c"
      ]
    ]
  },
  {
    "id":"d2e716e0.ea3f78",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":1698.504051208496,
    "y":2056.9322606548667,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "39f6948c.62523c"
      ]
    ]
  },
  {
    "id":"52261953.a9dda8",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":1702.2540893554688,
    "y":2027.289365530014,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "dcd5ec61.1101"
      ]
    ]
  },
  {
    "id":"39f6948c.62523c",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for tunnelxconn-allotted-resource\" />\n",
    "comments":"",
    "x":1868.2540893554688,
    "y":2057.6822844967246,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"c1360476.7b6098",
    "type":"set",
    "name":"set oper-status",
    "xml":"<set>\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$tx-ar.allotted-resource-data.allotted-resource-operation-information.request-information.request-action`' />\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$tx-ar.allotted-resource-status.rpc-action`' />\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$tx-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.svc-request-id`' />\n\n",
    "comments":"",
    "x":1448.5294189453125,
    "y":730.0529174804688,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"f35d4335.54c9c",
    "type":"comment",
    "name":"Save consumed-allotted-resources to mdsal",
    "info":"",
    "comments":"",
    "x":1475.2435302734375,
    "y":1552.7196044921875,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"655635e7.0e3eec",
    "type":"comment",
    "name":"GET tunnelxconn-allotted-resource from mdsal",
    "info":"",
    "comments":"",
    "x":821.8148193359375,
    "y":599.7672119140625,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"c02bbcdf.bc013",
    "type":"returnFailure",
    "name":"return failure - tunnelxconn already exists",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" \n    value=\"`'Existing tunnelxconn-allotted-resource with order status of ' + $mdsal-ar.tunnelxconn-allotted-resource.allotted-resource-data.allotted-resource-oper-status.order-status + '.'`\" />\n",
    "comments":"",
    "x":1408.129150390625,
    "y":624.6243896484375,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"573f6a07.f17fd4",
    "type":"set",
    "name":"set tx-ar-identifiers",
    "xml":"<set>\n<parameter name='tx-ar-identifiers.consuming-service-instance-id' value=\"`$tunnelxconn-topology-operation-input.service-information.service-instance-id` \" />\n<parameter name='tx-ar-identifiers.parent-service-instance-id' value=\"`$tunnelxconn-topology-operation-input.allotted-resource-information.parent-service-instance-id` \" />\n<parameter name='tx-ar-identifiers.allotted-resource-type' value=\"`$tunnelxconn-topology-operation-input.allotted-resource-information.allotted-resource-type` \" />\n<parameter name='tx-ar-identifiers.allotted-resource-id' value=\"`$tmp.ar.allotted-resource-id` \" />\n\n",
    "comments":"",
    "x":1458.38623046875,
    "y":823.6243896484375,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"d7829a8.d904768",
    "type":"comment",
    "name":"Set allotted-resource-identifiers",
    "info":"",
    "comments":"",
    "x":1485.338623046875,
    "y":782.338623046875,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"42c79ea2.81985",
    "type":"set",
    "name":"set identifiers in overall structure",
    "xml":"<set>\n<parameter name='tx-ar.allotted-resource-data.tunnelxconn-topology.allotted-resource-identifiers.' value=\"`$tx-ar-identifiers.`\" />\n\n\n",
    "comments":"",
    "x":1475.38623046875,
    "y":1131.910400390625,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"d8d243c1.7bb7e",
    "type":"set",
    "name":"set ecomp model information from input",
    "xml":"<set>\n<parameter name='tx-ar.allotted-resource-data.tunnelxconn-topology.onap-model-information.' \nvalue=\"`$tunnelxconn-topology-operation-input.allotted-resource-information.onap-model-information.`\" />\n\n\n",
    "comments":"",
    "x":1503.957763671875,
    "y":866.9100952148438,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"388bbf45.722ad",
    "type":"switchNode",
    "name":"switch model-invariant-uuid is null",
    "xml":"<switch test='$tunnelxconn-topology-operation-input.allotted-resource-information.onap-model-information.model-invariant-uuid'>\n",
    "comments":"",
    "outputs":1,
    "x":1484.8148193359375,
    "y":906.195809841156,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "61c62608.d61778"
      ]
    ]
  },
  {
    "id":"61c62608.d61778",
    "type":"outcome",
    "name":"outcome null",
    "xml":"<outcome value=''>\n",
    "comments":"",
    "outputs":1,
    "x":1711.9576988220215,
    "y":907.6243271827698,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "39e6f667.b8ce5a"
      ]
    ]
  },
  {
    "id":"39e6f667.b8ce5a",
    "type":"set",
    "name":"set model-invariant-uuid",
    "xml":"<set>\n<parameter name='tx-ar.allotted-resource-data.tunnelxconn-topology.onap-model-information.model-invariant-uuid' \nvalue=\"`$ar-model.invariant-uuid`\" />\n\n\n",
    "comments":"",
    "x":1913.38627243042,
    "y":907.0528798103333,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"e8848901.4775c8",
    "type":"switchNode",
    "name":"switch model-uuid is null",
    "xml":"<switch test='$tunnelxconn-topology-operation-input.allotted-resource-information.onap-model-information.model-uuid'>\n",
    "comments":"",
    "outputs":1,
    "x":1456.2434158325195,
    "y":940.4815106391907,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "d9785a66.79e3a8"
      ]
    ]
  },
  {
    "id":"d9785a66.79e3a8",
    "type":"outcome",
    "name":"outcome null",
    "xml":"<outcome value=''>\n",
    "comments":"",
    "outputs":1,
    "x":1657.6719818115234,
    "y":941.0529322624207,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "1427b5c2.d5936a"
      ]
    ]
  },
  {
    "id":"1427b5c2.d5936a",
    "type":"set",
    "name":"set model-uuid",
    "xml":"<set>\n<parameter name='tx-ar.allotted-resource-data.tunnelxconn-topology.onap-model-information.model-uuid' \nvalue=\"`$ar-model.uuid`\" />\n\n\n",
    "comments":"",
    "x":1850.529140472412,
    "y":941.0528540611267,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"109fba97.f782b5",
    "type":"switchNode",
    "name":"switch model-version is null",
    "xml":"<switch test='$tunnelxconn-topology-operation-input.allotted-resource-information.onap-model-information.model-version'>\n",
    "comments":"",
    "outputs":1,
    "x":1464.8148193359375,
    "y":982.338623046875,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "3f70eb82.810ee4"
      ]
    ]
  },
  {
    "id":"3f70eb82.810ee4",
    "type":"outcome",
    "name":"outcome null",
    "xml":"<outcome value=''>\n",
    "comments":"",
    "outputs":1,
    "x":1714.8148002624512,
    "y":973.3386225700378,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "dc565eb7.6c9dc"
      ]
    ]
  },
  {
    "id":"dc565eb7.6c9dc",
    "type":"set",
    "name":"set model-version",
    "xml":"<set>\n<parameter name='tx-ar.allotted-resource-data.tunnelxconn-topology.onap-model-information.model-version' \nvalue=\"`$ar-model.version`\" />\n\n\n",
    "comments":"",
    "x":1907.6719589233398,
    "y":973.3385443687439,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"1d9a0b0d.a6f8f5",
    "type":"switchNode",
    "name":"switch ar-model.ecomp-generated-naming",
    "xml":"<switch test='`$ar-model.ecomp-generated-naming`'>\n",
    "comments":"",
    "outputs":1,
    "x":1528.38623046875,
    "y":1075.7672729492188,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "5928be3a.62e24",
        "297d3bf7.200674"
      ]
    ]
  },
  {
    "id":"5928be3a.62e24",
    "type":"other",
    "name":"outcome Y",
    "xml":"<outcome value='Y'>\n",
    "comments":"",
    "outputs":1,
    "x":1814.3862915039062,
    "y":1075.1958618164062,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "7b105e84.481c9"
      ]
    ]
  },
  {
    "id":"7b105e84.481c9",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">\n",
    "atomic":"true",
    "comments":"",
    "outputs":1,
    "x":1968.1363525390625,
    "y":1077.69580078125,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "92b98902.431af8"
      ]
    ]
  },
  {
    "id":"297d3bf7.200674",
    "type":"other",
    "name":"other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":1833.608642578125,
    "y":1164.1958618164062,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "3e840127.e2aa3e"
      ]
    ]
  },
  {
    "id":"3e840127.e2aa3e",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error in allotted-resource-model data.  Ecomp-generated-naming should be true\" />\n\n",
    "comments":"",
    "x":2016.608642578125,
    "y":1169.1958618164062,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"92b98902.431af8",
    "type":"switchNode",
    "name":"switch ar-model.ecomp-generated-naming",
    "xml":"<switch test='`$ar-model.naming-policy`'>\n",
    "comments":"",
    "outputs":1,
    "x":2104.38623046875,
    "y":1126.767333984375,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "26eb7249.47e7fe",
        "f1043fa9.14b2e"
      ]
    ]
  },
  {
    "id":"26eb7249.47e7fe",
    "type":"other",
    "name":"outcome oam_network_policy",
    "xml":"<outcome value='oam_network_policy'>\n",
    "comments":"",
    "outputs":1,
    "x":2479.244140625,
    "y":1130.3453369140625,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "e7502764.f34288"
      ]
    ]
  },
  {
    "id":"f1043fa9.14b2e",
    "type":"other",
    "name":"other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":2393.671875,
    "y":1207.1958618164062,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "e7502764.f34288"
      ]
    ]
  },
  {
    "id":"1d6e2e9f.9f6281",
    "type":"set",
    "name":"set ar_name",
    "xml":"<set>\n<parameter name='tmp.ar-name' value='$TenantOAMNetworkRole_$LandingNetworkRole_SZ' />\n",
    "comments":"",
    "x":2785.100830078125,
    "y":1165.7672729492188,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"d37d22cd.5e612",
    "type":"execute",
    "name":"execute SliStringUtils - replace TenantOAMNetworkRole",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.ar-name`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-name\"/>\n    <parameter name=\"target\" value=\"$TenantOAMNetworkRole\"/>\n    <parameter name=\"replacement\" value=\"`$tunnelxconn-topology-operation-input.tunnelxconn-request-input.untrusted-network-role`\"/>\n\n",
    "comments":"",
    "outputs":1,
    "x":2929.2437858581543,
    "y":1209.6244196891785,
    "z":"6d778d5b.c45f64",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"ef7b09c8.6b36b8",
    "type":"execute",
    "name":"execute SliStringUtils - replace LandingNetworkRole",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.ar-name`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-name\"/>\n    <parameter name=\"target\" value=\"$LandingNetworkRole\"/>\n    <parameter name=\"replacement\" value=\"`$tunnelxconn-topology-operation-input.tunnelxconn-request-input.trusted-network-role`\"/>\n\n",
    "comments":"",
    "outputs":1,
    "x":2916.243896484375,
    "y":1249.7672729492188,
    "z":"6d778d5b.c45f64",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"e7502764.f34288",
    "type":"block",
    "name":"block: atomic",
    "xml":"<block atomic='true'>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":2593.5292015075684,
    "y":1205.3387522697449,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "1d6e2e9f.9f6281",
        "d37d22cd.5e612",
        "ef7b09c8.6b36b8",
        "49ad4058.d0089"
      ]
    ]
  },
  {
    "id":"49ad4058.d0089",
    "type":"set",
    "name":"set identifiers.allotted-resource-name",
    "xml":"<set>\n<parameter name='tx-ar-identifiers.allotted-resource-name' value='`$tmp.ar-name`' />\n",
    "comments":"",
    "x":2874.1005859375,
    "y":1300.052978515625,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"d092a98.3446758",
    "type":"set",
    "name":"set assignments in overall structure",
    "xml":"<set>\n<parameter name='tx-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-assignments.' \nvalue=\"`$tx-ar-assignments.`\" />\n\n\n",
    "comments":"",
    "x":1460.8624267578125,
    "y":1498.6246337890625,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"add28223.49736",
    "type":"set",
    "name":"Handle tx-ar-assignments",
    "xml":"<set>\n<parameter name='tx-ar-assignments.vni' value='`$tmp.manageVni.vni`'/>\n<parameter name='tx-ar-assignments.vgmux-bearer-ip' value='`$tmp.vgmux-bearer-ip`'/>\n<parameter name='tx-ar-assignments.vgmux-lan-ip' value='`$tmp.vgmux-lan-ip`'/>\n<parameter name='tx-ar-assignments.vg-ip' value='`$tmp.manageIpaddr.ip`'/>\n\n",
    "comments":"",
    "x":1428.529052734375,
    "y":1418.052978515625,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"6d7c9c61.51b0b4",
    "type":"for",
    "name":"for cidx..service-data.consumed-allotted-resources.consumed-allotted-resource[]",
    "xml":"<for index='cidx' start='0' end='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length`' >\n",
    "comments":"",
    "outputs":1,
    "x":2501.8155822753906,
    "y":1610.0411586761475,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "70f7bb5e.ea0274"
      ]
    ]
  },
  {
    "id":"c057b9c3.dc3768",
    "type":"switchNode",
    "name":"switch service-data.consumed-allotted-resources_length",
    "xml":"<switch test='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length`'>\n",
    "comments":"",
    "outputs":1,
    "x":1507.8148193359375,
    "y":1603.505126953125,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "62b02de0.0af454",
        "26557b09.94a7f4"
      ]
    ]
  },
  {
    "id":"62b02de0.0af454",
    "type":"other",
    "name":"outcome Null",
    "xml":"<outcome value=''>\n",
    "comments":"",
    "outputs":1,
    "x":1908.207763671875,
    "y":1582.1124267578125,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "b0181993.439998"
      ]
    ]
  },
  {
    "id":"26557b09.94a7f4",
    "type":"other",
    "name":"other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":1900.957763671875,
    "y":1663.1124267578125,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "670fdc23.c2e944"
      ]
    ]
  },
  {
    "id":"70f7bb5e.ea0274",
    "type":"switchNode",
    "name":"switch allotted-resource-id",
    "xml":"<switch test=\"`$service-data.consumed-allotted-resources.consumed-allotted-resource[$cidx].allotted-resource-id == $tmp.ar.allotted-resource-id`\">\n\n",
    "comments":"",
    "outputs":1,
    "x":2936.4106826782227,
    "y":1611.85085105896,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "a8f61abf.fcd308"
      ]
    ]
  },
  {
    "id":"a8f61abf.fcd308",
    "type":"outcomeTrue",
    "name":"true",
    "xml":"<outcome value='true'>\n",
    "comments":"",
    "outputs":1,
    "x":3143.220375061035,
    "y":1615.064962387085,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "df6d8539.73d218"
      ]
    ]
  },
  {
    "id":"670fdc23.c2e944",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":2067.8349609375,
    "y":1657.488525390625,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "6d7c9c61.51b0b4",
        "a831b9c8.902e48"
      ]
    ]
  },
  {
    "id":"df6d8539.73d218",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":3311.4817276000977,
    "y":1619.9222631454468,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "cf90980d.2f50b8"
      ]
    ]
  },
  {
    "id":"b0181993.439998",
    "type":"set",
    "name":"set cidx",
    "xml":"<set>\n<parameter name='tmp.cidx' value=\"`0`\" />\n<parameter name='service-data.consumed-allotted-resources.consumed-allotted-resource_length' value=\"1\" />\n\n\n",
    "comments":"",
    "x":2093.0648193359375,
    "y":1585.32666015625,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"cf90980d.2f50b8",
    "type":"set",
    "name":"set tmp.cidx and ctx.consumed-ar",
    "xml":"<set>\n<parameter name='tmp.cidx' value='`$cidx`' />\n<parameter name='ctx.consumed-ar.' value='`$service-data.consumed-allotted-resources.consumed-allotted-resource[$cidx].`' />\n<parameter name='tmp.found-cidx' value='true' />",
    "comments":"",
    "x":3557.3391876220703,
    "y":1614.4937419891357,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"9e1a3f00.67db8",
    "type":"set",
    "name":"set consumed allotted resources",
    "xml":"<set>\n<parameter name='service-data.consumed-allotted-resources.consumed-allotted-resource[$tmp.cidx].allotted-resource-id' value=\"`$tmp.ar.allotted-resource-id` \" />\n<parameter name='service-data.consumed-allotted-resources.consumed-allotted-resource[$tmp.cidx].allotted-resource-type' value=\"`$tunnelxconn-topology-operation-input.allotted-resource-information.allotted-resource-type` \" />\n<parameter name='service-data.consumed-allotted-resources.consumed-allotted-resource[$tmp.cidx].allotted-resource-pointer' value=\"`$tmp.ar.self-link` \" />\n<parameter name='service-data.consumed-allotted-resources.consumed-allotted-resource_length' value='`$tmp.cidx + 1`' />\n\n",
    "comments":"",
    "x":1443.6720123291016,
    "y":1662.826681137085,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"dcd5ec61.1101",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1843.910057067871,
    "y":2023.4815347194672,
    "z":"6d778d5b.c45f64",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"1b2081c9.a5da5e",
    "type":"comment",
    "name":"Add SZ AR to mdsal",
    "info":"",
    "comments":"",
    "x":1370.148193359375,
    "y":1973.1956787109375,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"7aaed588.63511c",
    "type":"execute",
    "name":"execute getTime",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='setTime' >\n    <parameter name=\"outputPath\" value=\"tmp.current-time\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":1384.4814224243164,
    "y":1736.671986579895,
    "z":"6d778d5b.c45f64",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"99804d99.5a352",
    "type":"other",
    "name":"other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":1104.57666015625,
    "y":680.4814453125,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "e8c6a2dd.e4b3e"
      ]
    ]
  },
  {
    "id":"aae390e8.74c6e",
    "type":"block",
    "name":"block: atomic",
    "xml":"<block atomic=\"true\">\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1052.57666015625,
    "y":1176.2908325195312,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "9e1a3f00.67db8",
        "7aaed588.63511c",
        "2132e3dd.5539fc",
        "4e2ca4b9.af9d2c",
        "8469024b.7a82b",
        "d0d44753.44ba98",
        "d7a47b9d.32cb28",
        "c1360476.7b6098",
        "573f6a07.f17fd4",
        "d8d243c1.7bb7e",
        "388bbf45.722ad",
        "e8848901.4775c8",
        "109fba97.f782b5",
        "1d9a0b0d.a6f8f5",
        "42c79ea2.81985",
        "59dac422.4bc30c",
        "d857982b.5cce48",
        "40af5f1c.9055f",
        "add28223.49736",
        "d092a98.3446758",
        "c057b9c3.dc3768",
        "30b6665f.e4a89a",
        "de53cfb9.dddbd",
        "abea3cf1.3111d",
        "f623a457.d69fb8"
      ]
    ]
  },
  {
    "id":"d7a47b9d.32cb28",
    "type":"set",
    "name":"set id",
    "xml":"<set>\n<parameter name='tx-ar.allotted-resource-id' value=\"`$tmp.ar.allotted-resource-id` \" />\n<parameter name='tx-ar.allotted-resource-status.action' value=\"`$tunnelxconn-topology-operation-input.request-information.request-action` \" />\n<parameter name='tx-ar.allotted-resource-status.rpc-name' value=\"tunnelxconn-topology-operation\" />\n<parameter name='tx-ar.allotted-resource-status.rpc-action' value=\"`$tunnelxconn-topology-operation-input.sdnc-request-header.svc-action` \" />\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-operation-information.request-information.' value=\"`$tunnelxconn-topology-operation-input.request-information.` \" />\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.' value=\"`$tunnelxconn-topology-operation-input.sdnc-request-header.` \" />\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-operation-information.service-information.' value=\"`$tunnelxconn-topology-operation-input.service-information.` \" />\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-operation-information.allotted-resource-information.' value=\"`$tunnelxconn-topology-operation-input.allotted-resource-information.` \" />\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-operation-information.tunnelxconn-request-input.' value=\"`$tunnelxconn-topology-operation-input.tunnelxconn-request-input.` \" />",
    "comments":"",
    "x":1423.2434387207031,
    "y":686.433837890625,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"f623a457.d69fb8",
    "type":"update",
    "name":"update AAI allotted-resource",
    "xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"allotted-resource\" \n\t\tkey=\"customer.global-customer-id = $service-data.service-information.global-customer-id AND\n\t\t\tservice-subscription.service-type = $service-data.service-information.subscription-service-type AND\n\t\t\tservice-instance.service-instance-id = $service-data.service-information.service-instance-id AND\n\t\t\tallotted-resource.id = $tmp.ar.allotted-resource-id\"\n        pfx='pfx' local-only='false' force='false'>\n\t<parameter name=\"description\" value=\"`$tunnelxconn-topology-operation-input.allotted-resource-information.allotted-resource-type`\" />\n\t<parameter name=\"selflink\" value=\"`$tmp.ar.self-link`\" />\n\t<parameter name=\"model-invariant-id\" value=\"`$ar-model.invariant-uuid`\" />\n\t<parameter name=\"model-version-id\" value=\"`$ar-model.uuid`\" />\n\t<parameter name=\"operational-status\" value=\"null\" />\n",
    "comments":"",
    "outputs":1,
    "x":1411.052978515625,
    "y":1888.5767822265625,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "34d1f7b2.8b87a8",
        "b3d34689.7dc1b8"
      ]
    ]
  },
  {
    "id":"34d1f7b2.8b87a8",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":1660.814842224121,
    "y":1887.5292553901672,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "a85cc318.f284a"
      ]
    ]
  },
  {
    "id":"a85cc318.f284a",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"AAI failed\" />\n",
    "comments":"",
    "x":1827.338722229004,
    "y":1899.1483263969421,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"b3d34689.7dc1b8",
    "type":"failure",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":1667.9101295471191,
    "y":1920.2912230491638,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "a85cc318.f284a"
      ]
    ]
  },
  {
    "id":"a831b9c8.902e48",
    "type":"switchNode",
    "name":"switch tmp.found-cidx",
    "xml":"<switch test='`$tmp.found-cidx`'>\n",
    "comments":"",
    "outputs":1,
    "x":2316.743423461914,
    "y":1856.2315921783447,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "7ea3dd53.4333f4"
      ]
    ]
  },
  {
    "id":"7ea3dd53.4333f4",
    "type":"outcomeTrue",
    "name":"false",
    "xml":"<outcome value='false'>\n",
    "comments":"",
    "outputs":1,
    "x":2506.743377685547,
    "y":1856.2315292358398,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "b69b3a44.e782b8"
      ]
    ]
  },
  {
    "id":"b69b3a44.e782b8",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "outputs":1,
    "x":2672.743377685547,
    "y":1856.2315292358398,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "b4e6550a.303748"
      ]
    ]
  },
  {
    "id":"b4e6550a.303748",
    "type":"set",
    "name":"set tmp.cidx ",
    "xml":"<set>\n<parameter name='tmp.cidx' value='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length`' />\n",
    "comments":"",
    "x":2918.600706100464,
    "y":1856.8030033111572,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"995e10ab.ef2f6",
    "type":"break",
    "name":"break",
    "xml":"<break/>\n",
    "comments":"",
    "x":3476.243408203125,
    "y":1659.731689453125,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"ad2c1042.ffcf4",
    "type":"execute",
    "name":"execute RestApiCallNode - Update parent provided service AR",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.parentsvc.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.parent-ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='DELETE' />\n    <parameter name=\"responsePrefix\" value=\"parent\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":2194.9521980285645,
    "y":2023.1904199123383,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "473b0bea.e2adf4",
        "7b199046.8906d",
        "416141e2.fa511"
      ]
    ]
  },
  {
    "id":"f9d8c7c9.5d1db8",
    "type":"comment",
    "name":"Rollback parent",
    "info":"",
    "comments":"",
    "x":2038.9521255493164,
    "y":1992.8570504188538,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"473b0bea.e2adf4",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":2566.2602462768555,
    "y":2083.8553862571716,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "4115590f.ef7568"
      ]
    ]
  },
  {
    "id":"7b199046.8906d",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":2557.26029586792,
    "y":2052.355412006378,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "4115590f.ef7568"
      ]
    ]
  },
  {
    "id":"416141e2.fa511",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":2561.0103340148926,
    "y":2022.7125168815255,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "4115590f.ef7568"
      ]
    ]
  },
  {
    "id":"4115590f.ef7568",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":2702.666301727295,
    "y":2018.9046860709786,
    "z":"6d778d5b.c45f64",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"bf37a377.dd8a4",
    "type":"comment",
    "name":"Generate naming",
    "info":"",
    "comments":"",
    "x":1459.3862762451172,
    "y":1033.767225265503,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"f5d1d70b.ddc6f8",
    "type":"execute",
    "name":"execute Properties",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
    "comments":"",
    "outputs":1,
    "x":904,
    "y":502,
    "z":"6d778d5b.c45f64",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"e8c6a2dd.e4b3e",
    "type":"get-resource",
    "name":"get-resource parent service instance",
    "xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.mdsal.ConfigResource' resource='VNF-API' key='vnfs/vnf-list/$tmp.ar.parent-service-instance-id/service-data/' pfx='parent-service-instance' >\n",
    "comments":"",
    "outputs":1,
    "x":917,
    "y":783,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "8991d34b.f48af",
        "dbef2e21.0da74"
      ]
    ]
  },
  {
    "id":"dbef2e21.0da74",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":1180,
    "y":777,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "aae390e8.74c6e"
      ]
    ]
  },
  {
    "id":"8991d34b.f48af",
    "type":"other",
    "name":"other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":993,
    "y":878,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "d4ea2429.a9c908"
      ]
    ]
  },
  {
    "id":"d4ea2429.a9c908",
    "type":"returnFailure",
    "name":"return failure - parent service instance not found",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" \n    value=\"`'No entry found for parent service instance id ' + $tmp.ar.parent-service-instance-id + '.'`\" />\n",
    "comments":"",
    "x":920,
    "y":939,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"be6a5ce7.0ed",
    "type":"for",
    "name":"for parent vnf parameters",
    "xml":"<for index='curidx' start='0' end='`$parent-service-instance.service-data.vnf-topology-information.vnf-parameters_length`' >\n",
    "comments":"",
    "outputs":1,
    "x":1970,
    "y":1223,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "95805190.debbe"
      ]
    ]
  },
  {
    "id":"95805190.debbe",
    "type":"switchNode",
    "name":"switch parameter name",
    "xml":"<switch test='`$parent-service-instance.service-data.vnf-topology-information.vnf-parameters[$curidx].vnf-parameter-name`'>\n",
    "comments":"",
    "outputs":1,
    "x":2092,
    "y":1315,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "508d4d24.3b9154",
        "1ac32417.a325dc"
      ]
    ]
  },
  {
    "id":"508d4d24.3b9154",
    "type":"other",
    "name":"vgmux_private_ip_0",
    "xml":"<outcome value='vgmux_private_ip_0'>\n",
    "comments":"",
    "outputs":1,
    "x":2318,
    "y":1319,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "861fd9c6.6015f8"
      ]
    ]
  },
  {
    "id":"755943b8.1a105c",
    "type":"set",
    "name":"set tmp.vgmux-bearer-ip",
    "xml":"<set>\n<parameter name='tmp.vgmux-bearer-ip' value='`$parent-service-instance.service-data.vnf-topology-information.vnf-parameters[$curidx].vnf-parameter-value`'/>\n\n",
    "comments":"",
    "x":2550.9999771118164,
    "y":1380.0000400543213,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"1ac32417.a325dc",
    "type":"other",
    "name":"vgmux_private_ip_2",
    "xml":"<outcome value='vgmux_private_ip_2'>\n",
    "comments":"",
    "outputs":1,
    "x":2320,
    "y":1379,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "755943b8.1a105c"
      ]
    ]
  },
  {
    "id":"861fd9c6.6015f8",
    "type":"set",
    "name":"set tmp.vgmux-lan-ip",
    "xml":"<set>\n<parameter name='tmp.vgmux-lan-ip' value='`$parent-service-instance.service-data.vnf-topology-information.vnf-parameters[$curidx].vnf-parameter-value`'/>\n\n",
    "comments":"",
    "x":2540.9999771118164,
    "y":1322.0000381469727,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"59dac422.4bc30c",
    "type":"set",
    "name":"set default assignments",
    "xml":"<set>\n<parameter name='tmp.vni' value='123' />\n<parameter name='tmp.vgmux-bearer-ip' value='127.0.0.1' />\n<parameter name='tmp.vgmux-lan-ip' value='127.0.0.1' />",
    "comments":"",
    "x":1450,
    "y":1177,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"338371c3.03166e",
    "type":"execute",
    "name":"generate allotted-resource url",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.tx-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.allotted-resource-id`\"/>\n",
    "comments":"",
    "outputs":1,
    "x":900,
    "y":545,
    "z":"6d778d5b.c45f64",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"40af5f1c.9055f",
    "type":"call",
    "name":"call GENERIC-RESOURCE-API:manage-vni-assignment",
    "xml":"<call module='GENERIC-RESOURCE-API' rpc='manage-vni-assignment' mode='sync' >\n",
    "comments":"",
    "outputs":1,
    "x":1537,
    "y":1322,
    "z":"6d778d5b.c45f64",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"d857982b.5cce48",
    "type":"set",
    "name":"set actions = reserve, pools = VNI, VGW",
    "xml":"<set>\n<parameter name='tmp.manageVni.action' value='reserve' />\n<parameter name='tmp.manageIpaddr.action' value='reserve' />\n<parameter name='tmp.manageVni.pool' value='VNI'/>\n<parameter name='tmp.manageIpaddr.pool' value='VGW'/>",
    "comments":"",
    "x":1473,
    "y":1268,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  },
  {
    "id":"bec51e2f.be8cc",
    "type":"execute",
    "name":"execute RestApiCallNode - Get AR by id",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":824,
    "y":680,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "eb1ff0c9.ef38e",
        "99804d99.5a352"
      ]
    ]
  },
  {
    "id":"30b6665f.e4a89a",
    "type":"switchNode",
    "name":"Does parent service instance have vnf parameters?",
    "xml":"<switch test=\"`$parent-service-instance.service-data.vnf-topology-information.vnf-parameters_length != ''`\">\n",
    "comments":"",
    "outputs":1,
    "x":1517,
    "y":1218,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "a8ab7150.c4542"
      ]
    ]
  },
  {
    "id":"a8ab7150.c4542",
    "type":"outcomeTrue",
    "name":"true",
    "xml":"<outcome value='true'>\n",
    "comments":"",
    "outputs":1,
    "x":1779,
    "y":1220,
    "z":"6d778d5b.c45f64",
    "wires":[
      [
        "be6a5ce7.0ed"
      ]
    ]
  },
  {
    "id":"de53cfb9.dddbd",
    "type":"call",
    "name":"call GENERIC-RESOURCE-API:manage-ipaddr-assignment",
    "xml":"<call module='GENERIC-RESOURCE-API' rpc='manage-ipaddr-assignment' mode='sync' >\n",
    "comments":"",
    "outputs":1,
    "x":1533,
    "y":1369,
    "z":"6d778d5b.c45f64",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"abea3cf1.3111d",
    "type":"set",
    "name":"Handle tx parameters",
    "xml":"<set>\n<parameter name='tx-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-parameters.param[0].name' value='VNI'/>\n<parameter name='tx-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-parameters.param[0].value' value='`$tmp.manageVni.vni`'/>\n<parameter name='tx-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-parameters.param[1].name' value='vgmux_private_ip_2'/>\n<parameter name='tx-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-parameters.param[1].value' value='`$tmp.vgmux-bearer-ip`'/>\n<parameter name='tx-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-parameters.param[2].name' value='vgmux_private_ip_0'/>\n<parameter name='tx-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-parameters.param[2].value' value='`$tmp.vgmux-lan-ip`'/>\n<parameter name='tx-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-parameters.param[3].name' value='vgw_private_ip_0'/>\n<parameter name='tx-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-parameters.param[3].value' value='`$tmp.manageIpaddr.ip`'/>\n<parameter name='tx-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-parameters_length' value='4'/>\n\n",
    "comments":"",
    "x":1425,
    "y":1458,
    "z":"6d778d5b.c45f64",
    "wires":[

    ]
  }
]