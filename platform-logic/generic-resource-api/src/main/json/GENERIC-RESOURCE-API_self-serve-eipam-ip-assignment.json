[{"id":"36cbdd47.907f12","type":"dgstart","name":"DGSTART","outputs":1,"x":86.25,"y":36.249999046325684,"z":"4c8d51ee.aa222","wires":[["ab7df98.5f55e08"]]},{"id":"eb6941fe.a3dc3","type":"method","name":"method self-serve-eipam-ip-assignment","xml":"<method rpc='self-serve-eipam-ip-assignment' mode='sync'>\n","comments":"","outputs":1,"x":222.0357208251953,"y":93.37698745727539,"z":"4c8d51ee.aa222","wires":[["eba6dd8b.a603"]]},{"id":"eba6dd8b.a603","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":115.57144165039062,"y":179.6786060333252,"z":"4c8d51ee.aa222","wires":[["ac52a615.2fa078","aa4fc267.42cbf","aa62f0e2.738ae"]]},{"id":"ab7df98.5f55e08","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":359.1071472167969,"y":35.678565979003906,"z":"4c8d51ee.aa222","wires":[["eb6941fe.a3dc3"]]},{"id":"ac52a615.2fa078","type":"switchNode","name":"switch: ss.capability-name","xml":"<switch test='`$ss.capability-name`'>\n","comments":"","outputs":1,"x":350.00000762939453,"y":181.00000381469727,"z":"4c8d51ee.aa222","wires":[["cdddcc57.48471"]]},{"id":"cdddcc57.48471","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":575.0000305175781,"y":181.5000023841858,"z":"4c8d51ee.aa222","wires":[["d0165256.ff59c"]]},{"id":"d0165256.ff59c","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"ss.capability-name is null\" />\n","comments":"","x":734.9167022705078,"y":181.6111011505127,"z":"4c8d51ee.aa222","wires":[]},{"id":"aa4fc267.42cbf","type":"switchNode","name":"switch: ss.capability-action","xml":"<switch test='`$ss.capability-action`'>\n","comments":"","outputs":1,"x":351.25002670288086,"y":231.00000429153442,"z":"4c8d51ee.aa222","wires":[["2b9b3f1b.f936b","5819e76f.b5da38","daf1b63b.b15078"]]},{"id":"2b9b3f1b.f936b","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":574.7500228881836,"y":231.25000429153442,"z":"4c8d51ee.aa222","wires":[["472df614.2a4308"]]},{"id":"472df614.2a4308","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"ss.capability-action is null\" />\n","comments":"","x":734.6666946411133,"y":231.36110305786133,"z":"4c8d51ee.aa222","wires":[]},{"id":"5819e76f.b5da38","type":"outcome","name":"assign","xml":"<outcome value='assign'>","comments":"","outputs":1,"x":573.5000190734863,"y":286.25000762939453,"z":"4c8d51ee.aa222","wires":[["e1772a21.436618"]]},{"id":"daf1b63b.b15078","type":"outcome","name":"unassign","xml":"<outcome value='unassign'>","comments":"","outputs":1,"x":472.00006103515625,"y":1390.750020980835,"z":"4c8d51ee.aa222","wires":[["dc1f776d.c14688"]]},{"id":"ad1036db.d18148","type":"call","name":"call self-service-capability-param-resolution","xml":"<call module='GENERIC-RESOURCE-API' rpc='self-service-capability-param-resolution' mode='sync' >\n","comments":"","outputs":1,"x":1064.9166870117188,"y":286.5000114440918,"z":"4c8d51ee.aa222","wires":[["663dbb4b.9ceb64"]]},{"id":"663dbb4b.9ceb64","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1314.9166679382324,"y":286.50000762939453,"z":"4c8d51ee.aa222","wires":[["d1e6639e.fabbf"]]},{"id":"d1e6639e.fabbf","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"`'Not all assignments are resolved' + $error-message`\" />\n","comments":"","x":1473.666648864746,"y":286.50000381469727,"z":"4c8d51ee.aa222","wires":[]},{"id":"f8a36f2.394259","type":"call","name":"call self-serve-generate-FQPN","xml":"<call module='GENERIC-RESOURCE-API' rpc='self-serve-generate-FQPN' mode='sync' >\n","comments":"","outputs":1,"x":1020.1667022705078,"y":731.6388759613037,"z":"4c8d51ee.aa222","wires":[["5220801a.87e0e"]]},{"id":"5220801a.87e0e","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1239.1666831970215,"y":731.6388721466064,"z":"4c8d51ee.aa222","wires":[["cd1742f1.ebf3b"]]},{"id":"cd1742f1.ebf3b","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"`'Not all assignments are resolved' + $error-message`\" />\n","comments":"","x":1397.9166641235352,"y":731.6388683319092,"z":"4c8d51ee.aa222","wires":[]},{"id":"73c65e22.a53dc","type":"set","name":"set eipam-ip-block.plans[].plan-name, address-family. client-key","xml":"<set>\n<parameter name='eipam-ip-block.group-flag'\n    value='`$tmp.ss.group-flag`' />\n<parameter name='eipam-ip-block.plans[0].plan-name'\n    value='`$tmp.ss.plan-name`' />\n<parameter name='eipam-ip-block.plans[0].address-family'\n    value=\"`$tmp.ss.address-family`\" />\n<parameter name='eipam-ip-block.plans[0].requests[0].client-key'\n\tvalue=\"`$tmp.ss.client-key`\" />","comments":"","x":1124.1665344238281,"y":845.4170045852661,"z":"4c8d51ee.aa222","wires":[]},{"id":"45d141fd.17d36","type":"set","name":"COPY eipam requests[] to self-serve-generate-FQPN-output","xml":"<set>\n<parameter name='eipam-ip-block.plans[0].requests[0].'\n    value='self-serve-generate-FQPN-output.' />\n","comments":"","x":1114.7501983642578,"y":797.7500114440918,"z":"4c8d51ee.aa222","wires":[]},{"id":"85b0cb2a.490cf8","type":"set","name":"set eipam-ip-block.plans[].requests_length","xml":"<set>\n<parameter name='eipam-ip-block.plans[0].requests_length' value='1' />\n","comments":"","x":1061.7501373291016,"y":888.784987449646,"z":"4c8d51ee.aa222","wires":[]},{"id":"6c29f2a9.9da9ac","type":"execute","name":"call EIPAM assignIPAddress","xml":"<execute plugin=\"com.att.sdnctl.sli.plugin.eipam.EIPAMPlugin\" method=\"assignIPAddress\">","comments":"","outputs":1,"x":1018.6908111572266,"y":935.2500143051147,"z":"4c8d51ee.aa222","wires":[["1f5aa5d3.b14cfa"]]},{"id":"1f5aa5d3.b14cfa","type":"failure","name":"failure","xml":"<outcome value='failure'>","outputs":1,"x":1232.6908111572266,"y":935.2500143051147,"z":"4c8d51ee.aa222","wires":[["58629e8f.2d1c6"]]},{"id":"324ab707.ca85b8","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"`'An error occured while obtaining ip addresses from EIPAM: ' + $error-message`\" />\n","comments":"","x":1588.690818786621,"y":980.2500143051147,"z":"4c8d51ee.aa222","wires":[]},{"id":"5bb9029c.5669ec","type":"set","name":"set tmp.ss.param.capability-name","xml":"<set>\n<parameter name='tmp.ss.param.capability-name' \n\tvalue='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.capability-name`' />\n","comments":"","x":1474.527732849121,"y":345.1388931274414,"z":"4c8d51ee.aa222","wires":[]},{"id":"cb34ae7b.25f88","type":"for","name":"for pidx in param_length","xml":"<for index=\"pidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param_length`\">","comments":"","outputs":1,"x":1184.741958618164,"y":345.2103633880615,"z":"4c8d51ee.aa222","wires":[["fc904c6.826c3b","5bb9029c.5669ec"]]},{"id":"fc904c6.826c3b","type":"switchNode","name":"switch: capability-name - ss vs param","xml":"<switch test='`$tmp.ss.param.capability-name == $ss.capability-name`'>\n","comments":"","outputs":1,"x":1486.491958618164,"y":388.7103672027588,"z":"4c8d51ee.aa222","wires":[["d90d2f22.779d1"]]},{"id":"d90d2f22.779d1","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1725.2419662475586,"y":388.4603672027588,"z":"4c8d51ee.aa222","wires":[["d0684089.46f85"]]},{"id":"80d803a3.c4cb2","type":"switchNode","name":"switch: resource-key[].name","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].name`'>\n","comments":"","outputs":1,"x":1490.4724197387695,"y":478.27784156799316,"z":"4c8d51ee.aa222","wires":[["58068caa.35b4a4","b18f6739.6cac08","2eb14a8d.8ff0f6","def85b23.3778e8"]]},{"id":"58068caa.35b4a4","type":"outcome","name":"plan-name","xml":"<outcome value='plan-name'>\n","comments":"","outputs":1,"x":1739.7780113220215,"y":518.0278244018555,"z":"4c8d51ee.aa222","wires":[["e60db29f.5e4e4"]]},{"id":"e60db29f.5e4e4","type":"set","name":"set tmp.ss.plan-name","xml":"<set>\n<parameter name='tmp.ss.plan-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":1956.2780151367188,"y":517.7778263092041,"z":"4c8d51ee.aa222","wires":[]},{"id":"74920e5b.b8e65","type":"outcome","name":"service-instance-id","xml":"<outcome value='service-instance-id'>\n","comments":"","outputs":1,"x":1765.8612899780273,"y":558.7500667572021,"z":"4c8d51ee.aa222","wires":[["c1898e3b.6c4b3"]]},{"id":"c1898e3b.6c4b3","type":"set","name":"set tmp.ss.service-instance-id","xml":"<set>\n<parameter name='tmp.ss.service-instance-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":2022.1112976074219,"y":558.5000667572021,"z":"4c8d51ee.aa222","wires":[]},{"id":"b18f6739.6cac08","type":"outcome","name":"client-key","xml":"<outcome value='client-key'>\n","comments":"","outputs":1,"x":1741.944694519043,"y":681.3889102935791,"z":"4c8d51ee.aa222","wires":[["551a7376.0c67ac"]]},{"id":"551a7376.0c67ac","type":"set","name":"set tmp.ss.client-key","xml":"<set>\n<parameter name='tmp.ss.client-key' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":1936.944694519043,"y":681.1389102935791,"z":"4c8d51ee.aa222","wires":[]},{"id":"8091eae9.40a578","type":"set","name":"set service-data...param[].value = ip-prefix","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].value' \n\tvalue='`$eipam-ip-block.plans[0].requests[0].ip-prefix`' />\n","comments":"","x":1997.7500305175781,"y":1131.7500171661377,"z":"4c8d51ee.aa222","wires":[]},{"id":"5501cc03.78ecf4","type":"for","name":"for pidx in param_length","xml":"<for index=\"pidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param_length`\">","comments":"","outputs":1,"x":1002.9642486572266,"y":1131.5714282989502,"z":"4c8d51ee.aa222","wires":[["ae6c0260.65d4e"]]},{"id":"ae6c0260.65d4e","type":"switchNode","name":"switch: param[].name","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].name`'>\n","comments":"","outputs":1,"x":1250.9642486572266,"y":1131.3214282989502,"z":"4c8d51ee.aa222","wires":[["e78be6ce.3b8de8","eca02a25.601a98","cb1aaf87.aa51c"]]},{"id":"e78be6ce.3b8de8","type":"outcome","name":"vmxvre_oam_ip_0","xml":"<outcome value='vmxvre_oam_ip_0'>\n","comments":"","outputs":1,"x":1495.5,"y":1131.5000019073486,"z":"4c8d51ee.aa222","wires":[["c2896d41.167a9"]]},{"id":"eca02a25.601a98","type":"outcome","name":"vmxvre_oam_ip_prefix_0","xml":"<outcome value='vmxvre_oam_ip_prefix_0'>\n","comments":"","outputs":1,"x":1516.7500228881836,"y":1176.2500171661377,"z":"4c8d51ee.aa222","wires":[["a7f62458.93a518"]]},{"id":"cb1aaf87.aa51c","type":"outcome","name":"vmxvre_oam_gateway","xml":"<outcome value='vmxvre_oam_gateway'>\n","comments":"","outputs":1,"x":1509.2500228881836,"y":1220.2500190734863,"z":"4c8d51ee.aa222","wires":[["46c7f920.676b88"]]},{"id":"c2896d41.167a9","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1726.7500267028809,"y":1131.5000171661377,"z":"4c8d51ee.aa222","wires":[["8091eae9.40a578","22fc13a4.ba8c9c"]]},{"id":"22fc13a4.ba8c9c","type":"set","name":"set resource-resolution-data.status = SUCCESS","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.status' \n\tvalue='SUCCESS' />\n","comments":"","x":2042.7500305175781,"y":1294.0000190734863,"z":"4c8d51ee.aa222","wires":[]},{"id":"1d153407.2962ac","type":"set","name":"set service-data...param[].value = ip-prefix-length","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].value' \n\tvalue='`$eipam-ip-block.plans[0].requests[0].ip-prefix-length`' />\n","comments":"","x":2019.5,"y":1176.5000019073486,"z":"4c8d51ee.aa222","wires":[]},{"id":"a7f62458.93a518","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1727.4999961853027,"y":1176.2500019073486,"z":"4c8d51ee.aa222","wires":[["1d153407.2962ac","22fc13a4.ba8c9c"]]},{"id":"7f6ae9a1.4b5088","type":"set","name":"set service-data...param[].value = ReservedKeyIPAddress","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].value' \n\tvalue='`$eipam-ip-block.plans[0].requests[0].ReservedAssignments[0].ReservedAssignment[3].ReservedKeyIPAddress`' />\n","comments":"","x":2047,"y":1220.7500019073486,"z":"4c8d51ee.aa222","wires":[]},{"id":"46c7f920.676b88","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1729.9999961853027,"y":1220.5000019073486,"z":"4c8d51ee.aa222","wires":[["7f6ae9a1.4b5088","22fc13a4.ba8c9c"]]},{"id":"f027e8c7.f6b778","type":"update","name":"get-resource EIPAM_IP_ASSIGNMENTS","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n\tkey='SELECT * from EIPAM_IP_ASSIGNMENTS \n\t\tWHERE service_instance_id = $tmp.ss.service-instance-id\n\t\tAND client_key = $tmp.ss.client-key'>","comments":"","outputs":1,"x":960.5000305175781,"y":1391.0000267028809,"z":"4c8d51ee.aa222","wires":[["5290489d.aa6bd8","ae6f46b.494f8b8"]]},{"id":"5290489d.aa6bd8","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1242.0714683532715,"y":1390.57146525383,"z":"4c8d51ee.aa222","wires":[["85dea435.ec5a98"]]},{"id":"85dea435.ec5a98","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1412.2142769949778,"y":1391.0000430515834,"z":"4c8d51ee.aa222","wires":[[]]},{"id":"ae6f46b.494f8b8","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1238.7856140136719,"y":1438.2857780456543,"z":"4c8d51ee.aa222","wires":[["b7457ade.ae78f8"]]},{"id":"dc1f776d.c14688","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":641.3214263916016,"y":1391.214376449585,"z":"4c8d51ee.aa222","wires":[["abaf443f.4c2828","f027e8c7.f6b778","21932b55.ea6a44"]]},{"id":"e1772a21.436618","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":746.2500305175781,"y":286.50000858306885,"z":"4c8d51ee.aa222","wires":[["ad1036db.d18148","f8a36f2.394259","45d141fd.17d36","73c65e22.a53dc","85b0cb2a.490cf8","abaf443f.4c2828","5501cc03.78ecf4","6c29f2a9.9da9ac"]]},{"id":"73859123.84533","type":"set","name":"set resource-resolution-data.status = FAILED","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.status' value='FAILED' />\n","comments":"","x":1687.5000228881836,"y":935.2500143051147,"z":"4c8d51ee.aa222","wires":[]},{"id":"58629e8f.2d1c6","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":1394.5,"y":935.500002861023,"z":"4c8d51ee.aa222","wires":[["73859123.84533","324ab707.ca85b8"]]},{"id":"d0684089.46f85","type":"break","name":"break","xml":"<break>\n","comments":"","x":1863.638874053955,"y":387.7777795791626,"z":"4c8d51ee.aa222","wires":[]},{"id":"e5e862b9.d135f","type":"for","name":"for kidx in resource-key_length","xml":"<for index=\"kidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key_length`\">","comments":"","outputs":1,"x":1211.33349609375,"y":478.138952255249,"z":"4c8d51ee.aa222","wires":[["80d803a3.c4cb2"]]},{"id":"abaf443f.4c2828","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":949.9999847412109,"y":345.33333015441895,"z":"4c8d51ee.aa222","wires":[["cb34ae7b.25f88","e5e862b9.d135f","3b9d3ddc.c9b2f2"]]},{"id":"aa62f0e2.738ae","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/ss.eipam.log' />\n","comments":"","outputs":1,"x":307.50000762939453,"y":396.2500057220459,"z":"4c8d51ee.aa222","wires":[[]]},{"id":"8a1109d5.7e1748","type":"update","name":"update EIPAM_IP_ASSIGNMENTS to PENDING_DELETE...","xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource\" resource=\"SQL\"\n\tkey=\"UPDATE EIPAM_IP_ASSIGNMENTS set status = $tmp.status \n\t\tWHERE service_instance_id = $tmp.ss.service-instance-id \n\t\tAND client_key = $tmp.ss.client-key\" >","comments":"","outputs":1,"x":1772.0476531982422,"y":1482.5001668930054,"z":"4c8d51ee.aa222","wires":[["888fe6c5.8eb528"]]},{"id":"773091ea.905b3","type":"set","name":"set status = PENDING_DELETE","xml":"<set>\n<parameter name='tmp.status' value=\"PENDING_DELETE\" />\n","comments":"","x":1681.5476455688477,"y":1439.583417892456,"z":"4c8d51ee.aa222","wires":[]},{"id":"888fe6c5.8eb528","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2078.047561645508,"y":1481.8334665298462,"z":"4c8d51ee.aa222","wires":[["e072f262.869e"]]},{"id":"e072f262.869e","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Error updating EIPAM_IP_ASSIGNMENTS table to unassign ip with client_key=' + $tmp.ss.client-key + ' and service_instance_id=' + $tmp.ss.service-instance-id`\" />\n","comments":"","x":2237.0475883483887,"y":1481.643201828003,"z":"4c8d51ee.aa222","wires":[]},{"id":"7748f846.1995c8","type":"execute","name":"execute EIPAM unassign IP addresses","xml":"<execute plugin=\"com.att.sdnctl.sli.plugin.eipam.EIPAMPlugin\" method=\"unassignIPAddress\">\n<parameter name=\"deleteEIPAM_status\" value=\"`$tmp.status`\" />\n","comments":"","outputs":1,"x":1707.047622680664,"y":1527.500210762024,"z":"4c8d51ee.aa222","wires":[["d413898e.28ccd8"]]},{"id":"d413898e.28ccd8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1943.7142486572266,"y":1527.500153541565,"z":"4c8d51ee.aa222","wires":[["293953df.572a2c"]]},{"id":"293953df.572a2c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Error in EIPAMPlugin.unassignIPAddress with client-key='+ $tmp.ss.client-key`\" />\n","comments":"","x":2105.7142753601074,"y":1527.3098888397217,"z":"4c8d51ee.aa222","wires":[]},{"id":"b7457ade.ae78f8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1421.000015258789,"y":1439.0000228881836,"z":"4c8d51ee.aa222","wires":[["773091ea.905b3","8a1109d5.7e1748","7748f846.1995c8"]]},{"id":"3b9d3ddc.c9b2f2","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"`'SS: pidx: ' + $pidx`\"/>\n","comments":"","outputs":1,"x":1136.250015258789,"y":423.7500057220459,"z":"4c8d51ee.aa222","wires":[[]]},{"id":"2eb14a8d.8ff0f6","type":"outcome","name":"group-flag","xml":"<outcome value='group-flag'>\n","comments":"","outputs":1,"x":1736.6666793823242,"y":477.77775382995605,"z":"4c8d51ee.aa222","wires":[["5c58e9be.2f7838"]]},{"id":"5c58e9be.2f7838","type":"set","name":"set tmp.ss.group-flag","xml":"<set>\n<parameter name='tmp.ss.group-flag' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":1981.0276336669922,"y":477.88886547088623,"z":"4c8d51ee.aa222","wires":[]},{"id":"def85b23.3778e8","type":"outcome","name":"address-family","xml":"<outcome value='address-family'>\n","comments":"","outputs":1,"x":1754.4443893432617,"y":599.9999828338623,"z":"4c8d51ee.aa222","wires":[["ffb8feff.1d662"]]},{"id":"ffb8feff.1d662","type":"set","name":"set tmp.ss.address-family","xml":"<set>\n<parameter name='tmp.ss.address-family' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":2016.6943550109863,"y":599.7499771118164,"z":"4c8d51ee.aa222","wires":[]},{"id":"b96082bd.2df27","type":"outcome","name":"mask","xml":"<outcome value='mask'>\n","comments":"","outputs":1,"x":1732.2222213745117,"y":639.9999828338623,"z":"4c8d51ee.aa222","wires":[["59d3e4c6.50166c"]]},{"id":"59d3e4c6.50166c","type":"set","name":"set tmp.ss.mask","xml":"<set>\n<parameter name='tmp.ss.mask' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n","comments":"","x":1985.4721603393555,"y":639.9999504089355,"z":"4c8d51ee.aa222","wires":[]},{"id":"21932b55.ea6a44","type":"for","name":"for pidx in param_length","xml":"<for index=\"pidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param_length`\">","comments":"","outputs":1,"x":908.75,"y":1629.8214111328125,"z":"4c8d51ee.aa222","wires":[["2de84f0a.a0893"]]},{"id":"2de84f0a.a0893","type":"switchNode","name":"switch: param[].name","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].name`'>\n","comments":"","outputs":1,"x":1156.75,"y":1629.5714111328125,"z":"4c8d51ee.aa222","wires":[["3b2d7861.ac7dc8","f774c02.497b44","bb3127bc.024528"]]},{"id":"3b2d7861.ac7dc8","type":"outcome","name":"vmxvre_oam_ip_0","xml":"<outcome value='vmxvre_oam_ip_0'>\n","comments":"","outputs":1,"x":1401.2857513427734,"y":1629.749984741211,"z":"4c8d51ee.aa222","wires":[["3be95976.0ed0e6"]]},{"id":"f774c02.497b44","type":"outcome","name":"vmxvre_oam_ip_prefix_0","xml":"<outcome value='vmxvre_oam_ip_prefix_0'>\n","comments":"","outputs":1,"x":1422.535774230957,"y":1674.5,"z":"4c8d51ee.aa222","wires":[["3be95976.0ed0e6"]]},{"id":"bb3127bc.024528","type":"outcome","name":"vmxvre_oam_gateway","xml":"<outcome value='vmxvre_oam_gateway'>\n","comments":"","outputs":1,"x":1415.035774230957,"y":1718.5000019073486,"z":"4c8d51ee.aa222","wires":[["3be95976.0ed0e6"]]},{"id":"3be95976.0ed0e6","type":"set","name":"set resource-resolution-data.status = DELETED","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.status' \n\tvalue='DELETED' />\n","comments":"","x":1812.0357971191406,"y":1674.250023841858,"z":"4c8d51ee.aa222","wires":[]}]