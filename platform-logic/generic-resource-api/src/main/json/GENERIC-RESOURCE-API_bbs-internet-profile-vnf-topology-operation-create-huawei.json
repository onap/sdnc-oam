[
    {
        "id": "e24bd1dc.e94098",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 93.75,
        "y": 67,
        "z": "ad46b000.c8324",
        "wires": [
            [
                "4ea3eab3.ac826c"
            ]
        ]
    },
    {
        "id": "4ea3eab3.ac826c",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 453.74964904785156,
        "y": 68.00002193450928,
        "z": "ad46b000.c8324",
        "wires": [
            [
                "5c5c94c9.de2b2c"
            ]
        ]
    },
    {
        "id": "5c5c94c9.de2b2c",
        "type": "method",
        "name": "method:bbs-internet-profile-vnf-topology-operation-create-huawei",
        "xml": "<method rpc='bbs-internet-profile-vnf-topology-operation-create-huawei' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 448.7496643066406,
        "y": 285.0000915527344,
        "z": "ad46b000.c8324",
        "wires": [
            [
                "f9739e65.c96bc8"
            ]
        ]
    },
    {
        "id": "f9739e65.c96bc8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 875.7498626708984,
        "y": 287.0000991821289,
        "z": "ad46b000.c8324",
        "wires": [
            [
                "4406703d.473cb",
                "24ad8f04.047a9",
                "e22f8867.ca2c88",
                "e451aa9.94334d8"
            ]
        ]
    },
    {
        "id": "4406703d.473cb",
        "type": "call",
        "name": "call:bbs-internet-profile-vnf-topology-operation-common-huawei",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='bbs-internet-profile-vnf-topology-operation-common-huawei' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1391.7501525878906,
        "y": 200.00001907348633,
        "z": "ad46b000.c8324",
        "wires": [
            []
        ]
    },
    {
        "id": "e451aa9.94334d8",
        "type": "execute",
        "name": "execute:CreateInternetProfileInstance",
        "xml": "<execute plugin=\"org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode\" method=\"sendRequest\">\n    <parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/bbs-internet-profile-operation.json'`\" />\n    <parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/CreateInternetProfileInstance'`\" />\n    <parameter name=\"contentType\" value=\"application/json\"/>\n    <parameter name=\"httpMethod\" value=\"post\"/>\n    <parameter name=\"responsePrefix\" value=\"service-result\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1281.4007873535156,
        "y": 285.9608345031738,
        "z": "ad46b000.c8324",
        "wires": [
            [
                "8b4a24c2.b740e",
                "ef3863e0.509128"
            ]
        ]
    },
    {
        "id": "ef3863e0.509128",
        "type": "outcome",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1582.7337684631348,
        "y": 285.9608345031738,
        "z": "ad46b000.c8324",
        "wires": [
            [
                "7fe5ce9e.59b238"
            ]
        ]
    },
    {
        "id": "8b4a24c2.b740e",
        "type": "outcome",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1591.7336807250977,
        "y": 360.96083641052246,
        "z": "ad46b000.c8324",
        "wires": [
            [
                "aa1c3229.429f2"
            ]
        ]
    },
    {
        "id": "aa1c3229.429f2",
        "type": "switchNode",
        "name": "switch:service-result",
        "xml": "<switch test=\"`$service-result.errors.error[0].error-message`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1826.7498016357422,
        "y": 360.00013160705566,
        "z": "ad46b000.c8324",
        "wires": [
            [
                "c0c77be6.d8a9",
                "6e05de0f.e6dcb8"
            ]
        ]
    },
    {
        "id": "7fe5ce9e.59b238",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"error-code\" value=\"500\" />\n<parameter name=\"error-message\" value=\"Error failed to call CreateInternetProfileInstance\" />\n",
        "comments": "",
        "x": 2095.000898361206,
        "y": 286.250337600708,
        "z": "ad46b000.c8324",
        "wires": []
    },
    {
        "id": "c0c77be6.d8a9",
        "type": "outcome",
        "name": "Other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2052.750141143799,
        "y": 361.0002250671387,
        "z": "ad46b000.c8324",
        "wires": [
            [
                "d97a5f32.793c18"
            ]
        ]
    },
    {
        "id": "6e05de0f.e6dcb8",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 2062.7498474121094,
        "y": 447.0000915527344,
        "z": "ad46b000.c8324",
        "wires": [
            [
                "637db1ee.358f3"
            ]
        ]
    },
    {
        "id": "d97a5f32.793c18",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"error-code\" value=\"500\" />\n<parameter name=\"error-message\" value=\"`'Error CreateInternetProfileInstance return: '+$service-result.errors.error[0].error-message`\" />\n\n",
        "comments": "",
        "x": 2239.2498092651367,
        "y": 361.00006198883057,
        "z": "ad46b000.c8324",
        "wires": []
    },
    {
        "id": "637db1ee.358f3",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2220.916477203369,
        "y": 448.00006675720215,
        "z": "ad46b000.c8324",
        "wires": [
            []
        ]
    },
    {
        "id": "24ad8f04.047a9",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1186.2499237060547,
        "y": 1085.000192642212,
        "z": "ad46b000.c8324",
        "wires": []
    },
    {
        "id": "d8e72813.387f28",
        "type": "save",
        "name": "save:generic-vnf",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" resource=\"generic-vnf\" key=\"generic-vnf.vnf-id = $vnf-id\" >\n<parameter name= \"vnf-id\" value = \"`$vnf-id`\"/>\n<parameter name=  \"vnf-name\" value = \"`$vnf-name`\"/>\n<parameter name=  \"vnf-type\" value = \"InternetProfile\"/>\n<parameter name=  \"service-id\" value = \"`$vnf-topology-operation-input.service-information.service-id`\"/>\n<parameter name=  \"prov-status\" value = \"ACTIVE\"/>\n<parameter name=  \"orchestration-status\" value = \"Active\"/>\n<parameter name=  \"is-closed-loop-disabled\" value = \"false\" />\n<parameter name=  \"model-invariant-id\" value = \"`$vnf-topology-operation-input.vnf-information.onap-model-information.model-invariant-uuid`\"/>\n<parameter name=  \"model-version-id\" value = \"`$vnf-topology-operation-input.vnf-information.onap-model-information.model-uuid`\"/>\n<parameter name=  \"model-customization-id\" value = \"`$vnf-topology-operation-input.vnf-information.onap-model-information.model-customization-uuid`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1464.78125,
        "y": 751.0311889648438,
        "z": "ad46b000.c8324",
        "wires": [
            [
                "333581cd.5fc33e",
                "72a79e15.e23ae",
                "8820e403.3378d8"
            ]
        ]
    },
    {
        "id": "333581cd.5fc33e",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1701.0030918121338,
        "y": 622.9199714660645,
        "z": "ad46b000.c8324",
        "wires": [
            [
                "3908c055.5bdf4"
            ]
        ]
    },
    {
        "id": "72a79e15.e23ae",
        "type": "failure",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1711.978910446167,
        "y": 682.9358277320862,
        "z": "ad46b000.c8324",
        "wires": [
            [
                "d8258ad6.c3d598"
            ]
        ]
    },
    {
        "id": "3908c055.5bdf4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Failure calling AAI to save generic-vnf\" />\n",
        "comments": "",
        "x": 1937.1456394195557,
        "y": 622.4914364814758,
        "z": "ad46b000.c8324",
        "wires": []
    },
    {
        "id": "d8258ad6.c3d598",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"generic-vnf instance does not exist in AAI\" />\n",
        "comments": "",
        "x": 1932.0264377593994,
        "y": 683.4121422767639,
        "z": "ad46b000.c8324",
        "wires": []
    },
    {
        "id": "8820e403.3378d8",
        "type": "outcome",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1705.5897159576416,
        "y": 748.0623078346252,
        "z": "ad46b000.c8324",
        "wires": [
            []
        ]
    },
    {
        "id": "58b69da0.e8a154",
        "type": "record",
        "name": "log file",
        "xml": " <record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n    <parameter name=\"file\" value=\"/opt/oak/logx.txt\" />\n    <parameter name=\"field1\" value=\"save generic-vnf success!\" />\n    ",
        "comments": "",
        "outputs": 1,
        "x": 1913.5899696350098,
        "y": 746.0624370574951,
        "z": "ad46b000.c8324",
        "wires": [
            []
        ]
    },
    {
        "id": "d09cdb3b.55b35",
        "type": "save",
        "name": "save:metadata",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" resource=\"service-instance:metadata\"\n key=\"service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-id  \n\tAND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id\n\t  AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n\t  AND service-instance.service-instance-id =  $vnf-topology-operation-input.service-information.service-instance-id\"  force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"metadata.metadatum[0].metaname\" value=\"service-type\" />\n    <parameter name=\"metadata.metadatum[0].metaval\" value=\"`$prop.bbs.service_type`\" />\n    <parameter name=\"metadata.metadatum[1].metaname\" value=\"up-speed\" />\n    <parameter name=\"metadata.metadatum[1].metaval\" value=\"`$prop.bbs.up_speed`\" />\n    <parameter name=\"metadata.metadatum[2].metaname\" value=\"down-speed\" />\n    <parameter name=\"metadata.metadatum[2].metaval\" value=\"`$prop.bbs.down_speed`\" />\n    <!--<parameter name=\"metadata.metadatum[3].metaname\" value=\"cvlan\" />-->\n    <!--<parameter name=\"metadata.metadatum[3].metaval\" value=\"`$prop.bbs.c_vlan`\" />-->\n    <!--<parameter name=\"metadata.metadatum[4].metaname\" value=\"svlan\" />-->\n    <!--<parameter name=\"metadata.metadatum[4].metaval\" value=\"`$prop.bbs.s_vlan`\" />-->\n    <!--<parameter name=\"metadata.metadatum[5].metaname\" value=\"expected-ont-id\" />-->\n    <!--<parameter name=\"metadata.metadatum[5].metaval\" value=\"`$prop.bbs.ont_sn`\" />-->\n    <!--<parameter name=\"metadata.metadatum[6].metaname\" value=\"rgw-mac-address\" />-->\n    <!--<parameter name=\"metadata.metadatum[6].metaval\" value=\"`$prop.bbs.mac`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 1463.2805881500244,
        "y": 903.0309810638428,
        "z": "ad46b000.c8324",
        "wires": [
            [
                "47ea2ed4.dab158",
                "9b5c45a7.24ac",
                "6e196242.6f111c"
            ]
        ]
    },
    {
        "id": "47ea2ed4.dab158",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1693.756097793579,
        "y": 834.3955845832825,
        "z": "ad46b000.c8324",
        "wires": [
            [
                "9c97c54a.182df"
            ]
        ]
    },
    {
        "id": "9b5c45a7.24ac",
        "type": "failure",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1705.7322597503662,
        "y": 904.4115180969238,
        "z": "ad46b000.c8324",
        "wires": [
            [
                "b3de2c8b.bfd47"
            ]
        ]
    },
    {
        "id": "9c97c54a.182df",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Failure calling AAI to save metadatum\" />\n",
        "comments": "",
        "x": 1933.8988933563232,
        "y": 832.967086315155,
        "z": "ad46b000.c8324",
        "wires": []
    },
    {
        "id": "b3de2c8b.bfd47",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"metadatum instance does not exist in AAI\" />\n",
        "comments": "",
        "x": 1930.7797927856445,
        "y": 903.8877544403076,
        "z": "ad46b000.c8324",
        "wires": []
    },
    {
        "id": "6e196242.6f111c",
        "type": "outcome",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1700.3429698944092,
        "y": 974.5379576683044,
        "z": "ad46b000.c8324",
        "wires": [
            []
        ]
    },
    {
        "id": "7263158e.3880f4",
        "type": "record",
        "name": "log file",
        "xml": " <record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n    <parameter name=\"file\" value=\"/opt/oak/logx.txt\" />\n    <parameter name=\"field1\" value=\"save metadatum success!\" />\n    ",
        "comments": "",
        "outputs": 1,
        "x": 1911.3429698944092,
        "y": 974.5379576683044,
        "z": "ad46b000.c8324",
        "wires": [
            []
        ]
    },
    {
        "id": "e22f8867.ca2c88",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1159.914836883545,
        "y": 624.9997653961182,
        "z": "ad46b000.c8324",
        "wires": [
            [
                "d8e72813.387f28",
                "d09cdb3b.55b35",
                "336f1685.eaa8ba",
                "869f359a.e187d8",
                "ad68b782.700918"
            ]
        ]
    },
    {
        "id": "336f1685.eaa8ba",
        "type": "set",
        "name": "set:variables",
        "xml": "<set>\n<parameter name='vnf-id' value=\"`$prop.random-data-list[3]`\"/>\n<parameter name='vnf-name' value=\"`'vnf-'+$prop.random-data-list[4]`\"/>\n",
        "comments": "",
        "x": 1447.9151859283447,
        "y": 621.332763671875,
        "z": "ad46b000.c8324",
        "wires": []
    },
    {
        "id": "869f359a.e187d8",
        "type": "execute",
        "name": "execute:generate",
        "xml": " <execute plugin=\"org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils\" method=\"generateUUID\">\n    <parameter name=\"ctx-destination\" value=\"prop.random-data\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1469.2793998718262,
        "y": 547.030613899231,
        "z": "ad46b000.c8324",
        "wires": [
            [
                "945f0b47.7a271"
            ]
        ]
    },
    {
        "id": "945f0b47.7a271",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1698.2793426513672,
        "y": 548.0305881500244,
        "z": "ad46b000.c8324",
        "wires": [
            [
                "ba59e650.603da8"
            ]
        ]
    },
    {
        "id": "ba59e650.603da8",
        "type": "execute",
        "name": "execute",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n    <parameter name=\"ctx_memory_result_key\" value=\"prop.random-data-list\"/>\n    <parameter name=\"original_string\" value=\"`$prop.random-data`\"/>\n    <parameter name=\"regex\" value=\"-\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1889.2793998718262,
        "y": 546.0305881500244,
        "z": "ad46b000.c8324",
        "wires": [
            [
                "983150fa.b57c18"
            ]
        ]
    },
    {
        "id": "7b3b5961.4f30b8",
        "type": "record",
        "name": "log file",
        "xml": " <record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n    <parameter name=\"file\" value=\"/opt/oak/logx.txt\" />\n    <parameter name=\"field1\" value=\"`$prop.random-data`\" />\n    ",
        "comments": "",
        "outputs": 1,
        "x": 2221.279462814331,
        "y": 544.0306491851807,
        "z": "ad46b000.c8324",
        "wires": [
            []
        ]
    },
    {
        "id": "983150fa.b57c18",
        "type": "outcome",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2056.27933883667,
        "y": 545.0306186676025,
        "z": "ad46b000.c8324",
        "wires": [
            []
        ]
    },
    {
        "id": "ad68b782.700918",
        "type": "save",
        "name": "save:relationship",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" resource=\"service-instance:relationship-list\" \n      key=\"service-instance.service-instance-id =  $vnf-topology-operation-input.service-information.service-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id\n         AND service-subscription.service-type =  $vnf-topology-operation-input.service-information.subscription-service-type \n         AND service-instance.service-instance-id =  $vnf-topology-operation-input.service-information.service-instance-id\" force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"generic-vnf\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/generic-vnfs/generic-vnf/' + $vnf-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"generic-vnf.vnf-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$vnf-id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1408.75,
        "y": 1123,
        "z": "ad46b000.c8324",
        "wires": [
            [
                "95e71e63.b5a5e",
                "2d716580.c38172",
                "e09c00e3.de6a5"
            ]
        ]
    },
    {
        "id": "95e71e63.b5a5e",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1639.2255096435547,
        "y": 1054.3646035194397,
        "z": "ad46b000.c8324",
        "wires": [
            [
                "aaa91f6b.20f22"
            ]
        ]
    },
    {
        "id": "2d716580.c38172",
        "type": "failure",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1651.2016716003418,
        "y": 1124.380537033081,
        "z": "ad46b000.c8324",
        "wires": [
            [
                "bffe8727.325998"
            ]
        ]
    },
    {
        "id": "aaa91f6b.20f22",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Failure calling AAI to save metadatum\" />\n",
        "comments": "",
        "x": 1879.3683052062988,
        "y": 1052.9361052513123,
        "z": "ad46b000.c8324",
        "wires": []
    },
    {
        "id": "bffe8727.325998",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"metadatum instance does not exist in AAI\" />\n",
        "comments": "",
        "x": 1876.2492046356201,
        "y": 1123.8567733764648,
        "z": "ad46b000.c8324",
        "wires": []
    },
    {
        "id": "e09c00e3.de6a5",
        "type": "outcome",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1645.8123817443848,
        "y": 1194.5069766044617,
        "z": "ad46b000.c8324",
        "wires": [
            []
        ]
    }
]