[
    {
        "id": "8760ee4d.bacba",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 121.25,
        "y": 101.16365623474121,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "a9ae8cec.2004d"
            ]
        ]
    },
    {
        "id": "a9ae8cec.2004d",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 235.53570556640625,
        "y": 141.4017677307129,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "3dac1de6.47703a"
            ]
        ]
    },
    {
        "id": "3dac1de6.47703a",
        "type": "method",
        "name": "method vnf-topology-operation-unassign",
        "xml": "<method rpc='vnf-topology-operation-unassign' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 217.67862701416016,
        "y": 181.1636562347412,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "8aa731f2.f78648"
            ]
        ]
    },
    {
        "id": "287c593d.cb7aa6",
        "type": "comment",
        "name": "vnf-topology-operation-unassign",
        "info": "",
        "comments": "",
        "x": 515.594856262207,
        "y": 48.75,
        "z": "b679ce73.4725c",
        "wires": []
    },
    {
        "id": "da8ed21c.290538",
        "type": "switchNode",
        "name": "switch request-action",
        "xml": "<switch test='`$vnf-topology-operation-input.request-information.request-action`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 524.773811340332,
        "y": 280.0207939147949,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "50a65b42.041c0c",
                "85a5b069.51ff2"
            ]
        ]
    },
    {
        "id": "50a65b42.041c0c",
        "type": "outcome",
        "name": "DeleteVnfInstance",
        "xml": "<outcome value='DeleteVnfInstance'>\n",
        "comments": "",
        "outputs": 1,
        "x": 778.4881057739258,
        "y": 257.16367530822754,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "93688742.285b9"
            ]
        ]
    },
    {
        "id": "85a5b069.51ff2",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 740.4880714416504,
        "y": 302.87800312042236,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "bfa2ad9d.0bdb1"
            ]
        ]
    },
    {
        "id": "93688742.285b9",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 963.3452339172363,
        "y": 257.16370487213135,
        "z": "b679ce73.4725c",
        "wires": [
            []
        ]
    },
    {
        "id": "bfa2ad9d.0bdb1",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"If svc-action is 'deactivate' then request-action must be 'DeleteVnfInstance'\" />\n",
        "comments": "",
        "x": 980.4880790710449,
        "y": 302.87796115875244,
        "z": "b679ce73.4725c",
        "wires": []
    },
    {
        "id": "8aa731f2.f78648",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 199.58333587646484,
        "y": 574.4969902038574,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "da8ed21c.290538",
                "9b073e31.2b9548",
                "d811a825.e4506",
                "230a1984.7eb2de",
                "1570abd0.28319c",
                "91a3386a.faef3",
                "12606f3f.12bf41",
                "a2ededb3.20eb68"
            ]
        ]
    },
    {
        "id": "9b073e31.2b9548",
        "type": "switchNode",
        "name": "switch vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 511.24998474121094,
        "y": 349.49701976776123,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "835264a.de01c98"
            ]
        ]
    },
    {
        "id": "835264a.de01c98",
        "type": "other",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 697.9166641235352,
        "y": 348.8303174972534,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "43688a60.e15ccc"
            ]
        ]
    },
    {
        "id": "43688a60.e15ccc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"There are no VNFs in MD-SAL\" />\n",
        "comments": "",
        "x": 879.5832901000977,
        "y": 348.8303174972534,
        "z": "b679ce73.4725c",
        "wires": []
    },
    {
        "id": "230a1984.7eb2de",
        "type": "for",
        "name": "for each vnf",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 492.91666412353516,
        "y": 397.83033752441406,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "11f49056.b848d"
            ]
        ]
    },
    {
        "id": "11f49056.b848d",
        "type": "switchNode",
        "name": "switch this vnf-id == input vnf-id",
        "xml": "<switch test='`$service-data.vnfs.vnf[$idx].vnf-id == $vnf-topology-operation-input.vnf-information.vnf-id`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 747.9167518615723,
        "y": 396.4970054626465,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "2be53867.ef76e8"
            ]
        ]
    },
    {
        "id": "2be53867.ef76e8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 986.2500381469727,
        "y": 395.4969835281372,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "e4f701ed.1bfb3"
            ]
        ]
    },
    {
        "id": "e4f701ed.1bfb3",
        "type": "set",
        "name": "set vnf-index",
        "xml": "<set>\n<parameter name='vnf-index' value='`$idx`' />\n",
        "comments": "",
        "x": 1154.5832328796387,
        "y": 395.4970054626465,
        "z": "b679ce73.4725c",
        "wires": []
    },
    {
        "id": "1570abd0.28319c",
        "type": "switchNode",
        "name": "switch vnf-index",
        "xml": "<switch test='`$vnf-index`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 504.5833282470703,
        "y": 444.4970073699951,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "29a81e7f.f25dfa"
            ]
        ]
    },
    {
        "id": "29a81e7f.f25dfa",
        "type": "other",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 686.2499465942383,
        "y": 443.83033752441406,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "f6710847.bb5d"
            ]
        ]
    },
    {
        "id": "f6710847.bb5d",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"'Could not find VNF ' + $vnf-topology-operation-input.vnf-information.vnf-id + ' in MD-SAL'\" />\n",
        "comments": "",
        "x": 852.916633605957,
        "y": 443.49696350097656,
        "z": "b679ce73.4725c",
        "wires": []
    },
    {
        "id": "8ffa54f2.b78158",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1154.3770751953125,
        "y": 1079.0205762386322,
        "z": "b679ce73.4725c",
        "wires": []
    },
    {
        "id": "54c41547.567a8c",
        "type": "for",
        "name": "for each vnf",
        "xml": "<for index='idx' start='`$vnf-index + 1`' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1674.8546524047852,
        "y": 824.576345205307,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "c8a587bb.5748d8"
            ]
        ]
    },
    {
        "id": "3f28287f.120ca",
        "type": "comment",
        "name": "Remove VNF from service data",
        "info": "",
        "comments": "",
        "x": 1117.0134201049805,
        "y": 783.1479976177216,
        "z": "b679ce73.4725c",
        "wires": []
    },
    {
        "id": "c8a587bb.5748d8",
        "type": "set",
        "name": "move vnf to remove one",
        "xml": "<set>\n\t<parameter name=\"$tmpidx\" value=\"`$idx - 1`\"/>\n\t<parameter name=\"service-data.vnfs.vnf[$tmpidx].\" value=\"$service-data.vnfs.vnf[$idx].\" />\n\t\n",
        "comments": "",
        "x": 1908.445785522461,
        "y": 823.6002967357635,
        "z": "b679ce73.4725c",
        "wires": []
    },
    {
        "id": "c879ce9c.9d72a",
        "type": "switchNode",
        "name": "switch vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1161.1125144958496,
        "y": 826.155974149704,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "9f8acc10.c48f28",
                "901a2ab8.48409"
            ]
        ]
    },
    {
        "id": "9f8acc10.c48f28",
        "type": "outcome",
        "name": "1",
        "xml": "<outcome value='1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1338.1125564575195,
        "y": 786.8225610256195,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "4a1274f6.357d5c"
            ]
        ]
    },
    {
        "id": "4a1274f6.357d5c",
        "type": "set",
        "name": "Remove vnfs",
        "xml": "<set>\n\t<parameter name=\"service-data.vnfs.\" value=\"\"/>\n\n",
        "comments": "",
        "x": 1501.779052734375,
        "y": 786.8226602077484,
        "z": "b679ce73.4725c",
        "wires": []
    },
    {
        "id": "901a2ab8.48409",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1339.6364479064941,
        "y": 867.298700094223,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "209c0646.4c650a"
            ]
        ]
    },
    {
        "id": "cd8767d7.87479",
        "type": "set",
        "name": "set new vnf length",
        "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf_length\" value=\"`$service-data.vnfs.vnf_length - 1`\"/>\n\n\t\n",
        "comments": "",
        "x": 1694.4087409973145,
        "y": 915.1559188365936,
        "z": "b679ce73.4725c",
        "wires": []
    },
    {
        "id": "e2f2c18b.32612",
        "type": "set",
        "name": "Remove the last vnf in the list",
        "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf[$service-data.vnfs.vnf_length-1].\" value=\"\"/>\n\n",
        "comments": "",
        "x": 1730.1123962402344,
        "y": 870.2669398784637,
        "z": "b679ce73.4725c",
        "wires": []
    },
    {
        "id": "209c0646.4c650a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1505.4457893371582,
        "y": 870.8224809169769,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "54c41547.567a8c",
                "e2f2c18b.32612",
                "cd8767d7.87479"
            ]
        ]
    },
    {
        "id": "793a50a1.0d6658",
        "type": "switchNode",
        "name": "switch current vnf-level-oper-status == Created",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.order-status == 'Created'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 603.9166412353516,
        "y": 490.1636772155762,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "33d47343.98cc6c"
            ]
        ]
    },
    {
        "id": "33d47343.98cc6c",
        "type": "outcomeFalse",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 908.5833587646484,
        "y": 489.8303165435791,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "6c7a81eb.1c4e68"
            ]
        ]
    },
    {
        "id": "6c7a81eb.1c4e68",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Cannot delete a VNF in a Created state\" />\n",
        "comments": "",
        "x": 1066.916633605957,
        "y": 489.16364097595215,
        "z": "b679ce73.4725c",
        "wires": []
    },
    {
        "id": "d811a825.e4506",
        "type": "switchNode",
        "name": "switch current vf-module_length",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 554.2499847412109,
        "y": 576.1636428833008,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "973bc91a.8f52e8",
                "d0ced9dc.3f8238",
                "2b82476d.deb568"
            ]
        ]
    },
    {
        "id": "973bc91a.8f52e8",
        "type": "outcome",
        "name": "0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 782.9166259765625,
        "y": 532.8302841186523,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "cb334531.9a038"
            ]
        ]
    },
    {
        "id": "d0ced9dc.3f8238",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 781.488037109375,
        "y": 574.2589416503906,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "cb334531.9a038"
            ]
        ]
    },
    {
        "id": "cb334531.9a038",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 930.0595512390137,
        "y": 554.2589426040649,
        "z": "b679ce73.4725c",
        "wires": [
            []
        ]
    },
    {
        "id": "2b82476d.deb568",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 781.4880867004395,
        "y": 615.6875295639038,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "7cec3149.76d4d"
            ]
        ]
    },
    {
        "id": "7cec3149.76d4d",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Cannot delete the VNF because there are VFs defined\" />\n",
        "comments": "",
        "x": 948.6309814453125,
        "y": 615.2589178085327,
        "z": "b679ce73.4725c",
        "wires": []
    },
    {
        "id": "88d07f29.c5dc6",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:naming-policy-generate-name",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='naming-policy-generate-name' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1302.5197067260742,
        "y": 1022.7976253032684,
        "z": "b679ce73.4725c",
        "wires": [
            []
        ]
    },
    {
        "id": "b74c2ae7.ae87a",
        "type": "set",
        "name": "set variables for deleting name",
        "xml": "<set>\n<parameter name='naming-policy-generate-name-input.naming-type' value='VNF' />\n<parameter name='naming-policy-generate-name-input.context-id' value='`$vnf-topology-operation-input.vnf-information.vnf-id`' />\n<parameter name='naming-policy-generate-name-input.action' value='DELETE' />\n",
        "comments": "",
        "x": 1203.9483261108398,
        "y": 975.65469622612,
        "z": "b679ce73.4725c",
        "wires": []
    },
    {
        "id": "8a7b5d97.e8b09",
        "type": "comment",
        "name": "check removed with US622450",
        "info": "",
        "comments": "",
        "x": 1274.1070098876953,
        "y": 488.75002670288086,
        "z": "b679ce73.4725c",
        "wires": []
    },
    {
        "id": "484f70af.519a08",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 911.5357208251953,
        "y": 908.7500398159027,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "c879ce9c.9d72a",
                "b74c2ae7.ae87a",
                "88d07f29.c5dc6",
                "8ffa54f2.b78158"
            ]
        ]
    },
    {
        "id": "91a3386a.faef3",
        "type": "call",
        "name": "call self-serve-vnf-forking-logic",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='self-serve-vnf-forking-logic' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 548.3572998046875,
        "y": 722.4999084472656,
        "z": "b679ce73.4725c",
        "wires": [
            []
        ]
    },
    {
        "id": "12606f3f.12bf41",
        "type": "switchNode",
        "name": "switch ss.self-serve-flag",
        "xml": "<switch test=\"`$ss.self-serve-flag`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 518.3928833007812,
        "y": 908.607127904892,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "69816793.5f1658",
                "77171191.032938"
            ]
        ]
    },
    {
        "id": "69816793.5f1658",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 734.3928833007812,
        "y": 909.0357129573822,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "484f70af.519a08"
            ]
        ]
    },
    {
        "id": "f6d24b45.0d4258",
        "type": "call",
        "name": "call self-serve-vnf-unassign",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='self-serve-vnf-unassign' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 950.1071472167969,
        "y": 1224.4642741680145,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "b5167dbe.7d8bf8",
                "a7770dc.3f6cef"
            ]
        ]
    },
    {
        "id": "b5167dbe.7d8bf8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1157.8571319580078,
        "y": 1224.7142627239227,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "9c54474e.6dc798"
            ]
        ]
    },
    {
        "id": "9c54474e.6dc798",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Encountered error while unassigning self-serve resources with error: '+ $error-message`\" />\n",
        "comments": "",
        "x": 1323.4285583496094,
        "y": 1224.3571574687958,
        "z": "b679ce73.4725c",
        "wires": []
    },
    {
        "id": "a7770dc.3f6cef",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1162.4643058776855,
        "y": 1275.2697970867157,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "f989b85.ea14548"
            ]
        ]
    },
    {
        "id": "f989b85.ea14548",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1331.0357208251953,
        "y": 1274.8412387371063,
        "z": "b679ce73.4725c",
        "wires": []
    },
    {
        "id": "77171191.032938",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 735.6785621643066,
        "y": 1224.8928534984589,
        "z": "b679ce73.4725c",
        "wires": [
            [
                "f6d24b45.0d4258"
            ]
        ]
    },
    {
        "id": "a2ededb3.20eb68",
        "type": "get-resource",
        "name": "get VF_MODEL.sdnc_model_name",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VF_MODEL WHERE customization_uuid = $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.onap-model-information.model-customization-uuid'\n  pfx='db.vf-model'>",
        "comments": "",
        "outputs": 1,
        "x": 563.75,
        "y": 655,
        "z": "b679ce73.4725c",
        "wires": [
            []
        ]
    }
]