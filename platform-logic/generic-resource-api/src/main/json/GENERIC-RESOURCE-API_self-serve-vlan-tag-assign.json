[{"id":"2e5dca9.d7da736","type":"execute","name":"send service-capacity-reserve-operation","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ss.capreserve.templatefile`\" />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='post' />\n    <parameter name='responsePrefix' value='tmp.sscapres-response' />\n\n","comments":"","outputs":1,"x":1044.2146587371826,"y":952.6428833007812,"z":"3766be45.1340f2","wires":[["feeb287f.b56f78","406afb5f.817d14"]]},{"id":"feeb287f.b56f78","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1299.7858600616455,"y":954.9288215637207,"z":"3766be45.1340f2","wires":[["975320c7.41878"]]},{"id":"975320c7.41878","type":"block","name":"block","xml":"<block>","atomic":"false","comments":"","outputs":1,"x":1422.6347904205322,"y":958.0361442565918,"z":"3766be45.1340f2","wires":[["6e616bf9.a673e4","31434e9e.02c892","6463f94e.c389a8"]]},{"id":"6e616bf9.a673e4","type":"record","name":"record failure","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API\"/>\n<parameter name=\"field3\" value=\"self-serve-vlan-tag-assign: restapi reserve execution failed\"/>","comments":"","outputs":1,"x":1570.2149143218994,"y":926.21457862854,"z":"3766be45.1340f2","wires":[[]]},{"id":"f4369358.b0cfc","type":"dgstart","name":"DGSTART","outputs":1,"x":121,"y":83,"z":"3766be45.1340f2","wires":[["a5341348.6734f"]]},{"id":"a5341348.6734f","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":221.44043731689453,"y":138.32146644592285,"z":"3766be45.1340f2","wires":[["cfec7332.50833"]]},{"id":"cfec7332.50833","type":"method","name":"method self-serve-vlan-tag-assign","xml":"<method rpc='self-serve-vlan-tag-assign' mode='sync'>\n","comments":"","outputs":1,"x":196.607177734375,"y":211.89287757873535,"z":"3766be45.1340f2","wires":[["de0a5681.1c3af8"]]},{"id":"7f547845.02f9d8","type":"execute","name":"send service-capacity-release-operation","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ss.caprelease.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='post' />\n    <parameter name='responsePrefix' value='tmp.sscaprel-response' />\n\n","comments":"","outputs":1,"x":997.3574523925781,"y":1592.0001258850098,"z":"3766be45.1340f2","wires":[["45e5cee1.a617a","b66bc7e0.1aa058"]]},{"id":"57679e70.00d77","type":"for","name":"for each vnf-module param","xml":"<for index='capIdx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param_length`' >","comments":"","outputs":1,"x":404.14276123046875,"y":486.6073303222656,"z":"3766be45.1340f2","wires":[["5d287582.a0cf4c"]]},{"id":"de0a5681.1c3af8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":194.64290618896484,"y":298.75003242492676,"z":"3766be45.1340f2","wires":[["8b719dcb.07fdf","94c4fb1b.c56528","993da09.d6dd36","57679e70.00d77"]]},{"id":"8b719dcb.07fdf","type":"execute","name":"execute readProperties","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n","comments":"","outputs":1,"x":520.357177734375,"y":225.41665649414062,"z":"3766be45.1340f2","wires":[["fd63e71a.dbbaf8","2288fca9.491bb4"]]},{"id":"fd63e71a.dbbaf8","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":730.9286346435547,"y":186.75000381469727,"z":"3766be45.1340f2","wires":[["a8be424b.ae295"]]},{"id":"2288fca9.491bb4","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":725.7143783569336,"y":258.8214416503906,"z":"3766be45.1340f2","wires":[["e9c92d46.4e05a"]]},{"id":"e9c92d46.4e05a","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":859.1427993774414,"y":257.2500057220459,"z":"3766be45.1340f2","wires":[["b950922e.2b5ef","6b1cbea6.7e424"]]},{"id":"a8be424b.ae295","type":"GenericXML","name":"record","xml":"<record  plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API\"/>\n<parameter name=\"field3\" value=\"self-serve-vlan-tag-assign: read properties file.\" />","comments":"","outputs":1,"x":885.5356750488281,"y":187.6428508758545,"z":"3766be45.1340f2","wires":[[]]},{"id":"b950922e.2b5ef","type":"GenericXML","name":"record","xml":"<record  plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API\"/>\n<parameter name=\"field3\" value=\"self-serve-vlan-tag-assign: failed to read properties file.\" />\n<parameter name=\"field4\" value=\"generic-resource-api-dg.properties\"/>","comments":"","outputs":1,"x":1063.4286422729492,"y":225.4285945892334,"z":"3766be45.1340f2","wires":[[]]},{"id":"6b1cbea6.7e424","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value='self-serve-vlan-tag-assign: could not read generic-resource-api properties' />\n","comments":"","x":1068.1428833007812,"y":274.3928737640381,"z":"3766be45.1340f2","wires":[]},{"id":"31434e9e.02c892","type":"set","name":"set FAILED in service-data","xml":"<set>\n<parameter name='sscap.reserve.response-code' value='500' />\n<parameter name='sscap.reserve.response-message' value='Self Serve Capacity Api restapi reserve execution failed' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-mofule[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$capIdx].resource-resolution-data.status' value='FAILED' />\n","comments":"","x":1613.3574676513672,"y":971.6075496673584,"z":"3766be45.1340f2","wires":[]},{"id":"406afb5f.817d14","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1316.1071529388428,"y":1100.7144680023193,"z":"3766be45.1340f2","wires":[["96a8ccf3.28f77"]]},{"id":"80bbdace.317538","type":"block","name":"block","xml":"<block>","atomic":"false","comments":"","outputs":1,"x":1839.1434726715088,"y":1100.0003108978271,"z":"3766be45.1340f2","wires":[["986ced70.9f262","e0fef4b9.588998","31e3cce8.0d9774"]]},{"id":"e0fef4b9.588998","type":"record","name":"record success","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API\"/>\n<parameter name=\"field3\" value=\"self-serve-vlan-tag-assign: reserve successful\"/>\n<parameter name=\"field4\" value='`$tmp.sscapres-response.response-code`'/>\n<parameter name=\"field5\" value='`$tmp.sscapres-response.response-message`'/>\n<parameter name=\"field6\" value='`$tmp.sscapres-response.output.reservation-entity-list[0].reservation-target-list[0].resource-list[0].allocated`' />\n<parameter name=\"field7\" value='`$tmp.sscapres-response.output.reservation-entity-list[0].reservation-target-list[0].resource-list[0].end-point-position`' />\n","comments":"","outputs":1,"x":1984.4017333984375,"y":1037.4644775390625,"z":"3766be45.1340f2","wires":[[]]},{"id":"986ced70.9f262","type":"set","name":"set SUCCESS in service-data","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-mofule[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$capIdx].resource-resolution-data.status' value='SUCCESS' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-mofule[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pmIdx].value' value='$tmp.sscapres-response.output.reservation-entity-list[0].reservation-target-list[0].resource-list[0].allocated' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-mofule[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pmIdx].name' value='$tmp.sscapres-response.output.reservation-entity-list[0].reservation-target-list[0].resource-list[0].end-point-position' />\n","comments":"","x":2026.6513214111328,"y":1112.3215341567993,"z":"3766be45.1340f2","wires":[]},{"id":"45e5cee1.a617a","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1246.2858581542969,"y":1568.5715713500977,"z":"3766be45.1340f2","wires":[["c4ad509b.c0ede"]]},{"id":"b66bc7e0.1aa058","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1236.7147827148438,"y":1674.1788568496704,"z":"3766be45.1340f2","wires":[["c5c6312c.a01b7"]]},{"id":"c4ad509b.c0ede","type":"block","name":"block","xml":"<block>","atomic":"false","comments":"","outputs":1,"x":1363.420467376709,"y":1570.785846710205,"z":"3766be45.1340f2","wires":[["6309df91.77d2f","b44511ae.bf575","55fe953b.9fcd0c"]]},{"id":"e6278d71.397a4","type":"block","name":"block","xml":"<block>","atomic":"false","comments":"","outputs":1,"x":1771.715087890625,"y":1594.7143058776855,"z":"3766be45.1340f2","wires":[["e9013f35.6380e","6f5a407a.3f11e"]]},{"id":"6309df91.77d2f","type":"record","name":"record failure","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API\"/>\n<parameter name=\"field3\" value=\"self-serve-vlan-tag-assign: restapi release execution failed\"/>","comments":"","outputs":1,"x":1509.3932075500488,"y":1529.6788539886475,"z":"3766be45.1340f2","wires":[[]]},{"id":"b44511ae.bf575","type":"set","name":"set FAILED in service-data","xml":"<set>\n<parameter name='sscap.release.response-code' value='500' />\n<parameter name='sscap.release.response-message' value='Self Serve Capacity Api restapi release execution failed' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-mofule[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$capIdx].resource-resolution-data.status' value='FAILED' />\n\n","comments":"","x":1560.7505340576172,"y":1573.107078552246,"z":"3766be45.1340f2","wires":[]},{"id":"e9013f35.6380e","type":"record","name":"record success","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API\"/>\n<parameter name=\"field3\" value=\"self-serve-vlan-tag-assign: release successful\"/>\n<parameter name=\"field4\" value='`$tmp.sscaprel-response.response-code`'/>\n<parameter name=\"field5\" value='`$tmp.sscaprel-response.response-message`'/>\n","comments":"","outputs":1,"x":1924.6520080566406,"y":1557.8927221298218,"z":"3766be45.1340f2","wires":[[]]},{"id":"fd646403.afecc8","type":"switchNode","name":"switch capability action","xml":"<switch test=\"`$ss.capability-action`\">\n","comments":"","outputs":1,"x":397.1429138183594,"y":1095.7144794464111,"z":"3766be45.1340f2","wires":[["82183726.67eb28","444c2480.e1ccbc"]]},{"id":"82183726.67eb28","type":"other","name":"assign","xml":"<outcome value='assign'>\n","comments":"","outputs":1,"x":627.9764823913574,"y":733.7142839431763,"z":"3766be45.1340f2","wires":[["2d01afd8.87d8f"]]},{"id":"444c2480.e1ccbc","type":"other","name":"unassign","xml":"<outcome value='unassign'>\n","comments":"","outputs":1,"x":611.4287796020508,"y":1365.7144298553467,"z":"3766be45.1340f2","wires":[["cbdf7c42.0b938"]]},{"id":"94c4fb1b.c56528","type":"call","name":"call self-serve-capabilty-param-resolution","xml":"<call module='GENERIC-RESOURCE-API' rpc='self-serve-capability-param-resolution' mode='sync' >","comments":"","outputs":1,"x":533.7501220703125,"y":360.35711669921875,"z":"3766be45.1340f2","wires":[[]]},{"id":"800e2b0e.618c48","type":"set","name":"set rel-entity-id","xml":"<set>\n<parameter name='sscap.rel-entity-id' value='`service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$capIdx].resource-resolution-data.resource-key[$rkIdx].value`' />\n","comments":"","x":1631.4285430908203,"y":1362.8568964004517,"z":"3766be45.1340f2","wires":[]},{"id":"2d01afd8.87d8f","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":789.4643783569336,"y":731.2500267028809,"z":"3766be45.1340f2","wires":[["2e5dca9.d7da736","7ff997e7.61cb38","d7f90361.864ba","15d5c5ea.944a4a"]]},{"id":"cbdf7c42.0b938","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":791.4287109375,"y":1417.1429481506348,"z":"3766be45.1340f2","wires":[["7f547845.02f9d8","9576e42b.872ea8","1a2b41b4.0bac5e"]]},{"id":"5d287582.a0cf4c","type":"switchNode","name":"switch resource-resolution-data = ss.capability-name","xml":"<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module.param[$capIdx].resource-resolution-data.capability-name == $ss.capability-name`\">","comments":"","outputs":1,"x":353.57135009765625,"y":582.2500610351562,"z":"3766be45.1340f2","wires":[["867edb26.b838c8"]]},{"id":"c5c6312c.a01b7","type":"switchNode","name":"switch response code","xml":"<switch test=\"`$tmp.sscaprel-response.response-code`\">\n","comments":"","outputs":1,"x":1417.9646911621094,"y":1674.8930168151855,"z":"3766be45.1340f2","wires":[["65171ccb.28dbb4","3696a26c.a660fe"]]},{"id":"96a8ccf3.28f77","type":"switchNode","name":"switch response code","xml":"<switch test=\"`$tmp.sscapres-response.response-code`\">\n","comments":"","outputs":1,"x":1515.8218479156494,"y":1129.0002269744873,"z":"3766be45.1340f2","wires":[["613ef895.7834c8","ca2896da.2f3628"]]},{"id":"613ef895.7834c8","type":"other","name":"200","xml":"<outcome value='200'>\n","comments":"","outputs":1,"x":1711.7140789031982,"y":1101.142861366272,"z":"3766be45.1340f2","wires":[["80bbdace.317538"]]},{"id":"65171ccb.28dbb4","type":"other","name":"200","xml":"<outcome value='200'>\n","comments":"","outputs":1,"x":1636.714500427246,"y":1652.928563117981,"z":"3766be45.1340f2","wires":[["e6278d71.397a4"]]},{"id":"752cd1d6.40da9","type":"block","name":"block","xml":"<block>","atomic":"false","comments":"","outputs":1,"x":1773.1430206298828,"y":1699.5359859466553,"z":"3766be45.1340f2","wires":[["70e8f618.3b6998","bbd58db3.9c973","990090e6.ae127"]]},{"id":"70e8f618.3b6998","type":"record","name":"record failure","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API\"/>\n<parameter name=\"field3\" value=\"self-serve-vlan-tag-assign: release failed\"/>\n<parameter name=\"field4\" value='`$tmp.sscaprel-response.response-code`'/>\n<parameter name=\"field5\" value='`$tmp.sscaprel-response.response-message`'/>\n","comments":"","outputs":1,"x":1937.3299407958984,"y":1684.857666015625,"z":"3766be45.1340f2","wires":[[]]},{"id":"8d191674.7b4368","type":"block","name":"block","xml":"<block>","atomic":"false","comments":"","outputs":1,"x":1851.7143993377686,"y":1178.571415901184,"z":"3766be45.1340f2","wires":[["aad48243.a2c27","6a3a1d2b.9f2594"]]},{"id":"aad48243.a2c27","type":"record","name":"record failure","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API\"/>\n<parameter name=\"field3\" value=\"self-serve-vlan-tag-assign: reserve failed\"/>\n<parameter name=\"field4\" value='`$tmp.sscapres-response.response-code`'/>\n<parameter name=\"field5\" value='`$tmp.sscapres-response.response-message`'/>\n","comments":"","outputs":1,"x":2006.615665435791,"y":1163.1787090301514,"z":"3766be45.1340f2","wires":[[]]},{"id":"ca2896da.2f3628","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1718.5713939666748,"y":1179.1431674957275,"z":"3766be45.1340f2","wires":[["8d191674.7b4368"]]},{"id":"3696a26c.a660fe","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1634.5000457763672,"y":1693.7859859466553,"z":"3766be45.1340f2","wires":[["752cd1d6.40da9"]]},{"id":"867edb26.b838c8","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":330.1071434020996,"y":672.39284324646,"z":"3766be45.1340f2","wires":[["fd646403.afecc8"]]},{"id":"9576e42b.872ea8","type":"for","name":"for each resource key","xml":"<for index='rkIdx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$capIdx].resource-resolution-data.resource-key_length`' >","comments":"","outputs":1,"x":1017.1429290771484,"y":1423.4284057617188,"z":"3766be45.1340f2","wires":[["cb19edd3.f7eca"]]},{"id":"cb19edd3.f7eca","type":"switchNode","name":"switch resource key name","xml":"<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$capIdx].resource-resolution-data.resource-key[$rkIdx].name`\">\n","comments":"","outputs":1,"x":1257.1429138183594,"y":1428.000015258789,"z":"3766be45.1340f2","wires":[["8697da6f.c8ae48","61ce5ca.55305a4","69787ca9.214c84"]]},{"id":"8697da6f.c8ae48","type":"other","name":"vnf-name","xml":"<outcome value='vnf-name'>\n","comments":"","outputs":1,"x":1461.428596496582,"y":1358.0001373291016,"z":"3766be45.1340f2","wires":[["800e2b0e.618c48"]]},{"id":"69787ca9.214c84","type":"other","name":"nf-role","xml":"<outcome value='nf-role'>\n","comments":"","outputs":1,"x":1467.1428451538086,"y":1400.8570976257324,"z":"3766be45.1340f2","wires":[["d288cf3.e768b3"]]},{"id":"61ce5ca.55305a4","type":"other","name":"vlan-tag-type","xml":"<outcome value='vlan-tag-type'>\n","comments":"","outputs":1,"x":1480.0000228881836,"y":1442.2857456207275,"z":"3766be45.1340f2","wires":[["969a9d1c.4858b"]]},{"id":"d288cf3.e768b3","type":"set","name":"set rel-entity-type","xml":"<set>\n<parameter name='sscap.rel-entity-type' value='`service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$capIdx].resource-resolution-data.resource-key[$rkIdx].value`' />\n","comments":"","x":1628.571533203125,"y":1403.7142333984375,"z":"3766be45.1340f2","wires":[]},{"id":"969a9d1c.4858b","type":"set","name":"set rel-endpoint-position","xml":"<set>\n<parameter name='sscap.rel-endpoint-position' value='`service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$capIdx].resource-resolution-data.resource-key[$rkIdx].value`' />\n","comments":"","x":1668.5714111328125,"y":1446.5715618133545,"z":"3766be45.1340f2","wires":[]},{"id":"7ff997e7.61cb38","type":"for","name":"for each resource key","xml":"<for index='rkIdx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$capIdx].resource-resolution-data.resource-key_length`' >","comments":"","outputs":1,"x":996.5356750488281,"y":708.0357646942139,"z":"3766be45.1340f2","wires":[["2bb15b3.0f680a4"]]},{"id":"2bb15b3.0f680a4","type":"switchNode","name":"switch resource key name","xml":"<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$capIdx].resource-resolution-data.resource-key[$rkIdx].name`\">\n","comments":"","outputs":1,"x":1225.2856826782227,"y":708.1430397033691,"z":"3766be45.1340f2","wires":[["59f7ea26.4a1e04","db8ed527.405a78","ad6405c8.bf6b98","cfc08671.cb24b8","122b1ec8.a072f1"]]},{"id":"59f7ea26.4a1e04","type":"other","name":"vnf-name","xml":"<outcome value='vnf-name'>\n","comments":"","outputs":1,"x":1449.750144958496,"y":675.6431837081909,"z":"3766be45.1340f2","wires":[["c5534768.1726f8"]]},{"id":"ad6405c8.bf6b98","type":"other","name":"aic-site-id","xml":"<outcome value='aic-site-id'>\n","comments":"","outputs":1,"x":1451.8926239013672,"y":767.071605682373,"z":"3766be45.1340f2","wires":[["22b48e8b.a805c2"]]},{"id":"db8ed527.405a78","type":"other","name":"vlan-tag-type","xml":"<outcome value='vlan-tag-type'>\n","comments":"","outputs":1,"x":1458.5000457763672,"y":817.071704864502,"z":"3766be45.1340f2","wires":[["4b7b97b2.2d0078"]]},{"id":"c5534768.1726f8","type":"set","name":"set res-entity-id","xml":"<set>\n<parameter name='sscap.res-entity-id' value='`service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$capIdx].resource-resolution-data.resource-key[$rkIdx].value`' />\n","comments":"","x":1629.0355987548828,"y":674.0713577270508,"z":"3766be45.1340f2","wires":[]},{"id":"22b48e8b.a805c2","type":"set","name":"set res-target-id","xml":"<set>\n<parameter name='sscap.res-target-id' value='`service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$capIdx].resource-resolution-data.resource-key[$rkIdx].value`' />\n","comments":"","x":1634.571922302246,"y":766.8930892944336,"z":"3766be45.1340f2","wires":[]},{"id":"4b7b97b2.2d0078","type":"set","name":"set res-endpoint-position","xml":"<set>\n<parameter name='sscap.res-endpoint-position' value='`service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$capIdx].resource-resolution-data.resource-key[$rkIdx].value`' />\n","comments":"","x":1664.928565979004,"y":819.036060333252,"z":"3766be45.1340f2","wires":[]},{"id":"d7f90361.864ba","type":"set","name":"set res-target-type","xml":"<set>\n<parameter name='sscap.res-target-type' value='`$prop.restapi.ss.capreserve.targettype`' />","comments":"","x":997.0715103149414,"y":643.2143783569336,"z":"3766be45.1340f2","wires":[]},{"id":"122b1ec8.a072f1","type":"other","name":"vlan-recipe","xml":"<outcome value='vlan-recipe'>\n","comments":"","outputs":1,"x":1446.8928146362305,"y":622.857195854187,"z":"3766be45.1340f2","wires":[["29007a85.cf4516"]]},{"id":"29007a85.cf4516","type":"set","name":"set res-service-model","xml":"<set>\n<parameter name='sscap.res-service-model' value='`service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$capIdx].resource-resolution-data.resource-key[$rkIdx].value`' />\n","comments":"","x":1627.249855041504,"y":621.9996271133423,"z":"3766be45.1340f2","wires":[]},{"id":"cfc08671.cb24b8","type":"other","name":"nf-role","xml":"<outcome value='nf-role'>\n","comments":"","outputs":1,"x":1442.607566833496,"y":722.6786842346191,"z":"3766be45.1340f2","wires":[["a8aa861e.5b9688"]]},{"id":"a8aa861e.5b9688","type":"set","name":"set res-entity-type","xml":"<set>\n<parameter name='sscap.res-entity-type' value='`service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$capIdx].resource-resolution-data.resource-key[$rkIdx].value`' />\n","comments":"","x":1634.3931198120117,"y":723.2495822906494,"z":"3766be45.1340f2","wires":[]},{"id":"6a3a1d2b.9f2594","type":"set","name":"set FAILED in service-data","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-mofule[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$capIdx].resource-resolution-data.status' value='FAILED' />\n","comments":"","x":2043.0356063842773,"y":1218.714391708374,"z":"3766be45.1340f2","wires":[]},{"id":"6f5a407a.3f11e","type":"set","name":"set DELETED in service-data","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-mofule[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$capIdx].resource-resolution-data.status' value='DELETED' />\n","comments":"","x":1972.8570709228516,"y":1605.7143592834473,"z":"3766be45.1340f2","wires":[]},{"id":"bbd58db3.9c973","type":"set","name":"set FAILED in service-data","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-mofule[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$capIdx].resource-resolution-data.status' value='FAILED' />\n","comments":"","x":1971.4289627075195,"y":1730.178565979004,"z":"3766be45.1340f2","wires":[]},{"id":"31e3cce8.0d9774","type":"set","name":"set pmIdx","xml":"<set>\n<parameter name='pmIdx' value='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-mofule[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param_length' />\n","comments":"","x":2005.7142868041992,"y":1071.642807006836,"z":"3766be45.1340f2","wires":[]},{"id":"990090e6.ae127","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value='self-serve-vlan-tag-assign: release failed' />\n","comments":"","x":1930.000057220459,"y":1776.750051498413,"z":"3766be45.1340f2","wires":[]},{"id":"55fe953b.9fcd0c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value='self-serve-vlan-tag-assign: release failed' />\n","comments":"","x":1510.75,"y":1621.25,"z":"3766be45.1340f2","wires":[]},{"id":"6463f94e.c389a8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value='self-serve-vlan-tag-assign: reserve failed' />\n","comments":"","x":1577.5357151031494,"y":1017.607159614563,"z":"3766be45.1340f2","wires":[]},{"id":"15d5c5ea.944a4a","type":"record","name":"record reserve params","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API\"/>\n<parameter name=\"field3\" value=\"self-serve-vlan-tag-assign: reserve params\"/>\n<parameter name=\"field4\" value='`$sscap.res-service-model`'/>\n<parameter name=\"field5\" value='`$sscap.res-entity-type`'/>\n<parameter name=\"field6\" value='`$sscap.res-entity-id`'/>\n<parameter name=\"field7\" value='`$sscap.res-target-type.`' />\n<parameter name=\"field8\" value='`$sscap.res-target-id`'/>\n<parameter name=\"field9\" value='`$sscap.res.endpoint-position`' />\n","comments":"","outputs":1,"x":1020.5000305175781,"y":795.5000267028809,"z":"3766be45.1340f2","wires":[[]]},{"id":"1a2b41b4.0bac5e","type":"record","name":"record release params","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API\"/>\n<parameter name=\"field3\" value=\"self-serve-vlan-tag-assign: release params\"/>\n<parameter name=\"field4\" value='`$sscap.res-entity-type`'/>\n<parameter name=\"field5\" value='`$sscap.res-entity-id`'/>\n<parameter name=\"field6\" value='`$sscap.res.endpoint-position`' />\n","comments":"","outputs":1,"x":1026.75,"y":1505,"z":"3766be45.1340f2","wires":[[]]},{"id":"993da09.d6dd36","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n","comments":"","x":226.25000762939453,"y":900.7500457763672,"z":"3766be45.1340f2","wires":[]}]
