[
  {
    "id": "a7726866.c82328",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 195,
    "y": 120.41365623474121,
    "z": "3abedd3.792ad22",
    "wires": [
      [
        "3384c619.e1dafa"
      ]
    ]
  },
  {
    "id": "3384c619.e1dafa",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 270.28570556640625,
    "y": 160.6517677307129,
    "z": "3abedd3.792ad22",
    "wires": [
      [
        "ca099e7c.f45ae"
      ]
    ]
  },
  {
    "id": "ca099e7c.f45ae",
    "type": "method",
    "name": "method site-vnf-topology-operation-delete",
    "xml": "<method rpc='site-vnf-topology-operation-delete' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 250.42861938476562,
    "y": 296.4136562347412,
    "z": "3abedd3.792ad22",
    "wires": [
      [
        "cdd2879.5989078"
      ]
    ]
  },
  {
    "id": "965a63f9.a0196",
    "type": "comment",
    "name": "site-vnf-topology-operation-delete",
    "info": "",
    "comments": "",
    "x": 644.3449172973633,
    "y": 194.00005531311035,
    "z": "3abedd3.792ad22",
    "wires": []
  },
  {
    "id": "cdd2879.5989078",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 271.66666412353516,
    "y": 422.0803279876709,
    "z": "3abedd3.792ad22",
    "wires": [
      [
        "e74f18c4.f49f98",
        "e52597d4.97d0a8",
        "6a942976.e989d8",
        "6ffb0bce.7eb574",
        "ba634d70.518cb",
        "52c3ad0c.e6f634",
        "26f755dc.77218a",
        "ea9d888e.357438",
        "a4fc2f21.bb9f6"
      ]
    ]
  },
  {
    "id": "26f755dc.77218a",
    "type": "switchNode",
    "name": "switch service-data.vnfs.vnf_length",
    "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 733.0947036743164,
    "y": 355.6748266220093,
    "z": "3abedd3.792ad22",
    "wires": [
      [
        "41237296.cb603c",
        "1b9b9bc6.ffabe4"
      ]
    ]
  },
  {
    "id": "41237296.cb603c",
    "type": "other",
    "name": "outcome Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 997.8170166015625,
    "y": 338.23044872283936,
    "z": "3abedd3.792ad22",
    "wires": [
      [
        "37a1ebd3.c0d944"
      ]
    ]
  },
  {
    "id": "37a1ebd3.c0d944",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 1178.8168869018555,
    "y": 333.23032665252686,
    "z": "3abedd3.792ad22",
    "wires": []
  },
  {
    "id": "1b9b9bc6.ffabe4",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 983.3170166015625,
    "y": 390.230411529541,
    "z": "3abedd3.792ad22",
    "wires": [
      [
        "af3a8c66.5e3d1"
      ]
    ]
  },
  {
    "id": "af3a8c66.5e3d1",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1155.316722869873,
    "y": 390.2304096221924,
    "z": "3abedd3.792ad22",
    "wires": [
      [
        "2540b8b2.d6e138",
        "8b080a11.ba38d8"
      ]
    ]
  },
  {
    "id": "8b080a11.ba38d8",
    "type": "switchNode",
    "name": "switch tmp.nidx ",
    "xml": "<switch test=\"`$tmp.nidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1330.31689453125,
    "y": 409.23033142089844,
    "z": "3abedd3.792ad22",
    "wires": [
      [
        "29f38b0a.335fc4"
      ]
    ]
  },
  {
    "id": "52c3ad0c.e6f634",
    "type": "switchNode",
    "name": "switch vnf-level-oper-status",
    "xml": "<switch test='`$service-data.vnfs.vnf[$tmp.nidx].vnf-data.vnf-level-oper-status.order-status`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 703.4837036132812,
    "y": 430.1192903518677,
    "z": "3abedd3.792ad22",
    "wires": [
      [
        "80dde12f.593ab",
        "95f83539.1330d8"
      ]
    ]
  },
  {
    "id": "80dde12f.593ab",
    "type": "outcome",
    "name": "outcome PendingDelete",
    "xml": "<outcome value='PendingDelete'>\n",
    "comments": "",
    "outputs": 1,
    "x": 994.3169708251953,
    "y": 434.23041343688965,
    "z": "3abedd3.792ad22",
    "wires": [
      [
        "c271a18f.ad7ae"
      ]
    ]
  },
  {
    "id": "95f83539.1330d8",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 940.3170318603516,
    "y": 481.2304172515869,
    "z": "3abedd3.792ad22",
    "wires": [
      [
        "c4d6206d.a0bea"
      ]
    ]
  },
  {
    "id": "c4d6206d.a0bea",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VNF is not in appropriate state for activate. Current state is ' + $service-data.vnfs.vnf[$tmp.nidx].vnf-data.vnf-level-oper-status.order-status`\" />",
    "comments": "",
    "x": 1099.8167991638184,
    "y": 484.2304162979126,
    "z": "3abedd3.792ad22",
    "wires": []
  },
  {
    "id": "ea9d888e.357438",
    "type": "switchNode",
    "name": "switch vnf-id",
    "xml": "<switch test=\"`$vnf-topology-operation-input.vnf-information.vnf-id`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 669.3170204162598,
    "y": 311.23042011260986,
    "z": "3abedd3.792ad22",
    "wires": [
      [
        "62e62064.0111a"
      ]
    ]
  },
  {
    "id": "62e62064.0111a",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>",
    "comments": "",
    "outputs": 1,
    "x": 867.3170852661133,
    "y": 301.230432510376,
    "z": "3abedd3.792ad22",
    "wires": [
      [
        "583791bd.81172"
      ]
    ]
  },
  {
    "id": "583791bd.81172",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-request-input.vnf-input-parameters.name is a required input\" />\n",
    "comments": "",
    "x": 1033.8169708251953,
    "y": 298.2304267883301,
    "z": "3abedd3.792ad22",
    "wires": []
  },
  {
    "id": "a4fc2f21.bb9f6",
    "type": "execute",
    "name": "execute requiredParameters",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='requiredParameters' >\n<parameter name=\"vnf-topology-operation-input.vnf-information.vnf-id\" value=\"$vnf-topology-operation-input.vnf-information.vnf-id\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 726.8170776367188,
    "y": 251.23041915893555,
    "z": "3abedd3.792ad22",
    "wires": [
      []
    ]
  },
  {
    "id": "2540b8b2.d6e138",
    "type": "for",
    "name": "for nidx..service-data.vnfs.vnf[]",
    "xml": "<for index='nidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1390.8168983459473,
    "y": 345.2303276062012,
    "z": "3abedd3.792ad22",
    "wires": [
      [
        "58bd02b1.41b51c"
      ]
    ]
  },
  {
    "id": "58bd02b1.41b51c",
    "type": "switchNode",
    "name": "switch vnf-id found",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$nidx].vnf-id == $vnf-topology-operation-input.vnf-information.vnf-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1646.8169174194336,
    "y": 345.2303276062012,
    "z": "3abedd3.792ad22",
    "wires": [
      [
        "c5d4dadf.96bed8"
      ]
    ]
  },
  {
    "id": "c5d4dadf.96bed8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1823.3169708251953,
    "y": 348.2303276062012,
    "z": "3abedd3.792ad22",
    "wires": [
      [
        "fef684cd.0b0aa8"
      ]
    ]
  },
  {
    "id": "fef684cd.0b0aa8",
    "type": "set",
    "name": "set tmp.nidx and ctx.vnf-data",
    "xml": "<set>\n<parameter name='tmp.nidx' value='`$nidx`' />\n<parameter name='ctx.vnf-data.' value='`$service-data.vnfs.vnf[$nidx].vnf-data.`' />\n",
    "comments": "",
    "x": 1990.3169860839844,
    "y": 409.2303276062012,
    "z": "3abedd3.792ad22",
    "wires": []
  },
  {
    "id": "a5b8b731.dc3498",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 1635.816909790039,
    "y": 409.23033142089844,
    "z": "3abedd3.792ad22",
    "wires": []
  },
  {
    "id": "29f38b0a.335fc4",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1498.316909790039,
    "y": 409.23033142089844,
    "z": "3abedd3.792ad22",
    "wires": [
      [
        "a5b8b731.dc3498"
      ]
    ]
  },
  {
    "id": "6ffb0bce.7eb574",
    "type": "set",
    "name": "set vnfId and vnf-object-path",
    "xml": "<set>\n<parameter name='vnfId' value='`$vnf-topology-operation-input.vnf-information.vnf-id`' />\n<parameter name='vnf-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vnf-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'` \" />",
    "comments": "",
    "x": 681.3334350585938,
    "y": 605.747073173523,
    "z": "3abedd3.792ad22",
    "wires": []
  },
  {
    "id": "ba634d70.518cb",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 630.4445953369141,
    "y": 731.3025035858154,
    "z": "3abedd3.792ad22",
    "wires": []
  },
  {
    "id": "e52597d4.97d0a8",
    "type": "set",
    "name": "set new vnf length",
    "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf_length\" value=\"`$service-data.vnfs.vnf_length - 1`\"/>\n\n\t\n",
    "comments": "",
    "x": 661.9660186767578,
    "y": 503.2179307937622,
    "z": "3abedd3.792ad22",
    "wires": []
  },
  {
    "id": "6a942976.e989d8",
    "type": "set",
    "name": "Remove vnf from ServiceData",
    "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf[$tmp.nidx].\" value=\"\"/>\n\n",
    "comments": "",
    "x": 697.5902099609375,
    "y": 547.1858978271484,
    "z": "3abedd3.792ad22",
    "wires": []
  },
  {
    "id": "e74f18c4.f49f98",
    "type": "delete",
    "name": "delete site instance configuration in AAI",
    "xml": "<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" resource='site-resource' \n        key='site-resource.id = $vnf-topology-operation-input.vnf-information.vnf-id'>\n",
    "comments": "",
    "outputs": 1,
    "x": 707.8549957275391,
    "y": 674.5513019561768,
    "z": "3abedd3.792ad22",
    "wires": [
      []
    ]
  },
  {
    "id": "c271a18f.ad7ae",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1191.6233711242676,
    "y": 444.55556774139404,
    "z": "3abedd3.792ad22",
    "wires": [
      []
    ]
  }
]
