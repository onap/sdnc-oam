[
  {
    "id": "a2b91e00.0dacb",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 119,
    "y": 37,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "17fbd1a8.a9b4ce"
      ]
    ]
  },
  {
    "id": "17fbd1a8.a9b4ce",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 194.28570556640625,
    "y": 77.23811149597168,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "cd1ac734.4667a8"
      ]
    ]
  },
  {
    "id": "cd1ac734.4667a8",
    "type": "method",
    "name": "method site-vnf-topology-operation-delete",
    "xml": "<method rpc='site-vnf-topology-operation-delete' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 215.42861938476562,
    "y": 167,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "8f642f93.2a801"
      ]
    ]
  },
  {
    "id": "8f642f93.2a801",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 347.6666564941406,
    "y": 226.66668701171875,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "76c48b79.d84cf4",
        "bfaa0886.4026e8",
        "d0626629.81a8c8",
        "a00c6468.40dc18",
        "d6cddc91.15c3a",
        "1aa89ef4.371e21"
      ]
    ]
  },
  {
    "id": "76c48b79.d84cf4",
    "type": "switchNode",
    "name": "switch service-data.vnfs.vnf_length",
    "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 668.9895935058594,
    "y": 73.98958587646484,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "e84dd0b6.bd49f",
        "6abf3e26.6123e",
        "cad37430.9a8ae8"
      ]
    ]
  },
  {
    "id": "e84dd0b6.bd49f",
    "type": "other",
    "name": "Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1081.9895935058594,
    "y": 66.9896469116211,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "1e4a1529.eacc1b"
      ]
    ]
  },
  {
    "id": "1e4a1529.eacc1b",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 1300.7670593261719,
    "y": 42.87859344482422,
    "z": "7bfb2dad.3744a4",
    "wires": [
      
    ]
  },
  {
    "id": "6abf3e26.6123e",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 993.9899597167969,
    "y": 120.98966217041016,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "8e41da85.f0c968"
      ]
    ]
  },
  {
    "id": "8e41da85.f0c968",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1165.2594909667969,
    "y": 104.54419708251953,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "40ff91c4.16b8c",
        "901feb4d.552588"
      ]
    ]
  },
  {
    "id": "40ff91c4.16b8c",
    "type": "for",
    "name": "for vidx..service-data.vnfs.vnf_length[]",
    "xml": "<for index='vidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1463.2754821777344,
    "y": 85.41820526123047,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "21662e74.a22c42"
      ]
    ]
  },
  {
    "id": "901feb4d.552588",
    "type": "switchNode",
    "name": "switch tmp.vidx ",
    "xml": "<switch test=\"`$tmp.vidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1384.5768737792969,
    "y": 128.4013900756836,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "ee9e043e.1f4d08"
      ]
    ]
  },
  {
    "id": "ee9e043e.1f4d08",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1585.0054626464844,
    "y": 133.9728012084961,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "b08c7bb.174c688"
      ]
    ]
  },
  {
    "id": "21662e74.a22c42",
    "type": "switchNode",
    "name": "switch vnfid found",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-id == $vnf-topology-operation-input.vnf-information.vnf-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1773.7040710449219,
    "y": 83.66829681396484,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "c6e29244.22831"
      ]
    ]
  },
  {
    "id": "b08c7bb.174c688",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 1756.4339294433594,
    "y": 134.11565399169922,
    "z": "7bfb2dad.3744a4",
    "wires": [
      
    ]
  },
  {
    "id": "c6e29244.22831",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1979.6563415527344,
    "y": 82.56102752685547,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "34cb4af6.5dade6"
      ]
    ]
  },
  {
    "id": "34cb4af6.5dade6",
    "type": "set",
    "name": "set tmp.vidx and ctx.vnf-data",
    "xml": "<set>\n<parameter name='tmp.vidx' value='`$vidx`' />\n<parameter name='ctx.vnf-data.' value='`$service-data.vnfs.vnf[$vidx].`' />\n",
    "comments": "",
    "x": 2218.1880798339844,
    "y": 78.31102752685547,
    "z": "7bfb2dad.3744a4",
    "wires": [
      
    ]
  },
  {
    "id": "cad37430.9a8ae8",
    "type": "outcome",
    "name": "0",
    "xml": "<outcome value='0'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1075.9583435058594,
    "y": 30.958335876464844,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "1e4a1529.eacc1b"
      ]
    ]
  },
  {
    "id": "4dc3e987.9fd4e8",
    "type": "comment",
    "name": "TODO: Check validation",
    "info": "",
    "comments": "",
    "x": 625.9895935058594,
    "y": 25.989585876464844,
    "z": "7bfb2dad.3744a4",
    "wires": [
      
    ]
  },
  {
    "id": "bfaa0886.4026e8",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 590.333251953125,
    "y": 562.3333740234375,
    "z": "7bfb2dad.3744a4",
    "wires": [
      
    ]
  },
  {
    "id": "728d2d28.940264",
    "type": "for",
    "name": "for each vnf",
    "xml": "<for index='idx' start='`$vnf-index + 1`' end='`$service-data.vnfs.vnf_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1117.7793083190918,
    "y": 393.66661167144775,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "7caecd51.491534"
      ]
    ]
  },
  {
    "id": "347e4d01.6da902",
    "type": "comment",
    "name": "Remove VNF from service data",
    "info": "",
    "comments": "",
    "x": 640.9380798339844,
    "y": 342.2382507324219,
    "z": "7bfb2dad.3744a4",
    "wires": [
      
    ]
  },
  {
    "id": "7caecd51.491534",
    "type": "set",
    "name": "move vnf to remove one",
    "xml": "<set>\n\t<parameter name=\"$tmpidx\" value=\"`$idx - 1`\"/>\n\t<parameter name=\"service-data.vnfs.vnf[$tmpidx].\" value=\"$service-data.vnfs.vnf[$idx].\" />\n\t\n",
    "comments": "",
    "x": 1351.3704414367676,
    "y": 392.6905632019043,
    "z": "7bfb2dad.3744a4",
    "wires": [
      
    ]
  },
  {
    "id": "d6cddc91.15c3a",
    "type": "switchNode",
    "name": "switch vnf_length",
    "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 604.0371704101562,
    "y": 395.2462406158447,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "f6c22b0f.9c87a8",
        "3909fa08.1288e6"
      ]
    ]
  },
  {
    "id": "f6c22b0f.9c87a8",
    "type": "outcome",
    "name": "1",
    "xml": "<outcome value='1'>\n",
    "comments": "",
    "outputs": 1,
    "x": 781.0372123718262,
    "y": 355.91282749176025,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "489f0baa.cc5474"
      ]
    ]
  },
  {
    "id": "489f0baa.cc5474",
    "type": "set",
    "name": "Remove vnfs",
    "xml": "<set>\n\t<parameter name=\"service-data.vnfs.\" value=\"\"/>\n\n",
    "comments": "",
    "x": 944.7037086486816,
    "y": 355.91292667388916,
    "z": "7bfb2dad.3744a4",
    "wires": [
      
    ]
  },
  {
    "id": "3909fa08.1288e6",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 779.7039566040039,
    "y": 439.2461004257202,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "1459edc6.fe9a92"
      ]
    ]
  },
  {
    "id": "e0ce4e15.0694e",
    "type": "set",
    "name": "set new vnf length",
    "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf_length\" value=\"`$service-data.vnfs.vnf_length - 1`\"/>\n\n\t\n",
    "comments": "",
    "x": 1137.333396911621,
    "y": 484.2461853027344,
    "z": "7bfb2dad.3744a4",
    "wires": [
      
    ]
  },
  {
    "id": "1b0c5771.6e6a79",
    "type": "set",
    "name": "Remove the last vnf in the list",
    "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf[$service-data.vnfs.vnf_length-1].\" value=\"\"/>\n\n",
    "comments": "",
    "x": 1173.037052154541,
    "y": 439.3572063446045,
    "z": "7bfb2dad.3744a4",
    "wires": [
      
    ]
  },
  {
    "id": "1459edc6.fe9a92",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 948.3704452514648,
    "y": 439.9127473831177,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "728d2d28.940264",
        "1b0c5771.6e6a79",
        "e0ce4e15.0694e"
      ]
    ]
  },
  {
    "id": "d0626629.81a8c8",
    "type": "switchNode",
    "name": "switch current vnf-level-oper-status == PendingDelete",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.order-status == 'PendingDelete'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 702.9999885559082,
    "y": 181.00003623962402,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "aa414c85.4ebad"
      ]
    ]
  },
  {
    "id": "350728d2.6ecb38",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Cannot delete a VNF in a Created state\" />\n",
    "comments": "",
    "x": 1165.9999809265137,
    "y": 180,
    "z": "7bfb2dad.3744a4",
    "wires": [
      
    ]
  },
  {
    "id": "a00c6468.40dc18",
    "type": "switchNode",
    "name": "switch current vf-module_length",
    "xml": "<switch test=\"`$ctx.vnf-data.vf-modules.vf-module_length`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 653.3333320617676,
    "y": 267.00000190734863,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "e2c40a8f.28c2e8",
        "efcade27.df8a7",
        "fdf813a0.7dec9"
      ]
    ]
  },
  {
    "id": "e2c40a8f.28c2e8",
    "type": "outcome",
    "name": "0",
    "xml": "<outcome value='0'>\n",
    "comments": "",
    "outputs": 1,
    "x": 881.9999732971191,
    "y": 223.6666431427002,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "4056136c.450bfc"
      ]
    ]
  },
  {
    "id": "efcade27.df8a7",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>",
    "comments": "",
    "outputs": 1,
    "x": 880.5713844299316,
    "y": 265.0953006744385,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "4056136c.450bfc"
      ]
    ]
  },
  {
    "id": "4056136c.450bfc",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1029.1428985595703,
    "y": 245.0953016281128,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "fdf813a0.7dec9",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 880.5714340209961,
    "y": 306.52388858795166,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "dbbd756.2a74488"
      ]
    ]
  },
  {
    "id": "dbbd756.2a74488",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Cannot delete the VNF because there are VFs defined\" />\n",
    "comments": "",
    "x": 1047.7143287658691,
    "y": 306.09527683258057,
    "z": "7bfb2dad.3744a4",
    "wires": [
      
    ]
  },
  {
    "id": "aa414c85.4ebad",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1005,
    "y": 181,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        "350728d2.6ecb38"
      ]
    ]
  },
  {
    "id": "1aa89ef4.371e21",
    "type": "delete",
    "name": "delete Site in AAI",
    "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='generic-vnf' \n      key='generic-vnf.vnf-id = $prop.vnf-index' >",
    "comments": "",
    "outputs": 1,
    "x": 604,
    "y": 510,
    "z": "7bfb2dad.3744a4",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "e61bcb70.9a5e48",
    "type": "comment",
    "name": "TODO: AAI",
    "info": "",
    "comments": "",
    "x": 775,
    "y": 512,
    "z": "7bfb2dad.3744a4",
    "wires": [
      
    ]
  }
]
