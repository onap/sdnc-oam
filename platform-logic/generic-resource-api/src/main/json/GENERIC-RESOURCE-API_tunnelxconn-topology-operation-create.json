[
  {
    "id":"5425b93c.ce35a8",
    "type":"dgstart",
    "name":"DGSTART",
    "outputs":1,
    "x":144.99998474121094,
    "y":96.66666412353516,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "eba50a1f.c2b9f8"
      ]
    ]
  },
  {
    "id":"eba50a1f.c2b9f8",
    "type":"service-logic",
    "name":"GENERIC-RESOURCE-API ${project.version}",
    "module":"GENERIC-RESOURCE-API",
    "version":"${project.version}",
    "comments":"",
    "xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs":1,
    "x":241.23806381225586,
    "y":157.61905479431152,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "3b82c53f.b432fa"
      ]
    ]
  },
  {
    "id":"3b82c53f.b432fa",
    "type":"method",
    "name":"tunnelxconn-topology-operation-create",
    "xml":"<method rpc='tunnelxconn-topology-operation-create' mode='sync'>\n",
    "comments":"",
    "outputs":1,
    "x":287.154842376709,
    "y":192.85711002349854,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "b9ac8d12.754da"
      ]
    ]
  },
  {
    "id":"b9ac8d12.754da",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "comments":"",
    "outputs":1,
    "x":147.97617721557617,
    "y":928.6904685497284,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "69ac42e1.e4d65c",
        "b1c7a6a5.9defc8",
        "39cc3f5d.10819",
        "aed16d9f.f38a6",
        "24c37fbf.0780f",
        "9893b8d2.7016f8",
        "320bee92.b28692",
        "bbe36c7f.834ce",
        "8450ac72.a6ffe",
        "2361b6a0.550aba",
        "3832691b.944b76",
        "38ea87d.d0fea78",
        "878792.b509187",
        "bfa803e4.9c9d5",
        "b656aebd.2a962",
        "62741dc6.9f6564",
        "f70642e.d81d4c",
        "ed4187ae.8c9468",
        "8e49c0c7.84eb3",
        "f1bd41f.de5a0c",
        "cd883182.ab7d",
        "ccabc2bd.56b01",
        "fb4ecf8f.0cfea",
        "a988246.e1abcd8",
        "7f5d2095.048d",
        "edcb1551.a2e428",
        "1abc1fc5.56324",
        "25500f6b.4a337",
        "708247b5.c2c728",
        "4fcdad71.18ebe4"
      ]
    ]
  },
  {
    "id":"b1c7a6a5.9defc8",
    "type":"returnSuccess",
    "name":"return success",
    "xml":"<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments":"",
    "x":447.6669464111328,
    "y":2405.214709043503,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"69ac42e1.e4d65c",
    "type":"set",
    "name":"set output to api handler",
    "xml":"<set>\n<parameter name='allotted-resource-id' value='`$tmp.ar.allotted-resource-id`' />\n<parameter name='tunnelxconn-object-path' value=\"`$tmp.ar.self-link`\"/>\n<parameter name='service-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $tunnelxconn-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n \n",
    "comments":"",
    "x":476.42086029052734,
    "y":2369.3372552394867,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"2361b6a0.550aba",
    "type":"set",
    "name":"set allotted-resource-oper-status",
    "xml":"<set>\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-oper-status.order-status' value='Created' />\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$tunnelxconn-topology-operation-input.request-information.request-action`' />\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$tunnelxconn-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$tunnelxconn-topology-operation-input.sdnc-request-header.svc-request-id`' />\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-oper-status.create-timestamp' value='`$tmp.current-time`' />\n",
    "comments":"",
    "x":501.7542037963867,
    "y":716.7180643081665,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"aed16d9f.f38a6",
    "type":"set",
    "name":"set tmp.ar.self-link",
    "xml":"<set>\n<parameter name='tmp.ar.self-link' value=\"`'restconf/config/GENERIC-RESOURCE-API:tunnelxconn-allotted-resources/tunnelxconn-allotted-resource/'\n + $tmp.ar.allotted-resource-id\n + '/allotted-resource-data/tunnelxconn-topology/'` \" />\n\n",
    "comments":"",
    "x":457.7380485534668,
    "y":309.9999895095825,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"39cc3f5d.10819",
    "type":"set",
    "name":"set tmp.ar.allotted-resource-id,etc",
    "xml":"<set>\n<parameter name='tmp.ar.allotted-resource-id' value='`$tunnelxconn-topology-operation-input.allotted-resource-information.allotted-resource-id`' />\n<parameter name='tmp.ar.parent-service-instance-id' value='`$tunnelxconn-topology-operation-input.allotted-resource-information.parent-service-instance-id`' />\n\n\n",
    "comments":"",
    "x":504.99731063842773,
    "y":276.2592554092407,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"24c37fbf.0780f",
    "type":"execute",
    "name":"execute Properties",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
    "comments":"",
    "outputs":1,
    "x":459.99342346191406,
    "y":345.89820289611816,
    "z":"7bef9372.a9efdc",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"320bee92.b28692",
    "type":"execute",
    "name":"execute RestApiCallNode - Get AR by id",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":526.5187377929688,
    "y":507.1261558532715,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "986dd975.a11b18",
        "6fb21962.e12b08"
      ]
    ]
  },
  {
    "id":"9893b8d2.7016f8",
    "type":"execute",
    "name":"generate allotted-resource url",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.tx-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.allotted-resource-id`\"/>\n",
    "comments":"",
    "outputs":1,
    "x":492.0648384094238,
    "y":405.68389320373535,
    "z":"7bef9372.a9efdc",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"986dd975.a11b18",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":783.8148765563965,
    "y":505.9339163303375,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "9c66d6d7.fd60d8"
      ]
    ]
  },
  {
    "id":"bbe36c7f.834ce",
    "type":"execute",
    "name":"execute RestApiCallNode - PUT AR by id",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.tx.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":524.5293121337891,
    "y":843.4342184066772,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "c63722bb.9ab6f",
        "cb190783.fa1958",
        "ea1ec053.16697"
      ]
    ]
  },
  {
    "id":"c63722bb.9ab6f",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":832.8373527526855,
    "y":847.7658462524414,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "f487696.3fa4098"
      ]
    ]
  },
  {
    "id":"cb190783.fa1958",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":825.8373794555664,
    "y":808.265753172338,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "f487696.3fa4098"
      ]
    ]
  },
  {
    "id":"ea1ec053.16697",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":829.5874176025391,
    "y":778.6228580474854,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "1f67dcbd.359013"
      ]
    ]
  },
  {
    "id":"f487696.3fa4098",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for tunnelxconn-allotted-resource\" />\n",
    "comments":"",
    "x":995.5874176025391,
    "y":809.0157770141959,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"9c66d6d7.fd60d8",
    "type":"block",
    "name":"block: atomic",
    "xml":"<block atomic=\"true\">\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":964.8148307800293,
    "y":506.43386578559875,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "d0782591.fde1d8",
        "93e07a98.9095d8"
      ]
    ]
  },
  {
    "id":"d0782591.fde1d8",
    "type":"switchNode",
    "name":"switch tx length",
    "xml":"<switch test='`$mdsal-ar.tunnelxconn-allotted-resource_length`'>\n",
    "comments":"",
    "outputs":1,
    "x":1210.672077178955,
    "y":540.7196290493011,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "341aa40b.170f5c"
      ]
    ]
  },
  {
    "id":"341aa40b.170f5c",
    "type":"other",
    "name":"outcome 1",
    "xml":"<outcome value='1'>\n",
    "comments":"",
    "outputs":1,
    "x":1401.6720809936523,
    "y":540.7196266651154,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "442c58ec.bf8ed8"
      ]
    ]
  },
  {
    "id":"23b8c983.6faf26",
    "type":"set",
    "name":"set tx-ar from get",
    "xml":"<set>\n<parameter name='tx-ar.' value='$mdsal-ar.tunnelxconn-allotted-resource[0].' />\n",
    "comments":"",
    "x":1801.5292167663574,
    "y":541.2910509109497,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"442c58ec.bf8ed8",
    "type":"block",
    "name":"block: atomic",
    "xml":"<block atomic='true'>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1572.5290641784668,
    "y":541.2910957336426,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "23b8c983.6faf26",
        "11fbc01e.51de6",
        "643f62c0.e6644c"
      ]
    ]
  },
  {
    "id":"11fbc01e.51de6",
    "type":"set",
    "name":"set oper-status",
    "xml":"<set>\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$tx-ar.allotted-resource-data.allotted-resource-operation-information.request-information.request-action`' />\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$tx-ar.allotted-resource-status.rpc-action`' />\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$tx-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.svc-request-id`' />\n\n",
    "comments":"",
    "x":1799.5294609069824,
    "y":608.719614982605,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"979c0497.6764e8",
    "type":"comment",
    "name":"GET tunnelxconn-allotted-resource from mdsal",
    "info":"",
    "comments":"",
    "x":551.8148002624512,
    "y":470.43385672569275,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"643f62c0.e6644c",
    "type":"switchNode",
    "name":"switch order-status",
    "xml":"<switch test='`$tx-ar.allotted-resource-data.allotted-resource-oper-status.order-status`'>\n",
    "comments":"",
    "outputs":1,
    "x":1809.529239654541,
    "y":574.2910490036011,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "538f3b15.287974",
        "f19583cb.5aa08"
      ]
    ]
  },
  {
    "id":"538f3b15.287974",
    "type":"outcome",
    "name":"outcome PendingCreate",
    "xml":"<outcome value='PendingCreate'>\n",
    "comments":"",
    "outputs":1,
    "x":2021.1291961669922,
    "y":535.2910490036011,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "8fca37d0.fb1e08"
      ]
    ]
  },
  {
    "id":"f19583cb.5aa08",
    "type":"outcome",
    "name":"outcome Other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":2046.8435707092285,
    "y":570.7196397781372,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "8fca37d0.fb1e08"
      ]
    ]
  },
  {
    "id":"4d62a09e.e2147",
    "type":"comment",
    "name":"Set allotted-resource-identifiers",
    "info":"",
    "comments":"",
    "x":507.338623046875,
    "y":561.0053100585938,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"93e07a98.9095d8",
    "type":"set",
    "name":"save backup copy of mdsal-ar for rollback",
    "xml":"<set>\n<parameter name='bk-tx-ar' value='$mdsal-ar.' />\n",
    "comments":"",
    "x":1290.3864097595215,
    "y":506.4339578151703,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"103274a2.86396b",
    "type":"comment",
    "name":"Create urls for restapi",
    "info":"",
    "comments":"",
    "x":462.95764541625977,
    "y":375.2910203933716,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"1f67dcbd.359013",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":971.2433853149414,
    "y":774.8150272369385,
    "z":"7bef9372.a9efdc",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"6351b35c.deaecc",
    "type":"comment",
    "name":"TO DO: vnf/put parent",
    "info":"",
    "comments":"",
    "x":475.2433624267578,
    "y":782.148218154907,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"8450ac72.a6ffe",
    "type":"execute",
    "name":"execute getTime",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='setTime' >\n    <parameter name=\"outputPath\" value=\"tmp.current-time\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":449.2433662414551,
    "y":678.1482191085815,
    "z":"7bef9372.a9efdc",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"6fb21962.e12b08",
    "type":"other",
    "name":"other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":783.5766716003418,
    "y":542.1480891704559,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "9291fcc2.8c1d9"
      ]
    ]
  },
  {
    "id":"9291fcc2.8c1d9",
    "type":"block",
    "name":"block: atomic",
    "xml":"<block atomic=\"true\">\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":963.5766220092773,
    "y":542.8146398067474,
    "z":"7bef9372.a9efdc",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"3832691b.944b76",
    "type":"set",
    "name":"set id",
    "xml":"<set>\n<parameter name='tx-ar.allotted-resource-id' value=\"`$tmp.ar.allotted-resource-id` \" />\n<parameter name='tx-ar.allotted-resource-status.action' value=\"`$tunnelxconn-topology-operation-input.request-information.request-action` \" />\n<parameter name='tx-ar.allotted-resource-status.rpc-name' value=\"tunnelxconn-topology-operation\" />\n<parameter name='tx-ar.allotted-resource-status.rpc-action' value=\"`$tunnelxconn-topology-operation-input.sdnc-request-header.svc-action` \" />\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-operation-information.request-information.' value=\"`$tunnelxconn-topology-operation-input.request-information.` \" />\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.' value=\"`$tunnelxconn-topology-operation-input.sdnc-request-header.` \" />\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-operation-information.service-information.' value=\"`$tunnelxconn-topology-operation-input.service-information.` \" />\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-operation-information.allotted-resource-information.' value=\"`$tunnelxconn-topology-operation-input.allotted-resource-information.` \" />\n<parameter name='tx-ar.allotted-resource-data.allotted-resource-operation-information.tunnelxconn-request-input.' value=\"`$tunnelxconn-topology-operation-input.tunnelxconn-request-input.` \" />",
    "comments":"",
    "x":424.2434196472168,
    "y":599.8148612976074,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"8fca37d0.fb1e08",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":2235.599712371826,
    "y":536.6666831970215,
    "z":"7bef9372.a9efdc",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"b656aebd.2a962",
    "type":"execute",
    "name":"execute RestApiCallNode - setup vgMUX-vG vxlan tunnel port",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.vpp.vxlan-tunnel.templatefile`\" />\n    <parameter name='restapiUrl' value='`$tmp.honeycomb.url + $tmp.vpp-honeycomb-url`' />\n    <parameter name='restapiUser' value='`$prop.honeycomb.user`' />\n    <parameter name='restapiPassword' value='`$prop.honeycomb.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"honeycomb-vnf\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":586.8331756591797,
    "y":1558.118780374527,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "16285e24.067ef2",
        "b6f443.c4b94bc",
        "40ec4b4d.f4f564"
      ]
    ]
  },
  {
    "id":"16285e24.067ef2",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":951.1412963867188,
    "y":1600.4504190906882,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "9d48f75.a38c408"
      ]
    ]
  },
  {
    "id":"b6f443.c4b94bc",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":942.1413459777832,
    "y":1568.9504448398948,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "9d48f75.a38c408"
      ]
    ]
  },
  {
    "id":"40ec4b4d.f4f564",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":945.8913841247559,
    "y":1539.3075497150421,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "52614f1a.d930b"
      ]
    ]
  },
  {
    "id":"9d48f75.a38c408",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for tunnelxconn-allotted-resource\" />\n",
    "comments":"",
    "x":1111.8913841247559,
    "y":1569.7004686817527,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"52614f1a.d930b",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1087.5473518371582,
    "y":1535.4997189044952,
    "z":"7bef9372.a9efdc",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"878792.b509187",
    "type":"set",
    "name":"set vgMUX-vG VXLAN Tunnel Port Props",
    "xml":"<set>\n<parameter name='tmp.tunnel-name' value=\"`$tmp.tunnel-vgMUX-vG-name` \" />\n<parameter name='tmp.tunnel-dest-ip' value=\"`$tx-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-assignments.vg-ip` \" />\n<parameter name='tmp.tunnel-src-ip' value=\"`$tx-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-assignments.vgmux-bearer-ip` \" />\n<parameter name='tmp.tunnel-vni' value=\"`$tx-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-assignments.vni` \" />",
    "comments":"",
    "x":521.9443664550781,
    "y":1450.452689409256,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"bfa803e4.9c9d5",
    "type":"execute",
    "name":"generate full vgMUX-vG vpp-honeycomb url",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.vpp-honeycomb`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.vpp-honeycomb-url\"/>\n    <parameter name=\"target\" value=\"{tunnel-name}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.tunnel-name`\"/>\n",
    "comments":"",
    "outputs":1,
    "x":525.9443664550781,
    "y":1517.1189033985138,
    "z":"7bef9372.a9efdc",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"38ea87d.d0fea78",
    "type":"execute",
    "name":"generate honeycomb-url to vgMUX",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.honeycomb.url`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.honeycomb.url\"/>\n    <parameter name=\"target\" value=\"{honeycomb-instance-ip}\"/>\n    <parameter name=\"replacement\" value=\"`$tx-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-assignments.vgmux-mgmt-ip`\"/>\n",
    "comments":"",
    "outputs":1,
    "x":505.2776641845703,
    "y":1388.78569149971,
    "z":"7bef9372.a9efdc",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"62741dc6.9f6564",
    "type":"execute",
    "name":"execute RestApiCallNode - setup vgMUX-vBRG vxlan tunnel xconnect",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.vpp.xconnect.templatefile`\" />\n    <parameter name='restapiUrl' value=\"`$tmp.honeycomb.url + $tmp.vpp-honeycomb-url + '/v3po:l2' `\" />\n    <parameter name='restapiUser' value='`$prop.honeycomb.user`' />\n    <parameter name='restapiPassword' value='`$prop.honeycomb.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"honeycomb-vnf\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":602.5001068115234,
    "y":1975.6669371128082,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "a53d2b91.3b52c8",
        "aed6109b.e3125",
        "8b7f778b.fd0698"
      ]
    ]
  },
  {
    "id":"a53d2b91.3b52c8",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":932.8081874847412,
    "y":2013.9984723553061,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "ae37a231.12e05"
      ]
    ]
  },
  {
    "id":"aed6109b.e3125",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":923.8082370758057,
    "y":1982.4984981045127,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "ae37a231.12e05"
      ]
    ]
  },
  {
    "id":"8b7f778b.fd0698",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":927.5582752227783,
    "y":1952.85560297966,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "514e5d21.41baa4"
      ]
    ]
  },
  {
    "id":"ae37a231.12e05",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for tunnelxconn-allotted-resource\" />\n",
    "comments":"",
    "x":1093.5582752227783,
    "y":1983.2485219463706,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"514e5d21.41baa4",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1069.2142429351807,
    "y":1949.0477721691132,
    "z":"7bef9372.a9efdc",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"f70642e.d81d4c",
    "type":"set",
    "name":"set vgMUX to vG and vgMUX to vBRG VXLAN Tunnel Name",
    "xml":"<set>\n<parameter name='tmp.tunnel-vgMUX-vG-name' value=\"`'vxlanTun' + $tx-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-assignments.vg-ip` \" />\n<parameter name='tmp.tunnel-vgMUX-vBRG-name' value=\"`'vxlanTun' + $tx-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-assignments.vbrg-wan-ip` \" />\n",
    "comments":"",
    "x":579.0001068115234,
    "y":1034.3334589004517,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"ed4187ae.8c9468",
    "type":"set",
    "name":"set vgMUX-vBRG VXLAN Tunnel Port Props",
    "xml":"<set>\n<parameter name='tmp.tunnel-name' value=\"`$tmp.tunnel-vgMUX-vBRG-name` \" />\n<parameter name='tmp.tunnel-dest-ip' value=\"`$tx-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-assignments.brg-wan-ip-address` \" />\n<parameter name='tmp.tunnel-src-ip' value=\"`$tx-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-assignments.vgmux-lan-ip` \" />\n<parameter name='tmp.tunnel-vni' value=\"`$tx-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-assignments.vni` \" />",
    "comments":"",
    "x":534.0001068115234,
    "y":1656.0001308918,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"f1bd41f.de5a0c",
    "type":"execute",
    "name":"execute RestApiCallNode - setup vgMUX-vBRG vxlan tunnel port",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.vpp.vxlan-tunnel.templatefile`\" />\n    <parameter name='restapiUrl' value='`$tmp.honeycomb.url + $tmp.vpp-honeycomb-url`' />\n    <parameter name='restapiUser' value='`$prop.honeycomb.user`' />\n    <parameter name='restapiPassword' value='`$prop.honeycomb.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"honeycomb-vnf\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":586.0000762939453,
    "y":1816.0001337528229,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "7b994f6e.2ccea",
        "2a62706f.9761e",
        "c6bfd5ec.9a61f8"
      ]
    ]
  },
  {
    "id":"7b994f6e.2ccea",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":952.3081665039062,
    "y":1798.3317257389426,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "61f4e388.7636dc"
      ]
    ]
  },
  {
    "id":"2a62706f.9761e",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":943.3082160949707,
    "y":1766.8317514881492,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "61f4e388.7636dc"
      ]
    ]
  },
  {
    "id":"c6bfd5ec.9a61f8",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":947.0582542419434,
    "y":1737.1888563632965,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "5f252d74.f8afc4"
      ]
    ]
  },
  {
    "id":"61f4e388.7636dc",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for tunnelxconn-allotted-resource\" />\n",
    "comments":"",
    "x":1113.0582542419434,
    "y":1767.581775330007,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"5f252d74.f8afc4",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1088.7142219543457,
    "y":1733.3810255527496,
    "z":"7bef9372.a9efdc",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"8e49c0c7.84eb3",
    "type":"execute",
    "name":"generate full vgMUX-vBRG vpp-honeycomb url",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.vpp-honeycomb`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.vpp-honeycomb-url\"/>\n    <parameter name=\"target\" value=\"{tunnel-name}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.tunnel-name`\"/>\n",
    "comments":"",
    "outputs":1,
    "x":538.0000457763672,
    "y":1708.0000870227814,
    "z":"7bef9372.a9efdc",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"ccabc2bd.56b01",
    "type":"set",
    "name":"set vgMUX-vBG xconnect url",
    "xml":"<set>\n<parameter name='tmp.tunnel-name' value=\"`$tmp.tunnel-vgMUX-vG-name` \" />",
    "comments":"",
    "x":472.0000648498535,
    "y":2044.000143289566,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"fb4ecf8f.0cfea",
    "type":"execute",
    "name":"generate full vgMUX-vG xconnect url",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.vpp-honeycomb`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.vpp-honeycomb-url\"/>\n    <parameter name=\"target\" value=\"{tunnel-name}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.tunnel-name`\"/>\n",
    "comments":"",
    "outputs":1,
    "x":500.00001525878906,
    "y":2106.000146150589,
    "z":"7bef9372.a9efdc",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"a988246.e1abcd8",
    "type":"set",
    "name":"set xconnect Tunnel target",
    "xml":"<set>\n<parameter name='tmp.tunnel-name' value=\"`$tmp.tunnel-vgMUX-vBRG-name` \" />\n",
    "comments":"",
    "x":468.00006103515625,
    "y":2174.0001480579376,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"cd883182.ab7d",
    "type":"set",
    "name":"set xconnect Tunnel target",
    "xml":"<set>\n<parameter name='tmp.tunnel-name' value=\"`$tmp.tunnel-vgMUX-vG-name` \" />\n",
    "comments":"",
    "x":460.00011444091797,
    "y":1880.0001337528229,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"7f5d2095.048d",
    "type":"execute",
    "name":"execute RestApiCallNode - setup vgMUX-vG vxlan tunnel xconnect",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.vpp.xconnect.templatefile`\" />\n    <parameter name='restapiUrl' value=\"`$tmp.honeycomb.url + $tmp.vpp-honeycomb-url + '/v3po:l2' `\" />\n    <parameter name='restapiUser' value='`$prop.honeycomb.user`' />\n    <parameter name='restapiPassword' value='`$prop.honeycomb.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"honeycomb-vnf\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":596.0000762939453,
    "y":2262.0001499652863,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "c9538bd0.5eae78",
        "57a7b895.527208",
        "3235e33c.e3918c"
      ]
    ]
  },
  {
    "id":"c9538bd0.5eae78",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":926.3081569671631,
    "y":2300.331685207784,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "543e5918.7ccf08"
      ]
    ]
  },
  {
    "id":"57a7b895.527208",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":917.3082065582275,
    "y":2268.8317109569907,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "543e5918.7ccf08"
      ]
    ]
  },
  {
    "id":"3235e33c.e3918c",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":921.0582447052002,
    "y":2239.188815832138,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "aa697d34.f0df2"
      ]
    ]
  },
  {
    "id":"543e5918.7ccf08",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for tunnelxconn-allotted-resource\" />\n",
    "comments":"",
    "x":1085.0583152770996,
    "y":2269.5818531513214,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"aa697d34.f0df2",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1062.7142124176025,
    "y":2235.380985021591,
    "z":"7bef9372.a9efdc",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"c757be35.33e12",
    "type":"comment",
    "name":"Get vgmux-mgmt-ip",
    "info":"",
    "comments":"",
    "x":269.33341217041016,
    "y":1082.6669282913208,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"708247b5.c2c728",
    "type":"get-resource",
    "name":"get-resource IPADDR from dmaap DHCP_MAP ",
    "xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='IPADDR' key=\"SELECT min(ip_addr) ip from DHCP_MAP where mac_addr = $tx-ar.allotted-resource-data.allotted-resource-operation-information.tunnelxconn-request-input.brg-wan-mac-address\" pfx=\"tmp.brg-wan-ip\" >\n",
    "comments":"",
    "outputs":1,
    "x":540,
    "y":923.3333129882812,
    "z":"7bef9372.a9efdc",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"4fcdad71.18ebe4",
    "type":"set",
    "name":"set tunnelxconn-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-assignments.vbrg-wan-ip",
    "xml":"<set>\n<parameter name='tunnelxconn-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-assignments.vbrg-wan-ip' value='`$tmp.brg-wan-ip.ip`' />\n",
    "comments":"",
    "x":706.1428833007812,
    "y":979.2498970031738,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"1abc1fc5.56324",
    "type":"call",
    "name":"call GENERIC-RESOURCE-API:get-vnf-api-parent-instance",
    "xml":"<call module='GENERIC-RESOURCE-API' rpc='get-vnf-api-parent-instance' mode='sync' >\n\n",
    "comments":"",
    "outputs":1,
    "x":575.0000610351562,
    "y":1234.9999103546143,
    "z":"7bef9372.a9efdc",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"edcb1551.a2e428",
    "type":"set",
    "name":"set tmp.search.parent-service-instance-id to find vgmux-mgmt-ip",
    "xml":"<set>\n<parameter name='tmp.search.parent-service-instance-id' value='`$tmp.ar.parent-service-instance-id`' />\n",
    "comments":"",
    "x":587.6667175292969,
    "y":1169.9999370574951,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"9a7e693a.047c88",
    "type":"set",
    "name":"set vgmux-mgmt-ip",
    "xml":"<set>\n<parameter name='tx-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-assignments.vgmux-mgmt-ip' value='`$parent-service-instance.vnf-topology-information.vnf-parameters[$paramidx].vnf-parameter-value`' />\n",
    "comments":"",
    "x":1331.6664733886719,
    "y":1296.6667757034302,
    "z":"7bef9372.a9efdc",
    "wires":[

    ]
  },
  {
    "id":"25500f6b.4a337",
    "type":"for",
    "name":"for vnf-parameters in parent-service-instance",
    "xml":"<for index='paramidx' start='0' end='`$parent-service-instance.vnf-topology-information.vnf-parameters_length`' >\n\n\n",
    "comments":"",
    "outputs":1,
    "x":531.666618347168,
    "y":1301.6664390563965,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "789239db.cf8fb8"
      ]
    ]
  },
  {
    "id":"789239db.cf8fb8",
    "type":"switchNode",
    "name":"switch parameter matches vgmux_private_ip_1",
    "xml":"<switch test='`$parent-service-instance.vnf-topology-information.vnf-parameters[$paramidx].vnf-parameter-name == vgmux_private_ip_1`'>\n\n\n",
    "comments":"",
    "outputs":1,
    "x":903.0000991821289,
    "y":1300.6664428710938,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "3b52b430.6fccec"
      ]
    ]
  },
  {
    "id":"3b52b430.6fccec",
    "type":"success",
    "name":"true",
    "xml":"<outcome value='true'>\n",
    "comments":"",
    "outputs":1,
    "x":1161.666446685791,
    "y":1298.3331747055054,
    "z":"7bef9372.a9efdc",
    "wires":[
      [
        "9a7e693a.047c88"
      ]
    ]
  }
]