[
  {
    "id": "d86fdeaf.90856",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 182.8570785522461,
    "y": 146.23809719085693,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "8c1fcf5.c30ac3"
      ]
    ]
  },
  {
    "id": "c3f643e9.793bf",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 107.57137298583984,
    "y": 105.99998569488525,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "d86fdeaf.90856"
      ]
    ]
  },
  {
    "id": "8c1fcf5.c30ac3",
    "type": "method",
    "name": "method site-vnf-topology-operation-deactivate",
    "xml": "<method rpc='site-vnf-topology-operation-deactivate' mode='sync'>",
    "comments": "",
    "outputs": 1,
    "x": 176,
    "y": 185.99997997283936,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "ed73a4d4.18b998"
      ]
    ]
  },
  {
    "id": "ed73a4d4.18b998",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 216.73809814453125,
    "y": 257.69349098205566,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "59f08d7c.e40f14",
        "c44bdf39.f49ac",
        "af671a8b.af38d8",
        "35b8b725.755a88",
        "6ebc8511.a2521c",
        "cf959324.083ab",
        "82cb066d.91c668",
        "2ec82407.2cc83c"
      ]
    ]
  },
  {
    "id": "6ebc8511.a2521c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 623.7856979370117,
    "y": 122.8095064163208,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "3eca00ab.dea9f",
        "33bd2a9b.930326",
        "fb6a76d8.c72038",
        "d8062777.1e2a88"
      ]
    ]
  },
  {
    "id": "3eca00ab.dea9f",
    "type": "switchNode",
    "name": "switch service-data.vnfs.vnf_length",
    "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 903.6747055053711,
    "y": 148.14282417297363,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "b63df83d.881f98",
        "2d9f4a28.834cf6"
      ]
    ]
  },
  {
    "id": "b63df83d.881f98",
    "type": "other",
    "name": "outcome Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1157.2858276367188,
    "y": 129.80951118469238,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "ce144d22.a6862"
      ]
    ]
  },
  {
    "id": "ce144d22.a6862",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 1331.2858428955078,
    "y": 129.80951118469238,
    "z": "662bc73e.2f2df8",
    "wires": []
  },
  {
    "id": "2d9f4a28.834cf6",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1140.7857971191406,
    "y": 165.80952167510986,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "5e80a5f7.14668c"
      ]
    ]
  },
  {
    "id": "5e80a5f7.14668c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1322.7859954833984,
    "y": 176.80952739715576,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "68893bf6.030534",
        "ef8a4172.bf9b"
      ]
    ]
  },
  {
    "id": "ef8a4172.bf9b",
    "type": "switchNode",
    "name": "switch tmp.vidx ",
    "xml": "<switch test=\"`$tmp.vidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1512.785888671875,
    "y": 193.80952167510986,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "3898f902.da4f46"
      ]
    ]
  },
  {
    "id": "fb6a76d8.c72038",
    "type": "switchNode",
    "name": "switch vnf-level-oper-status",
    "xml": "<switch test='`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.order-status`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 866.952507019043,
    "y": 243.69837760925293,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "9a6e14da.4f6898",
        "830ab1c4.069de"
      ]
    ]
  },
  {
    "id": "9a6e14da.4f6898",
    "type": "outcome",
    "name": "outcome Active",
    "xml": "<outcome value='Active'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1173.7858200073242,
    "y": 224.8094997406006,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "c41182b7.2c8a4"
      ]
    ]
  },
  {
    "id": "830ab1c4.069de",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1141.7858200073242,
    "y": 264.8094997406006,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "ff8457d6.891c88"
      ]
    ]
  },
  {
    "id": "ff8457d6.891c88",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VNF is not in appropriate state for activate. Current state is ' + $service-data.vnfs.vnf[$tmp.nidx].vnf-data.vnf-level-oper-status.order-status`\" />",
    "comments": "",
    "x": 1299.2858200073242,
    "y": 264.8094997406006,
    "z": "662bc73e.2f2df8",
    "wires": []
  },
  {
    "id": "33bd2a9b.930326",
    "type": "switchNode",
    "name": "switch vnf-id",
    "xml": "<switch test=\"`$vnf-topology-operation-input.vnf-information.vnf-id`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 845.7858047485352,
    "y": 88.80949878692627,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "660d1ca1.7f5824"
      ]
    ]
  },
  {
    "id": "660d1ca1.7f5824",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>",
    "comments": "",
    "outputs": 1,
    "x": 988.7857971191406,
    "y": 88.80950164794922,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "da90fecc.888a8"
      ]
    ]
  },
  {
    "id": "da90fecc.888a8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-information.vnf-id is a required input\" />\n",
    "comments": "",
    "x": 1137.2857971191406,
    "y": 88.8095006942749,
    "z": "662bc73e.2f2df8",
    "wires": []
  },
  {
    "id": "68893bf6.030534",
    "type": "for",
    "name": "for vidx..service-data.vnfs.vnf[]",
    "xml": "<for index='vidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1558.2859191894531,
    "y": 155.80951118469238,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "32659e4e.c6e252"
      ]
    ]
  },
  {
    "id": "32659e4e.c6e252",
    "type": "switchNode",
    "name": "switch vnf-id found",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-id == $vnf-topology-operation-input.vnf-information.vnf-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1844.2859191894531,
    "y": 155.80951118469238,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "760edd7e.39ca84"
      ]
    ]
  },
  {
    "id": "760edd7e.39ca84",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2029.7859954833984,
    "y": 155.80951309204102,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "e7380240.e1e34"
      ]
    ]
  },
  {
    "id": "e7380240.e1e34",
    "type": "set",
    "name": "set tmp.vidx and ctx.vnf-data",
    "xml": "<set>\n<parameter name='tmp.vidx' value='`$vidx`' />\n<parameter name='ctx.vnf-data.' value='`$service-data.vnfs.vnf[$vidx].vnf-data.`' />\n",
    "comments": "",
    "x": 2237.785919189453,
    "y": 155.80951118469238,
    "z": "662bc73e.2f2df8",
    "wires": []
  },
  {
    "id": "9f76132b.ac81b",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-information.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 1804.285888671875,
    "y": 193.80952167510986,
    "z": "662bc73e.2f2df8",
    "wires": []
  },
  {
    "id": "3898f902.da4f46",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1666.785888671875,
    "y": 193.80952167510986,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "9f76132b.ac81b"
      ]
    ]
  },
  {
    "id": "59f08d7c.e40f14",
    "type": "set",
    "name": "set vnf in service-data",
    "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.sdnc-request-header.' value='`$vnf-topology-operation-input.sdnc-request-header.`' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.request-information.' value='`$vnf-topology-operation-input.request-information.`' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.' value='`$vnf-topology-operation-input.service-information.`' />",
    "comments": "",
    "x": 610.5715866088867,
    "y": 591.0002222061157,
    "z": "662bc73e.2f2df8",
    "wires": []
  },
  {
    "id": "c44bdf39.f49ac",
    "type": "set",
    "name": "set vnfId and vnf-object-path",
    "xml": "<set>\n<parameter name='vnfId' value='`$vnf-topology-operation-input.vnf-information.vnf-id`' />\n<parameter name=\"vnf-object-path\" value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/vnfs/vnf/'  + $vnf-topology-operation-input.vnf-request-input.vnf-id  + '/vnf-data/'` \" />",
    "comments": "",
    "x": 632.1271820068359,
    "y": 628.2224435806274,
    "z": "662bc73e.2f2df8",
    "wires": []
  },
  {
    "id": "35b8b725.755a88",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 585.9049634933472,
    "y": 778.7778730392456,
    "z": "662bc73e.2f2df8",
    "wires": []
  },
  {
    "id": "af671a8b.af38d8",
    "type": "set",
    "name": "set vnf-level-oper-status to PendingDelete",
    "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.order-status' value='PendingDelete' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.last-rpc-action' value='`$vnf-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.last-action' value='`$vnf-topology-operation-input.request-information.request-action`' />\n",
    "comments": "",
    "x": 670.5715866088867,
    "y": 672.0002851486206,
    "z": "662bc73e.2f2df8",
    "wires": []
  },
  {
    "id": "c41182b7.2c8a4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1367.713279724121,
    "y": 228.88886868953705,
    "z": "662bc73e.2f2df8",
    "wires": [
      []
    ]
  },
  {
    "id": "d8062777.1e2a88",
    "type": "execute",
    "name": "execute requiredParameters",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='requiredParameters' >\n<parameter name=\"vnf-topology-operation-input.vnf-information.vnf-id\" value=\"$vnf-topology-operation-input.vnf-information.vnf-id\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 895.5716171264648,
    "y": 50.999999046325684,
    "z": "662bc73e.2f2df8",
    "wires": [
      []
    ]
  },
  {
    "id": "b2ebc544.1e6068",
    "type": "comment",
    "name": "site-vnf-topology-operation-deactivate",
    "info": "",
    "comments": "",
    "x": 489.8570785522461,
    "y": 51.238097190856934,
    "z": "662bc73e.2f2df8",
    "wires": []
  },
  {
    "id": "cf959324.083ab",
    "type": "for",
    "name": "for loop idx - VNF input parameters",
    "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 667.8572273254395,
    "y": 322.00002098083496,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "fe2f83f9.8338"
      ]
    ]
  },
  {
    "id": "fe2f83f9.8338",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 874.7529640197754,
    "y": 321.92188453674316,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "550bedb1.f170d4",
        "b37adbd9.2464a8"
      ]
    ]
  },
  {
    "id": "550bedb1.f170d4",
    "type": "switchNode",
    "name": "switch role",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$idx].name == 'role'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 1011.8701667785645,
    "y": 321.89532470703125,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "de4a1711.c3fb08"
      ]
    ]
  },
  {
    "id": "de4a1711.c3fb08",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1151.870174407959,
    "y": 322.89532470703125,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "d4dca6e6.2c3458"
      ]
    ]
  },
  {
    "id": "d4dca6e6.2c3458",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1300.419822692871,
    "y": 323.92201805114746,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "8481bd23.50386"
      ]
    ]
  },
  {
    "id": "8481bd23.50386",
    "type": "set",
    "name": "set role",
    "xml": "<set>\n<parameter name='prop.site.role' value='`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$idx].value`' />\n<parameter name='prop.site.sdwan' value=\"true\" />\n",
    "comments": "",
    "x": 1444.7531852722168,
    "y": 324.92203521728516,
    "z": "662bc73e.2f2df8",
    "wires": []
  },
  {
    "id": "82cb066d.91c668",
    "type": "switchNode",
    "name": "switch prop.site.sdwan",
    "xml": "<switch test=\"`$prop.site.sdwan`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 641.8570785522461,
    "y": 477.00004291534424,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "44689f8b.efef2"
      ]
    ]
  },
  {
    "id": "44689f8b.efef2",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 822.8572120666504,
    "y": 478.0000696182251,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "92d1a385.88b4d"
      ]
    ]
  },
  {
    "id": "1f34e7d.f4ed818",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1527.357234954834,
    "y": 446.00012397766113,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "444dfd43.933654"
      ]
    ]
  },
  {
    "id": "444dfd43.933654",
    "type": "set",
    "name": "set controller data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n",
    "comments": "",
    "x": 1715.8573303222656,
    "y": 440.0001336336136,
    "z": "662bc73e.2f2df8",
    "wires": []
  },
  {
    "id": "20f5a47d.bf5c7c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1530.848201751709,
    "y": 493.5741596221924,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "efd0bf42.a45d2"
      ]
    ]
  },
  {
    "id": "efd0bf42.a45d2",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 1704.4196128845215,
    "y": 481.85989570617676,
    "z": "662bc73e.2f2df8",
    "wires": []
  },
  {
    "id": "43e41f52.73e87",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1523.181209564209,
    "y": 534.9074726104736,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "b91e604b.71e8a"
      ]
    ]
  },
  {
    "id": "b91e604b.71e8a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 1710.9537658691406,
    "y": 530.3466653823853,
    "z": "662bc73e.2f2df8",
    "wires": []
  },
  {
    "id": "5edbf1df.1812f",
    "type": "get-resource",
    "name": "get-resource esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = SDWANController AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1260.3571472167969,
    "y": 494.0001298189163,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "1f34e7d.f4ed818",
        "20f5a47d.bf5c7c",
        "43e41f52.73e87"
      ]
    ]
  },
  {
    "id": "850d49b7.5d6588",
    "type": "execute",
    "name": "execute RestApiCallNode Create  SDWAN site",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-site.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/net/sites/action/batch-delete'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"site-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1288.8574905395508,
    "y": 692.0002012252808,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "ea765af1.578958",
        "a315c86f.c08e38"
      ]
    ]
  },
  {
    "id": "27adc5f9.0dcbfa",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 1782.5236206054688,
    "y": 665.8889733552933,
    "z": "662bc73e.2f2df8",
    "wires": [
      []
    ]
  },
  {
    "id": "ffec3641.8f04a8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
    "comments": "",
    "x": 1757.96826171875,
    "y": 727.4443560838699,
    "z": "662bc73e.2f2df8",
    "wires": []
  },
  {
    "id": "a315c86f.c08e38",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1612.96826171875,
    "y": 724.4443560838699,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "ffec3641.8f04a8"
      ]
    ]
  },
  {
    "id": "ea765af1.578958",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1609.4126358032227,
    "y": 666.1111413240433,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "27adc5f9.0dcbfa"
      ]
    ]
  },
  {
    "id": "8b940987.466908",
    "type": "execute",
    "name": "execute RestApiCallNode Get token",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
    "comments": "",
    "outputs": 1,
    "x": 1261.6112442016602,
    "y": 587.0041905641556,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "326c4c2.f406bb4",
        "e3754930.79e2e8"
      ]
    ]
  },
  {
    "id": "326c4c2.f406bb4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1526.611125946045,
    "y": 572.0040856599808,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "9184b52b.37e358"
      ]
    ]
  },
  {
    "id": "e3754930.79e2e8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1518.861125946045,
    "y": 613.646968960762,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "41ddc45.064fd3c"
      ]
    ]
  },
  {
    "id": "41ddc45.064fd3c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1644.944622039795,
    "y": 613.8930016756058,
    "z": "662bc73e.2f2df8",
    "wires": [
      []
    ]
  },
  {
    "id": "9184b52b.37e358",
    "type": "set",
    "name": "set token-id",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
    "comments": "",
    "x": 1663.611125946045,
    "y": 572.0040856599808,
    "z": "662bc73e.2f2df8",
    "wires": []
  },
  {
    "id": "6736685b.bef9d8",
    "type": "comment",
    "name": "tmp.thirdparty-sdnc-id is hardcoded value?",
    "info": "",
    "comments": "",
    "x": 1256.8610382080078,
    "y": 461.0040513277054,
    "z": "662bc73e.2f2df8",
    "wires": []
  },
  {
    "id": "92d1a385.88b4d",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 983.8571472167969,
    "y": 478.66657733917236,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "8b940987.466908",
        "850d49b7.5d6588",
        "5edbf1df.1812f"
      ]
    ]
  },
  {
    "id": "2ec82407.2cc83c",
    "type": "save",
    "name": "update siteInstance configuration in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='site-resource' \n      key='site-resource.id = $service-data.vnfs.vnf[$tmp.vidx].vnf-id' >\n<parameter name='id' value='`$service-data.vnfs.vnf[$tmp.vidx].vnf-id`' />      \n<parameter name='operational-status' value='PendingDelete' />\n",
    "comments": "",
    "outputs": 1,
    "x": 663.8571701049805,
    "y": 711.0001020431519,
    "z": "662bc73e.2f2df8",
    "wires": [
      []
    ]
  },
  {
    "id": "b37adbd9.2464a8",
    "type": "switchNode",
    "name": "switch siteId",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$idx].name == 'siteId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 1011.8700637817383,
    "y": 396.8953676223755,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "a2554bc6.d49ce8"
      ]
    ]
  },
  {
    "id": "a2554bc6.d49ce8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1151.8700714111328,
    "y": 397.8953676223755,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "6ecb0b06.7fedc4"
      ]
    ]
  },
  {
    "id": "6ecb0b06.7fedc4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1300.419719696045,
    "y": 398.9220609664917,
    "z": "662bc73e.2f2df8",
    "wires": [
      [
        "83210993.fce798"
      ]
    ]
  },
  {
    "id": "83210993.fce798",
    "type": "set",
    "name": "set siteId",
    "xml": "<set>\n<parameter name='prop.site.siteId' value='`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$idx].value`' />\n\n",
    "comments": "",
    "x": 1444.7530822753906,
    "y": 399.9220781326294,
    "z": "662bc73e.2f2df8",
    "wires": []
  },
  {
    "id": "48d793e7.102a6c",
    "type": "comment",
    "name": "Get siteId to delete",
    "info": "",
    "comments": "",
    "x": 1023.857048034668,
    "y": 366.0000238418579,
    "z": "662bc73e.2f2df8",
    "wires": []
  }
]
