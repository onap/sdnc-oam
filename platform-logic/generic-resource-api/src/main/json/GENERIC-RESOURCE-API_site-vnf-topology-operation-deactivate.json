[
  {
    "id": "4957f22c.5e2f1c",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 212,
    "y": 189.23809814453125,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "c6d0a907.91d928"
      ]
    ]
  },
  {
    "id": "91cb305c.596c5",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 136.71429443359375,
    "y": 148.99998664855957,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "4957f22c.5e2f1c"
      ]
    ]
  },
  {
    "id": "c6d0a907.91d928",
    "type": "method",
    "name": "method site-vnf-topology-operation-deactivate",
    "xml": "<method rpc='site-vnf-topology-operation-deactivate' mode='sync'>",
    "comments": "",
    "outputs": 1,
    "x": 205.1429214477539,
    "y": 228.99998092651367,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "1123bd39.e47163"
      ]
    ]
  },
  {
    "id": "1123bd39.e47163",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 245.88101959228516,
    "y": 300.69349193573,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "cb3ab0a3.18f7a",
        "9f93822a.38acf",
        "79d541bc.c80a2",
        "fd9e7734.9c2008",
        "1b149ea5.120f71",
        "75e2f346.784bbc",
        "afea211a.e0c0a",
        "f2b6a437.7e6008"
      ]
    ]
  },
  {
    "id": "1b149ea5.120f71",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 652.9286193847656,
    "y": 165.80950736999512,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "3c6f9bb2.b231d4",
        "233b3043.9673c",
        "a8b21c1e.3abec",
        "35b35733.634ca8"
      ]
    ]
  },
  {
    "id": "3c6f9bb2.b231d4",
    "type": "switchNode",
    "name": "switch service-data.vnfs.vnf_length",
    "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 932.817626953125,
    "y": 191.14282512664795,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "bcdc7cd3.0b4fb",
        "e83c4587.34b728"
      ]
    ]
  },
  {
    "id": "bcdc7cd3.0b4fb",
    "type": "other",
    "name": "outcome Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1186.4287490844727,
    "y": 172.8095121383667,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "e5a3d434.f56108"
      ]
    ]
  },
  {
    "id": "e5a3d434.f56108",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 1360.4287643432617,
    "y": 172.8095121383667,
    "z": "a0c86160.b392c",
    "wires": []
  },
  {
    "id": "e83c4587.34b728",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1169.9287185668945,
    "y": 208.80952262878418,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "da47adb6.7e467"
      ]
    ]
  },
  {
    "id": "da47adb6.7e467",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1351.9289169311523,
    "y": 219.80952835083008,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "d1af55da.8f3b18",
        "6cc13507.3cb79c"
      ]
    ]
  },
  {
    "id": "6cc13507.3cb79c",
    "type": "switchNode",
    "name": "switch tmp.vidx ",
    "xml": "<switch test=\"`$tmp.vidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1541.928810119629,
    "y": 236.80952262878418,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "7a52469e.0fa9f8"
      ]
    ]
  },
  {
    "id": "a8b21c1e.3abec",
    "type": "switchNode",
    "name": "switch vnf-level-oper-status",
    "xml": "<switch test='`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.order-status`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 896.0954284667969,
    "y": 286.69837856292725,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "263aaa11.82a2b6",
        "59d6bbbd.f09a24"
      ]
    ]
  },
  {
    "id": "263aaa11.82a2b6",
    "type": "outcome",
    "name": "outcome Active",
    "xml": "<outcome value='Active'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1202.9287414550781,
    "y": 267.8095006942749,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "894517c4.94cc68"
      ]
    ]
  },
  {
    "id": "59d6bbbd.f09a24",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1170.9287414550781,
    "y": 307.8095006942749,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "de14e045.7333a"
      ]
    ]
  },
  {
    "id": "de14e045.7333a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VNF is not in appropriate state for activate. Current state is ' + $service-data.vnfs.vnf[$tmp.nidx].vnf-data.vnf-level-oper-status.order-status`\" />",
    "comments": "",
    "x": 1328.4287414550781,
    "y": 307.8095006942749,
    "z": "a0c86160.b392c",
    "wires": []
  },
  {
    "id": "233b3043.9673c",
    "type": "switchNode",
    "name": "switch vnf-id",
    "xml": "<switch test=\"`$vnf-topology-operation-input.vnf-information.vnf-id`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 874.9287261962891,
    "y": 131.8094997406006,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "bd1b23ac.08604"
      ]
    ]
  },
  {
    "id": "bd1b23ac.08604",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>",
    "comments": "",
    "outputs": 1,
    "x": 1017.9287185668945,
    "y": 131.80950260162354,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "78d81ec0.02c25"
      ]
    ]
  },
  {
    "id": "78d81ec0.02c25",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-information.vnf-id is a required input\" />\n",
    "comments": "",
    "x": 1166.4287185668945,
    "y": 131.80950164794922,
    "z": "a0c86160.b392c",
    "wires": []
  },
  {
    "id": "d1af55da.8f3b18",
    "type": "for",
    "name": "for vidx..service-data.vnfs.vnf[]",
    "xml": "<for index='vidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1587.428840637207,
    "y": 198.8095121383667,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "ea3ec79e.bdec18"
      ]
    ]
  },
  {
    "id": "ea3ec79e.bdec18",
    "type": "switchNode",
    "name": "switch vnf-id found",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-id == $vnf-topology-operation-input.vnf-information.vnf-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1873.428840637207,
    "y": 198.8095121383667,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "a7ba6ae5.977098"
      ]
    ]
  },
  {
    "id": "a7ba6ae5.977098",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2058.9289169311523,
    "y": 198.80951404571533,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "4dbc76e0.8d7858"
      ]
    ]
  },
  {
    "id": "4dbc76e0.8d7858",
    "type": "set",
    "name": "set tmp.vidx and ctx.vnf-data",
    "xml": "<set>\n<parameter name='tmp.vidx' value='`$vidx`' />\n<parameter name='ctx.vnf-data.' value='`$service-data.vnfs.vnf[$vidx].vnf-data.`' />\n",
    "comments": "",
    "x": 2266.928840637207,
    "y": 198.8095121383667,
    "z": "a0c86160.b392c",
    "wires": []
  },
  {
    "id": "5ac1b74d.5a62b8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-information.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 1833.428810119629,
    "y": 236.80952262878418,
    "z": "a0c86160.b392c",
    "wires": []
  },
  {
    "id": "7a52469e.0fa9f8",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1695.928810119629,
    "y": 236.80952262878418,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "5ac1b74d.5a62b8"
      ]
    ]
  },
  {
    "id": "cb3ab0a3.18f7a",
    "type": "set",
    "name": "set vnf in service-data",
    "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.sdnc-request-header.' value='`$vnf-topology-operation-input.sdnc-request-header.`' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.request-information.' value='`$vnf-topology-operation-input.request-information.`' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.' value='`$vnf-topology-operation-input.service-information.`' />",
    "comments": "",
    "x": 639.7145080566406,
    "y": 634.00022315979,
    "z": "a0c86160.b392c",
    "wires": []
  },
  {
    "id": "9f93822a.38acf",
    "type": "set",
    "name": "set vnfId and vnf-object-path",
    "xml": "<set>\n<parameter name='vnfId' value='`$vnf-topology-operation-input.vnf-information.vnf-id`' />\n<parameter name=\"vnf-object-path\" value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/vnfs/vnf/'  + $vnf-topology-operation-input.vnf-request-input.vnf-id  + '/vnf-data/'` \" />",
    "comments": "",
    "x": 661.2701034545898,
    "y": 671.2224445343018,
    "z": "a0c86160.b392c",
    "wires": []
  },
  {
    "id": "fd9e7734.9c2008",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 615.0478849411011,
    "y": 821.7778739929199,
    "z": "a0c86160.b392c",
    "wires": []
  },
  {
    "id": "79d541bc.c80a2",
    "type": "set",
    "name": "set vnf-level-oper-status to PendingDelete",
    "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.order-status' value='PendingDelete' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.last-rpc-action' value='`$vnf-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.last-action' value='`$vnf-topology-operation-input.request-information.request-action`' />\n",
    "comments": "",
    "x": 699.7145080566406,
    "y": 715.0002861022949,
    "z": "a0c86160.b392c",
    "wires": []
  },
  {
    "id": "894517c4.94cc68",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1396.856201171875,
    "y": 271.88886964321136,
    "z": "a0c86160.b392c",
    "wires": [
      []
    ]
  },
  {
    "id": "35b35733.634ca8",
    "type": "execute",
    "name": "execute requiredParameters",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='requiredParameters' >\n<parameter name=\"vnf-topology-operation-input.vnf-information.vnf-id\" value=\"$vnf-topology-operation-input.vnf-information.vnf-id\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 924.7145385742188,
    "y": 94,
    "z": "a0c86160.b392c",
    "wires": [
      []
    ]
  },
  {
    "id": "13f26ce4.e0b983",
    "type": "comment",
    "name": "site-vnf-topology-operation-deactivate",
    "info": "",
    "comments": "",
    "x": 519,
    "y": 94.23809814453125,
    "z": "a0c86160.b392c",
    "wires": []
  },
  {
    "id": "75e2f346.784bbc",
    "type": "for",
    "name": "for loop idx - VNF input parameters",
    "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 697.0001487731934,
    "y": 365.0000219345093,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "ccc1f150.dcee8"
      ]
    ]
  },
  {
    "id": "ccc1f150.dcee8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 903.8958854675293,
    "y": 364.9218854904175,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "e5d9799e.ae8628",
        "1badb5ed.e28e8a"
      ]
    ]
  },
  {
    "id": "e5d9799e.ae8628",
    "type": "switchNode",
    "name": "switch role",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$idx].name == 'role'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 1041.0130882263184,
    "y": 364.89532566070557,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "a6693add.80f898"
      ]
    ]
  },
  {
    "id": "a6693add.80f898",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1181.013095855713,
    "y": 365.89532566070557,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "139aae5d.e30622"
      ]
    ]
  },
  {
    "id": "139aae5d.e30622",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1329.562744140625,
    "y": 366.9220190048218,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "3d248a1d.8a4626"
      ]
    ]
  },
  {
    "id": "3d248a1d.8a4626",
    "type": "set",
    "name": "set role",
    "xml": "<set>\n<parameter name='prop.site.role' value='`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$idx].value`' />\n<parameter name='prop.site.sdwan' value=\"true\" />\n",
    "comments": "",
    "x": 1473.8961067199707,
    "y": 367.9220361709595,
    "z": "a0c86160.b392c",
    "wires": []
  },
  {
    "id": "afea211a.e0c0a",
    "type": "switchNode",
    "name": "switch prop.site.sdwan",
    "xml": "<switch test=\"`$prop.site.sdwan`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 671,
    "y": 520.0000438690186,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "79bc523a.1ecdec"
      ]
    ]
  },
  {
    "id": "79bc523a.1ecdec",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 852.0001335144043,
    "y": 521.0000705718994,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "c9dc3c5b.ce873"
      ]
    ]
  },
  {
    "id": "44a4d10f.69bea",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1556.500156402588,
    "y": 489.00012493133545,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "4ad01ef7.c1305"
      ]
    ]
  },
  {
    "id": "4ad01ef7.c1305",
    "type": "set",
    "name": "set controller data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n",
    "comments": "",
    "x": 1745.0002517700195,
    "y": 483.0001345872879,
    "z": "a0c86160.b392c",
    "wires": []
  },
  {
    "id": "5be09b23.d55b04",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1559.991123199463,
    "y": 536.5741605758667,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "48c84162.ad4b8"
      ]
    ]
  },
  {
    "id": "48c84162.ad4b8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 1733.5625343322754,
    "y": 524.8598966598511,
    "z": "a0c86160.b392c",
    "wires": []
  },
  {
    "id": "89230c24.b3cdd",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1552.324131011963,
    "y": 577.907473564148,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "85634a7c.b937a8"
      ]
    ]
  },
  {
    "id": "85634a7c.b937a8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 1740.0966873168945,
    "y": 573.3466663360596,
    "z": "a0c86160.b392c",
    "wires": []
  },
  {
    "id": "a63c00b2.95bd5",
    "type": "get-resource",
    "name": "get-resource esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.thirdparty-sdnc-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1289.5000686645508,
    "y": 537.0001307725906,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "44a4d10f.69bea",
        "5be09b23.d55b04",
        "89230c24.b3cdd"
      ]
    ]
  },
  {
    "id": "d6db6a91.6f4a78",
    "type": "execute",
    "name": "execute RestApiCallNode Create  SDWAN site",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-site.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/net/sites/action/batch-delete'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"site-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1318.0004119873047,
    "y": 735.0002021789551,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "6896c2eb.698ffc"
      ]
    ]
  },
  {
    "id": "d2619b3c.655228",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 1811.6665420532227,
    "y": 708.8889743089676,
    "z": "a0c86160.b392c",
    "wires": [
      []
    ]
  },
  {
    "id": "abc65d9c.3615e",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
    "comments": "",
    "x": 1787.111183166504,
    "y": 770.4443570375443,
    "z": "a0c86160.b392c",
    "wires": []
  },
  {
    "id": "af0f8953.715328",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1642.111183166504,
    "y": 767.4443570375443,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "abc65d9c.3615e"
      ]
    ]
  },
  {
    "id": "6896c2eb.698ffc",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1638.5555572509766,
    "y": 709.1111422777176,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "d2619b3c.655228"
      ]
    ]
  },
  {
    "id": "98c6743f.874588",
    "type": "execute",
    "name": "execute RestApiCallNode Get token",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
    "comments": "",
    "outputs": 1,
    "x": 1290.754165649414,
    "y": 630.0041915178299,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "39a5c053.f8453"
      ]
    ]
  },
  {
    "id": "39a5c053.f8453",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1555.7540473937988,
    "y": 615.0040866136551,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "f6e07bec.bc35c8"
      ]
    ]
  },
  {
    "id": "a60d94cb.1ae848",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1548.0040473937988,
    "y": 656.6469699144363,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "a3e0da6b.559e48"
      ]
    ]
  },
  {
    "id": "a3e0da6b.559e48",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1674.0875434875488,
    "y": 656.8930026292801,
    "z": "a0c86160.b392c",
    "wires": [
      []
    ]
  },
  {
    "id": "f6e07bec.bc35c8",
    "type": "set",
    "name": "set token-id",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
    "comments": "",
    "x": 1692.7540473937988,
    "y": 615.0040866136551,
    "z": "a0c86160.b392c",
    "wires": []
  },
  {
    "id": "f570928f.4101f",
    "type": "comment",
    "name": "tmp.thirdparty-sdnc-id is hardcoded value?",
    "info": "",
    "comments": "",
    "x": 1286.0039596557617,
    "y": 504.0040522813797,
    "z": "a0c86160.b392c",
    "wires": []
  },
  {
    "id": "c9dc3c5b.ce873",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1013.0000686645508,
    "y": 521.6665782928467,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "98c6743f.874588",
        "d6db6a91.6f4a78",
        "a63c00b2.95bd5"
      ]
    ]
  },
  {
    "id": "f2b6a437.7e6008",
    "type": "save",
    "name": "update siteInstance configuration in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='site-resource' \n      key='site-resource.id = $service-data.vnfs.vnf[$tmp.vidx].vnf-id' >\n<parameter name='id' value='`$service-data.vnfs.vnf[$tmp.vidx].vnf-id`' />      \n<parameter name='operational-status' value='PendingDelete' />\n",
    "comments": "",
    "outputs": 1,
    "x": 693.0000915527344,
    "y": 754.0001029968262,
    "z": "a0c86160.b392c",
    "wires": [
      []
    ]
  },
  {
    "id": "1badb5ed.e28e8a",
    "type": "switchNode",
    "name": "switch siteId",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$idx].name == 'siteId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 1041.0129852294922,
    "y": 439.8953685760498,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "d169692c.c9c248"
      ]
    ]
  },
  {
    "id": "d169692c.c9c248",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1181.0129928588867,
    "y": 440.8953685760498,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "6b473348.32e71c"
      ]
    ]
  },
  {
    "id": "6b473348.32e71c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1329.5626411437988,
    "y": 441.922061920166,
    "z": "a0c86160.b392c",
    "wires": [
      [
        "b1ed9a25.d49d18"
      ]
    ]
  },
  {
    "id": "b1ed9a25.d49d18",
    "type": "set",
    "name": "set siteId",
    "xml": "<set>\n<parameter name='prop.site.siteId' value='`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$idx].value`' />\n\n",
    "comments": "",
    "x": 1473.8960037231445,
    "y": 442.9220790863037,
    "z": "a0c86160.b392c",
    "wires": []
  },
  {
    "id": "5308b9e7.a82c18",
    "type": "comment",
    "name": "Get siteId to delete",
    "info": "",
    "comments": "",
    "x": 1052.9999694824219,
    "y": 409.0000247955322,
    "z": "a0c86160.b392c",
    "wires": []
  }
]