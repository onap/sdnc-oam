[{"id":"6868b8a8.dbf5a8","type":"dgstart","name":"DGSTART","outputs":1,"x":112.85714721679688,"y":47.14285659790039,"z":"91b54cc.abe6fb","wires":[["7a4d3ba3.61bc54"]]},{"id":"926ca261.62938","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":136.04763793945312,"y":161.99207305908203,"z":"91b54cc.abe6fb","wires":[["7653f459.a9c4ac","64f19720.d90278","7cbb6ca3.ac8b74","a1d640d8.5970b","50070dff.5a6824","2c716907.879226","99b30318.a25b8","f6ea2e74.036bf","334378e9.992958"]]},{"id":"a0448fa2.008b4","type":"method","name":"method self-serve-vf-module-assign","xml":"<method rpc='self-serve-vf-module-assign' mode='sync'>\n","comments":"","outputs":1,"x":216.61905670166016,"y":101.84921169281006,"z":"91b54cc.abe6fb","wires":[["926ca261.62938"]]},{"id":"7a4d3ba3.61bc54","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":375.09534454345703,"y":47.33334922790527,"z":"91b54cc.abe6fb","wires":[["a0448fa2.008b4"]]},{"id":"64f19720.d90278","type":"switchNode","name":"switch vf-module-parameters.param_length","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param_length`'>\n","comments":"","outputs":1,"x":451.107177734375,"y":1364.512020111084,"z":"91b54cc.abe6fb","wires":[["85b4cef0.b1825"]]},{"id":"85b4cef0.b1825","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":711.1072082519531,"y":1364.512020111084,"z":"91b54cc.abe6fb","wires":[["748e831a.d0c23c"]]},{"id":"1d58f607.87766a","type":"call","name":"call GENERIC-RESOURCE-API:self-serve-vfmodule-ra-assignment","xml":"<call module='GENERIC-RESOURCE-API' rpc='self-serve-vfmodule-ra-assignment' mode='sync' >\n","comments":"","outputs":1,"x":1252.8214569091797,"y":1411.797770500183,"z":"91b54cc.abe6fb","wires":[["26ee1e68.97de82"]]},{"id":"56f2b98b.164b28","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Failed to get RA assignments: ' + $error-message`\" />\n","comments":"","x":1733.5356979370117,"y":1411.369174003601,"z":"91b54cc.abe6fb","wires":[]},{"id":"aba85aab.9a0a08","type":"for","name":"foreach vf-module-parameters.param[]","xml":"<for index='pidx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param_length`' >\n","comments":"","outputs":1,"x":736.3931427001953,"y":1674.6906070709229,"z":"91b54cc.abe6fb","wires":[["c9efa47e.335348","8aa3fdb3.22f8c"]]},{"id":"7653f459.a9c4ac","type":"set","name":"set ss.capability.execution-order[]","xml":"<set>\n<parameter name='ss.capability.execution-order[0]' value='generate-name' />\n<parameter name='ss.capability.execution-order[1]' value='alts-entitlement-assign' />\n<parameter name='ss.capability.execution-order[2]' value='alts-license-assign' />\n<parameter name='ss.capability.execution-order[3]' value='vlan-tag-assign' />\n<parameter name='ss.capability.execution-order[4]' value='mS-vlan-tag-assign' />\n<parameter name='ss.capability.execution-order[5]' value='eipam-ip-assignment' />\n<parameter name='ss.capability.execution-order[6]' value='eipam-create-pool' />\n<parameter name='ss.capability.execution-order[7]' value='netbox-ip-assign' />\n<parameter name='ss.capability.execution-order[8]' value='mac-address-assign' />\n<parameter name='ss.capability.execution-order[9]' value='mS-mac-address-assign' />\n<parameter name='ss.capability.execution-order[10]' value='create-vpe-pool' />\n<parameter name='ss.capability.execution-order[11]' value='unresolved-composite-data' />\n<parameter name='ss.capability.execution-order[12]' value='aai-vf-module-put' />\n<parameter name='ss.capability.execution-order_length' value='13' />\n","comments":"","x":423.27381134033203,"y":1226.571499824524,"z":"91b54cc.abe6fb","wires":[]},{"id":"7cbb6ca3.ac8b74","type":"for","name":"foreach capability-order[]","xml":"<for index='cidx' start='0' end='`$ss.capability.execution-order_length`' >\n","comments":"","outputs":1,"x":392.0357666015625,"y":1530.5118999481201,"z":"91b54cc.abe6fb","wires":[["92dcc6b8.e62178","f9d0cff9.6c71b","aba85aab.9a0a08","e3f5351e.f5ae18"]]},{"id":"c9efa47e.335348","type":"switchNode","name":"switch capability-name param vs. execution","xml":"<switch test='`$ss.capability-name == $tmp.param.capability-name`'>\n","comments":"","outputs":1,"x":1102.7859649658203,"y":1720.333399772644,"z":"91b54cc.abe6fb","wires":[["f81a6799.d54bc8"]]},{"id":"f81a6799.d54bc8","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1366.2859649658203,"y":1720.583399772644,"z":"91b54cc.abe6fb","wires":[["ea51742f.770a78"]]},{"id":"26ee1e68.97de82","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1579.3928031921387,"y":1411.2263641357422,"z":"91b54cc.abe6fb","wires":[["56f2b98b.164b28"]]},{"id":"92dcc6b8.e62178","type":"set","name":"set ss.capability-name","xml":"<set>\n<parameter name='ss.capability-name' value='`$ss.capability.execution-order[$cidx]`' />\n\n<!--\nss.capability.execution-order\n-->","comments":"","x":683.392822265625,"y":1530.4643516540527,"z":"91b54cc.abe6fb","wires":[]},{"id":"8aa3fdb3.22f8c","type":"set","name":"tmp.param.capability-name","xml":"<set>\n<parameter name='tmp.param.capability-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.capability-name`' />\n","comments":"","x":1052.1429901123047,"y":1674.9406099319458,"z":"91b54cc.abe6fb","wires":[]},{"id":"f9d0cff9.6c71b","type":"set","name":"set ss.capability-action = assign","xml":"<set>\n<parameter name='ss.capability-action' value='assign' />\n","comments":"","x":714.1069641113281,"y":1577.3809356689453,"z":"91b54cc.abe6fb","wires":[]},{"id":"e3f5351e.f5ae18","type":"set","name":"set capability-dg with 'self-serve-' + capability-name","xml":"<set>\n<parameter name='ss.capability-dg' value=\"`'self-serve-' + $ss.capability.execution-order[$cidx]`\" />\n","comments":"","x":776.4404296875,"y":1626.0358066558838,"z":"91b54cc.abe6fb","wires":[]},{"id":"fd294fda.d3f2","type":"set","name":"set sdnc-generated-cloud-resources = true","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.sdnc-generated-cloud-resources' \n\tvalue='true' />\n","comments":"","x":1038.8095397949219,"y":1113.0001754760742,"z":"91b54cc.abe6fb","wires":[]},{"id":"5c76fc7c.9945a4","type":"switchNode","name":"switch resource-resolution-data.status","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.status`'>\n","comments":"","outputs":1,"x":817.3693226405553,"y":2205.7819516318186,"z":"91b54cc.abe6fb","wires":[["962297ef.1b4ae8","50d68e38.aaa05"]]},{"id":"962297ef.1b4ae8","type":"other","name":"PENDING","xml":"<outcome value='PENDING'>\n","comments":"","outputs":1,"x":1086.726538521903,"y":2205.7819077628,"z":"91b54cc.abe6fb","wires":[["de4d28cd.f1c0b8"]]},{"id":"50d68e38.aaa05","type":"other","name":"FAILED","xml":"<outcome value='FAILED'>\n","comments":"","outputs":1,"x":1080.26235471453,"y":2256.746238436018,"z":"91b54cc.abe6fb","wires":[["de4d28cd.f1c0b8"]]},{"id":"de4d28cd.f1c0b8","type":"call","name":"call ss.capability-dg","xml":"<call module='GENERIC-RESOURCE-API' rpc='`$ss.capability-dg`' mode='sync' >\n","comments":"","outputs":1,"x":1295.3810871669225,"y":2257.508089746748,"z":"91b54cc.abe6fb","wires":[["aa328105.5a90d","b94864ab.41a158"]]},{"id":"99d1906.3546f7","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Encountered error from capability: '+ $ss.capability-dg + ', with error: '+ $error-message`\" />\n","comments":"","x":1870.0714214869913,"y":2611.1989409582957,"z":"91b54cc.abe6fb","wires":[]},{"id":"aa328105.5a90d","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1488.416437966483,"y":2257.222367967878,"z":"91b54cc.abe6fb","wires":[["5785c779.43b468"]]},{"id":"5785c779.43b468","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1651.6905544825963,"y":2256.5319087164744,"z":"91b54cc.abe6fb","wires":[["99d1906.3546f7","7c7199e0.e4fc38","33e435e5.b94ada","148b6290.868b6d","2648587b.758f38","7217dcc6.1f9534"]]},{"id":"7c7199e0.e4fc38","type":"execute","name":"execute RestApiCallNode - PUT vf-module","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ss.vfmodule.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ss-vfmodule-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ss-vfmodule\" />\n\n","comments":"","outputs":1,"x":1967.237994057792,"y":2512.905868257795,"z":"91b54cc.abe6fb","wires":[["58f9a59e.4560fc","7332862.47c3578"]]},{"id":"58f9a59e.4560fc","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2241.8316601344522,"y":2566.9040219443186,"z":"91b54cc.abe6fb","wires":[["85773de1.18cd6"]]},{"id":"7332862.47c3578","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2234.260294778007,"y":2513.4040419714793,"z":"91b54cc.abe6fb","wires":[["85773de1.18cd6"]]},{"id":"2c716907.879226","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/ss-vf-assign.log' />\n","comments":"","outputs":1,"x":334.6150894165039,"y":2801.2663040161133,"z":"91b54cc.abe6fb","wires":[[]]},{"id":"a1d640d8.5970b","type":"switchNode","name":"switch vf-module_length","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`'>\n","comments":"","outputs":1,"x":389.0594367980957,"y":281.4048547744751,"z":"91b54cc.abe6fb","wires":[["a95fd413.5e0e28","5795ddc4.7c3484","43cfb62f.bd11e8"]]},{"id":"a95fd413.5e0e28","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":601.6904067993164,"y":210.79764556884766,"z":"91b54cc.abe6fb","wires":[["9216bdc4.04dbd"]]},{"id":"d2eaae5b.c69a6","type":"set","name":"set vf-module-index=0","xml":"<set>\n<parameter name='vf-module-index' value='0' />\n","comments":"","x":940.8094367980957,"y":221.714430809021,"z":"91b54cc.abe6fb","wires":[]},{"id":"5795ddc4.7c3484","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":600.8689994812012,"y":349.58350563049316,"z":"91b54cc.abe6fb","wires":[["3a293e2a.3382a2"]]},{"id":"ff927cfe.36078","type":"set","name":"set vf-module-id","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id'\n   value='`$vf-module-topology-operation-input.vf-module-information.vf-module-id`' />\n","comments":"","x":957.0950775146484,"y":503.8244743347168,"z":"91b54cc.abe6fb","wires":[]},{"id":"f3a77d62.1d1e9","type":"set","name":"set vf-module-parameters","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.'\n  value='vf-module-topology-operation-input.vf-module-request-input.vf-module-input-parameters.' />\n","comments":"","x":1121.7856750488281,"y":1363.6672625541687,"z":"91b54cc.abe6fb","wires":[]},{"id":"595cc53d.0afe7c","type":"set","name":"set order-status to PendingCreate","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.order-status'\n  value='PendingCreate' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-rpc-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-action'\n  value='`$vf-module-topology-operation-input.request-information.request-action`' />","comments":"","x":1011.3692474365234,"y":1065.6876735687256,"z":"91b54cc.abe6fb","wires":[]},{"id":"33e435e5.b94ada","type":"set","name":"set vf data for restapi-call-node","xml":"<set>\n<parameter name='vf.vf-module-id'\n    value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id`' />\n<parameter name='vf.vf-module-data.sdnc-request-header.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.sdnc-request-header.`' />\n<parameter name='vf.vf-module-data.request-information.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.request-information.`' />\n<parameter name='vf.vf-module-data.service-information.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.service-information.`' />\n<parameter name='vf.vf-module-data.vnf-information.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vnf-information.`' />\n<parameter name='vf.vf-module-data.vf-module-information.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-information.`' />\n<parameter name='vf.vf-module-data.vf-module-topology.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.`' />\n<parameter name='vf.vf-module-data.vf-module-level-oper-status.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.`' />\n<parameter name='vf.vf-module-data.vf-module-request-input.vf-module-input-parameters.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-request-input.vf-module-input-parameters.`' />\n<parameter name='vf.vf-module-data.vf-module-request-input.request-version'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-request-input.request-version`' />\n<parameter name='vf.vf-module-data.vf-module-request-input.vf-module-name'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-request-input.vf-module-name`' />\n<parameter name='vf.vf-module-data.vf-module-request-input.tenant'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-request-input.tenant`' />\n<parameter name='vf.vf-module-data.vf-module-request-input.aic-cloud-region'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-request-input.aic-cloud-region`' />\n<parameter name='vf.vf-module-data.vf-module-request-input.aic-clli'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-request-input.aic-clli`' />","comments":"","x":1928.7500179835733,"y":2257.0238854544505,"z":"91b54cc.abe6fb","wires":[]},{"id":"148b6290.868b6d","type":"execute","name":"generate ss-vfmodule url replace service-instance-id","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.ss-vfmodule-assignments`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ss-vfmodule-url\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.service-information.service-instance-id`\"/>\n","comments":"","outputs":1,"x":1994.9999645778116,"y":2305.0239302771433,"z":"91b54cc.abe6fb","wires":[[]]},{"id":"2648587b.758f38","type":"execute","name":"generate ss-vfmodule url - replace vnf-id","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.ss-vfmodule-url`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ss-vfmodule-url\"/>\n    <parameter name=\"target\" value=\"{vnf-id}\"/>\n    <parameter name=\"replacement\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vnf-information.vnf-id`\"/>\n","comments":"","outputs":1,"x":1959.2856625148233,"y":2353.0828473227366,"z":"91b54cc.abe6fb","wires":[[]]},{"id":"7217dcc6.1f9534","type":"execute","name":"generate ss-vfmodule url - replace vf-module-id","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.ss-vfmodule-url`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ss-vfmodule-url\"/>\n    <parameter name=\"target\" value=\"{vf-module-id}\"/>\n    <parameter name=\"replacement\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id`\"/>\n","comments":"","outputs":1,"x":1981.2263363429483,"y":2402.9993474142893,"z":"91b54cc.abe6fb","wires":[[]]},{"id":"50070dff.5a6824","type":"set","name":"set ss.capability-type = vf-module","xml":"<set>\n<parameter name='ss.capability-type' value='vf-module' />\n","comments":"","x":424.17860412597656,"y":1183.571457862854,"z":"91b54cc.abe6fb","wires":[]},{"id":"748e831a.d0c23c","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":886.4643009730748,"y":1364.3928320748464,"z":"91b54cc.abe6fb","wires":[["f3a77d62.1d1e9","1d58f607.87766a","43c3be4e.88c54"]]},{"id":"99b30318.a25b8","type":"set","name":"set is-new-vfmodule = true","xml":"<set>\n<parameter name='is-new-vfmodule' value='true' />\n","comments":"","x":395.88111877441406,"y":161.82157707214355,"z":"91b54cc.abe6fb","wires":[]},{"id":"9b4dabbd.473368","type":"for","name":"for each existing VF module","xml":"<for index='idx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' >\n","comments":"","outputs":1,"x":959.7023773193359,"y":349.2738437652588,"z":"91b54cc.abe6fb","wires":[["49c1e178.08199"]]},{"id":"49c1e178.08199","type":"switchNode","name":"switch vf-module-id: input vs service-data","xml":"<switch test='`$vf-module-topology-operation-input.vf-module-information.vf-module-id == $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id`'>\n","comments":"","outputs":1,"x":1270.8215103149414,"y":349.84525871276855,"z":"91b54cc.abe6fb","wires":[["757c4d39.7a2634"]]},{"id":"757c4d39.7a2634","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1524.6905403137207,"y":349.66671562194824,"z":"91b54cc.abe6fb","wires":[["46d944ca.051e3c"]]},{"id":"621bd7bb.066da8","type":"set","name":"set is-new-vfmodule = false","xml":"<set>\n<parameter name='is-new-vfmodule' value='false' />\n","comments":"","x":1896.8572807312012,"y":348.92860412597656,"z":"91b54cc.abe6fb","wires":[]},{"id":"46d944ca.051e3c","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1666.1072845458984,"y":349.1786003112793,"z":"91b54cc.abe6fb","wires":[["621bd7bb.066da8","462be844.06c458","174805e6.ef092a"]]},{"id":"462be844.06c458","type":"break","name":"break","xml":"<break>\n","comments":"","x":1834.000072479248,"y":435.17857837677,"z":"91b54cc.abe6fb","wires":[]},{"id":"174805e6.ef092a","type":"set","name":"set vf-module-index = idx","xml":"<set>\n<parameter name='vf-module-index' value='`$idx`' />\n","comments":"","x":1889.8215942382812,"y":392.21425914764404,"z":"91b54cc.abe6fb","wires":[]},{"id":"2aa88539.254a4a","type":"set","name":"set new vf-module_length = vf-module-index + 1","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length' value='`$vf-module-index + 1`' />\n","comments":"","x":1022.1668586730957,"y":263.0358591079712,"z":"91b54cc.abe6fb","wires":[]},{"id":"3a293e2a.3382a2","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":738.0239143371582,"y":349.9643678665161,"z":"91b54cc.abe6fb","wires":[["8b651c5a.b4a3b","9b4dabbd.473368"]]},{"id":"15f363e3.8b92ac","type":"set","name":"set new vf-module_length++","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length' \n\tvalue='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length + 1`' />\n","comments":"","x":1507.2739372253418,"y":461.7143726348877,"z":"91b54cc.abe6fb","wires":[]},{"id":"8b651c5a.b4a3b","type":"switchNode","name":"switch is-new-vfmodule","xml":"<switch test='`$is-new-vfmodule`'>\n","comments":"","outputs":1,"x":945.5239105224609,"y":419.5357475280762,"z":"91b54cc.abe6fb","wires":[["3b3a4098.fabb6"]]},{"id":"3b3a4098.fabb6","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1143.3810653686523,"y":419.1071949005127,"z":"91b54cc.abe6fb","wires":[["77ebcf17.0833d"]]},{"id":"9216bdc4.04dbd","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":744.5239105224609,"y":242.46436214447021,"z":"91b54cc.abe6fb","wires":[["2aa88539.254a4a","d2eaae5b.c69a6"]]},{"id":"43cfb62f.bd11e8","type":"other","name":"0","xml":"<outcome value='0'>\n","comments":"","outputs":1,"x":602.8571472167969,"y":280.8928565979004,"z":"91b54cc.abe6fb","wires":[["9216bdc4.04dbd"]]},{"id":"f6ea2e74.036bf","type":"switchNode","name":"switch is-new-vfmodule","xml":"<switch test='`$is-new-vfmodule`'>\n","comments":"","outputs":1,"x":388.6071472167969,"y":504.6428565979004,"z":"91b54cc.abe6fb","wires":[["e56bd1dd.cbad"]]},{"id":"e56bd1dd.cbad","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":586.4643020629883,"y":504.2143039703369,"z":"91b54cc.abe6fb","wires":[["f7fa19a6.6ffac8"]]},{"id":"ee53e5f9.e02c38","type":"set","name":"Copy vf-module-topology data","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-topology-identifier.vf-module-id' \n    value='`$vf-module-topology-operation-input.vf-module-information.vf-module-id`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-topology-identifier.vf-module-name' \n    value='`$vf-module-topology-operation-input.vf-module-request-input.vf-module-name`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-topology-identifier.vf-module-type' \n    value='`$vf-module-topology-operation-input.vf-module-information.vf-module-type`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.tenant' \n    value='`$vf-module-topology-operation-input.vf-module-request-input.tenant`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.aic-cloud-region' \n    value='`$vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.aic-clli'\n    value='`$vf-module-topology-operation-input.vf-module-request-input.aic-clli`' />","comments":"","x":1002.3571624755859,"y":549.6429262161255,"z":"91b54cc.abe6fb","wires":[]},{"id":"c9ce7d81.f6fa5","type":"set","name":"set from DB","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.onap-model-information.model-invariant-uuid'\n  value='`$db.vf-module-model.invariant-uuid`' />\n","comments":"","x":1367.3689231872559,"y":602.0863666534424,"z":"91b54cc.abe6fb","wires":[]},{"id":"51df8658.dfdaf8","type":"switchNode","name":"switch input model-invariant-uuid","xml":"<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-invariant-uuid`'>\n","comments":"","outputs":1,"x":1011.2259979248047,"y":624.910810470581,"z":"91b54cc.abe6fb","wires":[["57ab166b.c9a278","8e1b452f.1d2198"]]},{"id":"57ab166b.c9a278","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":1216.8926696777344,"y":602.0537738800049,"z":"91b54cc.abe6fb","wires":[["c9ce7d81.f6fa5"]]},{"id":"8e1b452f.1d2198","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1218.3212661743164,"y":646.3393650054932,"z":"91b54cc.abe6fb","wires":[["6717b968.3358a8"]]},{"id":"6717b968.3358a8","type":"set","name":"set from input","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.onap-model-information.model-invariant-uuid'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-invariant-uuid`' />\n","comments":"","x":1372.6070022583008,"y":645.7679371833801,"z":"91b54cc.abe6fb","wires":[]},{"id":"dc34ea00.b18978","type":"set","name":"set from DB","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.onap-model-information.model-uuid'\n  value='`$db.vf-module-model.uuid`' />\n","comments":"","x":1368.3211936950684,"y":690.6250429153442,"z":"91b54cc.abe6fb","wires":[]},{"id":"37c6647e.c307dc","type":"switchNode","name":"switch input model-uuid","xml":"<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-uuid`'>\n","comments":"","outputs":1,"x":983.8450164794922,"y":713.4495477676392,"z":"91b54cc.abe6fb","wires":[["79b3c03d.b218a","6c9c814f.6dcac"]]},{"id":"79b3c03d.b218a","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":1217.8449897766113,"y":690.5924797058105,"z":"91b54cc.abe6fb","wires":[["dc34ea00.b18978"]]},{"id":"6c9c814f.6dcac","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1219.2735862731934,"y":734.8780708312988,"z":"91b54cc.abe6fb","wires":[["d315fdcb.a27e"]]},{"id":"d315fdcb.a27e","type":"set","name":"set from input","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.onap-model-information.model-uuid'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-uuid`' />\n","comments":"","x":1373.5593223571777,"y":734.3066430091858,"z":"91b54cc.abe6fb","wires":[]},{"id":"25dde480.8f7ebc","type":"set","name":"set from DB","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.onap-model-information.model-version'\n  value='`$db.vf-module-model.version`' />\n","comments":"","x":1359.464126586914,"y":779.482250213623,"z":"91b54cc.abe6fb","wires":[]},{"id":"aefced2b.6dfb8","type":"switchNode","name":"switch input model-version","xml":"<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-version`'>\n","comments":"","outputs":1,"x":985.9878883361816,"y":802.306694984436,"z":"91b54cc.abe6fb","wires":[["731561f3.cfc46","37e6f82.b6ecf08"]]},{"id":"731561f3.cfc46","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":1208.9878730773926,"y":779.4496574401855,"z":"91b54cc.abe6fb","wires":[["25dde480.8f7ebc"]]},{"id":"37e6f82.b6ecf08","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1210.4164695739746,"y":823.7352485656738,"z":"91b54cc.abe6fb","wires":[["fdaec125.0d1ba"]]},{"id":"fdaec125.0d1ba","type":"set","name":"set from input","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.onap-model-information.model-version'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-version`' />\n","comments":"","x":1364.702205657959,"y":823.1638207435608,"z":"91b54cc.abe6fb","wires":[]},{"id":"d0a8a05b.bad64","type":"set","name":"set from DB","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.onap-model-information.model-name'\n  value='`$db.vf-module-model.name`' />\n","comments":"","x":1359.464126586914,"y":866.625072479248,"z":"91b54cc.abe6fb","wires":[]},{"id":"c5a251a0.353b9","type":"switchNode","name":"switch input model-name","xml":"<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-name`'>\n","comments":"","outputs":1,"x":982.9878883361816,"y":889.449517250061,"z":"91b54cc.abe6fb","wires":[["6bdb46ec.cf2b98","77c53d8.21703c4"]]},{"id":"6bdb46ec.cf2b98","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":1208.9878730773926,"y":866.5924797058105,"z":"91b54cc.abe6fb","wires":[["d0a8a05b.bad64"]]},{"id":"77c53d8.21703c4","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1210.4164695739746,"y":910.8780708312988,"z":"91b54cc.abe6fb","wires":[["f9310941.3b7978"]]},{"id":"f9310941.3b7978","type":"set","name":"set from input","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.onap-model-information.model-name'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-name`' />\n","comments":"","x":1364.702205657959,"y":910.3066430091858,"z":"91b54cc.abe6fb","wires":[]},{"id":"fd5d17f0.6f26a8","type":"set","name":"set model-customization-uuid","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.onap-model-information.model-customization-uuid'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid`' />\n","comments":"","x":996.4402465820312,"y":963.387001991272,"z":"91b54cc.abe6fb","wires":[]},{"id":"4d64c961.455a88","type":"set","name":"copy input data","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.sdnc-request-header.'\n   value='$vf-module-topology-operation-input.sdnc-request-header.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.request-information.'\n   value='$vf-module-topology-operation-input.request-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.service-information.'\n   value='$vf-module-topology-operation-input.service-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vnf-information.'\n   value='$vf-module-topology-operation-input.vnf-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-information.'\n   value='$vf-module-topology-operation-input.vf-module-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-request-input.' \n    value='$vf-module-topology-operation-input.vf-module-request-input.' />","comments":"","x":953.0953216552734,"y":1018.071704864502,"z":"91b54cc.abe6fb","wires":[]},{"id":"f7fa19a6.6ffac8","type":"block","name":"block","xml":"<block>","atomic":"false","comments":"","outputs":1,"x":742.5595626831055,"y":503.9920482635498,"z":"91b54cc.abe6fb","wires":[["51df8658.dfdaf8","37c6647e.c307dc","aefced2b.6dfb8","c5a251a0.353b9","fd5d17f0.6f26a8","4d64c961.455a88","ee53e5f9.e02c38","ff927cfe.36078","595cc53d.0afe7c","fd294fda.d3f2"]]},{"id":"5ec7ba5.53a6544","type":"set","name":"set vf-module-index = vf-module_length","xml":"<set>\n<parameter name='vf-module-index' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' />\n","comments":"","x":1539.8571662902832,"y":417.8928642272949,"z":"91b54cc.abe6fb","wires":[]},{"id":"77ebcf17.0833d","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1286.3571662902832,"y":418.6428642272949,"z":"91b54cc.abe6fb","wires":[["5ec7ba5.53a6544","15f363e3.8b92ac"]]},{"id":"85773de1.18cd6","type":"set","name":"set error-message","xml":"<set>\n<parameter name=\"error-message\" value=\"Failed to persist self-serve vf-module assignments during assign in MD-SAL\" />","comments":"","x":2453.571432931083,"y":2513.2380597250803,"z":"91b54cc.abe6fb","wires":[]},{"id":"ea51742f.770a78","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":542.2857131958008,"y":2205.8096351623535,"z":"91b54cc.abe6fb","wires":[["5c76fc7c.9945a4","c3a314d.6ed30e8"]]},{"id":"c3a314d.6ed30e8","type":"break","name":"break","xml":"<break>\n","comments":"","x":719.2857197352819,"y":2648.0954072134837,"z":"91b54cc.abe6fb","wires":[]},{"id":"b94864ab.41a158","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1514.1071701049805,"y":2574.642890930176,"z":"91b54cc.abe6fb","wires":[["e31d5d91.e1082"]]},{"id":"e31d5d91.e1082","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"`'DONE: ' + $ss.capability-dg`\"/>\n\n","comments":"","outputs":1,"x":1657.8571701049805,"y":2573.392890930176,"z":"91b54cc.abe6fb","wires":[[]]},{"id":"43c3be4e.88c54","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"DONE with vfmodule-ra-assignment\"/>\n\n","comments":"","outputs":1,"x":1066.6071472167969,"y":1459.6428565979004,"z":"91b54cc.abe6fb","wires":[[]]},{"id":"6ee21bc.7790ce4","type":"execute","name":"execute PropertiesNode","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n","comments":"","outputs":1,"x":814.8571602957591,"y":1272.857115336827,"z":"91b54cc.abe6fb","wires":[[]]},{"id":"334378e9.992958","type":"switchNode","name":"switch prop.controller.user","xml":"<switch test='`$prop.controller.user`'>\n","comments":"","outputs":1,"x":403.57139587402344,"y":1273.2857360839844,"z":"91b54cc.abe6fb","wires":[["5f059ca4.ecd6d4"]]},{"id":"5f059ca4.ecd6d4","type":"failure","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":603.428491319929,"y":1272.8571506227768,"z":"91b54cc.abe6fb","wires":[["6ee21bc.7790ce4"]]}]